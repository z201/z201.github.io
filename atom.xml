<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>æ«å¶çš„å°åšå®¢</title>
  
  <subtitle>å…ˆå®Œæˆã€åœ¨å®Œç¾ã€‚</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="https://z201.cn/"/>
  <updated>2021-12-20T15:43:47.748Z</updated>
  <id>https://z201.cn/</id>
  
  <author>
    <name>èƒ–æ«å¶</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>RuståŸºç¡€è¯­æ³•</title>
    <link href="https://z201.cn/2021/11/25/Rust%E5%9F%BA%E7%A1%80%E8%AF%AD%E6%B3%95/"/>
    <id>https://z201.cn/2021/11/25/Rust%E5%9F%BA%E7%A1%80%E8%AF%AD%E6%B3%95/</id>
    <published>2021-11-25T14:49:11.000Z</published>
    <updated>2021-12-20T15:43:47.748Z</updated>
    
    <content type="html"><![CDATA[<h2 id="RuståŸºç¡€è¯­æ³•"><a href="#RuståŸºç¡€è¯­æ³•" class="headerlink" title="RuståŸºç¡€è¯­æ³•"></a>RuståŸºç¡€è¯­æ³•</h2><blockquote><p>Rust æ˜¯ä¸€ç§é™æ€ç±»å‹çš„è¯­è¨€ã€‚ Rust ä¸­çš„æ¯ä¸ªå€¼éƒ½æ˜¯æŸç§æ•°æ®ç±»å‹ã€‚ ç¼–è¯‘å™¨å¯ä»¥æ ¹æ®åˆ†é…ç»™å®ƒçš„å€¼è‡ªåŠ¨æ¨æ–­å˜é‡çš„æ•°æ®ç±»å‹ã€‚</p></blockquote><h3 id="let"><a href="#let" class="headerlink" title="let"></a>let</h3><blockquote><p>ä½¿ç”¨letå…³é”®å­—å£°æ˜å˜é‡</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">fn main() &#123;</span><br><span class="line">    println!(&quot;RuståŸºç¡€è¯­æ³•!&quot;);</span><br><span class="line">    let str_ &#x3D; &quot;String&quot;; &#x2F;&#x2F; string ç±»å‹</span><br><span class="line">    let f_ &#x3D; 1.1; &#x2F;&#x2F; float ç±»å‹</span><br><span class="line">    let bool_ &#x3D; true; &#x2F;&#x2F; boolean ç±»å‹</span><br><span class="line">    let char_ &#x3D; &#39;a&#39;; &#x2F;&#x2F; unicode character </span><br><span class="line">    println!(&quot;string &#123;&#125;&quot;,str_); </span><br><span class="line">    println!(&quot;float &#123;&#125;&quot;,f_); </span><br><span class="line">    println!(&quot;boolean &#123;&#125;&quot;,bool_); </span><br><span class="line">    println!(&quot;icon &#123;&#125;&quot;,char_); </span><br><span class="line">  </span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>Console</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">RuståŸºç¡€è¯­æ³•!</span><br><span class="line">string String</span><br><span class="line"><span class="built_in">float</span> 1.1</span><br><span class="line">boolean <span class="literal">true</span></span><br><span class="line">icon a</span><br></pre></td></tr></table></figure><a id="more"></a><h3 id="println"><a href="#println" class="headerlink" title="println!"></a>println!</h3><blockquote><p>æ‰“å°æ§åˆ¶å°æ–¹æ³•</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">#[macro_export]</span><br><span class="line">#[stable(feature &#x3D; &quot;rust1&quot;, since &#x3D; &quot;1.0.0&quot;)]</span><br><span class="line">#[allow_internal_unstable(print_internals, format_args_nl)]</span><br><span class="line">macro_rules! println &#123;</span><br><span class="line">    () &#x3D;&gt; ($crate::print!(&quot;\n&quot;));</span><br><span class="line">    ($($arg:tt)*) &#x3D;&gt; (&#123;</span><br><span class="line">        $crate::io::_print($crate::format_args_nl!($($arg)*));</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>ä¸€ä¸ªå‚æ•°æ˜¯å ä½ç¬¦ *{ }*ï¼Œç‰¹åˆ«çš„è¯­æ³•</li><li>ä¸€ä¸ªå‚æ•°æ˜¯å˜é‡æˆ–è€…å¸¸é‡</li></ul><h3 id="scalar-Types"><a href="#scalar-Types" class="headerlink" title="scalar Types"></a>scalar Types</h3><blockquote><p>Rustæœ‰å››ç§æ ‡é‡ç±»å‹ æ•´å‹ã€æµ®ç‚¹å‹ã€å¸ƒå°”å‹ã€å­—ç¬¦å‹</p></blockquote><h4 id="æ•´å‹"><a href="#æ•´å‹" class="headerlink" title="æ•´å‹"></a>æ•´å‹</h4><blockquote><p>æ•´å‹æ˜¯æŒ‡æ²¡æœ‰å°æ•°éƒ¨åˆ†çš„æ•°å­—ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œæ•´å‹æ˜¯ç”¨äºè¡¨ç¤ºæ•´æ•°çš„ã€‚æ•´å‹å¯ä»¥è¿›ä¸€æ­¥åˆ†ä¸ºæœ‰ç¬¦å·ï¼ˆSignedï¼‰ä¸æ— ç¬¦å·ï¼ˆUnsignedï¼‰çš„ã€‚å¯ä»¥å­˜å‚¨æ­£è´Ÿå€¼ã€‚</p></blockquote><table><thead><tr><th></th><th>å¤§å°</th><th>æœ‰ç¬¦å·Signed</th><th>æ— ç¬¦å·Unsigned</th></tr></thead><tbody><tr><td></td><td>8bit</td><td>i8</td><td>u8</td></tr><tr><td></td><td>16bit</td><td>i16</td><td>u16</td></tr><tr><td></td><td>32bit</td><td>i32</td><td>u32</td></tr><tr><td></td><td>64bit</td><td>i64</td><td>u64</td></tr><tr><td></td><td>128bit</td><td>i128</td><td>u128</td></tr><tr><td></td><td>arch</td><td>issize</td><td>Size</td></tr></tbody></table><h5 id="æ¡ˆä¾‹"><a href="#æ¡ˆä¾‹" class="headerlink" title="æ¡ˆä¾‹"></a>æ¡ˆä¾‹</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">let result &#x3D; 1;    &#x2F;&#x2F; é»˜è®¤ç±»å‹ä¸ºi32</span><br><span class="line">let u20:u32 &#x3D; 20;</span><br><span class="line">let i32:i32 &#x3D; -15;</span><br><span class="line">let s:isize &#x3D; 10;</span><br><span class="line">let count:usize &#x3D; 30;</span><br><span class="line">println!(&quot;result value is &#123;&#125;&quot;,result);</span><br><span class="line">println!(&quot;u20 is &#123;&#125; i32 is &#123;&#125;&quot;,u20,i32);</span><br><span class="line">println!(&quot;mark is &#123;&#125; and count is &#123;&#125;&quot;,s,count);</span><br></pre></td></tr></table></figure><ul><li>Console</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">result value is 1</span><br><span class="line">u20 is 20 i32 is -15</span><br><span class="line">mark is 10 and count is 30</span><br></pre></td></tr></table></figure><h4 id="æ•´å‹æº¢å‡º"><a href="#æ•´å‹æº¢å‡º" class="headerlink" title="æ•´å‹æº¢å‡º"></a>æ•´å‹æº¢å‡º</h4><blockquote><p>å½“åˆ†é…ç»™æ•´å‹å˜é‡çš„å€¼è¶…å‡ºè¯¥æ•´å‹åœ¨ Rust ä¸­å®šä¹‰å€¼çš„èŒƒå›´æ—¶ï¼Œå°±ä¼šå‘ç”Ÿæ•´å‹æº¢å‡º</p></blockquote><h5 id="æ¡ˆä¾‹-1"><a href="#æ¡ˆä¾‹-1" class="headerlink" title="æ¡ˆä¾‹"></a>æ¡ˆä¾‹</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">let u1:u8 &#x3D; 255;</span><br><span class="line">&#x2F;&#x2F; u8æ•°æ®èŒƒå›´ä¸º0~255</span><br><span class="line">let u2:u8 &#x3D; 256;   &#x2F;&#x2F;æº¢å‡ºå€¼ä¸º 1</span><br><span class="line">let u3:u8 &#x3D; 257;   &#x2F;&#x2F;æº¢å‡ºå€¼ä¸º 2</span><br><span class="line">let u4:u8 &#x3D; 258;    &#x2F;&#x2F;æº¢å‡ºå€¼ä¸º 3</span><br><span class="line"></span><br><span class="line">println!(&quot;1 is &#123;&#125; &quot;,u1);</span><br><span class="line">println!(&quot;2 is &#123;&#125;&quot;,u2);</span><br><span class="line">println!(&quot;3 is &#123;&#125;&quot;,u3);</span><br><span class="line">println!(&quot;4 is &#123;&#125;&quot;,u4);</span><br></pre></td></tr></table></figure><ul><li>Console</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">error: literal out of range <span class="keyword">for</span> `u8`</span><br><span class="line">  --&gt; src/main.rs:24:16</span><br><span class="line">   |</span><br><span class="line">24 |    <span class="built_in">let</span> u2:u8 = 256;   //æº¢å‡ºå€¼ä¸º 1</span><br><span class="line">   |                ^^^</span><br><span class="line">   |</span><br><span class="line">   = note: `<span class="comment">#[deny(overflowing_literals)]` on by default</span></span><br><span class="line">   = note: the literal `256` does not fit into the <span class="built_in">type</span> `u8` whose range is `0..=255`</span><br><span class="line"></span><br><span class="line">error: literal out of range <span class="keyword">for</span> `u8`</span><br><span class="line">  --&gt; src/main.rs:25:16</span><br><span class="line">   |</span><br><span class="line">25 |    <span class="built_in">let</span> u3:u8 = 257;   //æº¢å‡ºå€¼ä¸º 2</span><br><span class="line">   |                ^^^</span><br><span class="line">   |</span><br><span class="line">   = note: the literal `257` does not fit into the <span class="built_in">type</span> `u8` whose range is `0..=255`</span><br><span class="line"></span><br><span class="line">error: literal out of range <span class="keyword">for</span> `u8`</span><br><span class="line">  --&gt; src/main.rs:26:16</span><br><span class="line">   |</span><br><span class="line">26 |    <span class="built_in">let</span> u4:u8 = 258;    //æº¢å‡ºå€¼ä¸º 3</span><br><span class="line">   |                ^^^</span><br><span class="line">   |</span><br><span class="line">   = note: the literal `258` does not fit into the <span class="built_in">type</span> `u8` whose range is `0..=255`</span><br><span class="line"></span><br><span class="line">error: could not compile `learning-02` due to 3 previous errors</span><br></pre></td></tr></table></figure><ul><li>Rustçš„æç¤ºéå¸¸æ£’</li></ul><h4 id="æµ®ç‚¹å‹"><a href="#æµ®ç‚¹å‹" class="headerlink" title="æµ®ç‚¹å‹"></a>æµ®ç‚¹å‹</h4><blockquote><p>Rust ä¸­çš„æµ®ç‚¹å‹å¯è¢«åˆ†ä¸º <strong>f32</strong> å’Œ <strong>f64</strong>ã€‚f32 æ˜¯å•ç²¾åº¦æµ®ç‚¹å‹ï¼Œf64 æ˜¯åŒç²¾åº¦æµ®ç‚¹å‹ã€‚é»˜è®¤æµ®ç‚¹å‹ä¸º f64ã€‚</p></blockquote><h5 id="æ¡ˆä¾‹-2"><a href="#æ¡ˆä¾‹-2" class="headerlink" title="æ¡ˆä¾‹"></a>æ¡ˆä¾‹</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">let f1 &#x3D; 10.00;        &#x2F;&#x2F;é»˜è®¤ä¸º f64 æµ®ç‚¹å‹</span><br><span class="line">let f2:f32 &#x3D; 8.35;</span><br><span class="line">let f3:f64 &#x3D; 15000.600;  &#x2F;&#x2F;åŒç²¾åº¦æµ®ç‚¹å‹</span><br><span class="line"></span><br><span class="line">println!(&quot;f1 value is &#123;&#125;&quot;,f1);</span><br><span class="line">println!(&quot;f2 is &#123;&#125;&quot;,f2);</span><br><span class="line">println!(&quot;f3 is &#123;&#125;&quot;,f3);</span><br></pre></td></tr></table></figure><ul><li>Console</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">f1 value is 10</span><br><span class="line">f2 is 8.35</span><br><span class="line">f3 is 15000.6</span><br></pre></td></tr></table></figure><h4 id="è‡ªåŠ¨ç±»å‹è½¬æ¢"><a href="#è‡ªåŠ¨ç±»å‹è½¬æ¢" class="headerlink" title="è‡ªåŠ¨ç±»å‹è½¬æ¢"></a>è‡ªåŠ¨ç±»å‹è½¬æ¢</h4><blockquote><p>Rust ä¸­ä¸æ”¯æŒè‡ªåŠ¨ç±»å‹è½¬æ¢</p></blockquote><h5 id="æ¡ˆä¾‹-3"><a href="#æ¡ˆä¾‹-3" class="headerlink" title="æ¡ˆä¾‹"></a>æ¡ˆä¾‹</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">let interest:f32 &#x3D; 8;   &#x2F;&#x2F; æµ®ç‚¹å‹å˜é‡è¢«èµ‹äºˆæ•´å‹å€¼</span><br><span class="line">println!(&quot;interest is &#123;&#125;&quot;,interest);</span><br></pre></td></tr></table></figure><ul><li>Console</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">error[E0308]: mismatched types</span><br><span class="line">  --&gt; src&#x2F;main.rs:41:23</span><br><span class="line">   |</span><br><span class="line">41 |    let interest:f32 &#x3D; 8;   &#x2F;&#x2F; æµ®ç‚¹å‹å˜é‡è¢«èµ‹äºˆæ•´å‹å€¼</span><br><span class="line">   |                 ---   ^</span><br><span class="line">   |                 |     |</span><br><span class="line">   |                 |     expected &#96;f32&#96;, found integer</span><br><span class="line">   |                 |     help: use a float literal: &#96;8.0&#96;</span><br><span class="line">   |                 expected due to this</span><br></pre></td></tr></table></figure><h4 id="å¸ƒå°”å€¼"><a href="#å¸ƒå°”å€¼" class="headerlink" title="å¸ƒå°”å€¼"></a>å¸ƒå°”å€¼</h4><blockquote><p>å¸ƒå°”å‹æœ‰ä¸¤ç§å¯èƒ½çš„å€¼ â€”â€”<em>true</em> æˆ–æ˜¯ <em>false</em>ã€‚ä½¿ç”¨ <strong>bool</strong> å…³é”®å­—å¯ä»¥å£°æ˜å¸ƒå°”å‹å˜é‡ã€‚</p></blockquote><h5 id="æ¡ˆä¾‹-4"><a href="#æ¡ˆä¾‹-4" class="headerlink" title="æ¡ˆä¾‹"></a>æ¡ˆä¾‹</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">let b:bool &#x3D; true;</span><br><span class="line">println!(&quot;boolean &#123;&#125;&quot;,b);</span><br></pre></td></tr></table></figure><ul><li>Console</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">boolean true</span><br></pre></td></tr></table></figure><h4 id="å­—ç¬¦å‹"><a href="#å­—ç¬¦å‹" class="headerlink" title="å­—ç¬¦å‹"></a>å­—ç¬¦å‹</h4><blockquote><p>Rust ä¸­çš„å­—ç¬¦å‹æ”¯æŒæ•°å­—ï¼Œå­—æ¯ï¼ŒUnicode å’Œç‰¹æ®Šå­—ç¬¦ã€‚ä½¿ç”¨ char å…³é”®å­—å¯ä»¥å£°æ˜å­—ç¬¦å‹å˜é‡ã€‚Rust ä¸­çš„å­—ç¬¦å‹ç”¨ Unicode æ ‡é‡å€¼å‚¨å­˜ï¼Œå³ Rust ä¸­çš„å­—ç¬¦å‹å¯ä»¥è¡¨ç¤ºæ¯” ASCII æ›´å¤šçš„å­—ç¬¦ã€‚Unicode æ ‡é‡å€¼çš„èŒƒå›´åŒ…æ‹¬ä» U+0000 åˆ° U+D7FF å’Œä» U+E000 åˆ° U+10FFFFã€‚</p></blockquote><h5 id="æ¡ˆä¾‹-5"><a href="#æ¡ˆä¾‹-5" class="headerlink" title="æ¡ˆä¾‹"></a>æ¡ˆä¾‹</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">let def_c &#x3D; &#39;@&#39;; &#x2F;&#x2F;é»˜è®¤ä¸ºå­—ç¬¦å‹</span><br><span class="line">let c:char &#x3D; &#39;Z&#39;;</span><br><span class="line">let emoji:char &#x3D; &#39;ğŸ˜&#39;;</span><br></pre></td></tr></table></figure><ul><li>Console</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">character is @</span><br><span class="line">alphabet is Z</span><br><span class="line">emoji is ğŸ˜</span><br></pre></td></tr></table></figure><h5 id="ç±»å‹è½¬å­—ç¬¦ä¸²"><a href="#ç±»å‹è½¬å­—ç¬¦ä¸²" class="headerlink" title="ç±»å‹è½¬å­—ç¬¦ä¸²"></a>ç±»å‹è½¬å­—ç¬¦ä¸²</h5><blockquote><p>to_String()</p></blockquote><h6 id="æ¡ˆä¾‹-6"><a href="#æ¡ˆä¾‹-6" class="headerlink" title="æ¡ˆä¾‹"></a>æ¡ˆä¾‹</h6><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">let x: u32 &#x3D; 10;</span><br><span class="line">  let s: String &#x3D; x.to_string();</span><br><span class="line">  println!(&quot;&#123;&#125;&quot;, s);</span><br></pre></td></tr></table></figure><ul><li>Console</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">10</span><br></pre></td></tr></table></figure><h4 id="letå˜é‡"><a href="#letå˜é‡" class="headerlink" title="letå˜é‡"></a>letå˜é‡</h4><blockquote><p>å˜é‡æ˜¯ç¨‹åºå¯ä»¥æ“çºµçš„å‘½åå­˜å‚¨</p></blockquote><ul><li><p>å¿…é¡»ä»¥å­—æ¯æˆ–ä¸‹åˆ’çº¿å¼€å¤´ã€‚</p></li><li><p>å˜é‡çš„åç§°å¯ä»¥ç”±å­—æ¯ï¼Œæ•°å­—å’Œä¸‹åˆ’çº¿å­—ç¬¦ç»„æˆã€‚</p></li><li><p>RuståŒºåˆ†å¤§å°å†™</p></li><li><p>ä¸å¯å˜æ€§</p><ul><li>å˜é‡é»˜è®¤æ˜¯ä¸å¯å˜çš„ï¼Œåªè¯»çš„ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå˜é‡çš„å€¼åœ¨åˆå§‹åŒ–åä¸å¯å†è¢«æ”¹å˜ã€‚æ¯”å¦‚</li></ul></li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">let var &#x3D; 25_000;</span><br><span class="line"> println!(&quot;var is &#123;&#125; &quot;,var);</span><br><span class="line"> var &#x3D; 35_000;</span><br><span class="line"> println!(&quot;var changed is &#123;&#125;&quot;,var);</span><br></pre></td></tr></table></figure><p>Console</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">  --&gt; src&#x2F;main.rs:57:5</span><br><span class="line">   |</span><br><span class="line">55 |     let var &#x3D; 25_000;</span><br><span class="line">   |         ---</span><br><span class="line">   |         |</span><br><span class="line">   |         first assignment to &#96;var&#96;</span><br><span class="line">   |         help: consider making this binding mutable: &#96;mut var&#96;</span><br><span class="line">56 |     println!(&quot;var is &#123;&#125; &quot;,var);</span><br><span class="line">57 |     var &#x3D; 35_000;</span><br><span class="line">   |     ^^^^^^^^^^^^ cannot assign twice to immutable variable</span><br></pre></td></tr></table></figure><ul><li>å¯å˜æ€§<ul><li>åœ¨å˜é‡åå‰åŠ ä¸Š <strong>mut</strong> å…³é”®å­—å¯ä»¥ä½¿å…¶å¯å˜ã€‚å¯å˜å˜é‡çš„å€¼å¯ä»¥æ›´æ”¹ã€‚</li></ul></li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">let mut var &#x3D; 25_000;</span><br><span class="line">  println!(&quot;var is &#123;&#125; &quot;,var);</span><br><span class="line">  var &#x3D; 35_000;</span><br><span class="line">  println!(&quot;var changed is &#123;&#125;&quot;,var);</span><br></pre></td></tr></table></figure><p>Console</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">var is 25000 </span><br><span class="line">var changed is 35000</span><br></pre></td></tr></table></figure><h4 id="constå¸¸é‡"><a href="#constå¸¸é‡" class="headerlink" title="constå¸¸é‡"></a>constå¸¸é‡</h4><blockquote><p>å¸¸é‡ä¸€å®šè¦æ˜¾å¼å£°æ˜å®ƒçš„æ•°æ®ç±»å‹ã€‚ä»¥ä¸‹æ˜¯å£°æ˜å¸¸é‡çš„è¯­æ³•ï¼š</p></blockquote><ul><li>è€Œå£°æ˜å¸¸é‡æ—¶ä¸€å®šè¦å£°æ˜å®ƒçš„æ•°æ®ç±»å‹ã€‚<code>const VARIABLE_NAME:dataType = value;</code></li><li>ä½¿ç”¨ <strong>let</strong> å…³é”®å­—å£°æ˜çš„å˜é‡é»˜è®¤æ˜¯ä¸å¯å˜çš„ã€‚ä½†æ˜¯ä½ å¯ä»¥é€‰æ‹©ä½¿ç”¨ <strong>mut</strong> å…³é”®å­—æ¥ä½¿å…¶å¯å˜ã€‚å¸¸é‡åˆ™<code>æ°¸è¿œæ˜¯ä¸å¯å˜çš„</code>ã€‚</li><li>å¸¸é‡å¯ä»¥åœ¨ä»»ä½•èŒƒå›´å†…å£°æ˜ï¼ŒåŒ…æ‹¬å…¨å±€èŒƒå›´ã€‚</li></ul><h5 id="æ¡ˆä¾‹-7"><a href="#æ¡ˆä¾‹-7" class="headerlink" title="æ¡ˆä¾‹"></a>æ¡ˆä¾‹</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">const VAR_NAME:char &#x3D; &#39;A&#39;;</span><br><span class="line">println!(&quot;VAR_NAME is &#123;&#125;&quot;,VAR_NAME);</span><br></pre></td></tr></table></figure><ul><li>Console</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">VAR_NAME is A</span><br></pre></td></tr></table></figure><h4 id="shadowing-è¦†ç›–"><a href="#shadowing-è¦†ç›–" class="headerlink" title="shadowing è¦†ç›–"></a>shadowing è¦†ç›–</h4><blockquote><p>Rust æ”¯æŒä¸åŒæ•°æ®ç±»å‹çš„å˜é‡ä¹‹é—´çš„è¦†ç›–ï¼ˆéšè— shadowingï¼‰ã€‚</p></blockquote><ul><li>å˜é‡å¯ä»¥è¢«è¦†ç›–ï¼Œå¸¸é‡ä¸è¡Œã€‚</li></ul><h5 id="æ¡ˆä¾‹ä¸€"><a href="#æ¡ˆä¾‹ä¸€" class="headerlink" title="æ¡ˆä¾‹ä¸€"></a>æ¡ˆä¾‹ä¸€</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">let salary &#x3D; 100.00;</span><br><span class="line">let salary &#x3D; 1.50 ; </span><br><span class="line">&#x2F;&#x2F; è¯»å–salaryå˜é‡çš„å€¼</span><br><span class="line">println!(&quot;The value of salary is :&#123;&#125;&quot;,salary);</span><br></pre></td></tr></table></figure><ul><li>Console</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">The value of salary is :1.5</span><br></pre></td></tr></table></figure><h5 id="æ¡ˆä¾‹äºŒ"><a href="#æ¡ˆä¾‹äºŒ" class="headerlink" title="æ¡ˆä¾‹äºŒ"></a>æ¡ˆä¾‹äºŒ</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">const salary2 &#x3D; 100.00;</span><br><span class="line">let salary2 &#x3D; 1.50 ; </span><br><span class="line">&#x2F;&#x2F; è¯»å–salaryå˜é‡çš„å€¼</span><br><span class="line">println!(&quot;The value of salary is :&#123;&#125;&quot;,salary2);</span><br></pre></td></tr></table></figure><ul><li>Console</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">  --&gt; src&#x2F;main.rs:68:11</span><br><span class="line">   |</span><br><span class="line">68 |     const salary2 &#x3D; 100.00;</span><br><span class="line">   |           ^^^^^^^ help: provide a type for the constant: &#96;salary2: f64&#96;</span><br></pre></td></tr></table></figure><h3 id="æ“ä½œç¬¦"><a href="#æ“ä½œç¬¦" class="headerlink" title="æ“ä½œç¬¦"></a>æ“ä½œç¬¦</h3><blockquote><p>è¿ç®—ç¬¦ï¼ˆæ“ä½œç¬¦ï¼‰å®šä¹‰äº†å¯¹äºæ•°æ®çš„çš„å¤„ç†ã€‚è¢«è¿ç®—ç¬¦æ‰€ä½œç”¨çš„æ•°æ®è¢«ç§°ä¸ºè¿ç®—æ•°ã€‚</p></blockquote><h4 id="ç®—æ•°è¿ç®—æ³•"><a href="#ç®—æ•°è¿ç®—æ³•" class="headerlink" title="ç®—æ•°è¿ç®—æ³•"></a>ç®—æ•°è¿ç®—æ³•</h4><ul><li>åŠ  +</li><li>å‡ -</li><li>ä¹˜ *</li><li>é™¤ / </li><li>å–ä½™ %</li></ul><h4 id="æ“ä½œè¿ç®—ç¬¦"><a href="#æ“ä½œè¿ç®—ç¬¦" class="headerlink" title="æ“ä½œè¿ç®—ç¬¦"></a>æ“ä½œè¿ç®—ç¬¦</h4><ul><li><code>&gt;</code> å¤§äº</li><li><code>&lt;</code>å°äº</li><li><code>&gt;=</code> å¤§äºç­‰äº</li><li><code>&lt;=</code> å°äºç­‰äº</li><li><code>==</code> ç­‰äº</li><li><code>!=</code> ä¸ç­‰äº</li></ul><h4 id="é€»è¾‘è¿ç®—ç¬¦"><a href="#é€»è¾‘è¿ç®—ç¬¦" class="headerlink" title="é€»è¾‘è¿ç®—ç¬¦"></a>é€»è¾‘è¿ç®—ç¬¦</h4><ul><li><code>&amp;&amp;</code> ä¸</li><li><code>||</code> æˆ–</li><li><code>! </code>é</li></ul><h4 id="ä½è¿ç®—ç¬¦"><a href="#ä½è¿ç®—ç¬¦" class="headerlink" title="ä½è¿ç®—ç¬¦"></a>ä½è¿ç®—ç¬¦</h4><ul><li>&amp; ï¼ˆæŒ‰ä½ä¸ï¼‰</li><li>|ï¼ˆæŒ‰ä½æˆ–ï¼‰</li><li>^ï¼ˆæŒ‰ä½å¼‚æˆ–ï¼‰</li><li>!ï¼ˆæŒ‰ä½éï¼‰</li><li>&lt;&lt;ï¼ˆå·¦ç§»ï¼‰</li><li>&gt;&gt;ï¼ˆå³ç§»ï¼‰</li><li>&gt;&gt;&gt;ï¼ˆæ— ç¬¦å·å³ç§»ï¼‰</li></ul><h2 id="END"><a href="#END" class="headerlink" title="END"></a>END</h2>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;RuståŸºç¡€è¯­æ³•&quot;&gt;&lt;a href=&quot;#RuståŸºç¡€è¯­æ³•&quot; class=&quot;headerlink&quot; title=&quot;RuståŸºç¡€è¯­æ³•&quot;&gt;&lt;/a&gt;RuståŸºç¡€è¯­æ³•&lt;/h2&gt;&lt;blockquote&gt;
&lt;p&gt;Rust æ˜¯ä¸€ç§é™æ€ç±»å‹çš„è¯­è¨€ã€‚ Rust ä¸­çš„æ¯ä¸ªå€¼éƒ½æ˜¯æŸç§æ•°æ®ç±»å‹ã€‚ ç¼–è¯‘å™¨å¯ä»¥æ ¹æ®åˆ†é…ç»™å®ƒçš„å€¼è‡ªåŠ¨æ¨æ–­å˜é‡çš„æ•°æ®ç±»å‹ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id=&quot;let&quot;&gt;&lt;a href=&quot;#let&quot; class=&quot;headerlink&quot; title=&quot;let&quot;&gt;&lt;/a&gt;let&lt;/h3&gt;&lt;blockquote&gt;
&lt;p&gt;ä½¿ç”¨letå…³é”®å­—å£°æ˜å˜é‡&lt;/p&gt;
&lt;/blockquote&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;fn main() &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    println!(&amp;quot;RuståŸºç¡€è¯­æ³•!&amp;quot;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    let str_ &amp;#x3D; &amp;quot;String&amp;quot;; &amp;#x2F;&amp;#x2F; string ç±»å‹&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    let f_ &amp;#x3D; 1.1; &amp;#x2F;&amp;#x2F; float ç±»å‹&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    let bool_ &amp;#x3D; true; &amp;#x2F;&amp;#x2F; boolean ç±»å‹&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    let char_ &amp;#x3D; &amp;#39;a&amp;#39;; &amp;#x2F;&amp;#x2F; unicode character &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    println!(&amp;quot;string &amp;#123;&amp;#125;&amp;quot;,str_); &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    println!(&amp;quot;float &amp;#123;&amp;#125;&amp;quot;,f_); &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    println!(&amp;quot;boolean &amp;#123;&amp;#125;&amp;quot;,bool_); &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    println!(&amp;quot;icon &amp;#123;&amp;#125;&amp;quot;,char_); &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;ul&gt;
&lt;li&gt;Console&lt;/li&gt;
&lt;/ul&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;RuståŸºç¡€è¯­æ³•!&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;string String&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;float&lt;/span&gt; 1.1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;boolean &lt;span class=&quot;literal&quot;&gt;true&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;icon a&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
    
    </summary>
    
    
      <category term="Rust" scheme="https://z201.cn/categories/Rust/"/>
    
    
      <category term="Rust" scheme="https://z201.cn/tags/Rust/"/>
    
  </entry>
  
  <entry>
    <title>Rustå…¥é—¨</title>
    <link href="https://z201.cn/2021/11/24/Rust%E5%85%A5%E9%97%A8/"/>
    <id>https://z201.cn/2021/11/24/Rust%E5%85%A5%E9%97%A8/</id>
    <published>2021-11-23T18:43:39.000Z</published>
    <updated>2021-12-20T15:43:37.404Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>å­¦ä¹ ä¸‹Rust</p></blockquote><h2 id="ä¸ºä»€ä¹ˆå­¦ä¹ Rust"><a href="#ä¸ºä»€ä¹ˆå­¦ä¹ Rust" class="headerlink" title="ä¸ºä»€ä¹ˆå­¦ä¹ Rust"></a>ä¸ºä»€ä¹ˆå­¦ä¹ Rust</h2><blockquote><p>åœ¨çŸ¥ä¹ä¸Šçœ‹åˆ°ä¸€ä¸ªäººå¯¹Rustçš„è¯„è®ºã€‚</p><p>é¦–å…ˆï¼ŒRust æ˜¯æœ‰ç‚¹åäººç±»ï¼Œå¦åˆ™ä¸ä¼šä¸€ç›´éƒ½ä¸ç«ã€‚ç„¶åï¼ŒRust ä¹‹æ‰€ä»¥åäººç±»ï¼Œæ˜¯å› ä¸ºäººç±»è¿™ç©æ„æ—¢æ„šè ¢ï¼Œåˆè‡ªå¤§ï¼Œç ´äº‹è¿˜è´¼å¤šã€‚ ä½ çœ‹ C++ å°±å¾ˆç›¸ä¿¡äººç±»ï¼Œå®ƒè¦æ±‚äººç±»è‡ªå·±æŠŠè‡ªå·± new å‡ºæ¥çš„ä¸œè¥¿ç»™ delete æ‰ã€‚ C++ï¼šâ€œè¿™ç‚¹å°äº‹æˆ‘ç›¸ä¿¡ä½ å¯ä»¥çš„ï¼â€ äººç±»ï¼šâ€œæ²¡é—®é¢˜ï¼åŒ…åœ¨æˆ‘èº«ä¸Šï¼â€ ç„¶åå‘¢ï¼Œå†…å­˜æ³„æ¼ã€double freeã€é‡æŒ‡é’ˆæ»¡ä¸–ç•Œé£˜â€¦â€¦ C++ï¼šâ€œâ€¦â€¦â€</p><p>Java é€‰æ‹©ä¸ç›¸ä¿¡äººç±»ï¼Œä½†æ›¿äººç±»æŠŠäº‹åŠå¥½ã€‚ Javaï¼šâ€œåˆ«åŠ¨ï¼Œè®©æˆ‘æ¥ï¼Œæˆ‘æœ‰gcï¼â€ äººç±»ï¼šâ€œä½ æ€ä¹ˆåšäº‹è¿™ä¹ˆæ…¢å‘€ï¼Ÿä½ æ€ä¹ˆè¿˜ stop the world äº†å‘€ï¼Ÿä½ æ˜¯ä¸æ˜¯ä¸çˆ±æˆ‘äº†å‘€ï¼Ÿâ€ Javaï¼šâ€œâ€¦â€¦â€</p><p>Rust å‘ç°å”¯ä¸€çš„åŠæ³•å°±æ˜¯æ—¢ä¸ç›¸ä¿¡äººç±»ï¼Œä¹Ÿä¸æƒ¯ç€äººç±»ã€‚ Rustï¼šâ€œæŒ‰è€å­è¯´çš„åšï¼Œä¸åšå°±ä¸ç¼–è¯‘ï¼â€ äººç±»ï¼šâ€œä½ åäººç±»ï¼â€ Rustï¼šâ€œæ»šï¼â€</p></blockquote><ul><li>C/C++ å®Œå…¨ç›¸ä¿¡è€Œä¸”æƒ¯ç€ç¨‹åºå‘˜ï¼Œè®©å¤§å®¶è‡ªè¡Œç®¡ç†å†…å­˜ï¼Œæ‰€ä»¥å¯ä»¥ç¼–å†™å¾ˆè‡ªç”±çš„ä»£ç ï¼Œä½†ä¸€ä¸ªä¸å°å¿ƒå°±ä¼šé€ æˆå†…å­˜æ³„æ¼ç­‰é—®é¢˜å¯¼è‡´ç¨‹åºå´©æºƒã€‚</li><li>Java/Golang å®Œå…¨ä¸ç›¸ä¿¡ç¨‹åºå‘˜ï¼Œä½†ä¹Ÿæƒ¯ç€ç¨‹åºå‘˜ã€‚æ‰€æœ‰çš„å†…å­˜ç”Ÿå‘½å‘¨æœŸéƒ½ç”± JVM è¿è¡Œæ—¶ç»Ÿä¸€ç®¡ç†ã€‚ åœ¨ç»å¤§éƒ¨åˆ†åœºæ™¯ä¸‹ï¼Œä½ å¯ä»¥éå¸¸è‡ªç”±çš„å†™ä»£ç ï¼Œè€Œä¸”ä¸ç”¨å…³å¿ƒå†…å­˜åˆ°åº•æ˜¯ä»€ä¹ˆæƒ…å†µã€‚ å†…å­˜ä½¿ç”¨æœ‰é—®é¢˜çš„æ—¶å€™ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ JVM æ¥ä¿¡æ¯ç›¸å…³çš„åˆ†æè¯Šæ–­å’Œè°ƒæ•´ã€‚</li><li>Rust è¯­è¨€é€‰æ‹©æ—¢ä¸ç›¸ä¿¡ç¨‹åºå‘˜ï¼Œä¹Ÿä¸æƒ¯ç€ç¨‹åºå‘˜ã€‚ è®©ä½ åœ¨å†™ä»£ç çš„æ—¶å€™ï¼Œå¿…é¡»æ¸…æ¥šæ˜ç™½çš„ç”¨ Rust çš„è§„åˆ™ç®¡ç†å¥½ä½ çš„å˜é‡ï¼Œå¥½è®©æœºå™¨èƒ½æ˜ç™½é«˜æ•ˆåœ°åˆ†æå’Œç®¡ç†å†…å­˜ã€‚ ä½†æ˜¯è¿™æ ·ä¼šå¯¼è‡´ä»£ç ä¸åˆ©äºäººçš„ç†è§£ï¼Œå†™ä»£ç å¾ˆä¸è‡ªç”±ï¼Œå­¦ä¹ æˆæœ¬ä¹Ÿå¾ˆé«˜ã€‚</li></ul><a id="more"></a><h2 id="å®‰è£…Rustå¼€å‘ç¯å¢ƒ"><a href="#å®‰è£…Rustå¼€å‘ç¯å¢ƒ" class="headerlink" title="å®‰è£…Rustå¼€å‘ç¯å¢ƒ"></a>å®‰è£…Rustå¼€å‘ç¯å¢ƒ</h2><h3 id="å®‰è£…Rust"><a href="#å®‰è£…Rust" class="headerlink" title="å®‰è£…Rust"></a>å®‰è£…Rust</h3><blockquote><p>Ruståœ¨Macç³»ç»Ÿä¸Šéå¸¸çš„å‹å¥½</p></blockquote><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl https://sh.rustup.rs -sSf | sh</span><br></pre></td></tr></table></figure><ul><li>è„šæœ¬ä¼šæ£€æµ‹ä½ çš„æ“ä½œç³»ç»Ÿï¼Œç„¶åæç¤ºä½ æ˜¯å¦å®‰è£…</li></ul><p><img src="https://z201.oss-cn-shanghai.aliyuncs.com/JavaNote/20211124031930.png"></p><ul><li>é»˜è®¤é€‰æ‹©1å°±å¥½äº†</li></ul><p><img src="https://z201.oss-cn-shanghai.aliyuncs.com/JavaNote/20211124032020.png"></p><ul><li>è¿™æ ·å°±å®‰è£…å¥½äº†</li></ul><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">source</span> <span class="variable">$HOME</span>/.cargo/env</span><br><span class="line"><span class="comment"># è®¾ç½®ä¸‹Rustçš„ç¯å¢ƒå˜é‡</span></span><br><span class="line">rustc --version </span><br><span class="line"><span class="comment"># å¦‚æœæ­£å¸¸æ˜¾ç¤ºç‰ˆæœ¬è¯´æ˜å®‰è£…æˆåŠŸäº†</span></span><br></pre></td></tr></table></figure><h3 id="åˆ›å»ºæµ‹è¯•é¡¹ç›®"><a href="#åˆ›å»ºæµ‹è¯•é¡¹ç›®" class="headerlink" title="åˆ›å»ºæµ‹è¯•é¡¹ç›®"></a>åˆ›å»ºæµ‹è¯•é¡¹ç›®</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">mkdir learning</span><br><span class="line"><span class="built_in">cd</span> learning</span><br><span class="line">cargo new learning-01</span><br><span class="line"><span class="built_in">cd</span> learning-01</span><br><span class="line">cargo run</span><br><span class="line"></span><br><span class="line">Hello, world!</span><br><span class="line"><span class="comment"># å¦‚æœå˜æˆæˆåŠŸå¹¶è¾“å‡ºæ¶ˆæ¯åˆ™è¡¨ç¤ºæµ‹è¯•é¡¹ç›®é€šè¿‡äº†ã€‚</span></span><br></pre></td></tr></table></figure><h2 id="Rust"><a href="#Rust" class="headerlink" title="Rust"></a>Rust</h2><blockquote><p>Rust æ˜¯ä¸€ä¸ªç³»ç»Ÿçº§ç¼–ç¨‹è¯­è¨€ï¼Œè¢« Mozilla å‘˜å·¥ â€œGraydon Hoareâ€ äº 2006 å¹´ å¼€å‘ã€‚ä»–å½¢å®¹ Rust æ˜¯ä¸€ç§çº¿ç¨‹å®‰å…¨çš„æ”¯æŒå¹¶å‘çš„å®ç”¨å‹çš„ç¼–ç¨‹è¯­è¨€ï¼Œæ”¯æŒå‡½æ•°å¼ç¼–ç¨‹ä¸å‘½ä»¤å¼ç¼–ç¨‹ã€‚</p></blockquote><h3 id="Cargo"><a href="#Cargo" class="headerlink" title="Cargo"></a>Cargo</h3><blockquote><p>Cargoæ˜¯Rustçš„æ„å»ºç³»ç»Ÿå’ŒåŒ…ç®¡ç†å·¥å…·ï¼Œå’ŒJavaä¸­mavenç±»ä¼¼çš„åŠŸèƒ½ã€‚</p></blockquote><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">// æŸ¥çœ‹ç‰ˆæœ¬</span><br><span class="line">cargo --version</span><br></pre></td></tr></table></figure><ul><li>åˆ›å»ºä¸€ä¸ªé¡¹ç›®</li></ul><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">cargo new new_project</span><br><span class="line"><span class="built_in">cd</span> new _project</span><br><span class="line">âœ  new_project git:(master) âœ— tree </span><br><span class="line">.</span><br><span class="line">â”œâ”€â”€ Cargo.toml</span><br><span class="line">â””â”€â”€ src</span><br><span class="line">    â””â”€â”€ main.rs</span><br><span class="line"></span><br><span class="line">1 directory, 2 files</span><br></pre></td></tr></table></figure><ul><li>è¿™é‡Œçš„Cargo.tomlå°±æ˜¯é…ç½®æ–‡ä»¶ <a href="https://github.com/toml-lang/toml" target="_blank" rel="noopener"><em>TOML</em></a> (<em>Tomâ€™s Obvious, Minimal Language</em>) æ ¼å¼ï¼Œè¿™æ˜¯ Cargo é…ç½®æ–‡ä»¶çš„æ ¼å¼ã€‚</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[package]</span><br><span class="line">name &#x3D; &quot;new_project&quot;</span><br><span class="line">version &#x3D; &quot;0.1.0&quot;</span><br><span class="line">edition &#x3D; &quot;2021&quot;</span><br><span class="line"></span><br><span class="line"># See more keys and their definitions at https:&#x2F;&#x2F;doc.rust-lang.org&#x2F;cargo&#x2F;reference&#x2F;manifest.html</span><br><span class="line"></span><br><span class="line">[dependencies]</span><br></pre></td></tr></table></figure><ul><li>æ„å»ºå¹¶è¿è¡Œ</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">cargo build</span><br><span class="line">âœ  new_project git:(master) âœ— cargo build</span><br><span class="line">   Compiling new_project v0.1.0 (/Users/z201/word/rust/learning-rust/new_project)</span><br><span class="line">    Building [                             ] 0/1: new_project(bin)                                                                                                                                                                </span><br><span class="line">    Finished dev [unoptimized + debuginfo] target(s) in 11.12s</span><br><span class="line">    </span><br><span class="line">âœ  new_project git:(master) âœ— ./target/debug/new_project </span><br><span class="line">Hello, world!</span><br></pre></td></tr></table></figure><ul><li>ä¹Ÿå¯ä»¥ç›´æ¥ç¼–è¯‘åŠ è¿è¡Œ</li></ul><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cargo run</span><br></pre></td></tr></table></figure><ul><li>å¿«é€Ÿæ£€æŸ¥æ˜¯å¦å¯ä»¥ç¼–è¯‘</li></ul><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cargo check</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;å­¦ä¹ ä¸‹Rust&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&quot;ä¸ºä»€ä¹ˆå­¦ä¹ Rust&quot;&gt;&lt;a href=&quot;#ä¸ºä»€ä¹ˆå­¦ä¹ Rust&quot; class=&quot;headerlink&quot; title=&quot;ä¸ºä»€ä¹ˆå­¦ä¹ Rust&quot;&gt;&lt;/a&gt;ä¸ºä»€ä¹ˆå­¦ä¹ Rust&lt;/h2&gt;&lt;blockquote&gt;
&lt;p&gt;åœ¨çŸ¥ä¹ä¸Šçœ‹åˆ°ä¸€ä¸ªäººå¯¹Rustçš„è¯„è®ºã€‚&lt;/p&gt;
&lt;p&gt;é¦–å…ˆï¼ŒRust æ˜¯æœ‰ç‚¹åäººç±»ï¼Œå¦åˆ™ä¸ä¼šä¸€ç›´éƒ½ä¸ç«ã€‚ç„¶åï¼ŒRust ä¹‹æ‰€ä»¥åäººç±»ï¼Œæ˜¯å› ä¸ºäººç±»è¿™ç©æ„æ—¢æ„šè ¢ï¼Œåˆè‡ªå¤§ï¼Œç ´äº‹è¿˜è´¼å¤šã€‚ ä½ çœ‹ C++ å°±å¾ˆç›¸ä¿¡äººç±»ï¼Œå®ƒè¦æ±‚äººç±»è‡ªå·±æŠŠè‡ªå·± new å‡ºæ¥çš„ä¸œè¥¿ç»™ delete æ‰ã€‚ C++ï¼šâ€œè¿™ç‚¹å°äº‹æˆ‘ç›¸ä¿¡ä½ å¯ä»¥çš„ï¼â€ äººç±»ï¼šâ€œæ²¡é—®é¢˜ï¼åŒ…åœ¨æˆ‘èº«ä¸Šï¼â€ ç„¶åå‘¢ï¼Œå†…å­˜æ³„æ¼ã€double freeã€é‡æŒ‡é’ˆæ»¡ä¸–ç•Œé£˜â€¦â€¦ C++ï¼šâ€œâ€¦â€¦â€&lt;/p&gt;
&lt;p&gt;Java é€‰æ‹©ä¸ç›¸ä¿¡äººç±»ï¼Œä½†æ›¿äººç±»æŠŠäº‹åŠå¥½ã€‚ Javaï¼šâ€œåˆ«åŠ¨ï¼Œè®©æˆ‘æ¥ï¼Œæˆ‘æœ‰gcï¼â€ äººç±»ï¼šâ€œä½ æ€ä¹ˆåšäº‹è¿™ä¹ˆæ…¢å‘€ï¼Ÿä½ æ€ä¹ˆè¿˜ stop the world äº†å‘€ï¼Ÿä½ æ˜¯ä¸æ˜¯ä¸çˆ±æˆ‘äº†å‘€ï¼Ÿâ€ Javaï¼šâ€œâ€¦â€¦â€&lt;/p&gt;
&lt;p&gt;Rust å‘ç°å”¯ä¸€çš„åŠæ³•å°±æ˜¯æ—¢ä¸ç›¸ä¿¡äººç±»ï¼Œä¹Ÿä¸æƒ¯ç€äººç±»ã€‚ Rustï¼šâ€œæŒ‰è€å­è¯´çš„åšï¼Œä¸åšå°±ä¸ç¼–è¯‘ï¼â€ äººç±»ï¼šâ€œä½ åäººç±»ï¼â€ Rustï¼šâ€œæ»šï¼â€&lt;/p&gt;
&lt;/blockquote&gt;
&lt;ul&gt;
&lt;li&gt;C/C++ å®Œå…¨ç›¸ä¿¡è€Œä¸”æƒ¯ç€ç¨‹åºå‘˜ï¼Œè®©å¤§å®¶è‡ªè¡Œç®¡ç†å†…å­˜ï¼Œæ‰€ä»¥å¯ä»¥ç¼–å†™å¾ˆè‡ªç”±çš„ä»£ç ï¼Œä½†ä¸€ä¸ªä¸å°å¿ƒå°±ä¼šé€ æˆå†…å­˜æ³„æ¼ç­‰é—®é¢˜å¯¼è‡´ç¨‹åºå´©æºƒã€‚&lt;/li&gt;
&lt;li&gt;Java/Golang å®Œå…¨ä¸ç›¸ä¿¡ç¨‹åºå‘˜ï¼Œä½†ä¹Ÿæƒ¯ç€ç¨‹åºå‘˜ã€‚æ‰€æœ‰çš„å†…å­˜ç”Ÿå‘½å‘¨æœŸéƒ½ç”± JVM è¿è¡Œæ—¶ç»Ÿä¸€ç®¡ç†ã€‚ åœ¨ç»å¤§éƒ¨åˆ†åœºæ™¯ä¸‹ï¼Œä½ å¯ä»¥éå¸¸è‡ªç”±çš„å†™ä»£ç ï¼Œè€Œä¸”ä¸ç”¨å…³å¿ƒå†…å­˜åˆ°åº•æ˜¯ä»€ä¹ˆæƒ…å†µã€‚ å†…å­˜ä½¿ç”¨æœ‰é—®é¢˜çš„æ—¶å€™ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ JVM æ¥ä¿¡æ¯ç›¸å…³çš„åˆ†æè¯Šæ–­å’Œè°ƒæ•´ã€‚&lt;/li&gt;
&lt;li&gt;Rust è¯­è¨€é€‰æ‹©æ—¢ä¸ç›¸ä¿¡ç¨‹åºå‘˜ï¼Œä¹Ÿä¸æƒ¯ç€ç¨‹åºå‘˜ã€‚ è®©ä½ åœ¨å†™ä»£ç çš„æ—¶å€™ï¼Œå¿…é¡»æ¸…æ¥šæ˜ç™½çš„ç”¨ Rust çš„è§„åˆ™ç®¡ç†å¥½ä½ çš„å˜é‡ï¼Œå¥½è®©æœºå™¨èƒ½æ˜ç™½é«˜æ•ˆåœ°åˆ†æå’Œç®¡ç†å†…å­˜ã€‚ ä½†æ˜¯è¿™æ ·ä¼šå¯¼è‡´ä»£ç ä¸åˆ©äºäººçš„ç†è§£ï¼Œå†™ä»£ç å¾ˆä¸è‡ªç”±ï¼Œå­¦ä¹ æˆæœ¬ä¹Ÿå¾ˆé«˜ã€‚&lt;/li&gt;
&lt;/ul&gt;
    
    </summary>
    
    
      <category term="Rust" scheme="https://z201.cn/categories/Rust/"/>
    
    
      <category term="Rust" scheme="https://z201.cn/tags/Rust/"/>
    
  </entry>
  
  <entry>
    <title>Permission-Design</title>
    <link href="https://z201.cn/2021/09/20/Permission-design/"/>
    <id>https://z201.cn/2021/09/20/Permission-design/</id>
    <published>2021-09-20T13:38:35.000Z</published>
    <updated>2021-09-20T14:19:13.457Z</updated>
    
    <content type="html"><![CDATA[<h2 id="èƒŒæ™¯"><a href="#èƒŒæ™¯" class="headerlink" title="èƒŒæ™¯"></a>èƒŒæ™¯</h2><blockquote><p>æƒé™ç®¡ç†æ˜¯ä¸€ä¸ªå‡ ä¹æ‰€æœ‰å¤§ä¸­å‹ B ç«¯ç³»ç»Ÿéƒ½ä¼šæ¶‰åŠçš„é‡è¦ç»„æˆéƒ¨åˆ†ï¼Œå…¶ç›®çš„æ˜¯å¯¹æ•´ä¸ªç³»ç»Ÿè¿›è¡Œæƒé™æ§åˆ¶ï¼Œé¿å…é€ æˆè¯¯æ“ä½œåŠæ•°æ®æ³„éœ²ç­‰é£é™©é—®é¢˜ã€‚</p></blockquote><h2 id="æƒé™ä¸æƒé™ç®¡ç†"><a href="#æƒé™ä¸æƒé™ç®¡ç†" class="headerlink" title="æƒé™ä¸æƒé™ç®¡ç†"></a>æƒé™ä¸æƒé™ç®¡ç†</h2><h3 id="åè¯å®šä¹‰"><a href="#åè¯å®šä¹‰" class="headerlink" title="åè¯å®šä¹‰"></a>åè¯å®šä¹‰</h3><blockquote><p>æƒé™ç›¸å…³çš„åŸºæœ¬æ¦‚å¿µï¼š</p></blockquote><ul><li>æƒé™ï¼šç”¨æˆ·å¯æ“ä½œè¡Œä¸ºçš„æœ€å°å•ä½ã€‚</li><li>ç”¨æˆ·ï¼šæ¯ä¸ªç”¨æˆ·éƒ½æœ‰å”¯ä¸€æ ‡è¯†ï¼Œå¹¶è¢«æˆäºˆä¸€ä¸ªæˆ–å¤šä¸ªè§’è‰²ã€‚</li><li>è§’è‰²ï¼šç”±ä¸åŒçš„æƒé™ç»„åˆè€Œæˆï¼Œæœ€ç»ˆåˆ†é…ç»™å…·ä½“ç”¨æˆ·ã€‚</li><li>æƒé™ç®¡ç†ï¼šæ§åˆ¶ç”¨æˆ·çš„æƒé™ï¼Œåªèƒ½è®¿é—®æˆæƒå†…å®¹ã€‚</li></ul><h3 id="æ¨¡å‹é€‰æ‹©"><a href="#æ¨¡å‹é€‰æ‹©" class="headerlink" title="æ¨¡å‹é€‰æ‹©"></a>æ¨¡å‹é€‰æ‹©</h3><ul><li>ACLï¼ˆAccess Control Listï¼‰ï¼šåŸºäºç”¨æˆ·çº§åˆ«çš„æƒé™æ§åˆ¶ã€‚<ul><li>å°†ç³»ç»Ÿçš„å„ç§æƒé™ç›´æ¥æˆäºˆå…·ä½“çš„ç”¨æˆ·ã€‚æŠ½è±¡æ¥è¯´ï¼Œä¸ºæ¯ä¸ªç”¨æˆ·ç»´æŠ¤äº†å•ç‹¬çš„æƒé™åˆ—è¡¨ï¼Œå½“éœ€è¦åˆ†é…æƒé™ã€æ”¶å›æƒé™æ—¶ï¼Œéœ€è¦ä¿®æ”¹å¯¹åº”ç”¨æˆ·çš„æƒé™ä¿¡æ¯ã€‚</li></ul></li><li>RBACï¼ˆRole Base Access Controlï¼‰ï¼šåŸºäºè§’è‰²çº§åˆ«çš„æƒé™æ§åˆ¶ã€‚<ul><li>ä¸ ACL å¯¹æ¯”ï¼ŒRBACä¸ç”¨ç»™ç”¨æˆ·å•ä¸ªåˆ†é…æƒé™ï¼Œæƒé™ä¸ç”¨æˆ·ä¹‹å‰é€šè¿‡è§’è‰²å…³è”ã€‚é€šè¿‡ç»™ä¸åŒçš„è§’è‰²åˆ†é…ä¸åŒçš„æƒé™ï¼Œåªéœ€è¦å°†ç”¨æˆ·æŒ‡å‘å¯¹åº”çš„è§’è‰²å°±ä¼šæœ‰å¯¹åº”çš„æƒé™ã€‚åˆ†é…æƒé™ã€æ”¶å›æƒé™åªéœ€è¦é€šè¿‡ä¿®æ”¹ç”¨æˆ·çš„è§’è‰²å³å¯ã€‚</li></ul></li><li>ABACï¼ˆAttribute Base Access Controlï¼‰ï¼šåŸºäºå±æ€§çº§åˆ«çš„æƒé™æ§åˆ¶ã€‚<ul><li>ä¸åŒäºå¸¸è§çš„å°†ç”¨æˆ·é€šè¿‡æŸç§æ–¹å¼ç›´æ¥å…³è”åˆ°æƒé™çš„æ–¹å¼ï¼ŒABAC æ˜¯é€šè¿‡åŠ¨æ€è®¡ç®—ä¸€ä¸ªæˆ–ä¸€ç»„å±æ€§æ¥æ˜¯å¦æ»¡è¶³æŸç§æ¡ä»¶æ¥è¿›è¡Œæƒé™åˆ¤æ–­ã€‚å±æ€§ä¸€èˆ¬åˆ†ä¸ºå››ç±»ï¼šç”¨æˆ·å±æ€§ï¼ˆè‡ªç„¶äººå±æ€§ï¼Œå¦‚å¹´é¾„ã€æ€§åˆ«ç­‰ï¼‰ï¼Œç¯å¢ƒå±æ€§ï¼ˆç‰©ç†ç¯å¢ƒï¼Œå¦‚æ—¶é—´ã€åœ°ç‚¹ã€æ°”å€™ï¼‰ï¼Œæ“ä½œå±æ€§ï¼ˆè¯»ã€å†™ï¼‰å’Œå¯¹è±¡å±æ€§ï¼ˆæ“ä½œå¯¹è±¡ï¼Œå¦‚èµ„é‡‘ã€æŸå¼ å›¾ç‰‡ã€æŸä¸ªç‰¹å®šçš„é¡µé¢ï¼Œåˆç§°èµ„æºå±æ€§ï¼‰ã€‚</li></ul></li><li>å› æ­¤ç†è®ºä¸Šèƒ½å¤Ÿå®ç°çµæ´»çš„æƒé™æ§åˆ¶ã€å°†åœ¨æƒé™ä¸ç”¨æˆ·ä¹‹å‰é€šè¿‡ä¸€ç»„æˆ–å¤šç»„å±æ€§å®ç°å…³è”ï¼Œå‡ ä¹èƒ½æ»¡è¶³æ‰€æœ‰ç±»å‹çš„éœ€æ±‚ã€‚</li></ul><h3 id="æƒé™ç®¡æ§"><a href="#æƒé™ç®¡æ§" class="headerlink" title="æƒé™ç®¡æ§"></a>æƒé™ç®¡æ§</h3><blockquote><p>æŠ½è±¡æ¥çœ‹æƒé™ä½“ç³»å¯ä»¥åˆ†ä¸ºå¦‚ä¸‹ä¸¤ç±»ï¼šåŠŸèƒ½æƒé™ ä¸ æ•°æ®æƒé™ ä¸¤éƒ¨åˆ†ã€‚</p></blockquote><ul><li>åŠŸèƒ½æƒé™æŒ‡çš„æ˜¯åœ¨ç³»ç»Ÿä¸­çš„åŠŸèƒ½å¯å¦ä½¿ç”¨ï¼Œé€šå¸¸æˆ‘ä»¬å°†åŠŸèƒ½æƒé™åˆ†ä¸ºæŸ¥çœ‹ã€ç¼–è¾‘ã€åˆ é™¤ç­‰ï¼ŒåŒæ—¶ç¼–è¾‘ã€åˆ é™¤æƒé™åˆåŒ…å«äº†æŸ¥çœ‹ã€‚é€šè¿‡å°çš„æƒé™ç‚¹æ‹†åˆ†æ›´ç²¾ç»†çš„èµ‹äºˆäº†å‘˜å·¥èƒ½å¦è¿›å…¥æŸä¸ªé¡µé¢æŸ¥çœ‹ä¿¡æ¯ã€ç¼–è¾‘ä¿¡æ¯çš„èƒ½åŠ›ã€‚</li><li>æ•°æ®æƒé™æŒ‡æ•°æ®ä¸­å­˜åœ¨çš„æ•°æ®æ˜¯å¦èƒ½æŸ¥çœ‹ï¼Œæ˜¯ä¸€ä¸ªæ›´ç»†ç²’åº¦çš„æƒé™ã€‚æ¯”å¦‚ä¸€ä¸ªé¡µé¢ï¼Œä¸åŒè§’è‰²æŸ¥çœ‹ä¸åŒçš„æ•°æ®å°±éœ€è¦é€šè¿‡æ•°æ®æƒé™æ§åˆ¶ã€‚<br>ä»ç®¡ç†å¯¹è±¡ç»´åº¦åˆå¯ä»¥åˆ†ä¸ºï¼šä¼ä¸šèƒ½åŠ› ä¸ å‘˜å·¥èƒ½åŠ›ã€‚</li><li>ä¼ä¸šèƒ½åŠ›åº—é“ºç»´åº¦çš„æƒé™ï¼Œæ¯”å¦‚å¼€é€šæŸæœåŠ¡ï¼Œå¯ä»¥é€šè¿‡ä¼ä¸šèƒ½åŠ›å»ä½“ç°ã€‚</li><li>ä¼ä¸šèƒ½åŠ›èµ‹äºˆç”¨æˆ·çš„æƒé™ï¼Œæ¯”å¦‚æ”¶ç”µå­å‘ç¥¨ã€èµ„é‡‘ç®¡ç†ç­‰ã€‚</li><li>ä¼ä¸šèƒ½åŠ›ä¼˜å…ˆçº§ç»å¯¹é«˜äºå‘˜å·¥èƒ½åŠ›ï¼Œæ‰€æœ‰åœºæ™¯çš„æƒé™åˆ¤æ–­ï¼Œåº—é“ºèƒ½åŠ›å¿…é¡»å…ˆäºå‘˜å·¥èƒ½åŠ›ã€‚ç®€å•åœ°è¯´ï¼Œä¼ä¸šèƒ½åŠ›å†³å®šäº†â€œä¼ä¸šèƒ½åšä»€ä¹ˆâ€ï¼Œå‘˜å·¥èƒ½åŠ›å†³å®šäº†â€œç”¨æˆ·èƒ½åšä»€ä¹ˆâ€ã€‚</li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;èƒŒæ™¯&quot;&gt;&lt;a href=&quot;#èƒŒæ™¯&quot; class=&quot;headerlink&quot; title=&quot;èƒŒæ™¯&quot;&gt;&lt;/a&gt;èƒŒæ™¯&lt;/h2&gt;&lt;blockquote&gt;
&lt;p&gt;æƒé™ç®¡ç†æ˜¯ä¸€ä¸ªå‡ ä¹æ‰€æœ‰å¤§ä¸­å‹ B ç«¯ç³»ç»Ÿéƒ½ä¼šæ¶‰åŠçš„é‡è¦ç»„æˆéƒ¨åˆ†ï¼Œå…¶ç›®çš„æ˜¯å¯¹æ•´ä¸ªç³»ç»Ÿè¿›è¡Œæƒé™æ§åˆ¶ï¼Œé¿å…é€ æˆè¯¯æ“ä½œåŠæ•°
      
    
    </summary>
    
    
      <category term="ç³»ç»Ÿè®¾è®¡" scheme="https://z201.cn/categories/%E7%B3%BB%E7%BB%9F%E8%AE%BE%E8%AE%A1/"/>
    
    
      <category term="ç³»ç»Ÿè®¾è®¡" scheme="https://z201.cn/tags/%E7%B3%BB%E7%BB%9F%E8%AE%BE%E8%AE%A1/"/>
    
      <category term="æƒé™è®¾è®¡" scheme="https://z201.cn/tags/%E6%9D%83%E9%99%90%E8%AE%BE%E8%AE%A1/"/>
    
  </entry>
  
  <entry>
    <title>Git-Develop-Branch</title>
    <link href="https://z201.cn/2021/09/20/Git-Develop-Branch/"/>
    <id>https://z201.cn/2021/09/20/Git-Develop-Branch/</id>
    <published>2021-09-20T13:34:52.000Z</published>
    <updated>2021-09-22T15:40:44.617Z</updated>
    
    <content type="html"><![CDATA[<h2 id="è§„èŒƒä»£ç å¼€å‘æµç¨‹"><a href="#è§„èŒƒä»£ç å¼€å‘æµç¨‹" class="headerlink" title="è§„èŒƒä»£ç å¼€å‘æµç¨‹"></a>è§„èŒƒä»£ç å¼€å‘æµç¨‹</h2><blockquote><p>git åˆ†æ”¯åˆ†ä¸ºé›†æˆåˆ†æ”¯ã€åŠŸèƒ½åˆ†æ”¯å’Œä¿®å¤åˆ†æ”¯ï¼Œåˆ†åˆ«å‘½åä¸º developã€feature å’Œ hotfixï¼Œå‡ä¸ºå•æ•°ã€‚ä¸å¯ä½¿ç”¨ featuresã€futureã€hotfixesã€hotfixs ç­‰é”™è¯¯åç§°ã€‚</p></blockquote><p>1.gitä¸»åˆ†æ”¯(master)ã€‚å®ƒæ˜¯è‡ªåŠ¨å»ºç«‹ï¼Œç”¨äºå‘å¸ƒé‡å¤§ç‰ˆæœ¬æ›´æ–°ï¼ˆgithub ç°åœ¨é»˜è®¤æ˜¯æ˜¯main å› ç§æ—æ­§è§†é—®é¢˜ï¼‰<br>2.gitå¼€å‘ä¸»åˆ†æ”¯(develop)ã€‚æ—¥å¸¸å¼€å‘åœ¨æ­¤åˆ†æ”¯ä¸Šè¿›è¡Œ<br>3.gitä¸´æ—¶æ€§åˆ†æ”¯ï¼šç”¨äºåº”å¯¹ä¸€äº›ç‰¹å®šç›®çš„çš„ç‰ˆæœ¬å¼€å‘(éªŒè¯OKåï¼Œåº”è¯¥åˆ é™¤æ­¤åˆ†æ”¯)</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">- åŠŸèƒ½ï¼ˆfeatureï¼‰åˆ†æ”¯ï¼šå®ƒæ˜¯ä¸ºäº†å¼€å‘æŸç§ç‰¹å®šåŠŸèƒ½ï¼Œä»Developåˆ†æ”¯ä¸Šé¢åˆ†å‡ºæ¥çš„ã€‚å¼€å‘å®Œæˆåï¼Œè¦å†å¹¶å…¥Developã€‚å¯ä»¥é‡‡ç”¨feature-çš„å½¢å¼å‘½åã€‚</span><br><span class="line">- é¢„å‘å¸ƒï¼ˆreleaseï¼‰åˆ†æ”¯ï¼šæŒ‡å‘å¸ƒæ­£å¼ç‰ˆæœ¬ä¹‹å‰ï¼ˆå³åˆå¹¶åˆ°Masteråˆ†æ”¯ä¹‹å‰ï¼‰ï¼Œæˆ‘ä»¬å¯èƒ½éœ€è¦æœ‰ä¸€ä¸ªé¢„å‘å¸ƒçš„ç‰ˆæœ¬è¿›è¡Œæµ‹è¯•ã€‚é¢„å‘å¸ƒåˆ†æ”¯æ˜¯ä»Developåˆ†æ”¯ä¸Šé¢åˆ†å‡ºæ¥çš„ï¼Œé¢„å‘å¸ƒç»“æŸä»¥åï¼Œ</span><br><span class="line">å¿…é¡»åˆå¹¶è¿›Developå’ŒMasteråˆ†æ”¯ã€‚å®ƒçš„å‘½åï¼Œå¯ä»¥é‡‡ç”¨release-çš„å½¢å¼ã€‚</span><br><span class="line">- ä¿®è¡¥bugï¼ˆhotfixï¼‰åˆ†æ”¯ï¼šè½¯ä»¶æ­£å¼å‘å¸ƒä»¥åï¼Œéš¾å…ä¼šå‡ºç°bugã€‚è¿™æ—¶å°±éœ€è¦åˆ›å»ºä¸€ä¸ªåˆ†æ”¯ï¼Œè¿›è¡Œbugä¿®è¡¥ã€‚ä¿®è¡¥bugåˆ†æ”¯æ˜¯ä»Masteræˆ–Developåˆ†æ”¯ä¸Šé¢åˆ†å‡ºæ¥çš„ã€‚ä¿®è¡¥ç»“æŸä»¥åï¼Œ</span><br><span class="line">å†åˆå¹¶è¿›Masterå’ŒDevelopåˆ†æ”¯ã€‚å®ƒçš„å‘½åï¼Œå¯ä»¥é‡‡ç”¨hotfix-***çš„å½¢å¼ã€‚</span><br></pre></td></tr></table></figure><p>å¼€å‘æµç¨‹</p><blockquote><p>æš‚å®šä¸´æ—¶åˆ†æ”¯featureã€hotfixä¸¤ç§å¯ç”¨ã€‚æš‚ä¸å¯ç”¨RPã€code reviewã€‚</p></blockquote><p>1.åŸºäºdevelopç”Ÿæˆæ–°ä¸´æ—¶å¼€å‘åˆ†æ”¯ã€‚<br>2.æµ‹è¯•ã€æ­£å¼ç¯å¢ƒä¸Šçº¿é€šè¿‡ã€‚<br>3.åˆå¹¶è‡³developåˆ†æ”¯ï¼Œå¹¶ç”Ÿæˆå¯¹åº”çš„tagç‰ˆæœ¬ã€‚<br>4.å®Œæˆç‰¹å®šåŠŸèƒ½å¼€å‘å(éªŒè¯OKåï¼Œåº”è¯¥åˆ é™¤æ­¤åˆ†æ”¯)ã€‚<br>5.README.mdæ–‡æ¡£ä¸­è®°å½•tagç‰ˆæœ¬ç”Ÿæˆæ—¶é—´ä»¥åŠå…·ä½“çš„åŠŸèƒ½åç§°ã€‚</p><p>ä¿®å¤bugæµç¨‹</p><blockquote><p>æ ¹æ®æœ€æ–°å·²ç»ä¸Šçº¿çš„åˆ†æ”¯ä»£ç åˆ›å»ºhotfixåˆ†æ”¯ã€‚</p></blockquote><p>1.åŸºäºdevelopæˆ–è€…ä¸Šä¸ªtagç‰ˆæœ¬(æ ¹æ®å®é™…æƒ…å†µè€Œå®š)ç”Ÿæˆæ–°ä¸´æ—¶å¼€å‘åˆ†æ”¯ã€‚<br>2.æµ‹è¯•ã€æ­£å¼ç¯å¢ƒä¸Šçº¿é€šè¿‡ã€‚<br>3.åˆå¹¶è‡³developåˆ†æ”¯ï¼Œå¹¶ç”Ÿæˆå¯¹åº”çš„tagç‰ˆæœ¬ã€‚<br>4.<code>è‹¥å­˜åœ¨ä¸´æ—¶å¼€å‘åˆ†æ”¯</code>-å®Œæˆç‰¹å®šåŠŸèƒ½å¼€å‘å(éªŒè¯OKåï¼Œåº”è¯¥åˆ é™¤æ­¤åˆ†æ”¯)ã€‚<br>5.<code>è‹¥å­˜åœ¨ä¸´æ—¶å¼€å‘åˆ†æ”¯</code>-ä¸´æ—¶å¼€å‘åˆ†æ”¯åˆå¹¶å·²ç»ä¿®å¤bugçš„developä»£ç ã€‚<br>6.<code>è‹¥å­˜åœ¨ä¸´æ—¶å¼€å‘åˆ†æ”¯</code>-ä¸´æ—¶å¼€å‘åˆ†æ”¯å®Œæˆç‰¹å®šåŠŸèƒ½å¼€å‘å(éªŒè¯OKåï¼Œåº”è¯¥åˆ é™¤æ­¤åˆ†æ”¯)ã€‚<br>7.README.mdæ–‡æ¡£ä¸­è®°å½•tagç‰ˆæœ¬ç”Ÿæˆæ—¶é—´ä»¥åŠå…·ä½“çš„åŠŸèƒ½åç§°ã€‚</p><h2 id="æ¡ˆä¾‹"><a href="#æ¡ˆä¾‹" class="headerlink" title="æ¡ˆä¾‹"></a>æ¡ˆä¾‹</h2><h3 id="å¼€å‘å°ºç "><a href="#å¼€å‘å°ºç " class="headerlink" title="å¼€å‘å°ºç "></a>å¼€å‘å°ºç </h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">git checkout develop &#x2F;&#x2F; åˆ‡æ¢å¼€å‘åˆ†æ”¯ï¼Œgit pull origin develop å¹¶åŒæ­¥æœ€æ–°çš„developåˆ†æ”¯ä»£ç ã€‚ï¼ˆå¼ºåˆ¶ï¼‰</span><br><span class="line">git checkout -b feature-sizeGroup &#x2F;&#x2F;åŸºäºdevelopåˆ†æ”¯åˆ›å»ºæ–°çš„å¼€å‘åˆ†æ”¯ï¼ˆå¼ºåˆ¶ï¼‰</span><br><span class="line">git checkout develop &#x2F;&#x2F; feature-sizeGroupå®Œæˆä¸Šçº¿ådevelopåˆ†æ”¯å‡†å¤‡åˆå¹¶åˆ†æ”¯ï¼ˆå¼ºåˆ¶ï¼‰</span><br><span class="line">git merge feature-sizeGroup &#x2F;&#x2F; åˆå¹¶å¼€å‘åŠŸèƒ½åˆ†æ”¯ï¼ˆå¼ºåˆ¶ï¼‰</span><br><span class="line">git tag -a v1.4 -m &quot;my version 1.4&quot; &#x2F;&#x2F; åˆå¹¶å®Œæˆåˆ›å»ºæ ‡ç­¾å¤‡æ³¨ä¸­ç®€å•è¯´æ˜å¼€å‘åŠŸèƒ½ï¼ˆå¼ºåˆ¶ï¼‰</span><br><span class="line">git push origin v1.4 &#x2F;&#x2F; æ¨é€tagæ ‡ç­¾åˆ°è¿œç¨‹ä»“åº“ï¼ˆå¼ºåˆ¶ï¼‰</span><br><span class="line">git branch -d feature-sizeGroup &#x2F;&#x2F;åˆ é™¤æœ¬åœ°çš„ä¸´æ—¶å¼€å‘åˆ†æ”¯(éå¼ºåˆ¶)</span><br><span class="line">git push origin --delete feature-sizeGroup &#x2F;&#x2F; åˆ é™¤è¿œç¨‹çš„ä¸´æ—¶å¼€å‘åˆ†æ”¯ï¼ˆå¼ºåˆ¶ï¼‰</span><br><span class="line">vim README.md &#x2F;&#x2F; ä¿å­˜æ–°å¢tagç‰ˆæœ¬è®°å½•ï¼ˆå¼ºåˆ¶ï¼‰</span><br><span class="line">git add README.md &#x2F;&#x2F; è¿½è¸ªREADME.mdæ–‡ä»¶ã€‚ï¼ˆå¼ºåˆ¶ï¼‰</span><br><span class="line">git commit -m &quot;å‘å¸ƒæ–°çš„tag&quot; &#x2F;&#x2F; å°†æš‚å­˜åŒºé‡Œçš„æ”¹åŠ¨ç»™æäº¤åˆ°æœ¬åœ°çš„ç‰ˆæœ¬åº“ï¼ˆå¼ºåˆ¶ï¼‰</span><br><span class="line">git push origin develop &#x2F;&#x2F; æ¨é€æ”¹åŠ¨åçš„developï¼ˆå¼ºåˆ¶ï¼‰</span><br></pre></td></tr></table></figure><h3 id="master-åˆå¹¶å‘¨æœŸ"><a href="#master-åˆå¹¶å‘¨æœŸ" class="headerlink" title="master åˆå¹¶å‘¨æœŸ"></a>master åˆå¹¶å‘¨æœŸ</h3><blockquote><p>æ¯æœˆæœˆåº•æœ€åå‡ ä¸ªå·¥ä½œæ—¥å®Œæˆå¯¹master å¯¹developåˆ†æ”¯çš„åˆå¹¶ã€‚</p></blockquote><h3 id="tag-ç‰ˆæœ¬å‘½å"><a href="#tag-ç‰ˆæœ¬å‘½å" class="headerlink" title="tag ç‰ˆæœ¬å‘½å"></a>tag ç‰ˆæœ¬å‘½å</h3><blockquote><p>ç‰ˆæœ¬å‘½åè§„èŒƒ</p></blockquote><ul><li>ç‰ˆæœ¬: v1.1.1 ( Build 101001 )</li><li>ç‰ˆæœ¬æ ¼å¼ bigVersion.middleVersion.smallVersion</li><li>bigVersion å¤§ç‰ˆæœ¬(å¹´åº¦æˆ–è€…é‡å¤§æ›´æ–°ï¼ˆå¼ºåˆ¶æ›´æ–°ï¼Œè€ç‰ˆæœ¬å­˜åœ¨ä¸å…¼å®¹ç­‰æƒ…å†µï¼‰) å–å€¼èŒƒå›´ 1-99</li><li>middleVersion è¿­ä»£ç‰ˆæœ¬ å–å€¼èŒƒå›´ 1-99</li><li>smallVersion bugä¿®å¤å¢å¼ºå‘å¸ƒã€‚ å–å€¼èŒƒå›´ 1-999</li><li>Buildä¸ºç‰ˆæœ¬çº¯æ•°å­—æ ¼å¼åŒ–ã€‚</li></ul><h3 id="gitå¸®åŠ©æ–‡æ¡£"><a href="#gitå¸®åŠ©æ–‡æ¡£" class="headerlink" title="gitå¸®åŠ©æ–‡æ¡£"></a>gitå¸®åŠ©æ–‡æ¡£</h3><p><a href="https://gitee.com/all-about-git" target="_blank" rel="noopener">git å¤§å…¨</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;è§„èŒƒä»£ç å¼€å‘æµç¨‹&quot;&gt;&lt;a href=&quot;#è§„èŒƒä»£ç å¼€å‘æµç¨‹&quot; class=&quot;headerlink&quot; title=&quot;è§„èŒƒä»£ç å¼€å‘æµç¨‹&quot;&gt;&lt;/a&gt;è§„èŒƒä»£ç å¼€å‘æµç¨‹&lt;/h2&gt;&lt;blockquote&gt;
&lt;p&gt;git åˆ†æ”¯åˆ†ä¸ºé›†æˆåˆ†æ”¯ã€åŠŸèƒ½åˆ†æ”¯å’Œä¿®å¤åˆ†æ”¯ï¼Œåˆ†åˆ«å‘½åä¸º deve
      
    
    </summary>
    
    
      <category term="Git" scheme="https://z201.cn/categories/Git/"/>
    
    
      <category term="Git" scheme="https://z201.cn/tags/Git/"/>
    
      <category term="Develop" scheme="https://z201.cn/tags/Develop/"/>
    
      <category term="Branch" scheme="https://z201.cn/tags/Branch/"/>
    
  </entry>
  
  <entry>
    <title>Jvm-optimization</title>
    <link href="https://z201.cn/2021/08/19/Jvm-optimization/"/>
    <id>https://z201.cn/2021/08/19/Jvm-optimization/</id>
    <published>2021-08-19T06:09:45.000Z</published>
    <updated>2021-11-23T17:53:10.172Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>jvmè°ƒä¼˜æ˜¯æ—¥å¸¸å·¥ä½œä¸­ç»å¸¸ä¼šä½¿ç”¨çš„æŠ€å·§ï¼Œæ•´ç†ä¸‹ã€‚</p></blockquote><h3 id="é¡¹ç›®å¯åŠ¨çš„æ—¶å€™åŠ ä¸Šçš„å‚æ•°éƒ½æ˜¯äº›å•¥æ„æ€ï¼Ÿ"><a href="#é¡¹ç›®å¯åŠ¨çš„æ—¶å€™åŠ ä¸Šçš„å‚æ•°éƒ½æ˜¯äº›å•¥æ„æ€ï¼Ÿ" class="headerlink" title="é¡¹ç›®å¯åŠ¨çš„æ—¶å€™åŠ ä¸Šçš„å‚æ•°éƒ½æ˜¯äº›å•¥æ„æ€ï¼Ÿ"></a>é¡¹ç›®å¯åŠ¨çš„æ—¶å€™åŠ ä¸Šçš„å‚æ•°éƒ½æ˜¯äº›å•¥æ„æ€ï¼Ÿ</h3><blockquote><p>åˆšå¼€å§‹å·¥ä½œçš„æ—¶å€™å‘ç°åŒäº‹ä¼šåœ¨jarå¯åŠ¨çš„å‘½ä»¤ä¸Šå¢åŠ å¾ˆå¤šå‚æ•°,å¾ˆé•¿ä¸€æ®µæ—¶é—´éƒ½ä¸æ¸…æ¥šæ˜¯å¹²å•¥çš„ã€‚</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">-XX:MetaspaceSize=<span class="number">128</span>m -XX:MaxMetaspaceSize=<span class="number">128</span>m -Xms1024m -Xmx1024m -Xmn256m -Xss256k -XX:SurvivorRatio=<span class="number">8</span> -XX:+UseConcMarkSweepGC</span><br></pre></td></tr></table></figure><ul><li>ç®€å•ä»‹ç»ä¸‹å‚æ•°</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">-XX:MetaspaceSize=128m ï¼ˆå…ƒç©ºé—´é»˜è®¤å¤§å°ï¼‰</span><br><span class="line">-XX:MaxMetaspaceSize=128m ï¼ˆå…ƒç©ºé—´æœ€å¤§å¤§å°ï¼‰</span><br><span class="line">-Xms1024m ï¼ˆå †æœ€å¤§å¤§å°ï¼‰</span><br><span class="line">-Xmx1024m ï¼ˆå †é»˜è®¤å¤§å°ï¼‰</span><br><span class="line">-Xmn256m ï¼ˆæ–°ç”Ÿä»£å¤§å°ï¼‰</span><br><span class="line">-Xss256k ï¼ˆæ£§æœ€å¤§æ·±åº¦å¤§å°ï¼‰</span><br><span class="line">-XX:SurvivorRatio=8 ï¼ˆæ–°ç”Ÿä»£åˆ†åŒºæ¯”ä¾‹ 8:2ï¼‰</span><br><span class="line">-XX:+UseConcMarkSweepGC ï¼ˆæŒ‡å®šä½¿ç”¨çš„åƒåœ¾æ”¶é›†å™¨ï¼Œè¿™é‡Œä½¿ç”¨CMSæ”¶é›†å™¨ï¼‰</span><br><span class="line">-XX:+PrintGCDetails ï¼ˆæ‰“å°è¯¦ç»†çš„GCæ—¥å¿—ï¼‰</span><br></pre></td></tr></table></figure><ul><li>è™½ç„¶æœ‰äº†ä»‹ç»ä½†æ˜¯ä¾ç„¶ä¸æ¸…æ¥šå…·ä½“æ˜¯å¹²å•¥çš„ã€‚å¹¶ä¸”Javaè™šæ‹Ÿæœºæä¾›äº†éå¸¸å¤šçš„å‚æ•°å‘½ä»¤ã€‚ä¸‹é¢ä»£ç å¯ä»¥è¾“å‡ºæ”¯æŒçš„å‚æ•°æ•°é‡</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">java -XX:+PrintFlagsFinal -XX:+UnlockDiagnosticVMOptions -version | wc -l</span><br><span class="line">openjdk version <span class="string">"1.8.0_275"</span></span><br><span class="line"><span class="function">OpenJDK Runtime <span class="title">Environment</span> <span class="params">(AdoptOpenJDK)</span><span class="params">(build <span class="number">1.8</span><span class="number">.0</span>_275-b01)</span></span></span><br><span class="line"><span class="function">OpenJDK 64-Bit Server <span class="title">VM</span> <span class="params">(AdoptOpenJDK)</span><span class="params">(build <span class="number">25.275</span>-b01, mixed mode)</span></span></span><br><span class="line"><span class="function">     838</span></span><br></pre></td></tr></table></figure><ul><li>å †å†…å­˜å¤§å°é…ç½®</li></ul><blockquote><p>å»ºè®® -Xms = æœ€å¤§å†…å­˜ * [0.6. ~0.8] è¿™é‡Œéœ€è¦è€ƒè™‘ç³»ç»ŸæŸè€—å†…å­˜ã€å’Œå®é™…ç‰©ç†å†…å­˜ã€‚</p></blockquote><ul><li><p>å †å†…å­˜ä¸å †å¤–å†…å­˜</p><ul><li>å †å†…å­˜</li></ul><blockquote><p>å¿…é¡»æ˜¯1024çš„å€æ•°ï¼Œä¸”ä¸èƒ½ä½äº2Mã€‚</p><p>32ä½æœºå™¨ï¼Œæœ€å¤§1G/4G 64ä½æœºå™¨æœ€å¤§å¯ä»¥è¶…è¿‡ 32G/64G</p></blockquote><ul><li>å †å¤–å†…å­˜</li></ul><blockquote><p>å †å¤–å†…å­˜ä¸€èˆ¬æŒ‡ Direct Memory ï¼Œä¸å—GCæ§åˆ¶ï¼ŒJVMã€Nettyéƒ½å¯èƒ½ä½¿ç”¨å †å¤–å†…å­˜ã€‚</p></blockquote></li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">-XX:MaxDirectMemorySize é™åˆ¶</span><br></pre></td></tr></table></figure><h3 id="å¦‚ä½•ç†è§£è¿™äº›å‚æ•°çš„å«ä¹‰ï¼Ÿ"><a href="#å¦‚ä½•ç†è§£è¿™äº›å‚æ•°çš„å«ä¹‰ï¼Ÿ" class="headerlink" title="å¦‚ä½•ç†è§£è¿™äº›å‚æ•°çš„å«ä¹‰ï¼Ÿ"></a>å¦‚ä½•ç†è§£è¿™äº›å‚æ•°çš„å«ä¹‰ï¼Ÿ</h3><blockquote><p>é¦–å…ˆæˆ‘ä»¬éœ€è¦ç†è§£javaæ˜¯å¦‚ä½•è¿è¡Œçš„ï¼Œä¸ºä»€ä¹ˆéœ€è¦javaè™šæ‹Ÿæœºï¼Ÿ    </p><p>æˆ‘ä»¬å¸¸ç”¨æ–¹å¼ä¸€èˆ¬æ˜¯å®‰è£…javaè¿è¡Œç¯å¢ƒ(jre)ç”¨å‘½ä»¤è¡Œçš„æ–¹å¼å¯åŠ¨æˆ–è€…ç›´æ¥åŒå‡»jarè¿è¡Œã€‚jreåŒ…å«çš„javaè¿è¡Œçš„å¿…è¦ç¯å¢ƒã€‚</p><p>Java ä½œä¸ºä¸€é—¨é«˜çº§ç¨‹åºè¯­è¨€ï¼Œå®ƒçš„è¯­æ³•éå¸¸å¤æ‚ï¼ŒæŠ½è±¡ç¨‹åº¦ä¹Ÿå¾ˆé«˜ã€‚ç¼–è¯‘å‡ºæ¥çš„ä¹Ÿä¸æ˜¯æœºå™¨å¯ä»¥ç›´æ¥ç›´æ¥è¿è¡Œä»£ç ã€‚æ‰€ä»¥ä½¿ç”¨é¢å‘Javaè¯­è¨€çš„è™šæ‹Ÿæœºè¿è¡ŒJavaç¼–è¯‘ä»¥åçš„ç‰¹å®šä»£ç ã€‚è¿™é‡Œçš„ç‰¹å®šä»£ç æŒ‡çš„æ˜¯Javaå­—èŠ‚æŒ‡ä»¤ç ã€‚</p></blockquote><h3 id="JVM-å†…å­˜åˆ†é…æ€§èƒ½é—®é¢˜"><a href="#JVM-å†…å­˜åˆ†é…æ€§èƒ½é—®é¢˜" class="headerlink" title="JVM å†…å­˜åˆ†é…æ€§èƒ½é—®é¢˜"></a>JVM å†…å­˜åˆ†é…æ€§èƒ½é—®é¢˜</h3><ul><li>åœ¨åº”ç”¨æœåŠ¡çš„ç‰¹å®šåœºæ™¯ä¸‹ï¼ŒJVM å†…å­˜åˆ†é…ä¸åˆç†å¸¦æ¥çš„æ€§èƒ½è¡¨ç°å¹¶ä¸ä¼šåƒå†…å­˜æº¢å‡ºé—®é¢˜è¿™ä¹ˆçªå‡ºã€‚å¦‚æœæ²¡æœ‰æ·±å…¥åˆ°å„é¡¹æ€§èƒ½æŒ‡æ ‡ä¸­å»ï¼Œæ˜¯å¾ˆéš¾å‘ç°å…¶ä¸­éšè—çš„æ€§èƒ½æŸè€—ã€‚</li><li>JVM å†…å­˜åˆ†é…ä¸åˆç†æœ€ç›´æ¥çš„è¡¨ç°å°±æ˜¯é¢‘ç¹çš„ GCï¼Œè¿™ä¼šå¯¼è‡´ä¸Šä¸‹æ–‡åˆ‡æ¢ç­‰æ€§èƒ½é—®é¢˜ï¼Œä»è€Œé™ä½ç³»ç»Ÿçš„ååé‡ã€å¢åŠ ç³»ç»Ÿçš„å“åº”æ—¶é—´ã€‚</li></ul><h3 id="åˆ†æ-GC-æ—¥å¿—"><a href="#åˆ†æ-GC-æ—¥å¿—" class="headerlink" title="åˆ†æ GC æ—¥å¿—"></a>åˆ†æ GC æ—¥å¿—</h3><ul><li>åœ¨è¿›è¡Œå‹æµ‹çš„æ—¶å€™ï¼Œæˆ‘ä»¬éœ€è¦å¯¹GCæ—¥å¿—è¿›è¡Œåˆ†æã€‚</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">-XX:+PrintGCTimeStamps -XX:+PrintGCDetails -Xloggc:/log/heap.log</span><br></pre></td></tr></table></figure><ul><li>-XX:PrintGCTimeStampsï¼šæ‰“å° GC å…·ä½“æ—¶é—´ï¼›</li><li>-XX:PrintGCDetails ï¼šæ‰“å°å‡º GC è¯¦ç»†æ—¥å¿—ï¼›</li><li>-Xloggc: pathï¼šGC æ—¥å¿—ç”Ÿæˆè·¯å¾„ã€‚</li><li>JVM å†…å­˜è°ƒä¼˜é€šå¸¸å’Œ GC è°ƒä¼˜æ˜¯äº’è¡¥çš„ï¼ŒåŸºäºä»¥ä¸Šè°ƒä¼˜ï¼Œå¯ä»¥å¯¹å¹´è½»ä»£å’Œå †å†…å­˜çš„åƒåœ¾å›æ”¶ç®—æ³•è¿›è¡Œè°ƒä¼˜ã€‚</li></ul><a id="more"></a>]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;jvmè°ƒä¼˜æ˜¯æ—¥å¸¸å·¥ä½œä¸­ç»å¸¸ä¼šä½¿ç”¨çš„æŠ€å·§ï¼Œæ•´ç†ä¸‹ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id=&quot;é¡¹ç›®å¯åŠ¨çš„æ—¶å€™åŠ ä¸Šçš„å‚æ•°éƒ½æ˜¯äº›å•¥æ„æ€ï¼Ÿ&quot;&gt;&lt;a href=&quot;#é¡¹ç›®å¯åŠ¨çš„æ—¶å€™åŠ ä¸Šçš„å‚æ•°éƒ½æ˜¯äº›å•¥æ„æ€ï¼Ÿ&quot; class=&quot;headerlink&quot; title=&quot;é¡¹ç›®å¯åŠ¨çš„æ—¶å€™åŠ ä¸Šçš„å‚æ•°éƒ½æ˜¯äº›å•¥æ„æ€ï¼Ÿ&quot;&gt;&lt;/a&gt;é¡¹ç›®å¯åŠ¨çš„æ—¶å€™åŠ ä¸Šçš„å‚æ•°éƒ½æ˜¯äº›å•¥æ„æ€ï¼Ÿ&lt;/h3&gt;&lt;blockquote&gt;
&lt;p&gt;åˆšå¼€å§‹å·¥ä½œçš„æ—¶å€™å‘ç°åŒäº‹ä¼šåœ¨jarå¯åŠ¨çš„å‘½ä»¤ä¸Šå¢åŠ å¾ˆå¤šå‚æ•°,å¾ˆé•¿ä¸€æ®µæ—¶é—´éƒ½ä¸æ¸…æ¥šæ˜¯å¹²å•¥çš„ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;figure class=&quot;highlight java&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;-XX:MetaspaceSize=&lt;span class=&quot;number&quot;&gt;128&lt;/span&gt;m -XX:MaxMetaspaceSize=&lt;span class=&quot;number&quot;&gt;128&lt;/span&gt;m -Xms1024m -Xmx1024m -Xmn256m -Xss256k -XX:SurvivorRatio=&lt;span class=&quot;number&quot;&gt;8&lt;/span&gt; -XX:+UseConcMarkSweepGC&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;ul&gt;
&lt;li&gt;ç®€å•ä»‹ç»ä¸‹å‚æ•°&lt;/li&gt;
&lt;/ul&gt;
&lt;figure class=&quot;highlight shell&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;-XX:MetaspaceSize=128m ï¼ˆå…ƒç©ºé—´é»˜è®¤å¤§å°ï¼‰&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;-XX:MaxMetaspaceSize=128m ï¼ˆå…ƒç©ºé—´æœ€å¤§å¤§å°ï¼‰&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;-Xms1024m ï¼ˆå †æœ€å¤§å¤§å°ï¼‰&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;-Xmx1024m ï¼ˆå †é»˜è®¤å¤§å°ï¼‰&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;-Xmn256m ï¼ˆæ–°ç”Ÿä»£å¤§å°ï¼‰&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;-Xss256k ï¼ˆæ£§æœ€å¤§æ·±åº¦å¤§å°ï¼‰&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;-XX:SurvivorRatio=8 ï¼ˆæ–°ç”Ÿä»£åˆ†åŒºæ¯”ä¾‹ 8:2ï¼‰&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;-XX:+UseConcMarkSweepGC ï¼ˆæŒ‡å®šä½¿ç”¨çš„åƒåœ¾æ”¶é›†å™¨ï¼Œè¿™é‡Œä½¿ç”¨CMSæ”¶é›†å™¨ï¼‰&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;-XX:+PrintGCDetails ï¼ˆæ‰“å°è¯¦ç»†çš„GCæ—¥å¿—ï¼‰&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;ul&gt;
&lt;li&gt;è™½ç„¶æœ‰äº†ä»‹ç»ä½†æ˜¯ä¾ç„¶ä¸æ¸…æ¥šå…·ä½“æ˜¯å¹²å•¥çš„ã€‚å¹¶ä¸”Javaè™šæ‹Ÿæœºæä¾›äº†éå¸¸å¤šçš„å‚æ•°å‘½ä»¤ã€‚ä¸‹é¢ä»£ç å¯ä»¥è¾“å‡ºæ”¯æŒçš„å‚æ•°æ•°é‡&lt;/li&gt;
&lt;/ul&gt;
&lt;figure class=&quot;highlight java&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;java -XX:+PrintFlagsFinal -XX:+UnlockDiagnosticVMOptions -version | wc -l&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;openjdk version &lt;span class=&quot;string&quot;&gt;&quot;1.8.0_275&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;OpenJDK Runtime &lt;span class=&quot;title&quot;&gt;Environment&lt;/span&gt; &lt;span class=&quot;params&quot;&gt;(AdoptOpenJDK)&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(build &lt;span class=&quot;number&quot;&gt;1.8&lt;/span&gt;&lt;span class=&quot;number&quot;&gt;.0&lt;/span&gt;_275-b01)&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;OpenJDK 64-Bit Server &lt;span class=&quot;title&quot;&gt;VM&lt;/span&gt; &lt;span class=&quot;params&quot;&gt;(AdoptOpenJDK)&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(build &lt;span class=&quot;number&quot;&gt;25.275&lt;/span&gt;-b01, mixed mode)&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;     838&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;ul&gt;
&lt;li&gt;å †å†…å­˜å¤§å°é…ç½®&lt;/li&gt;
&lt;/ul&gt;
&lt;blockquote&gt;
&lt;p&gt;å»ºè®® -Xms = æœ€å¤§å†…å­˜ * [0.6. ~0.8] è¿™é‡Œéœ€è¦è€ƒè™‘ç³»ç»ŸæŸè€—å†…å­˜ã€å’Œå®é™…ç‰©ç†å†…å­˜ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;å †å†…å­˜ä¸å †å¤–å†…å­˜&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å †å†…å­˜&lt;/li&gt;
&lt;/ul&gt;
&lt;blockquote&gt;
&lt;p&gt;å¿…é¡»æ˜¯1024çš„å€æ•°ï¼Œä¸”ä¸èƒ½ä½äº2Mã€‚&lt;/p&gt;
&lt;p&gt;32ä½æœºå™¨ï¼Œæœ€å¤§1G/4G 64ä½æœºå™¨æœ€å¤§å¯ä»¥è¶…è¿‡ 32G/64G&lt;/p&gt;
&lt;/blockquote&gt;
&lt;ul&gt;
&lt;li&gt;å †å¤–å†…å­˜&lt;/li&gt;
&lt;/ul&gt;
&lt;blockquote&gt;
&lt;p&gt;å †å¤–å†…å­˜ä¸€èˆ¬æŒ‡ Direct Memory ï¼Œä¸å—GCæ§åˆ¶ï¼ŒJVMã€Nettyéƒ½å¯èƒ½ä½¿ç”¨å †å¤–å†…å­˜ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;figure class=&quot;highlight shell&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;-XX:MaxDirectMemorySize é™åˆ¶&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;h3 id=&quot;å¦‚ä½•ç†è§£è¿™äº›å‚æ•°çš„å«ä¹‰ï¼Ÿ&quot;&gt;&lt;a href=&quot;#å¦‚ä½•ç†è§£è¿™äº›å‚æ•°çš„å«ä¹‰ï¼Ÿ&quot; class=&quot;headerlink&quot; title=&quot;å¦‚ä½•ç†è§£è¿™äº›å‚æ•°çš„å«ä¹‰ï¼Ÿ&quot;&gt;&lt;/a&gt;å¦‚ä½•ç†è§£è¿™äº›å‚æ•°çš„å«ä¹‰ï¼Ÿ&lt;/h3&gt;&lt;blockquote&gt;
&lt;p&gt;é¦–å…ˆæˆ‘ä»¬éœ€è¦ç†è§£javaæ˜¯å¦‚ä½•è¿è¡Œçš„ï¼Œä¸ºä»€ä¹ˆéœ€è¦javaè™šæ‹Ÿæœºï¼Ÿ    &lt;/p&gt;
&lt;p&gt;æˆ‘ä»¬å¸¸ç”¨æ–¹å¼ä¸€èˆ¬æ˜¯å®‰è£…javaè¿è¡Œç¯å¢ƒ(jre)ç”¨å‘½ä»¤è¡Œçš„æ–¹å¼å¯åŠ¨æˆ–è€…ç›´æ¥åŒå‡»jarè¿è¡Œã€‚jreåŒ…å«çš„javaè¿è¡Œçš„å¿…è¦ç¯å¢ƒã€‚&lt;/p&gt;
&lt;p&gt;Java ä½œä¸ºä¸€é—¨é«˜çº§ç¨‹åºè¯­è¨€ï¼Œå®ƒçš„è¯­æ³•éå¸¸å¤æ‚ï¼ŒæŠ½è±¡ç¨‹åº¦ä¹Ÿå¾ˆé«˜ã€‚ç¼–è¯‘å‡ºæ¥çš„ä¹Ÿä¸æ˜¯æœºå™¨å¯ä»¥ç›´æ¥ç›´æ¥è¿è¡Œä»£ç ã€‚æ‰€ä»¥ä½¿ç”¨é¢å‘Javaè¯­è¨€çš„è™šæ‹Ÿæœºè¿è¡ŒJavaç¼–è¯‘ä»¥åçš„ç‰¹å®šä»£ç ã€‚è¿™é‡Œçš„ç‰¹å®šä»£ç æŒ‡çš„æ˜¯Javaå­—èŠ‚æŒ‡ä»¤ç ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id=&quot;JVM-å†…å­˜åˆ†é…æ€§èƒ½é—®é¢˜&quot;&gt;&lt;a href=&quot;#JVM-å†…å­˜åˆ†é…æ€§èƒ½é—®é¢˜&quot; class=&quot;headerlink&quot; title=&quot;JVM å†…å­˜åˆ†é…æ€§èƒ½é—®é¢˜&quot;&gt;&lt;/a&gt;JVM å†…å­˜åˆ†é…æ€§èƒ½é—®é¢˜&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;åœ¨åº”ç”¨æœåŠ¡çš„ç‰¹å®šåœºæ™¯ä¸‹ï¼ŒJVM å†…å­˜åˆ†é…ä¸åˆç†å¸¦æ¥çš„æ€§èƒ½è¡¨ç°å¹¶ä¸ä¼šåƒå†…å­˜æº¢å‡ºé—®é¢˜è¿™ä¹ˆçªå‡ºã€‚å¦‚æœæ²¡æœ‰æ·±å…¥åˆ°å„é¡¹æ€§èƒ½æŒ‡æ ‡ä¸­å»ï¼Œæ˜¯å¾ˆéš¾å‘ç°å…¶ä¸­éšè—çš„æ€§èƒ½æŸè€—ã€‚&lt;/li&gt;
&lt;li&gt;JVM å†…å­˜åˆ†é…ä¸åˆç†æœ€ç›´æ¥çš„è¡¨ç°å°±æ˜¯é¢‘ç¹çš„ GCï¼Œè¿™ä¼šå¯¼è‡´ä¸Šä¸‹æ–‡åˆ‡æ¢ç­‰æ€§èƒ½é—®é¢˜ï¼Œä»è€Œé™ä½ç³»ç»Ÿçš„ååé‡ã€å¢åŠ ç³»ç»Ÿçš„å“åº”æ—¶é—´ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;åˆ†æ-GC-æ—¥å¿—&quot;&gt;&lt;a href=&quot;#åˆ†æ-GC-æ—¥å¿—&quot; class=&quot;headerlink&quot; title=&quot;åˆ†æ GC æ—¥å¿—&quot;&gt;&lt;/a&gt;åˆ†æ GC æ—¥å¿—&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;åœ¨è¿›è¡Œå‹æµ‹çš„æ—¶å€™ï¼Œæˆ‘ä»¬éœ€è¦å¯¹GCæ—¥å¿—è¿›è¡Œåˆ†æã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;figure class=&quot;highlight shell&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;-XX:+PrintGCTimeStamps -XX:+PrintGCDetails -Xloggc:/log/heap.log&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;ul&gt;
&lt;li&gt;-XX:PrintGCTimeStampsï¼šæ‰“å° GC å…·ä½“æ—¶é—´ï¼›&lt;/li&gt;
&lt;li&gt;-XX:PrintGCDetails ï¼šæ‰“å°å‡º GC è¯¦ç»†æ—¥å¿—ï¼›&lt;/li&gt;
&lt;li&gt;-Xloggc: pathï¼šGC æ—¥å¿—ç”Ÿæˆè·¯å¾„ã€‚&lt;/li&gt;
&lt;li&gt;JVM å†…å­˜è°ƒä¼˜é€šå¸¸å’Œ GC è°ƒä¼˜æ˜¯äº’è¡¥çš„ï¼ŒåŸºäºä»¥ä¸Šè°ƒä¼˜ï¼Œå¯ä»¥å¯¹å¹´è½»ä»£å’Œå †å†…å­˜çš„åƒåœ¾å›æ”¶ç®—æ³•è¿›è¡Œè°ƒä¼˜ã€‚&lt;/li&gt;
&lt;/ul&gt;
    
    </summary>
    
    
      <category term="Jvm" scheme="https://z201.cn/categories/Jvm/"/>
    
    
      <category term="Jvm" scheme="https://z201.cn/tags/Jvm/"/>
    
  </entry>
  
  <entry>
    <title>Nginx-log-format</title>
    <link href="https://z201.cn/2021/08/18/Nginx-log-format/"/>
    <id>https://z201.cn/2021/08/18/Nginx-log-format/</id>
    <published>2021-08-18T10:11:55.000Z</published>
    <updated>2021-08-19T06:07:24.818Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>Ngxin æ—¥å¿—æ ¼å¼åŒ–</p></blockquote><ul><li>Nginxæä¾›çš„è®¿é—®æ—¥å¿—é‡Œå°±è•´è—ç€å¤§é‡æœ‰ç”¨ä¿¡æ¯ã€‚ä»Šå¤©è¿™ç¯‡è¦è¯´çš„å°±æ˜¯å¦‚æœä¿®æ”¹Nginxé»˜è®¤æ—¥å¿—æ ¼å¼ï¼Œä»¥ä¾¿äºæˆ‘ä»¬æ›´å¥½çš„æŒ–æ˜æœ‰æ•ˆæŒ‡æ ‡ã€‚</li></ul><p>ç¼–è¾‘<code>/etc/nginx.conf</code>é…ç½®æ–‡ä»¶ï¼Œåœ¨æ—¥å¿—éƒ¨åˆ†æ·»åŠ ä¸‹é¢ä¸¤æ®µä»£ç ï¼Œç¼–è¾‘å®Œæˆåé‡å¯NginxæœåŠ¡å³å¯ã€‚</p><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">log_format</span> main <span class="string">'<span class="variable">$host</span> - <span class="variable">$remote_addr</span> - [<span class="variable">$time_local</span>] "<span class="variable">$request</span>" '</span></span><br><span class="line">                <span class="string">'<span class="variable">$status</span> <span class="variable">$upstream_response_time</span> <span class="variable">$request_time</span> "<span class="variable">$http_referer</span>"'</span></span><br><span class="line">                <span class="string">'"<span class="variable">$http_user_agent</span>" "<span class="variable">$http_x_forwarded_for</span>" <span class="variable">$body_bytes_sent</span> '</span>;</span><br><span class="line"><span class="attribute">access_log</span> /var/log/nginx/access.log main;</span><br></pre></td></tr></table></figure><blockquote><p>ç®€å•ç½—åˆ—ä¸€ä¸‹å˜é‡çš„å«ä¹‰:</p></blockquote><ul><li><code>$host</code> è®¿é—®åŸŸå</li><li><code>$remote_addr</code> å®¢æˆ·ç«¯IPåœ°å€</li><li><code>$time_local</code> è®¿é—®æ—¶é—´</li><li><code>$status</code> è®¿é—®çŠ¶æ€ç </li><li><code>$upstream_response_time</code> åº”ç”¨è¿”å›åˆ°Nginxçš„æ—¶é—´</li><li><code>$request_time</code> è¯·æ±‚æ—¶é—´</li><li><code>$http_referer</code> è¯·æ±‚æ¥æº</li><li><code>$http_user_agent</code> è®¿é—®å®¢æˆ·ç«¯</li><li><code>$http_x_forwarded_for</code> å®¢æˆ·ç«¯IPåœ°å€</li><li><code>$body_bytes_sent</code> è¿”å›ç»™å®¢æˆ·ç«¯å¤§å°</li></ul><blockquote><p>åœ¨serverä¸­ä¸ç”Ÿæ•ˆçš„é—®é¢˜</p></blockquote><ul><li>åœ¨serverä¸­å¢åŠ  <code>access_log /var/log/nginx/access.log main;</code></li></ul><blockquote><p>æ—¥æœŸæ˜¾ç¤ºé—®é¢˜</p></blockquote><ul><li><p><code>[01/Jul/2020:03:25:17 +0800]  </code>å®˜æ–¹é»˜è®¤æ˜¯è¿™ç§</p></li><li><p>ä¿®æ”¹é»˜è®¤æ ¼å¼</p></li></ul><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">log_format</span> main <span class="string">'<span class="variable">$host</span> - <span class="variable">$remote_addr</span> - [<span class="variable">$time_iso8601</span>] "<span class="variable">$request</span>" '</span></span><br><span class="line">                <span class="string">'<span class="variable">$status</span> <span class="variable">$upstream_response_time</span> <span class="variable">$request_time</span> "<span class="variable">$http_referer</span>"'</span></span><br><span class="line">                <span class="string">'"<span class="variable">$http_user_agent</span>" "<span class="variable">$http_x_forwarded_for</span>" <span class="variable">$body_bytes_sent</span> '</span>;</span><br><span class="line"><span class="attribute">access_log</span> /var/log/nginx/access.log main;</span><br></pre></td></tr></table></figure><ul><li>åœ¨serverä¸­å¢åŠ ä¸‹é¢ä»£ç </li></ul><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="section">server</span> &#123;</span><br><span class="line"></span><br><span class="line">if ($time_iso8601 ~ "^(\d&#123;4&#125;)-(\d&#123;2&#125;)-(\d&#123;2&#125;) (\d&#123;2&#125;):(\d&#123;2&#125;):(\d&#123;2&#125;)") &#123;</span><br><span class="line"><span class="attribute">set</span> <span class="variable">$year</span> <span class="variable">$1</span>;</span><br><span class="line"><span class="attribute">set</span> <span class="variable">$month</span> <span class="variable">$2</span>;</span><br><span class="line"><span class="attribute">set</span> <span class="variable">$day</span> <span class="variable">$3</span>;</span><br><span class="line"><span class="attribute">set</span> <span class="variable">$hour</span> <span class="variable">$4</span>;</span><br><span class="line"><span class="attribute">set</span> <span class="variable">$minutes</span> <span class="variable">$5</span>;</span><br><span class="line"><span class="attribute">set</span> <span class="variable">$seconds</span> <span class="variable">$6</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;blockquote&gt;
&lt;p&gt;Ngxin æ—¥å¿—æ ¼å¼åŒ–&lt;/p&gt;
&lt;/blockquote&gt;
&lt;ul&gt;
&lt;li&gt;Nginxæä¾›çš„è®¿é—®æ—¥å¿—é‡Œå°±è•´è—ç€å¤§é‡æœ‰ç”¨ä¿¡æ¯ã€‚ä»Šå¤©è¿™ç¯‡è¦è¯´çš„å°±æ˜¯å¦‚æœä¿®æ”¹Nginxé»˜è®¤æ—¥å¿—æ ¼å¼ï¼Œä»¥ä¾¿äºæˆ‘ä»¬æ›´å¥½çš„æŒ–æ˜æœ‰æ•ˆæŒ‡æ ‡ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ç¼–è¾‘&lt;cod
      
    
    </summary>
    
    
      <category term="Nginx" scheme="https://z201.cn/categories/Nginx/"/>
    
    
      <category term="Nginx" scheme="https://z201.cn/tags/Nginx/"/>
    
  </entry>
  
  <entry>
    <title>Centos7_jenkinséƒ¨ç½²</title>
    <link href="https://z201.cn/2021/05/25/Centos7-jenkins%E9%83%A8%E7%BD%B2/"/>
    <id>https://z201.cn/2021/05/25/Centos7-jenkins%E9%83%A8%E7%BD%B2/</id>
    <published>2021-05-25T13:20:35.000Z</published>
    <updated>2021-09-21T07:04:54.547Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>è®°å½•æœ€è¿‘åœ¨Centos7ä¸Šé¢éƒ¨ç½²jenkensã€‚å®‰è£…çš„æ–¹æ³•æœ‰å¾ˆå¤šï¼Œä¸‹é¢é‡‡ç”¨æœ€ç®€å•çš„æ–¹å¼å®‰è£…ã€‚</p></blockquote><h2 id="å‚è€ƒæ–‡çŒ®"><a href="#å‚è€ƒæ–‡çŒ®" class="headerlink" title="å‚è€ƒæ–‡çŒ®"></a>å‚è€ƒæ–‡çŒ®</h2><ul><li>åœ¨çº¿æ–‡æ¡£ <a href="https://jenkins.io/doc/" target="_blank" rel="noopener">https://jenkins.io/doc/</a></li><li>åè¯è§£é‡Šï¼š<ul><li>CI</li></ul></li></ul><blockquote><p>jenkins æ˜¯ä¸€ä¸ªåè°ƒè€…çš„èº«ä»½ï¼Œç®¡ç†å’Œåè°ƒäº†ä»£ç åº“ï¼Œä»£ç ä»“åº“ï¼Œä»£ç è¿è¡Œç¯å¢ƒç­‰ã€‚</p></blockquote><h2 id="jenkins-ç®€ä»‹"><a href="#jenkins-ç®€ä»‹" class="headerlink" title="jenkins ç®€ä»‹"></a>jenkins ç®€ä»‹</h2><blockquote><p>Jenkinsæ˜¯ä¸€ä¸ªå¼€æºè½¯ä»¶é¡¹ç›®ï¼Œæ—¨åœ¨æä¾›ä¸€ä¸ªå¼€æ”¾æ˜“ç”¨çš„è½¯ä»¶å¹³å°ï¼Œä½¿è½¯ä»¶çš„æŒç»­é›†æˆå˜æˆå¯èƒ½ã€‚æŒç»­é›†æˆï¼ˆCIï¼‰å·²æˆä¸ºå½“å‰è®¸å¤šè½¯ä»¶å¼€å‘å›¢é˜Ÿåœ¨æ•´ä¸ªè½¯ä»¶å¼€å‘ç”Ÿå‘½å‘¨æœŸå†…ä¾§é‡äºä¿è¯ä»£ç è´¨é‡çš„å¸¸è§åšæ³•ã€‚å®ƒæ˜¯ä¸€ç§å®è·µï¼Œæ—¨åœ¨ç¼“å’Œå’Œç¨³å›ºè½¯ä»¶çš„æ„å»ºè¿‡ç¨‹ã€‚å¹¶ä¸”èƒ½å¤Ÿå¸®åŠ©æ‚¨çš„å¼€å‘å›¢é˜Ÿåº”å¯¹å¦‚ä¸‹æŒ‘æˆ˜ï¼š</p></blockquote><ul><li>æŒç»­ã€è‡ªåŠ¨åœ°æ„å»º/æµ‹è¯•è½¯ä»¶é¡¹ç›®ã€‚</li><li>ç›‘æ§ä¸€äº›å®šæ—¶æ‰§è¡Œçš„ä»»åŠ¡ã€‚</li><li>é«˜åº¦å¯æ‰©å±•æ€§ã€å…¨çƒå¤§é‡å›¢é˜Ÿä½¿ç”¨ï¼Œå¹¶å…±äº«ä»£ç ã€‚</li><li>åŸºäºæ’ä»¶ã€å¯ä»¥åšå‡ºéå¸¸å¤šæœ‰è¶£çš„äº‹æƒ…ã€‚</li></ul><p><img src="https://z201.oss-cn-shanghai.aliyuncs.com/JavaNote/jenkins/2.jpg"> </p><h2 id="å®‰è£éƒ¨ç½²"><a href="#å®‰è£éƒ¨ç½²" class="headerlink" title="å®‰è£éƒ¨ç½²"></a>å®‰è£éƒ¨ç½²</h2><a id="more"></a><blockquote><p>å•å®ä¾‹éƒ¨ç½²</p></blockquote><h3 id="æ£€æŸ¥å½“å‰ç³»ç»Ÿç¯å¢ƒ"><a href="#æ£€æŸ¥å½“å‰ç³»ç»Ÿç¯å¢ƒ" class="headerlink" title="æ£€æŸ¥å½“å‰ç³»ç»Ÿç¯å¢ƒ"></a>æ£€æŸ¥å½“å‰ç³»ç»Ÿç¯å¢ƒ</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost jenkins]<span class="comment"># cat /etc/os-release </span></span><br><span class="line">NAME=<span class="string">"CentOS Linux"</span></span><br><span class="line">VERSION=<span class="string">"7 (Core)"</span></span><br><span class="line">ID=<span class="string">"centos"</span></span><br><span class="line">ID_LIKE=<span class="string">"rhel fedora"</span></span><br><span class="line">VERSION_ID=<span class="string">"7"</span></span><br><span class="line">PRETTY_NAME=<span class="string">"CentOS Linux 7 (Core)"</span></span><br><span class="line">ANSI_COLOR=<span class="string">"0;31"</span></span><br><span class="line">CPE_NAME=<span class="string">"cpe:/o:centos:centos:7"</span></span><br><span class="line">HOME_URL=<span class="string">"https://www.centos.org/"</span></span><br><span class="line">BUG_REPORT_URL=<span class="string">"https://bugs.centos.org/"</span></span><br><span class="line"></span><br><span class="line">CENTOS_MANTISBT_PROJECT=<span class="string">"CentOS-7"</span></span><br><span class="line">CENTOS_MANTISBT_PROJECT_VERSION=<span class="string">"7"</span></span><br><span class="line">REDHAT_SUPPORT_PRODUCT=<span class="string">"centos"</span></span><br><span class="line">REDHAT_SUPPORT_PRODUCT_VERSION=<span class="string">"7"</span></span><br></pre></td></tr></table></figure><h3 id="æ·»åŠ æºä»¥åŠå…¬é’¥"><a href="#æ·»åŠ æºä»¥åŠå…¬é’¥" class="headerlink" title="æ·»åŠ æºä»¥åŠå…¬é’¥"></a>æ·»åŠ æºä»¥åŠå…¬é’¥</h3><h4 id="æ›´æ–°å®‰è£…jenkensæº"><a href="#æ›´æ–°å®‰è£…jenkensæº" class="headerlink" title="æ›´æ–°å®‰è£…jenkensæº"></a>æ›´æ–°å®‰è£…jenkensæº</h4><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># yum æºå¯¼å…¥</span></span><br><span class="line">sudo wget -O /etc/yum.repos.d/jenkins.repo https://pkg.jenkins.io/redhat-stable/jenkins.repo</span><br><span class="line"></span><br><span class="line"><span class="comment">#å¯¼å…¥å¯†é’¥</span></span><br><span class="line">sudo rpm --import https://pkg.jenkins.io/redhat-stable/jenkins.io.key</span><br><span class="line"></span><br><span class="line"><span class="comment">#å®‰è£…</span></span><br><span class="line">sudo yum install jenkins</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ‰‹åŠ¨ä¸‹è½½å®‰è£…åŒ…å®‰è£…</span></span><br><span class="line">https://pkg.jenkins.io/redhat-stable/ <span class="comment"># è¿™é‡Œé¢æ‰¾</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#æ£€æŸ¥å®‰è£…</span></span><br><span class="line">whereis jenkins</span><br><span class="line">&gt; jenkins: /usr/lib/jenkins</span><br><span class="line"><span class="comment"># æç¤ºä»¥ä¸Šå†…å®¹è¯´æ˜å®‰è£…æˆåŠŸ</span></span><br></pre></td></tr></table></figure><h3 id="ä¿®æ”¹jenkensé…ç½®ä¿¡æ¯"><a href="#ä¿®æ”¹jenkensé…ç½®ä¿¡æ¯" class="headerlink" title="ä¿®æ”¹jenkensé…ç½®ä¿¡æ¯"></a>ä¿®æ”¹jenkensé…ç½®ä¿¡æ¯</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ç¼–è¾‘jenkinsé…ç½®æ–‡ä»¶</span></span><br><span class="line">vim /etc/sysconfig/jenkins</span><br><span class="line"><span class="comment"># è¿™é‡Œä¸»è¦ç¼–è¾‘ä¸¤ä¸ªå‚æ•° JENKINS_USER JENKINS_JAVA_OPTIONS</span></span><br><span class="line"><span class="comment"># JENKINS_USER jenkensæƒé™ç”¨æˆ·</span></span><br><span class="line"><span class="comment"># JENKINS_JAVA_OPTIONS jenkenså¯åŠ¨å‚æ•°ï¼Œè¿™é‡Œä¸»è¦è®¾ç½®å¯åŠ¨å†…å­˜ã€‚</span></span><br><span class="line">JENKINS_USER=<span class="string">"root"</span></span><br><span class="line">JENKINS_JAVA_OPTIONS=<span class="string">"-server -Xms512m -Xmx1024m -XX:PermSize=256m -XX:MaxPermSize=512m  -Djava.awt.headless=true"</span></span><br><span class="line"><span class="comment"># ä¿®æ”¹ç›®å½•æƒé™ å¦‚æœä½ ä¸æ˜¯ä½¿ç”¨rootè´¦å·,æˆ‘å·ä¸‹æ‡’ã€‚</span></span><br><span class="line">chown -R root:root /var/lib/jenkins</span><br><span class="line">chown -R root:root /var/cache/jenkins</span><br><span class="line">chown -R root:root /var/<span class="built_in">log</span>/jenkins</span><br></pre></td></tr></table></figure><h3 id="å¯åŠ¨junketsæ£€æŸ¥"><a href="#å¯åŠ¨junketsæ£€æŸ¥" class="headerlink" title="å¯åŠ¨junketsæ£€æŸ¥"></a>å¯åŠ¨junketsæ£€æŸ¥</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#é‡è½½æ‰€æœ‰ä¿®æ”¹è¿‡çš„é…ç½®æ–‡ä»¶</span></span><br><span class="line">sudo systemctl daemon-reload</span><br><span class="line"></span><br><span class="line"><span class="comment">#å¯åŠ¨JenkinsæœåŠ¡</span></span><br><span class="line">sudo systemctl start jenkins</span><br><span class="line"></span><br><span class="line"><span class="comment">#ç”±äºJenkinsä¸æ˜¯Native Serviceï¼Œæ‰€ä»¥éœ€è¦ç”¨chkconfigå‘½ä»¤è€Œä¸æ˜¯systemctlå‘½ä»¤</span></span><br><span class="line">sudo /sbin/chkconfig jenkins on</span><br></pre></td></tr></table></figure><h3 id="ç¬¬ä¸€æ¬¡å¯åŠ¨é…ç½®"><a href="#ç¬¬ä¸€æ¬¡å¯åŠ¨é…ç½®" class="headerlink" title="ç¬¬ä¸€æ¬¡å¯åŠ¨é…ç½®"></a>ç¬¬ä¸€æ¬¡å¯åŠ¨é…ç½®</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æŸ¥çœ‹å¯†ç </span></span><br><span class="line">cat /var/lib/jenkins/secrets/initialAdminPassword</span><br></pre></td></tr></table></figure><h3 id="é…ç½®jenkens-jdk-mavenç¯å¢ƒ"><a href="#é…ç½®jenkens-jdk-mavenç¯å¢ƒ" class="headerlink" title="é…ç½®jenkens jdk mavenç¯å¢ƒ"></a>é…ç½®jenkens jdk mavenç¯å¢ƒ</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åœ¨ç³»ç»Ÿç¯å¢ƒä¸­å¢åŠ </span></span><br><span class="line"><span class="comment"># JAVA_HOME</span></span><br><span class="line"><span class="comment"># MAVEN_HOME </span></span><br><span class="line"><span class="comment"># å¦‚æœjdkæ˜¯é€šè¿‡yum å®‰è£…éœ€è¦é€šè¿‡llæ‰¾åˆ°jvmçš„å®‰è£…åœ°å€</span></span><br><span class="line"><span class="comment"># ll /usr/bin/javac -&gt; /etc/alternatives/javac</span></span><br><span class="line"><span class="comment"># ll /etc/alternatives/javac -&gt; /usr/lib/jvm/java-1.8.0-openjdk-1.8.0.292.b10-1.el7_9.x86_64/bin/javac</span></span><br><span class="line"><span class="comment">#ä¸¾ä¾‹å­</span></span><br><span class="line">JAVA_HOME</span><br><span class="line">/usr/lib/jvm/java-1.8.0-openjdk-1.8.0.292.b10-1.el7_9.x86_64</span><br><span class="line">MAVEN_HOME</span><br><span class="line">/opt/libhome/apache-maven-3.8.1</span><br><span class="line">PATH</span><br><span class="line"><span class="variable">$PATH</span>:<span class="variable">$JAVA_HOME</span>/bin:<span class="variable">$MAVEN_HOME</span>/bin</span><br></pre></td></tr></table></figure><h2 id="é…ç½®ä¼ä¸šå¾®ä¿¡é€šçŸ¥"><a href="#é…ç½®ä¼ä¸šå¾®ä¿¡é€šçŸ¥" class="headerlink" title="é…ç½®ä¼ä¸šå¾®ä¿¡é€šçŸ¥"></a>é…ç½®ä¼ä¸šå¾®ä¿¡é€šçŸ¥</h2><blockquote><p>å®‰è£…æ’ä»¶ <a href="https://plugins.jenkins.io/qy-wechat-notification" target="_blank" rel="noopener">Qy Wechat Notification Plugin</a></p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">å¦‚æœæ— æ³•å‘é€é€šçŸ¥æç¤ºjavax.net.ssl.SSLHandshakeException: No appropriate protocol (protocol is disabled or cipher suites are inappropriate</span><br><span class="line">éœ€è¦ä¿®æ”¹$JRE&#x2F;lib&#x2F;security&#x2F;java.security</span><br></pre></td></tr></table></figure><ul><li>å»æ‰ä¸¤ä¸ªé…ç½®ä¿¡æ¯ <code>TLSv1 TLSv1.1</code></li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">jdk.tls.disabledAlgorithms&#x3D;SSLv3, TLSv1, RC4, DES, MD5withRSA, DH keySize &lt; 1024, \</span><br><span class="line">EC keySize &lt; 224, 3DES_EDE_CBC, anon, NULL</span><br></pre></td></tr></table></figure><h4 id="å‹æƒ…æç¤º"><a href="#å‹æƒ…æç¤º" class="headerlink" title="å‹æƒ…æç¤º"></a>å‹æƒ…æç¤º</h4><blockquote><p>ä¸è¦é€‰æ‹©ç¤¾åŒºæ¨èæ’ä»¶å®‰è£…</p></blockquote><ul><li><p>å› ä¸º <code>Jenkins</code> æ’ä»¶æœåŠ¡å™¨åœ¨å›½å¤–ï¼Œæ‰€ä»¥é€Ÿåº¦ä¸å¤ªç†æƒ³ã€‚æˆ‘ä»¬éœ€è¦æ›´æ¢ä¸ºæ¸…åå¤§å­¦çš„ <code>Jenkins</code> æ’ä»¶æºåï¼Œå†å®‰è£…æ’ä»¶ï¼Œ<strong>æ‰€ä»¥å…ˆä¸è¦ç‚¹å®‰è£…æ’ä»¶ã€‚</strong></p></li><li><p>æ›´æ¢æ–¹æ³•å¾ˆç®€å•ã€‚è¿›å…¥æœåŠ¡å™¨ï¼Œå°† <code>/var/lib/jenkins/updates/default.json</code> å†…çš„æ’ä»¶æºåœ°å€æ›¿æ¢æˆæ¸…åå¤§å­¦çš„æºåœ°å€ï¼Œå°† google æ›¿æ¢ä¸º baidu å³å¯ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sed -i 's/http:\/\/updates.jenkins-ci.org\/download/https:\/\/mirrors.tuna.tsinghua.edu.cn\/jenkins/g' /var/lib/jenkins/updates/default.json &amp;&amp; sed -i 's/http:\/\/www.google.com/https:\/\/www.baidu.com/g' /var/lib/jenkins/updates/default.json</span><br></pre></td></tr></table></figure></li></ul><h2 id="ä¿®æ”¹è¿è¡Œç«¯å£"><a href="#ä¿®æ”¹è¿è¡Œç«¯å£" class="headerlink" title="ä¿®æ”¹è¿è¡Œç«¯å£"></a>ä¿®æ”¹è¿è¡Œç«¯å£</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/sysconfig/jenkins</span><br><span class="line"></span><br><span class="line">JENKINS_PORT=<span class="string">"8080"</span> //æ”¹æˆ JENKINS_PORT=<span class="string">"8088"</span></span><br></pre></td></tr></table></figure><h2 id="åŸºç¡€å‘½ä»¤"><a href="#åŸºç¡€å‘½ä»¤" class="headerlink" title="åŸºç¡€å‘½ä»¤"></a>åŸºç¡€å‘½ä»¤</h2><ul><li>å¯åŠ¨ã€é‡å¯ã€å…³é—­</li></ul><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost jenkins]<span class="comment">#  service jenkins start</span></span><br><span class="line">[root@localhost jenkins]<span class="comment">#  service jenkins restart</span></span><br><span class="line">[root@localhost jenkins]<span class="comment">#  service jenkins shutdown</span></span><br></pre></td></tr></table></figure><ul><li>é”™è¯¯æç¤º</li></ul><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Starting jenkins (via systemctl):  Warning: jenkins.service changed on disk. Run <span class="string">'systemctl daemon-reload'</span> to reload units.</span><br></pre></td></tr></table></figure><ul><li>è‹¥å‡ºç°ä¸Šè¿°é—®é¢˜ï¼Œæ‰§è¡Œã€‚</li></ul><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost jenkins]<span class="comment"># systemctl daemon-reload</span></span><br></pre></td></tr></table></figure><ul><li>å¯åŠ¨jenkins</li></ul><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost jenkins]<span class="comment"># sudo service jenkins start</span></span><br></pre></td></tr></table></figure><ul><li>è¿›å…¥jenkins ç½‘ç«™ï¼›ä¸€èˆ¬æ˜¯8080ç«¯å£ã€‚ç•Œé¢ä¼šè®©ä½ è¾“å…¥å¯†ç è¿›å…¥ã€‚</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost jenkins]# cat &#x2F;var&#x2F;lib&#x2F;jenkins&#x2F;secrets&#x2F;initialAdminPassword</span><br></pre></td></tr></table></figure><ul><li>å®‰è£…æ’ä»¶,å¦‚æœå‡ºç°ä¸‹åˆ—é”™è¯¯ã€‚</li></ul><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">An error occurred during installation: No such plugin: cloudbees-folder</span><br></pre></td></tr></table></figure><ul><li>å¯ä»¥ç›´æ¥è·³è¿‡ã€‚ç›´æ¥åˆ›å»ºç®¡ç†å¸å·è¿›å…¥ã€‚è¿™ä¸ªæ—¶å€™æ’ä»¶åˆ—è¡¨æ˜¯ç©ºçš„ã€‚åœ¨æ’ä»¶é«˜ä¸­æ›¿æ¢URLã€‚</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http:&#x2F;&#x2F;mirror.xmission.com&#x2F;jenkins&#x2F;updates&#x2F;update-center.json</span><br></pre></td></tr></table></figure><ul><li>end.</li></ul><h2 id="ä¿®æ”¹Jenkins-å·¥ä½œç©ºé–“ç›®éŒ„"><a href="#ä¿®æ”¹Jenkins-å·¥ä½œç©ºé–“ç›®éŒ„" class="headerlink" title="ä¿®æ”¹Jenkins å·¥ä½œç©ºé–“ç›®éŒ„"></a>ä¿®æ”¹Jenkins å·¥ä½œç©ºé–“ç›®éŒ„</h2><ul><li>ç³»ç»Ÿè®¾ç½®</li></ul><p><img src="https://z201.oss-cn-shanghai.aliyuncs.com/JavaNote/jenkins/3.png"></p><ul><li>è¿™é‡Œçš„å·¥ä½œç©ºé—´ç›®å½•æœ‰ä¸€ä¸ªç¯å¢ƒé…ç½®å˜é‡ã€‚${JENKINS_HOME}</li><li>åœ¨ç³»ç»Ÿç¯å¢ƒå˜é‡ä¸­é…ç½®JENKINS_HOME æŒ‡å‘æ–°çš„å·¥ä½œç©ºé—´ã€‚</li></ul><h2 id="Jenkins-shellæƒé™é—®é¢˜ã€‚"><a href="#Jenkins-shellæƒé™é—®é¢˜ã€‚" class="headerlink" title="Jenkins shellæƒé™é—®é¢˜ã€‚"></a>Jenkins shellæƒé™é—®é¢˜ã€‚</h2><ul><li>åœ¨æ‰§è¡Œshell è„šæœ¬çš„æ—¶å€™éœ€è¦ä¿®æ”¹æƒé™ï¼Œå¦‚æœä¸ä¿®æ”¹ä¼šå¯¼è‡´éƒ¨åˆ†æƒé™é—®é¢˜ã€‚</li></ul><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost jenkins]<span class="comment"># vim /etc/sysconfig/jenkins</span></span><br></pre></td></tr></table></figure><ul><li>ä¿®æ”¹é…ç½®æ–‡ä»¶çš„ JENKINS_USER = â€œrootâ€</li></ul><h2 id="æ’ä»¶"><a href="#æ’ä»¶" class="headerlink" title="æ’ä»¶"></a>æ’ä»¶</h2><h3 id="Maven-Integration-plugin"><a href="#Maven-Integration-plugin" class="headerlink" title="Maven Integration plugin"></a>Maven Integration plugin</h3><blockquote><p>ç”¨äºMavené¡¹ç›®æ„å»ºã€‚</p></blockquote><h3 id="Monitoring"><a href="#Monitoring" class="headerlink" title="Monitoring"></a>Monitoring</h3><blockquote><p>ç›‘æ§Jenkinsæ‰€æ¶ˆè€—çš„ç³»ç»Ÿèµ„æºï¼Œå¦‚å†…å­˜ä½¿ç”¨ç­‰</p></blockquote><h3 id="Publish-Over-SSH"><a href="#Publish-Over-SSH" class="headerlink" title="Publish Over SSH"></a>Publish Over SSH</h3><blockquote><p>è¿œç¨‹Shell</p></blockquote><h3 id="Email-Extersion-Plugin"><a href="#Email-Extersion-Plugin" class="headerlink" title="Email Extersion Plugin"></a><a href="https://wiki.jenkins-ci.org/display/JENKINS/Email-ext+plugin" target="_blank" rel="noopener">Email Extersion Plugin</a></h3><blockquote><p>é‚®ä»¶é€šçŸ¥</p></blockquote><h4 id="é‚®ç®±é…ç½®"><a href="#é‚®ç®±é…ç½®" class="headerlink" title="é‚®ç®±é…ç½®"></a>é‚®ç®±é…ç½®</h4><blockquote><p>jenkins è‡ªå¸¦é‚®ç®±åŠŸèƒ½ï¼Œå¯ä»¥é€šè¿‡é‚®ç®±å‘é€ä»»åŠ¡æ„å»ºæ—¶çš„ä¿¡æ¯ã€‚</p></blockquote><p><img src="https://z201.oss-cn-shanghai.aliyuncs.com/JavaNote/jenkins/email.png"> </p><ul><li>Jenkins URL æ˜¯å½“å‰jenkinsè®¿é—®åœ°å€ å¯ä»¥æ˜¯å†…ç½‘ä¹Ÿå¯ä»¥æ˜¯å¤–ç½‘ã€‚</li></ul><h4 id="é‚®ä»¶é€šçŸ¥"><a href="#é‚®ä»¶é€šçŸ¥" class="headerlink" title="é‚®ä»¶é€šçŸ¥"></a>é‚®ä»¶é€šçŸ¥</h4><ul><li>SMTPæœåŠ¡å™¨<ul><li>è¿™ä¸ªé‚®ä»¶å¸å·çš„è¿è¥å•†é…ç½®</li><li>é…ç½®å®Œåå¯ä»¥æµ‹è¯•ã€‚</li><li>å¦‚æœæ”¶åˆ°é‚®ä»¶è¯´æ˜é…ç½®æˆåŠŸã€‚</li></ul></li></ul>]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;è®°å½•æœ€è¿‘åœ¨Centos7ä¸Šé¢éƒ¨ç½²jenkensã€‚å®‰è£…çš„æ–¹æ³•æœ‰å¾ˆå¤šï¼Œä¸‹é¢é‡‡ç”¨æœ€ç®€å•çš„æ–¹å¼å®‰è£…ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&quot;å‚è€ƒæ–‡çŒ®&quot;&gt;&lt;a href=&quot;#å‚è€ƒæ–‡çŒ®&quot; class=&quot;headerlink&quot; title=&quot;å‚è€ƒæ–‡çŒ®&quot;&gt;&lt;/a&gt;å‚è€ƒæ–‡çŒ®&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;åœ¨çº¿æ–‡æ¡£ &lt;a href=&quot;https://jenkins.io/doc/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;https://jenkins.io/doc/&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;åè¯è§£é‡Šï¼š&lt;ul&gt;
&lt;li&gt;CI&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;blockquote&gt;
&lt;p&gt;jenkins æ˜¯ä¸€ä¸ªåè°ƒè€…çš„èº«ä»½ï¼Œç®¡ç†å’Œåè°ƒäº†ä»£ç åº“ï¼Œä»£ç ä»“åº“ï¼Œä»£ç è¿è¡Œç¯å¢ƒç­‰ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&quot;jenkins-ç®€ä»‹&quot;&gt;&lt;a href=&quot;#jenkins-ç®€ä»‹&quot; class=&quot;headerlink&quot; title=&quot;jenkins ç®€ä»‹&quot;&gt;&lt;/a&gt;jenkins ç®€ä»‹&lt;/h2&gt;&lt;blockquote&gt;
&lt;p&gt;Jenkinsæ˜¯ä¸€ä¸ªå¼€æºè½¯ä»¶é¡¹ç›®ï¼Œæ—¨åœ¨æä¾›ä¸€ä¸ªå¼€æ”¾æ˜“ç”¨çš„è½¯ä»¶å¹³å°ï¼Œä½¿è½¯ä»¶çš„æŒç»­é›†æˆå˜æˆå¯èƒ½ã€‚æŒç»­é›†æˆï¼ˆCIï¼‰å·²æˆä¸ºå½“å‰è®¸å¤šè½¯ä»¶å¼€å‘å›¢é˜Ÿåœ¨æ•´ä¸ªè½¯ä»¶å¼€å‘ç”Ÿå‘½å‘¨æœŸå†…ä¾§é‡äºä¿è¯ä»£ç è´¨é‡çš„å¸¸è§åšæ³•ã€‚å®ƒæ˜¯ä¸€ç§å®è·µï¼Œæ—¨åœ¨ç¼“å’Œå’Œç¨³å›ºè½¯ä»¶çš„æ„å»ºè¿‡ç¨‹ã€‚å¹¶ä¸”èƒ½å¤Ÿå¸®åŠ©æ‚¨çš„å¼€å‘å›¢é˜Ÿåº”å¯¹å¦‚ä¸‹æŒ‘æˆ˜ï¼š&lt;/p&gt;
&lt;/blockquote&gt;
&lt;ul&gt;
&lt;li&gt;æŒç»­ã€è‡ªåŠ¨åœ°æ„å»º/æµ‹è¯•è½¯ä»¶é¡¹ç›®ã€‚&lt;/li&gt;
&lt;li&gt;ç›‘æ§ä¸€äº›å®šæ—¶æ‰§è¡Œçš„ä»»åŠ¡ã€‚&lt;/li&gt;
&lt;li&gt;é«˜åº¦å¯æ‰©å±•æ€§ã€å…¨çƒå¤§é‡å›¢é˜Ÿä½¿ç”¨ï¼Œå¹¶å…±äº«ä»£ç ã€‚&lt;/li&gt;
&lt;li&gt;åŸºäºæ’ä»¶ã€å¯ä»¥åšå‡ºéå¸¸å¤šæœ‰è¶£çš„äº‹æƒ…ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img src=&quot;https://z201.oss-cn-shanghai.aliyuncs.com/JavaNote/jenkins/2.jpg&quot;&gt; &lt;/p&gt;
&lt;h2 id=&quot;å®‰è£éƒ¨ç½²&quot;&gt;&lt;a href=&quot;#å®‰è£éƒ¨ç½²&quot; class=&quot;headerlink&quot; title=&quot;å®‰è£éƒ¨ç½²&quot;&gt;&lt;/a&gt;å®‰è£éƒ¨ç½²&lt;/h2&gt;
    
    </summary>
    
    
      <category term="Linuxè¿ç»´" scheme="https://z201.cn/categories/Linux%E8%BF%90%E7%BB%B4/"/>
    
    
      <category term="Centos7" scheme="https://z201.cn/tags/Centos7/"/>
    
      <category term="Jenkins" scheme="https://z201.cn/tags/Jenkins/"/>
    
  </entry>
  
  <entry>
    <title>å·®ç¼ºè¡¥æ¼-Netty</title>
    <link href="https://z201.cn/2021/02/25/%E5%B7%AE%E7%BC%BA%E8%A1%A5%E6%BC%8F-Netty/"/>
    <id>https://z201.cn/2021/02/25/%E5%B7%AE%E7%BC%BA%E8%A1%A5%E6%BC%8F-Netty/</id>
    <published>2021-02-25T04:09:20.000Z</published>
    <updated>2021-12-17T06:39:46.006Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>Nettyæ˜¯ä¸€æ¬¾ç”¨äºå¿«é€Ÿå¼€å‘é«˜æ€§èƒ½çš„ç½‘ç»œåº”ç”¨ç¨‹åºçš„Javaæ¡†æ¶ï¼Œæ­£æ˜¯å› ä¸ºæœ‰ Netty çš„å­˜åœ¨ï¼Œç½‘ç»œç¼–ç¨‹é¢†åŸŸ Java æ‰å¾—ä»¥ä¸ C++ å¹¶è‚©è€Œç«‹ã€‚</p></blockquote><ul><li>Netty å®˜ç½‘ç»™å‡ºäº†æœ‰å…³ Netty çš„æ•´ä½“åŠŸèƒ½æ¨¡å—ç»“æ„</li></ul><p><img src="https://z201.oss-cn-shanghai.aliyuncs.com/JavaNote/20211116220629.png"></p><ul><li>Coreæ ¸å¿ƒå±‚</li></ul><blockquote><p>æä¾›åº•å±‚ç½‘ç»œé€šä¿¡æŠ½è±¡å’Œå®ç°ï¼Œå…¶ä¸­åŒ…æ‹¬äº†å¯æ‰©å±•çš„æ—¶é—´æ¨¡å‹ã€é€šä¿¡APIã€æ”¯æŒé›¶æ‹·è´çš„bufç­‰ã€‚</p></blockquote><ul><li>Protocol Support åè®®æ”¯æŒå±‚</li></ul><blockquote><p>åè®®æ”¯æŒå±‚åŸºæœ¬ä¸Šè¦†ç›–äº†ä¸»æµåè®®çš„ç¼–è§£ç å®ç°ï¼Œæ¯”å¦‚HTTPã€SSLã€WebSocket</p></blockquote><ul><li>Transport Service ä¼ è¾“æœåŠ¡å±‚</li></ul><blockquote><p>ä¼ è¾“æœåŠ¡å±‚æä¾›äº†ç½‘ç»œä¼ è¾“èƒ½åŠ›çš„å®šä¹‰å’Œå®ç°æ–¹æ³•ï¼Œæ”¯æŒ Socketã€HTTP éš§é“ç­‰ã€‚Netty å¯¹ TCPã€UDP ç­‰æ•°æ®ä¼ è¾“åšäº†æŠ½è±¡å’Œå°è£…</p></blockquote><h3 id="Nettyæµç¨‹"><a href="#Nettyæµç¨‹" class="headerlink" title="Nettyæµç¨‹"></a>Nettyæµç¨‹</h3><blockquote><p>ä»åŠŸèƒ½ä¸Šç†è§£é¡ºåº</p></blockquote><ul><li>å¯åŠ¨æœåŠ¡ -&gt; æ„å»ºè¿æ¥ -&gt; æ¥å—æ•°æ® -&gt; ä¸šåŠ¡å¤„ç† -&gt; å‘é€æ•°æ® -&gt; æ–­å¼€è¿æ¥ -&gt; å…³é—­æœåŠ¡</li></ul><h4 id="æ¡ˆä¾‹"><a href="#æ¡ˆä¾‹" class="headerlink" title="æ¡ˆä¾‹"></a>æ¡ˆä¾‹</h4><ul><li>åˆå§‹åŒ–çº¿ç¨‹æ± </li><li>åˆå§‹åŒ–channel</li><li>ç»‘å®šç«¯å£å¹¶å¯åŠ¨</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="meta">@Sharable</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">EchoServerHandler</span> <span class="keyword">extends</span> <span class="title">ChannelInboundHandlerAdapter</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">channelRead</span><span class="params">(ChannelHandlerContext ctx, Object msg)</span> </span>&#123;</span><br><span class="line">        ctx.write(msg);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">channelReadComplete</span><span class="params">(ChannelHandlerContext ctx)</span> </span>&#123;</span><br><span class="line">        ctx.flush();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">exceptionCaught</span><span class="params">(ChannelHandlerContext ctx, Throwable cause)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// Close the connection when an exception is raised.</span></span><br><span class="line">        cause.printStackTrace();</span><br><span class="line">        ctx.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Echoes back any received data from a client.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">final</span> <span class="class"><span class="keyword">class</span> <span class="title">EchoServer</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">boolean</span> SSL = System.getProperty(<span class="string">"ssl"</span>) != <span class="keyword">null</span>;</span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> PORT = Integer.parseInt(System.getProperty(<span class="string">"port"</span>, <span class="string">"8007"</span>));</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        <span class="comment">// Configure SSL.</span></span><br><span class="line">        <span class="keyword">final</span> SslContext sslCtx;</span><br><span class="line">        <span class="keyword">if</span> (SSL) &#123;</span><br><span class="line">            SelfSignedCertificate ssc = <span class="keyword">new</span> SelfSignedCertificate();</span><br><span class="line">            sslCtx = SslContextBuilder.forServer(ssc.certificate(), ssc.privateKey()).build();</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            sslCtx = <span class="keyword">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Configure the server.</span></span><br><span class="line">        <span class="comment">// åœ¨å®˜æ–¹çš„exampleä¸­é»˜è®¤æ˜¯Reactorä¸»ä»å¤šçº¿ç¨‹æ¨¡å¼</span></span><br><span class="line">        <span class="comment">// 1.é…ç½®çº¿ç¨‹æ± </span></span><br><span class="line">        EventLoopGroup bossGroup = <span class="keyword">new</span> NioEventLoopGroup(<span class="number">1</span>);</span><br><span class="line">        EventLoopGroup workerGroup = <span class="keyword">new</span> NioEventLoopGroup();</span><br><span class="line">        <span class="keyword">final</span> EchoServerHandler serverHandler = <span class="keyword">new</span> EchoServerHandler();</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            ServerBootstrap b = <span class="keyword">new</span> ServerBootstrap();</span><br><span class="line">            b.group(bossGroup, workerGroup)</span><br><span class="line">             .channel(NioServerSocketChannel<span class="class">.<span class="keyword">class</span>) // 2.åˆå§‹åŒ–<span class="title">channel</span>ç±»å‹</span></span><br><span class="line"><span class="class">             .<span class="title">option</span>(<span class="title">ChannelOption</span>.<span class="title">SO_BACKLOG</span>, 100) // 2.1.è®¾ç½®<span class="title">channel</span>å‚æ•°</span></span><br><span class="line"><span class="class">             .<span class="title">handler</span>(<span class="title">new</span> <span class="title">LoggingHandler</span>(<span class="title">LogLevel</span>.<span class="title">INFO</span>))</span></span><br><span class="line"><span class="class">              // æ³¨å†Œ<span class="title">channelhandler</span>ï¼Œåœ¨<span class="title">netty</span>ä¸­é€šè¿‡<span class="title">ChannelPipeline</span> å»æ³¨å†Œå¤šä¸ª <span class="title">ChannelHandler</span></span></span><br><span class="line"><span class="class">             .<span class="title">childHandler</span>(<span class="title">new</span> <span class="title">ChannelInitializer</span>&lt;<span class="title">SocketChannel</span>&gt;() </span>&#123;</span><br><span class="line">                 <span class="meta">@Override</span></span><br><span class="line">                 <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">initChannel</span><span class="params">(SocketChannel ch)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">                     ChannelPipeline p = ch.pipeline();</span><br><span class="line">                     <span class="keyword">if</span> (sslCtx != <span class="keyword">null</span>) &#123;</span><br><span class="line">                         p.addLast(sslCtx.newHandler(ch.alloc()));</span><br><span class="line">                     &#125;</span><br><span class="line">                     <span class="comment">//p.addLast(new LoggingHandler(LogLevel.INFO));</span></span><br><span class="line">                     p.addLast(serverHandler);</span><br><span class="line">                 &#125;</span><br><span class="line">             &#125;);</span><br><span class="line"></span><br><span class="line">            <span class="comment">// Start the server. </span></span><br><span class="line">            <span class="comment">// 3.å¯åŠ¨ é€šè¿‡bind() æ–¹æ³•ä¼šçœŸæ­£è§¦å‘å¯åŠ¨ï¼Œsync() æ–¹æ³•åˆ™ä¼šé˜»å¡</span></span><br><span class="line">            ChannelFuture f = b.bind(PORT).sync();</span><br><span class="line">            <span class="comment">// Wait until the server socket is closed.</span></span><br><span class="line">            f.channel().closeFuture().sync();</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            <span class="comment">// Shut down all event loops to terminate all threads.</span></span><br><span class="line">            bossGroup.shutdownGracefully();</span><br><span class="line">            workerGroup.shutdownGracefully();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><a id="more"></a><h4 id="bindæ–¹æ³•"><a href="#bindæ–¹æ³•" class="headerlink" title="bindæ–¹æ³•"></a>bindæ–¹æ³•</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> ChannelFuture <span class="title">doBind</span><span class="params">(<span class="keyword">final</span> SocketAddress localAddress)</span> </span>&#123;</span><br><span class="line">    <span class="comment">// 1.è°ƒç”¨ initAndRegister()æ–¹æ³•åˆå§‹åŒ–Channel,æ¥å—è¿”å›åˆ°ChannelFutureã€‚</span></span><br><span class="line">    <span class="keyword">final</span> ChannelFuture regFuture = initAndRegister();</span><br><span class="line">  <span class="comment">// 2.è°ƒç”¨ ChannelFuture.channelæ–¹æ³•ï¼Œè¿”å›Channelã€‚</span></span><br><span class="line">    <span class="keyword">final</span> Channel channel = regFuture.channel();</span><br><span class="line">  <span class="comment">// 3.è°ƒç”¨ ChannelFuture.causeæ–¹æ³•åˆ¤æ–­ initAndRegister()æ˜¯å¦å­˜åœ¨å¼‚å¸¸ã€‚å­˜åœ¨å¼‚å¸¸åˆ™ç›´æ¥è¿”å›</span></span><br><span class="line">    <span class="keyword">if</span> (regFuture.cause() != <span class="keyword">null</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> regFuture;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 4.è°ƒç”¨ ChannelFuture.isDoneæ–¹æ³•ï¼Œåˆ¤æ–­initAndRegister()æ–¹æ³•æ˜¯å¦æ‰§è¡Œå®Œæˆã€‚</span></span><br><span class="line">    <span class="comment">//  å¦‚æœæ‰§è¡Œå®Œæˆåˆ™è°ƒç”¨bind0æ–¹æ³•ï¼Œå¦‚æœæ²¡æœ‰æ‰§è¡Œå®Œæˆï¼ŒChannelFuture æ·»åŠ ä¸€ä¸ªChannelFutureListenerå›è°ƒç›‘å¬ï¼Œå½“initAndRegister()æ–¹æ³•æ‰§è¡Œå®Œæˆåå›è°ƒoperationCompleteæ–¹æ³•ï¼Œè°ƒç”¨è°ƒç”¨ ChannelFuture.cause()æ–¹æ³•åˆ¤æ–­initAndRegister()æ˜¯å¦å­˜åœ¨å¼‚å¸¸ï¼Œæ— å¼‚å¸¸åœ¨æ‰§è¡Œbind0æ–¹æ³•ã€‚</span></span><br><span class="line">    <span class="keyword">if</span> (regFuture.isDone()) &#123;</span><br><span class="line">        <span class="comment">// At this point we know that the registration was complete and successful.</span></span><br><span class="line">        ChannelPromise promise = channel.newPromise();</span><br><span class="line">        doBind0(regFuture, channel, localAddress, promise);</span><br><span class="line">        <span class="keyword">return</span> promise;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">// Registration future is almost always fulfilled already, but just in case it's not.</span></span><br><span class="line">        <span class="keyword">final</span> PendingRegistrationPromise promise = <span class="keyword">new</span> PendingRegistrationPromise(channel);</span><br><span class="line">        regFuture.addListener(<span class="keyword">new</span> ChannelFutureListener() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">operationComplete</span><span class="params">(ChannelFuture future)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">                Throwable cause = future.cause();</span><br><span class="line">                <span class="keyword">if</span> (cause != <span class="keyword">null</span>) &#123;</span><br><span class="line">                    <span class="comment">// Registration on the EventLoop failed so fail the ChannelPromise directly to not cause an</span></span><br><span class="line">                    <span class="comment">// IllegalStateException once we try to access the EventLoop of the Channel.</span></span><br><span class="line">                    promise.setFailure(cause);</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    <span class="comment">// Registration was successful, so set the correct executor to use.</span></span><br><span class="line">                    <span class="comment">// See https://github.com/netty/netty/issues/2586</span></span><br><span class="line">                    promise.registered();</span><br><span class="line"></span><br><span class="line">                    doBind0(regFuture, channel, localAddress, promise);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">        <span class="keyword">return</span> promise;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="Channel"><a href="#Channel" class="headerlink" title="Channel"></a>Channel</h4><blockquote><p>Nettyç½‘ç»œé€šä¿¡ç»„ä»¶ã€ç”¨äºæ‰§è¡Œç½‘ç»œI/Oæ“ä½œã€‚</p></blockquote><ul><li><p>æä¾›ç½‘ç»œç›¸å…³é…ç½®ä¿¡æ¯</p></li><li><p>Channelå‚æ•°</p><ul><li><p>SO_KEEPALIVE </p><ul><li>è®¾ç½®ä¸º true ä»£è¡¨å¯ç”¨äº† TCP SO_KEEPALIVE å±æ€§ï¼ŒTCP ä¼šä¸»åŠ¨æ¢æµ‹è¿æ¥çŠ¶æ€ï¼Œå³è¿æ¥ä¿æ´»</li></ul></li><li><p>SO_BACKLOG </p><ul><li>å·²å®Œæˆä¸‰æ¬¡æ¡æ‰‹çš„è¯·æ±‚é˜Ÿåˆ—æœ€å¤§é•¿åº¦ï¼ŒåŒä¸€æ—¶åˆ»æœåŠ¡ç«¯å¯èƒ½ä¼šå¤„ç†å¤šä¸ªè¿æ¥ï¼Œåœ¨é«˜å¹¶å‘æµ·é‡è¿æ¥çš„åœºæ™¯ä¸‹ï¼Œè¯¥å‚æ•°åº”é€‚å½“è°ƒå¤§</li></ul></li><li><p>TCP_NODELAY </p><ul><li>Netty é»˜è®¤æ˜¯ trueï¼Œè¡¨ç¤ºç«‹å³å‘é€æ•°æ®ã€‚å¦‚æœè®¾ç½®ä¸º false è¡¨ç¤ºå¯ç”¨ Nagle ç®—æ³•ï¼Œè¯¥ç®—æ³•ä¼šå°† TCP ç½‘ç»œæ•°æ®åŒ…ç´¯ç§¯åˆ°ä¸€å®šé‡æ‰ä¼šå‘é€ï¼Œè™½ç„¶å¯ä»¥å‡å°‘æŠ¥æ–‡å‘é€çš„æ•°é‡ï¼Œä½†æ˜¯ä¼šé€ æˆä¸€å®šçš„æ•°æ®å»¶è¿Ÿã€‚Netty ä¸ºäº†æœ€å°åŒ–æ•°æ®ä¼ è¾“çš„å»¶è¿Ÿï¼Œé»˜è®¤ç¦ç”¨äº† Nagle ç®—æ³•</li></ul></li><li><p>SO_SNDBUF TCP </p><ul><li>æ•°æ®å‘é€ç¼“å†²åŒºå¤§å°</li></ul></li><li><p>SO_RCVBUF </p><ul><li>TCPæ•°æ®æ¥æ”¶ç¼“å†²åŒºå¤§å°ï¼ŒTCPæ•°æ®æ¥æ”¶ç¼“å†²åŒºå¤§å°</li></ul></li><li><p>SO_LINGER </p><ul><li>è®¾ç½®å»¶è¿Ÿå…³é—­çš„æ—¶é—´ï¼Œç­‰å¾…ç¼“å†²åŒºä¸­çš„æ•°æ®å‘é€å®Œæˆ </li></ul></li><li><p>CONNECT_TIMEOUT_MILLIS  </p><ul><li>è¿æ¥è¶…æ—¶æ—¶é—´</li></ul></li></ul></li><li><p>å¸¸ç”¨çš„Channelç±»å‹</p><ul><li><p>NioSocketChannelï¼Œå¼‚æ­¥çš„å®¢æˆ·ç«¯ TCP Socket è¿æ¥ã€‚</p></li><li><p>NioServerSocketChannelï¼Œå¼‚æ­¥çš„æœåŠ¡å™¨ç«¯ TCP Socket è¿æ¥ã€‚</p></li><li><p>NioDatagramChannelï¼Œå¼‚æ­¥çš„ UDP è¿æ¥ã€‚</p></li><li><p>NioSctpChannelï¼Œå¼‚æ­¥çš„å®¢æˆ·ç«¯ Sctp è¿æ¥ã€‚</p></li><li><p>NioSctpServerChannelï¼Œå¼‚æ­¥çš„ Sctp æœåŠ¡å™¨ç«¯è¿æ¥ï¼Œè¿™äº›é€šé“æ¶µç›–äº† UDP å’Œ TCP ç½‘ç»œ IO ä»¥åŠæ–‡ä»¶ IOã€‚</p></li></ul></li></ul><h4 id="EventLoop"><a href="#EventLoop" class="headerlink" title="EventLoop"></a>EventLoop</h4><blockquote><p>EventLoopå¹¶ä¸æ˜¯Nettyç‹¬æœ‰çš„ï¼Œå®ƒæ˜¯ä¸€ç§<strong>äº‹ä»¶ç­‰å¾…å’Œå¤„ç†çš„ç¨‹åºæ¨¡å‹</strong>ï¼Œå¯ä»¥è§£å†³å¤šçº¿ç¨‹èµ„æºæ¶ˆè€—é«˜çš„é—®é¢˜ã€‚</p></blockquote><ul><li>åœ¨ Netty ä¸­ EventLoop å¯ä»¥ç†è§£ä¸º Reactor çº¿ç¨‹æ¨¡å‹çš„äº‹ä»¶å¤„ç†å¼•æ“ï¼Œæ¯ä¸ª EventLoop çº¿ç¨‹éƒ½ç»´æŠ¤ä¸€ä¸ª Selector é€‰æ‹©å™¨å’Œä»»åŠ¡é˜Ÿåˆ— taskQueueã€‚å®ƒä¸»è¦è´Ÿè´£å¤„ç† I/O äº‹ä»¶ã€æ™®é€šä»»åŠ¡å’Œå®šæ—¶ä»»åŠ¡ã€‚Netty ä¸­æ¨èä½¿ç”¨ NioEventLoop ä½œä¸ºå®ç°ç±»ã€‚</li></ul><p><img src="https://z201.oss-cn-shanghai.aliyuncs.com/JavaNote/20211213143517.png"></p><ul><li>ä¸Šå›¾æ˜¯EventLoopå¸¸è§æ¨¡å‹<ul><li>æ¯æ¬¡å‡ºç°äº‹ä»¶çš„æ—¶å€™ï¼ŒEventloopä¼šå°†äº‹ä»¶å­˜æ”¾åœ¨Event Queueäº‹ä»¶é˜Ÿåˆ—ä¸­ï¼Œé€šè¿‡è½®è¯¢å–å‡ºäº‹ä»¶æ‰§è¡Œæˆ–è€…å°†äº‹ä»¶åˆ†å‘ç»™å“åº”çš„äº‹ä»¶ç›‘å¬æ‰§è¡Œï¼Œäº‹ä»¶æ‰§è¡Œçš„æ–¹å¼é€šå¸¸åˆ†ä¸ºç«‹å³æ‰§è¡Œã€å»¶åæ‰§è¡Œã€å®šæœŸæ‰§è¡Œå‡ ç§ã€‚</li></ul></li></ul><h5 id="runæ–¹æ³•"><a href="#runæ–¹æ³•" class="headerlink" title="runæ–¹æ³•"></a>runæ–¹æ³•</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">for</span> (;;) &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    <span class="keyword">switch</span> (selectStrategy.calculateStrategy(selectNowSupplier, hasTasks())) &#123;</span><br><span class="line">                    <span class="keyword">case</span> SelectStrategy.CONTINUE:</span><br><span class="line">                        <span class="keyword">continue</span>;</span><br><span class="line"></span><br><span class="line">                    <span class="keyword">case</span> SelectStrategy.BUSY_WAIT:</span><br><span class="line">                        <span class="comment">// fall-through to SELECT since the busy-wait is not supported with NIO</span></span><br><span class="line"></span><br><span class="line">                    <span class="keyword">case</span> SelectStrategy.SELECT: <span class="comment">// å¤„ç†selectäº‹ä»¶</span></span><br><span class="line">                        <span class="comment">// è½®è®­ioäº‹ä»¶</span></span><br><span class="line">                        select(wakenUp.getAndSet(<span class="keyword">false</span>));</span><br><span class="line"></span><br><span class="line">                        <span class="comment">// 'wakenUp.compareAndSet(false, true)' is always evaluated</span></span><br><span class="line">                        <span class="comment">// before calling 'selector.wakeup()' to reduce the wake-up</span></span><br><span class="line">                        <span class="comment">// overhead. (Selector.wakeup() is an expensive operation.)</span></span><br><span class="line">                        <span class="comment">//</span></span><br><span class="line">                        <span class="comment">// However, there is a race condition in this approach.</span></span><br><span class="line">                        <span class="comment">// The race condition is triggered when 'wakenUp' is set to</span></span><br><span class="line">                        <span class="comment">// true too early.</span></span><br><span class="line">                        <span class="comment">//</span></span><br><span class="line">                        <span class="comment">// 'wakenUp' is set to true too early if:</span></span><br><span class="line">                        <span class="comment">// 1) Selector is waken up between 'wakenUp.set(false)' and</span></span><br><span class="line">                        <span class="comment">//    'selector.select(...)'. (BAD)</span></span><br><span class="line">                        <span class="comment">// 2) Selector is waken up between 'selector.select(...)' and</span></span><br><span class="line">                        <span class="comment">//    'if (wakenUp.get()) &#123; ... &#125;'. (OK)</span></span><br><span class="line">                        <span class="comment">//</span></span><br><span class="line">                        <span class="comment">// In the first case, 'wakenUp' is set to true and the</span></span><br><span class="line">                        <span class="comment">// following 'selector.select(...)' will wake up immediately.</span></span><br><span class="line">                        <span class="comment">// Until 'wakenUp' is set to false again in the next round,</span></span><br><span class="line">                        <span class="comment">// 'wakenUp.compareAndSet(false, true)' will fail, and therefore</span></span><br><span class="line">                        <span class="comment">// any attempt to wake up the Selector will fail, too, causing</span></span><br><span class="line">                        <span class="comment">// the following 'selector.select(...)' call to block</span></span><br><span class="line">                        <span class="comment">// unnecessarily.</span></span><br><span class="line">                        <span class="comment">//</span></span><br><span class="line">                        <span class="comment">// To fix this problem, we wake up the selector again if wakenUp</span></span><br><span class="line">                        <span class="comment">// is true immediately after selector.select(...).</span></span><br><span class="line">                        <span class="comment">// It is inefficient in that it wakes up the selector for both</span></span><br><span class="line">                        <span class="comment">// the first case (BAD - wake-up required) and the second case</span></span><br><span class="line">                        <span class="comment">// (OK - no wake-up required).</span></span><br><span class="line"></span><br><span class="line">                        <span class="keyword">if</span> (wakenUp.get()) &#123;</span><br><span class="line">                            selector.wakeup();</span><br><span class="line">                        &#125;</span><br><span class="line">                        <span class="comment">// fall through</span></span><br><span class="line">                    <span class="keyword">default</span>:</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">                    <span class="comment">// If we receive an IOException here its because the Selector is messed up. Let's rebuild</span></span><br><span class="line">                    <span class="comment">// the selector and retry. https://github.com/netty/netty/issues/8566</span></span><br><span class="line">                    rebuildSelector0();</span><br><span class="line">                    handleLoopException(e);</span><br><span class="line">                    <span class="keyword">continue</span>;</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                cancelledKeys = <span class="number">0</span>;</span><br><span class="line">                needsToSelectAgain = <span class="keyword">false</span>;</span><br><span class="line">                <span class="keyword">final</span> <span class="keyword">int</span> ioRatio = <span class="keyword">this</span>.ioRatio;</span><br><span class="line">                <span class="keyword">if</span> (ioRatio == <span class="number">100</span>) &#123;</span><br><span class="line">                    <span class="keyword">try</span> &#123;</span><br><span class="line">                        processSelectedKeys(); <span class="comment">// å¤„ç†ioäº‹ä»¶</span></span><br><span class="line">                    &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">                        <span class="comment">// Ensure we always run tasks.</span></span><br><span class="line">                        runAllTasks(); <span class="comment">// å¤„ç†æ‰€æœ‰ä»»åŠ¡</span></span><br><span class="line">                    &#125;</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    <span class="keyword">final</span> <span class="keyword">long</span> ioStartTime = System.nanoTime();</span><br><span class="line">                    <span class="keyword">try</span> &#123;</span><br><span class="line">                        processSelectedKeys(); <span class="comment">// å¤„ç†ioäº‹ä»¶</span></span><br><span class="line">                    &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">                        <span class="comment">// Ensure we always run tasks.</span></span><br><span class="line">                        <span class="keyword">final</span> <span class="keyword">long</span> ioTime = System.nanoTime() - ioStartTime;</span><br><span class="line">                        runAllTasks(ioTime * (<span class="number">100</span> - ioRatio) / ioRatio);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125; <span class="keyword">catch</span> (Throwable t) &#123;</span><br><span class="line">                handleLoopException(t);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">// Always handle shutdown even if the loop processing threw an exception.</span></span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                <span class="keyword">if</span> (isShuttingDown()) &#123;</span><br><span class="line">                    closeAll();</span><br><span class="line">                    <span class="keyword">if</span> (confirmShutdown()) &#123;</span><br><span class="line">                        <span class="keyword">return</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125; <span class="keyword">catch</span> (Throwable t) &#123;</span><br><span class="line">                handleLoopException(t);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><h5 id="EventLoopè‰¯å¥½çš„å®è·µ"><a href="#EventLoopè‰¯å¥½çš„å®è·µ" class="headerlink" title="EventLoopè‰¯å¥½çš„å®è·µ"></a>EventLoopè‰¯å¥½çš„å®è·µ</h5><ul><li>ç½‘ç»œè¿æ¥å»ºç«‹è¿‡ç¨‹ä¸­ä¸‰æ¬¡æ¡æ‰‹ã€å®‰å…¨è®¤è¯çš„è¿‡ç¨‹ä¼šæ¶ˆè€—ä¸å°‘æ—¶é—´ã€‚å»ºè®®ä½¿ç”¨Reactoræ··åˆæ¨¡å¼é‡‡ç”¨ Boss å’Œ Worker ä¸¤ä¸ª EventLoopGroupã€‚</li><li>Reactor çº¿ç¨‹æ¨¡å¼é€‚åˆå¤„ç†è€—æ—¶çŸ­çš„ä»»åŠ¡åœºæ™¯ï¼Œè€—æ—¶è¾ƒé•¿çš„ ChannelHandler å¯ä»¥è€ƒè™‘ç»´æŠ¤ä¸€ä¸ªä¸šåŠ¡çº¿ç¨‹æ± ã€‚é¿å… ChannelHandler é˜»å¡è€Œé€ æˆ EventLoop ä¸å¯ç”¨ã€‚</li><li>å¦‚æœä¸šåŠ¡é€»è¾‘æ‰§è¡Œæ—¶é—´è¾ƒçŸ­ï¼Œå»ºè®®ç›´æ¥åœ¨ ChannelHandler ä¸­æ‰§è¡Œã€‚å‡å°‘ç³»ç»Ÿå¤æ‚åº¦ã€‚</li><li>å°½é‡å°‘çš„ChannelHandlerï¼Œå°½é‡å°†ä¸šåŠ¡ç‹¬ç«‹å‡ºå»ã€‚</li></ul><h4 id="ChannelPipeline"><a href="#ChannelPipeline" class="headerlink" title="ChannelPipeline"></a>ChannelPipeline</h4><blockquote><p>å®é™…ç¼–ç è¿‡ç¨‹ä¸­ï¼Œä¸šåŠ¡å¤„ç†é€»è¾‘æ˜¯ ChannelPipeline ä¸­æ‰€å®šä¹‰çš„ ChannelHandler å®Œæˆçš„ï¼ŒNetty æœåŠ¡ç¼–æ’å±‚çš„æ ¸å¿ƒç»„ä»¶ ChannelPipeline å’Œ ChannelHandler ä¸ºç”¨æˆ·æä¾›äº† I/O äº‹ä»¶ç®¡ç†ã€‚</p></blockquote><ul><li>ä»ChannelPipelineæ³¨é‡Šä¸Šé¢æŠ“çš„å›¾</li></ul><p><img src="https://z201.oss-cn-shanghai.aliyuncs.com/JavaNote/20211213213842.png"></p><ul><li>channelPipelineé‡‡ç”¨è´£ä»»é“¾æ²¡äº‹ï¼ŒInboundå…¥ç«™ã€outboundå‡ºç«™ã€‚</li></ul><p><img src="https://z201.oss-cn-shanghai.aliyuncs.com/JavaNote/20211213220334.png"></p><ul><li>æ¯ä¸ª Channel ä¼šç»‘å®šä¸€ä¸ª ChannelPipelineï¼Œæ¯ä¸€ä¸ª ChannelPipeline éƒ½åŒ…å«å¤šä¸ªChannelHandlerContextï¼Œæ‰€æœ‰ ChannelHandlerContext ä¹‹é—´ç»„æˆäº†åŒå‘é“¾è¡¨ã€‚ChannelPipeline çš„åŒå‘é“¾è¡¨åˆ†åˆ«ç»´æŠ¤äº† HeadContext å’Œ TailContext çš„å¤´å°¾èŠ‚ç‚¹ã€‚è‡ªå®šä¹‰çš„ ChannelHandler ä¼šæ’å…¥åˆ° Head å’Œ Tail ä¹‹é—´ã€‚</li><li>ChannelHandlerContextåŒ…å«äº†ChannelHandler ç”Ÿå‘½å‘¨æœŸçš„æ‰€æœ‰äº‹ä»¶ã€‚å…¥ç«™çš„æ—¶å€™æ˜¯ä»headContextå¾€tailContextæ‰§è¡Œï¼Œå‡ºç«™çš„æ—¶å€™tailContextå¾€headContextæ‰§è¡Œã€‚</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">serverBootstrap.childHandler(<span class="keyword">new</span> ChannelInitializer&lt;NioSocketChannel&gt;() &#123;</span><br><span class="line">         <span class="meta">@Override</span></span><br><span class="line">         <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">initChannel</span><span class="params">(NioSocketChannel ch)</span></span>&#123;</span><br><span class="line">             ChannelPipeline channelPipeline = ch.pipeline();</span><br><span class="line">             channelPipeline.addLast(<span class="string">"idleHandler"</span>, <span class="keyword">new</span> ServerIdleCheckHandler());</span><br><span class="line">             channelPipeline.addLast(<span class="string">"frameDecoder"</span>,<span class="keyword">new</span> FrameDecoder());</span><br><span class="line">             channelPipeline.addLast(<span class="string">"frameEncoder"</span>,<span class="keyword">new</span> FrameEncoder());</span><br><span class="line">             channelPipeline.addLast(<span class="string">"protocolDecoder"</span>,<span class="keyword">new</span> ProtocolDecoder());</span><br><span class="line">             channelPipeline.addLast(<span class="string">"protocolEncoder"</span>,<span class="keyword">new</span> ProtocolEncoder());</span><br><span class="line">             channelPipeline.addLast(<span class="string">"loggingHandler"</span>,<span class="keyword">new</span> LoggingHandler(LogLevel.INFO));</span><br><span class="line">             channelPipeline.addLast(<span class="string">"protocolProcessHandler"</span>,<span class="keyword">new</span> ServerProtocolProcessHandler());</span><br><span class="line">         &#125;</span><br><span class="line">     &#125;);</span><br></pre></td></tr></table></figure><ul><li>è¿è¡Œæ•ˆæœ</li></ul><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">22:10:57 [work-3-1] FrameDecoder: running</span><br><span class="line">22:10:57 [work-3-1] FrameEncoder: running</span><br><span class="line">22:10:57 [work-3-1] ProtocolDecoder: running</span><br><span class="line">22:10:57 [work-3-1] ServerProtocolProcessHandler: running</span><br><span class="line">22:10:57 [work-3-1] ProtocolEncoder: running</span><br></pre></td></tr></table></figure><h5 id="ChannelPipelineå¼‚å¸¸å¤„ç†"><a href="#ChannelPipelineå¼‚å¸¸å¤„ç†" class="headerlink" title="ChannelPipelineå¼‚å¸¸å¤„ç†"></a>ChannelPipelineå¼‚å¸¸å¤„ç†</h5><ul><li>piplelineæ˜¯è´£ä»»é“¾æ¨¡å¼ï¼Œæ¨èåœ¨è‡ªå®šä¹‰handleræœ«ç«¯æ·»åŠ åŒä¸€çš„å¼‚å¸¸å¤„ç†å™¨ã€‚æ ¹æ®å¼‚å¸¸ä¿¡æ¯å¤„ç†é€»è¾‘ã€‚</li></ul><h4 id="ByteBuf"><a href="#ByteBuf" class="headerlink" title="ByteBuf"></a>ByteBuf</h4><blockquote><p>Nettyä¸­çš„æ•°æ®å®¹å™¨ï¼ŒJava Nioä¸­ä¹Ÿæä¾›äº†ByteBufferä½†æ˜¯ä½¿ç”¨å¤æ‚ã€‚</p></blockquote><h4 id="Zero-Copy"><a href="#Zero-Copy" class="headerlink" title="Zero-Copy"></a>Zero-Copy</h4><blockquote><p><strong>Netty</strong> çš„<code>Zero-copy</code> ,é›¶æ‹·è´æ˜¯ä¸€ä¸ªè€³ç†Ÿèƒ½è¯¦çš„è¯è¯­ï¼Œåœ¨ Linuxã€Kafkaã€RocketMQ ç­‰çŸ¥åçš„äº§å“ä¸­éƒ½æœ‰ä½¿ç”¨ï¼Œé€šå¸¸ç”¨äºæå‡ I/O æ€§èƒ½ã€‚</p></blockquote><h4 id="Keepalive"><a href="#Keepalive" class="headerlink" title="Keepalive"></a>Keepalive</h4><blockquote><p>keepaliveå°±æ˜¯å¿ƒè·³ï¼Œä¸€ä¸ªäººçš„å¿ƒè·³è¯æ˜äººè¿˜æ´»ç€ï¼Œé‚£ä¹ˆåœ¨ç½‘ç»œé€šä¿¡çš„åŒæ–¹å¦‚ä½•è¯æ˜å¯¹ç«¯è¿˜æ´»ç€ç€ï¼Œä¸¤ä¸ªæœåŠ¡ä¹‹é—´ä½¿ç”¨å¿ƒè·³æ¥æ£€æµ‹å¯¹æ–¹æ˜¯å¦è¿˜æ´»ç€ã€‚</p></blockquote><h4 id="Nettyä¸­çš„è®¾è®¡æ¨¡å¼"><a href="#Nettyä¸­çš„è®¾è®¡æ¨¡å¼" class="headerlink" title="Nettyä¸­çš„è®¾è®¡æ¨¡å¼"></a>Nettyä¸­çš„è®¾è®¡æ¨¡å¼</h4><ul><li>å•ä¾‹  ReadTimeoutException#INSTANCE</li><li>å·¥å‚ ReflectiveChannelFactory</li><li>ç­–ç•¥ EventExecutorChooserFactory</li><li>è£…é¥°å™¨ WrappedByteBuf</li><li>æ¨¡ç‰ˆ AbstractTrafficShapingHandler</li><li>è´£ä»»é“¾ ChannelPipeline  ChannelHandler</li><li>è§‚å¯Ÿè€… ChannelFuture#addListener</li></ul><h3 id="æ‰©å±•"><a href="#æ‰©å±•" class="headerlink" title="æ‰©å±•"></a>æ‰©å±•</h3><h4 id="è‰¯å¥½çš„å®è·µ"><a href="#è‰¯å¥½çš„å®è·µ" class="headerlink" title="è‰¯å¥½çš„å®è·µ"></a>è‰¯å¥½çš„å®è·µ</h4><ul><li>é€šè¿‡ä¿®æ”¹<code>çº¿ç¨‹å</code>æ–¹ä¾¿æˆ‘ä»¬åœ¨debugæˆ–è€…å¼‚å¸¸è¿½è¸ª,é€šè¿‡NioEventLoopGroupçš„æ„é€ æ–¹æ³•æ¥ä¿®æ”¹åç§°</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">EventLoopGroup bossGroup = <span class="keyword">new</span> NioEventLoopGroup(<span class="number">0</span>,<span class="keyword">new</span> DefaultThreadFactory(<span class="string">"boss"</span>));</span><br><span class="line">EventLoopGroup workerGroup = <span class="keyword">new</span> NioEventLoopGroup(,<span class="keyword">new</span> DefaultThreadFactory(<span class="string">"work"</span>));</span><br></pre></td></tr></table></figure><ul><li>ä¿®æ”¹<code>Handler</code>åç§°ï¼Œå¦‚æœä¸è®¾ç½®Handlerçš„åç§°ï¼Œä¼šä½¿ç”¨é»˜è®¤çš„ç±»åã€‚æ·»åŠ åˆ°piplelineåˆ°æ—¶å€™æŒ‡å®šåå­—ã€‚</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"> channelPipeline.addLast(<span class="string">"idleHandler"</span>, <span class="keyword">new</span> ServerIdleCheckHandler());</span><br><span class="line">channelPipeline.addLast(<span class="string">"frameDecoder"</span>,<span class="keyword">new</span> FrameDecoder());</span><br><span class="line"> channelPipeline.addLast(<span class="string">"frameEncoder"</span>,<span class="keyword">new</span> FrameEncoder());</span><br></pre></td></tr></table></figure><ul><li>æ—¥å¿—,è¿™é‡Œä»Nettyè‡ªå¸¦çš„LoggingHandlerè·Ÿè¸ªæºç ,è¿™é‡Œå¯ä»¥çœ‹åˆ°ä¼˜å…ˆä½¿ç”¨çš„æ˜¯SLF4Jã€‚ä½†æ˜¯éœ€è¦æ‰‹åŠ¨å¼•å…¥ç›¸åº”çš„jarä¾èµ–ã€‚</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">static</span> InternalLoggerFactory <span class="title">newDefaultFactory</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">        InternalLoggerFactory f;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            f = <span class="keyword">new</span> Slf4JLoggerFactory(<span class="keyword">true</span>);</span><br><span class="line">            f.newInstance(name).debug(<span class="string">"Using SLF4J as the default logging framework"</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Throwable ignore1) &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                f = Log4JLoggerFactory.INSTANCE;</span><br><span class="line">                f.newInstance(name).debug(<span class="string">"Using Log4J as the default logging framework"</span>);</span><br><span class="line">            &#125; <span class="keyword">catch</span> (Throwable ignore2) &#123;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    f = Log4J2LoggerFactory.INSTANCE;</span><br><span class="line">                    f.newInstance(name).debug(<span class="string">"Using Log4J2 as the default logging framework"</span>);</span><br><span class="line">                &#125; <span class="keyword">catch</span> (Throwable ignore3) &#123;</span><br><span class="line">                    f = JdkLoggerFactory.INSTANCE;</span><br><span class="line">                    f.newInstance(name).debug(<span class="string">"Using java.util.logging as the default logging framework"</span>);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> f;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><ul><li>åœ¨ä¸åŒçš„å¹³å°åˆ‡æ¢Nio nativeå®ç°,è¿™é‡Œéœ€è¦æ³¨æ„å¼€å‘ç¯å¢ƒå’Œç”Ÿäº§ç¯å¢ƒã€‚åœ¨ç”Ÿäº§ç¯å¢ƒè¿˜éœ€è¦æ³¨æ„æƒé™é—®é¢˜ã€å¹¶ä¸”å‡†å¥½å·nativeçš„åº“ã€‚</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// mac </span></span><br><span class="line">EventLoopGroup bossGroup = <span class="keyword">new</span> KQueueEventLoopGroup(<span class="number">0</span>,<span class="keyword">new</span> DefaultThreadFactory(<span class="string">"boss"</span>));</span><br><span class="line">EventLoopGroup workerGroup = <span class="keyword">new</span> KQueueEventLoopGroup(<span class="number">0</span>,<span class="keyword">new</span> DefaultThreadFactory(<span class="string">"work"</span>));</span><br><span class="line"><span class="comment">// linxu </span></span><br><span class="line">EventLoopGroup bossGroup = <span class="keyword">new</span> EpollEventLoopGroup(<span class="number">0</span>,<span class="keyword">new</span> DefaultThreadFactory(<span class="string">"boss"</span>));</span><br><span class="line">EventLoopGroup workerGroup = <span class="keyword">new</span> EpollEventLoopGroup(<span class="number">0</span>,<span class="keyword">new</span> DefaultThreadFactory(<span class="string">"work"</span>));</span><br><span class="line"><span class="comment">// æ³¨æ„å¼€å‘ç¯å¢ƒä¸ç”Ÿäº§ç¯å¢ƒ,</span></span><br></pre></td></tr></table></figure><h4 id="ä¸ºä»€ä¹ˆè¦ä½¿ç”¨nettyè€Œä¸ä½¿ç”¨Jdkè‡ªå¸¦çš„NIO"><a href="#ä¸ºä»€ä¹ˆè¦ä½¿ç”¨nettyè€Œä¸ä½¿ç”¨Jdkè‡ªå¸¦çš„NIO" class="headerlink" title="ä¸ºä»€ä¹ˆè¦ä½¿ç”¨nettyè€Œä¸ä½¿ç”¨Jdkè‡ªå¸¦çš„NIO"></a>ä¸ºä»€ä¹ˆè¦ä½¿ç”¨nettyè€Œä¸ä½¿ç”¨Jdkè‡ªå¸¦çš„NIO</h4><blockquote><p>æ›´å¥½çš„apiã€æ›´åŠ ç¨³å®šã€å¯æ‰©å±•æ€§</p></blockquote><ul><li>ç›¸æ¯”nio,nettyåšçš„æ›´å¤šï¼Œåšçš„æ›´å¥½ã€‚</li><li>ä½¿ç”¨jdk nioï¼Œæˆ‘ä»¬ä½¿ç”¨ JDK NIO ç¼–ç¨‹éœ€è¦äº†è§£å¾ˆå¤šå¤æ‚çš„æ¦‚å¿µï¼Œæ¯”å¦‚ Channelsã€Selectorsã€Socketsã€Buffers ç­‰ã€è¿˜éœ€è¦è§£å†³æ²¾åŒ…ã€åŠåŒ…çš„é—®é¢˜ï¼Œè¿˜éœ€è¦åšå¤§é‡çš„å®šåˆ¶åŒ–éœ€æ±‚ã€‚ç½‘ç»œæœ¬èº«å°±å¾ˆå¤æ‚ï¼Œæ¯”å¦‚çŸ­çº¿é‡è¿ã€å¿ƒè·³ã€‚</li><li>nettyè§£å†³äº†å¤§é‡nioçš„bug,æ¯”å¦‚selectç©ºè½¬å¯¼è‡´cpu 100%ï¼Œä½¿ç”¨nettyå¯ä»¥å¾ˆå¥½çš„è§„é¿å¤§é‡å­˜åœ¨çš„é—®é¢˜ï¼Œæ¯•ç«Ÿjdkä¹Ÿæ˜¯äººå†™çš„ã€‚</li><li>nettyåœ¨æ‰©å±•æ€§ä¸Šï¼Œåœ¨çº¿ç¨‹æ¨¡å‹å¯ä»¥é€šè¿‡å‚æ•°é…ç½®é€‰æ‹©çº¿ç¨‹æ¨¡å‹ã€‚</li><li>JDKçš„NIOé»˜è®¤æ˜¯æ°´å¹³è§¦å‘ï¼ŒNettyæ˜¯è¾¹ç¼˜è§¦å‘ï¼ˆé»˜è®¤ï¼‰å’Œæ°´å¹³è§¦å‘å¯ä»¥åˆ‡æ¢ã€‚</li><li>Nettyå®ç°çš„åƒåœ¾å›æ”¶æ›´å°‘ã€æ€§èƒ½æ›´å¥½ã€‚</li></ul><h4 id="ç»å…¸çš„ä¸‰ç§I-Oæ¨¡å¼"><a href="#ç»å…¸çš„ä¸‰ç§I-Oæ¨¡å¼" class="headerlink" title="ç»å…¸çš„ä¸‰ç§I/Oæ¨¡å¼"></a>ç»å…¸çš„ä¸‰ç§I/Oæ¨¡å¼</h4><blockquote><p>BIOï¼ˆé˜»å¡I/Oï¼‰ã€NIO(éé˜»å¡I/O)ã€AIO(å¼‚æ­¥I/O)</p></blockquote><ul><li>é˜»å¡äºéé˜»å¡<ul><li>é˜»å¡æƒ…å†µä¸‹ï¼Œæ²¡æœ‰æ•°æ®ä¼ è¾“è¿‡æ¥æ—¶ï¼Œè¯»æ“ä½œä¼šé˜»å¡ä¸€ç›´ç­‰å¾…åˆ°æœ‰æ•°æ®ï¼Œç¼“å†²åŒºå†™æ»¡çš„æ—¶å€™ï¼Œå†™åšæ“ä¹Ÿä¼šé˜»å¡ã€‚éé˜»å¡é‡åˆ°è¿™ç§æƒ…å†µéƒ½æ˜¯ç›´æ¥è¿”å›ã€‚</li></ul></li><li>åŒæ­¥äºå¼‚æ­¥<ul><li>æ•°æ®å‡†å¤‡å°±ç»ªéœ€è¦è‡ªå·±å»è¯»å–å°±æ˜¯åŒæ­¥ï¼Œæ•°æ®å°±ç»ªç›´æ¥è¯»å–å¥½å›è°ƒç»™ç¨‹åºå°±æ˜¯å¼‚æ­¥ã€‚</li></ul></li></ul><h5 id="nettyå¦‚ä½•å®ç°ä¸‰ç§I-Oæ¨¡å¼"><a href="#nettyå¦‚ä½•å®ç°ä¸‰ç§I-Oæ¨¡å¼" class="headerlink" title="nettyå¦‚ä½•å®ç°ä¸‰ç§I/Oæ¨¡å¼"></a>nettyå¦‚ä½•å®ç°ä¸‰ç§I/Oæ¨¡å¼</h5><ul><li>BIOåœ¨nettyä¸­ä¹Ÿå«OIOå’ŒAIOä¸€èµ·æ›¾ç»éƒ½æ”¯æŒè¿‡ã€‚ç°åœ¨Nettyä»…æ”¯æŒNIOã€‚</li></ul><h5 id="nioä¸€å®šä¼˜äºbioå—"><a href="#nioä¸€å®šä¼˜äºbioå—" class="headerlink" title="nioä¸€å®šä¼˜äºbioå—"></a>nioä¸€å®šä¼˜äºbioå—</h5><ul><li>åœ¨è¿æ¥æ•°å°‘ã€å¹¶å‘ä½çš„åœºæ™¯ä¸‹ï¼ŒBIOæ€§èƒ½å¹¶ä¸è¾“NIOã€‚</li></ul><h5 id="ä»€ä¹ˆæ˜¯æ°´å¹³è§¦å‘ã€ä»€ä¹ˆæ˜¯è¾¹ç¼˜è§¦å‘"><a href="#ä»€ä¹ˆæ˜¯æ°´å¹³è§¦å‘ã€ä»€ä¹ˆæ˜¯è¾¹ç¼˜è§¦å‘" class="headerlink" title="ä»€ä¹ˆæ˜¯æ°´å¹³è§¦å‘ã€ä»€ä¹ˆæ˜¯è¾¹ç¼˜è§¦å‘"></a>ä»€ä¹ˆæ˜¯æ°´å¹³è§¦å‘ã€ä»€ä¹ˆæ˜¯è¾¹ç¼˜è§¦å‘</h5><blockquote><p>è¾¹ç¼˜è§¦å‘ç›¸å½“äºé«˜é€Ÿæ¨¡å¼ï¼Œç†è®ºä¸Šæ•ˆç‡æ›´é«˜ï¼Œä½†æ˜¯å¤æ‚åº¦ä¹Ÿé«˜ï¼Œæ‰€ä»¥ç°åœ¨å¤§å¤šåº”ç”¨ï¼ˆRedisç­‰ï¼‰è¿˜æ˜¯é»˜è®¤æ°´å¹³è§¦å‘ï¼Œå¦‚æœè¿½æ±‚è¦æ›´å¥½çš„æ€§èƒ½ã€åŒæ—¶æœ‰ä¿¡å¿ƒç¼–ç å¥½ï¼Œå¯ä»¥å°è¯•ä½¿ç”¨è¾¹ç¼˜è§¦å‘ï¼Œä¾‹å¦‚nginxã€‚è¾¹ç¼˜è§¦å‘åªæ”¯æŒéé˜»å¡æ¨¡å¼ã€‚</p></blockquote><ul><li>å½“è¢«ç›‘æ§çš„æ–‡ä»¶æœ‰å¯è¯»å†™äº‹ä»¶å‘ç”Ÿæ—¶ï¼Œepoll_wait()ä¼šé€šçŸ¥å¤„ç†ç¨‹åºå»è¯»å†™ï¼Œå¦‚æœè¿™æ¬¡æ²¡æœ‰æŠŠæ•°æ®ä¸€æ¬¡æ€§å…¨éƒ¨è¯»å†™å®Œçš„è¯ï¼Œæ°´å¹³è§¦å‘ï¼šé‚£ä¹ˆä¸‹æ¬¡è°ƒç”¨ epoll_wait()æ—¶é€šçŸ¥ä½ ä¸Šæ¬¡æ²¡è¯»å†™å®Œï¼Œå¦‚æœä¸€ç›´ä¸å¤„ç†å®ƒä¼šä¸€ç›´é€šçŸ¥ä½ ï¼›è¾¹ç¼˜è§¦å‘ï¼šä¸‹æ¬¡è°ƒç”¨ epoll_wait()çš„æ—¶å€™ä¸ä¼šé€šçŸ¥ä½ ï¼Œä¹Ÿå°±æ˜¯åªé€šçŸ¥ä¸€æ¬¡ï¼ŒçŸ¥é“è¯¥æ–‡ä»¶ä¸Šå‡ºç°ç¬¬äºŒæ¬¡å¯è¯»å†™äº‹ä»¶æ‰ä¼šé€šçŸ¥ï¼Œæ•ˆç‡æ¯”æ°´å¹³è§¦å‘è¦é«˜</li></ul><h4 id="Nettyå¯¹Reactorçš„æ”¯æŒ"><a href="#Nettyå¯¹Reactorçš„æ”¯æŒ" class="headerlink" title="Nettyå¯¹Reactorçš„æ”¯æŒ"></a>Nettyå¯¹Reactorçš„æ”¯æŒ</h4><blockquote><p>nioåœ¨nettyä¸­çš„æ˜¯ç”±reactorå®ç°çš„ï¼ŒReactoræ˜¯ä¸€ç§å¼€å‘æ¨¡å¼,åœ¨nettyä¸­Reactoræœ‰ä¸‰ç§æ¨¡å¼ã€‚</p></blockquote><ul><li><strong>å•çº¿ç¨‹æ¨¡å‹</strong>ï¼šEventLoopGroupåªåŒ…å«ä¸€ä¸ªEventLoopï¼ŒBosså’ŒWorkerä½¿ç”¨åŒä¸€ä¸ªEventLoopGroup</li><li><strong>å¤šçº¿ç¨‹æ¨¡å‹</strong>ï¼šEventLoopGroupåŒ…å«å¤šä¸ªEventLoopï¼ŒBosså’ŒWorkerä½¿ç”¨åŒä¸€ä¸ªEventLoopGroup</li><li><strong>ä¸»ä»å¤šçº¿ç¨‹æ¨¡å‹</strong>ï¼šEventLoopGroupåŒ…å«å¤šä¸ªEventLoopï¼ŒBossæ˜¯ä¸»Reactorï¼ŒWorkeræ˜¯ä»Reactorï¼Œå®ƒä»¬åˆ†åˆ«ä½¿ç”¨ä¸åŒçš„EventLoopGroupï¼Œä¸»Reactorè´Ÿè´£æ–°çš„ç½‘ç»œè¿æ¥Channelåˆ›å»ºï¼Œç„¶åæŠŠChannelæ³¨å†Œåˆ°ä»Reactor</li></ul><h5 id="Reactorå•çº¿ç¨‹æ¨¡å¼"><a href="#Reactorå•çº¿ç¨‹æ¨¡å¼" class="headerlink" title="Reactorå•çº¿ç¨‹æ¨¡å¼"></a>Reactorå•çº¿ç¨‹æ¨¡å¼</h5><ul><li>Reactorå•çº¿ç¨‹æ¨¡å¼æ‰€æœ‰çš„I/Oæ“ä½œéƒ½ç”±ä¸€ä¸ªçº¿ç¨‹å®Œæˆã€‚ä»…éœ€è¦å¯åŠ¨ä¸€ä¸ªNioEventLoopGroupã€‚</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">EventLoopGroup group = <span class="keyword">new</span> NioEventLoopGroup(<span class="number">1</span>);</span><br><span class="line">ServerBootstrap b = <span class="keyword">new</span> ServerBootstrap();</span><br><span class="line">b.group(group)</span><br></pre></td></tr></table></figure><p>![image-20211120161222982](/Users/zengqingfeng/Library/Application Support/typora-user-images/image-20211120161222982.png)</p><ul><li>ä¸€ä¸ªçº¿ç¨‹æ”¯æŒçš„è¿æ¥æ•°æ˜¯æœ‰é™çš„ï¼Œæ€§èƒ½æ–¹é¢cpuå®¹æ˜“è·‘æ»¡ã€‚</li><li>å½“å¤šä¸ªäº‹ä»¶åŒæ—¶è§¦å‘çš„æ—¶å€™ï¼Œå®¹æ˜“å‡ºç°æŸ±å¡çš„æƒ…å†µï¼Œä¼šå¯¼è‡´æ¶ˆæ¯çš„ç§¯å‹ã€å®¢æˆ·ç«¯è¯·æ±‚è¶…æ—¶ã€‚</li><li>çº¿ç¨‹åœ¨å¤„ç†I/Oäº‹ä»¶ï¼ŒSelectæ— æ³•å¤„ç†å…¶ä»–æ“ä½œï¼Œæ¯”å¦‚å»ºç«‹è¿æ¥ã€äº‹ä»¶åˆ†å‘ç­‰æ“ä½œã€‚é•¿æ—¶é—´çš„çº¿ç¨‹æ»¡è´Ÿè½½ï¼Œå®¹æ˜“å¯¼è‡´æœåŠ¡èŠ‚ç‚¹ä¸å¯ç”¨ã€‚</li></ul><h5 id="éä¸»ä»Reactorå¤šçº¿ç¨‹æ¨¡å¼"><a href="#éä¸»ä»Reactorå¤šçº¿ç¨‹æ¨¡å¼" class="headerlink" title="éä¸»ä»Reactorå¤šçº¿ç¨‹æ¨¡å¼"></a>éä¸»ä»Reactorå¤šçº¿ç¨‹æ¨¡å¼</h5><ul><li>ç”±äºReactorå‡ºç°çš„ä¸¥é‡çš„æ€§èƒ½é—®é¢˜ï¼Œå› æ­¤å‡ºç°äº†å¤šçº¿ç¨‹æ¨¡å‹ï¼Œåœ¨åˆ›å»ºNioEventLoopGroupçš„æ—¶å€™å¯ä»¥ä¸æŒ‡å®šå¤§å°ï¼Œé»˜è®¤æ˜¯2 * cpuçš„çº¿ç¨‹æ•°é‡ï¼Œä¹Ÿå¯ä»¥æ‰‹åŠ¨è®¾ç½®å›ºå®šçš„çº¿ç¨‹æ•°ã€‚</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">EventLoopGroup group = <span class="keyword">new</span> NioEventLoopGroup();</span><br><span class="line">ServerBootstrap b = <span class="keyword">new</span> ServerBootstrap();</span><br><span class="line">b.group(group)</span><br></pre></td></tr></table></figure><p>![image-20211120161554909](/Users/zengqingfeng/Library/Application Support/typora-user-images/image-20211120161554909.png)</p><h5 id="ä¸»ä»Reactorå¤šçº¿ç¨‹æ¨¡å¼"><a href="#ä¸»ä»Reactorå¤šçº¿ç¨‹æ¨¡å¼" class="headerlink" title="ä¸»ä»Reactorå¤šçº¿ç¨‹æ¨¡å¼"></a>ä¸»ä»Reactorå¤šçº¿ç¨‹æ¨¡å¼</h5><ul><li>ç°åœ¨ä¸»æµçš„å¼€å‘ä¸»è¦é‡‡ç”¨ä¸»ä»å¤šçº¿ç¨‹æ¨¡å¼,Boosæ˜¯ä¸»Reactor,workeræ˜¯ä»Reactorã€‚å®ƒä»¬åˆ†åˆ«ä½¿ç”¨ä¸åŒçš„NioEventLoopGroupï¼Œä¸»Reactorè´Ÿè´£å¤„ç†ON_ACCEPT,ç„¶åæŠŠChannelæ³¨å†Œåˆ°Reactorä¸Šé¢ï¼Œä»Reactorè´Ÿè´£Channelç”Ÿå‘½å‘¨æœŸå†…çš„IOäº‹ä»¶ã€‚</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">EventLoopGroup bossGroup &#x3D; new NioEventLoopGroup();</span><br><span class="line">EventLoopGroup workerGroup &#x3D; new NioEventLoopGroup();</span><br><span class="line">ServerBootstrap b &#x3D; new ServerBootstrap();</span><br><span class="line">b.group(bossGroup, workerGroup)</span><br></pre></td></tr></table></figure><p>![image-20211120161838884](/Users/zengqingfeng/Library/Application Support/typora-user-images/image-20211120161838884.png)</p><h4 id="c10k"><a href="#c10k" class="headerlink" title="c10k"></a>c10k</h4><blockquote><p>å®ƒçš„æ„æ€æ˜¯ä¸€å°æœºå™¨è¦ç»´æŠ¤ 1 ä¸‡ä¸ªè¿æ¥ï¼Œå°±è¦åˆ›å»º 1 ä¸‡ä¸ªè¿›ç¨‹æˆ–è€…çº¿ç¨‹ï¼Œé‚£ä¹ˆæ“ä½œç³»ç»Ÿæ˜¯æ— æ³•æ‰¿å—çš„ã€‚</p></blockquote><h4 id="selectã€pollã€epoll"><a href="#selectã€pollã€epoll" class="headerlink" title="selectã€pollã€epoll"></a>selectã€pollã€epoll</h4><table><thead><tr><th></th><th>Select</th><th>Poll</th><th>Poll</th></tr></thead><tbody><tr><td>åº•å±‚å®ç°</td><td>æ•°ç»„</td><td>é“¾è¡¨</td><td>å“ˆå¸Œè¡¨</td></tr><tr><td>I/O</td><td>æ¯æ¬¡è°ƒç”¨çº¿æ€§éå†ã€æ—¶é—´å¤æ‚åº¦O(n)</td><td>æ¯æ¬¡è°ƒç”¨çº¿æ€§éå†ã€æ—¶é—´å¤æ‚åº¦O(n)</td><td>æ—¶é—´é€šçŸ¥æ–¹å¼ã€æ—¶é—´å¤æ‚åº¦O(1)</td></tr><tr><td>æœ€å¤§è¿æ¥æ•°</td><td>1024(x86)ã€2048(x64)</td><td>æ— ä¸Šé™</td><td>æ— ä¸Šé™</td></tr></tbody></table><h4 id="Nettyé€šç”¨æ¨¡å¼ä¸‹NIOå®ç°å¤šè·¯å¤ç”¨å™¨æ˜¯å¦‚ä½•è·¨å¹³å°çš„"><a href="#Nettyé€šç”¨æ¨¡å¼ä¸‹NIOå®ç°å¤šè·¯å¤ç”¨å™¨æ˜¯å¦‚ä½•è·¨å¹³å°çš„" class="headerlink" title="Nettyé€šç”¨æ¨¡å¼ä¸‹NIOå®ç°å¤šè·¯å¤ç”¨å™¨æ˜¯å¦‚ä½•è·¨å¹³å°çš„"></a>Nettyé€šç”¨æ¨¡å¼ä¸‹NIOå®ç°å¤šè·¯å¤ç”¨å™¨æ˜¯å¦‚ä½•è·¨å¹³å°çš„</h4><blockquote><p>nettyåœ¨ä¸åŒå¹³å°å•ç‹¬å®ç°äº†NIOï¼Œæ®è¯´æ€§èƒ½æ›´å¥½ã€‚windows iocp ã€mac kqueue ã€linux epool</p></blockquote><ul><li>Nettyé€šç”¨æ¨¡å¼ä¸€èˆ¬æŒ‡çš„æ˜¯NioEnventLoopGroupã€NioEventLoopã€NioSelectSocketChannelã€NioSocketChannelçš„ä½¿ç”¨åœºæ™¯ä¸‹ï¼Œå®é™…ä¸Šé’ˆå¯¹Linuxå’Œmacå•ç‹¬åšäº†NIOçš„å®ç°ã€‚</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è¯¥æ–¹æ³•åœ¨ä¸åŒçš„å¹³å°ä¸Šè¿”å›ä¸åŒçš„ç±»å‹ã€‚</span></span><br><span class="line">sun.nio.ch.DefaultSelectorProvider.create()</span><br><span class="line">  </span><br><span class="line">  </span><br><span class="line"><span class="keyword">package</span> sun.nio.ch;</span><br><span class="line"><span class="keyword">import</span> java.nio.channels.spi.SelectorProvider;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DefaultSelectorProvider</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="title">DefaultSelectorProvider</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> SelectorProvider <span class="title">create</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="comment">// åœ¨mac/bsdçš„ç¯å¢ƒä¸‹è¿”å›KQueue</span></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> KQueueSelectorProvider();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="Netty-æ˜¯å¦‚ä½•è§£å†³-epoll-ç©ºè½®è¯¢çš„-Bug"><a href="#Netty-æ˜¯å¦‚ä½•è§£å†³-epoll-ç©ºè½®è¯¢çš„-Bug" class="headerlink" title="Netty æ˜¯å¦‚ä½•è§£å†³ epoll ç©ºè½®è¯¢çš„ Bug"></a>Netty æ˜¯å¦‚ä½•è§£å†³ epoll ç©ºè½®è¯¢çš„ Bug</h4><blockquote><p>åœ¨ JDK ä¸­ï¼Œ Epoll çš„å®ç°æ˜¯å­˜åœ¨æ¼æ´çš„ï¼Œå³ä½¿ Selector è½®è¯¢çš„äº‹ä»¶åˆ—è¡¨ä¸ºç©ºï¼ŒNIO çº¿ç¨‹ä¸€æ ·å¯ä»¥è¢«å”¤é†’ï¼Œå¯¼è‡´ CPU 100% å ç”¨ã€‚è¿™å°±æ˜¯è‡­åæ˜­è‘—çš„ JDK epoll ç©ºè½®è¯¢çš„ Bug</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ¯æ¬¡æ‰§è¡Œ Select æ“ä½œä¹‹å‰è®°å½•å½“å‰æ—¶é—´ currentTimeNanosã€‚</span></span><br><span class="line">           <span class="keyword">long</span> time = System.nanoTime();</span><br><span class="line">           <span class="comment">// time - TimeUnit.MILLISECONDS.toNanos(timeoutMillis) &gt;= currentTimeNanosï¼Œ</span></span><br><span class="line">           <span class="comment">// å¦‚æœäº‹ä»¶è½®è¯¢çš„æŒç»­æ—¶é—´å¤§äºç­‰äº timeoutMillisï¼Œé‚£ä¹ˆè¯´æ˜æ˜¯æ­£å¸¸çš„ï¼Œå¦åˆ™è¡¨æ˜é˜»å¡æ—¶é—´å¹¶æœªè¾¾åˆ°é¢„æœŸï¼Œå¯èƒ½è§¦å‘äº†ç©ºè½®è¯¢çš„ Bugã€‚</span></span><br><span class="line">           <span class="keyword">if</span> (time - TimeUnit.MILLISECONDS.toNanos(timeoutMillis) &gt;= currentTimeNanos) &#123;</span><br><span class="line">               <span class="comment">// timeoutMillis elapsed without anything selected.</span></span><br><span class="line">               selectCnt = <span class="number">1</span>;</span><br><span class="line">               <span class="comment">// è®¡æ•°å˜é‡ selectCntã€‚åœ¨æ­£å¸¸æƒ…å†µä¸‹ï¼ŒselectCnt ä¼šé‡ç½®ï¼Œ</span></span><br><span class="line">               <span class="comment">// å¦åˆ™ä¼šå¯¹ selectCnt è‡ªå¢è®¡æ•°ã€‚å½“ selectCnt è¾¾åˆ° SELECTOR_AUTO_REBUILD_THRESHOLDï¼ˆé»˜è®¤512ï¼‰ é˜ˆå€¼æ—¶ï¼Œ</span></span><br><span class="line">               <span class="comment">// ä¼šè§¦å‘é‡å»º Selector å¯¹è±¡ã€‚</span></span><br><span class="line">           &#125; <span class="keyword">else</span> <span class="keyword">if</span> (SELECTOR_AUTO_REBUILD_THRESHOLD &gt; <span class="number">0</span> &amp;&amp;</span><br><span class="line">                   selectCnt &gt;= SELECTOR_AUTO_REBUILD_THRESHOLD) &#123;</span><br><span class="line">               <span class="comment">// The code exists in an extra method to ensure the method is not too big to inline as this</span></span><br><span class="line">               <span class="comment">// branch is not very likely to get hit very frequently.</span></span><br><span class="line">               selector = selectRebuildSelector(selectCnt);</span><br><span class="line">               selectCnt = <span class="number">1</span>;</span><br><span class="line">               <span class="keyword">break</span>;</span><br><span class="line">           &#125;</span><br><span class="line">           currentTimeNanos = time;</span><br></pre></td></tr></table></figure><h4 id="TCP-IPä¸­ç²˜åŒ…ã€åŠåŒ…"><a href="#TCP-IPä¸­ç²˜åŒ…ã€åŠåŒ…" class="headerlink" title="TCP/IPä¸­ç²˜åŒ…ã€åŠåŒ…"></a>TCP/IPä¸­ç²˜åŒ…ã€åŠåŒ…</h4><blockquote><p>TCPæ˜¯æµå¼åè®®ï¼Œæ•°æ®æ˜¯æ— æ¸…æ™°è¾¹ç•Œçš„ã€‚æ‹†åŒ…/ç²˜åŒ…é—®é¢˜çš„å­˜åœ¨ï¼Œæ•°æ®æ¥æ”¶æ–¹å¾ˆéš¾ç•Œå®šæ•°æ®åŒ…çš„è¾¹ç•Œåœ¨å“ªé‡Œï¼Œå¾ˆéš¾è¯†åˆ«å‡ºä¸€ä¸ªå®Œæ•´çš„æ•°æ®åŒ…ã€‚æ‰€ä»¥éœ€è¦æä¾›ä¸€ç§æœºåˆ¶æ¥è¯†åˆ«æ•°æ®åŒ…çš„ç•Œé™ï¼Œè¿™ä¹Ÿæ˜¯è§£å†³æ‹†åŒ…/ç²˜åŒ…çš„å”¯ä¸€æ–¹æ³•ï¼šå®šä¹‰åº”ç”¨å±‚çš„é€šä¿¡åè®®ã€‚</p></blockquote><h5 id="ç²˜åŒ…"><a href="#ç²˜åŒ…" class="headerlink" title="ç²˜åŒ…"></a>ç²˜åŒ…</h5><ul><li>æ•°æ®å‘é€æ–¹æ¯æ¬¡å†™å…¥æ•°æ®å¤§å°å°äºå¥—æ¥å­—ç¼“å­˜åŒºå¤§å°ã€‚åˆå¹¶å‘é€æ•°æ®çš„æ—¶å€™ã€‚</li></ul><h5 id="åŠåŒ…"><a href="#åŠåŒ…" class="headerlink" title="åŠåŒ…"></a>åŠåŒ…</h5><ul><li>å‘é€æ–¹æ—¶å†™å…¥æ•°æ®å¤§å°å°äºå¥—æ¥å­—ç¼“å­˜åŒºå¤§å°ã€‚(å‘é€çš„æ•°æ®å¤§äºTCPåè®®ä¸­MTUæœ€å¤§ä¼ è¾“å•ä½)å¿…é¡»æ‹†åŒ…ã€‚</li></ul><h5 id="å¦‚ä½•è§£å†³"><a href="#å¦‚ä½•è§£å†³" class="headerlink" title="å¦‚ä½•è§£å†³"></a>å¦‚ä½•è§£å†³</h5><blockquote><p>å°è£…æˆå¸§(framing)</p></blockquote><ul><li><p>æ¶ˆæ¯é•¿åº¦å›ºå®š</p><ul><li>æ¯ä¸ªæ•°æ®æŠ¥æ–‡éƒ½éœ€è¦ä¸€ä¸ªå›ºå®šçš„é•¿åº¦ã€‚å½“æ¥æ”¶æ–¹ç´¯è®¡è¯»å–åˆ°å›ºå®šé•¿åº¦çš„æŠ¥æ–‡åï¼Œå°±è®¤ä¸ºå·²ç»è·å¾—ä¸€ä¸ªå®Œæ•´çš„æ¶ˆæ¯ã€‚å½“å‘é€æ–¹çš„æ•°æ®å°äºå›ºå®šé•¿åº¦æ—¶ï¼Œåˆ™éœ€è¦ç©ºä½è¡¥é½ã€‚</li></ul></li><li><p>ç‰¹å®šåˆ†éš”ç¬¦</p><ul><li>å‘é€æŠ¥æ–‡æ—¶å°¾éƒ¨éœ€è¦æ·»åŠ ç‰¹å®šåˆ†éš”ç¬¦ï¼Œæ¨èçš„åšæ³•æ˜¯å°†æ¶ˆæ¯è¿›è¡Œç¼–ç ï¼Œä¾‹å¦‚ base64 ç¼–ç ï¼Œç„¶åå¯ä»¥é€‰æ‹© 64 ä¸ªç¼–ç å­—ç¬¦ä¹‹å¤–çš„å­—ç¬¦ä½œä¸ºç‰¹å®šåˆ†éš”ç¬¦ã€‚Redis åœ¨é€šä¿¡è¿‡ç¨‹ä¸­é‡‡ç”¨çš„å°±æ˜¯æ¢è¡Œåˆ†éš”ç¬¦ <code>\n </code>ã€<code>\r\n</code>ã€‚</li></ul></li><li><p>æ¶ˆæ¯é•¿åº¦ + æ¶ˆæ¯å†…å®¹</p><ul><li>å…ˆè§£æå›ºå®šé•¿åº¦çš„å­—æ®µè·å–é•¿åº¦ï¼Œç„¶åè¯»å–åç»­çš„å†…å®¹ã€‚é•¿åº¦ç†è®ºä¸Šæœ‰é™åˆ¶ï¼Œéœ€è¦æå‰é¢„çŸ¥å¯èƒ½çš„æœ€å¤§é•¿åº¦ã€‚</li></ul></li></ul><h4 id="Netty-å¯¹ä¸‰ç§å¸¸ç”¨å°å¸§æ–¹å¼çš„æ”¯æŒ"><a href="#Netty-å¯¹ä¸‰ç§å¸¸ç”¨å°å¸§æ–¹å¼çš„æ”¯æŒ" class="headerlink" title="Netty å¯¹ä¸‰ç§å¸¸ç”¨å°å¸§æ–¹å¼çš„æ”¯æŒ"></a>Netty å¯¹ä¸‰ç§å¸¸ç”¨å°å¸§æ–¹å¼çš„æ”¯æŒ</h4><blockquote><p>Nettyä¸­è§£å†³ç²˜åŒ…åŠåŒ…çš„ç¼–è§£ç å«åšä¸€æ¬¡è§£ç å™¨ã€‚</p></blockquote><ul><li><p>å›ºå®šé•¿åº¦  <code>FixedLengthFrameDecoder</code> </p></li><li><p>åˆ†éš”ç¬¦   <code>DelimiterBasedFrameDecoder</code></p></li><li><p>å›ºå®šé•¿åº¦å­—æ®µå­˜ä¸ªå†…å®¹çš„é•¿åº¦ä¿¡æ¯ <code>LengthFieldBasedFrameDecoder</code> <code>LengthFieldPrepender</code></p><ul><li>LengthFieldBasedFrameDecoderæŒ‰ç…§æŒ‡å®šçš„åŒ…é•¿åº¦åç§»é‡å¯¹æ¥å—çš„æ•°æ®è¿›è¡Œç¼–ç ã€‚</li></ul><p><img src="https://z201.oss-cn-shanghai.aliyuncs.com/JavaNote/20211123154642.png"></p><ul><li>LengthFieldPrepender åœ¨å“åº”æ•°æ®çš„æ—¶å€™ä»å°è£…æ•°æ®ï¼Œåœ¨æ•°æ®å‰é¢å¢åŠ æ•°æ®çš„é•¿åº¦ã€‚</li></ul><p><img src="https://z201.oss-cn-shanghai.aliyuncs.com/JavaNote/20211123154934.png"></p></li></ul><h4 id="äºŒæ¬¡ç¼–è§£ç æ–¹å¼"><a href="#äºŒæ¬¡ç¼–è§£ç æ–¹å¼" class="headerlink" title="äºŒæ¬¡ç¼–è§£ç æ–¹å¼"></a>äºŒæ¬¡ç¼–è§£ç æ–¹å¼</h4><blockquote><p>Nettyå†…ç½®ç¼–è§£ç å™¨åœ¨å®é™…å·¥ä½œä¸­éœ€è¦äºŒæ¬¡ç¼–è§£ç ï¼Œæ¯”å¦‚æˆ‘ä»¬ä¸šåŠ¡æ•°æ®æ˜¯jsonæ ¼å¼ï¼Œå°±éœ€è¦å°†åŸå§‹æ•°æ®è½¬æ¢æˆç”¨æˆ·æ•°æ®</p></blockquote><ul><li>åœ¨nettyæºç ä¸­å†…ç½®äº†å¾ˆå¤šäºŒæ¬¡è§£ç å™¨javaåºåˆ—åŒ–ã€XMLã€JSONç­‰ç­‰ï¼Œéƒ½åœ¨codecåŒ…ä¸‹ã€‚</li></ul><p><img src="https://z201.oss-cn-shanghai.aliyuncs.com/JavaNote/20211122162837.png"></p><ul><li>æ¯”å¦‚ä½¿ç”¨protobufäºŒæ¬¡è§£ç å™¨</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">ch.pipeline().addLast(<span class="keyword">new</span> ProtobufVarint32FrameDecoder());</span><br><span class="line">ch.pipeline().addLast(<span class="keyword">new</span> ProtobufDecoder(PersonOuterClass.Person.getDefaultInstance()));</span><br><span class="line">ch.pipeline().addLast(<span class="keyword">new</span> ProtobufVarint32LengthFieldPrepender());</span><br><span class="line">ch.pipeline().addLast(<span class="keyword">new</span> ProtobufEncoder());</span><br></pre></td></tr></table></figure><h4 id="Linuxç³»ç»Ÿå‚æ•°"><a href="#Linuxç³»ç»Ÿå‚æ•°" class="headerlink" title="Linuxç³»ç»Ÿå‚æ•°"></a>Linuxç³»ç»Ÿå‚æ•°</h4><ul><li>ä¿®æ”¹linuxå¯¹å•ä¸€è¿›ç¨‹æ‰“å¼€çš„æ–‡ä»¶å¥æŸ„æ•°é‡é™åˆ¶<ul><li><code>ulimit -n [xxx]</code>å°½é‡ä¸è¦åšä¸´æ—¶çš„è®¾ç½®ã€‚</li></ul></li></ul><h4 id="æœ‰TCPçš„keepaliveï¼Œä¸ºä»€ä¹ˆè¿˜éœ€è¦åº”ç”¨å±‚çš„keepalive"><a href="#æœ‰TCPçš„keepaliveï¼Œä¸ºä»€ä¹ˆè¿˜éœ€è¦åº”ç”¨å±‚çš„keepalive" class="headerlink" title="æœ‰TCPçš„keepaliveï¼Œä¸ºä»€ä¹ˆè¿˜éœ€è¦åº”ç”¨å±‚çš„keepalive"></a>æœ‰TCPçš„keepaliveï¼Œä¸ºä»€ä¹ˆè¿˜éœ€è¦åº”ç”¨å±‚çš„keepalive</h4><blockquote><p>TCPä¸­çš„keepaliveé»˜è®¤æ˜¯å…³é—­ï¼Œå› æ­¤æ¢æµ‹åŒ…åœ¨ä¼ é€’ä¸­å¯èƒ½ä¸¢å¤±ï¼Œé»˜è®¤çš„è¶…æ—¶æ—¶é—´å¤ªé•¿ï¼Œé»˜è®¤æ˜¯7200+9*75ç§’ï¼Œä¹Ÿå°±æ˜¯2ä¸ªå¤šå°æ—¶ã€‚TCPæ˜¯ä¸€ä¸ªä¼ è¾“å±‚çš„åè®®ï¼Œä¼ è¾“å±‚çš„æ•°æ®ç•…é€šå¹¶ä¸ä¸€å®šæ“ä½œç³»ç»Ÿè¿›ç¨‹æ‰€å¯¹åº”çš„æœåŠ¡ç•…é€šã€‚</p></blockquote>]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;Nettyæ˜¯ä¸€æ¬¾ç”¨äºå¿«é€Ÿå¼€å‘é«˜æ€§èƒ½çš„ç½‘ç»œåº”ç”¨ç¨‹åºçš„Javaæ¡†æ¶ï¼Œæ­£æ˜¯å› ä¸ºæœ‰ Netty çš„å­˜åœ¨ï¼Œç½‘ç»œç¼–ç¨‹é¢†åŸŸ Java æ‰å¾—ä»¥ä¸ C++ å¹¶è‚©è€Œç«‹ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;ul&gt;
&lt;li&gt;Netty å®˜ç½‘ç»™å‡ºäº†æœ‰å…³ Netty çš„æ•´ä½“åŠŸèƒ½æ¨¡å—ç»“æ„&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img src=&quot;https://z201.oss-cn-shanghai.aliyuncs.com/JavaNote/20211116220629.png&quot;&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Coreæ ¸å¿ƒå±‚&lt;/li&gt;
&lt;/ul&gt;
&lt;blockquote&gt;
&lt;p&gt;æä¾›åº•å±‚ç½‘ç»œé€šä¿¡æŠ½è±¡å’Œå®ç°ï¼Œå…¶ä¸­åŒ…æ‹¬äº†å¯æ‰©å±•çš„æ—¶é—´æ¨¡å‹ã€é€šä¿¡APIã€æ”¯æŒé›¶æ‹·è´çš„bufç­‰ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;ul&gt;
&lt;li&gt;Protocol Support åè®®æ”¯æŒå±‚&lt;/li&gt;
&lt;/ul&gt;
&lt;blockquote&gt;
&lt;p&gt;åè®®æ”¯æŒå±‚åŸºæœ¬ä¸Šè¦†ç›–äº†ä¸»æµåè®®çš„ç¼–è§£ç å®ç°ï¼Œæ¯”å¦‚HTTPã€SSLã€WebSocket&lt;/p&gt;
&lt;/blockquote&gt;
&lt;ul&gt;
&lt;li&gt;Transport Service ä¼ è¾“æœåŠ¡å±‚&lt;/li&gt;
&lt;/ul&gt;
&lt;blockquote&gt;
&lt;p&gt;ä¼ è¾“æœåŠ¡å±‚æä¾›äº†ç½‘ç»œä¼ è¾“èƒ½åŠ›çš„å®šä¹‰å’Œå®ç°æ–¹æ³•ï¼Œæ”¯æŒ Socketã€HTTP éš§é“ç­‰ã€‚Netty å¯¹ TCPã€UDP ç­‰æ•°æ®ä¼ è¾“åšäº†æŠ½è±¡å’Œå°è£…&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id=&quot;Nettyæµç¨‹&quot;&gt;&lt;a href=&quot;#Nettyæµç¨‹&quot; class=&quot;headerlink&quot; title=&quot;Nettyæµç¨‹&quot;&gt;&lt;/a&gt;Nettyæµç¨‹&lt;/h3&gt;&lt;blockquote&gt;
&lt;p&gt;ä»åŠŸèƒ½ä¸Šç†è§£é¡ºåº&lt;/p&gt;
&lt;/blockquote&gt;
&lt;ul&gt;
&lt;li&gt;å¯åŠ¨æœåŠ¡ -&amp;gt; æ„å»ºè¿æ¥ -&amp;gt; æ¥å—æ•°æ® -&amp;gt; ä¸šåŠ¡å¤„ç† -&amp;gt; å‘é€æ•°æ® -&amp;gt; æ–­å¼€è¿æ¥ -&amp;gt; å…³é—­æœåŠ¡&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&quot;æ¡ˆä¾‹&quot;&gt;&lt;a href=&quot;#æ¡ˆä¾‹&quot; class=&quot;headerlink&quot; title=&quot;æ¡ˆä¾‹&quot;&gt;&lt;/a&gt;æ¡ˆä¾‹&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;åˆå§‹åŒ–çº¿ç¨‹æ± &lt;/li&gt;
&lt;li&gt;åˆå§‹åŒ–channel&lt;/li&gt;
&lt;li&gt;ç»‘å®šç«¯å£å¹¶å¯åŠ¨&lt;/li&gt;
&lt;/ul&gt;
&lt;figure class=&quot;highlight java&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;34&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;35&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;36&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;37&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;38&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;39&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;40&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;41&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;42&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;43&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;44&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;45&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;46&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;47&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;48&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;49&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;50&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;51&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;52&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;53&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;54&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;55&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;56&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;57&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;58&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;59&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;60&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;61&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;62&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;63&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;64&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;65&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;66&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;67&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;68&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;69&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;70&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;71&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;72&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;73&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;74&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;75&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;76&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;77&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;78&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;meta&quot;&gt;@Sharable&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;class&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;EchoServerHandler&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;extends&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;ChannelInboundHandlerAdapter&lt;/span&gt; &lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;meta&quot;&gt;@Override&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;channelRead&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(ChannelHandlerContext ctx, Object msg)&lt;/span&gt; &lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        ctx.write(msg);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;meta&quot;&gt;@Override&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;channelReadComplete&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(ChannelHandlerContext ctx)&lt;/span&gt; &lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        ctx.flush();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;meta&quot;&gt;@Override&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;exceptionCaught&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(ChannelHandlerContext ctx, Throwable cause)&lt;/span&gt; &lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;comment&quot;&gt;// Close the connection when an exception is raised.&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        cause.printStackTrace();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        ctx.close();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;/**&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt; * Echoes back any received data from a client.&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt; */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;class&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;EchoServer&lt;/span&gt; &lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;boolean&lt;/span&gt; SSL = System.getProperty(&lt;span class=&quot;string&quot;&gt;&quot;ssl&quot;&lt;/span&gt;) != &lt;span class=&quot;keyword&quot;&gt;null&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;int&lt;/span&gt; PORT = Integer.parseInt(System.getProperty(&lt;span class=&quot;string&quot;&gt;&quot;port&quot;&lt;/span&gt;, &lt;span class=&quot;string&quot;&gt;&quot;8007&quot;&lt;/span&gt;));&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;main&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(String[] args)&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;throws&lt;/span&gt; Exception &lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;comment&quot;&gt;// Configure SSL.&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;final&lt;/span&gt; SslContext sslCtx;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (SSL) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            SelfSignedCertificate ssc = &lt;span class=&quot;keyword&quot;&gt;new&lt;/span&gt; SelfSignedCertificate();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            sslCtx = SslContextBuilder.forServer(ssc.certificate(), ssc.privateKey()).build();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125; &lt;span class=&quot;keyword&quot;&gt;else&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            sslCtx = &lt;span class=&quot;keyword&quot;&gt;null&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;comment&quot;&gt;// Configure the server.&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;comment&quot;&gt;// åœ¨å®˜æ–¹çš„exampleä¸­é»˜è®¤æ˜¯Reactorä¸»ä»å¤šçº¿ç¨‹æ¨¡å¼&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;comment&quot;&gt;// 1.é…ç½®çº¿ç¨‹æ± &lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        EventLoopGroup bossGroup = &lt;span class=&quot;keyword&quot;&gt;new&lt;/span&gt; NioEventLoopGroup(&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        EventLoopGroup workerGroup = &lt;span class=&quot;keyword&quot;&gt;new&lt;/span&gt; NioEventLoopGroup();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;final&lt;/span&gt; EchoServerHandler serverHandler = &lt;span class=&quot;keyword&quot;&gt;new&lt;/span&gt; EchoServerHandler();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;try&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            ServerBootstrap b = &lt;span class=&quot;keyword&quot;&gt;new&lt;/span&gt; ServerBootstrap();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            b.group(bossGroup, workerGroup)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;             .channel(NioServerSocketChannel&lt;span class=&quot;class&quot;&gt;.&lt;span class=&quot;keyword&quot;&gt;class&lt;/span&gt;) // 2.åˆå§‹åŒ–&lt;span class=&quot;title&quot;&gt;channel&lt;/span&gt;ç±»å‹&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;class&quot;&gt;             .&lt;span class=&quot;title&quot;&gt;option&lt;/span&gt;(&lt;span class=&quot;title&quot;&gt;ChannelOption&lt;/span&gt;.&lt;span class=&quot;title&quot;&gt;SO_BACKLOG&lt;/span&gt;, 100) // 2.1.è®¾ç½®&lt;span class=&quot;title&quot;&gt;channel&lt;/span&gt;å‚æ•°&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;class&quot;&gt;             .&lt;span class=&quot;title&quot;&gt;handler&lt;/span&gt;(&lt;span class=&quot;title&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;LoggingHandler&lt;/span&gt;(&lt;span class=&quot;title&quot;&gt;LogLevel&lt;/span&gt;.&lt;span class=&quot;title&quot;&gt;INFO&lt;/span&gt;))&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;class&quot;&gt;              // æ³¨å†Œ&lt;span class=&quot;title&quot;&gt;channelhandler&lt;/span&gt;ï¼Œåœ¨&lt;span class=&quot;title&quot;&gt;netty&lt;/span&gt;ä¸­é€šè¿‡&lt;span class=&quot;title&quot;&gt;ChannelPipeline&lt;/span&gt; å»æ³¨å†Œå¤šä¸ª &lt;span class=&quot;title&quot;&gt;ChannelHandler&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;class&quot;&gt;             .&lt;span class=&quot;title&quot;&gt;childHandler&lt;/span&gt;(&lt;span class=&quot;title&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;ChannelInitializer&lt;/span&gt;&amp;lt;&lt;span class=&quot;title&quot;&gt;SocketChannel&lt;/span&gt;&amp;gt;() &lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                 &lt;span class=&quot;meta&quot;&gt;@Override&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                 &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;initChannel&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(SocketChannel ch)&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;throws&lt;/span&gt; Exception &lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                     ChannelPipeline p = ch.pipeline();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                     &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (sslCtx != &lt;span class=&quot;keyword&quot;&gt;null&lt;/span&gt;) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                         p.addLast(sslCtx.newHandler(ch.alloc()));&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                     &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                     &lt;span class=&quot;comment&quot;&gt;//p.addLast(new LoggingHandler(LogLevel.INFO));&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                     p.addLast(serverHandler);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                 &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;             &amp;#125;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;comment&quot;&gt;// Start the server. &lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;comment&quot;&gt;// 3.å¯åŠ¨ é€šè¿‡bind() æ–¹æ³•ä¼šçœŸæ­£è§¦å‘å¯åŠ¨ï¼Œsync() æ–¹æ³•åˆ™ä¼šé˜»å¡&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            ChannelFuture f = b.bind(PORT).sync();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;comment&quot;&gt;// Wait until the server socket is closed.&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            f.channel().closeFuture().sync();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125; &lt;span class=&quot;keyword&quot;&gt;finally&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;comment&quot;&gt;// Shut down all event loops to terminate all threads.&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            bossGroup.shutdownGracefully();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            workerGroup.shutdownGracefully();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
    
    </summary>
    
    
      <category term="Netty" scheme="https://z201.cn/categories/Netty/"/>
    
    
      <category term="Netty" scheme="https://z201.cn/tags/Netty/"/>
    
      <category term="NIO" scheme="https://z201.cn/tags/NIO/"/>
    
      <category term="IO" scheme="https://z201.cn/tags/IO/"/>
    
      <category term="Reactor" scheme="https://z201.cn/tags/Reactor/"/>
    
  </entry>
  
  <entry>
    <title>Jenkins-local-deployment-level</title>
    <link href="https://z201.cn/2021/02/21/Jenkins-local-deployment-level/"/>
    <id>https://z201.cn/2021/02/21/Jenkins-local-deployment-level/</id>
    <published>2021-02-21T06:40:48.000Z</published>
    <updated>2021-11-23T15:43:02.635Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>æ•´ç†ä¸‹Jenkinsæœ¬åœ°éƒ¨ç½²ç¨‹åºçš„è¿‡ç¨‹ã€‚</p></blockquote><ul><li><p>åœ¨å¼€å‘é˜¶æ®µï¼Œè®¸å¤šç¼–è¯‘å·¥å…·ä¼šå°†æˆ‘ä»¬çš„æºç ç¼–è¯‘å¯ä½¿ç”¨çš„æ–‡ä»¶ã€‚ä¾‹å¦‚ <code>vue-cli</code> çš„é¡¹ç›®ä¼šè¢« <code>webpack</code> æ‰“åŒ…ç¼–è¯‘ä¸ºæµè§ˆå™¨çš„æ–‡ä»¶ï¼Œ<code>Java</code> é¡¹ç›®ä¼šè¢«ç¼–è¯‘ä¸º <code>.class/jar</code> æ–‡ä»¶ä»¥ä¾›æœåŠ¡å™¨ä½¿ç”¨ã€‚</p><ol><li><p>å¼€å‘äººå‘˜å°†æºä»£ç ï¼Œç»è¿‡ç¼–è¯‘ã€å‹ç¼©ç­‰ä¸€ç³»åˆ—æµç¨‹æ‰“åŒ…</p></li><li><p>ä¸Šä¼ åˆ°æœåŠ¡å™¨ã€‚</p></li><li><p>åœ¨æœåŠ¡å™¨å°†ç¼–è¯‘åçš„æ–‡ä»¶ï¼Œæ‰‹åŠ¨å¯ç”¨çš„å®¹å™¨æœåŠ¡å†…ï¼ˆä¾‹å¦‚ <code>Nginxï¼ŒTomcatï¼ŒApache</code> ç­‰æœåŠ¡ï¼‰</p></li></ol></li></ul><h3 id="å•æœºéƒ¨ç½²"><a href="#å•æœºéƒ¨ç½²" class="headerlink" title="å•æœºéƒ¨ç½²"></a>å•æœºéƒ¨ç½²</h3><blockquote><p>åœ¨jenkinsæ‰€åœ¨çš„æœºå™¨ä¸Šéƒ¨ç½²ç¨‹åº</p></blockquote><ol><li><a href="https://z201.cn/2021/05/25/Centos7-jenkins%E9%83%A8%E7%BD%B2/">éƒ¨ç½²jenkins</a>å¹¶é…ç½®ç¯å¢ƒ</li><li>è®¾ç½®jenkins-credentials (åç»­ç”¨äºä»gitä»“åº“ä¸­è·å–ä»£ç )</li><li>åˆ›å»ºä»»åŠ¡<ol><li>è®¾ç½®ä»“åº“åœ°å€</li><li>è®¾ç½®ç¨‹åºéƒ¨ç½²shellè„šæœ¬</li></ol></li></ol><ul><li><p>jenkins shell</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">mvn clean install -Dmaven.test.skip=true</span><br><span class="line">cp x x x/target/xxx-1.0.0-SNAPSHOT.jar /opt/xxx/upgrade</span><br><span class="line">cd /opt/xxx</span><br><span class="line">BUILD_ID=dontKillMe sh xxx.sh</span><br></pre></td></tr></table></figure></li><li><p>ç¼–å†™ç¨‹åºè¿è¡Œshellè„šæœ¬ã€‚</p></li><li><p>éƒ¨ç½²java</p></li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">!/bin/bash</span></span><br><span class="line">app=xxx</span><br><span class="line">appName=$&#123;app&#125;-1.0.0-SNAPSHOT</span><br><span class="line">projPath=/opt/xxx</span><br><span class="line">upgradePath=$&#123;projPath&#125;/upgrade</span><br><span class="line">backPath=$&#123;projPath&#125;/backup</span><br><span class="line">logFile=$&#123;projPath&#125;/data/logs/$&#123;app&#125;.log</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> æ£€æŸ¥å‡çº§æ–‡ä»¶æ˜¯å¦å­˜åœ¨</span></span><br><span class="line">echo "checking upgrade file..."</span><br><span class="line">if [ ! -f $&#123;upgradePath&#125;/$&#123;appName&#125;.jar ]; then</span><br><span class="line">    echo "cann't found file $&#123;upgradePath&#125;/$&#123;appName&#125;.jar!"</span><br><span class="line">    exit</span><br><span class="line">fi</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> ç»“æŸè¿›ç¨‹</span></span><br><span class="line">pid=`ps aux | grep $&#123;projPath&#125;/$&#123;appName&#125;.jar | grep -v grep | grep -v kill | awk '&#123;print $2&#125;'`</span><br><span class="line">if [ $&#123;pid&#125; ]; then</span><br><span class="line">    echo "kill $&#123;appName&#125;!"</span><br><span class="line">    kill -9 $pid</span><br><span class="line">fi</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> å¤‡ä»½åŸå‡çº§æ–‡ä»¶,å¦‚æœå­˜åœ¨çš„è¯</span></span><br><span class="line">if [ -f $&#123;projPath&#125;/$&#123;appName&#125;.jar ]; then</span><br><span class="line">    timeStr=`date +%Y%m%d%H%M%S`</span><br><span class="line">    mv $&#123;projPath&#125;/$&#123;appName&#125;.jar $&#123;backPath&#125;/$&#123;appName&#125;.jar.bak_$&#123;timeStr&#125;</span><br><span class="line">    echo "load $&#123;appName&#125; success!"</span><br><span class="line">    echo "backup $&#123;appName&#125; success!"</span><br><span class="line">fi</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> æ‹·è´å‡çº§æ–‡ä»¶</span></span><br><span class="line">echo "copy $&#123;appName&#125;.jar..."</span><br><span class="line">cp $&#123;upgradePath&#125;/$&#123;appName&#125;.jar $&#123;projPath&#125;/$&#123;appName&#125;.jar</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> å¯åŠ¨è¿›ç¨‹</span></span><br><span class="line">echo "start $&#123;appName&#125;..."</span><br><span class="line">nohup java -Djava.security.egd=file:/dev/./urandom -Xms512m -Xmx512m -XX:MetaspaceSize=256m -XX:MaxMetaspaceSize=256m -jar $&#123;projPath&#125;/$&#123;appName&#125;.jar --spring.profiles.active=test &gt;/dev/null 2&gt;&amp;1 &amp;</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> æŸ¥çœ‹æ—¥å¿—</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> åˆ¤æ–­å½“å¤©æ—¥å¿—æ–‡ä»¶æ˜¯å¦å­˜åœ¨</span></span><br><span class="line">if [ ! -f $&#123;logFile&#125; ]; then</span><br><span class="line">    # æ–‡ä»¶ä¸å­˜åœ¨åˆ™åˆ›å»ºæ–‡ä»¶ï¼Œå†æ‰§è¡Œtailå‘½ä»¤</span><br><span class="line">    touch $&#123;logFile&#125;</span><br><span class="line">fi</span><br><span class="line">echo "tail -f $&#123;logFile&#125;"</span><br></pre></td></tr></table></figure><ul><li>éƒ¨ç½²vue</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">!/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> git revert</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> git restore .</span></span><br><span class="line"></span><br><span class="line">applicationPath=/opt/view/xxxx</span><br><span class="line"></span><br><span class="line">echo 'delete old files...'</span><br><span class="line">rm -rf $&#123;applicationPath&#125;/*</span><br><span class="line"></span><br><span class="line">echo 'copy files after npm build!'</span><br><span class="line">cp -rf dist/* $&#123;applicationPath&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;blockquote&gt;
&lt;p&gt;æ•´ç†ä¸‹Jenkinsæœ¬åœ°éƒ¨ç½²ç¨‹åºçš„è¿‡ç¨‹ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;åœ¨å¼€å‘é˜¶æ®µï¼Œè®¸å¤šç¼–è¯‘å·¥å…·ä¼šå°†æˆ‘ä»¬çš„æºç ç¼–è¯‘å¯ä½¿ç”¨çš„æ–‡ä»¶ã€‚ä¾‹å¦‚ &lt;code&gt;vue-cli&lt;/code&gt; çš„é¡¹ç›®ä¼šè¢« &lt;code&gt;webpack&lt;/
      
    
    </summary>
    
    
      <category term="å®è·µ" scheme="https://z201.cn/categories/%E5%AE%9E%E8%B7%B5/"/>
    
    
      <category term="å·¥ç¨‹åŒ–" scheme="https://z201.cn/tags/%E5%B7%A5%E7%A8%8B%E5%8C%96/"/>
    
  </entry>
  
  <entry>
    <title>Macå®‰è£…neo4jå’Œjupyter</title>
    <link href="https://z201.cn/2021/02/19/Mac%E5%AE%89%E8%A3%85neo4j%E5%92%8Cjupyter/"/>
    <id>https://z201.cn/2021/02/19/Mac%E5%AE%89%E8%A3%85neo4j%E5%92%8Cjupyter/</id>
    <published>2021-02-18T16:39:21.000Z</published>
    <updated>2021-10-15T03:05:33.438Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>å‡†å¤‡å­¦ä¹ ä¸‹neo4jè®°å½•åœ¨macä¸‹å®‰è£…neo4jçš„å‘ã€‚</p></blockquote><h2 id="neo4jå®˜ç½‘ç½‘ç«™ä¸‹è½½å¤±è´¥"><a href="#neo4jå®˜ç½‘ç½‘ç«™ä¸‹è½½å¤±è´¥" class="headerlink" title="neo4jå®˜ç½‘ç½‘ç«™ä¸‹è½½å¤±è´¥"></a>neo4jå®˜ç½‘ç½‘ç«™ä¸‹è½½å¤±è´¥</h2><blockquote><p>å›½å†…åªèƒ½ä»é•œåƒåœ°å€ä¸‹è½½</p></blockquote><p><a href="http://doc.we-yun.com:1008/" target="_blank" rel="noopener">http://doc.we-yun.com:1008/</a> </p><h2 id="é…ç½®jdk11"><a href="#é…ç½®jdk11" class="headerlink" title="é…ç½®jdk11"></a>é…ç½®jdk11</h2><blockquote><p>å¯ä»¥æŸ¥çœ‹æˆ‘ä¸Šé¢å†…å®¹å®ç”¨Jenvç®¡ç†å¤šä¸ªç‰ˆæœ¬ã€‚</p></blockquote><h2 id="å¯åŠ¨neo4j"><a href="#å¯åŠ¨neo4j" class="headerlink" title="å¯åŠ¨neo4j"></a>å¯åŠ¨neo4j</h2><blockquote><p>ä¸‹è½½å®Œæˆåè§£å‹</p></blockquote><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> å¯åŠ¨</span></span><br><span class="line">./neo4j  start</span><br><span class="line"><span class="meta">#</span><span class="bash"> å…³é—­</span></span><br><span class="line">./neo4j  stop</span><br></pre></td></tr></table></figure><h2 id="neo4jç•Œé¢"><a href="#neo4jç•Œé¢" class="headerlink" title="neo4jç•Œé¢"></a>neo4jç•Œé¢</h2><ul><li>åœ¨æµè§ˆå™¨ä¸­è¾“å…¥localhost:7474</li><li>åˆå§‹ç”¨æˆ·åã€å¯†ç å‡ä¸ºneo4jï¼Œ ç¬¬ä¸€æ¬¡ç™»å½•éœ€è¦ä¿®æ”¹å¯†ç </li></ul><h2 id="å®‰è£…jupyter"><a href="#å®‰è£…jupyter" class="headerlink" title="å®‰è£…jupyter"></a>å®‰è£…jupyter</h2><blockquote><p>æ³¨æ„æå‰å®‰è£…pythonç¯å¢ƒ</p></blockquote><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">pip install jupyter notebook -i http://mirrors.aliyun.com/pypi/simple/ --trusted-host=mirrors.aliyun.com</span><br><span class="line"><span class="meta">#</span><span class="bash"> æ£€æŸ¥ç‰ˆæœ¬</span></span><br><span class="line">jupyter --version</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;blockquote&gt;
&lt;p&gt;å‡†å¤‡å­¦ä¹ ä¸‹neo4jè®°å½•åœ¨macä¸‹å®‰è£…neo4jçš„å‘ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&quot;neo4jå®˜ç½‘ç½‘ç«™ä¸‹è½½å¤±è´¥&quot;&gt;&lt;a href=&quot;#neo4jå®˜ç½‘ç½‘ç«™ä¸‹è½½å¤±è´¥&quot; class=&quot;headerlink&quot; title=&quot;neo4
      
    
    </summary>
    
    
      <category term="å®è·µ" scheme="https://z201.cn/categories/%E5%AE%9E%E8%B7%B5/"/>
    
    
      <category term="Neo4j" scheme="https://z201.cn/tags/Neo4j/"/>
    
      <category term="Jupiter" scheme="https://z201.cn/tags/Jupiter/"/>
    
  </entry>
  
  <entry>
    <title>Macä¸‹OpenJdk11-JavaFxå¼€å‘ç¯å¢ƒé…ç½®</title>
    <link href="https://z201.cn/2021/02/15/Mac%E4%B8%8BOpenJdk11-JavaFx%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE/"/>
    <id>https://z201.cn/2021/02/15/Mac%E4%B8%8BOpenJdk11-JavaFx%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE/</id>
    <published>2021-02-14T19:12:07.000Z</published>
    <updated>2021-11-21T07:37:26.768Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>OpenJdk 11 ç¯å¢ƒä¸‹JavaFxå¼€å‘ç¯å¢ƒè®¾ç½®</p></blockquote><ul><li><a href="https://www.coder.work/article/884639" target="_blank" rel="noopener">https://www.coder.work/article/884639</a></li><li><a href="https://stackoverflow.com/questions/54291958/javafx-11-illegalaccesserror-when-creating-label" target="_blank" rel="noopener">https://stackoverflow.com/questions/54291958/javafx-11-illegalaccesserror-when-creating-label</a></li><li><a href="https://gluonhq.com/products/javafx/" target="_blank" rel="noopener">https://gluonhq.com/products/javafx/</a></li></ul><h2 id="pomä¾èµ–"><a href="#pomä¾èµ–" class="headerlink" title="pomä¾èµ–"></a>pomä¾èµ–</h2><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.openjfx<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>javafx-controls<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>11<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.openjfx<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>javafx-fxml<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>11<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="ideaè®¾ç½®"><a href="#ideaè®¾ç½®" class="headerlink" title="ideaè®¾ç½®"></a>ideaè®¾ç½®</h3><blockquote><p>ä¸‹è½½javafxç‰ˆæœ¬ï¼Œç„¶åå¼•å…¥ä¾èµ–ã€‚é¡¹ç›®libä¸­å¼•å…¥ã€‚å¯åŠ¨çš„æ—¶å€™åœ¨vmä¸­æ·»åŠ å¯åŠ¨å‚æ•°</p></blockquote><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">--module-path</span><br><span class="line"><span class="meta">/Users/$</span><span class="bash">USER/word/libhome/javafx-sdk-11.0.2/lib</span></span><br><span class="line">--add-modules</span><br><span class="line">javafx.controls</span><br><span class="line">--add-modules</span><br><span class="line">javafx.base</span><br><span class="line">--add-modules</span><br><span class="line">javafx.graphics</span><br><span class="line">--add-modules</span><br><span class="line">javafx.fxml</span><br><span class="line">--add-modules</span><br><span class="line">javafx.media</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;blockquote&gt;
&lt;p&gt;OpenJdk 11 ç¯å¢ƒä¸‹JavaFxå¼€å‘ç¯å¢ƒè®¾ç½®&lt;/p&gt;
&lt;/blockquote&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://www.coder.work/article/884639&quot; target=&quot;_blank&quot; rel=&quot;n
      
    
    </summary>
    
    
      <category term="å®è·µ" scheme="https://z201.cn/categories/%E5%AE%9E%E8%B7%B5/"/>
    
    
      <category term="openJdk11" scheme="https://z201.cn/tags/openJdk11/"/>
    
  </entry>
  
  <entry>
    <title>Macä½¿ç”¨Jenvç®¡ç†å¤šç‰ˆæœ¬Jdk</title>
    <link href="https://z201.cn/2021/02/15/Mac%E4%BD%BF%E7%94%A8Jenv%E7%AE%A1%E7%90%86%E5%A4%9A%E7%89%88%E6%9C%ACJdk/"/>
    <id>https://z201.cn/2021/02/15/Mac%E4%BD%BF%E7%94%A8Jenv%E7%AE%A1%E7%90%86%E5%A4%9A%E7%89%88%E6%9C%ACJdk/</id>
    <published>2021-02-14T17:09:36.000Z</published>
    <updated>2021-09-21T14:50:27.796Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>ç®€å•è®°å½•ä¸‹macä¸‹å¤šç‰ˆæœ¬jdkç®¡ç† </p></blockquote><ul><li><a href="https://adoptopenjdk.net/" target="_blank" rel="noopener">https://adoptopenjdk.net/</a></li><li><a href="https://www.jianshu.com/p/1a147d5515f0" target="_blank" rel="noopener">https://www.jianshu.com/p/1a147d5515f0</a></li></ul><h2 id="æ£€æŸ¥ç¯å¢ƒ"><a href="#æ£€æŸ¥ç¯å¢ƒ" class="headerlink" title="æ£€æŸ¥ç¯å¢ƒ"></a>æ£€æŸ¥ç¯å¢ƒ</h2><h3 id="æŸ¥çœ‹å½“å‰å®‰è£…çš„jdkç‰ˆæœ¬"><a href="#æŸ¥çœ‹å½“å‰å®‰è£…çš„jdkç‰ˆæœ¬" class="headerlink" title="æŸ¥çœ‹å½“å‰å®‰è£…çš„jdkç‰ˆæœ¬"></a>æŸ¥çœ‹å½“å‰å®‰è£…çš„jdkç‰ˆæœ¬</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">/usr/libexec/java_home -V</span><br><span class="line"><span class="meta">#</span><span class="bash"> å¦‚æœæœ‰å®‰è£…è¿‡jdkç‰ˆæœ¬è¿™é‡Œä¼šè¾“å‡ºä¿¡æ¯</span></span><br></pre></td></tr></table></figure><h3 id="ä½¿ç”¨brew-å®‰è£…jenv"><a href="#ä½¿ç”¨brew-å®‰è£…jenv" class="headerlink" title="ä½¿ç”¨brew å®‰è£…jenv"></a>ä½¿ç”¨brew å®‰è£…jenv</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">brew install jenv</span><br><span class="line"><span class="meta">#</span><span class="bash">æ£€æŸ¥</span></span><br><span class="line">jenv doctor </span><br><span class="line"><span class="meta">#</span><span class="bash"> åˆšå®‰è£…ä¼šæç¤ºå¾ˆå¤šä¿¡æ¯</span></span><br></pre></td></tr></table></figure><h3 id="åˆå§‹åŒ–jenv"><a href="#åˆå§‹åŒ–jenv" class="headerlink" title="åˆå§‹åŒ–jenv"></a>åˆå§‹åŒ–jenv</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">brew install jenv</span><br><span class="line">jenv init -</span><br><span class="line">echo 'eval "$(jenv init -)"' &gt;&gt; ~/.bash_profile</span><br><span class="line">echo 'eval "$(jenv init -)"' &gt;&gt; ~/.zprofile</span><br><span class="line">jenv add &lt;path-to-java8-Home-Dir&gt; # è¿™é‡Œä»/usr/libexec/java_home -V è·å–javaHome</span><br></pre></td></tr></table></figure><h3 id="åˆ‡æ¢jdk"><a href="#åˆ‡æ¢jdk" class="headerlink" title="åˆ‡æ¢jdk"></a>åˆ‡æ¢jdk</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">âœ  ~ jenv versions</span><br><span class="line">* system (set by /Users/zengqingfeng/.jenv/version)</span><br><span class="line">  1.8</span><br><span class="line">  1.8.0.275</span><br><span class="line">  openjdk64-1.8.0.275</span><br><span class="line">  </span><br><span class="line">âœ  ~ jenv local system # åˆ‡æ¢ç‰ˆæœ¬</span><br></pre></td></tr></table></figure><h3 id="å¯èƒ½å‡ºç°çš„é—®é¢˜"><a href="#å¯èƒ½å‡ºç°çš„é—®é¢˜" class="headerlink" title="å¯èƒ½å‡ºç°çš„é—®é¢˜"></a>å¯èƒ½å‡ºç°çš„é—®é¢˜</h3><ul><li>ä½¿ç”¨ jenv è¿‡ç¨‹å¯èƒ½ä¼šå‘ç°ï¼Œå½“åˆ‡æ¢ JDK ç‰ˆæœ¬ä¹‹åï¼Œ <code>${JAVA_HOME}</code> ç¯å¢ƒå˜é‡æ²¡æœ‰æ”¹å˜ï¼Œè¿˜æ˜¯ä¸Šä¸€ä¸ª JDK ç‰ˆæœ¬é…ç½®ã€‚</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">è¿™æ—¶å¯ä»¥è¿è¡Œ exec $SHELL -l ï¼Œ $&#123;JAVA_HOME&#125; å°†ä¼šå˜æˆå½“å‰ç‰ˆæœ¬ã€‚</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;blockquote&gt;
&lt;p&gt;ç®€å•è®°å½•ä¸‹macä¸‹å¤šç‰ˆæœ¬jdkç®¡ç† &lt;/p&gt;
&lt;/blockquote&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://adoptopenjdk.net/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;https://ado
      
    
    </summary>
    
    
      <category term="å®è·µ" scheme="https://z201.cn/categories/%E5%AE%9E%E8%B7%B5/"/>
    
    
      <category term="openJdk11" scheme="https://z201.cn/tags/openJdk11/"/>
    
      <category term="jenv" scheme="https://z201.cn/tags/jenv/"/>
    
  </entry>
  
  <entry>
    <title>æŸ¥ç¼ºè¡¥æ¼-ç½‘ç»œåè®®</title>
    <link href="https://z201.cn/2021/01/02/%E6%9F%A5%E7%BC%BA%E8%A1%A5%E6%BC%8F-%E7%BD%91%E7%BB%9C%E5%8D%8F%E8%AE%AE/"/>
    <id>https://z201.cn/2021/01/02/%E6%9F%A5%E7%BC%BA%E8%A1%A5%E6%BC%8F-%E7%BD%91%E7%BB%9C%E5%8D%8F%E8%AE%AE/</id>
    <published>2021-01-01T16:00:01.000Z</published>
    <updated>2021-12-13T10:24:55.282Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>æœ¬ç« æ˜¯æ•´ç†çŸ¥è¯†å†…å®¹ï¼Œä¸ºå¼ºåŒ–çŸ¥è¯†é•¿æœŸæ›´æ–°ã€‚</p></blockquote><h3 id="ç½‘ç»œåè®®"><a href="#ç½‘ç»œåè®®" class="headerlink" title="ç½‘ç»œåè®®"></a>ç½‘ç»œåè®®</h3><blockquote><p>ç½‘ç»œåè®®æ˜¯ä¸€ç»„ç¡®å®šçš„è§„åˆ™ï¼Œè¿™äº›è§„åˆ™ç¡®å®šå¦‚ä½•åœ¨åŒä¸€ç½‘ç»œä¸­çš„ä¸åŒè®¾å¤‡ä¹‹é—´ä¼ è¾“æ•°æ®ã€‚æœ¬è´¨ä¸Šï¼Œå®ƒå…è®¸è¿æ¥çš„è®¾å¤‡å½¼æ­¤é€šä¿¡ï¼Œè€Œä¸ç®¡å…¶å†…éƒ¨è¿‡ç¨‹ï¼Œç»“æ„æˆ–è®¾è®¡æ˜¯å¦æœ‰å·®å¼‚ã€‚ï¼ˆä¸¤ä¸ªç«¯ç‚¹éƒ½éœ€è¦äº†è§£åè®®æ‰èƒ½è¿›è¡Œäº¤æµï¼‰ã€‚</p></blockquote><h3 id="OSIç½‘ç»œæ¨¡å‹"><a href="#OSIç½‘ç»œæ¨¡å‹" class="headerlink" title="OSIç½‘ç»œæ¨¡å‹"></a>OSIç½‘ç»œæ¨¡å‹</h3><blockquote><p>OSIè‹±æ–‡å…¨ç§°å«åš(Open System Interconnection Model). ä¸­æ–‡å…¨ç§°å«åšå¼€æ”¾å¼ç³»ç»Ÿäº’è”æ¨¡å‹. ä¹Ÿå«åšç½‘ç»œ7å±‚æ¨¡å‹ï¼Œä»ä¸‹åˆ°ä¸Šä¾æ¬¡ä¸ºï¼Œç‰©ç†å±‚ï¼Œæ•°æ®é“¾è·¯å±‚ï¼Œç½‘ç»œå±‚ï¼Œä¼ è¾“å±‚ï¼Œä¼šè¯å±‚ï¼Œè¡¨ç¤ºå±‚ï¼Œåº”ç”¨å±‚ã€‚</p></blockquote><ul><li>OISæ¦‚å¿µæ¨¡å‹<strong>å®é™…ä¸Šå¹¶æ²¡æœ‰çœŸæ­£å®ç°è¿‡ï¼Œä½†æ˜¯æˆ‘ä»¬éœ€è¦å‚è€ƒè¿™ä¸ªåˆ†å±‚æ¥ç†è§£ç½‘ç»œåè®®</strong>ä¸€èˆ¬æ¥è¯´æŠŠ5-7å±‚å«åšä¸Šå±‚ï¼Œ1-4å±‚å«åšä¸‹å±‚ã€‚</li></ul><p><img src="https://z201.oss-cn-shanghai.aliyuncs.com/JavaNote/20211123214245.png"></p><ul><li>7-åº”ç”¨å±‚ -&gt; ç½‘ç»œæµç¨‹åº”ç”¨ï¼ˆè¡¨ç¤ºçš„æ˜¯ç”¨æˆ·ç•Œé¢ï¼Œä¾‹å¦‚Telnetï¼ŒHTTPã€FTPã€TFTPã€SMTPã€SNMPã€DNSã€TELNETã€HTTPSã€POP3ã€DHCPï¼‰</li><li>6-è¡¨ç¤ºå±‚ -&gt; æ•°æ®è¡¨ç¤º (æ•°æ®å¦‚ä½•å‘ˆç°ï¼Œç‰¹æ®Šå¤„ç†-&gt;ä¾‹å¦‚åŠ å¯†ï¼Œæ¯”å¦‚JPEGã€ASCLLã€EBCDICã€åŠ å¯†æ ¼å¼ç­‰ï¼‰</li><li>5-ä¼šè¯å±‚ -&gt; ä¸»æœºé—´çš„é€šä¿¡ï¼ˆå°†ä¸åŒåº”ç”¨ç¨‹åºçš„æ•°æ®åˆ†å¼€ã€‚å»ºç«‹ï¼Œç®¡ç†å’Œç»ˆæ­¢åº”ç”¨ä¹‹é—´çš„ä¼šè¯ï¼‰</li><li>4-ä¼ è¾“å±‚ -&gt; ç«¯åˆ°ç«¯è¿æ¥ï¼ˆå¯é æˆ–ä¸å¯é çš„ä¼ é€’ï¼Œä¾‹å¦‚TCPï¼ŒUDP)</li><li>3-ç½‘ç»œå±‚ -&gt; åœ°å€å’Œæœ€ä½³è·¯å¾„ï¼ˆæä¾›è·¯ç”±å™¨ç”¨äºè·¯å¾„çš„é€»è¾‘å¯»å€ï¼Œæ¯”å¦‚ICMP IGMP IP(IPV4 IPV6)ï¼‰</li><li>2-æ•°æ®é“¾è·¯å±‚ -&gt; åª’ä½“è®¿é—®ï¼ˆå°†ä½ç»„åˆæˆå­—èŠ‚ï¼Œå°†å­—èŠ‚ç»„åˆæˆå¸§ï¼Œä½¿ç”¨MACåœ°å€è®¿é—®ï¼Œé”™è¯¯æ£€æµ‹-æ¯”å¦‚HDLCï¼‰</li><li>1-ç‰©ç†å±‚ -&gt; äºŒè¿›åˆ¶ä¼ è¾“ï¼ˆåœ¨è®¾å¤‡ä¹‹é—´ç§»åŠ¨bitsã€‚ä¾‹å¦‚V.35ï¼‰</li></ul><h3 id="TCP-IPç½‘ç»œæ¨¡å‹"><a href="#TCP-IPç½‘ç»œæ¨¡å‹" class="headerlink" title="TCP/IPç½‘ç»œæ¨¡å‹"></a>TCP/IPç½‘ç»œæ¨¡å‹</h3><blockquote><p>TCP/IP æ¨¡å‹å’ŒOSIç›¸æ¯”ä¼šç®€å•ä¸€ç‚¹ï¼Œåªæœ‰å››å±‚ï¼Œåˆ†åˆ«ä¸ºæ•°æ®é“¾è·¯å±‚ï¼Œç½‘ç»œå±‚ï¼Œä¼ è¾“å±‚å’Œåº”ç”¨å±‚ã€‚</p></blockquote><p><img src="https://z201.oss-cn-shanghai.aliyuncs.com/JavaNote/20211123214318.png"></p><h3 id="OSIæ¨¡å‹ä¸TCP-IPæ¨¡å‹"><a href="#OSIæ¨¡å‹ä¸TCP-IPæ¨¡å‹" class="headerlink" title="OSIæ¨¡å‹ä¸TCP/IPæ¨¡å‹"></a>OSIæ¨¡å‹ä¸TCP/IPæ¨¡å‹</h3><p><img src="https://z201.oss-cn-shanghai.aliyuncs.com/JavaNote/20211123215305.png"></p><ul><li>4-åº”ç”¨å±‚ -&gt; å¯¹åº”äºOSIçš„5-7å±‚</li><li>3-ä¼ è¾“å±‚ -&gt; è¿™ä¸ªæ˜¯å’ŒOSIçš„ç¬¬å››å±‚æƒ³åŒçš„</li><li>2-ç½‘ç»œå±‚ -&gt; è¿™ä¸ªæ˜¯å’ŒOSIçš„ç¬¬3ç½‘ç»œå±‚å¯¹åº”çš„</li><li>1-ç½‘ç»œè®¿é—®å±‚ -&gt; è¿™ä¸ªæ˜¯å’ŒOSIçš„ç¬¬1-2å±‚æ‰€å¯¹åº”çš„</li></ul><a id="more"></a><h3 id="TCP-IPåè®®"><a href="#TCP-IPåè®®" class="headerlink" title="TCP/IPåè®®"></a>TCP/IPåè®®</h3><blockquote><p>TCP/IPçš„å‰èº«APPA:NCPåè®®ã€‚</p></blockquote><p><img src="https://z201.oss-cn-shanghai.aliyuncs.com/JavaNote/20211123220629.png"></p><ul><li>TCPï¼š<strong>é¢å‘è¿æ¥çš„ã€å¯é çš„ã€æ‹¥å¡æ§åˆ¶ã€åŸºäºå­—èŠ‚æµçš„ã€æœ‰çŠ¶æ€æœåŠ¡</strong>ä¼ è¾“å±‚é€šä¿¡åè®®ã€‚</li><li>UDPï¼š<strong>é¢å‘æ— è¿æ¥ã€åŸºäºæ•°æ®åŒ…ã€æ— çŠ¶æ€æœåŠ¡</strong></li><li>IPï¼šæ ¹æ®IPåœ°å€ç©¿é€ç½‘ç»œä¼ è¾“æ•°æ®ã€‚</li></ul><h4 id="TCP"><a href="#TCP" class="headerlink" title="TCP"></a>TCP</h4><blockquote><p>TCPçš„å…¨ç§°æ˜¯Transmission Control Protocolï¼Œåœ¨IPåè®®ä¹‹ä¸Šï¼Œè§£å†³ç½‘ç»œé€šä¿¡å¯ä¾èµ–çš„é—®é¢˜ã€‚TCPåŸºæœ¬ä¸Šè¢«ä»¥ä¸Šå¤§å¤šæ•°çš„åè®®æ‰€ä½¿ç”¨ã€‚</p></blockquote><ul><li><strong>é¢å‘è¿æ¥</strong>ï¼Œä¹Ÿå°±æ˜¯å»ºç«‹è¿æ¥ã€‚ä¸ºäº†å®¢æˆ·ç«¯ä¸æœåŠ¡ç«¯ç»´æŠ¤çš„è¿æ¥ï¼Œè€Œå»ºç«‹ä¸€å®šçš„æ•°æ®ç»“æ„ç»´æŠ¤äº’ç›¸äº¤äº’çš„çŠ¶æ€ã€‚é€šè¿‡è¿™ç§æ•°æ®ç»“æ„æ¥ä¿è¯æ‰€è°“çš„é¢ç›¸è¿æ¥çš„ç‰¹æ€§ã€‚</li><li><strong>å¯é æ€§</strong>ï¼Œé€šè¿‡TCPè¿æ¥ä¼ è¾“çš„æ•°æ®ï¼Œæ— å·®é”™ã€ä¸ä¸¢å¤±ã€ä¸é‡å¤ã€æŒ‰é¡ºåºåˆ°è¾¾ã€‚ä½¿ç”¨æ ¡éªŒã€ç¡®è®¤å’Œé‡ä¼ æœºåˆ¶æ¥ä¿è¯å¯é ä¼ è¾“ã€‚</li><li><strong>é˜»å¡æ§åˆ¶</strong>ï¼ŒTCPè‡ªå·±å†³å®šä½•æ—¶åœæ­¢å’Œå‘é€æ•°æ®ã€‚</li><li><strong>åŸºäºå­—èŠ‚æµ</strong>ï¼Œå‘é€çš„æ—¶å€™æ˜¯ä¸€ä¸ªæµï¼Œæ²¡å¤´æ²¡å°¾ï¼Œæ¶ˆæ¯æ˜¯<strong>æœ‰åº</strong>çš„ï¼Œä¼šå¯¹<strong>é‡å¤</strong>çš„æ¶ˆæ¯ä¸¢å¼ƒã€‚</li><li><strong>çŠ¶æ€æœåŠ¡</strong>ï¼Œè‡ªèº«ç»´æŠ¤äº†çŠ¶æ€</li></ul><h5 id="ç«¯å£å·"><a href="#ç«¯å£å·" class="headerlink" title="ç«¯å£å·"></a>ç«¯å£å·</h5><blockquote><p>TCPæŠ¥æ–‡ä¸­æœ‰ç«¯å£ç›¸å…³ä¿¡æ¯ï¼Œç©¿æ’ä¸‹ã€‚ç«¯å£å·çš„èŒƒå›´ä»0åˆ°65535ï¼Œé€šè¿‡ç«¯å£å·è¢«åˆ†ä¸ºä¸‰ä¸ªä¸åŒçš„ç±»åˆ«ã€‚</p></blockquote><ul><li>å…¬è®¤ç«¯å£ï¼ˆWell-Knownï¼‰0-1023 æ˜¯ç»è¿‡å®è·µæ£€éªŒçš„åè®®ï¼Œæ‰€ä»¥ç§°ä¸ºå…¬è®¤ç«¯å£ã€‚è¯¸å¦‚Httpä½¿ç”¨ç«¯å£80ï¼Œhttpsä½¿ç”¨443<ul><li>HTTP - 80</li><li>HTTPS - 443</li><li>FTP - 20,21</li><li>SSH - 22</li><li>Telnet - 23</li></ul></li><li>æ³¨å†Œç«¯å£ï¼ˆRegisteredï¼‰1024-49151</li><li>ä¸´æ—¶ç«¯å£ï¼ˆEphemeralï¼‰49152-65535</li></ul><h5 id="TCPæŠ¥æ–‡æ ¼å¼"><a href="#TCPæŠ¥æ–‡æ ¼å¼" class="headerlink" title="TCPæŠ¥æ–‡æ ¼å¼"></a>TCPæŠ¥æ–‡æ ¼å¼</h5><blockquote><p>TCP æŠ¥æ–‡æ˜¯ TCP å±‚ä¼ è¾“çš„æ•°æ®å•å…ƒï¼Œä¹Ÿç§°ä¸ºæŠ¥æ–‡æ®µã€‚TCP æŠ¥æ–‡ä¸­æ¯ä¸ªå­—æ®µå¦‚å›¾æ‰€ç¤ºã€‚</p></blockquote><p><img src="https://z201.oss-cn-shanghai.aliyuncs.com/JavaNote/20211123230635.png"></p><h5 id="æŠ¥æ–‡å­—æ®µå«ä¹‰"><a href="#æŠ¥æ–‡å­—æ®µå«ä¹‰" class="headerlink" title="æŠ¥æ–‡å­—æ®µå«ä¹‰"></a>æŠ¥æ–‡å­—æ®µå«ä¹‰</h5><blockquote><p>å›ºå®šé¦–éƒ¨é•¿åº¦ä¸º20å­—èŠ‚,å¯å˜éƒ¨åˆ†0~40å­—èŠ‚</p></blockquote><ul><li><p><em>Source Prot</em> æºç«¯å£ 16bit èŒƒå›´ 0 ~ 56625</p></li><li><p><em>Destination Port</em> ç›®æ ‡ç«¯å£ 16bit èŒƒå›´ 0 ~ 56625</p></li><li><p><em>Sequence Number</em> åºåˆ—å·å­—æ®µ 32bit </p><ul><li>å®ƒè¡¨ç¤ºæœ¬æŠ¥æ–‡æ®µæ‰€å‘é€æ•°æ®çš„ç¬¬ä¸€ä¸ªå­—èŠ‚çš„ç¼–å·ã€‚åœ¨ TCP è¿æ¥ä¸­ï¼Œæ‰€ä¼ é€çš„å­—èŠ‚æµçš„æ¯ä¸€ä¸ªå­—èŠ‚éƒ½ä¼šæŒ‰é¡ºåºç¼–å·ã€‚å½“SYNæ ‡è®°ä¸ä¸º1æ—¶ï¼Œè¿™æ˜¯å½“å‰æ•°æ®åˆ†æ®µç¬¬ä¸€ä¸ªå­—æ¯çš„åºåˆ—å·ï¼›å¦‚æœSYNçš„å€¼æ˜¯1æ—¶ï¼Œè¿™ä¸ªå­—æ®µçš„å€¼å°±æ˜¯åˆå§‹åºåˆ—å€¼ï¼ˆISNï¼‰ï¼Œç”¨äºå¯¹åºåˆ—å·è¿›è¡ŒåŒæ­¥ã€‚è¿™æ—¶ï¼Œç¬¬ä¸€ä¸ªå­—èŠ‚çš„åºåˆ—å·æ¯”è¿™ä¸ªå­—æ®µçš„å€¼å¤§1ï¼Œä¹Ÿå°±æ˜¯ISNåŠ 1ã€‚<strong>è§£å†³ç½‘ç»œåŒ…ä¹±åºé—®é¢˜</strong></li></ul></li><li><p><em>Acknowledgment Numberï¼ŒACK Number</em>  ç¡®è®¤å·å­—æ®µ</p><ul><li>TCP ç¡®è®¤å·ï¼ˆAcknowledgment Numberï¼ŒACK Numberï¼‰ï¼šå  32 ä½ã€‚å®ƒè¡¨ç¤ºæ¥æ”¶æ–¹æœŸæœ›æ”¶åˆ°å‘é€æ–¹ä¸‹ä¸€ä¸ªæŠ¥æ–‡æ®µçš„ç¬¬ä¸€ä¸ªå­—èŠ‚æ•°æ®çš„ç¼–å·ã€‚å…¶å€¼æ˜¯æ¥æ”¶è®¡ç®—æœºå³å°†æ¥æ”¶åˆ°çš„ä¸‹ä¸€ä¸ªåºåˆ—å·ï¼Œä¹Ÿå°±æ˜¯ä¸‹ä¸€ä¸ªæ¥æ”¶åˆ°çš„å­—èŠ‚çš„åºåˆ—å·åŠ 1ã€‚<strong>è§£å†³ç½‘ç»œä¸ä¸¢åŒ…é—®é¢˜</strong></li></ul></li><li><p><em>Header Length</em> æ•°æ®åç§»å­—æ®µ </p><ul><li>TCP é¦–éƒ¨é•¿åº¦ï¼ˆHeader Lengthï¼‰ï¼šæ•°æ®åç§»æ˜¯æŒ‡æ•°æ®æ®µä¸­çš„â€œæ•°æ®â€éƒ¨åˆ†èµ·å§‹å¤„è·ç¦» TCP æ•°æ®æ®µèµ·å§‹å¤„çš„å­—èŠ‚åç§»é‡ï¼Œå  4 ä½ã€‚å…¶å®è¿™é‡Œçš„â€œæ•°æ®åç§»â€ä¹Ÿæ˜¯åœ¨ç¡®å®š TCP æ•°æ®æ®µå¤´éƒ¨åˆ†çš„é•¿åº¦ï¼Œå‘Šè¯‰æ¥æ”¶ç«¯çš„åº”ç”¨ç¨‹åºï¼Œæ•°æ®ä»ä½•å¤„å¼€å§‹ã€‚</li></ul></li><li><p><em>Reserved</em> ä¿ç•™å­—æ®µ 4bit ä¸º TCP å°†æ¥çš„å‘å±•é¢„ç•™ç©ºé—´ï¼Œç›®å‰å¿…é¡»å…¨éƒ¨ä¸º 0ã€‚</p></li><li><p>æ ‡å¿—ä½å­—æ®µ</p><blockquote><p>SYN æ˜¯å‘èµ·ä¸€ä¸ªè¿æ¥ï¼ŒACK æ˜¯å›å¤ï¼ŒRST æ˜¯é‡æ–°è¿æ¥ï¼ŒFINç»“æŸè¿æ¥ã€‚æ³¨æ„è¿™å‡ ä¸ªæ ‡å¿—ä½ã€‚</p></blockquote><ul><li>CWRï¼ˆCongestion Window Reduceï¼‰ï¼šæ‹¥å¡çª—å£å‡å°‘æ ‡å¿—ï¼Œç”¨æ¥è¡¨æ˜å®ƒæ¥æ”¶åˆ°äº†è®¾ç½® ECE æ ‡å¿—çš„ TCP åŒ…ã€‚å¹¶ä¸”ï¼Œå‘é€æ–¹æ”¶åˆ°æ¶ˆæ¯ä¹‹åï¼Œé€šè¿‡å‡å°å‘é€çª—å£çš„å¤§å°æ¥é™ä½å‘é€é€Ÿç‡ã€‚</li><li>ECEï¼ˆECN Echoï¼‰ï¼šç”¨æ¥åœ¨ TCP ä¸‰æ¬¡æ¡æ‰‹æ—¶è¡¨æ˜ä¸€ä¸ª TCP ç«¯æ˜¯å…·å¤‡ ECN åŠŸèƒ½çš„ã€‚åœ¨æ•°æ®ä¼ è¾“è¿‡ç¨‹ä¸­ï¼Œå®ƒä¹Ÿç”¨æ¥è¡¨æ˜æ¥æ”¶åˆ°çš„ TCP åŒ…çš„ IP å¤´éƒ¨çš„ ECN è¢«è®¾ç½®ä¸º 11ï¼Œå³ç½‘ç»œçº¿è·¯æ‹¥å µã€‚</li><li>URGï¼ˆUrgentï¼‰ï¼šè¡¨ç¤ºæœ¬æŠ¥æ–‡æ®µä¸­å‘é€çš„æ•°æ®æ˜¯å¦åŒ…å«ç´§æ€¥æ•°æ®ã€‚URG=1 æ—¶è¡¨ç¤ºæœ‰ç´§æ€¥æ•°æ®ã€‚å½“ URG=1 æ—¶ï¼Œåé¢çš„ç´§æ€¥æŒ‡é’ˆå­—æ®µæ‰æœ‰æ•ˆã€‚</li><li><strong>ACK</strong>ï¼šè¡¨ç¤ºå‰é¢çš„ç¡®è®¤å·å­—æ®µæ˜¯å¦æœ‰æ•ˆã€‚ACK=1 æ—¶è¡¨ç¤ºæœ‰æ•ˆã€‚åªæœ‰å½“ ACK=1 æ—¶ï¼Œå‰é¢çš„ç¡®è®¤å·å­—æ®µæ‰æœ‰æ•ˆã€‚TCP è§„å®šï¼Œè¿æ¥å»ºç«‹åï¼ŒACK å¿…é¡»ä¸º 1ã€‚</li><li>PSHï¼ˆPushï¼‰ï¼šå‘Šè¯‰å¯¹æ–¹æ”¶åˆ°è¯¥æŠ¥æ–‡æ®µåæ˜¯å¦ç«‹å³æŠŠæ•°æ®æ¨é€ç»™ä¸Šå±‚ã€‚å¦‚æœå€¼ä¸º 1ï¼Œè¡¨ç¤ºåº”å½“ç«‹å³æŠŠæ•°æ®æäº¤ç»™ä¸Šå±‚ï¼Œè€Œä¸æ˜¯ç¼“å­˜èµ·æ¥ã€‚</li><li><strong>RST</strong>ï¼šè¡¨ç¤ºæ˜¯å¦é‡ç½®è¿æ¥ã€‚å¦‚æœ RST=1ï¼Œè¯´æ˜ TCP è¿æ¥å‡ºç°äº†ä¸¥é‡é”™è¯¯ï¼ˆå¦‚ä¸»æœºå´©æºƒï¼‰ï¼Œå¿…é¡»é‡Šæ”¾è¿æ¥ï¼Œç„¶åå†é‡æ–°å»ºç«‹è¿æ¥ã€‚</li><li><strong>SYN</strong>ï¼šåœ¨å»ºç«‹è¿æ¥æ—¶ä½¿ç”¨ï¼Œç”¨æ¥åŒæ­¥åºå·ã€‚å½“ SYN=1ï¼ŒACK=0 æ—¶ï¼Œè¡¨ç¤ºè¿™æ˜¯ä¸€ä¸ªè¯·æ±‚å»ºç«‹è¿æ¥çš„æŠ¥æ–‡æ®µï¼›å½“ SYN=1ï¼ŒACK=1 æ—¶ï¼Œè¡¨ç¤ºå¯¹æ–¹åŒæ„å»ºç«‹è¿æ¥ã€‚SYN=1 æ—¶ï¼Œè¯´æ˜è¿™æ˜¯ä¸€ä¸ªè¯·æ±‚å»ºç«‹è¿æ¥æˆ–åŒæ„å»ºç«‹è¿æ¥çš„æŠ¥æ–‡ã€‚åªæœ‰åœ¨å‰ä¸¤æ¬¡æ¡æ‰‹ä¸­ SYN æ‰ä¸º 1ã€‚</li><li><strong>FIN</strong>ï¼šæ ‡è®°æ•°æ®æ˜¯å¦å‘é€å®Œæ¯•ã€‚å¦‚æœ FIN=1ï¼Œè¡¨ç¤ºæ•°æ®å·²ç»å‘é€å®Œæˆï¼Œå½“é€šä¿¡ç»“æŸå¸Œæœ›æ–­å¼€è¿æ¥æ—¶ï¼Œé€šä¿¡åŒæ–¹çš„ä¸»æœºä¹‹é—´å°±å¯ä»¥ç›¸äº’äº¤æ¢ <code>FIN</code> ä½ç½®ä¸º 1 çš„ TCP æ®µã€‚</li></ul></li><li><p><em>Window Size</em> çª—å£å¤§å°å­—æ®µ 16bit </p><ul><li>å®ƒè¡¨ç¤ºä» Ack Number å¼€å§‹è¿˜å¯ä»¥æ¥æ”¶å¤šå°‘å­—èŠ‚çš„æ•°æ®é‡ï¼Œä¹Ÿè¡¨ç¤ºå½“å‰æ¥æ”¶ç«¯çš„æ¥æ”¶çª—å£è¿˜æœ‰å¤šå°‘å‰©ä½™ç©ºé—´ã€‚è¯¥å­—æ®µå¯ä»¥ç”¨äº <strong>TCP çš„æµé‡æ§åˆ¶</strong>ã€‚</li></ul></li><li><p><em>TCP Checksum</em> TCP æ ¡éªŒå­—æ®µ 16bit</p><ul><li>å®ƒç”¨äº<strong>ç¡®è®¤ä¼ è¾“çš„æ•°æ®æ˜¯å¦æœ‰æŸå</strong>ã€‚å‘é€ç«¯åŸºäºæ•°æ®å†…å®¹æ ¡éªŒç”Ÿæˆä¸€ä¸ªæ•°å€¼ï¼Œæ¥æ”¶ç«¯æ ¹æ®æ¥æ”¶çš„æ•°æ®æ ¡éªŒç”Ÿæˆä¸€ä¸ªå€¼ã€‚ä¸¤ä¸ªå€¼å¿…é¡»ç›¸åŒï¼Œæ‰èƒ½è¯æ˜æ•°æ®æ˜¯æœ‰æ•ˆçš„ã€‚å¦‚æœä¸¤ä¸ªå€¼ä¸åŒï¼Œåˆ™ä¸¢æ‰è¿™ä¸ªæ•°æ®åŒ…ã€‚Checksum æ˜¯æ ¹æ®ä¼ªå¤´ + TCP å¤´ + TCP æ•°æ®ä¸‰éƒ¨åˆ†è¿›è¡Œè®¡ç®—çš„ã€‚</li></ul></li><li><p><em>Urgent Pointer</em> ç´§æ€¥æŒ‡é’ˆå­—æ®µ </p><ul><li>ä»…å½“å‰é¢çš„ URG æ§åˆ¶ä½ä¸º 1 æ—¶æ‰æœ‰æ„ä¹‰ã€‚å®ƒæŒ‡å‡ºæœ¬æ•°æ®æ®µä¸­ä¸ºç´§æ€¥æ•°æ®çš„å­—èŠ‚æ•°ï¼Œå  16 ä½ã€‚å½“æ‰€æœ‰ç´§æ€¥æ•°æ®å¤„ç†å®Œåï¼ŒTCP å°±ä¼šå‘Šè¯‰åº”ç”¨ç¨‹åºæ¢å¤åˆ°æ­£å¸¸æ“ä½œã€‚å³ä½¿å½“å‰çª—å£å¤§å°ä¸º 0ï¼Œä¹Ÿæ˜¯å¯ä»¥å‘é€ç´§æ€¥æ•°æ®çš„ï¼Œå› ä¸ºç´§æ€¥æ•°æ®æ— é¡»ç¼“å­˜ã€‚</li></ul></li><li><p><em>Option</em> å¯é€‰é¡¹å­—æ®µ</p><ul><li>é•¿åº¦ä¸å®šï¼Œä½†é•¿åº¦å¿…é¡»æ˜¯ 32bits çš„æ•´æ•°å€ã€‚</li></ul></li></ul><h5 id="TCPçŠ¶æ€"><a href="#TCPçŠ¶æ€" class="headerlink" title="TCPçŠ¶æ€"></a>TCPçŠ¶æ€</h5><blockquote><p>TCPçš„çŠ¶æ€å˜è¿å›¾æ›´ç»†è‡´çš„æè¿°äº†TCPè¿æ¥å»ºç«‹å’Œè¿æ¥ç»ˆæ­¢ä¸­çš„å„ä¸ªçŠ¶æ€</p></blockquote><p><img src="https://z201.oss-cn-shanghai.aliyuncs.com/JavaNote/20211123232928.png"></p><h5 id="ä¸‰æ¬¡æ¡æ‰‹å»ºç«‹è¿æ¥"><a href="#ä¸‰æ¬¡æ¡æ‰‹å»ºç«‹è¿æ¥" class="headerlink" title="ä¸‰æ¬¡æ¡æ‰‹å»ºç«‹è¿æ¥"></a>ä¸‰æ¬¡æ¡æ‰‹å»ºç«‹è¿æ¥</h5><blockquote><p>æ¡æ‰‹çš„ä¸»è¦è¡Œä¸º SYN åŒæ­¥ ACK ç¡®è®¤ </p><ol><li><p>åŒæ­¥Sequenceåºåˆ—å·ï¼Œåˆå§‹åŒ–åºåˆ—å·ISNï¼ˆInital Sequence Numberï¼‰</p></li><li><p>äº¤æ¢TCPé€šè®¯å‚æ•°ï¼Œæ¯”å¦‚MSSã€çª—å£æ¯”ä¾‹å› å­ã€é€‰æ‹©æ€§ç¡®è®¤ã€æŒ‡å®šæ ¡éªŒç®—æ³•</p></li><li><p>é˜²æ­¢å¤±æ•ˆçš„è¿æ¥è¯·æ±‚è®¿é—®åˆ°æœåŠ¡å™¨ç«¯ï¼Œè®©æœåŠ¡å™¨è¯¯è®¤ä¸ºè¦å»ºç«‹è¿æ¥ã€‚</p></li></ol></blockquote><p><img src="https://z201.oss-cn-shanghai.aliyuncs.com/JavaNote/20211208200222.png"></p><ul><li><p>è¿‡ç¨‹</p><ul><li>Client å‘é€ è‡ªèº«çš„SYN åˆ° Server ï¼Œå¹¶åŒ…å«åˆå§‹åŒ–åºåˆ—å·</li><li>Server å‘é€ä¸€ä¸ª SYN å’Œ ACK åœ¨åŒä¸€ä¸ªæŠ¥æ–‡ä¸­ ç»™Client  ï¼Œ </li><li>Client å‘é€ä¸€ä¸ª ACK ç»™ Server</li></ul></li><li><p>å®è·µè¿‡ç¨‹</p><ul><li>å‡†å¤‡ä¸€å°linxu Centos ä¸”å®‰è£…å¥½ tcpdump </li><li><code>yum install tcpdump</code></li><li><code>tcpdump -i eth0 -w out_3.pcap tcp port 80 -c 3 -S</code>  ç›‘å¬eth0ç½‘å¡ã€å°†å†…å®¹è¾“å‡ºåˆ°out_3.pacp æ–¹ä¾¿ Wireshark åˆ†æ ã€ç›‘å¬tcp åè®® ç«¯å£ 80 åªä¿ç•™å‰3ä¸ªåŒ…ï¼Œç”¨ç»å¯¹åºåˆ—å·ä»£æ›¿ç›¸å¯¹åºåˆ—åŒ–ã€‚åœ¨å®¢æˆ·ç«¯ä½¿ç”¨ curlå‘½ä»¤è®¿é—®å¯¹äºæœåŠ¡å³å¯ã€‚</li></ul><p><img src="https://z201.oss-cn-shanghai.aliyuncs.com/JavaNote/20211203154224.png"></p><ul><li>ç¬¬ä¸€æ¬¡æ¡æ‰‹å®¢æˆ·ç«¯å‘é€è‡ªèº«åºåˆ—å· 2883770579 å¹¶ä¸” å°† syn è®¾ç½®ä¸º 1  </li></ul><p><img src="https://z201.oss-cn-shanghai.aliyuncs.com/JavaNote/20211203155019.png"></p><pre><code>- ç¬¬äºŒæ¬¡æ¡æ‰‹ å°† synè®¾ç½®ä¸º 1 ã€ack è®¾ç½®ä¸º 1ï¼Œ å¹¶ä¸”è¿”å›ç¡®è®¤æŠ¥æ–‡ack 2883770579 + 1 = 2883770580 ã€‚</code></pre><p><img src="https://z201.oss-cn-shanghai.aliyuncs.com/JavaNote/20211203155507.png"></p><ul><li>ç¬¬ä¸‰æ¬¡æ¡æ‰‹ å°†ACKè®¾ç½®æˆ1 ï¼Œ ç¡®è®¤æŠ¥æ–‡ack 2054592687 + 1 = 2054592689 ã€‚</li></ul><p><img src="https://z201.oss-cn-shanghai.aliyuncs.com/JavaNote/20211208200251.png"></p></li></ul><h5 id="å››æ¬¡æŒ¥æ‰‹å…³é—­è¿æ¥"><a href="#å››æ¬¡æŒ¥æ‰‹å…³é—­è¿æ¥" class="headerlink" title="å››æ¬¡æŒ¥æ‰‹å…³é—­è¿æ¥"></a>å››æ¬¡æŒ¥æ‰‹å…³é—­è¿æ¥</h5><blockquote><p>TCPæ˜¯å…¨åŒå·¥çš„ï¼Œä¸”å­˜åœ¨åŠå…³é—­(half-close)çŠ¶æ€çš„å­˜åœ¨ï¼Œæ‰€ä»¥ç»ˆæ­¢TCPåè®®éœ€è¦4æ¬¡æ¡æ‰‹ã€‚è¿æ¥åŒæ–¹éƒ½éœ€è¦å…³é—­è¿æ¥ã€‚</p></blockquote><p><img src="https://z201.oss-cn-shanghai.aliyuncs.com/JavaNote/20211203152951.png"></p><ul><li><p>è¿‡ç¨‹</p><ul><li>Clinet å‘é€è‡ªèº« FIN Måˆ° Server </li><li>Server å‘é€ä¸€ä¸ªACK åˆ‡ M + 1 ç»™ Client</li><li>Server å‘é€ FIN N åˆ° Client </li><li>Client å‘é€ ACK N + 1 åˆ° Server</li></ul></li><li><p>å®è·µè¿‡ç¨‹</p><ul><li><code>tcpdump -i eth0 -w out_3.pcap tcp port 80  -S</code></li></ul><p><img src="https://z201.oss-cn-shanghai.aliyuncs.com/JavaNote/20211203165015.png"></p><ul><li>ä¸çŸ¥é“ä¸ºä»€ä¹ˆä¸æ˜¯å››æ¬¡ï¼Œåœ¨å®¢æˆ·ç«¯å‘é€å®Œè¯·æ±‚åï¼Œä¸ä¼šç«‹åˆ»å…³é—­è¿æ¥ï¼Œä»ç„¶å¤„äºestablishçŠ¶æ€ï¼ŒçŸ­è¿æ¥ä¼šç»è¿‡fin-wait1 fin wait2 time_wait</li></ul></li></ul><h5 id="MSSåˆ†æ®µ"><a href="#MSSåˆ†æ®µ" class="headerlink" title="MSSåˆ†æ®µ"></a>MSSåˆ†æ®µ</h5><blockquote><p>å®¢æˆ·ç«¯ä¸æœåŠ¡å™¨ä¹‹é—´çš„é€šä¿¡æ˜¯ä¸€ä¸ªæ•°æ®ä¼ è¾“è¿‡ç¨‹ã€‚é€šä¿¡çš„æ¶ˆæ¯å°†ä»¥æ•°æ®åŒ…å½¢å¼è¿›è¡Œä¼ è¾“ã€‚TCP åè®®åœ¨æ•°æ®è¿›è¡Œæ•°æ®ä¼ è¾“æ—¶ï¼Œä½¿ç”¨æ»‘åŠ¨çª—å£æœºåˆ¶æ¥åŒæ—¶å‘é€å¤šä¸ªæ•°æ®åŒ…ã€‚å½“æ•°æ®åŒ…ä¸¢å¤±æ—¶ï¼ŒTCP åè®®åˆ©ç”¨æ•°æ®é‡å‘åŠŸèƒ½é‡æ–°å‘é€æ•°æ®åŒ…ã€‚å› æ¥æ”¶ç«¯æ¥æ”¶æ•°æ®åŒ…çš„èƒ½åŠ›ä¸åŒï¼ŒTCP æµæ§åˆ¶ä¼šæ ¹æ®æ¥æ”¶ç«¯çš„èƒ½åŠ›å‘é€é€‚å½“æ•°é‡çš„æ•°æ®åŒ…ã€‚</p></blockquote><ul><li>æ•°æ®åˆ†ç‰‡<ul><li>æ•°æ®åœ¨ä¼ è¾“çš„è¿‡ç¨‹ä¸­ï¼Œä¼šç»è¿‡å¾ˆå¤šçš„ç‰©ç†è®¾å¤‡ï¼Œè¿™äº›è®¾å¤‡å¤„ç†çš„æ•°æ®éƒ½æœ‰ä¸€äº›é™åˆ¶ï¼Œå› æ­¤åœ¨å‘é€æ•°æ®éƒ½æ˜¯å¥½ä¸èƒ½è¶…è¿‡æœ€å¤§çš„å­—èŠ‚æ•°ã€‚è¿™ä¸ªæœ€å¤§çš„å­—èŠ‚æ•°å°±æ˜¯ï¼ˆMaximum Segment Sizeï¼ŒMSSï¼‰ã€‚å½“è¦å‘é€çš„æ•°æ®è¶…è¿‡è¯¥å€¼çš„æ—¶å€™ï¼Œå°±éœ€è¦å°†æ•°æ®æ‹†åˆ†ä¸ºå¤šä¸ªåŒ…ï¼Œä¾æ¬¡å‘é€ã€‚</li></ul></li></ul><h5 id="TCPæµé‡æ§åˆ¶"><a href="#TCPæµé‡æ§åˆ¶" class="headerlink" title="TCPæµé‡æ§åˆ¶"></a>TCPæµé‡æ§åˆ¶</h5><h5 id="TCPé˜»å¡æ§åˆ¶"><a href="#TCPé˜»å¡æ§åˆ¶" class="headerlink" title="TCPé˜»å¡æ§åˆ¶"></a>TCPé˜»å¡æ§åˆ¶</h5><h5 id="TCPçš„RST"><a href="#TCPçš„RST" class="headerlink" title="TCPçš„RST"></a>TCPçš„RST</h5><h4 id="UDP"><a href="#UDP" class="headerlink" title="UDP"></a>UDP</h4><blockquote><p>DNS,SNMPå’ŒTFTPéƒ½æ˜¯ä½¿ç”¨UDPï¼Œå®é™…ä¸ŠDNSå’ŒSNMPæ—¢å¯ä»¥ä½¿ç”¨TCPä¹Ÿå¯ä»¥ä½¿ç”¨UDPã€‚ç›¸æ¯”TCPï¼ŒUDPæä¾›äº†æ•ˆç‡ï¼ŒTCPåœ¨ä½¿ç”¨è¿‡ç¨‹ä¸­æœ‰å¤ªå¤šçš„å¼€é”€ï¼Œå®é™…ä¸Šå¹¶ä¸æ˜¯æ‰€æœ‰çš„åœºæ™¯éƒ½éœ€è¦TCPå¯é çš„é€šä¿¡æœºåˆ¶ï¼Œæ¯”å¦‚DNS</p></blockquote><ul><li><strong>æ— è¿æ¥</strong> ä¸æä¾›å¤æ‚çš„æ§åˆ¶æœºåˆ¶ï¼Œåˆ©ç”¨ IP æä¾›é¢å‘ã€Œæ— è¿æ¥ã€çš„é€šä¿¡æœåŠ¡</li><li>åè®®çœŸçš„éå¸¸ç®€æ´ï¼Œå¤´éƒ¨åªæœ‰ <code>8</code> ä¸ªå­—èŠ‚ï¼ˆ 64 ä½ï¼‰</li></ul><h5 id="UDPæŠ¥æ–‡æ ¼å¼"><a href="#UDPæŠ¥æ–‡æ ¼å¼" class="headerlink" title="UDPæŠ¥æ–‡æ ¼å¼"></a>UDPæŠ¥æ–‡æ ¼å¼</h5><p><img src="https://z201.oss-cn-shanghai.aliyuncs.com/JavaNote/20211124012658.png"></p><h5 id="æŠ¥æ–‡å­—æ®µå«ä¹‰-1"><a href="#æŠ¥æ–‡å­—æ®µå«ä¹‰-1" class="headerlink" title="æŠ¥æ–‡å­—æ®µå«ä¹‰"></a>æŠ¥æ–‡å­—æ®µå«ä¹‰</h5><ul><li><em>Source Prot</em> æºç«¯å£ 16bit èŒƒå›´ 0 ~ 56625</li><li><em>Destination Port</em> ç›®æ ‡ç«¯å£ 16bit èŒƒå›´ 0 ~ 56625</li><li><em>Length</em> é•¿åº¦ 16bit è¡¨ç¤º UDP æ•°æ®æŠ¥é•¿åº¦ï¼ŒåŒ…å« UDP æŠ¥æ–‡å¤´å’Œ UDP æ•°æ®é•¿åº¦ã€‚å› ä¸º UDP æŠ¥æ–‡å¤´é•¿åº¦æ˜¯ 8 ä¸ªå­—èŠ‚ï¼Œæ‰€ä»¥è¿™ä¸ªå€¼æœ€å°ä¸º 8ã€‚</li><li><em>checksum</em> æ ¡éªŒå€¼ 16bit å¯ä»¥æ£€éªŒæ•°æ®åœ¨ä¼ è¾“è¿‡ç¨‹ä¸­æ˜¯å¦è¢«æŸåã€‚</li></ul><h4 id="IP"><a href="#IP" class="headerlink" title="IP"></a>IP</h4><blockquote><p>IPåè®®æ˜¯TCP/IPåè®®çš„æ ¸å¿ƒï¼Œæ‰€æœ‰çš„TCPï¼ŒUDPï¼ŒIMCPï¼ŒIGMPçš„æ•°æ®éƒ½ä»¥IPæ•°æ®æ ¼å¼ä¼ è¾“ã€‚è¦æ³¨æ„çš„æ˜¯ï¼ŒIPä¸æ˜¯å¯é çš„åè®®ï¼Œè¿™æ˜¯è¯´ï¼ŒIPåè®®æ²¡æœ‰æä¾›ä¸€ç§æ•°æ®æœªä¼ è¾¾ä»¥åçš„å¤„ç†æœºåˆ¶ï¼Œè¿™è¢«è®¤ä¸ºæ˜¯ä¸Šå±‚åè®®ï¼šTCPæˆ–UDPè¦åšçš„äº‹æƒ…ã€‚</p></blockquote><ul><li>æ— è¿æ¥ã€éå¯é ã€æ— ç¡®è®¤ã€‚</li><li>IPåè®®æä¾›äº†ä¸€ç§åˆ†å±‚ã€ä¸ç¡¬ä»¶æ— å…³çš„å¯»å€ç³»ç»Ÿï¼Œå®ƒå¯ä»¥åœ¨å¤æ‚çš„è·¯ç”±å¼ç½‘ç»œä¸­ä¼ è¾“æ•°æ®æœåŠ¡ã€‚</li><li>IPåè®®å¯ä»¥å°†å¤šä¸ªç½‘ç»œè¿æ¥èµ·æ¥ï¼Œåœ¨æºåœ°å€å’Œç›®çš„åœ°å€ä¹‹é—´ä¼ è¾“æ•°æ®ï¼Œä»¥é€‚åº”ä¸åŒç½‘ç»œå¯¹æ•°æ®åŒ…çš„è¦æ±‚ã€‚</li></ul><h3 id="HTTP-HTTPS"><a href="#HTTP-HTTPS" class="headerlink" title="HTTP/HTTPS"></a>HTTP/HTTPS</h3><blockquote><p>HTTP å°±æ˜¯è¶…æ–‡æœ¬ä¼ è¾“åè®®ï¼Œä¹Ÿå°±æ˜¯ HyperText Transfer Protocolã€‚HTTP over SSL/TLS ä¹Ÿå°±æ˜¯è¿è¡Œåœ¨ SSL/TLS åè®®ä¸Šçš„ HTTPã€‚</p></blockquote><p><img src="https://z201.oss-cn-shanghai.aliyuncs.com/JavaNote/20211206141044.png"></p><ul><li><p>HTTPé‡è¦é‡Œç¨‹ç¢‘çš„æ—¶é—´ç‚¹</p><ul><li>Http0.9 -&gt; 1991</li></ul></li><li><p>Http1.0 -&gt;1996</p><ul><li>Http 1.1 -&gt; 1999</li></ul></li><li><p>Http2 -&gt; 2015</p></li><li><p>HTML è¶…æ–‡æœ¬æ ‡è®°è¯­è¨€</p></li></ul><h4 id="HTTP1-1"><a href="#HTTP1-1" class="headerlink" title="HTTP1.1"></a>HTTP1.1</h4><blockquote><p>1995 å¹´ï¼Œç½‘æ™¯çš„ Netscape Navigator å’Œå¾®è½¯çš„ Internet Explorer å¼€å§‹äº†è‘—åçš„â€œæµè§ˆå™¨å¤§æˆ˜â€ï¼Œéƒ½å¸Œæœ›åœ¨äº’è”ç½‘ä¸Šå æ®ä¸»å¯¼åœ°ä½ã€‚</p></blockquote><h4 id="HTTP2"><a href="#HTTP2" class="headerlink" title="HTTP2"></a>HTTP2</h4><blockquote><p>HTTP/2 åŸºäº Google çš„ SPDY åè®®ï¼Œæ³¨é‡æ€§èƒ½æ”¹å–„ã€‚</p></blockquote><h4 id="HTTP3"><a href="#HTTP3" class="headerlink" title="HTTP3"></a>HTTP3</h4><blockquote><p>HTTP/3 åŸºäº Google çš„ QUIC åè®®ï¼Œæ˜¯å°†æ¥çš„å‘å±•æ–¹å‘ã€‚</p></blockquote><h4 id="Proxy"><a href="#Proxy" class="headerlink" title="Proxy"></a>Proxy</h4><blockquote><p>Http Proxyæ˜¯Httpåè®®ä¸­çš„ä¸€ä¸ªç¯èŠ‚ï¼Œä¸­è½¬ç«™å¯ä»¥è½¬å‘å®¢æˆ·ç«¯è¯·æ±‚ä¹Ÿå¯ä»¥è½¬å‘æœåŠ¡ç«¯åº”ç­”ã€‚</p></blockquote><ul><li>åŒ¿åä»£ç†ï¼šå®Œå…¨â€œéšåŒ¿â€äº†è¢«ä»£ç†çš„æœºå™¨ï¼Œå¤–ç•Œçœ‹åˆ°çš„åªæ˜¯ä»£ç†æœåŠ¡å™¨ã€‚</li><li>é€æ˜ä»£ç†ï¼šé¡¾åæ€ä¹‰ï¼Œå®ƒåœ¨ä¼ è¾“è¿‡ç¨‹ä¸­æ˜¯â€œé€æ˜å¼€æ”¾â€çš„ï¼Œå¤–ç•Œæ—¢çŸ¥é“ä»£ç†ï¼Œä¹ŸçŸ¥é“å®¢æˆ·ç«¯ã€‚</li><li>æ­£å‘ä»£ç†ï¼šé è¿‘å®¢æˆ·ç«¯ï¼Œä»£è¡¨å®¢æˆ·ç«¯å‘æœåŠ¡å™¨å‘é€è¯·æ±‚ã€‚</li><li>åå‘ä»£ç†ï¼šé è¿‘æœåŠ¡å™¨ç«¯ï¼Œä»£è¡¨æœåŠ¡å™¨å“åº”å®¢æˆ·ç«¯çš„è¯·æ±‚ã€‚</li></ul><h4 id="SSL-TLS"><a href="#SSL-TLS" class="headerlink" title="SSL/TLS"></a>SSL/TLS</h4><blockquote><p><em>TLS</em> æ˜¯<em>SSL</em> çš„æ”¹è‰¯ç‰ˆæœ¬</p></blockquote><h3 id="æ‰©å±•"><a href="#æ‰©å±•" class="headerlink" title="æ‰©å±•"></a>æ‰©å±•</h3><h4 id="æè¿°ä¸‹GETä¸POSTçš„åŒºåˆ«ã€‚"><a href="#æè¿°ä¸‹GETä¸POSTçš„åŒºåˆ«ã€‚" class="headerlink" title="æè¿°ä¸‹GETä¸POSTçš„åŒºåˆ«ã€‚"></a>æè¿°ä¸‹GETä¸POSTçš„åŒºåˆ«ã€‚</h4><ul><li>GETå’ŒPOSTæ˜¯HTTPè¯·æ±‚çš„ä¸¤ç§åŸºæœ¬æ–¹æ³•ã€‚<ul><li>GETï¼šç‰¹å®šæµè§ˆå™¨å’ŒæœåŠ¡å™¨å¯¹URLé•¿åº¦æœ‰é™åˆ¶ï¼Œä¾‹å¦‚ IEå¯¹URLé•¿åº¦çš„é™åˆ¶æ˜¯2083å­—èŠ‚(2K+35)ã€‚ç†è®ºä¸Šæ²¡æœ‰é•¿åº¦é™åˆ¶ï¼Œå…¶é™åˆ¶å–å†³äºæ“ä½œç³» ç»Ÿçš„æ”¯æŒã€‚æ‰€ä»¥GETæäº¤æ—¶ï¼Œä¼ è¾“æ•°æ®å°±ä¼šå—åˆ°URLé•¿åº¦çš„é™åˆ¶ã€‚</li><li>POSTï¼šç”±äºä¸æ˜¯é€šè¿‡URLä¼ å€¼ï¼Œç†è®ºä¸Šæ•°æ®ä¸å—é™ã€‚ä½†å®é™…å„ä¸ªWEBæœåŠ¡å™¨ä¼šè§„å®šå¯¹postæäº¤æ•°æ®å¤§å°è¿›è¡Œé™åˆ¶ã€‚</li></ul></li><li>GETå’ŒPOSTæœ¬è´¨ä¸Šæ²¡æœ‰åŒºåˆ«,åªæ˜¯åœ¨æµè§ˆå™¨ä¸Šç›´è§‚ä½“ç°æ–¹å¼ä¸åŒã€‚GETå’ŒPOSTæœ¬è´¨ä¸Šå°±æ˜¯TCPé“¾æ¥ï¼Œå¹¶æ— å·®åˆ«ã€‚ä½†æ˜¯ç”±äºHTTPçš„è§„å®šå’Œæµè§ˆå™¨/æœåŠ¡å™¨çš„é™åˆ¶ï¼Œå¯¼è‡´ä»–ä»¬åœ¨åº”ç”¨è¿‡ç¨‹ä¸­ä½“ç°å‡ºä¸€äº›ä¸åŒã€‚</li><li>GETäº§ç”Ÿä¸€ä¸ªTCPæ•°æ®åŒ…;POSTäº§ç”Ÿä¸¤ä¸ªTCPæ•°æ®åŒ…ã€‚<ul><li>å¯¹äºGETæ–¹å¼çš„è¯·æ±‚ï¼Œæµè§ˆå™¨ä¼šæŠŠhttp headerå’Œdataä¸€å¹¶å‘é€å‡ºå»ï¼ŒæœåŠ¡å™¨å“åº”200(è¿”å›æ•°æ®);</li><li>è€Œå¯¹äºPOSTï¼Œæµè§ˆå™¨å…ˆå‘é€headerï¼ŒæœåŠ¡å™¨å“åº”100 continueï¼Œæµè§ˆå™¨å†å‘é€dataï¼ŒæœåŠ¡å™¨å“åº”200 ok(è¿”å›æ•°æ®)ã€‚</li><li>åœ¨ç½‘ç»œç¯å¢ƒå¥½çš„æƒ…å†µä¸‹ï¼Œå‘ä¸€æ¬¡åŒ…çš„æ—¶é—´å’Œå‘ä¸¤æ¬¡åŒ…çš„æ—¶é—´å·®åˆ«åŸºæœ¬å¯ä»¥æ— è§†ã€‚è€Œåœ¨ç½‘ç»œç¯å¢ƒå·®çš„æƒ…å†µä¸‹ï¼Œä¸¤æ¬¡åŒ…çš„TCPåœ¨éªŒè¯æ•°æ®åŒ…å®Œæ•´æ€§ä¸Šï¼Œæœ‰éå¸¸å¤§çš„ä¼˜ç‚¹ï¼Œä¸€èˆ¬çš„æµè§ˆPOSTä¼šå‘é€ä¸¤æ¬¡ï¼Œä½†æ˜¯Firefoxå°±å‘é€ä¸€æ¬¡ã€‚</li></ul></li><li>å®‰å…¨æ€§<ul><li>åœ¨æ²¡æœ‰åŠ å¯†çš„æƒ…å†µå®‰å…¨æ€§æ˜¯ä¸€æ ·çš„,åœ¨æµè§ˆå™¨è°ƒè¯•æ¨¡å¼ä¸‹å¯ä»¥çœ‹åˆ°æ‰€æœ‰æ•°æ®çš„ã€‚</li></ul></li></ul><h4 id="æè¿°ä¸‹HTTP-Cookieã€‚"><a href="#æè¿°ä¸‹HTTP-Cookieã€‚" class="headerlink" title="æè¿°ä¸‹HTTP Cookieã€‚"></a>æè¿°ä¸‹HTTP Cookieã€‚</h4><ul><li>ä¸€ä¸ªcookieå°±æ˜¯å­˜å‚¨åœ¨ç”¨æˆ·ä¸»æœºæµè§ˆå™¨ä¸­çš„ä¸€å°æ®µæ–‡æœ¬æ–‡ä»¶ã€‚Cookiesæ˜¯çº¯æ–‡æœ¬å½¢å¼ï¼Œå®ƒä»¬ä¸åŒ…å«ä»»ä½•å¯æ‰§è¡Œä»£ç ã€‚ä¸€ä¸ªWebé¡µé¢æˆ–æœåŠ¡å™¨å‘Šä¹‹æµè§ˆå™¨æ¥å°†è¿™äº›ä¿¡æ¯å­˜å‚¨å¹¶ä¸”åŸºäºä¸€ç³»åˆ—è§„åˆ™åœ¨ä¹‹åçš„æ¯ä¸ªè¯·æ±‚ä¸­éƒ½å°†è¯¥ä¿¡æ¯è¿”å›è‡³æœåŠ¡å™¨ã€‚WebæœåŠ¡å™¨ä¹‹åå¯ä»¥åˆ©ç”¨è¿™äº›ä¿¡æ¯æ¥æ ‡è¯†ç”¨æˆ·ã€‚å¤šæ•°éœ€è¦ç™»å½•çš„ç«™ç‚¹é€šå¸¸ä¼šåœ¨ä½ çš„è®¤è¯ä¿¡æ¯é€šè¿‡åæ¥è®¾ç½®ä¸€ä¸ªcookieï¼Œä¹‹ååªè¦è¿™ä¸ªcookieå­˜åœ¨å¹¶ä¸”åˆæ³•ï¼Œå°±å¯ä»¥è‡ªç”±çš„æµè§ˆè¿™ä¸ªç«™ç‚¹çš„æ‰€æœ‰éƒ¨åˆ†ã€‚å†æ¬¡ï¼Œcookieåªæ˜¯åŒ…å«äº†æ•°æ®ã€‚åœ¨åç»­çš„http è¯·æ±‚ä¸­ï¼Œæµè§ˆå™¨ä¼šå°†cookieå¸¦å›ç»™Web Serverã€‚åŒæ—¶åœ¨æµè§ˆå™¨å…è®¸è„šæœ¬æ‰§è¡Œçš„æƒ…å†µä¸‹ï¼ŒCookieæ˜¯å¯ä»¥è¢«JavaScriptç­‰è„šæœ¬è®¾ç½®çš„ã€‚</li><li>Cookieçš„ç±»åˆ«ã€‚<ul><li>Session Cookieè¿™ä¸ªç±»å‹çš„cookieåªåœ¨ä¼šè¯æœŸé—´å†…æœ‰æ•ˆï¼Œå³å½“å…³é—­æµè§ˆå™¨çš„æ—¶å€™ï¼Œå®ƒä¼šè¢«æµè§ˆå™¨åˆ é™¤ã€‚è®¾ç½®session cookieçš„åŠæ³•æ˜¯ï¼šåœ¨åˆ›å»ºcookieä¸è®¾ç½®Expireså³å¯ã€‚</li><li>Persistent CookieæŒä¹…å‹cookieé¡¾åæ€ä¹‰å°±æ˜¯ä¼šé•¿æœŸåœ¨ç”¨æˆ·ä¼šè¯ä¸­ç”Ÿæ•ˆã€‚å½“ä½ è®¾ç½®cookieçš„å±æ€§Max-Ageä¸º1ä¸ªæœˆçš„è¯ï¼Œé‚£ä¹ˆåœ¨è¿™ä¸ªæœˆé‡Œæ¯ä¸ªç›¸å…³URLçš„httpè¯·æ±‚ä¸­éƒ½ä¼šå¸¦æœ‰è¿™ä¸ªcookieã€‚æ‰€ä»¥å®ƒå¯ä»¥è®°å½•å¾ˆå¤šç”¨æˆ·åˆå§‹åŒ–æˆ–è‡ªå®šä¹‰åŒ–çš„ä¿¡æ¯ï¼Œæ¯”å¦‚ä»€ä¹ˆæ—¶å€™ç¬¬ä¸€æ¬¡ç™»å½•åŠå¼±ç™»å½•æ€ç­‰ã€‚</li><li>Secure cookieå®‰å…¨cookieæ˜¯åœ¨httpsè®¿é—®ä¸‹çš„cookieå½¢æ€ï¼Œä»¥ç¡®ä¿cookieåœ¨ä»å®¢æˆ·ç«¯ä¼ é€’åˆ°Serverçš„è¿‡ç¨‹ä¸­å§‹ç»ˆåŠ å¯†çš„ã€‚ä½†æ˜¯å¿…é¡»æ˜¯åœ¨HTTPSçš„æƒ…å†µæ‰æœ‰æ•ˆæœã€‚</li><li>HttpOnly å±æ€§ï¼Œè¿™ä¸ªæ•°æ®è®¾ç½®ä¸ºtrueåï¼Œå®¢æˆ·ç«¯é€šè¿‡JSæ˜¯æ— æ³•è·å–åˆ°cookieä¿¡æ¯çš„ï¼ˆæš‚æ—¶çš„ï¼‰ã€‚</li></ul></li></ul><h4 id="æè¿°ä¸‹Servlet-Cookie-ä¸Sessionã€‚"><a href="#æè¿°ä¸‹Servlet-Cookie-ä¸Sessionã€‚" class="headerlink" title="æè¿°ä¸‹Servlet Cookie ä¸Sessionã€‚"></a>æè¿°ä¸‹Servlet Cookie ä¸Sessionã€‚</h4><ul><li><p>å…·ä½“æ¥è¯´cookieæœºåˆ¶é‡‡ç”¨çš„æ˜¯åœ¨å®¢æˆ·ç«¯ä¿æŒçŠ¶æ€çš„æ–¹æ¡ˆï¼Œè€Œsessionæœºåˆ¶é‡‡ç”¨çš„æ˜¯åœ¨æœåŠ¡å™¨ç«¯ä¿æŒçŠ¶æ€çš„æ–¹æ¡ˆã€‚</p><ul><li>æœåŠ¡å™¨ç«¯ä¿æŒçŠ¶æ€çš„æ–¹æ¡ˆåœ¨å®¢æˆ·ç«¯ä¹Ÿéœ€è¦ä¿å­˜ä¸€ä¸ªæ ‡è¯†ï¼Œæ‰€ä»¥sessionæœºåˆ¶å¯èƒ½éœ€è¦å€ŸåŠ©äºcookieæœºåˆ¶æ¥è¾¾åˆ°ä¿å­˜æ ‡è¯†çš„ç›®çš„ã€‚</li></ul></li><li><p>Sessionæ˜¯ä»¥cookieä¸ºåŸºç¡€çš„ã€‚åœ¨ä¸€äº›webå¼€å‘çš„ä¹¦ä¸­ï¼Œå¾€å¾€åªæ˜¯ç®€å•çš„æŠŠSessionå’Œcookieä½œä¸ºä¸¤ç§å¹¶åˆ—çš„httpä¼ é€ä¿¡æ¯çš„æ–¹å¼ï¼Œsession cookiesä½äºæœåŠ¡å™¨ç«¯ï¼Œpersistent cookieä½äºå®¢æˆ·ç«¯ã€‚</p></li></ul><ul><li>Cookieä¸æ˜¯å¾ˆå®‰å…¨ï¼Œåˆ«äººå¯ä»¥åˆ†æå­˜æ”¾åœ¨æœ¬åœ°çš„cookieå¹¶è¿›è¡Œcookieæ¬ºéª—è€ƒè™‘åˆ°å®‰å…¨åº”å½“ä½¿ç”¨sessionã€‚</li><li>Sessionä¼šåœ¨ä¸€å®šæ—¶é—´å†…ä¿å­˜åœ¨æœåŠ¡å™¨ä¸Šã€‚å½“è®¿é—®å¢å¤šï¼Œä¼šæ¯”è¾ƒå ç”¨ä½ æœåŠ¡å™¨çš„æ€§èƒ½è€ƒè™‘åˆ°å‡è½»æœåŠ¡å™¨æ€§èƒ½æ–¹é¢ï¼Œåº”å½“ä½¿ç”¨cookieã€‚</li><li>å•ä¸ªCookieä¿å­˜çš„æ•°æ®ä¸èƒ½è¶…è¿‡4Kï¼Œå¾ˆå¤šæµè§ˆå™¨éƒ½é™åˆ¶ä¸€ä¸ªç«™ç‚¹æœ€å¤šä¿å­˜20ä¸ªcookieã€‚</li><li>å…³é—­æµè§ˆå™¨ä¸ä¼šå¯¼è‡´æœåŠ¡ç«¯sessionè¢«åˆ é™¤ï¼ŒæœåŠ¡å™¨ä¸ºsessionè®¾ç½®äº†ä¸€ä¸ªå¤±æ•ˆæ—¶é—´ï¼Œå½“è·ç¦»å®¢æˆ·ä¸Šä¸€æ¬¡ä½¿ç”¨sessionçš„æ—¶é—´è¶…è¿‡äº†è¿™ä¸ªå¤±æ•ˆæ—¶é—´æ—¶ï¼ŒæœåŠ¡å™¨å°±å¯ä»¥è®¤ä¸ºå®¢æˆ·ç«¯å·²ç»åœæ­¢äº†æ´»åŠ¨ï¼Œæ‰ä¼šæŠŠsessionåˆ é™¤ä»¥èŠ‚çœå­˜å‚¨ç©ºé—´ã€‚</li><li>å…³é—­æµè§ˆå™¨ï¼Œåªä¼šæ˜¯æµè§ˆå™¨ç«¯å†…å­˜é‡Œçš„session cookieæ¶ˆå¤±ï¼Œä½†ä¸ä¼šä½¿ä¿å­˜åœ¨æœåŠ¡å™¨ç«¯çš„sessionå¯¹è±¡æ¶ˆå¤±ï¼ŒåŒæ ·ä¹Ÿä¸ä¼šä½¿å·²ç»ä¿å­˜åˆ°ç¡¬ç›˜ä¸Šçš„æŒä¹…åŒ–cookieæ¶ˆå¤±ã€‚</li></ul><h4 id="URIä¸URLçš„åŒºåˆ«"><a href="#URIä¸URLçš„åŒºåˆ«" class="headerlink" title="URIä¸URLçš„åŒºåˆ«"></a>URIä¸URLçš„åŒºåˆ«</h4><h5 id="URL"><a href="#URL" class="headerlink" title="URL"></a>URL</h5><ul><li>RFC1738 (1994.12) Uniform Resource Locator è¡¨ç¤ºèµ„æºçš„ä½ç½®ï¼ŒæœŸæœ›ææä¾›æŸ¥æ‰¾èµ„æºçš„æ–¹æ³•ã€‚</li><li>å®ƒæ˜¯å¯ä»¥å¯¹äº’è”ç½‘ä¸Šèµ„æºä½ç½®è®¿é—®æ–¹å¼å¯¹ä¸€ç§ç®€æ´è¡¨è¾¾ã€‚é€šå¸¸çš„è¡¨ç°æ ¼å¼å¦‚ä¸‹ã€‚</li></ul><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">scheme://host[:port<span class="comment">#]/path/â€¦/[;url-params][?query-string][#anchor]</span></span><br><span class="line"></span><br><span class="line">scheme //æœ‰æˆ‘ä»¬å¾ˆç†Ÿæ‚‰çš„httpã€httpsã€ftpä»¥åŠè‘—åçš„ed2kï¼Œè¿…é›·çš„thunderç­‰ã€‚</span><br><span class="line">host   //HTTPæœåŠ¡å™¨çš„IPåœ°å€æˆ–è€…åŸŸå</span><br><span class="line">port<span class="comment">#  //HTTPæœåŠ¡å™¨çš„é»˜è®¤ç«¯å£æ˜¯80ï¼Œè¿™ç§æƒ…å†µä¸‹ç«¯å£å·å¯ä»¥çœç•¥ã€‚å¦‚æœä½¿ç”¨äº†åˆ«çš„ç«¯å£ï¼Œå¿…é¡»æŒ‡æ˜ï¼Œ</span></span><br><span class="line">ä¾‹å¦‚tomcatçš„é»˜è®¤ç«¯å£æ˜¯8080  http://localhost:8080/</span><br><span class="line">path   //è®¿é—®èµ„æºçš„è·¯å¾„</span><br><span class="line">url-params  //æ‰€å¸¦å‚æ•° </span><br><span class="line">query-string    //å‘é€ç»™httpæœåŠ¡å™¨çš„æ•°æ®</span><br><span class="line">anchor //é”šç‚¹å®šä½</span><br></pre></td></tr></table></figure><h5 id="URN"><a href="#URN" class="headerlink" title="URN"></a>URN</h5><ul><li>RFC2141 (1997.5) Uniform Resource Name ï¼Œèµ„æºæ˜ å°„åç§°ã€‚æ¯”å¦‚</li></ul><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mailto: xxxxx@qq.com</span><br></pre></td></tr></table></figure><h5 id="URI"><a href="#URI" class="headerlink" title="URI"></a>URI</h5><ul><li>RFC1630 (1994.6) Uniform Resource Identifier ç”¨äºåŒºåˆ†èµ„æº , æ˜¯ URL å’Œ URN çš„è¶…é›†ï¼Œç”¨äºå–ä»£URL å’Œ URNæ¦‚å¿µã€‚</li><li>URI å±äºçˆ¶ç±»ï¼Œè€Œ URL å±äº URI çš„å­ç±»ã€‚URL æ˜¯ URI çš„ä¸€ä¸ªå­é›†ã€‚<strong>URIï¼šç»Ÿä¸€èµ„æºæ ‡è¯† URLï¼šç»Ÿä¸€èµ„æºå®šä½ URNï¼šç»Ÿä¸€èµ„æºåç§°ã€‚</strong></li></ul><p><img src="https://z201.oss-cn-shanghai.aliyuncs.com/JavaNote/20211123132409.png"></p><h4 id="TCPå®‰å…¨é—®é¢˜"><a href="#TCPå®‰å…¨é—®é¢˜" class="headerlink" title="TCPå®‰å…¨é—®é¢˜"></a>TCPå®‰å…¨é—®é¢˜</h4><h5 id="SYNæ”»å‡»"><a href="#SYNæ”»å‡»" class="headerlink" title="SYNæ”»å‡»"></a>SYNæ”»å‡»</h5><blockquote><p>åœ¨ä¸‰æ¬¡æ¡æ‰‹è¿‡ç¨‹ä¸­ï¼ŒæœåŠ¡ç«¯æ”¶åˆ°SYN-ACKä¹‹åï¼Œæ”¶åˆ°å®¢æˆ·ç«¯çš„ACKä¹‹å‰TCPè¿æ¥æˆä¸ºåŠè¿æ¥(half-open connect) ï¼Œè¿™ä¸ªæ—¶å€™æœåŠ¡å™¨å¤„äºSYN_REVDçŠ¶æ€ï¼Œæ”¶åˆ°ACKä¹‹åæœåŠ¡å™¨æ‰èƒ½è½¬å…¥ESTABLISHEDçŠ¶æ€ã€‚</p></blockquote><ul><li>SYN æ”»å‡»æŒ‡çš„æ˜¯ï¼Œæ”»å‡»å®¢æˆ·ç«¯åœ¨çŸ­æ—¶é—´å†…ä¼ªé€ å¤§é‡ä¸å­˜åœ¨çš„IPåœ°å€ï¼Œå‘æœåŠ¡å™¨ä¸æ–­åœ°å‘é€SYNåŒ…ï¼ŒæœåŠ¡å™¨å›å¤ç¡®è®¤åŒ…ï¼Œå¹¶ç­‰å¾…å®¢æˆ·çš„ç¡®è®¤ã€‚ç”±äºæºåœ°å€æ˜¯ä¸å­˜åœ¨çš„ï¼ŒæœåŠ¡å™¨éœ€è¦ä¸æ–­çš„é‡å‘ç›´è‡³è¶…æ—¶ï¼Œè¿™äº›ä¼ªé€ çš„SYNåŒ…å°†é•¿æ—¶é—´å ç”¨æœªè¿æ¥é˜Ÿåˆ—ï¼Œæ­£å¸¸çš„SYNè¯·æ±‚è¢«ä¸¢å¼ƒï¼Œå¯¼è‡´ç›®æ ‡ç³»ç»Ÿè¿è¡Œç¼“æ…¢ï¼Œä¸¥é‡è€…ä¼šå¼•èµ·ç½‘ç»œå µå¡ç”šè‡³ç³»ç»Ÿç˜«ç—ªã€‚</li></ul><h5 id="SYNæ£€æµ‹"><a href="#SYNæ£€æµ‹" class="headerlink" title="SYNæ£€æµ‹"></a>SYNæ£€æµ‹</h5><ul><li>åœ¨Linux/Unixä¸Šå¯ä»¥ä½¿ç”¨ç³»ç»Ÿè‡ªå¸¦çš„netstatså‘½ä»¤æ¥æ£€æµ‹SYNæ”»å‡»ã€‚</li></ul><h5 id="SYNæ”»å‡»é˜²èŒƒ"><a href="#SYNæ”»å‡»é˜²èŒƒ" class="headerlink" title="SYNæ”»å‡»é˜²èŒƒ"></a>SYNæ”»å‡»é˜²èŒƒ</h5><h6 id="è®¾ç½®è¶…æ—¶æ—¶é—´ä¸ç¼“å­˜åˆ—é˜Ÿã€‚"><a href="#è®¾ç½®è¶…æ—¶æ—¶é—´ä¸ç¼“å­˜åˆ—é˜Ÿã€‚" class="headerlink" title="è®¾ç½®è¶…æ—¶æ—¶é—´ä¸ç¼“å­˜åˆ—é˜Ÿã€‚"></a>è®¾ç½®è¶…æ—¶æ—¶é—´ä¸ç¼“å­˜åˆ—é˜Ÿã€‚</h6><ul><li><p>åº”ç”¨å±‚connectè¶…æ—¶æ—¶é—´è°ƒæ•´ã€‚</p></li><li><p>æ“ä½œç³»ç»Ÿå†…æ ¸é™åˆ¶è°ƒæ•´ã€‚</p><ul><li>æœåŠ¡å™¨ç«¯SYN_RCVçŠ¶æ€</li><li>net.ipv4.tcp_max_syn_backlog:  SYN_RCVDçŠ¶æ€çš„æœ€å¤§è¿æ¥æ•°ã€‚</li><li>net.ipv4.tcp_synack_retries: è¢«åŠ¨å»ºç«‹æ—¶,å‘SYN/ACKçš„é‡è¯•æ¬¡æ•°ã€‚</li><li>å®¢æˆ·ç«¯SYN_SENTçŠ¶æ€</li><li>net.ipv4.tcp_syn_retries = 6 ä¸»åŠ¨å»ºç«‹è¿æ¥æ—¶ï¼Œå‘SYNçš„é‡è¯•æ¬¡æ•°ã€‚</li><li>net.ipv4.ip_local_port_range = 32768 60999 å»ºç«‹è¿æ¥æ—¶çš„æœ¬åœ°ç«¯å£å¯ç”¨èŒƒå›´ã€‚</li><li>ACCEPTåˆ—é˜Ÿè®¾ç½®</li></ul></li></ul>]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;æœ¬ç« æ˜¯æ•´ç†çŸ¥è¯†å†…å®¹ï¼Œä¸ºå¼ºåŒ–çŸ¥è¯†é•¿æœŸæ›´æ–°ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id=&quot;ç½‘ç»œåè®®&quot;&gt;&lt;a href=&quot;#ç½‘ç»œåè®®&quot; class=&quot;headerlink&quot; title=&quot;ç½‘ç»œåè®®&quot;&gt;&lt;/a&gt;ç½‘ç»œåè®®&lt;/h3&gt;&lt;blockquote&gt;
&lt;p&gt;ç½‘ç»œåè®®æ˜¯ä¸€ç»„ç¡®å®šçš„è§„åˆ™ï¼Œè¿™äº›è§„åˆ™ç¡®å®šå¦‚ä½•åœ¨åŒä¸€ç½‘ç»œä¸­çš„ä¸åŒè®¾å¤‡ä¹‹é—´ä¼ è¾“æ•°æ®ã€‚æœ¬è´¨ä¸Šï¼Œå®ƒå…è®¸è¿æ¥çš„è®¾å¤‡å½¼æ­¤é€šä¿¡ï¼Œè€Œä¸ç®¡å…¶å†…éƒ¨è¿‡ç¨‹ï¼Œç»“æ„æˆ–è®¾è®¡æ˜¯å¦æœ‰å·®å¼‚ã€‚ï¼ˆä¸¤ä¸ªç«¯ç‚¹éƒ½éœ€è¦äº†è§£åè®®æ‰èƒ½è¿›è¡Œäº¤æµï¼‰ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id=&quot;OSIç½‘ç»œæ¨¡å‹&quot;&gt;&lt;a href=&quot;#OSIç½‘ç»œæ¨¡å‹&quot; class=&quot;headerlink&quot; title=&quot;OSIç½‘ç»œæ¨¡å‹&quot;&gt;&lt;/a&gt;OSIç½‘ç»œæ¨¡å‹&lt;/h3&gt;&lt;blockquote&gt;
&lt;p&gt;OSIè‹±æ–‡å…¨ç§°å«åš(Open System Interconnection Model). ä¸­æ–‡å…¨ç§°å«åšå¼€æ”¾å¼ç³»ç»Ÿäº’è”æ¨¡å‹. ä¹Ÿå«åšç½‘ç»œ7å±‚æ¨¡å‹ï¼Œä»ä¸‹åˆ°ä¸Šä¾æ¬¡ä¸ºï¼Œç‰©ç†å±‚ï¼Œæ•°æ®é“¾è·¯å±‚ï¼Œç½‘ç»œå±‚ï¼Œä¼ è¾“å±‚ï¼Œä¼šè¯å±‚ï¼Œè¡¨ç¤ºå±‚ï¼Œåº”ç”¨å±‚ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;ul&gt;
&lt;li&gt;OISæ¦‚å¿µæ¨¡å‹&lt;strong&gt;å®é™…ä¸Šå¹¶æ²¡æœ‰çœŸæ­£å®ç°è¿‡ï¼Œä½†æ˜¯æˆ‘ä»¬éœ€è¦å‚è€ƒè¿™ä¸ªåˆ†å±‚æ¥ç†è§£ç½‘ç»œåè®®&lt;/strong&gt;ä¸€èˆ¬æ¥è¯´æŠŠ5-7å±‚å«åšä¸Šå±‚ï¼Œ1-4å±‚å«åšä¸‹å±‚ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img src=&quot;https://z201.oss-cn-shanghai.aliyuncs.com/JavaNote/20211123214245.png&quot;&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;7-åº”ç”¨å±‚ -&amp;gt; ç½‘ç»œæµç¨‹åº”ç”¨ï¼ˆè¡¨ç¤ºçš„æ˜¯ç”¨æˆ·ç•Œé¢ï¼Œä¾‹å¦‚Telnetï¼ŒHTTPã€FTPã€TFTPã€SMTPã€SNMPã€DNSã€TELNETã€HTTPSã€POP3ã€DHCPï¼‰&lt;/li&gt;
&lt;li&gt;6-è¡¨ç¤ºå±‚ -&amp;gt; æ•°æ®è¡¨ç¤º (æ•°æ®å¦‚ä½•å‘ˆç°ï¼Œç‰¹æ®Šå¤„ç†-&amp;gt;ä¾‹å¦‚åŠ å¯†ï¼Œæ¯”å¦‚JPEGã€ASCLLã€EBCDICã€åŠ å¯†æ ¼å¼ç­‰ï¼‰&lt;/li&gt;
&lt;li&gt;5-ä¼šè¯å±‚ -&amp;gt; ä¸»æœºé—´çš„é€šä¿¡ï¼ˆå°†ä¸åŒåº”ç”¨ç¨‹åºçš„æ•°æ®åˆ†å¼€ã€‚å»ºç«‹ï¼Œç®¡ç†å’Œç»ˆæ­¢åº”ç”¨ä¹‹é—´çš„ä¼šè¯ï¼‰&lt;/li&gt;
&lt;li&gt;4-ä¼ è¾“å±‚ -&amp;gt; ç«¯åˆ°ç«¯è¿æ¥ï¼ˆå¯é æˆ–ä¸å¯é çš„ä¼ é€’ï¼Œä¾‹å¦‚TCPï¼ŒUDP)&lt;/li&gt;
&lt;li&gt;3-ç½‘ç»œå±‚ -&amp;gt; åœ°å€å’Œæœ€ä½³è·¯å¾„ï¼ˆæä¾›è·¯ç”±å™¨ç”¨äºè·¯å¾„çš„é€»è¾‘å¯»å€ï¼Œæ¯”å¦‚ICMP IGMP IP(IPV4 IPV6)ï¼‰&lt;/li&gt;
&lt;li&gt;2-æ•°æ®é“¾è·¯å±‚ -&amp;gt; åª’ä½“è®¿é—®ï¼ˆå°†ä½ç»„åˆæˆå­—èŠ‚ï¼Œå°†å­—èŠ‚ç»„åˆæˆå¸§ï¼Œä½¿ç”¨MACåœ°å€è®¿é—®ï¼Œé”™è¯¯æ£€æµ‹-æ¯”å¦‚HDLCï¼‰&lt;/li&gt;
&lt;li&gt;1-ç‰©ç†å±‚ -&amp;gt; äºŒè¿›åˆ¶ä¼ è¾“ï¼ˆåœ¨è®¾å¤‡ä¹‹é—´ç§»åŠ¨bitsã€‚ä¾‹å¦‚V.35ï¼‰&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;TCP-IPç½‘ç»œæ¨¡å‹&quot;&gt;&lt;a href=&quot;#TCP-IPç½‘ç»œæ¨¡å‹&quot; class=&quot;headerlink&quot; title=&quot;TCP/IPç½‘ç»œæ¨¡å‹&quot;&gt;&lt;/a&gt;TCP/IPç½‘ç»œæ¨¡å‹&lt;/h3&gt;&lt;blockquote&gt;
&lt;p&gt;TCP/IP æ¨¡å‹å’ŒOSIç›¸æ¯”ä¼šç®€å•ä¸€ç‚¹ï¼Œåªæœ‰å››å±‚ï¼Œåˆ†åˆ«ä¸ºæ•°æ®é“¾è·¯å±‚ï¼Œç½‘ç»œå±‚ï¼Œä¼ è¾“å±‚å’Œåº”ç”¨å±‚ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;img src=&quot;https://z201.oss-cn-shanghai.aliyuncs.com/JavaNote/20211123214318.png&quot;&gt;&lt;/p&gt;
&lt;h3 id=&quot;OSIæ¨¡å‹ä¸TCP-IPæ¨¡å‹&quot;&gt;&lt;a href=&quot;#OSIæ¨¡å‹ä¸TCP-IPæ¨¡å‹&quot; class=&quot;headerlink&quot; title=&quot;OSIæ¨¡å‹ä¸TCP/IPæ¨¡å‹&quot;&gt;&lt;/a&gt;OSIæ¨¡å‹ä¸TCP/IPæ¨¡å‹&lt;/h3&gt;&lt;p&gt;&lt;img src=&quot;https://z201.oss-cn-shanghai.aliyuncs.com/JavaNote/20211123215305.png&quot;&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;4-åº”ç”¨å±‚ -&amp;gt; å¯¹åº”äºOSIçš„5-7å±‚&lt;/li&gt;
&lt;li&gt;3-ä¼ è¾“å±‚ -&amp;gt; è¿™ä¸ªæ˜¯å’ŒOSIçš„ç¬¬å››å±‚æƒ³åŒçš„&lt;/li&gt;
&lt;li&gt;2-ç½‘ç»œå±‚ -&amp;gt; è¿™ä¸ªæ˜¯å’ŒOSIçš„ç¬¬3ç½‘ç»œå±‚å¯¹åº”çš„&lt;/li&gt;
&lt;li&gt;1-ç½‘ç»œè®¿é—®å±‚ -&amp;gt; è¿™ä¸ªæ˜¯å’ŒOSIçš„ç¬¬1-2å±‚æ‰€å¯¹åº”çš„&lt;/li&gt;
&lt;/ul&gt;
    
    </summary>
    
    
      <category term="çŸ¥è¯†ç‚¹" scheme="https://z201.cn/categories/%E7%9F%A5%E8%AF%86%E7%82%B9/"/>
    
    
      <category term="Http" scheme="https://z201.cn/tags/Http/"/>
    
      <category term="Tcp" scheme="https://z201.cn/tags/Tcp/"/>
    
      <category term="Udp" scheme="https://z201.cn/tags/Udp/"/>
    
  </entry>
  
  <entry>
    <title>MySQLåŸºç¡€ï¼ˆå››ï¼‰</title>
    <link href="https://z201.cn/2020/12/29/MySQL%E5%9F%BA%E7%A1%80%EF%BC%88%E5%9B%9B%EF%BC%89/"/>
    <id>https://z201.cn/2020/12/29/MySQL%E5%9F%BA%E7%A1%80%EF%BC%88%E5%9B%9B%EF%BC%89/</id>
    <published>2020-12-29T01:43:58.000Z</published>
    <updated>2021-11-24T10:25:05.937Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>æœ¬ç« æ˜¯æ•´ç†çŸ¥è¯†å†…å®¹ï¼Œä¸ºå¼ºåŒ–çŸ¥è¯†é•¿æœŸæ›´æ–°ã€‚</p></blockquote><h2 id="ç»ƒæ‰‹é¡¹ç›®"><a href="#ç»ƒæ‰‹é¡¹ç›®" class="headerlink" title="ç»ƒæ‰‹é¡¹ç›®"></a>ç»ƒæ‰‹é¡¹ç›®</h2><h3 id="ç‰›å®¢ç½‘"><a href="#ç‰›å®¢ç½‘" class="headerlink" title="ç‰›å®¢ç½‘"></a>ç‰›å®¢ç½‘</h3><h4 id="å‡†å¤‡ä¸€ä¸ªmysql-5-7çš„æ•°æ®åº“"><a href="#å‡†å¤‡ä¸€ä¸ªmysql-5-7çš„æ•°æ®åº“" class="headerlink" title="å‡†å¤‡ä¸€ä¸ªmysql 5.7çš„æ•°æ®åº“"></a>å‡†å¤‡ä¸€ä¸ªmysql 5.7çš„æ•°æ®åº“</h4><h4 id="é…ç½®æœ¬åœ°æ•°æ®åº“"><a href="#é…ç½®æœ¬åœ°æ•°æ®åº“" class="headerlink" title="é…ç½®æœ¬åœ°æ•°æ®åº“"></a>é…ç½®æœ¬åœ°æ•°æ®åº“</h4><ul><li><p><a href="https://launchpad.net/test-db/employees-db-1/1.0.6" target="_blank" rel="noopener">https://launchpad.net/test-db/employees-db-1/1.0.6</a> ä¸‹è½½æ–‡ä»¶ <strong>employees_db-full-1.0.6.tar.bz2</strong></p></li><li><p>è§£å‹æ–‡ä»¶</p></li></ul><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">âœ  employees_db tree </span><br><span class="line">.</span><br><span class="line">â”œâ”€â”€ Changelog</span><br><span class="line">â”œâ”€â”€ README</span><br><span class="line">â”œâ”€â”€ employees.sql</span><br><span class="line">â”œâ”€â”€ employees_partitioned.sql</span><br><span class="line">â”œâ”€â”€ employees_partitioned2.sql</span><br><span class="line">â”œâ”€â”€ employees_partitioned3.sql</span><br><span class="line">â”œâ”€â”€ load_departments.dump</span><br><span class="line">â”œâ”€â”€ load_dept_emp.dump</span><br><span class="line">â”œâ”€â”€ load_dept_manager.dump</span><br><span class="line">â”œâ”€â”€ load_employees.dump</span><br><span class="line">â”œâ”€â”€ load_salaries.dump</span><br><span class="line">â”œâ”€â”€ load_titles.dump</span><br><span class="line">â”œâ”€â”€ objects.sql</span><br><span class="line">â”œâ”€â”€ test_employees_md5.sql</span><br><span class="line">â””â”€â”€ test_employees_sha.sql</span><br></pre></td></tr></table></figure><ul><li>åœ¨å°†æ–‡ä»¶å¯¼å…¥æ•°æ®åº“</li></ul><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql -uroot -p -t &lt; employees.sql</span><br></pre></td></tr></table></figure><h4 id="è§£å†³é—®é¢˜"><a href="#è§£å†³é—®é¢˜" class="headerlink" title="è§£å†³é—®é¢˜"></a>è§£å†³é—®é¢˜</h4><ul><li>employees.sql ä¿®æ”¹å†…å®¹</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 38è¡Œ set storage_engine = InnoDB; æ›¿æ¢</span></span><br><span class="line"><span class="keyword">set</span> default_storage_engine = <span class="keyword">InnoDB</span>;</span><br><span class="line"><span class="comment"># 44è¡Œ select CONCAT('storage engine: ', @@storage_engine) as INFO; æ›¿æ¢</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">CONCAT</span>(<span class="string">'storage engine: '</span>, @@default_storage_engine) <span class="keyword">as</span> INFO;</span><br></pre></td></tr></table></figure><ul><li>æ³¨æ„å¯¼å…¥çš„æ—¶å€™ä¼šå‡ºç°æ–‡ä»¶æ‰“ä¸å¼€çš„é—®é¢˜</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="string">'LOADING departments'</span> <span class="keyword">as</span> <span class="string">'INFO'</span>;</span><br><span class="line">source /home/employees_db/load_departments.dump ;</span><br><span class="line"><span class="keyword">SELECT</span> <span class="string">'LOADING employees'</span> <span class="keyword">as</span> <span class="string">'INFO'</span>;</span><br><span class="line">source /home/employees_db/load_employees.dump ;</span><br><span class="line"><span class="keyword">SELECT</span> <span class="string">'LOADING dept_emp'</span> <span class="keyword">as</span> <span class="string">'INFO'</span>;</span><br><span class="line">source /home/employees_db/load_dept_emp.dump ;</span><br><span class="line"><span class="keyword">SELECT</span> <span class="string">'LOADING dept_manager'</span> <span class="keyword">as</span> <span class="string">'INFO'</span>;</span><br><span class="line">source /home/employees_db/load_dept_manager.dump ;</span><br><span class="line"><span class="keyword">SELECT</span> <span class="string">'LOADING titles'</span> <span class="keyword">as</span> <span class="string">'INFO'</span>;</span><br><span class="line">source /home/employees_db/load_titles.dump ;</span><br><span class="line"><span class="keyword">SELECT</span> <span class="string">'LOADING salaries'</span> <span class="keyword">as</span> <span class="string">'INFO'</span>;</span><br><span class="line">source /home/employees_db/load_salaries.dump ;</span><br></pre></td></tr></table></figure><ul><li><p>è¿™é‡Œè¦å°†æ–‡ä»¶æ­£ç¡®çš„è·¯å¾„å†™è¿›å»ã€‚</p></li><li><p>å¦‚æœæ˜¯æœ¬åœ°çš„dockerç¯å¢ƒéƒ¨ç½²mysqlï¼Œå¯ä»¥ä½¿ç”¨docker cp å‘½ä»¤å°†æ–‡ä»¶å¤åˆ¶åˆ°å®¹å™¨ä¸­ã€‚åœ¨ç™»é™†åˆ°å®¹å™¨æ‰§è¡Œå¯¼å…¥è„šæœ¬</p></li></ul><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">// ä»å®¿ä¸»æœºå™¨æ‹·è´åˆ°å®¹å™¨ä¸­</span><br><span class="line">docker cp ~/Downloads/employees_db laughing_black:/home</span><br><span class="line">// laughing_black æ˜¯å®¹å™¨çš„åç§°</span><br><span class="line"></span><br><span class="line">// ä»å®¹å™¨ä¸­æ‹·è´ä¼šå®¿ä¸»æœºå™¨ä¸­</span><br><span class="line">docker cp laughing_black:/employees_db.sql .</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;blockquote&gt;
&lt;p&gt;æœ¬ç« æ˜¯æ•´ç†çŸ¥è¯†å†…å®¹ï¼Œä¸ºå¼ºåŒ–çŸ¥è¯†é•¿æœŸæ›´æ–°ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&quot;ç»ƒæ‰‹é¡¹ç›®&quot;&gt;&lt;a href=&quot;#ç»ƒæ‰‹é¡¹ç›®&quot; class=&quot;headerlink&quot; title=&quot;ç»ƒæ‰‹é¡¹ç›®&quot;&gt;&lt;/a&gt;ç»ƒæ‰‹é¡¹ç›®&lt;/h2&gt;&lt;h3 id=&quot;ç‰›å®¢
      
    
    </summary>
    
    
      <category term="å®è·µ" scheme="https://z201.cn/categories/%E5%AE%9E%E8%B7%B5/"/>
    
    
      <category term="MySQL" scheme="https://z201.cn/tags/MySQL/"/>
    
  </entry>
  
  <entry>
    <title>Tcpdumpå…¥é—¨</title>
    <link href="https://z201.cn/2020/12/20/Tcpdump%E5%85%A5%E9%97%A8/"/>
    <id>https://z201.cn/2020/12/20/Tcpdump%E5%85%A5%E9%97%A8/</id>
    <published>2020-12-20T13:30:25.000Z</published>
    <updated>2021-12-20T17:12:02.503Z</updated>
    
    <content type="html"><![CDATA[<h2 id="tcpdump"><a href="#tcpdump" class="headerlink" title="tcpdump"></a>tcpdump</h2><blockquote><p>dump the traffic on a networkï¼Œæ ¹æ®ä½¿ç”¨è€…çš„å®šä¹‰å¯¹ç½‘ç»œä¸Šçš„æ•°æ®åŒ…è¿›è¡Œæˆªè·çš„åŒ…åˆ†æå·¥å…·ã€‚</p></blockquote><h3 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h3><h4 id="linux"><a href="#linux" class="headerlink" title="linux"></a>linux</h4><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">yum install tcpdump</span><br><span class="line">[root@~]<span class="comment"># tcpdump --v</span></span><br><span class="line">tcpdump version 4.9.2</span><br><span class="line">libpcap version 1.5.3</span><br><span class="line">OpenSSL 1.0.2k-fips  26 Jan 2017</span><br></pre></td></tr></table></figure><h4 id="Mac"><a href="#Mac" class="headerlink" title="Mac"></a>Mac</h4><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">brew install tcpdump</span><br><span class="line">âœ  ~ tcpdump --v</span><br><span class="line">tcpdump version 4.99.1</span><br><span class="line">libpcap version 1.10.1</span><br><span class="line">OpenSSL 1.1.1k  25 Mar 2021</span><br></pre></td></tr></table></figure><a id="more"></a><h3 id="å‚æ•°"><a href="#å‚æ•°" class="headerlink" title="å‚æ•°"></a>å‚æ•°</h3><ul><li><code>-A  </code>  ä»¥ASCIIæ ¼å¼æ‰“å°å‡ºæ‰€æœ‰åˆ†ç»„ï¼Œå¹¶å°†é“¾è·¯å±‚çš„å¤´æœ€å°åŒ–</li><li><code>-d </code>   å°†åŒ¹é…ä¿¡æ¯åŒ…çš„ä»£ç ä»¥äººä»¬èƒ½å¤Ÿç†è§£çš„æ±‡ç¼–æ ¼å¼ç»™å‡º</li><li><code>-D </code>   æ‰“å°å‡ºç³»ç»Ÿä¸­æ‰€æœ‰å¯ä»¥ç”¨tcpdumpæˆªåŒ…çš„ç½‘ç»œæ¥å£</li><li><code>-ddd</code>    å°†åŒ¹é…ä¿¡æ¯åŒ…çš„ä»£ç ä»¥åè¿›åˆ¶çš„å½¢å¼è¾“å‡º</li><li><code>-e</code>    åœ¨è¾“å‡ºè¡Œæ‰“å°å‡ºæ•°æ®é“¾è·¯å±‚çš„å¤´éƒ¨ä¿¡æ¯</li><li><code>-f  </code>  å°†å¤–éƒ¨çš„Internetåœ°å€ä»¥æ•°å­—çš„å½¢å¼æ‰“å°å‡ºæ¥</li><li><code>-l </code>   ä½¿æ ‡å‡†è¾“å‡ºå˜ä¸ºç¼“å†²è¡Œå½¢å¼</li><li><code>-L</code>    åˆ—å‡ºç½‘ç»œæ¥å£çš„å·²çŸ¥æ•°æ®é“¾è·¯</li><li><code>-n</code>    ä¸æŠŠç½‘ç»œåœ°å€è½¬æ¢æˆåå­—</li><li><code>-N</code>    ä¸è¾“å‡ºä¸»æœºåä¸­çš„åŸŸåéƒ¨åˆ†ï¼Œå¦‚â€œkongove.ubuntu.cnâ€åªè¾“å‡ºâ€œkongoveâ€</li><li><code>-O</code>    ä¸è¿è¡Œåˆ†ç»„åˆ†ç»„åŒ¹é…ï¼ˆpacket-matchingï¼‰ä»£ç ä¼˜åŒ–ç¨‹åº</li><li><code>-p </code>   ä¸å°†ç½‘ç»œæ¥å£è®¾ç½®æˆæ··æ‚æ¨¡å¼</li><li><code>-q </code>   å¿«é€Ÿè¾“å‡ºï¼Œåªè¾“å‡ºè¾ƒå°‘çš„åè®®ä¿¡æ¯</li><li><code>-S </code>   å°†tcpçš„åºåˆ—å·ä»¥ç»å¯¹å€¼å½¢å¼è¾“å‡ºï¼Œè€Œä¸æ˜¯ç›¸å¯¹å€¼</li><li><code>-t</code>    åœ¨è¾“å‡ºçš„æ¯ä¸€è¡Œä¸æ‰“å°æ—¶é—´æˆ³</li><li><code>-u</code>    è¾“å‡ºæœªè§£ç çš„NFSå¥æŸ„</li><li><code>-v </code>   è¾“å‡ºä¸€ä¸ªç¨å¾®è¯¦ç»†çš„ä¿¡æ¯ï¼Œä¾‹å¦‚åœ¨ipåŒ…ä¸­å¯ä»¥åŒ…æ‹¬ttlå’ŒæœåŠ¡ç±»å‹çš„ä¿¡æ¯</li><li><code>-vv </code>   è¾“å‡ºè¯¦ç»†çš„æŠ¥æ–‡ä¿¡æ¯</li><li><code>-c count </code>   æŒ‡å®šç›‘å¬æ•°æ®åŒ…æ•°é‡ï¼Œå½“æ”¶åˆ°æŒ‡å®šçš„åŒ…çš„æ•°ç›®åï¼Œtcpdumpå°±ä¼šåœæ­¢</li><li><code>-C file_size</code>    é™å®šæ•°æ®åŒ…å†™å…¥æ–‡ä»¶å¤§å°</li><li><code>-F file</code>    ä»æŒ‡å®šçš„æ–‡ä»¶ä¸­è¯»å–è¡¨è¾¾å¼,å¿½ç•¥å…¶å®ƒçš„è¡¨è¾¾å¼</li><li><code>-i interface</code>    æŒ‡å®šç›‘å¬ç½‘ç»œæ¥å£</li><li><code>-m module</code>    æ‰“å¼€æŒ‡å®šçš„SMI MIBç»„ä»¶</li><li><code>-M secret </code>   å¦‚æœtcpæŠ¥æ–‡ä¸­å­˜åœ¨TCP-MD5é€‰é¡¹ï¼Œåˆ™éœ€è¦ç”¨secretä½œä¸ºå…±äº«çš„éªŒè¯ç ç”¨äºéªŒè¯TCP-MD5é€‰é€‰é¡¹æ‘˜è¦ï¼ˆè¯¦è§RFC 2385ï¼‰<br>-r file    ä»æŒ‡å®šçš„æ–‡ä»¶ä¸­è¯»å–åŒ…(è¿™äº›åŒ…ä¸€èˆ¬é€šè¿‡-wé€‰é¡¹äº§ç”Ÿ)</li><li><code>-s snaplen</code>    ä»æ¯ä¸ªåˆ†ç»„ä¸­è¯»å–æœ€å¼€å§‹çš„snaplenä¸ªå­—èŠ‚ï¼Œè€Œä¸æ˜¯é»˜è®¤çš„68ä¸ªå­—èŠ‚</li><li><code>-T type </code>   å°†æˆªå–çš„æ•°æ®åŒ…ç›´æ¥è§£é‡Šä¸ºæŒ‡å®šç±»å‹çš„æŠ¥æ–‡ï¼Œå¸¸è§ç±»å‹æœ‰rpcï¼ˆè¿œç¨‹è¿‡ç¨‹è°ƒç”¨ï¼‰å’Œsnmpï¼ˆç®€å•ç½‘ç»œç®¡ç†åè®®ï¼‰ï¼Œè¿˜åŒ…æ‹¬aodvã€cnfpã€rpcã€rtpã€rtcpã€snmpã€tftpã€vatã€wbç­‰<br>-w file    æŒ‡å®šå°†ç›‘å¬åˆ°çš„æ•°æ®åŒ…å†™å…¥æ–‡ä»¶ï¼Œä¸åˆ†æå’Œæ‰“å°æ•°æ®åŒ…</li><li><code>-W filecount </code>   é™å®šèƒ½å†™å…¥æ–‡ä»¶æ•°æ®åŒ…çš„æ•°é‡</li><li><code>-E </code>spi@ipaddr algo:secret,â€¦    ç”¨spi@ipaddr algo:secretè§£å¯†é‚£äº›ä»¥addrä½œä¸ºåœ°å€ï¼Œå¹¶ä¸”åŒ…å«äº†å®‰å…¨å‚æ•°ç´¢å¼•å€¼spiçš„IPsec ESPåˆ†ç»„</li></ul><h3 id="å‘½ä»¤æ ¼å¼"><a href="#å‘½ä»¤æ ¼å¼" class="headerlink" title="å‘½ä»¤æ ¼å¼"></a>å‘½ä»¤æ ¼å¼</h3><blockquote><p>tcpdumpé‡‡ç”¨å‘½ä»¤è¡Œæ–¹å¼ï¼Œå®ƒçš„å‘½ä»¤æ ¼å¼ä¸ºï¼š</p></blockquote><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tcpdump [ -adeflnNOpqStvx ] [ -c æ•°é‡ ] [ -F æ–‡ä»¶å ] [ -i ç½‘ç»œæ¥å£ ] [ -r æ–‡ä»¶å] [ -s snaplen ]  [ -T ç±»å‹ ] [ -w æ–‡ä»¶å ] [è¡¨è¾¾å¼ ]</span><br></pre></td></tr></table></figure><h3 id="è¡¨è¾¾å¼"><a href="#è¡¨è¾¾å¼" class="headerlink" title="è¡¨è¾¾å¼"></a>è¡¨è¾¾å¼</h3><h3 id="æ‰©å±•"><a href="#æ‰©å±•" class="headerlink" title="æ‰©å±•"></a>æ‰©å±•</h3><h4 id="æŒ‡å®šè¿è¡Œæ—¶é—´"><a href="#æŒ‡å®šè¿è¡Œæ—¶é—´" class="headerlink" title="æŒ‡å®šè¿è¡Œæ—¶é—´"></a>æŒ‡å®šè¿è¡Œæ—¶é—´</h4><blockquote><p>tcpdumpé€šå¸¸éƒ½æ˜¯æ‰‹åŠ¨è¿è¡Œï¼Œéœ€è¦ä½¿ç”¨ç±»ä¼¼Ctrl+Céƒ½æ–¹å¼ç»ˆç»“ï¼Œæƒ³æ§åˆ¶è¿è¡Œæ—¶é—´ä¸ç”¨æ‰‹åŠ¨åœæ­¢ç¨‹åºã€‚</p></blockquote><ul><li>æ–¹æ³•ä¸€ è¶…æ—¶</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">timeout 5400 tcpdump -i eth0 <span class="string">'port 8080'</span> -w myfile</span><br></pre></td></tr></table></figure><ul><li>æ–¹æ³•äºŒ ç»„åˆ <code>-G {sec}</code> (æ¯ x ç§’è½®æ¢è½¬å‚¨æ–‡ä»¶)å’Œ <code>-W {count}</code> (é™åˆ¶è½¬å‚¨æ–‡ä»¶çš„æ•°é‡),å°†è¿è¡Œ 15 ç§’ç„¶ååœæ­¢ã€‚</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tcpdump -G 15 -W 1 -w myfile.pcap -i eth0 <span class="string">'port 8080'</span></span><br></pre></td></tr></table></figure><h4 id="æŒ‡å®šé—´éš”ä¿å­˜"><a href="#æŒ‡å®šé—´éš”ä¿å­˜" class="headerlink" title="æŒ‡å®šé—´éš”ä¿å­˜"></a>æŒ‡å®šé—´éš”ä¿å­˜</h4><ul><li>æ–¹æ³•ä¸€ -G 600 600sä¿å­˜ä¸€æ¬¡ -i æŒ‡å®šç½‘å¡ -s -w ä¿å­˜æ–‡ä»¶çš„æ ¼å¼</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tcpdump -i lo -s0 -G 600  -w %Y_%m%d_%H%M_%S.pcap</span><br></pre></td></tr></table></figure><ul><li>æ–¹æ³•äºŒ -C 5 æ¯5Mä¿å­˜ä¸€ä¸ªåŒ…</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tcpdump -i lo -s0 -C 5 -Z root -w eth0.pcap</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;tcpdump&quot;&gt;&lt;a href=&quot;#tcpdump&quot; class=&quot;headerlink&quot; title=&quot;tcpdump&quot;&gt;&lt;/a&gt;tcpdump&lt;/h2&gt;&lt;blockquote&gt;
&lt;p&gt;dump the traffic on a networkï¼Œæ ¹æ®ä½¿ç”¨è€…çš„å®šä¹‰å¯¹ç½‘ç»œä¸Šçš„æ•°æ®åŒ…è¿›è¡Œæˆªè·çš„åŒ…åˆ†æå·¥å…·ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id=&quot;å®‰è£…&quot;&gt;&lt;a href=&quot;#å®‰è£…&quot; class=&quot;headerlink&quot; title=&quot;å®‰è£…&quot;&gt;&lt;/a&gt;å®‰è£…&lt;/h3&gt;&lt;h4 id=&quot;linux&quot;&gt;&lt;a href=&quot;#linux&quot; class=&quot;headerlink&quot; title=&quot;linux&quot;&gt;&lt;/a&gt;linux&lt;/h4&gt;&lt;figure class=&quot;highlight sh&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;yum install tcpdump&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[root@~]&lt;span class=&quot;comment&quot;&gt;# tcpdump --v&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;tcpdump version 4.9.2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;libpcap version 1.5.3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;OpenSSL 1.0.2k-fips  26 Jan 2017&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;h4 id=&quot;Mac&quot;&gt;&lt;a href=&quot;#Mac&quot; class=&quot;headerlink&quot; title=&quot;Mac&quot;&gt;&lt;/a&gt;Mac&lt;/h4&gt;&lt;figure class=&quot;highlight sh&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;brew install tcpdump&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;âœ  ~ tcpdump --v&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;tcpdump version 4.99.1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;libpcap version 1.10.1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;OpenSSL 1.1.1k  25 Mar 2021&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
    
    </summary>
    
    
      <category term="è½¯ä»¶" scheme="https://z201.cn/categories/%E8%BD%AF%E4%BB%B6/"/>
    
    
      <category term="ç½‘ç»œé€šä¿¡" scheme="https://z201.cn/tags/%E7%BD%91%E7%BB%9C%E9%80%9A%E4%BF%A1/"/>
    
      <category term="æŠ“åŒ…è½¯ä»¶" scheme="https://z201.cn/tags/%E6%8A%93%E5%8C%85%E8%BD%AF%E4%BB%B6/"/>
    
  </entry>
  
  <entry>
    <title>æŸ¥ç¼ºè¡¥æ¼-Zookeeper</title>
    <link href="https://z201.cn/2020/12/09/%E6%9F%A5%E7%BC%BA%E8%A1%A5%E6%BC%8F-Zookeeper/"/>
    <id>https://z201.cn/2020/12/09/%E6%9F%A5%E7%BC%BA%E8%A1%A5%E6%BC%8F-Zookeeper/</id>
    <published>2020-12-09T04:10:31.000Z</published>
    <updated>2021-12-13T14:25:21.124Z</updated>
    
    <content type="html"><![CDATA[<h3 id="Zookeeperæ¦‚è¿°"><a href="#Zookeeperæ¦‚è¿°" class="headerlink" title="Zookeeperæ¦‚è¿°"></a>Zookeeperæ¦‚è¿°</h3><blockquote><p>Zookeeperå¯ä»¥è®©ä¼ä¸šçš„ITæ¶æ„é€æ­¥ä»é›†ä¸­å¼å‘åˆ†å¸ƒå¼è¿‡åº¦ï¼Œæ‰€è°“çš„åˆ†å¸ƒå¼æ˜¯æŒ‡ï¼šæŠŠä¸€ä¸ªè®¡ç®—ä»»åŠ¡åˆ†è§£æˆè‹¥å¹²ä¸ªè®¡ç®—å•å…ƒï¼Œå¹¶ä¸”åˆ†æ´¾åˆ°è‹¥å¹²ä¸åŒçš„è®¡ç®—æœºä¸­å»æ‰§è¡Œï¼Œç„¶åæ±‡æ€»è®¡ç®—ç»“æœçš„è¿‡ç¨‹ã€‚</p></blockquote><ul><li><p>Zookeeperä»‹ç»</p><ul><li>Zookeeperæ˜¯æºä»£ç å¼€æ”¾çš„åˆ†å¸ƒå¼åè°ƒæœåŠ¡ï¼Œç”±é›…è™åˆ›å»ºï¼Œæ˜¯Google Chubbyå¼€æºå®ç°ã€‚Zookeeperæ˜¯ä¸€ä¸ªé«˜æ€§èƒ½çš„åˆ†å¸ƒå¼æ•°æ®ä¸€è‡´æ€§è§£å†³æ–¹æ¡ˆï¼Œå®ƒå°†é‚£äº›å¤æ‚ã€å®¹æ˜“å‡ºé”™çš„åˆ†å¸ƒå¼ä¸€è‡´æ€§æœåŠ¡å°è£…èµ·æ¥ï¼Œæ„æˆä¸€ä¸ªæç¬‘å¯é çš„åŸè¯­é›†ï¼Œå¹¶æä¾›ä¸€ç³»åˆ—ç®€å•æ˜“ç”¨çš„æ¥å£ç»™ç”¨æˆ·ä½¿ç”¨ã€‚</li></ul></li><li><p>Zookeeperçš„å…¸å‹åº”ç”¨åœºæ™¯</p><ul><li>æ•°æ®å‘å¸ƒ/è®¢é˜… é¡¾åæ€ä¹‰å°±æ˜¯ä¸€æ–¹æŠŠæ•°æ®å‘å¸ƒå‡ºæ¥ï¼Œå¦ä¸€æ–¹é€šè¿‡æŸç§æ‰‹åŠ¨å¯ä»¥å¾—åˆ°è¿™äº›æ•°æ®ã€‚<ul><li>é€šå¸¸æ•°æ®è®¢é˜…æœ‰ä¸¤ç§æ–¹å¼ï¼šæ¨æ¨¡å¼å’Œæ‹‰æ¨¡å¼ï¼Œæ¨æ¨¡å¼ä¸€èˆ¬æ˜¯æœåŠ¡å™¨ä¸»åŠ¨å‘å®¢æˆ·ç«¯æ¨é€æ¶ˆæ¯ï¼Œæ‹‰æ¨¡å¼æ˜¯å®¢æˆ·ç«¯ä¸»åŠ¨å»æœåŠ¡ç«¯è·å–æ•°æ®ï¼ˆé€šå¸¸é‡‡ç”¨çš„æ˜¯è½®è¯¢çš„æ–¹å¼ï¼‰ã€‚</li><li>Zookeeperé‡‡ç”¨ä¸¤ç§æ–¹å¼çš„ç»“åˆã€‚<ul><li>å‘å¸ƒè€…å°†æ•°æ®å‘å¸ƒåˆ°Zookeeperé›†ç¾¤èŠ‚ç‚¹ä¸Šï¼Œè®¢é˜…è€…é€šè¿‡ä¸€å®šçš„æ–¹æ³•å‘Šè¯‰æœåŠ¡å™¨ï¼Œæˆ‘å¯¹é‚£ä¸ªèŠ‚ç‚¹çš„æ•°æ®æ„Ÿå…´è¶£ï¼Œé‚£ä¸ªæœåŠ¡å™¨åœ¨è¿™äº›èŠ‚ç‚¹çš„æ•°æ®å‘é€å˜åŒ–æ—¶ï¼Œå°±é€šçŸ¥å®¢æˆ·ç«¯ï¼Œå®¢æˆ·ç«¯å¾—åˆ°é€šçŸ¥åå¯ä»¥å»æœåŠ¡å™¨è·å–æ•°æ®ä¿¡æ¯ã€‚</li><li>åˆ†å¸ƒå¼åè°ƒ/é€šçŸ¥<ul><li>å¿ƒè·³æ£€æµ‹ï¼šåœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸­ï¼Œé€šå¸¸éœ€è¦æœºå™¨æ˜¯å¦å¯ä»¥ç”¨ï¼ŒZookeeperä¸­æˆ‘ä»¬è®©æ‰€æœ‰çš„æœºå™¨éƒ½æ³¨å†Œä¸€ä¸ªä¸´æ—¶èŠ‚ç‚¹ï¼Œæ‰€ä»¥åªéœ€è¦åˆ¤æ–­è¿™ä¸ªèŠ‚ç‚¹æ˜¯å¦å­˜åœ¨å°±å¯ä»¥äº†ï¼Œä¸éœ€è¦ç›´æ¥å»è¿æ¥éœ€è¦æ£€æŸ¥çš„æœºå™¨ï¼Œé™ä½ç³»ç»Ÿçš„è´Ÿè½½åº¦ï¼ˆèŠ‚ç‚¹åˆ†ä¸ºä¸´æ—¶å’ŒæŒä¹…ï¼‰ã€‚</li></ul></li></ul></li></ul></li></ul></li><li><p>Zookpeeperé‡é‡çº§ä½¿ç”¨</p><ul><li>Hadoopã€HBaseã€Stormã€Solrã€‚</li></ul></li><li><p>é›†ç¾¤è§’è‰²</p><ul><li>Leaderã€Followerã€Observer<ul><li>LeaderæœåŠ¡å™¨æ˜¯æ•´ä¸ªZookeeperé›†ç¾¤å·¥ä½œæœºåˆ¶çš„æ ¸å¿ƒ</li><li>FolloweræœåŠ¡å™¨æ˜¯Zookeeperé›†ç¾¤çŠ¶æ€çš„è·Ÿéšè€…</li><li>OserveræœåŠ¡å™¨å……å½“ä¸€ä¸ªè§‚å¯Ÿè€…çš„è§’è‰²</li><li>Leaderã€Followerè®¾è®¡æ¨¡å¼ï¼ŒObserverè§‚å¯Ÿè€…æ¨¡å¼</li></ul></li></ul></li><li><p>ä¼šè¯</p><ul><li>ä¼šè¯æ˜¯æŒ‡å®¢æˆ·ç«¯ZookeeperæœåŠ¡å™¨çš„è¿æ¥ï¼ŒZookeeperä¸­çš„ä¼šè¯å«Sessionï¼Œå®¢æˆ·ç«¯ä¸æœåŠ¡å™¨å»ºç«‹TCPçš„é•¿è¿æ¥æ¥ç»´æŒä¸€ä¸ªSession,å®¢æˆ·ç«¯åœ¨å¯åŠ¨çš„æ—¶å€™é¦–å…ˆä¼šä¸æœåŠ¡å™¨å»ºç«‹ä¸€ä¸ªTCPè¿æ¥,é€šè¿‡è¿™ä¸ªè¿æ¥å®¢æˆ·ç«¯èƒ½å¤Ÿé€šè¿‡å¿ƒè·³æ£€æµ‹ä¸æœåŠ¡å™¨ä¿æŒæœ‰æ•ˆçš„ä¼šè¯ï¼Œä¹Ÿèƒ½å‘ZookeeperæœåŠ¡å™¨å‘é€è¯·æ±‚å¹¶è·å¾—å“åº”ã€‚</li></ul></li><li><p>æ•°æ®èŠ‚ç‚¹</p><ul><li>Zookeeperä¸­çš„èŠ‚ç‚¹æœ‰ä¸¤ç±»<ul><li>é›†ç¾¤ä¸­çš„ä¸€å°æœºå™¨ç§°ä¸ºä¸€ä¸ªèŠ‚ç‚¹</li><li>æ•°æ®æ¨¡å‹ä¸­çš„æ•°æ®å•å…ƒZnodeï¼Œåˆ†åˆ«ä¸ºæŒä¹…èŠ‚ç‚¹å’Œä¸´æ—¶èŠ‚ç‚¹ã€‚ï¼ˆå…¶å®æ•°æ®èŠ‚ç‚¹å°±æ˜¯ä¸€ä¸ªtreeèŠ‚ç‚¹å°±æ˜¯Znodeï¼‰</li></ul></li></ul></li><li><p>ç‰ˆæœ¬</p><ul><li>Zookeeperä¸­çš„ç‰ˆæœ¬<ul><li>version<ul><li>å½“å‰æ•°æ®èŠ‚ç‚¹æ•°æ®å†…å®¹ç‰ˆæœ¬</li></ul></li><li>cversion<ul><li>å½“å‰æ•°æ®èŠ‚ç‚¹å­èŠ‚ç‚¹çš„ç‰ˆæœ¬å·</li></ul></li><li>aversion<ul><li>å½“å‰æ•°æ®èŠ‚ç‚¹ACLå˜æ›´ç‰ˆæœ¬å·</li></ul></li></ul></li></ul></li><li><p>watcherï¼ˆäº‹ä»¶ç›‘å¬å™¨ï¼‰</p><ul><li>Zookeeperå…è®¸ç”¨æˆ·åœ¨æŒ‡å®šèŠ‚ç‚¹ä¸Šæ³¨å†Œä¸€äº›Watcherï¼Œå½“æ•°æ®èŠ‚ç‚¹å‘ç”Ÿå˜åŒ–çš„æ—¶å€™ï¼ŒZookeeperæœåŠ¡å™¨ä¼šæŠŠè¿™ä¸ªå˜åŒ–é€šçŸ¥å‘é€ç»™æ„Ÿå…´è¶£çš„å®¢æˆ·ç«¯ã€‚</li></ul></li><li><p>ACLæƒé™æ§åˆ¶</p><ul><li>ACLæ˜¯Access Contril Lists çš„ç¼©å†™,Zookeeperé‡‡ç”¨ACLç­–ç•¥æ¥è¿›è¡Œæƒé™æ§åˆ¶,æœ‰ä»¥ä¸‹æƒé™ï¼š<ul><li>CREATEï¼šåˆ›å»ºå­èŠ‚ç‚¹</li><li>READï¼šè·å–å­èŠ‚ç‚¹</li><li>WRITE:æ›´æ–°å­èŠ‚ç‚¹æ•°æ®æƒé™</li><li>DELETE:åˆ é™¤å­èŠ‚ç‚¹æƒé™</li><li>ADMINï¼šè®¾ç½®èŠ‚ç‚¹ACLæƒé™</li></ul></li></ul></li></ul><h3 id="Zoopeeperç¯å¢ƒæ­å»ºï¼ˆé›†ç¾¤ã€å•æœºã€ä¼ªé›†ç¾¤ï¼‰"><a href="#Zoopeeperç¯å¢ƒæ­å»ºï¼ˆé›†ç¾¤ã€å•æœºã€ä¼ªé›†ç¾¤ï¼‰" class="headerlink" title="Zoopeeperç¯å¢ƒæ­å»ºï¼ˆé›†ç¾¤ã€å•æœºã€ä¼ªé›†ç¾¤ï¼‰"></a>Zoopeeperç¯å¢ƒæ­å»ºï¼ˆé›†ç¾¤ã€å•æœºã€ä¼ªé›†ç¾¤ï¼‰</h3><ul><li>å•æœºæ¨¡å¼ï¼ˆè®¾å¤‡ç¯å¢ƒæœ‰é™æš‚æ—¶å•æœºï¼‰<ul><li>å‡†å¤‡å·¥ä½œ<ul><li>ä¸‹è½½Zookeeperï¼ˆæ­¤å¤„è‡ªè¡Œå¤„ç†ï¼‰</li><li>è§£å‹ tar xzvf xxx.gz è§£å‹</li><li>é‡å‘½åæ–‡ä»¶å¤¹ Zookeeper å‘½ä»¤mv xxx xxx åé¢çš„å‚æ•°æ˜¯æ–°åå­—ï¼ˆå¯ä»¥ä¸åšï¼‰</li><li>è¿›å…¥æ–‡ä»¶å¤¹ä¸­/conf/</li><li>å¤åˆ¶é…ç½®æ–‡ä»¶zoo_sample.cfgï¼ˆæ ·ä¾‹æ–‡ä»¶ï¼‰ å¹¶é‡å‘½å zoo.cfg</li></ul></li><li>ç¼–è¾‘zoo.cfgå†…å®¹ï¼ˆä»…ä¾›å‚è€ƒ,å…·ä½“ç¯å¢ƒè‡ªè¡Œä¿®æ”¹ï¼‰</li><li>tickTime = 2000<ul><li>tickTimeï¼šåŸºæœ¬äº‹ä»¶å•å…ƒï¼Œä»¥æ¯«ç§’ä¸ºå•ä½ã€‚è¿™ä¸ªæ—¶é—´æ˜¯ä½œä¸º Zookeeper æœåŠ¡å™¨ä¹‹é—´æˆ–å®¢æˆ·ç«¯ä¸æœåŠ¡å™¨ä¹‹é—´ç»´æŒå¿ƒè·³çš„æ—¶é—´é—´éš”ï¼Œä¹Ÿå°±æ˜¯æ¯ä¸ª tickTime æ—¶é—´å°±ä¼šå‘é€ä¸€ä¸ªå¿ƒè·³ã€‚</li></ul></li><li>initLimit= 5<ul><li>initLimit:è¿™ä¸ªé…ç½®é¡¹ç”¨æ¥é…ç½®Zookeeperæ¥å—å®¢æˆ·ç«¯åˆå§‹åŒ–è¿æ¥æ—¶æœ€é•¿èƒ½å¿å—å¤šå°‘ä¸ªå¿ƒè·³æ—¶é—´é—´éš”æ•°ï¼Œå½“å·²è¶…è¿‡5ä¸ªå¿ƒè·³çš„æ—¶é—´ï¼ˆä¹Ÿå°±æ˜¯tickTimeï¼‰é•¿åº¦åZookeeperæœåŠ¡å™¨è¿˜æ²¡æœ‰æ”¶åˆ°å®¢æˆ·ç«¯çš„è¿”å›ä¿¡æ¯ï¼Œé‚£ä¹ˆè¡¨æ˜è¿™ä¸ªå®¢æˆ·ç«¯è¿æ¥å¤±è´¥ã€‚æ€»çš„æ—¶é—´é•¿åº¦æ˜¯5 * 2000=4sã€‚</li></ul></li><li>dataDir = D:\zookeeper\data<ul><li>é¡¾åæ€ä¹‰å°±æ˜¯ Zookeeper ä¿å­˜æ•°æ®å¿«ç…§çš„ç›®å½•ï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼ŒZookeeper å°†å†™æ•°æ®çš„æ—¥å¿—æ–‡ä»¶ä¹Ÿä¿å­˜åœ¨è¿™ä¸ªç›®å½•é‡Œï¼‰ã€‚</li></ul></li><li>dataLogDir= D:\zookeeper\log<ul><li>é¡¾åæ€ä¹‰å°±æ˜¯ Zookeeper ä¿å­˜æ—¥å¿—çš„ç›®å½•ã€‚</li></ul></li><li>synclimit = 5<ul><li>è¿™ä¸ªé…ç½®é¡¹è¡¨ç¤ºLeaderä¸Followerä¹‹é—´å‘é€æ¶ˆæ¯ï¼Œè¯·æ±‚å’Œåº”ç­”æ—¶é—´é•¿é•¿åº¦ï¼Œæœ€é•¿ä¸èƒ½è¶…è¿‡å¤šå°‘ä¸ªtickTimeçš„æ—¶é—´é•¿åº¦,æ€»çš„æ—¶é—´é•¿åº¦æ˜¯2 * 2000 = 4sã€‚</li></ul></li><li>clientPort = 2181<ul><li>è¿™ä¸ªç«¯å£å°±æ˜¯å®¢æˆ·ç«¯è¿æ¥ Zookeeper æœåŠ¡å™¨çš„ç«¯å£ï¼ŒZookeeper ä¼šç›‘å¬è¿™ä¸ªç«¯å£ï¼Œæ¥å—å®¢æˆ·ç«¯çš„è®¿é—®è¯·æ±‚ã€‚</li></ul></li><li>Serverï¼ˆå¾…ç»­ï¼‰<ul><li>æ ¼å¼ï¼šserver.id=host:port:portï¼ˆä¸¤ä¸ªportä¿è¯å¯ä»¥æ­£å¸¸ä½¿ç”¨å°±è¡Œï¼‰<ul><li>idï¼šé€šå¸¸ä¸ºæ•´æ•°ï¼Œå¹¶ä¸”ä¸èƒ½é‡å¤ä½¿ç”¨æ•´æ•°ã€‚</li><li>hostï¼šæœåŠ¡å™¨çš„IPåœ°å€ã€‚</li><li>port: Followerç«¯å£</li><li>port: Leaderé€‰ä¸¾æŠ•ç¥¨ã€‚</li></ul></li><li>ZooKeeperå»ºè®®ä½¿ç”¨hostnameï¼Œè€Œéipã€‚è¿™éœ€è¦å¯¹ä¸»æœºçš„/etc/hostnameå’Œ/etc/hostsåšhostç»‘å®š(ä¸ç”¨çš„OSä¸åŒä¿®æ”¹æ–¹å¼)ã€‚</li><li>åˆ›å»ºä¸€ä¸ªmyidæ–‡ä»¶ï¼ˆæ”¾åœ¨ dataDiræ–‡ä»¶ä¸‹é¢ï¼‰</li><li>å†™å…¥ä¸€è¡Œæ•°æ®ï¼ˆè¯·æŸ¥é˜…zoo.cfgæ–‡ä»¶ï¼‰<ul><li>å†™å…¥idä½ç½®çš„æ•°æ®å³å¯ã€‚è¡¨ç¤ºå½“å‰ç³»ç»Ÿç¯å¢ƒZookeeperæ˜¯å“ªä¸€ä¸ªServerï¼ˆé€šè®¯ç”¨çš„ï¼‰ã€‚</li></ul></li></ul></li><li>å¯åŠ¨æœåŠ¡ä¸åœæ­¢æœåŠ¡</li><li>è¿›å…¥bin/æ–‡ä»¶</li><li>æ‰§è¡ŒzkServer.cmd æˆ–åˆ™ <a href="http://zkserver.sh/" target="_blank" rel="noopener">zkServer.sh</a></li><li>CMDç›´æ¥åŒå‡»è¿è¡Œ ,SHåˆ™ sudo sh ./zkServer.sh start å¯åŠ¨ stop å…³é—­</li><li>éªŒè¯ ä½¿ç”¨telnetæ¥æµ‹è¯•(è‡ªè¡Œå®‰è£…)<ul><li>telnet ip port æ•²å‘½ä»¤ stat è‹¥è¿”å›æ•°æ®è¡¨ç¤ºå½“å‰æœåŠ¡å™¨ä¸èƒ½å¯¹å¤–æä¾›æœåŠ¡è¡¨æ˜é›†ç¾¤ä¸‹å…¶ä»–æœåŠ¡å™¨æœªå¯åŠ¨ï¼ˆåœ¨Zookeeperä¸­åªè¦æœ‰åŠæ•°çš„æœåŠ¡å™¨æ­£å¸¸å·¥ä½œå°±å¯ä»¥å‘å¤–æä¾›æœåŠ¡ï¼‰ã€‚</li></ul></li><li>åœ¨æ­¤ç®€å•è¯´æ˜ä¸‹ä½•ä¸ºä¼ªé›†ç¾¤å°±æ˜¯åœ¨ä¸€å°æœåŠ¡å™¨ä¸Šçš„å¤šä¸ªZookeeperçš„é›†ç¾¤å«ä¼ªé›†ç¾¤ï¼ˆä¼ªé›†ç¾¤ ä¸¤ä¸ªportä¸èƒ½ä¸å…¶ä»–zookeeperçš„portä¸€æ ·ï¼‰ã€‚</li><li>å•æœºæ¨¡å¼å°±åˆ é™¤å…¶ä»–æœåŠ¡å™¨è¿è¡Œçš„æ—¶å€™å°±æ˜¯å•æœºæ¨¡å¼ã€‚</li></ul></li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h3 id=&quot;Zookeeperæ¦‚è¿°&quot;&gt;&lt;a href=&quot;#Zookeeperæ¦‚è¿°&quot; class=&quot;headerlink&quot; title=&quot;Zookeeperæ¦‚è¿°&quot;&gt;&lt;/a&gt;Zookeeperæ¦‚è¿°&lt;/h3&gt;&lt;blockquote&gt;
&lt;p&gt;Zookeeperå¯ä»¥è®©ä¼ä¸šçš„ITæ¶æ„é€æ­¥
      
    
    </summary>
    
    
      <category term="æœªåˆ†ç±»" scheme="https://z201.cn/categories/%E6%9C%AA%E5%88%86%E7%B1%BB/"/>
    
    
  </entry>
  
  <entry>
    <title>Docker-Compose-Redis5.0+Mysql5.7</title>
    <link href="https://z201.cn/2020/11/20/Docker-Compose-Redis5-0-Mysql5-7/"/>
    <id>https://z201.cn/2020/11/20/Docker-Compose-Redis5-0-Mysql5-7/</id>
    <published>2020-11-20T07:58:13.000Z</published>
    <updated>2021-01-13T06:46:29.352Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>è®°å½•ä¸‹ä½¿ç”¨docker-composeæ„å»ºç®¡ç†Redisã€mysqlã€‚</p></blockquote><h2 id="å‡†å¤‡å·¥ä½œ"><a href="#å‡†å¤‡å·¥ä½œ" class="headerlink" title="å‡†å¤‡å·¥ä½œ"></a>å‡†å¤‡å·¥ä½œ</h2><ol><li>åˆ›å»ºå·¥ä½œç›®å½•</li></ol><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">$ mkdir -p docker docker/mysql docker/mysql/data docker/redis docker/redis/data</span><br><span class="line"><span class="comment"># ä½¿ç”¨ tree docker æŸ¥çœ‹ç›®å½•ç»“æ„ yum -y install tree å®‰è£…</span></span><br><span class="line">$ tree docker</span><br><span class="line">docker</span><br><span class="line">â”œâ”€â”€ mysql</span><br><span class="line">â”‚Â Â  â””â”€â”€ data</span><br><span class="line">â””â”€â”€ redis</span><br><span class="line">    â””â”€â”€ data</span><br><span class="line">$ touch docker/mysql/my.cnf docker/redis/redis.conf </span><br><span class="line">$ tree docker</span><br><span class="line">docker</span><br><span class="line">â”œâ”€â”€ mysql</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ data</span><br><span class="line">â”‚Â Â  â””â”€â”€ my.cnf</span><br><span class="line">â””â”€â”€ redis</span><br><span class="line">    â”œâ”€â”€ data</span><br><span class="line">    â””â”€â”€ redis.conf</span><br></pre></td></tr></table></figure><ol start="2"><li>å‡†å¤‡my.conf ã€redis.conf<ol><li>my.conf</li></ol></li></ol><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">[client]</span><br><span class="line"> port = 3306</span><br><span class="line"> socket = /var/lib/mysql/data/mysql.sock</span><br><span class="line">[mysqld]</span><br><span class="line"> <span class="comment"># é’ˆå¯¹5.7ç‰ˆæœ¬æ‰§è¡Œgroup byå­—å¥å‡ºé”™é—®é¢˜è§£å†³</span></span><br><span class="line">sql_mode=<span class="string">'STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION'</span></span><br><span class="line"> <span class="comment"># ä¸€èˆ¬é…ç½®é€‰é¡¹</span></span><br><span class="line"> basedir = /var/lib/mysql</span><br><span class="line"> datadir = /var/lib/mysql/data</span><br><span class="line"> port = 3306</span><br><span class="line"> socket = /var/lib/mysql/data/mysql.sock</span><br><span class="line"> lc-messages-dir = /usr/share/mysql <span class="comment"># åŠ¡å¿…é…ç½®æ­¤é¡¹ï¼Œå¦åˆ™æ‰§è¡Œsqlå‡ºé”™æ—¶ï¼Œåªèƒ½æ˜¾ç¤ºé”™è¯¯ä»£ç è€Œä¸æ˜¾ç¤ºå…·ä½“é”™è¯¯æ¶ˆæ¯</span></span><br><span class="line"> character-set-server=utf8</span><br><span class="line"> back_log = 300</span><br><span class="line"> max_connections = 3000</span><br><span class="line"> max_connect_errors = 50</span><br><span class="line"> table_open_cache = 4096</span><br><span class="line"> max_allowed_packet = 32M</span><br><span class="line"> <span class="comment">#binlog_cache_size = 4M</span></span><br><span class="line"> max_heap_table_size = 128M</span><br><span class="line"> read_rnd_buffer_size = 16M</span><br><span class="line"> sort_buffer_size = 16M</span><br><span class="line"> join_buffer_size = 16M</span><br><span class="line"> thread_cache_size = 16</span><br><span class="line"> query_cache_size = 64M</span><br><span class="line"> query_cache_limit = 4M</span><br><span class="line"> ft_min_word_len = 8</span><br><span class="line"> thread_stack = 512K</span><br><span class="line"> transaction_isolation = REPEATABLE-READ</span><br><span class="line"> tmp_table_size = 64M</span><br><span class="line"> <span class="comment">#log-bin=mysql-bin</span></span><br><span class="line"> long_query_time = 6</span><br><span class="line"> server_id=1</span><br><span class="line"> innodb_buffer_pool_size = 256M</span><br><span class="line"> innodb_thread_concurrency = 16</span><br><span class="line"> innodb_log_buffer_size = 16M</span><br></pre></td></tr></table></figure><ol start="2"><li>redis.conf å¯ä»¥å»è¿™é‡Œä¸‹è½½ <a href="https://redis.io/topics/config" target="_blank" rel="noopener">å®˜ç½‘</a></li></ol><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">wget https://raw.githubusercontent.com/redis/redis/5.0/redis.conf</span><br><span class="line"></span><br><span class="line"><span class="comment"># ä¿®æ”¹å†…å®¹</span></span><br><span class="line">daemonize no     <span class="comment">## è‹¥ä½¿ç”¨å¼€æœºå¯åŠ¨ï¼Œç”Ÿæˆpidï¼Œè¯¥é¡¹å¿…é¡»è®¾ç½®ä¸ºè¯¶yesï¼Œå¦åˆ™rediså°†ä¸èƒ½å¤Ÿæ­£å¸¸æ‰§è¡Œå¼€æœºå¯åŠ¨(systemctl start redis,æ‰§è¡Œåä¸€ç›´å¡ç€ï¼Œç›´åˆ°è¶…æ—¶)</span></span><br><span class="line"><span class="comment">#bind 127.0.0.1  ##æ³¨é‡Šæ‰ï¼Œå…è®¸æ‰€æœ‰å…¶ä»–ipè®¿é—®ï¼ŒçœŸå®ä½¿ç”¨æœ€å¥½åä¸‹é™åˆ¶ï¼Œåªå…è®¸æŸäº›ä¸»æœºè®¿é—®</span></span><br><span class="line">protected-mode no  <span class="comment">## å…è®¸å…¶ä»–æœºå™¨ä¸Šçš„å®¢æˆ·ç«¯è¿æ¥å½“å‰redisï¼Œé…ç½®æ–‡ä»¶è®¾ç½®è¯¥é¡¹ï¼Œåˆ™å¼€æœºå¯åŠ¨å¤„å°±å¯ä»¥å»æ‰--protected no </span></span><br><span class="line">requirepass root  <span class="comment">##è®¾ç½®å¯†ç </span></span><br><span class="line"><span class="comment"># daemonize yesï¼Œä»–çš„ä½œç”¨æ˜¯å¼€å¯å®ˆæŠ¤è¿›ç¨‹æ¨¡å¼ï¼Œåœ¨è¯¥æ¨¡å¼ä¸‹ï¼Œredisä¼šåœ¨åå°è¿è¡Œï¼Œå¹¶å°†è¿›ç¨‹pidå·å†™å…¥è‡³redis.confé€‰é¡¹pidfileè®¾ç½®çš„æ–‡ä»¶ä¸­ï¼Œæ­¤æ—¶rediså°†ä¸€ç›´è¿è¡Œï¼Œé™¤éæ‰‹åŠ¨killè¯¥è¿›ç¨‹ã€‚ä½†æ˜¯åœ¨åé¢çš„å‘½ä»¤ä¸­â€œ-dâ€é€‰é¡¹ä¹Ÿæ˜¯å¼€å¯daemonizeï¼Œè¿™æ˜¯dockerè‡ªå®¶çš„æ–¹å¼ã€‚</span></span><br></pre></td></tr></table></figure><h2 id="ç¼–å†™Docker-Composeæ–‡ä»¶"><a href="#ç¼–å†™Docker-Composeæ–‡ä»¶" class="headerlink" title="ç¼–å†™Docker-Composeæ–‡ä»¶"></a>ç¼–å†™Docker-Composeæ–‡ä»¶</h2><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line">version : <span class="string">'3'</span></span><br><span class="line">services:</span><br><span class="line">  mysql:</span><br><span class="line">    image: mysql/mysql-server:<span class="number">5.7</span>.<span class="number">18</span></span><br><span class="line">    container_name: mysql5.<span class="number">7.18</span>-dev</span><br><span class="line">    networks:</span><br><span class="line">      - net-shop-db</span><br><span class="line">    ports:</span><br><span class="line">      - <span class="string">"3306:3306"</span></span><br><span class="line">    volumes:</span><br><span class="line">      - /opt/docker/mysql/my.cnf:/etc/my.cnf <span class="comment"># æ˜ å°„æ•°æ®åº“é…ç½®æ–‡ä»¶</span></span><br><span class="line">      - /opt/docker/mysql/data:/var/lib/mysql/data  <span class="comment"># æ˜ å°„æ•°æ®åº“ä¿å­˜ç›®å½•åˆ°å®¿ä¸»æœºï¼Œé˜²æ­¢æ•°æ®ä¸¢å¤±</span></span><br><span class="line">      - /opt/docker/mysql/log:/var/log/mysql <span class="comment"># æ—¥å¿—æ–‡ä»¶</span></span><br><span class="line">      - /etc/localtime:/etc/localtime:ro <span class="comment"># è®¾ç½®å®¹å™¨æ—¶åŒºä¸å®¿ä¸»æœºä¿æŒä¸€è‡´</span></span><br><span class="line">    restart: always <span class="comment"># è®¾ç½®å®¹å™¨è‡ªå¯æ¨¡å¼</span></span><br><span class="line">    command: [</span><br><span class="line">      <span class="string">'--character-set-server=utf8mb4'</span>,</span><br><span class="line">      <span class="string">'--collation-server=utf8mb4_unicode_ci'</span>,</span><br><span class="line">      <span class="string">'--lower_case_table_names=1'</span>,</span><br><span class="line">      <span class="string">'--default-time-zone=+8:00'</span>]</span><br><span class="line">    environment:</span><br><span class="line">      - TZ=Asia/Shanghai <span class="comment"># è®¾ç½®å®¹å™¨æ—¶åŒºä¸å®¿ä¸»æœºä¿æŒä¸€è‡´</span></span><br><span class="line">      - MYSQL_ROOT_PASSWORD=root <span class="comment"># è®¾ç½®rootå¯†ç </span></span><br><span class="line">  redis:</span><br><span class="line">    image: redis:<span class="number">5.0</span>.<span class="number">5</span></span><br><span class="line">    container_name: redis5.<span class="number">0.6</span>-dev</span><br><span class="line">    networks:</span><br><span class="line">      - net-shop-db</span><br><span class="line">    ports:</span><br><span class="line">      - <span class="string">"6379:6379"</span></span><br><span class="line">    volumes:</span><br><span class="line">      - /etc/localtime:/etc/localtime:ro <span class="comment"># è®¾ç½®å®¹å™¨æ—¶åŒºä¸å®¿ä¸»æœºä¿æŒä¸€è‡´</span></span><br><span class="line">      - /opt/docker/redis/data:/data</span><br><span class="line">      - /opt/docker/redis/redis.conf:/etc/redis.conf</span><br><span class="line">    command: redis-server /etc/redis.conf <span class="comment"># å¯åŠ¨rediså‘½ä»¤</span></span><br><span class="line">    environment:</span><br><span class="line">      - TZ=Asia/Shanghai <span class="comment"># è®¾ç½®å®¹å™¨æ—¶åŒºä¸å®¿ä¸»æœºä¿æŒä¸€è‡´</span></span><br><span class="line">    restart: always <span class="comment"># è®¾ç½®å®¹å™¨è‡ªå¯æ¨¡å¼</span></span><br><span class="line"></span><br><span class="line">networks:</span><br><span class="line">  net-shop-db:</span><br><span class="line">    driver: bridge</span><br></pre></td></tr></table></figure><h2 id="åŸºæœ¬ç”¨æ³•"><a href="#åŸºæœ¬ç”¨æ³•" class="headerlink" title="åŸºæœ¬ç”¨æ³•"></a>åŸºæœ¬ç”¨æ³•</h2><blockquote><p>æ³¨æ„éœ€è¦æå‰å¯åŠ¨docker</p></blockquote><ol><li>åˆ›å»ºå¹¶å¯åŠ¨å®¹å™¨ <code>docker-compose -f docker-compose.yml up -d</code></li><li>æ‰¹é‡åœæ­¢å®¹å™¨å¹¶æ¸…é™¤å®¹å™¨ <code>docker-compose -f docker-compose.yml down</code></li><li>é‡æ–°æ„å»ºå®¹å™¨ <code>docker-compose -f docker-compose.yml up --build -d</code></li><li>å¯åŠ¨å¤±è´¥ï¼Œå¯ä»¥æŸ¥çœ‹å®¹å™¨æ—¥å¿—ä¿¡æ¯è·å–å¸®åŠ© <code>docker logs å®¹å™¨åè¯æˆ–å®¹å™¨ID # æ—¢docker-compose.ymlæ–‡ä»¶å‚æ•°container_nameæŒ‡å®šçš„å€¼</code></li></ol><h2 id="å¤‡æ³¨"><a href="#å¤‡æ³¨" class="headerlink" title="å¤‡æ³¨"></a>å¤‡æ³¨</h2><ol><li>docker-compose å‘½ä»¤ä¸å­˜åœ¨ã€æœªæ‰¾åˆ°å‘½ä»¤ã€‚ç›´æ¥ä»githubä¸Šä¸‹è½½ï¼Œå›½å†…ä¸‹è½½å·¨æ…¢ã€‚</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æ³¨æ„æŸ¥çœ‹docker ç‰ˆæœ¬ å’Œ docker-compose çš„ç‰ˆæœ¬</span></span><br><span class="line"><span class="built_in">cd</span> /usr/<span class="built_in">local</span>/bin/</span><br><span class="line"></span><br><span class="line">curl -L https://github.com/docker/compose/releases/download/1.27.4/docker-compose-`uname -s`-`uname -m` -o /usr/<span class="built_in">local</span>/bin/docker-compose</span><br><span class="line"><span class="comment">#ã€‚ç›´æ¥ç”¨å›½å†…çš„é•œåƒ</span></span><br><span class="line">curl -L https://get.daocloud.io/docker/compose/releases/download/1.27.4/docker-compose-`uname -s`-`uname -m` &gt; /usr/<span class="built_in">local</span>/bin/docker-compose</span><br><span class="line"></span><br><span class="line">chmod +x /usr/<span class="built_in">local</span>/bin/docker-compose</span><br></pre></td></tr></table></figure><h2 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h2><p><a href="https://yefeihonours.github.io/post/docker/docker_compose/" target="_blank" rel="noopener">docker-compose å‘½ä»¤ä¸å­˜åœ¨ã€æœªæ‰¾åˆ°å‘½ä»¤</a></p><p><a href="https://zhuanlan.zhihu.com/p/43654441" target="_blank" rel="noopener">ä½¿ç”¨ docker-compose åœ¨ Docker ä¸­å¯åŠ¨æœ‰å¯†ç çš„ Redis å®¹å™¨</a></p><p><a href="https://cloud.tencent.com/developer/article/1678769" target="_blank" rel="noopener">Docker-Composeæ­å»ºmysqlã€redisã€zookeeperã€rabbitmqã€consulã€elasticsearchç¯å¢ƒ</a></p><p><a href="https://juejin.cn/post/6844903655389265927" target="_blank" rel="noopener">Docker Composeå¤šå®¹å™¨éƒ¨ç½²</a></p><p><a href="https://colobu.com/2018/05/15/Stop-and-remove-all-docker-containers-and-images/" target="_blank" rel="noopener">åœæ­¢ã€åˆ é™¤æ‰€æœ‰çš„dockerå®¹å™¨å’Œé•œåƒ</a></p><p><a href="https://my.oschina.net/u/4362704/blog/3308004" target="_blank" rel="noopener">å®¿ä¸»æœºè¿æ¥dockerä¸­çš„mysql</a></p><p><a href="https://developer.aliyun.com/article/618035" target="_blank" rel="noopener">Docker Compose å®‰è£… on centos7</a></p><p><a href="https://cloud.tencent.com/developer/article/1678769" target="_blank" rel="noopener">Docker-Composeæ­å»ºmysqlã€redisã€zookeeperã€rabbitmqã€consulã€elasticsearchç¯å¢ƒ</a></p><p><a href="https://zhuanlan.zhihu.com/p/140732202" target="_blank" rel="noopener">docker-composeä¸€é”®å®‰è£…redis+mysql+rabbitmq</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;blockquote&gt;
&lt;p&gt;è®°å½•ä¸‹ä½¿ç”¨docker-composeæ„å»ºç®¡ç†Redisã€mysqlã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&quot;å‡†å¤‡å·¥ä½œ&quot;&gt;&lt;a href=&quot;#å‡†å¤‡å·¥ä½œ&quot; class=&quot;headerlink&quot; title=&quot;å‡†å¤‡å·¥ä½œ&quot;&gt;&lt;/a&gt;å‡†å¤‡å·¥ä½œ
      
    
    </summary>
    
    
      <category term="Docker" scheme="https://z201.cn/categories/Docker/"/>
    
    
      <category term="Mysql" scheme="https://z201.cn/tags/Mysql/"/>
    
      <category term="Redis" scheme="https://z201.cn/tags/Redis/"/>
    
      <category term="Docker" scheme="https://z201.cn/tags/Docker/"/>
    
      <category term="Docker-Compose" scheme="https://z201.cn/tags/Docker-Compose/"/>
    
  </entry>
  
  <entry>
    <title>Centos7.*-Dockeréƒ¨ç½²</title>
    <link href="https://z201.cn/2020/11/20/Centos7-Docker%E9%83%A8%E7%BD%B2/"/>
    <id>https://z201.cn/2020/11/20/Centos7-Docker%E9%83%A8%E7%BD%B2/</id>
    <published>2020-11-20T06:26:04.000Z</published>
    <updated>2021-01-12T07:16:48.615Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>è®°å½•ä¸‹è‡ªå·±åœ¨é˜¿é‡Œäº‘éƒ¨ç½²dockerè®°å½•ã€‚</p></blockquote><h2 id="å‡†å¤‡å·¥ä½œ"><a href="#å‡†å¤‡å·¥ä½œ" class="headerlink" title="å‡†å¤‡å·¥ä½œ"></a>å‡†å¤‡å·¥ä½œ</h2><ol><li>å‡†å¤‡ä¸€å°ESCæœåŠ¡å™¨ï¼Œå¹¶å¯ä»¥ä½¿ç”¨æ§åˆ¶å°ç™»å½•ã€‚</li><li>æ£€æŸ¥ESCæ˜¯å¦å®‰è£…äº†dockerï¼Œå¯ä»¥é€‰æ‹©æ˜¯å¦å¸è½½é‡è£…ã€‚<ol><li>æ£€æŸ¥dockeræ˜¯å¦å®‰è£…,<code>docker æ˜¾ç¤ºç›¸å…³ä¿¡æ¯åˆ™è¡¨ç¤ºå®‰è£…</code></li><li>å¸è½½dockerï¼Œè‹¥ä¸é‡è£…ç›´æ¥å¿½ç•¥ï¼Œ<code>yum list installed | grep docker</code>æŸ¥çœ‹å®‰è£…å†…å®¹</li></ol></li></ol><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">$ yum list installed | grep docker</span><br><span class="line">containerd.io.x86_64                1.3.7-3.1.el7                   @docker-ce-stable</span><br><span class="line">docker-ce.x86_64                    3:19.03.13-3.el7                @docker-ce-stable</span><br><span class="line">docker-ce-cli.x86_64                1:19.03.13-3.el7                @docker-ce-stable</span><br><span class="line"><span class="comment"># ä¾æ¬¡å¸è½½</span></span><br><span class="line">$ yum -y remove docker-ce.x86_64</span><br><span class="line">$ yum -y remove docker-ce-cli.x86_64</span><br><span class="line">$ yum -y remove containerd.io.x86_64</span><br><span class="line"><span class="comment"># æ£€æŸ¥å¸è½½ç»“æœ</span></span><br><span class="line">$ yum list installed | grep docker</span><br><span class="line"><span class="comment"># æ— è¾“å‡ºå†…å®¹</span></span><br><span class="line">$ docker </span><br><span class="line"><span class="comment"># -bash: docekr: æœªæ‰¾åˆ°å‘½ä»¤ åˆ™è¡¨ç¤ºå¸è½½å¹²å‡€äº†</span></span><br></pre></td></tr></table></figure><ol start="3"><li>å®‰è£…docker<ol><li>æ›´æ–°yum <code>yum update</code></li><li>è·å–å®˜æ–¹æº<code>wget -P /etc/yum.repos.d/ https://download.docker.com/linux/centos/docker-ce.repo</code></li><li>æŸ¥çœ‹å¯ä»¥å®‰è£…çš„ç‰ˆæœ¬<code>yum list docker-ce --showduplicates | sort -r</code></li><li>é€‰æ‹©å®‰è£… <code>yum install -y docker-ce-18.03.0.ce-1.el7.centos</code></li><li>å®‰è£…docker <code>yum install docker -y</code><ol><li>æ£€æŸ¥<code>docker -v</code>è¾“å‡ºç‰ˆæœ¬ä¿¡æ¯</li></ol></li></ol></li></ol><h2 id="è®¾ç½®dockerç›¸å…³ä¿¡æ¯"><a href="#è®¾ç½®dockerç›¸å…³ä¿¡æ¯" class="headerlink" title="è®¾ç½®dockerç›¸å…³ä¿¡æ¯"></a>è®¾ç½®dockerç›¸å…³ä¿¡æ¯</h2><ol><li>è®¾ç½®dockerå¼€æœºå¯åŠ¨é¡¹<code>systemctl enable docker.service</code></li><li>å…³é—­dockerå¼€æœºå¯åŠ¨é¡¹ <code>systemctl stop docker.service</code></li><li>æ£€æŸ¥dockerå½“å‰è¿è¡Œæƒ…å†µ <code>systemctl status docker</code></li><li>è‹¥æœªå¯åŠ¨åˆ™å¯åŠ¨docker <code>systemctl start docker</code> ,è‹¥å¯åŠ¨äº†å¯ä»¥é‡å¯<code>systemctl restart docker</code></li><li>æ£€æŸ¥dockerè¿è¡Œæƒ…å†µ<code>service docker status</code></li></ol><h2 id="å‚è€ƒæ–‡æ¡£"><a href="#å‚è€ƒæ–‡æ¡£" class="headerlink" title="å‚è€ƒæ–‡æ¡£"></a>å‚è€ƒæ–‡æ¡£</h2><p><a href="https://developer.aliyun.com/article/336442" target="_blank" rel="noopener">é˜¿é‡Œäº‘CentOS 7ä¸Šå®‰è£…é…ç½®Docker</a></p><p><a href="https://www.digitalocean.com/community/tutorials/how-to-install-and-use-docker-compose-on-centos-7" target="_blank" rel="noopener">How To Install and Use Docker Compose on CentOS 7</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;blockquote&gt;
&lt;p&gt;è®°å½•ä¸‹è‡ªå·±åœ¨é˜¿é‡Œäº‘éƒ¨ç½²dockerè®°å½•ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&quot;å‡†å¤‡å·¥ä½œ&quot;&gt;&lt;a href=&quot;#å‡†å¤‡å·¥ä½œ&quot; class=&quot;headerlink&quot; title=&quot;å‡†å¤‡å·¥ä½œ&quot;&gt;&lt;/a&gt;å‡†å¤‡å·¥ä½œ&lt;/h2&gt;&lt;ol&gt;
&lt;li&gt;å‡†
      
    
    </summary>
    
    
      <category term="Linuxè¿ç»´" scheme="https://z201.cn/categories/Linux%E8%BF%90%E7%BB%B4/"/>
    
    
      <category term="Centos7" scheme="https://z201.cn/tags/Centos7/"/>
    
      <category term="Linux" scheme="https://z201.cn/tags/Linux/"/>
    
      <category term="Docker" scheme="https://z201.cn/tags/Docker/"/>
    
  </entry>
  
  <entry>
    <title>æºç åˆ†æ-nettyæºç ç¯å¢ƒæ­å»º</title>
    <link href="https://z201.cn/2020/10/17/%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90-netty%E6%BA%90%E7%A0%81%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/"/>
    <id>https://z201.cn/2020/10/17/%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90-netty%E6%BA%90%E7%A0%81%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/</id>
    <published>2020-10-16T17:28:40.000Z</published>
    <updated>2021-11-22T08:28:51.615Z</updated>
    
    <content type="html"><![CDATA[<h2 id="0x00-é˜…è¯»æºä»£ç "><a href="#0x00-é˜…è¯»æºä»£ç " class="headerlink" title="0x00 é˜…è¯»æºä»£ç "></a>0x00 é˜…è¯»æºä»£ç </h2><h3 id="ä¸‹è½½æºä»£ç "><a href="#ä¸‹è½½æºä»£ç " class="headerlink" title="ä¸‹è½½æºä»£ç "></a>ä¸‹è½½æºä»£ç </h3><ul><li>é˜…è¯»ç‰ˆæœ¬å· <code>netty-4.1.33.Final</code><ul><li>ç”±äºgithubä¸‹è½½é€Ÿåº¦æ˜¯åœ¨å¤ªæ…¢äº†ï¼Œè¿™é‡Œç”¨giteeå…‹éš†ä¸€ä¸ªé•œåƒã€‚</li><li>ä¸‹è½½ç‰ˆæœ¬<code>git clone -b netty-4.1.33.Final git@gitee.com:Z201/netty.git</code></li></ul></li></ul><h3 id="æŸ¥çœ‹æºä»£ç ç»“æ„"><a href="#æŸ¥çœ‹æºä»£ç ç»“æ„" class="headerlink" title="æŸ¥çœ‹æºä»£ç ç»“æ„"></a>æŸ¥çœ‹æºä»£ç ç»“æ„</h3><ul><li>æŸ¥çœ‹é¡¹ç›®ä¸»è¦æ–‡ä»¶å¤¹</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line">tree -d  -L 1    </span><br><span class="line">â”œâ”€â”€ all</span><br><span class="line">â”œâ”€â”€ bom</span><br><span class="line">â”œâ”€â”€ buffer (Core nettyå®šåˆ¶çš„buffer)</span><br><span class="line">â”œâ”€â”€ codec (Protocol Support)</span><br><span class="line">â”œâ”€â”€ codec-dns (Protocol Support)</span><br><span class="line">â”œâ”€â”€ codec-haproxy (Protocol Support)</span><br><span class="line">â”œâ”€â”€ codec-http (Protocol Support)</span><br><span class="line">â”œâ”€â”€ codec-http2 (Protocol Support)</span><br><span class="line">â”œâ”€â”€ codec-memcache (Protocol Support)</span><br><span class="line">â”œâ”€â”€ codec-mqtt (Protocol Support ç‰©è”ç½‘)</span><br><span class="line">â”œâ”€â”€ codec-redis (Protocol Support )</span><br><span class="line">â”œâ”€â”€ codec-smtp (Protocol Support é‚®ä»¶)</span><br><span class="line">â”œâ”€â”€ codec-socks (Protocol Support)</span><br><span class="line">â”œâ”€â”€ codec-stomp (Protocol Support ws)</span><br><span class="line">â”œâ”€â”€ codec-xml (Protocol Support)</span><br><span class="line">â”œâ”€â”€ common (Core)</span><br><span class="line">â”œâ”€â”€ dev-tools</span><br><span class="line">â”œâ”€â”€ docker</span><br><span class="line">â”œâ”€â”€ example ï¼ˆæŠ„ä»£ç çš„åœ°æ–¹ï¼‰</span><br><span class="line">â”œâ”€â”€ handler  (Protocol Support)</span><br><span class="line">â”œâ”€â”€ handler-proxy (Protocol Support)</span><br><span class="line">â”œâ”€â”€ license</span><br><span class="line">â”œâ”€â”€ microbench (æµ‹è¯•ç”¨çš„)</span><br><span class="line">â”œâ”€â”€ resolver(Core)</span><br><span class="line">â”œâ”€â”€ resolver-dns (Core)</span><br><span class="line">â”œâ”€â”€ tarball</span><br><span class="line">â”œâ”€â”€ target</span><br><span class="line">â”œâ”€â”€ testsuite</span><br><span class="line">â”œâ”€â”€ testsuite-autobahn</span><br><span class="line">â”œâ”€â”€ testsuite-http2</span><br><span class="line">â”œâ”€â”€ testsuite-osgi</span><br><span class="line">â”œâ”€â”€ testsuite-shading</span><br><span class="line">â”œâ”€â”€ transport (Transport Services)</span><br><span class="line">â”œâ”€â”€ transport-native-epoll  (Transport Servicesnative omitted - reserved keyword <span class="keyword">in</span> Java)</span><br><span class="line">â”œâ”€â”€ transport-native-kqueue (Transport Servicesnative omitted - reserved keyword <span class="keyword">in</span> Java)</span><br><span class="line">â”œâ”€â”€ transport-native-unix-common Transport Services native omitted - reserved keyword <span class="keyword">in</span> Java)</span><br><span class="line">â”œâ”€â”€ transport-native-unix-common-tests </span><br><span class="line">â”œâ”€â”€ transport-rxtx (Transport Services ä¸²å£ç¼–ç¨‹ ä½œåºŸ)</span><br><span class="line">â”œâ”€â”€ transport-sctp (Transport Services )</span><br><span class="line">â””â”€â”€ transport-udt  (Transport Services ä½œåºŸ)</span><br></pre></td></tr></table></figure><ul><li>å°†é¡¹ç›®å¯¼å…¥ideaä¸­ï¼Œç¬”è€…é‡‡ç”¨macç³»ç»Ÿã€‚è¿™é‡Œéœ€è¦æ³¨æ„éœ€è¦å®‰è£…éƒ¨åˆ†è½¯ä»¶ã€‚</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">brew install autoconf automake libtool</span><br><span class="line"><span class="meta">#</span><span class="bash"> å¦‚æœå®‰è£…äº†å›½å†…çš„é•œåƒå‡ºç°Error opening archive: Failed to open</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> <span class="built_in">export</span> HOMEBREW_BOTTLE_DOMAIN=<span class="string">''</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> å‚è€ƒæ–‡æ¡£ https://zhuanlan.zhihu.com/p/383707713</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> å¦‚æœæ˜¯macç³»ç»Ÿéœ€è¦æ‰‹åŠ¨å°†pomæ–‡ä»¶tcnative.classifierä¿®æ”¹æˆå¯¹åº”ç³»ç»Ÿçš„ã€‚</span></span><br><span class="line">mvn install -Dmaven.test.skip=true</span><br></pre></td></tr></table></figure><h2 id="0x01-æ ¹æ®å®˜æ–¹æ–‡æ¡£å¿«é€Ÿå…¥é—¨"><a href="#0x01-æ ¹æ®å®˜æ–¹æ–‡æ¡£å¿«é€Ÿå…¥é—¨" class="headerlink" title="0x01 æ ¹æ®å®˜æ–¹æ–‡æ¡£å¿«é€Ÿå…¥é—¨"></a>0x01 æ ¹æ®å®˜æ–¹æ–‡æ¡£å¿«é€Ÿå…¥é—¨</h2><blockquote><p>å¼ºçƒˆæ¨èè®¤çœŸé˜…è¯»nettyçš„å®˜æ–¹æ–‡æ¡£ã€‚</p></blockquote><ul><li>å®˜æ–¹æ–‡æ¡£åœ°å€ ï¼š<a href="https://netty.io/wiki/index.html" target="_blank" rel="noopener">https://netty.io/wiki/index.html</a></li></ul><h3 id="Core"><a href="#Core" class="headerlink" title="Core"></a>Core</h3><ul><li>netty-commonæ¨¡å—æ˜¯ Netty çš„æ ¸å¿ƒåŸºç¡€åŒ…ï¼Œå…¶ä»–æ¨¡å—éƒ½éœ€è¦ä¾èµ–å®ƒã€‚å¸¸ç”¨çš„åŒ…æ‹¬é€šç”¨å·¥å…·ç±»å’Œè‡ªå®šä¹‰å¹¶å‘åŒ…ã€‚</li><li>netty-buffer æ¨¡å—ä¸­Nettyè‡ªå·±å®ç°äº†çš„ä¸€ä¸ªæ›´åŠ å®Œå¤‡çš„ByteBuf å·¥å…·ç±»ï¼Œç”¨äºç½‘ç»œé€šä¿¡ä¸­çš„æ•°æ®è½½ä½“ã€‚</li><li>netty-resoveræ¨¡å—ä¸»è¦æä¾›äº†ä¸€äº›æœ‰å…³åŸºç¡€è®¾æ–½çš„è§£æå·¥å…·ï¼ŒåŒ…æ‹¬ IP Addressã€Hostnameã€DNS ç­‰ã€‚</li></ul><h3 id="Protocol-Support"><a href="#Protocol-Support" class="headerlink" title="Protocol Support"></a>Protocol Support</h3><ul><li>netty-codecæ¨¡å—ä¸»è¦è´Ÿè´£ç¼–è§£ç å·¥ä½œï¼Œæä¾›ä¸»æµåè®®çš„ç¼–è¾‘ç ï¼Œè¿˜æä¾›äº†æŠ½è±¡ç¼–è§£ç ç±» ByteToMessageDecoder å’Œ MessageToByteEncoderï¼Œé€šè¿‡ç»§æ‰¿è¿™ä¸¤ä¸ªç±»æˆ‘ä»¬å¯ä»¥è½»æ¾å®ç°è‡ªå®šä¹‰çš„ç¼–è§£ç é€»è¾‘ã€‚</li></ul><h3 id="Transport-Service"><a href="#Transport-Service" class="headerlink" title="Transport Service"></a>Transport Service</h3><ul><li>netty-transport æ¨¡å—å¯ä»¥è¯´æ˜¯ Netty æä¾›æ•°æ®å¤„ç†å’Œä¼ è¾“çš„æ ¸å¿ƒæ¨¡å—ï¼Œå¦‚ Bootstrapã€Channelã€ChannelHandlerã€EventLoopã€EventLoopGroupã€ChannelPipeline ç­‰ã€‚å…¶ä¸­ Bootstrap è´Ÿè´£å®¢æˆ·ç«¯æˆ–æœåŠ¡ç«¯çš„å¯åŠ¨å·¥ä½œï¼ŒåŒ…æ‹¬åˆ›å»ºã€åˆå§‹åŒ– Channel ç­‰ï¼›EventLoop è´Ÿè´£å‘æ³¨å†Œçš„ Channel å‘èµ· I/O è¯»å†™æ“ä½œï¼›ChannelPipeline è´Ÿè´£ ChannelHandler çš„æœ‰åºç¼–æ’ï¼Œè¿™äº›ç»„ä»¶åœ¨ä»‹ç» Netty é€»è¾‘æ¶æ„çš„æ—¶å€™éƒ½æœ‰æ‰€æ¶‰åŠã€‚</li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;0x00-é˜…è¯»æºä»£ç &quot;&gt;&lt;a href=&quot;#0x00-é˜…è¯»æºä»£ç &quot; class=&quot;headerlink&quot; title=&quot;0x00 é˜…è¯»æºä»£ç &quot;&gt;&lt;/a&gt;0x00 é˜…è¯»æºä»£ç &lt;/h2&gt;&lt;h3 id=&quot;ä¸‹è½½æºä»£ç &quot;&gt;&lt;a href=&quot;#ä¸‹è½½æºä»£ç &quot; class=&quot;he
      
    
    </summary>
    
    
      <category term="æºç åˆ†æ" scheme="https://z201.cn/categories/%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90/"/>
    
    
      <category term="Netty" scheme="https://z201.cn/tags/Netty/"/>
    
  </entry>
  
  <entry>
    <title>MySQLåŸºç¡€ï¼ˆä¸‰ï¼‰</title>
    <link href="https://z201.cn/2020/09/29/MySQL%E5%9F%BA%E7%A1%80%EF%BC%88%E4%B8%89%EF%BC%89/"/>
    <id>https://z201.cn/2020/09/29/MySQL%E5%9F%BA%E7%A1%80%EF%BC%88%E4%B8%89%EF%BC%89/</id>
    <published>2020-09-29T01:43:58.000Z</published>
    <updated>2021-09-29T01:47:53.253Z</updated>
    
    <content type="html"><![CDATA[<h2 id="SQL-å¸¸è§ç”¨æ³•"><a href="#SQL-å¸¸è§ç”¨æ³•" class="headerlink" title="SQL å¸¸è§ç”¨æ³•"></a>SQL å¸¸è§ç”¨æ³•</h2><h3 id="1-æŸ¥æ‰¾æ•°æ®çš„æŸ¥è¯¢"><a href="#1-æŸ¥æ‰¾æ•°æ®çš„æŸ¥è¯¢" class="headerlink" title="1. æŸ¥æ‰¾æ•°æ®çš„æŸ¥è¯¢"></a>1. æŸ¥æ‰¾æ•°æ®çš„æŸ¥è¯¢</h3><h4 id="SELECT-ç”¨äºä»æ•°æ®åº“ä¸­é€‰æ‹©æ•°æ®"><a href="#SELECT-ç”¨äºä»æ•°æ®åº“ä¸­é€‰æ‹©æ•°æ®" class="headerlink" title="SELECT: ç”¨äºä»æ•°æ®åº“ä¸­é€‰æ‹©æ•°æ®"></a><strong>SELECT</strong>: ç”¨äºä»æ•°æ®åº“ä¸­é€‰æ‹©æ•°æ®</h4><ul><li><code>SELECT</code> * <code>FROM</code> table_name;</li></ul><h4 id="DISTINCT-ç”¨äºè¿‡æ»¤æ‰é‡å¤çš„å€¼å¹¶è¿”å›æŒ‡å®šåˆ—çš„è¡Œ"><a href="#DISTINCT-ç”¨äºè¿‡æ»¤æ‰é‡å¤çš„å€¼å¹¶è¿”å›æŒ‡å®šåˆ—çš„è¡Œ" class="headerlink" title="DISTINCT: ç”¨äºè¿‡æ»¤æ‰é‡å¤çš„å€¼å¹¶è¿”å›æŒ‡å®šåˆ—çš„è¡Œ"></a><strong>DISTINCT</strong>: ç”¨äºè¿‡æ»¤æ‰é‡å¤çš„å€¼å¹¶è¿”å›æŒ‡å®šåˆ—çš„è¡Œ</h4><ul><li><code>SELECT DISTINCT</code> column_name;</li></ul><h4 id="WHERE-ç”¨äºè¿‡æ»¤è®°å½•-è¡Œ"><a href="#WHERE-ç”¨äºè¿‡æ»¤è®°å½•-è¡Œ" class="headerlink" title="WHERE: ç”¨äºè¿‡æ»¤è®°å½•/è¡Œ"></a><strong>WHERE</strong>: ç”¨äºè¿‡æ»¤è®°å½•/è¡Œ</h4><ul><li><code>SELECT</code> column1, column2 <code>FROM</code> table_name <code>WHERE</code> condition;</li><li><code>SELECT</code> * <code>FROM</code> table_name <code>WHERE</code> condition1 <code>AND</code> condition2;</li><li><code>SELECT</code> * <code>FROM</code> table_name <code>WHERE</code> condition1 <code>OR</code> condition2;</li><li><code>SELECT</code> * <code>FROM</code> table_name <code>WHERE NOT</code> condition;</li><li><code>SELECT</code> * <code>FROM</code> table_name <code>WHERE</code> condition1 <code>AND</code> (condition2 <code>OR</code> condition3);</li><li><code>SELECT</code> * <code>FROM</code> table_name <code>WHERE EXISTS</code> (<code>SELECT</code> column_name <code>FROM</code> table_name <code>WHERE</code> condition);</li></ul><h4 id="ORDER-BY-ç”¨äºç»“æœé›†çš„æ’åºï¼Œå‡åºï¼ˆASCï¼‰æˆ–è€…é™åºï¼ˆDESCï¼‰"><a href="#ORDER-BY-ç”¨äºç»“æœé›†çš„æ’åºï¼Œå‡åºï¼ˆASCï¼‰æˆ–è€…é™åºï¼ˆDESCï¼‰" class="headerlink" title="ORDER BY: ç”¨äºç»“æœé›†çš„æ’åºï¼Œå‡åºï¼ˆASCï¼‰æˆ–è€…é™åºï¼ˆDESCï¼‰"></a><strong>ORDER BY</strong>: ç”¨äºç»“æœé›†çš„æ’åºï¼Œå‡åºï¼ˆASCï¼‰æˆ–è€…é™åºï¼ˆDESCï¼‰</h4><ul><li><code>SELECT</code> * <code>FROM</code> table_name <code>ORDER BY</code> column;</li><li><code>SELECT</code> * <code>FROM</code> table_name <code>ORDER BY</code> column <code>DESC</code>;</li><li><code>SELECT</code> * <code>FROM</code> table_name <code>ORDER BY</code> column1 <code>ASC</code>, column2 <code>DESC</code>;</li></ul><h4 id="SELECT-TOP-ç”¨äºæŒ‡å®šä»è¡¨é¡¶éƒ¨è¿”å›çš„è®°å½•æ•°"><a href="#SELECT-TOP-ç”¨äºæŒ‡å®šä»è¡¨é¡¶éƒ¨è¿”å›çš„è®°å½•æ•°" class="headerlink" title="SELECT TOP: ç”¨äºæŒ‡å®šä»è¡¨é¡¶éƒ¨è¿”å›çš„è®°å½•æ•°"></a><strong>SELECT TOP</strong>: ç”¨äºæŒ‡å®šä»è¡¨é¡¶éƒ¨è¿”å›çš„è®°å½•æ•°</h4><ul><li><code>SELECT TOP</code> number columns_names <code>FROM</code> table_name <code>WHERE</code> condition;</li><li><code>SELECT TOP</code> percent columns_names <code>FROM</code> table_name <code>WHERE</code> condition;</li><li>å¹¶éæ‰€æœ‰æ•°æ®åº“ç³»ç»Ÿéƒ½æ”¯æŒ<code>SELECT TOP</code>ã€‚ MySQL ä¸­æ˜¯<code>LIMIT</code>å­å¥</li><li><code>SELECT</code> column_names <code>FROM</code> table_name <code>LIMIT</code> offset, count;</li></ul><h4 id="LIKE-ç”¨äºæœç´¢åˆ—ä¸­çš„ç‰¹å®šæ¨¡å¼ï¼ŒWHERE-å­å¥ä¸­ä½¿ç”¨çš„è¿ç®—ç¬¦"><a href="#LIKE-ç”¨äºæœç´¢åˆ—ä¸­çš„ç‰¹å®šæ¨¡å¼ï¼ŒWHERE-å­å¥ä¸­ä½¿ç”¨çš„è¿ç®—ç¬¦" class="headerlink" title="LIKE: ç”¨äºæœç´¢åˆ—ä¸­çš„ç‰¹å®šæ¨¡å¼ï¼ŒWHERE å­å¥ä¸­ä½¿ç”¨çš„è¿ç®—ç¬¦"></a><strong>LIKE</strong>: ç”¨äºæœç´¢åˆ—ä¸­çš„ç‰¹å®šæ¨¡å¼ï¼ŒWHERE å­å¥ä¸­ä½¿ç”¨çš„è¿ç®—ç¬¦</h4><ul><li>% (percent sign) æ˜¯ä¸€ä¸ªè¡¨ç¤ºé›¶ä¸ªï¼Œä¸€ä¸ªæˆ–å¤šä¸ªå­—ç¬¦çš„é€šé…ç¬¦</li><li>_ (underscore) æ˜¯ä¸€ä¸ªè¡¨ç¤ºå•ä¸ªå­—ç¬¦é€šé…ç¬¦</li><li><code>SELECT</code> column_names <code>FROM</code> table_name <code>WHERE</code> column_name <code>LIKE</code> pattern;</li><li><code>LIKE</code> â€˜a%â€™    ï¼ˆæŸ¥æ‰¾ä»»ä½•ä»¥â€œaâ€å¼€å¤´çš„å€¼ï¼‰</li><li><code>LIKE</code> â€˜%aâ€™    ï¼ˆæŸ¥æ‰¾ä»»ä½•ä»¥â€œaâ€ç»“å°¾çš„å€¼ï¼‰</li><li><code>LIKE</code> â€˜%or%â€™  ï¼ˆæŸ¥æ‰¾ä»»ä½•åŒ…å«â€œorâ€çš„å€¼ï¼‰</li><li><code>LIKE</code> â€˜_r%â€™   ï¼ˆæŸ¥æ‰¾ä»»ä½•ç¬¬äºŒä½æ˜¯â€œrâ€çš„å€¼ï¼‰</li><li><code>LIKE</code> â€˜a_%_%â€™ ï¼ˆæŸ¥æ‰¾ä»»ä½•ä»¥â€œaâ€å¼€å¤´ä¸”é•¿åº¦è‡³å°‘ä¸º3çš„å€¼ï¼‰</li><li><code>LIKE</code> â€˜[a-c]%â€™ï¼ˆæŸ¥æ‰¾ä»»ä½•ä»¥â€œaâ€æˆ–â€œbâ€æˆ–â€œcâ€å¼€å¤´çš„å€¼ï¼‰</li></ul><h4 id="IN-ç”¨äºåœ¨-WHERE-å­å¥ä¸­æŒ‡å®šå¤šä¸ªå€¼çš„è¿ç®—ç¬¦"><a href="#IN-ç”¨äºåœ¨-WHERE-å­å¥ä¸­æŒ‡å®šå¤šä¸ªå€¼çš„è¿ç®—ç¬¦" class="headerlink" title="IN: ç”¨äºåœ¨ WHERE å­å¥ä¸­æŒ‡å®šå¤šä¸ªå€¼çš„è¿ç®—ç¬¦"></a><strong>IN</strong>: ç”¨äºåœ¨ WHERE å­å¥ä¸­æŒ‡å®šå¤šä¸ªå€¼çš„è¿ç®—ç¬¦</h4><ul><li>æœ¬è´¨ä¸Šï¼ŒINè¿ç®—ç¬¦æ˜¯å¤šä¸ªORæ¡ä»¶çš„ç®€å†™</li><li><code>SELECT</code> column_names <code>FROM</code> table_name <code>WHERE</code> column_name <code>IN</code> (value1, value2, â€¦);</li><li><code>SELECT</code> column_names <code>FROM</code> table_name <code>WHERE</code> column_name <code>IN</code> (<code>SELECT STATEMENT</code>);</li></ul><h4 id="BETWEEN-ç”¨äºè¿‡æ»¤ç»™å®šèŒƒå›´çš„å€¼çš„è¿ç®—ç¬¦"><a href="#BETWEEN-ç”¨äºè¿‡æ»¤ç»™å®šèŒƒå›´çš„å€¼çš„è¿ç®—ç¬¦" class="headerlink" title="BETWEEN: ç”¨äºè¿‡æ»¤ç»™å®šèŒƒå›´çš„å€¼çš„è¿ç®—ç¬¦"></a><strong>BETWEEN</strong>: ç”¨äºè¿‡æ»¤ç»™å®šèŒƒå›´çš„å€¼çš„è¿ç®—ç¬¦</h4><ul><li><code>SELECT</code> column_names <code>FROM</code> table_name <code>WHERE</code> column_name <code>BETWEEN</code> value1 <code>AND</code> value2;</li><li><code>SELECT</code> * <code>FROM</code> Products <code>WHERE</code> (column_name <code>BETWEEN</code> value1 <code>AND</code> value2) <code>AND NOT</code> column_name2 <code>IN</code> (value3, value4);</li><li><code>SELECT</code> * <code>FROM</code> Products <code>WHERE</code> column_name <code>BETWEEN</code> #01/07/1999# AND #03/12/1999#;</li></ul><h4 id="NULL-ä»£è¡¨ä¸€ä¸ªå­—æ®µæ²¡æœ‰å€¼"><a href="#NULL-ä»£è¡¨ä¸€ä¸ªå­—æ®µæ²¡æœ‰å€¼" class="headerlink" title="NULL: ä»£è¡¨ä¸€ä¸ªå­—æ®µæ²¡æœ‰å€¼"></a><strong>NULL</strong>: ä»£è¡¨ä¸€ä¸ªå­—æ®µæ²¡æœ‰å€¼</h4><ul><li><code>SELECT</code> * <code>FROM</code> table_name <code>WHERE</code> column_name <code>IS NULL</code>;</li><li><code>SELECT</code> * <code>FROM</code> table_name <code>WHERE</code> column_name <code>IS NOT NULL</code>;</li></ul><h4 id="AS-ç”¨äºç»™è¡¨æˆ–è€…åˆ—åˆ†é…åˆ«å"><a href="#AS-ç”¨äºç»™è¡¨æˆ–è€…åˆ—åˆ†é…åˆ«å" class="headerlink" title="AS: ç”¨äºç»™è¡¨æˆ–è€…åˆ—åˆ†é…åˆ«å"></a><strong>AS</strong>: ç”¨äºç»™è¡¨æˆ–è€…åˆ—åˆ†é…åˆ«å</h4><ul><li><code>SELECT</code> column_name <code>AS</code> alias_name <code>FROM</code> table_name;</li><li><code>SELECT</code> column_name <code>FROM</code> table_name <code>AS</code> alias_name;</li><li><code>SELECT</code> column_name <code>AS</code> alias_name1, column_name2 <code>AS</code> alias_name2;</li><li><code>SELECT</code> column_name1, column_name2 + â€˜, â€˜ + column_name3 <code>AS</code> alias_name;</li></ul><h4 id="UNION-ç”¨äºç»„åˆä¸¤ä¸ªæˆ–è€…å¤šä¸ª-SELECT-è¯­å¥çš„ç»“æœé›†çš„è¿ç®—ç¬¦"><a href="#UNION-ç”¨äºç»„åˆä¸¤ä¸ªæˆ–è€…å¤šä¸ª-SELECT-è¯­å¥çš„ç»“æœé›†çš„è¿ç®—ç¬¦" class="headerlink" title="UNION: ç”¨äºç»„åˆä¸¤ä¸ªæˆ–è€…å¤šä¸ª SELECT è¯­å¥çš„ç»“æœé›†çš„è¿ç®—ç¬¦"></a><strong>UNION</strong>: ç”¨äºç»„åˆä¸¤ä¸ªæˆ–è€…å¤šä¸ª SELECT è¯­å¥çš„ç»“æœé›†çš„è¿ç®—ç¬¦</h4><ul><li>æ¯ä¸ª SELECT è¯­å¥å¿…é¡»æ‹¥æœ‰ç›¸åŒçš„åˆ—æ•°</li><li>åˆ—å¿…é¡»æ‹¥æœ‰ç›¸ä¼¼çš„æ•°æ®ç±»å‹</li><li>æ¯ä¸ª SELECT è¯­å¥ä¸­çš„åˆ—ä¹Ÿå¿…é¡»å…·æœ‰ç›¸åŒçš„é¡ºåº</li><li><code>SELECT</code> columns_names <code>FROM</code> table1 <code>UNION SELECT</code> column_name <code>FROM</code> table2;</li><li><code>UNION</code> ä»…å…è®¸é€‰æ‹©ä¸åŒçš„å€¼, <code>UNION ALL</code> å…è®¸é‡å¤</li></ul><h4 id="ANY-ALL-ç”¨äºæ£€æŸ¥-WHERE-æˆ–-HAVING-å­å¥ä¸­ä½¿ç”¨çš„å­æŸ¥è¯¢æ¡ä»¶çš„è¿ç®—ç¬¦"><a href="#ANY-ALL-ç”¨äºæ£€æŸ¥-WHERE-æˆ–-HAVING-å­å¥ä¸­ä½¿ç”¨çš„å­æŸ¥è¯¢æ¡ä»¶çš„è¿ç®—ç¬¦" class="headerlink" title="ANY|ALL: ç”¨äºæ£€æŸ¥ WHERE æˆ– HAVING å­å¥ä¸­ä½¿ç”¨çš„å­æŸ¥è¯¢æ¡ä»¶çš„è¿ç®—ç¬¦"></a><strong>ANY|ALL</strong>: ç”¨äºæ£€æŸ¥ WHERE æˆ– HAVING å­å¥ä¸­ä½¿ç”¨çš„å­æŸ¥è¯¢æ¡ä»¶çš„è¿ç®—ç¬¦</h4><ul><li><code>ANY</code> å¦‚æœä»»ä½•å­æŸ¥è¯¢å€¼æ»¡è¶³æ¡ä»¶ï¼Œåˆ™è¿”å› trueã€‚</li><li><code>ALL</code> å¦‚æœæ‰€æœ‰å­æŸ¥è¯¢å€¼éƒ½æ»¡è¶³æ¡ä»¶ï¼Œåˆ™è¿”å› trueã€‚</li><li><code>SELECT</code> columns_names <code>FROM</code> table1 <code>WHERE</code> column_name operator (<code>ANY</code>|<code>ALL</code>) (<code>SELECT</code> column_name <code>FROM</code> table_name <code>WHERE</code> condition);</li></ul><h4 id="GROUP-BY-é€šå¸¸ä¸èšåˆå‡½æ•°ï¼ˆCOUNTï¼ŒMAXï¼ŒMINï¼ŒSUMï¼ŒAVGï¼‰ä¸€èµ·ä½¿ç”¨ï¼Œç”¨äºå°†ç»“æœé›†åˆ†ç»„ä¸ºä¸€åˆ—æˆ–å¤šåˆ—"><a href="#GROUP-BY-é€šå¸¸ä¸èšåˆå‡½æ•°ï¼ˆCOUNTï¼ŒMAXï¼ŒMINï¼ŒSUMï¼ŒAVGï¼‰ä¸€èµ·ä½¿ç”¨ï¼Œç”¨äºå°†ç»“æœé›†åˆ†ç»„ä¸ºä¸€åˆ—æˆ–å¤šåˆ—" class="headerlink" title="GROUP BY: é€šå¸¸ä¸èšåˆå‡½æ•°ï¼ˆCOUNTï¼ŒMAXï¼ŒMINï¼ŒSUMï¼ŒAVGï¼‰ä¸€èµ·ä½¿ç”¨ï¼Œç”¨äºå°†ç»“æœé›†åˆ†ç»„ä¸ºä¸€åˆ—æˆ–å¤šåˆ—"></a><strong>GROUP BY</strong>: é€šå¸¸ä¸èšåˆå‡½æ•°ï¼ˆCOUNTï¼ŒMAXï¼ŒMINï¼ŒSUMï¼ŒAVGï¼‰ä¸€èµ·ä½¿ç”¨ï¼Œç”¨äºå°†ç»“æœé›†åˆ†ç»„ä¸ºä¸€åˆ—æˆ–å¤šåˆ—</h4><ul><li><code>SELECT</code> column_name1, COUNT(column_name2) <code>FROM</code> table_name <code>WHERE</code> condition <code>GROUP BY</code> column_name1 <code>ORDER BY</code> COUNT(column_name2) DESC;</li></ul><h4 id="HAVING-HAVING-å­å¥æŒ‡å®š-SELECT-è¯­å¥åº”ä»…è¿”å›èšåˆå€¼æ»¡è¶³æŒ‡å®šæ¡ä»¶çš„è¡Œã€‚å®ƒè¢«æ·»åŠ åˆ°-SQL-è¯­è¨€ä¸­ï¼Œå› ä¸ºWHEREå…³é”®å­—ä¸èƒ½ä¸èšåˆå‡½æ•°ä¸€èµ·ä½¿ç”¨ã€‚"><a href="#HAVING-HAVING-å­å¥æŒ‡å®š-SELECT-è¯­å¥åº”ä»…è¿”å›èšåˆå€¼æ»¡è¶³æŒ‡å®šæ¡ä»¶çš„è¡Œã€‚å®ƒè¢«æ·»åŠ åˆ°-SQL-è¯­è¨€ä¸­ï¼Œå› ä¸ºWHEREå…³é”®å­—ä¸èƒ½ä¸èšåˆå‡½æ•°ä¸€èµ·ä½¿ç”¨ã€‚" class="headerlink" title="HAVING: HAVING å­å¥æŒ‡å®š SELECT è¯­å¥åº”ä»…è¿”å›èšåˆå€¼æ»¡è¶³æŒ‡å®šæ¡ä»¶çš„è¡Œã€‚å®ƒè¢«æ·»åŠ åˆ° SQL è¯­è¨€ä¸­ï¼Œå› ä¸ºWHEREå…³é”®å­—ä¸èƒ½ä¸èšåˆå‡½æ•°ä¸€èµ·ä½¿ç”¨ã€‚"></a><strong>HAVING</strong>: HAVING å­å¥æŒ‡å®š SELECT è¯­å¥åº”ä»…è¿”å›èšåˆå€¼æ»¡è¶³æŒ‡å®šæ¡ä»¶çš„è¡Œã€‚å®ƒè¢«æ·»åŠ åˆ° SQL è¯­è¨€ä¸­ï¼Œå› ä¸ºWHEREå…³é”®å­—ä¸èƒ½ä¸èšåˆå‡½æ•°ä¸€èµ·ä½¿ç”¨ã€‚</h4><ul><li><code>SELECT</code> <code>COUNT</code>(column_name1), column_name2 <code>FROM</code> table <code>GROUP BY</code> column_name2 <code>HAVING</code> <code>COUNT(</code>column_name1<code>)</code> &gt; 5;</li></ul><a id="more"></a><h3 id="2-ä¿®æ”¹æ•°æ®çš„æŸ¥è¯¢"><a href="#2-ä¿®æ”¹æ•°æ®çš„æŸ¥è¯¢" class="headerlink" title="2. ä¿®æ”¹æ•°æ®çš„æŸ¥è¯¢"></a>2. ä¿®æ”¹æ•°æ®çš„æŸ¥è¯¢</h3><h4 id="INSERT-INTO-ç”¨äºåœ¨è¡¨ä¸­æ’å…¥æ–°è®°å½•-è¡Œ"><a href="#INSERT-INTO-ç”¨äºåœ¨è¡¨ä¸­æ’å…¥æ–°è®°å½•-è¡Œ" class="headerlink" title="INSERT INTO: ç”¨äºåœ¨è¡¨ä¸­æ’å…¥æ–°è®°å½•/è¡Œ"></a><strong>INSERT INTO</strong>: ç”¨äºåœ¨è¡¨ä¸­æ’å…¥æ–°è®°å½•/è¡Œ</h4><ul><li><code>INSERT INTO</code> table_name (column1, column2) <code>VALUES</code> (value1, value2);</li><li><code>INSERT INTO</code> table_name <code>VALUES</code> (value1, value2 â€¦);</li></ul><h4 id="UPDATE-ç”¨äºä¿®æ”¹è¡¨ä¸­çš„ç°æœ‰è®°å½•-è¡Œ"><a href="#UPDATE-ç”¨äºä¿®æ”¹è¡¨ä¸­çš„ç°æœ‰è®°å½•-è¡Œ" class="headerlink" title="UPDATE: ç”¨äºä¿®æ”¹è¡¨ä¸­çš„ç°æœ‰è®°å½•/è¡Œ"></a><strong>UPDATE</strong>: ç”¨äºä¿®æ”¹è¡¨ä¸­çš„ç°æœ‰è®°å½•/è¡Œ</h4><ul><li><code>UPDATE</code> table_name <code>SET</code> column1 = value1, column2 = value2 <code>WHERE</code> condition;</li><li><code>UPDATE</code> table_name <code>SET</code> column_name = value;</li></ul><h4 id="DELETE-ç”¨äºåˆ é™¤è¡¨ä¸­çš„ç°æœ‰è®°å½•-è¡Œ"><a href="#DELETE-ç”¨äºåˆ é™¤è¡¨ä¸­çš„ç°æœ‰è®°å½•-è¡Œ" class="headerlink" title="DELETE: ç”¨äºåˆ é™¤è¡¨ä¸­çš„ç°æœ‰è®°å½•/è¡Œ"></a><strong>DELETE</strong>: ç”¨äºåˆ é™¤è¡¨ä¸­çš„ç°æœ‰è®°å½•/è¡Œ</h4><ul><li><code>DELETE FROM</code> table_name <code>WHERE</code> condition;</li><li><code>DELETE</code> * <code>FROM</code> table_name;</li></ul><h3 id="3-èšåˆæŸ¥è¯¢"><a href="#3-èšåˆæŸ¥è¯¢" class="headerlink" title="3. èšåˆæŸ¥è¯¢"></a>3. èšåˆæŸ¥è¯¢</h3><h4 id="COUNT-è¿”å›å‡ºç°æ¬¡æ•°"><a href="#COUNT-è¿”å›å‡ºç°æ¬¡æ•°" class="headerlink" title="COUNT: è¿”å›å‡ºç°æ¬¡æ•°"></a><strong>COUNT</strong>: è¿”å›å‡ºç°æ¬¡æ•°</h4><ul><li><code>SELECT COUNT (DISTINCT</code> column_name<code>)</code>;</li></ul><h4 id="MIN-and-MAX-è¿”å›æ‰€é€‰åˆ—çš„æœ€å°-æœ€å¤§å€¼"><a href="#MIN-and-MAX-è¿”å›æ‰€é€‰åˆ—çš„æœ€å°-æœ€å¤§å€¼" class="headerlink" title="MIN() and MAX(): è¿”å›æ‰€é€‰åˆ—çš„æœ€å°/æœ€å¤§å€¼"></a><strong>MIN() and MAX()</strong>: è¿”å›æ‰€é€‰åˆ—çš„æœ€å°/æœ€å¤§å€¼</h4><ul><li><code>SELECT MIN (</code>column_names<code>) FROM</code> table_name <code>WHERE</code> condition;</li><li><code>SELECT MAX (</code>column_names<code>) FROM</code> table_name <code>WHERE</code> condition;</li></ul><h4 id="AVG-è¿”å›æ•°å­—åˆ—çš„å¹³å‡å€¼"><a href="#AVG-è¿”å›æ•°å­—åˆ—çš„å¹³å‡å€¼" class="headerlink" title="AVG(): è¿”å›æ•°å­—åˆ—çš„å¹³å‡å€¼"></a><strong>AVG()</strong>: è¿”å›æ•°å­—åˆ—çš„å¹³å‡å€¼</h4><ul><li><code>SELECT AVG (</code>column_name<code>) FROM</code> table_name <code>WHERE</code> condition;</li></ul><h4 id="SUM-è¿”å›æ•°å€¼åˆ—çš„æ€»å’Œ"><a href="#SUM-è¿”å›æ•°å€¼åˆ—çš„æ€»å’Œ" class="headerlink" title="SUM(): è¿”å›æ•°å€¼åˆ—çš„æ€»å’Œ"></a><strong>SUM()</strong>: è¿”å›æ•°å€¼åˆ—çš„æ€»å’Œ</h4><ul><li><code>SELECT SUM (</code>column_name<code>) FROM</code> table_name <code>WHERE</code> condition;</li></ul><h3 id="4-è¿æ¥æŸ¥è¯¢"><a href="#4-è¿æ¥æŸ¥è¯¢" class="headerlink" title="4. è¿æ¥æŸ¥è¯¢"></a>4. è¿æ¥æŸ¥è¯¢</h3><h4 id="INNER-JOIN-å†…è¿æ¥ï¼Œè¿”å›åœ¨ä¸¤å¼ è¡¨ä¸­å…·æœ‰åŒ¹é…å€¼çš„è®°å½•"><a href="#INNER-JOIN-å†…è¿æ¥ï¼Œè¿”å›åœ¨ä¸¤å¼ è¡¨ä¸­å…·æœ‰åŒ¹é…å€¼çš„è®°å½•" class="headerlink" title="INNER JOIN: å†…è¿æ¥ï¼Œè¿”å›åœ¨ä¸¤å¼ è¡¨ä¸­å…·æœ‰åŒ¹é…å€¼çš„è®°å½•"></a><strong>INNER JOIN</strong>: å†…è¿æ¥ï¼Œè¿”å›åœ¨ä¸¤å¼ è¡¨ä¸­å…·æœ‰åŒ¹é…å€¼çš„è®°å½•</h4><ul><li><code>SELECT</code> column_names <code>FROM</code> table1 <code>INNER JOIN</code> table2 <code>ON</code> table1.column_name=table2.column_name;</li><li><code>SELECT</code> table1.column_name1, table2.column_name2, table3.column_name3 <code>FROM</code> ((table1 <code>INNER JOIN</code> table2 <code>ON</code> relationship) <code>INNER JOIN</code> table3 <code>ON</code> relationship);</li></ul><h4 id="LEFT-OUTER-JOIN-å·¦å¤–è¿æ¥ï¼Œè¿”å›å·¦è¡¨ï¼ˆtable1ï¼‰ä¸­çš„æ‰€æœ‰è®°å½•ï¼Œä»¥åŠå³è¡¨ä¸­çš„åŒ¹é…è®°å½•ï¼ˆtable2ï¼‰"><a href="#LEFT-OUTER-JOIN-å·¦å¤–è¿æ¥ï¼Œè¿”å›å·¦è¡¨ï¼ˆtable1ï¼‰ä¸­çš„æ‰€æœ‰è®°å½•ï¼Œä»¥åŠå³è¡¨ä¸­çš„åŒ¹é…è®°å½•ï¼ˆtable2ï¼‰" class="headerlink" title="LEFT (OUTER) JOIN: å·¦å¤–è¿æ¥ï¼Œè¿”å›å·¦è¡¨ï¼ˆtable1ï¼‰ä¸­çš„æ‰€æœ‰è®°å½•ï¼Œä»¥åŠå³è¡¨ä¸­çš„åŒ¹é…è®°å½•ï¼ˆtable2ï¼‰"></a><strong>LEFT (OUTER) JOIN</strong>: å·¦å¤–è¿æ¥ï¼Œè¿”å›å·¦è¡¨ï¼ˆtable1ï¼‰ä¸­çš„æ‰€æœ‰è®°å½•ï¼Œä»¥åŠå³è¡¨ä¸­çš„åŒ¹é…è®°å½•ï¼ˆtable2ï¼‰</h4><ul><li><code>SELECT</code> column_names <code>FROM</code> table1 <code>LEFT JOIN</code> table2 <code>ON</code> table1.column_name=table2.column_name;</li></ul><h4 id="RIGHT-OUTER-JOIN-å³å¤–è¿æ¥ï¼Œè¿”å›å³è¡¨ï¼ˆtable2ï¼‰ä¸­çš„æ‰€æœ‰è®°å½•ï¼Œä»¥åŠå·¦è¡¨ï¼ˆtable1ï¼‰ä¸­åŒ¹é…çš„è®°å½•"><a href="#RIGHT-OUTER-JOIN-å³å¤–è¿æ¥ï¼Œè¿”å›å³è¡¨ï¼ˆtable2ï¼‰ä¸­çš„æ‰€æœ‰è®°å½•ï¼Œä»¥åŠå·¦è¡¨ï¼ˆtable1ï¼‰ä¸­åŒ¹é…çš„è®°å½•" class="headerlink" title="RIGHT (OUTER) JOIN: å³å¤–è¿æ¥ï¼Œè¿”å›å³è¡¨ï¼ˆtable2ï¼‰ä¸­çš„æ‰€æœ‰è®°å½•ï¼Œä»¥åŠå·¦è¡¨ï¼ˆtable1ï¼‰ä¸­åŒ¹é…çš„è®°å½•"></a><strong>RIGHT (OUTER) JOIN</strong>: å³å¤–è¿æ¥ï¼Œè¿”å›å³è¡¨ï¼ˆtable2ï¼‰ä¸­çš„æ‰€æœ‰è®°å½•ï¼Œä»¥åŠå·¦è¡¨ï¼ˆtable1ï¼‰ä¸­åŒ¹é…çš„è®°å½•</h4><ul><li><code>SELECT</code> column_names <code>FROM</code> table1 <code>RIGHT JOIN</code> table2 <code>ON</code> table1.column_name=table2.column_name;</li></ul><h4 id="FULL-OUTER-JOIN-å…¨å¤–è¿æ¥ï¼Œå…¨è¿æ¥æ˜¯å·¦å³å¤–è¿æ¥çš„å¹¶é›†-è¿æ¥è¡¨åŒ…å«è¢«è¿æ¥çš„è¡¨çš„æ‰€æœ‰è®°å½•-å¦‚æœç¼ºå°‘åŒ¹é…çš„è®°å½•-ä»¥-NULL-å¡«å……ã€‚"><a href="#FULL-OUTER-JOIN-å…¨å¤–è¿æ¥ï¼Œå…¨è¿æ¥æ˜¯å·¦å³å¤–è¿æ¥çš„å¹¶é›†-è¿æ¥è¡¨åŒ…å«è¢«è¿æ¥çš„è¡¨çš„æ‰€æœ‰è®°å½•-å¦‚æœç¼ºå°‘åŒ¹é…çš„è®°å½•-ä»¥-NULL-å¡«å……ã€‚" class="headerlink" title="FULL (OUTER) JOIN: å…¨å¤–è¿æ¥ï¼Œå…¨è¿æ¥æ˜¯å·¦å³å¤–è¿æ¥çš„å¹¶é›†. è¿æ¥è¡¨åŒ…å«è¢«è¿æ¥çš„è¡¨çš„æ‰€æœ‰è®°å½•, å¦‚æœç¼ºå°‘åŒ¹é…çš„è®°å½•, ä»¥ NULL å¡«å……ã€‚"></a><strong>FULL (OUTER) JOIN</strong>: å…¨å¤–è¿æ¥ï¼Œå…¨è¿æ¥æ˜¯å·¦å³å¤–è¿æ¥çš„å¹¶é›†. è¿æ¥è¡¨åŒ…å«è¢«è¿æ¥çš„è¡¨çš„æ‰€æœ‰è®°å½•, å¦‚æœç¼ºå°‘åŒ¹é…çš„è®°å½•, ä»¥ NULL å¡«å……ã€‚</h4><ul><li><code>SELECT</code> column_names <code>FROM</code> table1 <code>FULL OUTER JOIN</code> table2 <code>ON</code> table1.column_name=table2.column_name;</li></ul><h4 id="Self-JOIN-è‡ªè¿æ¥ï¼Œè¡¨è‡ªèº«è¿æ¥"><a href="#Self-JOIN-è‡ªè¿æ¥ï¼Œè¡¨è‡ªèº«è¿æ¥" class="headerlink" title="Self JOIN: è‡ªè¿æ¥ï¼Œè¡¨è‡ªèº«è¿æ¥"></a><strong>Self JOIN</strong>: è‡ªè¿æ¥ï¼Œè¡¨è‡ªèº«è¿æ¥</h4><ul><li><code>SELECT</code> column_names <code>FROM</code> table1 T1, table1 T2 <code>WHERE</code> condition;</li></ul><h3 id="5-è§†å›¾æŸ¥è¯¢"><a href="#5-è§†å›¾æŸ¥è¯¢" class="headerlink" title="5. è§†å›¾æŸ¥è¯¢"></a>5. è§†å›¾æŸ¥è¯¢</h3><h4 id="CREATE-åˆ›å»ºè§†å›¾"><a href="#CREATE-åˆ›å»ºè§†å›¾" class="headerlink" title="CREATE: åˆ›å»ºè§†å›¾"></a><strong>CREATE</strong>: åˆ›å»ºè§†å›¾</h4><ul><li><code>CREATE VIEW</code> view_name <code>AS SELECT</code> column1, column2 <code>FROM</code> table_name <code>WHERE</code> condition;</li></ul><h4 id="SELECT-æ£€ç´¢è§†å›¾"><a href="#SELECT-æ£€ç´¢è§†å›¾" class="headerlink" title="SELECT: æ£€ç´¢è§†å›¾"></a><strong>SELECT</strong>: æ£€ç´¢è§†å›¾</h4><ul><li><code>SELECT</code> * <code>FROM</code> view_name;</li></ul><h4 id="DROP-åˆ é™¤è§†å›¾"><a href="#DROP-åˆ é™¤è§†å›¾" class="headerlink" title="DROP: åˆ é™¤è§†å›¾"></a><strong>DROP</strong>: åˆ é™¤è§†å›¾</h4><ul><li><code>DROP VIEW</code> view_name;</li></ul><h3 id="6-ä¿®æ”¹è¡¨çš„æŸ¥è¯¢"><a href="#6-ä¿®æ”¹è¡¨çš„æŸ¥è¯¢" class="headerlink" title="6. ä¿®æ”¹è¡¨çš„æŸ¥è¯¢"></a>6. ä¿®æ”¹è¡¨çš„æŸ¥è¯¢</h3><h4 id="ADD-æ·»åŠ å­—æ®µ"><a href="#ADD-æ·»åŠ å­—æ®µ" class="headerlink" title="ADD: æ·»åŠ å­—æ®µ"></a><strong>ADD</strong>: æ·»åŠ å­—æ®µ</h4><ul><li><code>ALTER TABLE</code> table_name <code>ADD</code> column_name column_definition;</li></ul><h4 id="MODIFY-ä¿®æ”¹å­—æ®µæ•°æ®ç±»å‹"><a href="#MODIFY-ä¿®æ”¹å­—æ®µæ•°æ®ç±»å‹" class="headerlink" title="MODIFY: ä¿®æ”¹å­—æ®µæ•°æ®ç±»å‹"></a><strong>MODIFY</strong>: ä¿®æ”¹å­—æ®µæ•°æ®ç±»å‹</h4><ul><li><code>ALTER TABLE</code> table_name <code>MODIFY</code> column_name column_type;</li></ul><h4 id="DROP-åˆ é™¤å­—æ®µ"><a href="#DROP-åˆ é™¤å­—æ®µ" class="headerlink" title="DROP: åˆ é™¤å­—æ®µ"></a><strong>DROP</strong>: åˆ é™¤å­—æ®µ</h4><ul><li><code>ALTER TABLE</code> table_name <code>DROP COLUMN</code> column_name;</li></ul><h3 id="æ•°å­¦å‡½æ•°"><a href="#æ•°å­¦å‡½æ•°" class="headerlink" title="æ•°å­¦å‡½æ•°"></a>æ•°å­¦å‡½æ•°</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">ABS(x)         <span class="comment">--è¿”å›xçš„ç»å¯¹å€¼</span></span><br><span class="line">BIN(x)         <span class="comment">--è¿”å›xçš„äºŒè¿›åˆ¶ï¼ˆOCTè¿”å›å…«è¿›åˆ¶ï¼ŒHEXè¿”å›åå…­è¿›åˆ¶ï¼‰</span></span><br><span class="line">CEILING(x)     <span class="comment">--è¿”å›å¤§äºxçš„æœ€å°æ•´æ•°å€¼</span></span><br><span class="line">EXP(x)         <span class="comment">--è¿”å›å€¼eï¼ˆè‡ªç„¶å¯¹æ•°çš„åº•ï¼‰çš„xæ¬¡æ–¹</span></span><br><span class="line">FLOOR(x)       <span class="comment">--è¿”å›å°äºxçš„æœ€å¤§æ•´æ•°å€¼</span></span><br><span class="line">GREATEST(x1,x2,...,xn)</span><br><span class="line">                <span class="comment">--è¿”å›é›†åˆä¸­æœ€å¤§çš„å€¼</span></span><br><span class="line">LEAST(x1,x2,...,xn)   </span><br><span class="line">                <span class="comment">--è¿”å›é›†åˆä¸­æœ€å°çš„å€¼</span></span><br><span class="line">LN(x)           <span class="comment">--è¿”å›xçš„è‡ªç„¶å¯¹æ•°</span></span><br><span class="line">LOG(x,y)        <span class="comment">--è¿”å›xçš„ä»¥yä¸ºåº•çš„å¯¹æ•°</span></span><br><span class="line">MOD(x,y)        <span class="comment">--è¿”å›x/yçš„æ¨¡ï¼ˆä½™æ•°ï¼‰</span></span><br><span class="line">PI()            <span class="comment">--è¿”å›piçš„å€¼ï¼ˆåœ†å‘¨ç‡ï¼‰</span></span><br><span class="line">RAND()          <span class="comment">--è¿”å›ï¼åˆ°ï¼‘å†…çš„éšæœºå€¼,å¯ä»¥é€šè¿‡æä¾›ä¸€ä¸ªå‚æ•°(ç§å­)ä½¿RAND()éšæœºæ•°ç”Ÿæˆå™¨ç”Ÿæˆä¸€ä¸ªæŒ‡å®šçš„å€¼ã€‚</span></span><br><span class="line">ROUND(x,y)      <span class="comment">--è¿”å›å‚æ•°xçš„å››èˆäº”å…¥çš„æœ‰yä½å°æ•°çš„å€¼</span></span><br><span class="line">SIGN(x)         <span class="comment">--è¿”å›ä»£è¡¨æ•°å­—xçš„ç¬¦å·çš„å€¼</span></span><br><span class="line">SQRT(x)         <span class="comment">--è¿”å›ä¸€ä¸ªæ•°çš„å¹³æ–¹æ ¹</span></span><br><span class="line"><span class="keyword">TRUNCATE</span>(x,y)   <span class="comment">--è¿”å›æ•°å­—xæˆªçŸ­ä¸ºyä½å°æ•°çš„ç»“æœ</span></span><br></pre></td></tr></table></figure><h3 id="èšåˆå‡½æ•°"><a href="#èšåˆå‡½æ•°" class="headerlink" title="èšåˆå‡½æ•°"></a>èšåˆå‡½æ•°</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">AVG(X)            <span class="comment">--è¿”å›æŒ‡å®šåˆ—çš„å¹³å‡å€¼</span></span><br><span class="line">COUNT(X)          <span class="comment">--è¿”å›æŒ‡å®šåˆ—ä¸­éNULLå€¼çš„ä¸ªæ•°</span></span><br><span class="line">MIN(X)            <span class="comment">--è¿”å›æŒ‡å®šåˆ—çš„æœ€å°å€¼</span></span><br><span class="line">MAX(X)            <span class="comment">--è¿”å›æŒ‡å®šåˆ—çš„æœ€å¤§å€¼</span></span><br><span class="line">SUM(X)            <span class="comment">--è¿”å›æŒ‡å®šåˆ—çš„æ‰€æœ‰å€¼ä¹‹å’Œ</span></span><br><span class="line">GROUP_CONCAT(X)   <span class="comment">--è¿”å›ç”±å±äºä¸€ç»„çš„åˆ—å€¼è¿æ¥ç»„åˆè€Œæˆçš„ç»“æœï¼Œéå¸¸æœ‰ç”¨</span></span><br></pre></td></tr></table></figure><h3 id="å­—ç¬¦ä¸²å‡½æ•°ï¼ˆ20ä¸ªï¼‰"><a href="#å­—ç¬¦ä¸²å‡½æ•°ï¼ˆ20ä¸ªï¼‰" class="headerlink" title="å­—ç¬¦ä¸²å‡½æ•°ï¼ˆ20ä¸ªï¼‰"></a>å­—ç¬¦ä¸²å‡½æ•°ï¼ˆ20ä¸ªï¼‰</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">ASCII(char)        <span class="comment">--è¿”å›å­—ç¬¦çš„ASCIIç å€¼</span></span><br><span class="line">BIT_LENGTH(str)    <span class="comment">--è¿”å›å­—ç¬¦ä¸²çš„æ¯”ç‰¹é•¿åº¦</span></span><br><span class="line">CONCAT(s1,s2...,sn) </span><br><span class="line">                   <span class="comment">--å°†s1,s2...,snè¿æ¥æˆå­—ç¬¦ä¸²</span></span><br><span class="line">CONCAT_WS(sep,s1,s2...,sn)</span><br><span class="line">                   <span class="comment">--å°†s1,s2...,snè¿æ¥æˆå­—ç¬¦ä¸²ï¼Œå¹¶ç”¨sepå­—ç¬¦é—´éš”</span></span><br><span class="line"><span class="keyword">INSERT</span>(<span class="keyword">str</span>,x,y,<span class="keyword">instr</span>) </span><br><span class="line">                   <span class="comment">--å°†å­—ç¬¦ä¸²strä»ç¬¬xä½ç½®å¼€å§‹ï¼Œyä¸ªå­—ç¬¦é•¿çš„å­ä¸²æ›¿æ¢ä¸ºå­—ç¬¦ä¸²instrï¼Œè¿”å›ç»“æœ</span></span><br><span class="line">FIND_IN_SET(<span class="keyword">str</span>,<span class="keyword">list</span>)</span><br><span class="line">                   <span class="comment">--åˆ†æé€—å·åˆ†éš”çš„liståˆ—è¡¨ï¼Œå¦‚æœå‘ç°strï¼Œè¿”å›stråœ¨listä¸­çš„ä½ç½®</span></span><br><span class="line"><span class="keyword">LCASE</span>(<span class="keyword">str</span>)æˆ–<span class="keyword">LOWER</span>(<span class="keyword">str</span>) </span><br><span class="line">                   <span class="comment">--è¿”å›å°†å­—ç¬¦ä¸²strä¸­æ‰€æœ‰å­—ç¬¦æ”¹å˜ä¸ºå°å†™åçš„ç»“æœ</span></span><br><span class="line"><span class="keyword">LEFT</span>(<span class="keyword">str</span>,x)        <span class="comment">--è¿”å›å­—ç¬¦ä¸²strä¸­æœ€å·¦è¾¹çš„xä¸ªå­—ç¬¦</span></span><br><span class="line"><span class="keyword">LENGTH</span>(s)          <span class="comment">--è¿”å›å­—ç¬¦ä¸²strä¸­çš„å­—ç¬¦æ•°</span></span><br><span class="line"><span class="keyword">LTRIM</span>(<span class="keyword">str</span>)         <span class="comment">--ä»å­—ç¬¦ä¸²strä¸­åˆ‡æ‰å¼€å¤´çš„ç©ºæ ¼</span></span><br><span class="line"><span class="keyword">POSITION</span>(<span class="keyword">substr</span>,<span class="keyword">str</span>) </span><br><span class="line">                   <span class="comment">--è¿”å›å­ä¸²substråœ¨å­—ç¬¦ä¸²strä¸­ç¬¬ä¸€æ¬¡å‡ºç°çš„ä½ç½®</span></span><br><span class="line">QUOTE(<span class="keyword">str</span>)         <span class="comment">--ç”¨åæ–œæ è½¬ä¹‰strä¸­çš„å•å¼•å·</span></span><br><span class="line"><span class="keyword">REPEAT</span>(<span class="keyword">str</span>,srchstr,rplcstr)</span><br><span class="line">                   <span class="comment">--è¿”å›å­—ç¬¦ä¸²stré‡å¤xæ¬¡çš„ç»“æœ</span></span><br><span class="line"><span class="keyword">REVERSE</span>(<span class="keyword">str</span>)       <span class="comment">--è¿”å›é¢ å€’å­—ç¬¦ä¸²strçš„ç»“æœ</span></span><br><span class="line"><span class="keyword">RIGHT</span>(<span class="keyword">str</span>,x)       <span class="comment">--è¿”å›å­—ç¬¦ä¸²strä¸­æœ€å³è¾¹çš„xä¸ªå­—ç¬¦</span></span><br><span class="line"><span class="keyword">RTRIM</span>(<span class="keyword">str</span>)         <span class="comment">--è¿”å›å­—ç¬¦ä¸²strå°¾éƒ¨çš„ç©ºæ ¼</span></span><br><span class="line"><span class="keyword">STRCMP</span>(s1,s2)      <span class="comment">--æ¯”è¾ƒå­—ç¬¦ä¸²s1å’Œs2</span></span><br><span class="line"><span class="keyword">TRIM</span>(<span class="keyword">str</span>)          <span class="comment">--å»é™¤å­—ç¬¦ä¸²é¦–éƒ¨å’Œå°¾éƒ¨çš„æ‰€æœ‰ç©ºæ ¼</span></span><br><span class="line"><span class="keyword">UCASE</span>(<span class="keyword">str</span>)æˆ–<span class="keyword">UPPER</span>(<span class="keyword">str</span>) </span><br><span class="line">                   <span class="comment">--è¿”å›å°†å­—ç¬¦ä¸²strä¸­æ‰€æœ‰å­—ç¬¦è½¬å˜ä¸ºå¤§å†™åçš„ç»“æœ</span></span><br></pre></td></tr></table></figure><h3 id="æ—¥æœŸå’Œæ—¶é—´å‡½æ•°"><a href="#æ—¥æœŸå’Œæ—¶é—´å‡½æ•°" class="headerlink" title="æ—¥æœŸå’Œæ—¶é—´å‡½æ•°"></a>æ—¥æœŸå’Œæ—¶é—´å‡½æ•°</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line">CURDATE()æˆ–CURRENT_DATE() </span><br><span class="line">                   <span class="comment">--è¿”å›å½“å‰çš„æ—¥æœŸ</span></span><br><span class="line">CURTIME()æˆ–CURRENT_TIME() </span><br><span class="line">                   <span class="comment">--è¿”å›å½“å‰çš„æ—¶é—´</span></span><br><span class="line">DATE_ADD(date,INTERVAL int keyword)</span><br><span class="line">                   <span class="comment">--è¿”å›æ—¥æœŸdateåŠ ä¸Šé—´éš”æ—¶é—´intçš„ç»“æœ(intå¿…é¡»æŒ‰ç…§å…³é”®å­—è¿›è¡Œæ ¼å¼åŒ–)</span></span><br><span class="line"><span class="comment">-- ä¾‹å¦‚</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">DATE_ADD</span>(<span class="keyword">CURRENT_DATE</span>,<span class="built_in">INTERVAL</span> <span class="number">6</span> <span class="keyword">MONTH</span>);</span><br><span class="line"></span><br><span class="line">DATE_FORMAT(date,fmt)  </span><br><span class="line">                   <span class="comment">--ä¾ç…§æŒ‡å®šçš„fmtæ ¼å¼æ ¼å¼åŒ–æ—¥æœŸdateå€¼</span></span><br><span class="line">DATE_SUB(date,INTERVAL int keyword)</span><br><span class="line">                   <span class="comment">--è¿”å›æ—¥æœŸdateåŠ ä¸Šé—´éš”æ—¶é—´intçš„ç»“æœ(intå¿…é¡»æŒ‰ç…§å…³é”®å­—è¿›è¡Œæ ¼å¼åŒ–)</span></span><br><span class="line"><span class="comment">-- ä¾‹å¦‚</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">DATE_SUB</span>(<span class="keyword">CURRENT_DATE</span>,<span class="built_in">INTERVAL</span> <span class="number">6</span> <span class="keyword">MONTH</span>);</span><br><span class="line"></span><br><span class="line">DAYOFWEEK(date)    <span class="comment">--è¿”å›dateæ‰€ä»£è¡¨çš„ä¸€æ˜ŸæœŸä¸­çš„ç¬¬å‡ å¤©(1~7)</span></span><br><span class="line">DAYOFMONTH(date)   <span class="comment">--è¿”å›dateæ˜¯ä¸€ä¸ªæœˆçš„ç¬¬å‡ å¤©(1~31)</span></span><br><span class="line">DAYOFYEAR(date)    <span class="comment">--è¿”å›dateæ˜¯ä¸€å¹´çš„ç¬¬å‡ å¤©(1~366)</span></span><br><span class="line">DAYNAME(date)      <span class="comment">--è¿”å›dateçš„æ˜ŸæœŸåï¼Œå¦‚ï¼šSELECT DAYNAME(CURRENT_DATE);</span></span><br><span class="line">FROM_UNIXTIME(ts,fmt)  </span><br><span class="line">                   <span class="comment">--æ ¹æ®æŒ‡å®šçš„fmtæ ¼å¼ï¼Œæ ¼å¼åŒ–UNIXæ—¶é—´æˆ³ts</span></span><br><span class="line">HOUR(time)         <span class="comment">--è¿”å›timeçš„å°æ—¶å€¼(0~23)</span></span><br><span class="line">MINUTE(time)       <span class="comment">--è¿”å›timeçš„åˆ†é’Ÿå€¼(0~59)</span></span><br><span class="line">MONTH(date)        <span class="comment">--è¿”å›dateçš„æœˆä»½å€¼(1~12)</span></span><br><span class="line">MONTHNAME(date)    <span class="comment">--è¿”å›dateçš„æœˆä»½åï¼Œå¦‚ï¼šSELECT MONTHNAME(CURRENT_DATE);</span></span><br><span class="line">NOW()              <span class="comment">--è¿”å›å½“å‰çš„æ—¥æœŸå’Œæ—¶é—´</span></span><br><span class="line">QUARTER(date)      <span class="comment">--è¿”å›dateåœ¨ä¸€å¹´ä¸­çš„å­£åº¦(1~4)</span></span><br><span class="line"><span class="comment">-- ä¾‹å¦‚</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">QUARTER</span>(<span class="keyword">CURRENT_DATE</span>);</span><br><span class="line"></span><br><span class="line">WEEK(date)         <span class="comment">--è¿”å›æ—¥æœŸdateä¸ºä¸€å¹´ä¸­ç¬¬å‡ å‘¨(0~53)</span></span><br><span class="line">YEAR(date)         <span class="comment">--è¿”å›æ—¥æœŸdateçš„å¹´ä»½(1000~9999)</span></span><br><span class="line"><span class="comment">-- ä¾‹å¦‚ï¼Œè·å–å½“å‰ç³»ç»Ÿæ—¶é—´</span></span><br><span class="line"><span class="keyword">SELECT</span> FROM_UNIXTIME(<span class="keyword">UNIX_TIMESTAMP</span>());</span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">EXTRACT</span>(YEAR_MONTH <span class="keyword">FROM</span> <span class="keyword">CURRENT_DATE</span>);</span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">EXTRACT</span>(DAY_SECOND <span class="keyword">FROM</span> <span class="keyword">CURRENT_DATE</span>);</span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">EXTRACT</span>(HOUR_MINUTE <span class="keyword">FROM</span> <span class="keyword">CURRENT_DATE</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- è¿”å›ä¸¤ä¸ªæ—¥æœŸå€¼ä¹‹é—´çš„å·®å€¼(æœˆæ•°)</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">PERIOD_DIFF</span>(<span class="number">200302</span>,<span class="number">199802</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- åœ¨Mysqlä¸­è®¡ç®—å¹´é¾„ï¼š</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">DATE_FORMAT</span>(<span class="keyword">FROM_DAYS</span>(<span class="keyword">TO_DAYS</span>(<span class="keyword">NOW</span>())-<span class="keyword">TO_DAYS</span>(birthday)),<span class="string">'%Y'</span>)+<span class="number">0</span> <span class="keyword">AS</span> age <span class="keyword">FROM</span> employee;</span><br><span class="line"><span class="comment">-- è¿™æ ·ï¼Œå¦‚æœBrithdayæ˜¯æœªæ¥çš„å¹´æœˆæ—¥çš„è¯ï¼Œè®¡ç®—ç»“æœä¸º0ã€‚</span></span><br><span class="line"><span class="comment">-- ä¸‹é¢çš„SQLè¯­å¥è®¡ç®—å‘˜å·¥çš„ç»å¯¹å¹´é¾„ï¼Œå³å½“Birthdayæ˜¯æœªæ¥çš„æ—¥æœŸæ—¶ï¼Œå°†å¾—åˆ°è´Ÿå€¼ã€‚</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">DATE_FORMAT</span>(<span class="keyword">NOW</span>(), <span class="string">'%Y'</span>) </span><br><span class="line">- <span class="keyword">DATE_FORMAT</span>(birthday, <span class="string">'%Y'</span>) </span><br><span class="line">-(<span class="keyword">DATE_FORMAT</span>(<span class="keyword">NOW</span>(), <span class="string">'00-%m-%d'</span>) </span><br><span class="line">&lt; <span class="keyword">DATE_FORMAT</span>(birthday, <span class="string">'00-%m-%d'</span>)) <span class="keyword">AS</span> age <span class="keyword">from</span> employee</span><br></pre></td></tr></table></figure><h3 id="åŠ å¯†å‡½æ•°"><a href="#åŠ å¯†å‡½æ•°" class="headerlink" title="åŠ å¯†å‡½æ•°"></a>åŠ å¯†å‡½æ•°</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">AES_ENCRYPT(str,key)  </span><br><span class="line"><span class="comment">--è¿”å›ç”¨å¯†é’¥keyå¯¹å­—ç¬¦ä¸²stråˆ©ç”¨é«˜çº§åŠ å¯†æ ‡å‡†ç®—æ³•åŠ å¯†åçš„ç»“æœï¼Œè°ƒç”¨AES_ENCRYPTçš„ç»“æœæ˜¯ä¸€ä¸ªäºŒè¿›åˆ¶å­—ç¬¦ä¸²ï¼Œä»¥BLOBç±»å‹å­˜å‚¨</span></span><br><span class="line">AES_DECRYPT(str,key)  </span><br><span class="line">                   <span class="comment">--è¿”å›ç”¨å¯†é’¥keyå¯¹å­—ç¬¦ä¸²stråˆ©ç”¨é«˜çº§åŠ å¯†æ ‡å‡†ç®—æ³•è§£å¯†åçš„ç»“æœ</span></span><br><span class="line">DECODE(str,key)    <span class="comment">--ä½¿ç”¨keyä½œä¸ºå¯†é’¥è§£å¯†åŠ å¯†å­—ç¬¦ä¸²str</span></span><br><span class="line">ENCRYPT(str,salt)  <span class="comment">--ä½¿ç”¨UNIXcrypt()å‡½æ•°ï¼Œç”¨å…³é”®è¯salt(ä¸€ä¸ªå¯ä»¥æƒŸä¸€ç¡®å®šå£ä»¤çš„å­—ç¬¦ä¸²ï¼Œå°±åƒé’¥åŒ™ä¸€æ ·)åŠ å¯†å­—ç¬¦ä¸²str</span></span><br><span class="line">ENCODE(str,key)    <span class="comment">--ä½¿ç”¨keyä½œä¸ºå¯†é’¥åŠ å¯†å­—ç¬¦ä¸²strï¼Œè°ƒç”¨ENCODE()çš„ç»“æœæ˜¯ä¸€ä¸ªäºŒè¿›åˆ¶å­—ç¬¦ä¸²ï¼Œå®ƒä»¥BLOBç±»å‹å­˜å‚¨</span></span><br><span class="line">MD5()              <span class="comment">--è®¡ç®—å­—ç¬¦ä¸²strçš„MD5æ ¡éªŒå’Œ</span></span><br><span class="line">PASSWORD(str)      <span class="comment">--è¿”å›å­—ç¬¦ä¸²strçš„åŠ å¯†ç‰ˆæœ¬ï¼Œè¿™ä¸ªåŠ å¯†è¿‡ç¨‹æ˜¯ä¸å¯é€†è½¬çš„ï¼Œå’ŒUNIXå¯†ç åŠ å¯†è¿‡ç¨‹ä½¿ç”¨ä¸åŒçš„ç®—æ³•ã€‚</span></span><br><span class="line">SHA()              <span class="comment">--è®¡ç®—å­—ç¬¦ä¸²strçš„å®‰å…¨æ•£åˆ—ç®—æ³•(SHA)æ ¡éªŒå’Œ</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- ä¾‹å¦‚</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">ENCRYPT</span>(<span class="string">'root'</span>,<span class="string">'salt'</span>) ;</span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">ENCODE</span>(<span class="string">'xufeng'</span>,<span class="string">'key'</span>) ;</span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">DECODE</span>(<span class="keyword">ENCODE</span>(<span class="string">'xufeng'</span>,<span class="string">'key'</span>),<span class="string">'key'</span>) ;<span class="comment">--åŠ è§£å¯†æ”¾åœ¨ä¸€èµ·</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">AES_ENCRYPT</span>(<span class="string">'root'</span>,<span class="string">'key'</span>) ;</span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">AES_DECRYPT</span>(<span class="keyword">AES_ENCRYPT</span>(<span class="string">'root'</span>,<span class="string">'key'</span>),<span class="string">'key'</span>) ;</span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">MD5</span>(<span class="string">'123456'</span>) ;</span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">SHA</span>(<span class="string">'123456'</span>) ;</span><br></pre></td></tr></table></figure><h3 id="æ§åˆ¶æµå‡½æ•°"><a href="#æ§åˆ¶æµå‡½æ•°" class="headerlink" title="æ§åˆ¶æµå‡½æ•°"></a>æ§åˆ¶æµå‡½æ•°</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br></pre></td><td class="code"><pre><span class="line">CASE WHEN [test1] THEN [result1]...ELSE [default] <span class="keyword">END</span> </span><br><span class="line">                    <span class="comment">--å¦‚æœtest1æ˜¯çœŸï¼Œåˆ™è¿”å›result1ï¼Œå¦åˆ™è¿”å›default</span></span><br><span class="line"><span class="keyword">CASE</span> [<span class="keyword">test</span>] <span class="keyword">WHEN</span> [val1] <span class="keyword">THEN</span> [<span class="keyword">result</span>]...ELSE [<span class="keyword">default</span>] <span class="keyword">END</span>  </span><br><span class="line">                    <span class="comment">--å¦‚æœtestå’ŒvalNç›¸ç­‰ï¼Œåˆ™è¿”å›resultï¼Œå¦åˆ™è¿”å›default</span></span><br><span class="line"><span class="keyword">IF</span>(<span class="keyword">test</span>,t,f)        <span class="comment">--å¦‚æœtestæ˜¯çœŸï¼Œè¿”å›tï¼›å¦åˆ™è¿”å›f</span></span><br><span class="line"><span class="keyword">IFNULL</span>(arg1,arg2)   <span class="comment">--å¦‚æœarg1ä¸æ˜¯ç©ºï¼Œè¿”å›arg1ï¼Œå¦åˆ™è¿”å›arg2</span></span><br><span class="line"><span class="keyword">NULLIF</span>(arg1,arg2)   <span class="comment">--å¦‚æœarg1=arg2è¿”å›NULLï¼›å¦åˆ™è¿”å›arg1</span></span><br><span class="line"><span class="comment">-- è¿™äº›å‡½æ•°çš„ç¬¬ä¸€ä¸ªæ˜¯IFNULL()ï¼Œå®ƒæœ‰ä¸¤ä¸ªå‚æ•°ï¼Œå¹¶ä¸”å¯¹ç¬¬ä¸€ä¸ªå‚æ•°è¿›è¡Œåˆ¤æ–­ã€‚</span></span><br><span class="line"><span class="comment">-- å¦‚æœç¬¬ä¸€ä¸ªå‚æ•°ä¸æ˜¯NULLï¼Œå‡½æ•°å°±ä¼šå‘è°ƒç”¨è€…è¿”å›ç¬¬ä¸€ä¸ªå‚æ•°ï¼›</span></span><br><span class="line"><span class="comment">-- å¦‚æœæ˜¯NULL,å°†è¿”å›ç¬¬äºŒä¸ªå‚æ•°ã€‚</span></span><br><span class="line"><span class="comment">-- ä¾‹å¦‚</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">IFNULL</span>(<span class="number">1</span>,<span class="number">2</span>), </span><br><span class="line"><span class="keyword">IFNULL</span>(<span class="literal">NULL</span>,<span class="number">10</span>),</span><br><span class="line"><span class="keyword">IFNULL</span>(<span class="number">4</span>*<span class="literal">NULL</span>,<span class="string">'false'</span>);</span><br><span class="line"></span><br><span class="line">NULLIF() <span class="comment">-- å‡½æ•°å°†ä¼šæ£€éªŒæä¾›çš„ä¸¤ä¸ªå‚æ•°æ˜¯å¦ç›¸ç­‰ï¼Œå¦‚æœç›¸ç­‰ï¼Œåˆ™è¿”å›NULLï¼Œ</span></span><br><span class="line"><span class="comment">-- å¦‚æœä¸ç›¸ç­‰ï¼Œå°±è¿”å›ç¬¬ä¸€ä¸ªå‚æ•°ã€‚</span></span><br><span class="line"><span class="comment">-- ä¾‹å¦‚</span></span><br><span class="line"><span class="keyword">SELECT</span>  <span class="keyword">NULLIF</span>(<span class="number">1</span>,<span class="number">1</span>),</span><br><span class="line"> <span class="keyword">NULLIF</span>(<span class="string">'A'</span>,<span class="string">'B'</span>),</span><br><span class="line"> <span class="keyword">NULLIF</span>(<span class="number">2</span>+<span class="number">3</span>,<span class="number">4</span>+<span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">MySQLçš„IF()</span><br><span class="line"><span class="comment">-- å‡½æ•°ä¹Ÿå¯ä»¥å»ºç«‹ä¸€ä¸ªç®€å•çš„æ¡ä»¶æµ‹è¯•ï¼Œ</span></span><br><span class="line"><span class="comment">-- è¿™ä¸ªå‡½æ•°æœ‰ä¸‰ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªæ˜¯è¦è¢«åˆ¤æ–­çš„è¡¨è¾¾å¼ï¼Œ</span></span><br><span class="line"><span class="comment">-- å¦‚æœè¡¨è¾¾å¼ä¸ºçœŸï¼ŒIF()å°†ä¼šè¿”å›ç¬¬äºŒä¸ªå‚æ•°ï¼Œ</span></span><br><span class="line"><span class="comment">-- å¦‚æœä¸ºå‡ï¼ŒIF()å°†ä¼šè¿”å›ç¬¬ä¸‰ä¸ªå‚æ•°ã€‚</span></span><br><span class="line"><span class="comment">-- ä¾‹å¦‚</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">IF</span>(<span class="number">1</span>&lt;<span class="number">10</span>,<span class="number">2</span>,<span class="number">3</span>),<span class="keyword">IF</span>(<span class="number">56</span>&gt;<span class="number">100</span>,<span class="string">'true'</span>,<span class="string">'false'</span>);</span><br><span class="line"><span class="comment">-- IF()å‡½æ•°åœ¨åªæœ‰ä¸¤ç§å¯èƒ½ç»“æœæ—¶æ‰é€‚åˆä½¿ç”¨ã€‚</span></span><br><span class="line"><span class="comment">-- ç„¶è€Œï¼Œåœ¨ç°å®ä¸–ç•Œä¸­ï¼Œæˆ‘ä»¬å¯èƒ½å‘ç°åœ¨æ¡ä»¶æµ‹è¯•ä¸­ä¼šéœ€è¦å¤šä¸ªåˆ†æ”¯ã€‚</span></span><br><span class="line"><span class="comment">-- åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå®ƒå’ŒPHPåŠPerlè¯­è¨€çš„switch-caseæ¡ä»¶ä¾‹ç¨‹ä¸€æ ·ã€‚</span></span><br><span class="line"></span><br><span class="line">CASE</span><br><span class="line"><span class="comment">-- å‡½æ•°çš„æ ¼å¼æœ‰äº›å¤æ‚ï¼Œé€šå¸¸å¦‚ä¸‹æ‰€ç¤ºï¼š</span></span><br><span class="line">CASE [expression to be evaluated]</span><br><span class="line">WHEN [val 1] THEN [result 1]</span><br><span class="line">WHEN [val 2] THEN [result 2]</span><br><span class="line">WHEN [val 3] THEN [result 3]</span><br><span class="line">......</span><br><span class="line">WHEN [val n] THEN [result n]</span><br><span class="line">ELSE [default result]</span><br><span class="line"><span class="keyword">END</span></span><br><span class="line"><span class="comment">-- è¿™é‡Œï¼Œç¬¬ä¸€ä¸ªå‚æ•°æ˜¯è¦è¢«åˆ¤æ–­çš„å€¼æˆ–è¡¨è¾¾å¼ï¼Œæ¥ä¸‹æ¥çš„æ˜¯ä¸€ç³»åˆ—çš„WHEN-THENå—ï¼Œ</span></span><br><span class="line"><span class="comment">-- æ¯ä¸€å—çš„ç¬¬ä¸€ä¸ªå‚æ•°æŒ‡å®šè¦æ¯”è¾ƒçš„å€¼ï¼Œå¦‚æœä¸ºçœŸï¼Œå°±è¿”å›ç»“æœã€‚</span></span><br><span class="line"><span class="comment">-- æ‰€æœ‰çš„WHEN-THENå—å°†ä»¥ELSEå—ç»“æŸï¼Œå½“ENDç»“æŸäº†æ‰€æœ‰å¤–éƒ¨çš„CASEå—æ—¶ï¼Œ</span></span><br><span class="line"><span class="comment">-- å¦‚æœå‰é¢çš„æ¯ä¸€ä¸ªå—éƒ½ä¸åŒ¹é…å°±ä¼šè¿”å›ELSEå—æŒ‡å®šçš„é»˜è®¤ç»“æœã€‚</span></span><br><span class="line"><span class="comment">-- å¦‚æœæ²¡æœ‰æŒ‡å®šELSEå—ï¼Œè€Œä¸”æ‰€æœ‰çš„WHEN-THENæ¯”è¾ƒéƒ½ä¸æ˜¯çœŸï¼ŒMySQLå°†ä¼šè¿”å›NULLã€‚</span></span><br><span class="line"><span class="keyword">CASE</span>å‡½æ•°è¿˜æœ‰å¦å¤–ä¸€ç§å¥æ³•ï¼Œæœ‰æ—¶ä½¿ç”¨èµ·æ¥éå¸¸æ–¹ä¾¿ï¼Œå¦‚ä¸‹ï¼š</span><br><span class="line"><span class="keyword">CASE</span></span><br><span class="line"><span class="keyword">WHEN</span> [conditional <span class="keyword">test</span> <span class="number">1</span>] <span class="keyword">THEN</span> [<span class="keyword">result</span> <span class="number">1</span>]</span><br><span class="line"><span class="keyword">WHEN</span> [conditional <span class="keyword">test</span> <span class="number">2</span>] <span class="keyword">THEN</span> [<span class="keyword">result</span> <span class="number">2</span>]</span><br><span class="line"><span class="keyword">ELSE</span> [<span class="keyword">default</span> <span class="keyword">result</span>]</span><br><span class="line"><span class="keyword">END</span></span><br><span class="line"><span class="comment">-- è¿™ç§æ¡ä»¶ä¸‹ï¼Œè¿”å›çš„ç»“æœå–å†³äºç›¸åº”çš„æ¡ä»¶æµ‹è¯•æ˜¯å¦ä¸ºçœŸã€‚</span></span><br><span class="line">ä¾‹å¦‚ï¼š</span><br><span class="line"><span class="keyword">SELECT</span>  <span class="keyword">CASE</span> <span class="string">'green'</span></span><br><span class="line">      <span class="keyword">WHEN</span> <span class="string">'red'</span> <span class="keyword">THEN</span> <span class="string">'stop'</span></span><br><span class="line">      <span class="keyword">WHEN</span> <span class="string">'green'</span> <span class="keyword">THEN</span> <span class="string">'go'</span> <span class="keyword">END</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">CASE</span>  <span class="number">9</span> </span><br><span class="line"><span class="keyword">WHEN</span> <span class="number">1</span> <span class="keyword">THEN</span> <span class="string">'a'</span></span><br><span class="line"><span class="keyword">WHEN</span> <span class="number">2</span> <span class="keyword">THEN</span> <span class="string">'b'</span> <span class="keyword">ELSE</span> <span class="string">'N/A'</span> <span class="keyword">END</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">CASE</span> <span class="keyword">WHEN</span> (<span class="number">2</span>+<span class="number">2</span>)=<span class="number">4</span> <span class="keyword">THEN</span> <span class="string">'OK'</span> </span><br><span class="line"><span class="keyword">WHEN</span> (<span class="number">2</span>+<span class="number">2</span>)&lt;&gt;<span class="number">4</span> <span class="keyword">THEN</span> <span class="string">'not OK'</span> <span class="keyword">END</span> <span class="keyword">AS</span> <span class="keyword">STATUS</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">Name</span>,<span class="keyword">IF</span>((IsActive = <span class="number">1</span>),<span class="string">'å·²æ¿€æ´»'</span>,<span class="string">'æœªæ¿€æ´»'</span>) <span class="keyword">AS</span> <span class="keyword">RESULT</span> </span><br><span class="line"><span class="keyword">FROM</span> UserLoginInfo;</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> fname,lname,(math+sci+lit) <span class="keyword">AS</span> total,</span><br><span class="line"><span class="keyword">CASE</span> <span class="keyword">WHEN</span> (math+sci+lit) &lt; <span class="number">50</span> <span class="keyword">THEN</span> <span class="string">'D'</span></span><br><span class="line">     <span class="keyword">WHEN</span> (math+sci+lit) <span class="keyword">BETWEEN</span> <span class="number">50</span> <span class="keyword">AND</span> <span class="number">150</span> <span class="keyword">THEN</span> <span class="string">'C'</span></span><br><span class="line">     <span class="keyword">WHEN</span> (math+sci+lit) <span class="keyword">BETWEEN</span> <span class="number">151</span> <span class="keyword">AND</span> <span class="number">250</span> <span class="keyword">THEN</span> <span class="string">'B'</span></span><br><span class="line"><span class="keyword">ELSE</span> <span class="string">'A'</span> <span class="keyword">END</span> <span class="keyword">AS</span> grade <span class="keyword">FROM</span> marks ;</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">IF</span>(<span class="keyword">ENCRYPT</span>(<span class="string">'sue'</span>,<span class="string">'ts'</span>)=upass,<span class="string">'allow'</span>,<span class="string">'deny'</span>) <span class="keyword">AS</span> LoginResult</span><br><span class="line"><span class="keyword">FROM</span> <span class="keyword">users</span> <span class="keyword">WHERE</span> uname = <span class="string">'sue'</span>;</span><br></pre></td></tr></table></figure><h3 id="æ ¼å¼åŒ–å‡½æ•°"><a href="#æ ¼å¼åŒ–å‡½æ•°" class="headerlink" title="æ ¼å¼åŒ–å‡½æ•°"></a>æ ¼å¼åŒ–å‡½æ•°</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">DATE_FORMAT(date,fmt)  </span><br><span class="line">                  <span class="comment">--ä¾ç…§å­—ç¬¦ä¸²fmtæ ¼å¼åŒ–æ—¥æœŸdateå€¼</span></span><br><span class="line">FORMAT(x,y)       <span class="comment">--æŠŠxæ ¼å¼åŒ–ä¸ºä»¥é€—å·éš”å¼€çš„æ•°å­—åºåˆ—ï¼Œyæ˜¯ç»“æœçš„å°æ•°ä½æ•°</span></span><br><span class="line">INET_ATON(ip)     <span class="comment">--è¿”å›IPåœ°å€çš„æ•°å­—è¡¨ç¤º</span></span><br><span class="line">INET_NTOA(num)    <span class="comment">--è¿”å›æ•°å­—æ‰€ä»£è¡¨çš„IPåœ°å€</span></span><br><span class="line">TIME_FORMAT(time,fmt)   </span><br><span class="line">                  <span class="comment">--ä¾ç…§å­—ç¬¦ä¸²fmtæ ¼å¼åŒ–æ—¶é—´timeå€¼</span></span><br><span class="line"><span class="comment">-- å…¶ä¸­æœ€ç®€å•çš„æ˜¯FORMAT()å‡½æ•°ï¼Œ</span></span><br><span class="line"><span class="comment">-- å®ƒå¯ä»¥æŠŠå¤§çš„æ•°å€¼æ ¼å¼åŒ–ä¸ºä»¥é€—å·é—´éš”çš„æ˜“è¯»çš„åºåˆ—ã€‚</span></span><br><span class="line"><span class="comment">-- ä¾‹å¦‚</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">FORMAT</span>(<span class="number">34234.34323432</span>,<span class="number">3</span>) ;</span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">DATE_FORMAT</span>(<span class="keyword">NOW</span>(),<span class="string">'%W,%D %M %Y %r'</span>) ;</span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">DATE_FORMAT</span>(<span class="keyword">NOW</span>(),<span class="string">'%Y-%m-%d'</span>) ;</span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">DATE_FORMAT</span>(<span class="number">19990330</span>,<span class="string">'%Y-%m-%d'</span>) ;</span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">DATE_FORMAT</span>(<span class="keyword">NOW</span>(),<span class="string">'%h:%i %p'</span>) ;</span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">INET_ATON</span>(<span class="string">'10.122.89.47'</span>) ;</span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">INET_NTOA</span>(<span class="number">175790383</span>) ;</span><br></pre></td></tr></table></figure><h3 id="ç±»å‹è½¬åŒ–å‡½æ•°"><a href="#ç±»å‹è½¬åŒ–å‡½æ•°" class="headerlink" title="ç±»å‹è½¬åŒ–å‡½æ•°"></a>ç±»å‹è½¬åŒ–å‡½æ•°</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- ä¸ºäº†è¿›è¡Œæ•°æ®ç±»å‹è½¬åŒ–ï¼ŒMySQLæä¾›äº†CAST()å‡½æ•°ï¼Œ</span></span><br><span class="line"><span class="comment">-- å®ƒå¯ä»¥æŠŠä¸€ä¸ªå€¼è½¬åŒ–ä¸ºæŒ‡å®šçš„æ•°æ®ç±»å‹ã€‚</span></span><br><span class="line"><span class="comment">-- ç±»å‹æœ‰ï¼š</span></span><br><span class="line">BINARY,CHAR,DATE,TIME,DATETIME,SIGNED,UNSIGNED</span><br><span class="line"><span class="comment">-- ä¾‹å¦‚</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">CAST</span>(<span class="keyword">NOW</span>() <span class="keyword">AS</span> SIGNED <span class="built_in">INTEGER</span>),<span class="keyword">CURDATE</span>()+<span class="number">0</span>;</span><br><span class="line"><span class="keyword">SELECT</span> <span class="string">'f'</span>=<span class="built_in">BINARY</span> <span class="string">'F'</span>,<span class="string">'f'</span>=<span class="keyword">CAST</span>(<span class="string">'F'</span> <span class="keyword">AS</span> <span class="built_in">BINARY</span>);</span><br></pre></td></tr></table></figure><h3 id="ç³»ç»Ÿä¿¡æ¯å‡½æ•°"><a href="#ç³»ç»Ÿä¿¡æ¯å‡½æ•°" class="headerlink" title="ç³»ç»Ÿä¿¡æ¯å‡½æ•°"></a>ç³»ç»Ÿä¿¡æ¯å‡½æ•°</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">DATABASE()         <span class="comment">--è¿”å›å½“å‰æ•°æ®åº“å</span></span><br><span class="line">BENCHMARK(count,expr)   </span><br><span class="line">                   <span class="comment">--å°†è¡¨è¾¾å¼expré‡å¤è¿è¡Œcountæ¬¡</span></span><br><span class="line">CONNECTION_ID()    <span class="comment">--è¿”å›å½“å‰å®¢æˆ·çš„è¿æ¥ID</span></span><br><span class="line">FOUND_ROWS()       <span class="comment">--è¿”å›æœ€åä¸€ä¸ªSELECTæŸ¥è¯¢è¿›è¡Œæ£€ç´¢çš„æ€»è¡Œæ•°</span></span><br><span class="line">USER()æˆ–SYSTEM_USER()  </span><br><span class="line">                   <span class="comment">--è¿”å›å½“å‰ç™»é™†ç”¨æˆ·å</span></span><br><span class="line">VERSION()          <span class="comment">--è¿”å›MySQLæœåŠ¡å™¨çš„ç‰ˆæœ¬</span></span><br><span class="line"><span class="comment">-- ä¾‹å¦‚</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">DATABASE</span>(),<span class="keyword">VERSION</span>(),<span class="keyword">USER</span>();</span><br><span class="line">SELECTBENCHMARK(9999999,LOG(RAND()*PI()));</span><br><span class="line"><span class="comment">--è¯¥ä¾‹ä¸­,MySQLè®¡ç®—LOG(RAND()*PI())è¡¨è¾¾å¼9999999æ¬¡ã€‚</span></span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;SQL-å¸¸è§ç”¨æ³•&quot;&gt;&lt;a href=&quot;#SQL-å¸¸è§ç”¨æ³•&quot; class=&quot;headerlink&quot; title=&quot;SQL å¸¸è§ç”¨æ³•&quot;&gt;&lt;/a&gt;SQL å¸¸è§ç”¨æ³•&lt;/h2&gt;&lt;h3 id=&quot;1-æŸ¥æ‰¾æ•°æ®çš„æŸ¥è¯¢&quot;&gt;&lt;a href=&quot;#1-æŸ¥æ‰¾æ•°æ®çš„æŸ¥è¯¢&quot; class=&quot;headerlink&quot; title=&quot;1. æŸ¥æ‰¾æ•°æ®çš„æŸ¥è¯¢&quot;&gt;&lt;/a&gt;1. æŸ¥æ‰¾æ•°æ®çš„æŸ¥è¯¢&lt;/h3&gt;&lt;h4 id=&quot;SELECT-ç”¨äºä»æ•°æ®åº“ä¸­é€‰æ‹©æ•°æ®&quot;&gt;&lt;a href=&quot;#SELECT-ç”¨äºä»æ•°æ®åº“ä¸­é€‰æ‹©æ•°æ®&quot; class=&quot;headerlink&quot; title=&quot;SELECT: ç”¨äºä»æ•°æ®åº“ä¸­é€‰æ‹©æ•°æ®&quot;&gt;&lt;/a&gt;&lt;strong&gt;SELECT&lt;/strong&gt;: ç”¨äºä»æ•°æ®åº“ä¸­é€‰æ‹©æ•°æ®&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;&lt;code&gt;SELECT&lt;/code&gt; * &lt;code&gt;FROM&lt;/code&gt; table_name;&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&quot;DISTINCT-ç”¨äºè¿‡æ»¤æ‰é‡å¤çš„å€¼å¹¶è¿”å›æŒ‡å®šåˆ—çš„è¡Œ&quot;&gt;&lt;a href=&quot;#DISTINCT-ç”¨äºè¿‡æ»¤æ‰é‡å¤çš„å€¼å¹¶è¿”å›æŒ‡å®šåˆ—çš„è¡Œ&quot; class=&quot;headerlink&quot; title=&quot;DISTINCT: ç”¨äºè¿‡æ»¤æ‰é‡å¤çš„å€¼å¹¶è¿”å›æŒ‡å®šåˆ—çš„è¡Œ&quot;&gt;&lt;/a&gt;&lt;strong&gt;DISTINCT&lt;/strong&gt;: ç”¨äºè¿‡æ»¤æ‰é‡å¤çš„å€¼å¹¶è¿”å›æŒ‡å®šåˆ—çš„è¡Œ&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;&lt;code&gt;SELECT DISTINCT&lt;/code&gt; column_name;&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&quot;WHERE-ç”¨äºè¿‡æ»¤è®°å½•-è¡Œ&quot;&gt;&lt;a href=&quot;#WHERE-ç”¨äºè¿‡æ»¤è®°å½•-è¡Œ&quot; class=&quot;headerlink&quot; title=&quot;WHERE: ç”¨äºè¿‡æ»¤è®°å½•/è¡Œ&quot;&gt;&lt;/a&gt;&lt;strong&gt;WHERE&lt;/strong&gt;: ç”¨äºè¿‡æ»¤è®°å½•/è¡Œ&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;&lt;code&gt;SELECT&lt;/code&gt; column1, column2 &lt;code&gt;FROM&lt;/code&gt; table_name &lt;code&gt;WHERE&lt;/code&gt; condition;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;SELECT&lt;/code&gt; * &lt;code&gt;FROM&lt;/code&gt; table_name &lt;code&gt;WHERE&lt;/code&gt; condition1 &lt;code&gt;AND&lt;/code&gt; condition2;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;SELECT&lt;/code&gt; * &lt;code&gt;FROM&lt;/code&gt; table_name &lt;code&gt;WHERE&lt;/code&gt; condition1 &lt;code&gt;OR&lt;/code&gt; condition2;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;SELECT&lt;/code&gt; * &lt;code&gt;FROM&lt;/code&gt; table_name &lt;code&gt;WHERE NOT&lt;/code&gt; condition;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;SELECT&lt;/code&gt; * &lt;code&gt;FROM&lt;/code&gt; table_name &lt;code&gt;WHERE&lt;/code&gt; condition1 &lt;code&gt;AND&lt;/code&gt; (condition2 &lt;code&gt;OR&lt;/code&gt; condition3);&lt;/li&gt;
&lt;li&gt;&lt;code&gt;SELECT&lt;/code&gt; * &lt;code&gt;FROM&lt;/code&gt; table_name &lt;code&gt;WHERE EXISTS&lt;/code&gt; (&lt;code&gt;SELECT&lt;/code&gt; column_name &lt;code&gt;FROM&lt;/code&gt; table_name &lt;code&gt;WHERE&lt;/code&gt; condition);&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&quot;ORDER-BY-ç”¨äºç»“æœé›†çš„æ’åºï¼Œå‡åºï¼ˆASCï¼‰æˆ–è€…é™åºï¼ˆDESCï¼‰&quot;&gt;&lt;a href=&quot;#ORDER-BY-ç”¨äºç»“æœé›†çš„æ’åºï¼Œå‡åºï¼ˆASCï¼‰æˆ–è€…é™åºï¼ˆDESCï¼‰&quot; class=&quot;headerlink&quot; title=&quot;ORDER BY: ç”¨äºç»“æœé›†çš„æ’åºï¼Œå‡åºï¼ˆASCï¼‰æˆ–è€…é™åºï¼ˆDESCï¼‰&quot;&gt;&lt;/a&gt;&lt;strong&gt;ORDER BY&lt;/strong&gt;: ç”¨äºç»“æœé›†çš„æ’åºï¼Œå‡åºï¼ˆASCï¼‰æˆ–è€…é™åºï¼ˆDESCï¼‰&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;&lt;code&gt;SELECT&lt;/code&gt; * &lt;code&gt;FROM&lt;/code&gt; table_name &lt;code&gt;ORDER BY&lt;/code&gt; column;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;SELECT&lt;/code&gt; * &lt;code&gt;FROM&lt;/code&gt; table_name &lt;code&gt;ORDER BY&lt;/code&gt; column &lt;code&gt;DESC&lt;/code&gt;;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;SELECT&lt;/code&gt; * &lt;code&gt;FROM&lt;/code&gt; table_name &lt;code&gt;ORDER BY&lt;/code&gt; column1 &lt;code&gt;ASC&lt;/code&gt;, column2 &lt;code&gt;DESC&lt;/code&gt;;&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&quot;SELECT-TOP-ç”¨äºæŒ‡å®šä»è¡¨é¡¶éƒ¨è¿”å›çš„è®°å½•æ•°&quot;&gt;&lt;a href=&quot;#SELECT-TOP-ç”¨äºæŒ‡å®šä»è¡¨é¡¶éƒ¨è¿”å›çš„è®°å½•æ•°&quot; class=&quot;headerlink&quot; title=&quot;SELECT TOP: ç”¨äºæŒ‡å®šä»è¡¨é¡¶éƒ¨è¿”å›çš„è®°å½•æ•°&quot;&gt;&lt;/a&gt;&lt;strong&gt;SELECT TOP&lt;/strong&gt;: ç”¨äºæŒ‡å®šä»è¡¨é¡¶éƒ¨è¿”å›çš„è®°å½•æ•°&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;&lt;code&gt;SELECT TOP&lt;/code&gt; number columns_names &lt;code&gt;FROM&lt;/code&gt; table_name &lt;code&gt;WHERE&lt;/code&gt; condition;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;SELECT TOP&lt;/code&gt; percent columns_names &lt;code&gt;FROM&lt;/code&gt; table_name &lt;code&gt;WHERE&lt;/code&gt; condition;&lt;/li&gt;
&lt;li&gt;å¹¶éæ‰€æœ‰æ•°æ®åº“ç³»ç»Ÿéƒ½æ”¯æŒ&lt;code&gt;SELECT TOP&lt;/code&gt;ã€‚ MySQL ä¸­æ˜¯&lt;code&gt;LIMIT&lt;/code&gt;å­å¥&lt;/li&gt;
&lt;li&gt;&lt;code&gt;SELECT&lt;/code&gt; column_names &lt;code&gt;FROM&lt;/code&gt; table_name &lt;code&gt;LIMIT&lt;/code&gt; offset, count;&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&quot;LIKE-ç”¨äºæœç´¢åˆ—ä¸­çš„ç‰¹å®šæ¨¡å¼ï¼ŒWHERE-å­å¥ä¸­ä½¿ç”¨çš„è¿ç®—ç¬¦&quot;&gt;&lt;a href=&quot;#LIKE-ç”¨äºæœç´¢åˆ—ä¸­çš„ç‰¹å®šæ¨¡å¼ï¼ŒWHERE-å­å¥ä¸­ä½¿ç”¨çš„è¿ç®—ç¬¦&quot; class=&quot;headerlink&quot; title=&quot;LIKE: ç”¨äºæœç´¢åˆ—ä¸­çš„ç‰¹å®šæ¨¡å¼ï¼ŒWHERE å­å¥ä¸­ä½¿ç”¨çš„è¿ç®—ç¬¦&quot;&gt;&lt;/a&gt;&lt;strong&gt;LIKE&lt;/strong&gt;: ç”¨äºæœç´¢åˆ—ä¸­çš„ç‰¹å®šæ¨¡å¼ï¼ŒWHERE å­å¥ä¸­ä½¿ç”¨çš„è¿ç®—ç¬¦&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;% (percent sign) æ˜¯ä¸€ä¸ªè¡¨ç¤ºé›¶ä¸ªï¼Œä¸€ä¸ªæˆ–å¤šä¸ªå­—ç¬¦çš„é€šé…ç¬¦&lt;/li&gt;
&lt;li&gt;_ (underscore) æ˜¯ä¸€ä¸ªè¡¨ç¤ºå•ä¸ªå­—ç¬¦é€šé…ç¬¦&lt;/li&gt;
&lt;li&gt;&lt;code&gt;SELECT&lt;/code&gt; column_names &lt;code&gt;FROM&lt;/code&gt; table_name &lt;code&gt;WHERE&lt;/code&gt; column_name &lt;code&gt;LIKE&lt;/code&gt; pattern;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;LIKE&lt;/code&gt; â€˜a%â€™    ï¼ˆæŸ¥æ‰¾ä»»ä½•ä»¥â€œaâ€å¼€å¤´çš„å€¼ï¼‰&lt;/li&gt;
&lt;li&gt;&lt;code&gt;LIKE&lt;/code&gt; â€˜%aâ€™    ï¼ˆæŸ¥æ‰¾ä»»ä½•ä»¥â€œaâ€ç»“å°¾çš„å€¼ï¼‰&lt;/li&gt;
&lt;li&gt;&lt;code&gt;LIKE&lt;/code&gt; â€˜%or%â€™  ï¼ˆæŸ¥æ‰¾ä»»ä½•åŒ…å«â€œorâ€çš„å€¼ï¼‰&lt;/li&gt;
&lt;li&gt;&lt;code&gt;LIKE&lt;/code&gt; â€˜_r%â€™   ï¼ˆæŸ¥æ‰¾ä»»ä½•ç¬¬äºŒä½æ˜¯â€œrâ€çš„å€¼ï¼‰&lt;/li&gt;
&lt;li&gt;&lt;code&gt;LIKE&lt;/code&gt; â€˜a_%_%â€™ ï¼ˆæŸ¥æ‰¾ä»»ä½•ä»¥â€œaâ€å¼€å¤´ä¸”é•¿åº¦è‡³å°‘ä¸º3çš„å€¼ï¼‰&lt;/li&gt;
&lt;li&gt;&lt;code&gt;LIKE&lt;/code&gt; â€˜[a-c]%â€™ï¼ˆæŸ¥æ‰¾ä»»ä½•ä»¥â€œaâ€æˆ–â€œbâ€æˆ–â€œcâ€å¼€å¤´çš„å€¼ï¼‰&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&quot;IN-ç”¨äºåœ¨-WHERE-å­å¥ä¸­æŒ‡å®šå¤šä¸ªå€¼çš„è¿ç®—ç¬¦&quot;&gt;&lt;a href=&quot;#IN-ç”¨äºåœ¨-WHERE-å­å¥ä¸­æŒ‡å®šå¤šä¸ªå€¼çš„è¿ç®—ç¬¦&quot; class=&quot;headerlink&quot; title=&quot;IN: ç”¨äºåœ¨ WHERE å­å¥ä¸­æŒ‡å®šå¤šä¸ªå€¼çš„è¿ç®—ç¬¦&quot;&gt;&lt;/a&gt;&lt;strong&gt;IN&lt;/strong&gt;: ç”¨äºåœ¨ WHERE å­å¥ä¸­æŒ‡å®šå¤šä¸ªå€¼çš„è¿ç®—ç¬¦&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;æœ¬è´¨ä¸Šï¼ŒINè¿ç®—ç¬¦æ˜¯å¤šä¸ªORæ¡ä»¶çš„ç®€å†™&lt;/li&gt;
&lt;li&gt;&lt;code&gt;SELECT&lt;/code&gt; column_names &lt;code&gt;FROM&lt;/code&gt; table_name &lt;code&gt;WHERE&lt;/code&gt; column_name &lt;code&gt;IN&lt;/code&gt; (value1, value2, â€¦);&lt;/li&gt;
&lt;li&gt;&lt;code&gt;SELECT&lt;/code&gt; column_names &lt;code&gt;FROM&lt;/code&gt; table_name &lt;code&gt;WHERE&lt;/code&gt; column_name &lt;code&gt;IN&lt;/code&gt; (&lt;code&gt;SELECT STATEMENT&lt;/code&gt;);&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&quot;BETWEEN-ç”¨äºè¿‡æ»¤ç»™å®šèŒƒå›´çš„å€¼çš„è¿ç®—ç¬¦&quot;&gt;&lt;a href=&quot;#BETWEEN-ç”¨äºè¿‡æ»¤ç»™å®šèŒƒå›´çš„å€¼çš„è¿ç®—ç¬¦&quot; class=&quot;headerlink&quot; title=&quot;BETWEEN: ç”¨äºè¿‡æ»¤ç»™å®šèŒƒå›´çš„å€¼çš„è¿ç®—ç¬¦&quot;&gt;&lt;/a&gt;&lt;strong&gt;BETWEEN&lt;/strong&gt;: ç”¨äºè¿‡æ»¤ç»™å®šèŒƒå›´çš„å€¼çš„è¿ç®—ç¬¦&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;&lt;code&gt;SELECT&lt;/code&gt; column_names &lt;code&gt;FROM&lt;/code&gt; table_name &lt;code&gt;WHERE&lt;/code&gt; column_name &lt;code&gt;BETWEEN&lt;/code&gt; value1 &lt;code&gt;AND&lt;/code&gt; value2;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;SELECT&lt;/code&gt; * &lt;code&gt;FROM&lt;/code&gt; Products &lt;code&gt;WHERE&lt;/code&gt; (column_name &lt;code&gt;BETWEEN&lt;/code&gt; value1 &lt;code&gt;AND&lt;/code&gt; value2) &lt;code&gt;AND NOT&lt;/code&gt; column_name2 &lt;code&gt;IN&lt;/code&gt; (value3, value4);&lt;/li&gt;
&lt;li&gt;&lt;code&gt;SELECT&lt;/code&gt; * &lt;code&gt;FROM&lt;/code&gt; Products &lt;code&gt;WHERE&lt;/code&gt; column_name &lt;code&gt;BETWEEN&lt;/code&gt; #01/07/1999# AND #03/12/1999#;&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&quot;NULL-ä»£è¡¨ä¸€ä¸ªå­—æ®µæ²¡æœ‰å€¼&quot;&gt;&lt;a href=&quot;#NULL-ä»£è¡¨ä¸€ä¸ªå­—æ®µæ²¡æœ‰å€¼&quot; class=&quot;headerlink&quot; title=&quot;NULL: ä»£è¡¨ä¸€ä¸ªå­—æ®µæ²¡æœ‰å€¼&quot;&gt;&lt;/a&gt;&lt;strong&gt;NULL&lt;/strong&gt;: ä»£è¡¨ä¸€ä¸ªå­—æ®µæ²¡æœ‰å€¼&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;&lt;code&gt;SELECT&lt;/code&gt; * &lt;code&gt;FROM&lt;/code&gt; table_name &lt;code&gt;WHERE&lt;/code&gt; column_name &lt;code&gt;IS NULL&lt;/code&gt;;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;SELECT&lt;/code&gt; * &lt;code&gt;FROM&lt;/code&gt; table_name &lt;code&gt;WHERE&lt;/code&gt; column_name &lt;code&gt;IS NOT NULL&lt;/code&gt;;&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&quot;AS-ç”¨äºç»™è¡¨æˆ–è€…åˆ—åˆ†é…åˆ«å&quot;&gt;&lt;a href=&quot;#AS-ç”¨äºç»™è¡¨æˆ–è€…åˆ—åˆ†é…åˆ«å&quot; class=&quot;headerlink&quot; title=&quot;AS: ç”¨äºç»™è¡¨æˆ–è€…åˆ—åˆ†é…åˆ«å&quot;&gt;&lt;/a&gt;&lt;strong&gt;AS&lt;/strong&gt;: ç”¨äºç»™è¡¨æˆ–è€…åˆ—åˆ†é…åˆ«å&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;&lt;code&gt;SELECT&lt;/code&gt; column_name &lt;code&gt;AS&lt;/code&gt; alias_name &lt;code&gt;FROM&lt;/code&gt; table_name;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;SELECT&lt;/code&gt; column_name &lt;code&gt;FROM&lt;/code&gt; table_name &lt;code&gt;AS&lt;/code&gt; alias_name;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;SELECT&lt;/code&gt; column_name &lt;code&gt;AS&lt;/code&gt; alias_name1, column_name2 &lt;code&gt;AS&lt;/code&gt; alias_name2;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;SELECT&lt;/code&gt; column_name1, column_name2 + â€˜, â€˜ + column_name3 &lt;code&gt;AS&lt;/code&gt; alias_name;&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&quot;UNION-ç”¨äºç»„åˆä¸¤ä¸ªæˆ–è€…å¤šä¸ª-SELECT-è¯­å¥çš„ç»“æœé›†çš„è¿ç®—ç¬¦&quot;&gt;&lt;a href=&quot;#UNION-ç”¨äºç»„åˆä¸¤ä¸ªæˆ–è€…å¤šä¸ª-SELECT-è¯­å¥çš„ç»“æœé›†çš„è¿ç®—ç¬¦&quot; class=&quot;headerlink&quot; title=&quot;UNION: ç”¨äºç»„åˆä¸¤ä¸ªæˆ–è€…å¤šä¸ª SELECT è¯­å¥çš„ç»“æœé›†çš„è¿ç®—ç¬¦&quot;&gt;&lt;/a&gt;&lt;strong&gt;UNION&lt;/strong&gt;: ç”¨äºç»„åˆä¸¤ä¸ªæˆ–è€…å¤šä¸ª SELECT è¯­å¥çš„ç»“æœé›†çš„è¿ç®—ç¬¦&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;æ¯ä¸ª SELECT è¯­å¥å¿…é¡»æ‹¥æœ‰ç›¸åŒçš„åˆ—æ•°&lt;/li&gt;
&lt;li&gt;åˆ—å¿…é¡»æ‹¥æœ‰ç›¸ä¼¼çš„æ•°æ®ç±»å‹&lt;/li&gt;
&lt;li&gt;æ¯ä¸ª SELECT è¯­å¥ä¸­çš„åˆ—ä¹Ÿå¿…é¡»å…·æœ‰ç›¸åŒçš„é¡ºåº&lt;/li&gt;
&lt;li&gt;&lt;code&gt;SELECT&lt;/code&gt; columns_names &lt;code&gt;FROM&lt;/code&gt; table1 &lt;code&gt;UNION SELECT&lt;/code&gt; column_name &lt;code&gt;FROM&lt;/code&gt; table2;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;UNION&lt;/code&gt; ä»…å…è®¸é€‰æ‹©ä¸åŒçš„å€¼, &lt;code&gt;UNION ALL&lt;/code&gt; å…è®¸é‡å¤&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&quot;ANY-ALL-ç”¨äºæ£€æŸ¥-WHERE-æˆ–-HAVING-å­å¥ä¸­ä½¿ç”¨çš„å­æŸ¥è¯¢æ¡ä»¶çš„è¿ç®—ç¬¦&quot;&gt;&lt;a href=&quot;#ANY-ALL-ç”¨äºæ£€æŸ¥-WHERE-æˆ–-HAVING-å­å¥ä¸­ä½¿ç”¨çš„å­æŸ¥è¯¢æ¡ä»¶çš„è¿ç®—ç¬¦&quot; class=&quot;headerlink&quot; title=&quot;ANY|ALL: ç”¨äºæ£€æŸ¥ WHERE æˆ– HAVING å­å¥ä¸­ä½¿ç”¨çš„å­æŸ¥è¯¢æ¡ä»¶çš„è¿ç®—ç¬¦&quot;&gt;&lt;/a&gt;&lt;strong&gt;ANY|ALL&lt;/strong&gt;: ç”¨äºæ£€æŸ¥ WHERE æˆ– HAVING å­å¥ä¸­ä½¿ç”¨çš„å­æŸ¥è¯¢æ¡ä»¶çš„è¿ç®—ç¬¦&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;&lt;code&gt;ANY&lt;/code&gt; å¦‚æœä»»ä½•å­æŸ¥è¯¢å€¼æ»¡è¶³æ¡ä»¶ï¼Œåˆ™è¿”å› trueã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;ALL&lt;/code&gt; å¦‚æœæ‰€æœ‰å­æŸ¥è¯¢å€¼éƒ½æ»¡è¶³æ¡ä»¶ï¼Œåˆ™è¿”å› trueã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;SELECT&lt;/code&gt; columns_names &lt;code&gt;FROM&lt;/code&gt; table1 &lt;code&gt;WHERE&lt;/code&gt; column_name operator (&lt;code&gt;ANY&lt;/code&gt;|&lt;code&gt;ALL&lt;/code&gt;) (&lt;code&gt;SELECT&lt;/code&gt; column_name &lt;code&gt;FROM&lt;/code&gt; table_name &lt;code&gt;WHERE&lt;/code&gt; condition);&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&quot;GROUP-BY-é€šå¸¸ä¸èšåˆå‡½æ•°ï¼ˆCOUNTï¼ŒMAXï¼ŒMINï¼ŒSUMï¼ŒAVGï¼‰ä¸€èµ·ä½¿ç”¨ï¼Œç”¨äºå°†ç»“æœé›†åˆ†ç»„ä¸ºä¸€åˆ—æˆ–å¤šåˆ—&quot;&gt;&lt;a href=&quot;#GROUP-BY-é€šå¸¸ä¸èšåˆå‡½æ•°ï¼ˆCOUNTï¼ŒMAXï¼ŒMINï¼ŒSUMï¼ŒAVGï¼‰ä¸€èµ·ä½¿ç”¨ï¼Œç”¨äºå°†ç»“æœé›†åˆ†ç»„ä¸ºä¸€åˆ—æˆ–å¤šåˆ—&quot; class=&quot;headerlink&quot; title=&quot;GROUP BY: é€šå¸¸ä¸èšåˆå‡½æ•°ï¼ˆCOUNTï¼ŒMAXï¼ŒMINï¼ŒSUMï¼ŒAVGï¼‰ä¸€èµ·ä½¿ç”¨ï¼Œç”¨äºå°†ç»“æœé›†åˆ†ç»„ä¸ºä¸€åˆ—æˆ–å¤šåˆ—&quot;&gt;&lt;/a&gt;&lt;strong&gt;GROUP BY&lt;/strong&gt;: é€šå¸¸ä¸èšåˆå‡½æ•°ï¼ˆCOUNTï¼ŒMAXï¼ŒMINï¼ŒSUMï¼ŒAVGï¼‰ä¸€èµ·ä½¿ç”¨ï¼Œç”¨äºå°†ç»“æœé›†åˆ†ç»„ä¸ºä¸€åˆ—æˆ–å¤šåˆ—&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;&lt;code&gt;SELECT&lt;/code&gt; column_name1, COUNT(column_name2) &lt;code&gt;FROM&lt;/code&gt; table_name &lt;code&gt;WHERE&lt;/code&gt; condition &lt;code&gt;GROUP BY&lt;/code&gt; column_name1 &lt;code&gt;ORDER BY&lt;/code&gt; COUNT(column_name2) DESC;&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&quot;HAVING-HAVING-å­å¥æŒ‡å®š-SELECT-è¯­å¥åº”ä»…è¿”å›èšåˆå€¼æ»¡è¶³æŒ‡å®šæ¡ä»¶çš„è¡Œã€‚å®ƒè¢«æ·»åŠ åˆ°-SQL-è¯­è¨€ä¸­ï¼Œå› ä¸ºWHEREå…³é”®å­—ä¸èƒ½ä¸èšåˆå‡½æ•°ä¸€èµ·ä½¿ç”¨ã€‚&quot;&gt;&lt;a href=&quot;#HAVING-HAVING-å­å¥æŒ‡å®š-SELECT-è¯­å¥åº”ä»…è¿”å›èšåˆå€¼æ»¡è¶³æŒ‡å®šæ¡ä»¶çš„è¡Œã€‚å®ƒè¢«æ·»åŠ åˆ°-SQL-è¯­è¨€ä¸­ï¼Œå› ä¸ºWHEREå…³é”®å­—ä¸èƒ½ä¸èšåˆå‡½æ•°ä¸€èµ·ä½¿ç”¨ã€‚&quot; class=&quot;headerlink&quot; title=&quot;HAVING: HAVING å­å¥æŒ‡å®š SELECT è¯­å¥åº”ä»…è¿”å›èšåˆå€¼æ»¡è¶³æŒ‡å®šæ¡ä»¶çš„è¡Œã€‚å®ƒè¢«æ·»åŠ åˆ° SQL è¯­è¨€ä¸­ï¼Œå› ä¸ºWHEREå…³é”®å­—ä¸èƒ½ä¸èšåˆå‡½æ•°ä¸€èµ·ä½¿ç”¨ã€‚&quot;&gt;&lt;/a&gt;&lt;strong&gt;HAVING&lt;/strong&gt;: HAVING å­å¥æŒ‡å®š SELECT è¯­å¥åº”ä»…è¿”å›èšåˆå€¼æ»¡è¶³æŒ‡å®šæ¡ä»¶çš„è¡Œã€‚å®ƒè¢«æ·»åŠ åˆ° SQL è¯­è¨€ä¸­ï¼Œå› ä¸ºWHEREå…³é”®å­—ä¸èƒ½ä¸èšåˆå‡½æ•°ä¸€èµ·ä½¿ç”¨ã€‚&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;&lt;code&gt;SELECT&lt;/code&gt; &lt;code&gt;COUNT&lt;/code&gt;(column_name1), column_name2 &lt;code&gt;FROM&lt;/code&gt; table &lt;code&gt;GROUP BY&lt;/code&gt; column_name2 &lt;code&gt;HAVING&lt;/code&gt; &lt;code&gt;COUNT(&lt;/code&gt;column_name1&lt;code&gt;)&lt;/code&gt; &amp;gt; 5;&lt;/li&gt;
&lt;/ul&gt;
    
    </summary>
    
    
      <category term="å®è·µ" scheme="https://z201.cn/categories/%E5%AE%9E%E8%B7%B5/"/>
    
    
      <category term="MySQL" scheme="https://z201.cn/tags/MySQL/"/>
    
  </entry>
  
</feed>
