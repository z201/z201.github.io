[{"title":"RuståŸºç¡€è¯­æ³•","url":"/posts/2633150323/","content":"<h2 id=\"RuståŸºç¡€è¯­æ³•\"><a href=\"#RuståŸºç¡€è¯­æ³•\" class=\"headerlink\" title=\"RuståŸºç¡€è¯­æ³•\"></a>RuståŸºç¡€è¯­æ³•</h2><blockquote>\n<p>Rust æ˜¯ä¸€ç§é™æ€ç±»å‹çš„è¯­è¨€ã€‚ Rust ä¸­çš„æ¯ä¸ªå€¼éƒ½æ˜¯æŸç§æ•°æ®ç±»å‹ã€‚ ç¼–è¯‘å™¨å¯ä»¥æ ¹æ®åˆ†é…ç»™å®ƒçš„å€¼è‡ªåŠ¨æ¨æ–­å˜é‡çš„æ•°æ®ç±»å‹ã€‚</p>\n</blockquote>\n<h3 id=\"let\"><a href=\"#let\" class=\"headerlink\" title=\"let\"></a>let</h3><blockquote>\n<p>ä½¿ç”¨letå…³é”®å­—å£°æ˜å˜é‡</p>\n</blockquote>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">fn main() &#123;</span><br><span class=\"line\">    println!(&quot;RuståŸºç¡€è¯­æ³•!&quot;);</span><br><span class=\"line\">    let str_ &#x3D; &quot;String&quot;; &#x2F;&#x2F; string ç±»å‹</span><br><span class=\"line\">    let f_ &#x3D; 1.1; &#x2F;&#x2F; float ç±»å‹</span><br><span class=\"line\">    let bool_ &#x3D; true; &#x2F;&#x2F; boolean ç±»å‹</span><br><span class=\"line\">    let char_ &#x3D; &#39;a&#39;; &#x2F;&#x2F; unicode character </span><br><span class=\"line\">    println!(&quot;string &#123;&#125;&quot;,str_); </span><br><span class=\"line\">    println!(&quot;float &#123;&#125;&quot;,f_); </span><br><span class=\"line\">    println!(&quot;boolean &#123;&#125;&quot;,bool_); </span><br><span class=\"line\">    println!(&quot;icon &#123;&#125;&quot;,char_); </span><br><span class=\"line\">\t  </span><br><span class=\"line\">\t</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>Console</li>\n</ul>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">RuståŸºç¡€è¯­æ³•!</span><br><span class=\"line\">string String</span><br><span class=\"line\"><span class=\"built_in\">float</span> 1.1</span><br><span class=\"line\">boolean <span class=\"literal\">true</span></span><br><span class=\"line\">icon a</span><br></pre></td></tr></table></figure>\n\n<a id=\"more\"></a>\n\n<h3 id=\"println\"><a href=\"#println\" class=\"headerlink\" title=\"println!\"></a>println!</h3><blockquote>\n<p>æ‰“å°æ§åˆ¶å°æ–¹æ³•</p>\n</blockquote>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">#[macro_export]</span><br><span class=\"line\">#[stable(feature &#x3D; &quot;rust1&quot;, since &#x3D; &quot;1.0.0&quot;)]</span><br><span class=\"line\">#[allow_internal_unstable(print_internals, format_args_nl)]</span><br><span class=\"line\">macro_rules! println &#123;</span><br><span class=\"line\">    () &#x3D;&gt; ($crate::print!(&quot;\\n&quot;));</span><br><span class=\"line\">    ($($arg:tt)*) &#x3D;&gt; (&#123;</span><br><span class=\"line\">        $crate::io::_print($crate::format_args_nl!($($arg)*));</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>ä¸€ä¸ªå‚æ•°æ˜¯å ä½ç¬¦ *{ }*ï¼Œç‰¹åˆ«çš„è¯­æ³•</li>\n<li>ä¸€ä¸ªå‚æ•°æ˜¯å˜é‡æˆ–è€…å¸¸é‡</li>\n</ul>\n<h3 id=\"scalar-Types\"><a href=\"#scalar-Types\" class=\"headerlink\" title=\"scalar Types\"></a>scalar Types</h3><blockquote>\n<p>Rustæœ‰å››ç§æ ‡é‡ç±»å‹ æ•´å‹ã€æµ®ç‚¹å‹ã€å¸ƒå°”å‹ã€å­—ç¬¦å‹</p>\n</blockquote>\n<h4 id=\"æ•´å‹\"><a href=\"#æ•´å‹\" class=\"headerlink\" title=\"æ•´å‹\"></a>æ•´å‹</h4><blockquote>\n<p>æ•´å‹æ˜¯æŒ‡æ²¡æœ‰å°æ•°éƒ¨åˆ†çš„æ•°å­—ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œæ•´å‹æ˜¯ç”¨äºè¡¨ç¤ºæ•´æ•°çš„ã€‚æ•´å‹å¯ä»¥è¿›ä¸€æ­¥åˆ†ä¸ºæœ‰ç¬¦å·ï¼ˆSignedï¼‰ä¸æ— ç¬¦å·ï¼ˆUnsignedï¼‰çš„ã€‚å¯ä»¥å­˜å‚¨æ­£è´Ÿå€¼ã€‚</p>\n</blockquote>\n<table>\n<thead>\n<tr>\n<th></th>\n<th>å¤§å°</th>\n<th>æœ‰ç¬¦å·Signed</th>\n<th>æ— ç¬¦å·Unsigned</th>\n</tr>\n</thead>\n<tbody><tr>\n<td></td>\n<td>8bit</td>\n<td>i8</td>\n<td>u8</td>\n</tr>\n<tr>\n<td></td>\n<td>16bit</td>\n<td>i16</td>\n<td>u16</td>\n</tr>\n<tr>\n<td></td>\n<td>32bit</td>\n<td>i32</td>\n<td>u32</td>\n</tr>\n<tr>\n<td></td>\n<td>64bit</td>\n<td>i64</td>\n<td>u64</td>\n</tr>\n<tr>\n<td></td>\n<td>128bit</td>\n<td>i128</td>\n<td>u128</td>\n</tr>\n<tr>\n<td></td>\n<td>arch</td>\n<td>issize</td>\n<td>Size</td>\n</tr>\n</tbody></table>\n<h5 id=\"æ¡ˆä¾‹\"><a href=\"#æ¡ˆä¾‹\" class=\"headerlink\" title=\"æ¡ˆä¾‹\"></a>æ¡ˆä¾‹</h5><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">let result &#x3D; 1;    &#x2F;&#x2F; é»˜è®¤ç±»å‹ä¸ºi32</span><br><span class=\"line\">let u20:u32 &#x3D; 20;</span><br><span class=\"line\">let i32:i32 &#x3D; -15;</span><br><span class=\"line\">let s:isize &#x3D; 10;</span><br><span class=\"line\">let count:usize &#x3D; 30;</span><br><span class=\"line\">println!(&quot;result value is &#123;&#125;&quot;,result);</span><br><span class=\"line\">println!(&quot;u20 is &#123;&#125; i32 is &#123;&#125;&quot;,u20,i32);</span><br><span class=\"line\">println!(&quot;mark is &#123;&#125; and count is &#123;&#125;&quot;,s,count);</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>Console</li>\n</ul>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">result value is 1</span><br><span class=\"line\">u20 is 20 i32 is -15</span><br><span class=\"line\">mark is 10 and count is 30</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"æ•´å‹æº¢å‡º\"><a href=\"#æ•´å‹æº¢å‡º\" class=\"headerlink\" title=\"æ•´å‹æº¢å‡º\"></a>æ•´å‹æº¢å‡º</h4><blockquote>\n<p>å½“åˆ†é…ç»™æ•´å‹å˜é‡çš„å€¼è¶…å‡ºè¯¥æ•´å‹åœ¨ Rust ä¸­å®šä¹‰å€¼çš„èŒƒå›´æ—¶ï¼Œå°±ä¼šå‘ç”Ÿæ•´å‹æº¢å‡º</p>\n</blockquote>\n<h5 id=\"æ¡ˆä¾‹-1\"><a href=\"#æ¡ˆä¾‹-1\" class=\"headerlink\" title=\"æ¡ˆä¾‹\"></a>æ¡ˆä¾‹</h5><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">let u1:u8 &#x3D; 255;</span><br><span class=\"line\">&#x2F;&#x2F; u8æ•°æ®èŒƒå›´ä¸º0~255</span><br><span class=\"line\">let u2:u8 &#x3D; 256;   &#x2F;&#x2F;æº¢å‡ºå€¼ä¸º 1</span><br><span class=\"line\">let u3:u8 &#x3D; 257;   &#x2F;&#x2F;æº¢å‡ºå€¼ä¸º 2</span><br><span class=\"line\">let u4:u8 &#x3D; 258;    &#x2F;&#x2F;æº¢å‡ºå€¼ä¸º 3</span><br><span class=\"line\"></span><br><span class=\"line\">println!(&quot;1 is &#123;&#125; &quot;,u1);</span><br><span class=\"line\">println!(&quot;2 is &#123;&#125;&quot;,u2);</span><br><span class=\"line\">println!(&quot;3 is &#123;&#125;&quot;,u3);</span><br><span class=\"line\">println!(&quot;4 is &#123;&#125;&quot;,u4);</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>Console</li>\n</ul>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">error: literal out of range <span class=\"keyword\">for</span> `u8`</span><br><span class=\"line\">  --&gt; src/main.rs:24:16</span><br><span class=\"line\">   |</span><br><span class=\"line\">24 |    <span class=\"built_in\">let</span> u2:u8 = 256;   //æº¢å‡ºå€¼ä¸º 1</span><br><span class=\"line\">   |                ^^^</span><br><span class=\"line\">   |</span><br><span class=\"line\">   = note: `<span class=\"comment\">#[deny(overflowing_literals)]` on by default</span></span><br><span class=\"line\">   = note: the literal `256` does not fit into the <span class=\"built_in\">type</span> `u8` whose range is `0..=255`</span><br><span class=\"line\"></span><br><span class=\"line\">error: literal out of range <span class=\"keyword\">for</span> `u8`</span><br><span class=\"line\">  --&gt; src/main.rs:25:16</span><br><span class=\"line\">   |</span><br><span class=\"line\">25 |    <span class=\"built_in\">let</span> u3:u8 = 257;   //æº¢å‡ºå€¼ä¸º 2</span><br><span class=\"line\">   |                ^^^</span><br><span class=\"line\">   |</span><br><span class=\"line\">   = note: the literal `257` does not fit into the <span class=\"built_in\">type</span> `u8` whose range is `0..=255`</span><br><span class=\"line\"></span><br><span class=\"line\">error: literal out of range <span class=\"keyword\">for</span> `u8`</span><br><span class=\"line\">  --&gt; src/main.rs:26:16</span><br><span class=\"line\">   |</span><br><span class=\"line\">26 |    <span class=\"built_in\">let</span> u4:u8 = 258;    //æº¢å‡ºå€¼ä¸º 3</span><br><span class=\"line\">   |                ^^^</span><br><span class=\"line\">   |</span><br><span class=\"line\">   = note: the literal `258` does not fit into the <span class=\"built_in\">type</span> `u8` whose range is `0..=255`</span><br><span class=\"line\"></span><br><span class=\"line\">error: could not compile `learning-02` due to 3 previous errors</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>Rustçš„æç¤ºéå¸¸æ£’</li>\n</ul>\n<h4 id=\"æµ®ç‚¹å‹\"><a href=\"#æµ®ç‚¹å‹\" class=\"headerlink\" title=\"æµ®ç‚¹å‹\"></a>æµ®ç‚¹å‹</h4><blockquote>\n<p>Rust ä¸­çš„æµ®ç‚¹å‹å¯è¢«åˆ†ä¸º <strong>f32</strong> å’Œ <strong>f64</strong>ã€‚f32 æ˜¯å•ç²¾åº¦æµ®ç‚¹å‹ï¼Œf64 æ˜¯åŒç²¾åº¦æµ®ç‚¹å‹ã€‚é»˜è®¤æµ®ç‚¹å‹ä¸º f64ã€‚</p>\n</blockquote>\n<h5 id=\"æ¡ˆä¾‹-2\"><a href=\"#æ¡ˆä¾‹-2\" class=\"headerlink\" title=\"æ¡ˆä¾‹\"></a>æ¡ˆä¾‹</h5><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">let f1 &#x3D; 10.00;        &#x2F;&#x2F;é»˜è®¤ä¸º f64 æµ®ç‚¹å‹</span><br><span class=\"line\">let f2:f32 &#x3D; 8.35;</span><br><span class=\"line\">let f3:f64 &#x3D; 15000.600;  &#x2F;&#x2F;åŒç²¾åº¦æµ®ç‚¹å‹</span><br><span class=\"line\"></span><br><span class=\"line\">println!(&quot;f1 value is &#123;&#125;&quot;,f1);</span><br><span class=\"line\">println!(&quot;f2 is &#123;&#125;&quot;,f2);</span><br><span class=\"line\">println!(&quot;f3 is &#123;&#125;&quot;,f3);</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>Console</li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">f1 value is 10</span><br><span class=\"line\">f2 is 8.35</span><br><span class=\"line\">f3 is 15000.6</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"è‡ªåŠ¨ç±»å‹è½¬æ¢\"><a href=\"#è‡ªåŠ¨ç±»å‹è½¬æ¢\" class=\"headerlink\" title=\"è‡ªåŠ¨ç±»å‹è½¬æ¢\"></a>è‡ªåŠ¨ç±»å‹è½¬æ¢</h4><blockquote>\n<p>Rust ä¸­ä¸æ”¯æŒè‡ªåŠ¨ç±»å‹è½¬æ¢</p>\n</blockquote>\n<h5 id=\"æ¡ˆä¾‹-3\"><a href=\"#æ¡ˆä¾‹-3\" class=\"headerlink\" title=\"æ¡ˆä¾‹\"></a>æ¡ˆä¾‹</h5><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">let interest:f32 &#x3D; 8;   &#x2F;&#x2F; æµ®ç‚¹å‹å˜é‡è¢«èµ‹äºˆæ•´å‹å€¼</span><br><span class=\"line\">println!(&quot;interest is &#123;&#125;&quot;,interest);</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>Console</li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">error[E0308]: mismatched types</span><br><span class=\"line\">  --&gt; src&#x2F;main.rs:41:23</span><br><span class=\"line\">   |</span><br><span class=\"line\">41 |    let interest:f32 &#x3D; 8;   &#x2F;&#x2F; æµ®ç‚¹å‹å˜é‡è¢«èµ‹äºˆæ•´å‹å€¼</span><br><span class=\"line\">   |                 ---   ^</span><br><span class=\"line\">   |                 |     |</span><br><span class=\"line\">   |                 |     expected &#96;f32&#96;, found integer</span><br><span class=\"line\">   |                 |     help: use a float literal: &#96;8.0&#96;</span><br><span class=\"line\">   |                 expected due to this</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"å¸ƒå°”å€¼\"><a href=\"#å¸ƒå°”å€¼\" class=\"headerlink\" title=\"å¸ƒå°”å€¼\"></a>å¸ƒå°”å€¼</h4><blockquote>\n<p>å¸ƒå°”å‹æœ‰ä¸¤ç§å¯èƒ½çš„å€¼ â€”â€”<em>true</em> æˆ–æ˜¯ <em>false</em>ã€‚ä½¿ç”¨ <strong>bool</strong> å…³é”®å­—å¯ä»¥å£°æ˜å¸ƒå°”å‹å˜é‡ã€‚</p>\n</blockquote>\n<h5 id=\"æ¡ˆä¾‹-4\"><a href=\"#æ¡ˆä¾‹-4\" class=\"headerlink\" title=\"æ¡ˆä¾‹\"></a>æ¡ˆä¾‹</h5><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">let b:bool &#x3D; true;</span><br><span class=\"line\">println!(&quot;boolean &#123;&#125;&quot;,b);</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>Console</li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">boolean true</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"å­—ç¬¦å‹\"><a href=\"#å­—ç¬¦å‹\" class=\"headerlink\" title=\"å­—ç¬¦å‹\"></a>å­—ç¬¦å‹</h4><blockquote>\n<p>Rust ä¸­çš„å­—ç¬¦å‹æ”¯æŒæ•°å­—ï¼Œå­—æ¯ï¼ŒUnicode å’Œç‰¹æ®Šå­—ç¬¦ã€‚ä½¿ç”¨ char å…³é”®å­—å¯ä»¥å£°æ˜å­—ç¬¦å‹å˜é‡ã€‚Rust ä¸­çš„å­—ç¬¦å‹ç”¨ Unicode æ ‡é‡å€¼å‚¨å­˜ï¼Œå³ Rust ä¸­çš„å­—ç¬¦å‹å¯ä»¥è¡¨ç¤ºæ¯” ASCII æ›´å¤šçš„å­—ç¬¦ã€‚Unicode æ ‡é‡å€¼çš„èŒƒå›´åŒ…æ‹¬ä» U+0000 åˆ° U+D7FF å’Œä» U+E000 åˆ° U+10FFFFã€‚</p>\n</blockquote>\n<h5 id=\"æ¡ˆä¾‹-5\"><a href=\"#æ¡ˆä¾‹-5\" class=\"headerlink\" title=\"æ¡ˆä¾‹\"></a>æ¡ˆä¾‹</h5><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">let def_c &#x3D; &#39;@&#39;; &#x2F;&#x2F;é»˜è®¤ä¸ºå­—ç¬¦å‹</span><br><span class=\"line\">let c:char &#x3D; &#39;Z&#39;;</span><br><span class=\"line\">let emoji:char &#x3D; &#39;ğŸ˜&#39;;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>Console</li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">character is @</span><br><span class=\"line\">alphabet is Z</span><br><span class=\"line\">emoji is ğŸ˜</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"ç±»å‹è½¬å­—ç¬¦ä¸²\"><a href=\"#ç±»å‹è½¬å­—ç¬¦ä¸²\" class=\"headerlink\" title=\"ç±»å‹è½¬å­—ç¬¦ä¸²\"></a>ç±»å‹è½¬å­—ç¬¦ä¸²</h5><blockquote>\n<p>to_String()</p>\n</blockquote>\n<h6 id=\"æ¡ˆä¾‹-6\"><a href=\"#æ¡ˆä¾‹-6\" class=\"headerlink\" title=\"æ¡ˆä¾‹\"></a>æ¡ˆä¾‹</h6><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">let x: u32 &#x3D; 10;</span><br><span class=\"line\">  let s: String &#x3D; x.to_string();</span><br><span class=\"line\">  println!(&quot;&#123;&#125;&quot;, s);</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>Console</li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">10</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"letå˜é‡\"><a href=\"#letå˜é‡\" class=\"headerlink\" title=\"letå˜é‡\"></a>letå˜é‡</h4><blockquote>\n<p>å˜é‡æ˜¯ç¨‹åºå¯ä»¥æ“çºµçš„å‘½åå­˜å‚¨</p>\n</blockquote>\n<ul>\n<li><p>å¿…é¡»ä»¥å­—æ¯æˆ–ä¸‹åˆ’çº¿å¼€å¤´ã€‚</p>\n</li>\n<li><p>å˜é‡çš„åç§°å¯ä»¥ç”±å­—æ¯ï¼Œæ•°å­—å’Œä¸‹åˆ’çº¿å­—ç¬¦ç»„æˆã€‚</p>\n</li>\n<li><p>RuståŒºåˆ†å¤§å°å†™</p>\n</li>\n<li><p>ä¸å¯å˜æ€§</p>\n<ul>\n<li>å˜é‡é»˜è®¤æ˜¯ä¸å¯å˜çš„ï¼Œåªè¯»çš„ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå˜é‡çš„å€¼åœ¨åˆå§‹åŒ–åä¸å¯å†è¢«æ”¹å˜ã€‚æ¯”å¦‚</li>\n</ul>\n</li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">let var &#x3D; 25_000;</span><br><span class=\"line\"> println!(&quot;var is &#123;&#125; &quot;,var);</span><br><span class=\"line\"> var &#x3D; 35_000;</span><br><span class=\"line\"> println!(&quot;var changed is &#123;&#125;&quot;,var);</span><br></pre></td></tr></table></figure>\n\n<p>Console</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">  --&gt; src&#x2F;main.rs:57:5</span><br><span class=\"line\">   |</span><br><span class=\"line\">55 |     let var &#x3D; 25_000;</span><br><span class=\"line\">   |         ---</span><br><span class=\"line\">   |         |</span><br><span class=\"line\">   |         first assignment to &#96;var&#96;</span><br><span class=\"line\">   |         help: consider making this binding mutable: &#96;mut var&#96;</span><br><span class=\"line\">56 |     println!(&quot;var is &#123;&#125; &quot;,var);</span><br><span class=\"line\">57 |     var &#x3D; 35_000;</span><br><span class=\"line\">   |     ^^^^^^^^^^^^ cannot assign twice to immutable variable</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>å¯å˜æ€§<ul>\n<li>åœ¨å˜é‡åå‰åŠ ä¸Š <strong>mut</strong> å…³é”®å­—å¯ä»¥ä½¿å…¶å¯å˜ã€‚å¯å˜å˜é‡çš„å€¼å¯ä»¥æ›´æ”¹ã€‚</li>\n</ul>\n</li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">let mut var &#x3D; 25_000;</span><br><span class=\"line\">  println!(&quot;var is &#123;&#125; &quot;,var);</span><br><span class=\"line\">  var &#x3D; 35_000;</span><br><span class=\"line\">  println!(&quot;var changed is &#123;&#125;&quot;,var);</span><br></pre></td></tr></table></figure>\n\n<p>Console</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">var is 25000 </span><br><span class=\"line\">var changed is 35000</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"constå¸¸é‡\"><a href=\"#constå¸¸é‡\" class=\"headerlink\" title=\"constå¸¸é‡\"></a>constå¸¸é‡</h4><blockquote>\n<p>å¸¸é‡ä¸€å®šè¦æ˜¾å¼å£°æ˜å®ƒçš„æ•°æ®ç±»å‹ã€‚ä»¥ä¸‹æ˜¯å£°æ˜å¸¸é‡çš„è¯­æ³•ï¼š</p>\n</blockquote>\n<ul>\n<li>è€Œå£°æ˜å¸¸é‡æ—¶ä¸€å®šè¦å£°æ˜å®ƒçš„æ•°æ®ç±»å‹ã€‚<code>const VARIABLE_NAME:dataType = value;</code></li>\n<li>ä½¿ç”¨ <strong>let</strong> å…³é”®å­—å£°æ˜çš„å˜é‡é»˜è®¤æ˜¯ä¸å¯å˜çš„ã€‚ä½†æ˜¯ä½ å¯ä»¥é€‰æ‹©ä½¿ç”¨ <strong>mut</strong> å…³é”®å­—æ¥ä½¿å…¶å¯å˜ã€‚å¸¸é‡åˆ™<code>æ°¸è¿œæ˜¯ä¸å¯å˜çš„</code>ã€‚</li>\n<li>å¸¸é‡å¯ä»¥åœ¨ä»»ä½•èŒƒå›´å†…å£°æ˜ï¼ŒåŒ…æ‹¬å…¨å±€èŒƒå›´ã€‚</li>\n</ul>\n<h5 id=\"æ¡ˆä¾‹-7\"><a href=\"#æ¡ˆä¾‹-7\" class=\"headerlink\" title=\"æ¡ˆä¾‹\"></a>æ¡ˆä¾‹</h5><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">const VAR_NAME:char &#x3D; &#39;A&#39;;</span><br><span class=\"line\">println!(&quot;VAR_NAME is &#123;&#125;&quot;,VAR_NAME);</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>Console</li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">VAR_NAME is A</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"shadowing-è¦†ç›–\"><a href=\"#shadowing-è¦†ç›–\" class=\"headerlink\" title=\"shadowing è¦†ç›–\"></a>shadowing è¦†ç›–</h4><blockquote>\n<p>Rust æ”¯æŒä¸åŒæ•°æ®ç±»å‹çš„å˜é‡ä¹‹é—´çš„è¦†ç›–ï¼ˆéšè— shadowingï¼‰ã€‚</p>\n</blockquote>\n<ul>\n<li>å˜é‡å¯ä»¥è¢«è¦†ç›–ï¼Œå¸¸é‡ä¸è¡Œã€‚</li>\n</ul>\n<h5 id=\"æ¡ˆä¾‹ä¸€\"><a href=\"#æ¡ˆä¾‹ä¸€\" class=\"headerlink\" title=\"æ¡ˆä¾‹ä¸€\"></a>æ¡ˆä¾‹ä¸€</h5><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">let salary &#x3D; 100.00;</span><br><span class=\"line\">let salary &#x3D; 1.50 ; </span><br><span class=\"line\">&#x2F;&#x2F; è¯»å–salaryå˜é‡çš„å€¼</span><br><span class=\"line\">println!(&quot;The value of salary is :&#123;&#125;&quot;,salary);</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>Console</li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">The value of salary is :1.5</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"æ¡ˆä¾‹äºŒ\"><a href=\"#æ¡ˆä¾‹äºŒ\" class=\"headerlink\" title=\"æ¡ˆä¾‹äºŒ\"></a>æ¡ˆä¾‹äºŒ</h5><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">const salary2 &#x3D; 100.00;</span><br><span class=\"line\">let salary2 &#x3D; 1.50 ; </span><br><span class=\"line\">&#x2F;&#x2F; è¯»å–salaryå˜é‡çš„å€¼</span><br><span class=\"line\">println!(&quot;The value of salary is :&#123;&#125;&quot;,salary2);</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>Console</li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">  --&gt; src&#x2F;main.rs:68:11</span><br><span class=\"line\">   |</span><br><span class=\"line\">68 |     const salary2 &#x3D; 100.00;</span><br><span class=\"line\">   |           ^^^^^^^ help: provide a type for the constant: &#96;salary2: f64&#96;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"æ“ä½œç¬¦\"><a href=\"#æ“ä½œç¬¦\" class=\"headerlink\" title=\"æ“ä½œç¬¦\"></a>æ“ä½œç¬¦</h3><blockquote>\n<p>è¿ç®—ç¬¦ï¼ˆæ“ä½œç¬¦ï¼‰å®šä¹‰äº†å¯¹äºæ•°æ®çš„çš„å¤„ç†ã€‚è¢«è¿ç®—ç¬¦æ‰€ä½œç”¨çš„æ•°æ®è¢«ç§°ä¸ºè¿ç®—æ•°ã€‚</p>\n</blockquote>\n<h4 id=\"ç®—æ•°è¿ç®—æ³•\"><a href=\"#ç®—æ•°è¿ç®—æ³•\" class=\"headerlink\" title=\"ç®—æ•°è¿ç®—æ³•\"></a>ç®—æ•°è¿ç®—æ³•</h4><ul>\n<li>åŠ  +</li>\n<li>å‡ -</li>\n<li>ä¹˜ *</li>\n<li>é™¤ / </li>\n<li>å–ä½™ %</li>\n</ul>\n<h4 id=\"æ“ä½œè¿ç®—ç¬¦\"><a href=\"#æ“ä½œè¿ç®—ç¬¦\" class=\"headerlink\" title=\"æ“ä½œè¿ç®—ç¬¦\"></a>æ“ä½œè¿ç®—ç¬¦</h4><ul>\n<li><code>&gt;</code> å¤§äº</li>\n<li><code>&lt;</code>å°äº</li>\n<li><code>&gt;=</code> å¤§äºç­‰äº</li>\n<li><code>&lt;=</code> å°äºç­‰äº</li>\n<li><code>==</code> ç­‰äº</li>\n<li><code>!=</code> ä¸ç­‰äº</li>\n</ul>\n<h4 id=\"é€»è¾‘è¿ç®—ç¬¦\"><a href=\"#é€»è¾‘è¿ç®—ç¬¦\" class=\"headerlink\" title=\"é€»è¾‘è¿ç®—ç¬¦\"></a>é€»è¾‘è¿ç®—ç¬¦</h4><ul>\n<li><code>&amp;&amp;</code> ä¸</li>\n<li><code>||</code> æˆ–</li>\n<li><code>! </code>é</li>\n</ul>\n<h4 id=\"ä½è¿ç®—ç¬¦\"><a href=\"#ä½è¿ç®—ç¬¦\" class=\"headerlink\" title=\"ä½è¿ç®—ç¬¦\"></a>ä½è¿ç®—ç¬¦</h4><ul>\n<li>&amp; ï¼ˆæŒ‰ä½ä¸ï¼‰</li>\n<li>|ï¼ˆæŒ‰ä½æˆ–ï¼‰</li>\n<li>^ï¼ˆæŒ‰ä½å¼‚æˆ–ï¼‰</li>\n<li>!ï¼ˆæŒ‰ä½éï¼‰</li>\n<li>&lt;&lt;ï¼ˆå·¦ç§»ï¼‰</li>\n<li>&gt;&gt;ï¼ˆå³ç§»ï¼‰</li>\n<li>&gt;&gt;&gt;ï¼ˆæ— ç¬¦å·å³ç§»ï¼‰</li>\n</ul>\n<h2 id=\"END\"><a href=\"#END\" class=\"headerlink\" title=\"END\"></a>END</h2>","categories":["Rust"],"tags":["Rust"]},{"title":"Rustå…¥é—¨","url":"/posts/3684915742/","content":"<blockquote>\n<p>å­¦ä¹ ä¸‹Rust</p>\n</blockquote>\n<h2 id=\"ä¸ºä»€ä¹ˆå­¦ä¹ Rust\"><a href=\"#ä¸ºä»€ä¹ˆå­¦ä¹ Rust\" class=\"headerlink\" title=\"ä¸ºä»€ä¹ˆå­¦ä¹ Rust\"></a>ä¸ºä»€ä¹ˆå­¦ä¹ Rust</h2><blockquote>\n<p>åœ¨çŸ¥ä¹ä¸Šçœ‹åˆ°ä¸€ä¸ªäººå¯¹Rustçš„è¯„è®ºã€‚</p>\n<p>é¦–å…ˆï¼ŒRust æ˜¯æœ‰ç‚¹åäººç±»ï¼Œå¦åˆ™ä¸ä¼šä¸€ç›´éƒ½ä¸ç«ã€‚ç„¶åï¼ŒRust ä¹‹æ‰€ä»¥åäººç±»ï¼Œæ˜¯å› ä¸ºäººç±»è¿™ç©æ„æ—¢æ„šè ¢ï¼Œåˆè‡ªå¤§ï¼Œç ´äº‹è¿˜è´¼å¤šã€‚ ä½ çœ‹ C++ å°±å¾ˆç›¸ä¿¡äººç±»ï¼Œå®ƒè¦æ±‚äººç±»è‡ªå·±æŠŠè‡ªå·± new å‡ºæ¥çš„ä¸œè¥¿ç»™ delete æ‰ã€‚ C++ï¼šâ€œè¿™ç‚¹å°äº‹æˆ‘ç›¸ä¿¡ä½ å¯ä»¥çš„ï¼â€ äººç±»ï¼šâ€œæ²¡é—®é¢˜ï¼åŒ…åœ¨æˆ‘èº«ä¸Šï¼â€ ç„¶åå‘¢ï¼Œå†…å­˜æ³„æ¼ã€double freeã€é‡æŒ‡é’ˆæ»¡ä¸–ç•Œé£˜â€¦â€¦ C++ï¼šâ€œâ€¦â€¦â€</p>\n<p>Java é€‰æ‹©ä¸ç›¸ä¿¡äººç±»ï¼Œä½†æ›¿äººç±»æŠŠäº‹åŠå¥½ã€‚ Javaï¼šâ€œåˆ«åŠ¨ï¼Œè®©æˆ‘æ¥ï¼Œæˆ‘æœ‰gcï¼â€ äººç±»ï¼šâ€œä½ æ€ä¹ˆåšäº‹è¿™ä¹ˆæ…¢å‘€ï¼Ÿä½ æ€ä¹ˆè¿˜ stop the world äº†å‘€ï¼Ÿä½ æ˜¯ä¸æ˜¯ä¸çˆ±æˆ‘äº†å‘€ï¼Ÿâ€ Javaï¼šâ€œâ€¦â€¦â€</p>\n<p>Rust å‘ç°å”¯ä¸€çš„åŠæ³•å°±æ˜¯æ—¢ä¸ç›¸ä¿¡äººç±»ï¼Œä¹Ÿä¸æƒ¯ç€äººç±»ã€‚ Rustï¼šâ€œæŒ‰è€å­è¯´çš„åšï¼Œä¸åšå°±ä¸ç¼–è¯‘ï¼â€ äººç±»ï¼šâ€œä½ åäººç±»ï¼â€ Rustï¼šâ€œæ»šï¼â€</p>\n</blockquote>\n<ul>\n<li>C/C++ å®Œå…¨ç›¸ä¿¡è€Œä¸”æƒ¯ç€ç¨‹åºå‘˜ï¼Œè®©å¤§å®¶è‡ªè¡Œç®¡ç†å†…å­˜ï¼Œæ‰€ä»¥å¯ä»¥ç¼–å†™å¾ˆè‡ªç”±çš„ä»£ç ï¼Œä½†ä¸€ä¸ªä¸å°å¿ƒå°±ä¼šé€ æˆå†…å­˜æ³„æ¼ç­‰é—®é¢˜å¯¼è‡´ç¨‹åºå´©æºƒã€‚</li>\n<li>Java/Golang å®Œå…¨ä¸ç›¸ä¿¡ç¨‹åºå‘˜ï¼Œä½†ä¹Ÿæƒ¯ç€ç¨‹åºå‘˜ã€‚æ‰€æœ‰çš„å†…å­˜ç”Ÿå‘½å‘¨æœŸéƒ½ç”± JVM è¿è¡Œæ—¶ç»Ÿä¸€ç®¡ç†ã€‚ åœ¨ç»å¤§éƒ¨åˆ†åœºæ™¯ä¸‹ï¼Œä½ å¯ä»¥éå¸¸è‡ªç”±çš„å†™ä»£ç ï¼Œè€Œä¸”ä¸ç”¨å…³å¿ƒå†…å­˜åˆ°åº•æ˜¯ä»€ä¹ˆæƒ…å†µã€‚ å†…å­˜ä½¿ç”¨æœ‰é—®é¢˜çš„æ—¶å€™ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ JVM æ¥ä¿¡æ¯ç›¸å…³çš„åˆ†æè¯Šæ–­å’Œè°ƒæ•´ã€‚</li>\n<li>Rust è¯­è¨€é€‰æ‹©æ—¢ä¸ç›¸ä¿¡ç¨‹åºå‘˜ï¼Œä¹Ÿä¸æƒ¯ç€ç¨‹åºå‘˜ã€‚ è®©ä½ åœ¨å†™ä»£ç çš„æ—¶å€™ï¼Œå¿…é¡»æ¸…æ¥šæ˜ç™½çš„ç”¨ Rust çš„è§„åˆ™ç®¡ç†å¥½ä½ çš„å˜é‡ï¼Œå¥½è®©æœºå™¨èƒ½æ˜ç™½é«˜æ•ˆåœ°åˆ†æå’Œç®¡ç†å†…å­˜ã€‚ ä½†æ˜¯è¿™æ ·ä¼šå¯¼è‡´ä»£ç ä¸åˆ©äºäººçš„ç†è§£ï¼Œå†™ä»£ç å¾ˆä¸è‡ªç”±ï¼Œå­¦ä¹ æˆæœ¬ä¹Ÿå¾ˆé«˜ã€‚</li>\n</ul>\n<a id=\"more\"></a>\n\n<h2 id=\"å®‰è£…Rustå¼€å‘ç¯å¢ƒ\"><a href=\"#å®‰è£…Rustå¼€å‘ç¯å¢ƒ\" class=\"headerlink\" title=\"å®‰è£…Rustå¼€å‘ç¯å¢ƒ\"></a>å®‰è£…Rustå¼€å‘ç¯å¢ƒ</h2><h3 id=\"å®‰è£…Rust\"><a href=\"#å®‰è£…Rust\" class=\"headerlink\" title=\"å®‰è£…Rust\"></a>å®‰è£…Rust</h3><blockquote>\n<p>Ruståœ¨Macç³»ç»Ÿä¸Šéå¸¸çš„å‹å¥½</p>\n</blockquote>\n<figure class=\"highlight sh\"><table><tr><td class=\"code\"><pre><span class=\"line\">curl https://sh.rustup.rs -sSf | sh</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>è„šæœ¬ä¼šæ£€æµ‹ä½ çš„æ“ä½œç³»ç»Ÿï¼Œç„¶åæç¤ºä½ æ˜¯å¦å®‰è£…</li>\n</ul>\n<p><img src=\"https://z201.oss-cn-shanghai.aliyuncs.com/JavaNote/20211124031930.png\"></p>\n<ul>\n<li>é»˜è®¤é€‰æ‹©1å°±å¥½äº†</li>\n</ul>\n<p><img src=\"https://z201.oss-cn-shanghai.aliyuncs.com/JavaNote/20211124032020.png\"></p>\n<ul>\n<li>è¿™æ ·å°±å®‰è£…å¥½äº†</li>\n</ul>\n<figure class=\"highlight sh\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">source</span> <span class=\"variable\">$HOME</span>/.cargo/env</span><br><span class=\"line\"><span class=\"comment\"># è®¾ç½®ä¸‹Rustçš„ç¯å¢ƒå˜é‡</span></span><br><span class=\"line\">rustc --version </span><br><span class=\"line\"><span class=\"comment\"># å¦‚æœæ­£å¸¸æ˜¾ç¤ºç‰ˆæœ¬è¯´æ˜å®‰è£…æˆåŠŸäº†</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"åˆ›å»ºæµ‹è¯•é¡¹ç›®\"><a href=\"#åˆ›å»ºæµ‹è¯•é¡¹ç›®\" class=\"headerlink\" title=\"åˆ›å»ºæµ‹è¯•é¡¹ç›®\"></a>åˆ›å»ºæµ‹è¯•é¡¹ç›®</h3><figure class=\"highlight sh\"><table><tr><td class=\"code\"><pre><span class=\"line\">mkdir learning</span><br><span class=\"line\"><span class=\"built_in\">cd</span> learning</span><br><span class=\"line\">cargo new learning-01</span><br><span class=\"line\"><span class=\"built_in\">cd</span> learning-01</span><br><span class=\"line\">cargo run</span><br><span class=\"line\"></span><br><span class=\"line\">Hello, world!</span><br><span class=\"line\"><span class=\"comment\"># å¦‚æœå˜æˆæˆåŠŸå¹¶è¾“å‡ºæ¶ˆæ¯åˆ™è¡¨ç¤ºæµ‹è¯•é¡¹ç›®é€šè¿‡äº†ã€‚</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"Rust\"><a href=\"#Rust\" class=\"headerlink\" title=\"Rust\"></a>Rust</h2><blockquote>\n<p>Rust æ˜¯ä¸€ä¸ªç³»ç»Ÿçº§ç¼–ç¨‹è¯­è¨€ï¼Œè¢« Mozilla å‘˜å·¥ â€œGraydon Hoareâ€ äº 2006 å¹´ å¼€å‘ã€‚ä»–å½¢å®¹ Rust æ˜¯ä¸€ç§çº¿ç¨‹å®‰å…¨çš„æ”¯æŒå¹¶å‘çš„å®ç”¨å‹çš„ç¼–ç¨‹è¯­è¨€ï¼Œæ”¯æŒå‡½æ•°å¼ç¼–ç¨‹ä¸å‘½ä»¤å¼ç¼–ç¨‹ã€‚</p>\n</blockquote>\n<h3 id=\"Cargo\"><a href=\"#Cargo\" class=\"headerlink\" title=\"Cargo\"></a>Cargo</h3><blockquote>\n<p>Cargoæ˜¯Rustçš„æ„å»ºç³»ç»Ÿå’ŒåŒ…ç®¡ç†å·¥å…·ï¼Œå’ŒJavaä¸­mavenç±»ä¼¼çš„åŠŸèƒ½ã€‚</p>\n</blockquote>\n<figure class=\"highlight sh\"><table><tr><td class=\"code\"><pre><span class=\"line\">// æŸ¥çœ‹ç‰ˆæœ¬</span><br><span class=\"line\">cargo --version</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>åˆ›å»ºä¸€ä¸ªé¡¹ç›®</li>\n</ul>\n<figure class=\"highlight sh\"><table><tr><td class=\"code\"><pre><span class=\"line\">cargo new new_project</span><br><span class=\"line\"><span class=\"built_in\">cd</span> new _project</span><br><span class=\"line\">âœ  new_project git:(master) âœ— tree </span><br><span class=\"line\">.</span><br><span class=\"line\">â”œâ”€â”€ Cargo.toml</span><br><span class=\"line\">â””â”€â”€ src</span><br><span class=\"line\">    â””â”€â”€ main.rs</span><br><span class=\"line\"></span><br><span class=\"line\">1 directory, 2 files</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>è¿™é‡Œçš„Cargo.tomlå°±æ˜¯é…ç½®æ–‡ä»¶ <a href=\"https://github.com/toml-lang/toml\" target=\"_blank\" rel=\"noopener\"><em>TOML</em></a> (<em>Tomâ€™s Obvious, Minimal Language</em>) æ ¼å¼ï¼Œè¿™æ˜¯ Cargo é…ç½®æ–‡ä»¶çš„æ ¼å¼ã€‚</li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">[package]</span><br><span class=\"line\">name &#x3D; &quot;new_project&quot;</span><br><span class=\"line\">version &#x3D; &quot;0.1.0&quot;</span><br><span class=\"line\">edition &#x3D; &quot;2021&quot;</span><br><span class=\"line\"></span><br><span class=\"line\"># See more keys and their definitions at https:&#x2F;&#x2F;doc.rust-lang.org&#x2F;cargo&#x2F;reference&#x2F;manifest.html</span><br><span class=\"line\"></span><br><span class=\"line\">[dependencies]</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>æ„å»ºå¹¶è¿è¡Œ</li>\n</ul>\n<figure class=\"highlight shell\"><table><tr><td class=\"code\"><pre><span class=\"line\">cargo build</span><br><span class=\"line\">âœ  new_project git:(master) âœ— cargo build</span><br><span class=\"line\">   Compiling new_project v0.1.0 (/Users/z201/word/rust/learning-rust/new_project)</span><br><span class=\"line\">    Building [                             ] 0/1: new_project(bin)                                                                                                                                                                </span><br><span class=\"line\">    Finished dev [unoptimized + debuginfo] target(s) in 11.12s</span><br><span class=\"line\">    </span><br><span class=\"line\">âœ  new_project git:(master) âœ— ./target/debug/new_project </span><br><span class=\"line\">Hello, world!</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>ä¹Ÿå¯ä»¥ç›´æ¥ç¼–è¯‘åŠ è¿è¡Œ</li>\n</ul>\n<figure class=\"highlight sh\"><table><tr><td class=\"code\"><pre><span class=\"line\">cargo run</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>å¿«é€Ÿæ£€æŸ¥æ˜¯å¦å¯ä»¥ç¼–è¯‘</li>\n</ul>\n<figure class=\"highlight sh\"><table><tr><td class=\"code\"><pre><span class=\"line\">cargo check</span><br></pre></td></tr></table></figure>\n\n","categories":["Rust"],"tags":["Rust"]},{"title":"Permission-Design","url":"/posts/1449986837/","content":"<h2 id=\"èƒŒæ™¯\"><a href=\"#èƒŒæ™¯\" class=\"headerlink\" title=\"èƒŒæ™¯\"></a>èƒŒæ™¯</h2><blockquote>\n<p>æƒé™ç®¡ç†æ˜¯ä¸€ä¸ªå‡ ä¹æ‰€æœ‰å¤§ä¸­å‹ B ç«¯ç³»ç»Ÿéƒ½ä¼šæ¶‰åŠçš„é‡è¦ç»„æˆéƒ¨åˆ†ï¼Œå…¶ç›®çš„æ˜¯å¯¹æ•´ä¸ªç³»ç»Ÿè¿›è¡Œæƒé™æ§åˆ¶ï¼Œé¿å…é€ æˆè¯¯æ“ä½œåŠæ•°æ®æ³„éœ²ç­‰é£é™©é—®é¢˜ã€‚</p>\n</blockquote>\n<h2 id=\"æƒé™ä¸æƒé™ç®¡ç†\"><a href=\"#æƒé™ä¸æƒé™ç®¡ç†\" class=\"headerlink\" title=\"æƒé™ä¸æƒé™ç®¡ç†\"></a>æƒé™ä¸æƒé™ç®¡ç†</h2><h3 id=\"åè¯å®šä¹‰\"><a href=\"#åè¯å®šä¹‰\" class=\"headerlink\" title=\"åè¯å®šä¹‰\"></a>åè¯å®šä¹‰</h3><blockquote>\n<p>æƒé™ç›¸å…³çš„åŸºæœ¬æ¦‚å¿µï¼š</p>\n</blockquote>\n<ul>\n<li>æƒé™ï¼šç”¨æˆ·å¯æ“ä½œè¡Œä¸ºçš„æœ€å°å•ä½ã€‚</li>\n<li>ç”¨æˆ·ï¼šæ¯ä¸ªç”¨æˆ·éƒ½æœ‰å”¯ä¸€æ ‡è¯†ï¼Œå¹¶è¢«æˆäºˆä¸€ä¸ªæˆ–å¤šä¸ªè§’è‰²ã€‚</li>\n<li>è§’è‰²ï¼šç”±ä¸åŒçš„æƒé™ç»„åˆè€Œæˆï¼Œæœ€ç»ˆåˆ†é…ç»™å…·ä½“ç”¨æˆ·ã€‚</li>\n<li>æƒé™ç®¡ç†ï¼šæ§åˆ¶ç”¨æˆ·çš„æƒé™ï¼Œåªèƒ½è®¿é—®æˆæƒå†…å®¹ã€‚</li>\n</ul>\n<h3 id=\"æ¨¡å‹é€‰æ‹©\"><a href=\"#æ¨¡å‹é€‰æ‹©\" class=\"headerlink\" title=\"æ¨¡å‹é€‰æ‹©\"></a>æ¨¡å‹é€‰æ‹©</h3><ul>\n<li>ACLï¼ˆAccess Control Listï¼‰ï¼šåŸºäºç”¨æˆ·çº§åˆ«çš„æƒé™æ§åˆ¶ã€‚<ul>\n<li>å°†ç³»ç»Ÿçš„å„ç§æƒé™ç›´æ¥æˆäºˆå…·ä½“çš„ç”¨æˆ·ã€‚æŠ½è±¡æ¥è¯´ï¼Œä¸ºæ¯ä¸ªç”¨æˆ·ç»´æŠ¤äº†å•ç‹¬çš„æƒé™åˆ—è¡¨ï¼Œå½“éœ€è¦åˆ†é…æƒé™ã€æ”¶å›æƒé™æ—¶ï¼Œéœ€è¦ä¿®æ”¹å¯¹åº”ç”¨æˆ·çš„æƒé™ä¿¡æ¯ã€‚</li>\n</ul>\n</li>\n<li>RBACï¼ˆRole Base Access Controlï¼‰ï¼šåŸºäºè§’è‰²çº§åˆ«çš„æƒé™æ§åˆ¶ã€‚<ul>\n<li>ä¸ ACL å¯¹æ¯”ï¼ŒRBACä¸ç”¨ç»™ç”¨æˆ·å•ä¸ªåˆ†é…æƒé™ï¼Œæƒé™ä¸ç”¨æˆ·ä¹‹å‰é€šè¿‡è§’è‰²å…³è”ã€‚é€šè¿‡ç»™ä¸åŒçš„è§’è‰²åˆ†é…ä¸åŒçš„æƒé™ï¼Œåªéœ€è¦å°†ç”¨æˆ·æŒ‡å‘å¯¹åº”çš„è§’è‰²å°±ä¼šæœ‰å¯¹åº”çš„æƒé™ã€‚åˆ†é…æƒé™ã€æ”¶å›æƒé™åªéœ€è¦é€šè¿‡ä¿®æ”¹ç”¨æˆ·çš„è§’è‰²å³å¯ã€‚</li>\n</ul>\n</li>\n<li>ABACï¼ˆAttribute Base Access Controlï¼‰ï¼šåŸºäºå±æ€§çº§åˆ«çš„æƒé™æ§åˆ¶ã€‚<ul>\n<li>ä¸åŒäºå¸¸è§çš„å°†ç”¨æˆ·é€šè¿‡æŸç§æ–¹å¼ç›´æ¥å…³è”åˆ°æƒé™çš„æ–¹å¼ï¼ŒABAC æ˜¯é€šè¿‡åŠ¨æ€è®¡ç®—ä¸€ä¸ªæˆ–ä¸€ç»„å±æ€§æ¥æ˜¯å¦æ»¡è¶³æŸç§æ¡ä»¶æ¥è¿›è¡Œæƒé™åˆ¤æ–­ã€‚å±æ€§ä¸€èˆ¬åˆ†ä¸ºå››ç±»ï¼šç”¨æˆ·å±æ€§ï¼ˆè‡ªç„¶äººå±æ€§ï¼Œå¦‚å¹´é¾„ã€æ€§åˆ«ç­‰ï¼‰ï¼Œç¯å¢ƒå±æ€§ï¼ˆç‰©ç†ç¯å¢ƒï¼Œå¦‚æ—¶é—´ã€åœ°ç‚¹ã€æ°”å€™ï¼‰ï¼Œæ“ä½œå±æ€§ï¼ˆè¯»ã€å†™ï¼‰å’Œå¯¹è±¡å±æ€§ï¼ˆæ“ä½œå¯¹è±¡ï¼Œå¦‚èµ„é‡‘ã€æŸå¼ å›¾ç‰‡ã€æŸä¸ªç‰¹å®šçš„é¡µé¢ï¼Œåˆç§°èµ„æºå±æ€§ï¼‰ã€‚</li>\n</ul>\n</li>\n<li>å› æ­¤ç†è®ºä¸Šèƒ½å¤Ÿå®ç°çµæ´»çš„æƒé™æ§åˆ¶ã€å°†åœ¨æƒé™ä¸ç”¨æˆ·ä¹‹å‰é€šè¿‡ä¸€ç»„æˆ–å¤šç»„å±æ€§å®ç°å…³è”ï¼Œå‡ ä¹èƒ½æ»¡è¶³æ‰€æœ‰ç±»å‹çš„éœ€æ±‚ã€‚</li>\n</ul>\n<h3 id=\"æƒé™ç®¡æ§\"><a href=\"#æƒé™ç®¡æ§\" class=\"headerlink\" title=\"æƒé™ç®¡æ§\"></a>æƒé™ç®¡æ§</h3><blockquote>\n<p>æŠ½è±¡æ¥çœ‹æƒé™ä½“ç³»å¯ä»¥åˆ†ä¸ºå¦‚ä¸‹ä¸¤ç±»ï¼šåŠŸèƒ½æƒé™ ä¸ æ•°æ®æƒé™ ä¸¤éƒ¨åˆ†ã€‚</p>\n</blockquote>\n<ul>\n<li>åŠŸèƒ½æƒé™æŒ‡çš„æ˜¯åœ¨ç³»ç»Ÿä¸­çš„åŠŸèƒ½å¯å¦ä½¿ç”¨ï¼Œé€šå¸¸æˆ‘ä»¬å°†åŠŸèƒ½æƒé™åˆ†ä¸ºæŸ¥çœ‹ã€ç¼–è¾‘ã€åˆ é™¤ç­‰ï¼ŒåŒæ—¶ç¼–è¾‘ã€åˆ é™¤æƒé™åˆåŒ…å«äº†æŸ¥çœ‹ã€‚é€šè¿‡å°çš„æƒé™ç‚¹æ‹†åˆ†æ›´ç²¾ç»†çš„èµ‹äºˆäº†å‘˜å·¥èƒ½å¦è¿›å…¥æŸä¸ªé¡µé¢æŸ¥çœ‹ä¿¡æ¯ã€ç¼–è¾‘ä¿¡æ¯çš„èƒ½åŠ›ã€‚</li>\n<li>æ•°æ®æƒé™æŒ‡æ•°æ®ä¸­å­˜åœ¨çš„æ•°æ®æ˜¯å¦èƒ½æŸ¥çœ‹ï¼Œæ˜¯ä¸€ä¸ªæ›´ç»†ç²’åº¦çš„æƒé™ã€‚æ¯”å¦‚ä¸€ä¸ªé¡µé¢ï¼Œä¸åŒè§’è‰²æŸ¥çœ‹ä¸åŒçš„æ•°æ®å°±éœ€è¦é€šè¿‡æ•°æ®æƒé™æ§åˆ¶ã€‚<br>ä»ç®¡ç†å¯¹è±¡ç»´åº¦åˆå¯ä»¥åˆ†ä¸ºï¼šä¼ä¸šèƒ½åŠ› ä¸ å‘˜å·¥èƒ½åŠ›ã€‚</li>\n<li>ä¼ä¸šèƒ½åŠ›åº—é“ºç»´åº¦çš„æƒé™ï¼Œæ¯”å¦‚å¼€é€šæŸæœåŠ¡ï¼Œå¯ä»¥é€šè¿‡ä¼ä¸šèƒ½åŠ›å»ä½“ç°ã€‚</li>\n<li>ä¼ä¸šèƒ½åŠ›èµ‹äºˆç”¨æˆ·çš„æƒé™ï¼Œæ¯”å¦‚æ”¶ç”µå­å‘ç¥¨ã€èµ„é‡‘ç®¡ç†ç­‰ã€‚</li>\n<li>ä¼ä¸šèƒ½åŠ›ä¼˜å…ˆçº§ç»å¯¹é«˜äºå‘˜å·¥èƒ½åŠ›ï¼Œæ‰€æœ‰åœºæ™¯çš„æƒé™åˆ¤æ–­ï¼Œåº—é“ºèƒ½åŠ›å¿…é¡»å…ˆäºå‘˜å·¥èƒ½åŠ›ã€‚ç®€å•åœ°è¯´ï¼Œä¼ä¸šèƒ½åŠ›å†³å®šäº†â€œä¼ä¸šèƒ½åšä»€ä¹ˆâ€ï¼Œå‘˜å·¥èƒ½åŠ›å†³å®šäº†â€œç”¨æˆ·èƒ½åšä»€ä¹ˆâ€ã€‚</li>\n</ul>\n","categories":["ç³»ç»Ÿè®¾è®¡"],"tags":["ç³»ç»Ÿè®¾è®¡","æƒé™è®¾è®¡"]},{"title":"Git-Develop-Branch","url":"/posts/3080259218/","content":"<h2 id=\"è§„èŒƒä»£ç å¼€å‘æµç¨‹\"><a href=\"#è§„èŒƒä»£ç å¼€å‘æµç¨‹\" class=\"headerlink\" title=\"è§„èŒƒä»£ç å¼€å‘æµç¨‹\"></a>è§„èŒƒä»£ç å¼€å‘æµç¨‹</h2><blockquote>\n<p>git åˆ†æ”¯åˆ†ä¸ºé›†æˆåˆ†æ”¯ã€åŠŸèƒ½åˆ†æ”¯å’Œä¿®å¤åˆ†æ”¯ï¼Œåˆ†åˆ«å‘½åä¸º developã€feature å’Œ hotfixï¼Œå‡ä¸ºå•æ•°ã€‚ä¸å¯ä½¿ç”¨ featuresã€futureã€hotfixesã€hotfixs ç­‰é”™è¯¯åç§°ã€‚</p>\n</blockquote>\n<p>1.gitä¸»åˆ†æ”¯(master)ã€‚å®ƒæ˜¯è‡ªåŠ¨å»ºç«‹ï¼Œç”¨äºå‘å¸ƒé‡å¤§ç‰ˆæœ¬æ›´æ–°ï¼ˆgithub ç°åœ¨é»˜è®¤æ˜¯æ˜¯main å› ç§æ—æ­§è§†é—®é¢˜ï¼‰<br>2.gitå¼€å‘ä¸»åˆ†æ”¯(develop)ã€‚æ—¥å¸¸å¼€å‘åœ¨æ­¤åˆ†æ”¯ä¸Šè¿›è¡Œ<br>3.gitä¸´æ—¶æ€§åˆ†æ”¯ï¼šç”¨äºåº”å¯¹ä¸€äº›ç‰¹å®šç›®çš„çš„ç‰ˆæœ¬å¼€å‘(éªŒè¯OKåï¼Œåº”è¯¥åˆ é™¤æ­¤åˆ†æ”¯)</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">- åŠŸèƒ½ï¼ˆfeatureï¼‰åˆ†æ”¯ï¼šå®ƒæ˜¯ä¸ºäº†å¼€å‘æŸç§ç‰¹å®šåŠŸèƒ½ï¼Œä»Developåˆ†æ”¯ä¸Šé¢åˆ†å‡ºæ¥çš„ã€‚å¼€å‘å®Œæˆåï¼Œè¦å†å¹¶å…¥Developã€‚å¯ä»¥é‡‡ç”¨feature-çš„å½¢å¼å‘½åã€‚</span><br><span class=\"line\">- é¢„å‘å¸ƒï¼ˆreleaseï¼‰åˆ†æ”¯ï¼šæŒ‡å‘å¸ƒæ­£å¼ç‰ˆæœ¬ä¹‹å‰ï¼ˆå³åˆå¹¶åˆ°Masteråˆ†æ”¯ä¹‹å‰ï¼‰ï¼Œæˆ‘ä»¬å¯èƒ½éœ€è¦æœ‰ä¸€ä¸ªé¢„å‘å¸ƒçš„ç‰ˆæœ¬è¿›è¡Œæµ‹è¯•ã€‚é¢„å‘å¸ƒåˆ†æ”¯æ˜¯ä»Developåˆ†æ”¯ä¸Šé¢åˆ†å‡ºæ¥çš„ï¼Œé¢„å‘å¸ƒç»“æŸä»¥åï¼Œ</span><br><span class=\"line\">å¿…é¡»åˆå¹¶è¿›Developå’ŒMasteråˆ†æ”¯ã€‚å®ƒçš„å‘½åï¼Œå¯ä»¥é‡‡ç”¨release-çš„å½¢å¼ã€‚</span><br><span class=\"line\">- ä¿®è¡¥bugï¼ˆhotfixï¼‰åˆ†æ”¯ï¼šè½¯ä»¶æ­£å¼å‘å¸ƒä»¥åï¼Œéš¾å…ä¼šå‡ºç°bugã€‚è¿™æ—¶å°±éœ€è¦åˆ›å»ºä¸€ä¸ªåˆ†æ”¯ï¼Œè¿›è¡Œbugä¿®è¡¥ã€‚ä¿®è¡¥bugåˆ†æ”¯æ˜¯ä»Masteræˆ–Developåˆ†æ”¯ä¸Šé¢åˆ†å‡ºæ¥çš„ã€‚ä¿®è¡¥ç»“æŸä»¥åï¼Œ</span><br><span class=\"line\">å†åˆå¹¶è¿›Masterå’ŒDevelopåˆ†æ”¯ã€‚å®ƒçš„å‘½åï¼Œå¯ä»¥é‡‡ç”¨hotfix-***çš„å½¢å¼ã€‚</span><br></pre></td></tr></table></figure>\n\n<p>å¼€å‘æµç¨‹</p>\n<blockquote>\n<p>æš‚å®šä¸´æ—¶åˆ†æ”¯featureã€hotfixä¸¤ç§å¯ç”¨ã€‚æš‚ä¸å¯ç”¨RPã€code reviewã€‚</p>\n</blockquote>\n<p>1.åŸºäºdevelopç”Ÿæˆæ–°ä¸´æ—¶å¼€å‘åˆ†æ”¯ã€‚<br>2.æµ‹è¯•ã€æ­£å¼ç¯å¢ƒä¸Šçº¿é€šè¿‡ã€‚<br>3.åˆå¹¶è‡³developåˆ†æ”¯ï¼Œå¹¶ç”Ÿæˆå¯¹åº”çš„tagç‰ˆæœ¬ã€‚<br>4.å®Œæˆç‰¹å®šåŠŸèƒ½å¼€å‘å(éªŒè¯OKåï¼Œåº”è¯¥åˆ é™¤æ­¤åˆ†æ”¯)ã€‚<br>5.README.mdæ–‡æ¡£ä¸­è®°å½•tagç‰ˆæœ¬ç”Ÿæˆæ—¶é—´ä»¥åŠå…·ä½“çš„åŠŸèƒ½åç§°ã€‚</p>\n<p>ä¿®å¤bugæµç¨‹</p>\n<blockquote>\n<p>æ ¹æ®æœ€æ–°å·²ç»ä¸Šçº¿çš„åˆ†æ”¯ä»£ç åˆ›å»ºhotfixåˆ†æ”¯ã€‚</p>\n</blockquote>\n<p>1.åŸºäºdevelopæˆ–è€…ä¸Šä¸ªtagç‰ˆæœ¬(æ ¹æ®å®é™…æƒ…å†µè€Œå®š)ç”Ÿæˆæ–°ä¸´æ—¶å¼€å‘åˆ†æ”¯ã€‚<br>2.æµ‹è¯•ã€æ­£å¼ç¯å¢ƒä¸Šçº¿é€šè¿‡ã€‚<br>3.åˆå¹¶è‡³developåˆ†æ”¯ï¼Œå¹¶ç”Ÿæˆå¯¹åº”çš„tagç‰ˆæœ¬ã€‚<br>4.<code>è‹¥å­˜åœ¨ä¸´æ—¶å¼€å‘åˆ†æ”¯</code>-å®Œæˆç‰¹å®šåŠŸèƒ½å¼€å‘å(éªŒè¯OKåï¼Œåº”è¯¥åˆ é™¤æ­¤åˆ†æ”¯)ã€‚<br>5.<code>è‹¥å­˜åœ¨ä¸´æ—¶å¼€å‘åˆ†æ”¯</code>-ä¸´æ—¶å¼€å‘åˆ†æ”¯åˆå¹¶å·²ç»ä¿®å¤bugçš„developä»£ç ã€‚<br>6.<code>è‹¥å­˜åœ¨ä¸´æ—¶å¼€å‘åˆ†æ”¯</code>-ä¸´æ—¶å¼€å‘åˆ†æ”¯å®Œæˆç‰¹å®šåŠŸèƒ½å¼€å‘å(éªŒè¯OKåï¼Œåº”è¯¥åˆ é™¤æ­¤åˆ†æ”¯)ã€‚<br>7.README.mdæ–‡æ¡£ä¸­è®°å½•tagç‰ˆæœ¬ç”Ÿæˆæ—¶é—´ä»¥åŠå…·ä½“çš„åŠŸèƒ½åç§°ã€‚</p>\n<h2 id=\"æ¡ˆä¾‹\"><a href=\"#æ¡ˆä¾‹\" class=\"headerlink\" title=\"æ¡ˆä¾‹\"></a>æ¡ˆä¾‹</h2><h3 id=\"å¼€å‘å°ºç \"><a href=\"#å¼€å‘å°ºç \" class=\"headerlink\" title=\"å¼€å‘å°ºç \"></a>å¼€å‘å°ºç </h3><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">git checkout develop &#x2F;&#x2F; åˆ‡æ¢å¼€å‘åˆ†æ”¯ï¼Œgit pull origin develop å¹¶åŒæ­¥æœ€æ–°çš„developåˆ†æ”¯ä»£ç ã€‚ï¼ˆå¼ºåˆ¶ï¼‰</span><br><span class=\"line\">git checkout -b feature-sizeGroup &#x2F;&#x2F;åŸºäºdevelopåˆ†æ”¯åˆ›å»ºæ–°çš„å¼€å‘åˆ†æ”¯ï¼ˆå¼ºåˆ¶ï¼‰</span><br><span class=\"line\">git checkout develop &#x2F;&#x2F; feature-sizeGroupå®Œæˆä¸Šçº¿ådevelopåˆ†æ”¯å‡†å¤‡åˆå¹¶åˆ†æ”¯ï¼ˆå¼ºåˆ¶ï¼‰</span><br><span class=\"line\">git merge feature-sizeGroup &#x2F;&#x2F; åˆå¹¶å¼€å‘åŠŸèƒ½åˆ†æ”¯ï¼ˆå¼ºåˆ¶ï¼‰</span><br><span class=\"line\">git tag -a v1.4 -m &quot;my version 1.4&quot; &#x2F;&#x2F; åˆå¹¶å®Œæˆåˆ›å»ºæ ‡ç­¾å¤‡æ³¨ä¸­ç®€å•è¯´æ˜å¼€å‘åŠŸèƒ½ï¼ˆå¼ºåˆ¶ï¼‰</span><br><span class=\"line\">git push origin v1.4 &#x2F;&#x2F; æ¨é€tagæ ‡ç­¾åˆ°è¿œç¨‹ä»“åº“ï¼ˆå¼ºåˆ¶ï¼‰</span><br><span class=\"line\">git branch -d feature-sizeGroup &#x2F;&#x2F;åˆ é™¤æœ¬åœ°çš„ä¸´æ—¶å¼€å‘åˆ†æ”¯(éå¼ºåˆ¶)</span><br><span class=\"line\">git push origin --delete feature-sizeGroup &#x2F;&#x2F; åˆ é™¤è¿œç¨‹çš„ä¸´æ—¶å¼€å‘åˆ†æ”¯ï¼ˆå¼ºåˆ¶ï¼‰</span><br><span class=\"line\">vim README.md &#x2F;&#x2F; ä¿å­˜æ–°å¢tagç‰ˆæœ¬è®°å½•ï¼ˆå¼ºåˆ¶ï¼‰</span><br><span class=\"line\">git add README.md &#x2F;&#x2F; è¿½è¸ªREADME.mdæ–‡ä»¶ã€‚ï¼ˆå¼ºåˆ¶ï¼‰</span><br><span class=\"line\">git commit -m &quot;å‘å¸ƒæ–°çš„tag&quot; &#x2F;&#x2F; å°†æš‚å­˜åŒºé‡Œçš„æ”¹åŠ¨ç»™æäº¤åˆ°æœ¬åœ°çš„ç‰ˆæœ¬åº“ï¼ˆå¼ºåˆ¶ï¼‰</span><br><span class=\"line\">git push origin develop &#x2F;&#x2F; æ¨é€æ”¹åŠ¨åçš„developï¼ˆå¼ºåˆ¶ï¼‰</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"master-åˆå¹¶å‘¨æœŸ\"><a href=\"#master-åˆå¹¶å‘¨æœŸ\" class=\"headerlink\" title=\"master åˆå¹¶å‘¨æœŸ\"></a>master åˆå¹¶å‘¨æœŸ</h3><blockquote>\n<p>æ¯æœˆæœˆåº•æœ€åå‡ ä¸ªå·¥ä½œæ—¥å®Œæˆå¯¹master å¯¹developåˆ†æ”¯çš„åˆå¹¶ã€‚</p>\n</blockquote>\n<h3 id=\"tag-ç‰ˆæœ¬å‘½å\"><a href=\"#tag-ç‰ˆæœ¬å‘½å\" class=\"headerlink\" title=\"tag ç‰ˆæœ¬å‘½å\"></a>tag ç‰ˆæœ¬å‘½å</h3><blockquote>\n<p>ç‰ˆæœ¬å‘½åè§„èŒƒ</p>\n</blockquote>\n<ul>\n<li>ç‰ˆæœ¬: v1.1.1 ( Build 101001 )</li>\n<li>ç‰ˆæœ¬æ ¼å¼ bigVersion.middleVersion.smallVersion</li>\n<li>bigVersion å¤§ç‰ˆæœ¬(å¹´åº¦æˆ–è€…é‡å¤§æ›´æ–°ï¼ˆå¼ºåˆ¶æ›´æ–°ï¼Œè€ç‰ˆæœ¬å­˜åœ¨ä¸å…¼å®¹ç­‰æƒ…å†µï¼‰) å–å€¼èŒƒå›´ 1-99</li>\n<li>middleVersion è¿­ä»£ç‰ˆæœ¬ å–å€¼èŒƒå›´ 1-99</li>\n<li>smallVersion bugä¿®å¤å¢å¼ºå‘å¸ƒã€‚ å–å€¼èŒƒå›´ 1-999</li>\n<li>Buildä¸ºç‰ˆæœ¬çº¯æ•°å­—æ ¼å¼åŒ–ã€‚</li>\n</ul>\n<h3 id=\"gitå¸®åŠ©æ–‡æ¡£\"><a href=\"#gitå¸®åŠ©æ–‡æ¡£\" class=\"headerlink\" title=\"gitå¸®åŠ©æ–‡æ¡£\"></a>gitå¸®åŠ©æ–‡æ¡£</h3><p><a href=\"https://gitee.com/all-about-git\" target=\"_blank\" rel=\"noopener\">git å¤§å…¨</a></p>\n","categories":["Git"],"tags":["Git","Develop","Branch"]},{"title":"Jvm-optimization","url":"/posts/3325845222/","content":"<blockquote>\n<p>jvmè°ƒä¼˜æ˜¯æ—¥å¸¸å·¥ä½œä¸­ç»å¸¸ä¼šä½¿ç”¨çš„æŠ€å·§ï¼Œæ•´ç†ä¸‹ã€‚</p>\n</blockquote>\n<h3 id=\"é¡¹ç›®å¯åŠ¨çš„æ—¶å€™åŠ ä¸Šçš„å‚æ•°éƒ½æ˜¯äº›å•¥æ„æ€ï¼Ÿ\"><a href=\"#é¡¹ç›®å¯åŠ¨çš„æ—¶å€™åŠ ä¸Šçš„å‚æ•°éƒ½æ˜¯äº›å•¥æ„æ€ï¼Ÿ\" class=\"headerlink\" title=\"é¡¹ç›®å¯åŠ¨çš„æ—¶å€™åŠ ä¸Šçš„å‚æ•°éƒ½æ˜¯äº›å•¥æ„æ€ï¼Ÿ\"></a>é¡¹ç›®å¯åŠ¨çš„æ—¶å€™åŠ ä¸Šçš„å‚æ•°éƒ½æ˜¯äº›å•¥æ„æ€ï¼Ÿ</h3><blockquote>\n<p>åˆšå¼€å§‹å·¥ä½œçš„æ—¶å€™å‘ç°åŒäº‹ä¼šåœ¨jarå¯åŠ¨çš„å‘½ä»¤ä¸Šå¢åŠ å¾ˆå¤šå‚æ•°,å¾ˆé•¿ä¸€æ®µæ—¶é—´éƒ½ä¸æ¸…æ¥šæ˜¯å¹²å•¥çš„ã€‚</p>\n</blockquote>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\">-XX:MetaspaceSize=<span class=\"number\">128</span>m -XX:MaxMetaspaceSize=<span class=\"number\">128</span>m -Xms1024m -Xmx1024m -Xmn256m -Xss256k -XX:SurvivorRatio=<span class=\"number\">8</span> -XX:+UseConcMarkSweepGC</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>ç®€å•ä»‹ç»ä¸‹å‚æ•°</li>\n</ul>\n<figure class=\"highlight shell\"><table><tr><td class=\"code\"><pre><span class=\"line\">-XX:MetaspaceSize=128m ï¼ˆå…ƒç©ºé—´é»˜è®¤å¤§å°ï¼‰</span><br><span class=\"line\">-XX:MaxMetaspaceSize=128m ï¼ˆå…ƒç©ºé—´æœ€å¤§å¤§å°ï¼‰</span><br><span class=\"line\">-Xms1024m ï¼ˆå †æœ€å¤§å¤§å°ï¼‰</span><br><span class=\"line\">-Xmx1024m ï¼ˆå †é»˜è®¤å¤§å°ï¼‰</span><br><span class=\"line\">-Xmn256m ï¼ˆæ–°ç”Ÿä»£å¤§å°ï¼‰</span><br><span class=\"line\">-Xss256k ï¼ˆæ£§æœ€å¤§æ·±åº¦å¤§å°ï¼‰</span><br><span class=\"line\">-XX:SurvivorRatio=8 ï¼ˆæ–°ç”Ÿä»£åˆ†åŒºæ¯”ä¾‹ 8:2ï¼‰</span><br><span class=\"line\">-XX:+UseConcMarkSweepGC ï¼ˆæŒ‡å®šä½¿ç”¨çš„åƒåœ¾æ”¶é›†å™¨ï¼Œè¿™é‡Œä½¿ç”¨CMSæ”¶é›†å™¨ï¼‰</span><br><span class=\"line\">-XX:+PrintGCDetails ï¼ˆæ‰“å°è¯¦ç»†çš„GCæ—¥å¿—ï¼‰</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>è™½ç„¶æœ‰äº†ä»‹ç»ä½†æ˜¯ä¾ç„¶ä¸æ¸…æ¥šå…·ä½“æ˜¯å¹²å•¥çš„ã€‚å¹¶ä¸”Javaè™šæ‹Ÿæœºæä¾›äº†éå¸¸å¤šçš„å‚æ•°å‘½ä»¤ã€‚ä¸‹é¢ä»£ç å¯ä»¥è¾“å‡ºæ”¯æŒçš„å‚æ•°æ•°é‡</li>\n</ul>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\">java -XX:+PrintFlagsFinal -XX:+UnlockDiagnosticVMOptions -version | wc -l</span><br><span class=\"line\">openjdk version <span class=\"string\">\"1.8.0_275\"</span></span><br><span class=\"line\"><span class=\"function\">OpenJDK Runtime <span class=\"title\">Environment</span> <span class=\"params\">(AdoptOpenJDK)</span><span class=\"params\">(build <span class=\"number\">1.8</span><span class=\"number\">.0</span>_275-b01)</span></span></span><br><span class=\"line\"><span class=\"function\">OpenJDK 64-Bit Server <span class=\"title\">VM</span> <span class=\"params\">(AdoptOpenJDK)</span><span class=\"params\">(build <span class=\"number\">25.275</span>-b01, mixed mode)</span></span></span><br><span class=\"line\"><span class=\"function\">     838</span></span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>å †å†…å­˜å¤§å°é…ç½®</li>\n</ul>\n<blockquote>\n<p>å»ºè®® -Xms = æœ€å¤§å†…å­˜ * [0.6. ~0.8] è¿™é‡Œéœ€è¦è€ƒè™‘ç³»ç»ŸæŸè€—å†…å­˜ã€å’Œå®é™…ç‰©ç†å†…å­˜ã€‚</p>\n</blockquote>\n<ul>\n<li><p>å †å†…å­˜ä¸å †å¤–å†…å­˜</p>\n<ul>\n<li>å †å†…å­˜</li>\n</ul>\n<blockquote>\n<p>å¿…é¡»æ˜¯1024çš„å€æ•°ï¼Œä¸”ä¸èƒ½ä½äº2Mã€‚</p>\n<p>32ä½æœºå™¨ï¼Œæœ€å¤§1G/4G 64ä½æœºå™¨æœ€å¤§å¯ä»¥è¶…è¿‡ 32G/64G</p>\n</blockquote>\n<ul>\n<li>å †å¤–å†…å­˜</li>\n</ul>\n<blockquote>\n<p>å †å¤–å†…å­˜ä¸€èˆ¬æŒ‡ Direct Memory ï¼Œä¸å—GCæ§åˆ¶ï¼ŒJVMã€Nettyéƒ½å¯èƒ½ä½¿ç”¨å †å¤–å†…å­˜ã€‚</p>\n</blockquote>\n</li>\n</ul>\n<figure class=\"highlight shell\"><table><tr><td class=\"code\"><pre><span class=\"line\">-XX:MaxDirectMemorySize é™åˆ¶</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"å¦‚ä½•ç†è§£è¿™äº›å‚æ•°çš„å«ä¹‰ï¼Ÿ\"><a href=\"#å¦‚ä½•ç†è§£è¿™äº›å‚æ•°çš„å«ä¹‰ï¼Ÿ\" class=\"headerlink\" title=\"å¦‚ä½•ç†è§£è¿™äº›å‚æ•°çš„å«ä¹‰ï¼Ÿ\"></a>å¦‚ä½•ç†è§£è¿™äº›å‚æ•°çš„å«ä¹‰ï¼Ÿ</h3><blockquote>\n<p>é¦–å…ˆæˆ‘ä»¬éœ€è¦ç†è§£javaæ˜¯å¦‚ä½•è¿è¡Œçš„ï¼Œä¸ºä»€ä¹ˆéœ€è¦javaè™šæ‹Ÿæœºï¼Ÿ    </p>\n<p>æˆ‘ä»¬å¸¸ç”¨æ–¹å¼ä¸€èˆ¬æ˜¯å®‰è£…javaè¿è¡Œç¯å¢ƒ(jre)ç”¨å‘½ä»¤è¡Œçš„æ–¹å¼å¯åŠ¨æˆ–è€…ç›´æ¥åŒå‡»jarè¿è¡Œã€‚jreåŒ…å«çš„javaè¿è¡Œçš„å¿…è¦ç¯å¢ƒã€‚</p>\n<p>Java ä½œä¸ºä¸€é—¨é«˜çº§ç¨‹åºè¯­è¨€ï¼Œå®ƒçš„è¯­æ³•éå¸¸å¤æ‚ï¼ŒæŠ½è±¡ç¨‹åº¦ä¹Ÿå¾ˆé«˜ã€‚ç¼–è¯‘å‡ºæ¥çš„ä¹Ÿä¸æ˜¯æœºå™¨å¯ä»¥ç›´æ¥ç›´æ¥è¿è¡Œä»£ç ã€‚æ‰€ä»¥ä½¿ç”¨é¢å‘Javaè¯­è¨€çš„è™šæ‹Ÿæœºè¿è¡ŒJavaç¼–è¯‘ä»¥åçš„ç‰¹å®šä»£ç ã€‚è¿™é‡Œçš„ç‰¹å®šä»£ç æŒ‡çš„æ˜¯Javaå­—èŠ‚æŒ‡ä»¤ç ã€‚</p>\n</blockquote>\n<h3 id=\"JVM-å†…å­˜åˆ†é…æ€§èƒ½é—®é¢˜\"><a href=\"#JVM-å†…å­˜åˆ†é…æ€§èƒ½é—®é¢˜\" class=\"headerlink\" title=\"JVM å†…å­˜åˆ†é…æ€§èƒ½é—®é¢˜\"></a>JVM å†…å­˜åˆ†é…æ€§èƒ½é—®é¢˜</h3><ul>\n<li>åœ¨åº”ç”¨æœåŠ¡çš„ç‰¹å®šåœºæ™¯ä¸‹ï¼ŒJVM å†…å­˜åˆ†é…ä¸åˆç†å¸¦æ¥çš„æ€§èƒ½è¡¨ç°å¹¶ä¸ä¼šåƒå†…å­˜æº¢å‡ºé—®é¢˜è¿™ä¹ˆçªå‡ºã€‚å¦‚æœæ²¡æœ‰æ·±å…¥åˆ°å„é¡¹æ€§èƒ½æŒ‡æ ‡ä¸­å»ï¼Œæ˜¯å¾ˆéš¾å‘ç°å…¶ä¸­éšè—çš„æ€§èƒ½æŸè€—ã€‚</li>\n<li>JVM å†…å­˜åˆ†é…ä¸åˆç†æœ€ç›´æ¥çš„è¡¨ç°å°±æ˜¯é¢‘ç¹çš„ GCï¼Œè¿™ä¼šå¯¼è‡´ä¸Šä¸‹æ–‡åˆ‡æ¢ç­‰æ€§èƒ½é—®é¢˜ï¼Œä»è€Œé™ä½ç³»ç»Ÿçš„ååé‡ã€å¢åŠ ç³»ç»Ÿçš„å“åº”æ—¶é—´ã€‚</li>\n</ul>\n<h3 id=\"åˆ†æ-GC-æ—¥å¿—\"><a href=\"#åˆ†æ-GC-æ—¥å¿—\" class=\"headerlink\" title=\"åˆ†æ GC æ—¥å¿—\"></a>åˆ†æ GC æ—¥å¿—</h3><ul>\n<li>åœ¨è¿›è¡Œå‹æµ‹çš„æ—¶å€™ï¼Œæˆ‘ä»¬éœ€è¦å¯¹GCæ—¥å¿—è¿›è¡Œåˆ†æã€‚</li>\n</ul>\n<figure class=\"highlight shell\"><table><tr><td class=\"code\"><pre><span class=\"line\">-XX:+PrintGCTimeStamps -XX:+PrintGCDetails -Xloggc:/log/heap.log</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>-XX:PrintGCTimeStampsï¼šæ‰“å° GC å…·ä½“æ—¶é—´ï¼›</li>\n<li>-XX:PrintGCDetails ï¼šæ‰“å°å‡º GC è¯¦ç»†æ—¥å¿—ï¼›</li>\n<li>-Xloggc: pathï¼šGC æ—¥å¿—ç”Ÿæˆè·¯å¾„ã€‚</li>\n<li>JVM å†…å­˜è°ƒä¼˜é€šå¸¸å’Œ GC è°ƒä¼˜æ˜¯äº’è¡¥çš„ï¼ŒåŸºäºä»¥ä¸Šè°ƒä¼˜ï¼Œå¯ä»¥å¯¹å¹´è½»ä»£å’Œå †å†…å­˜çš„åƒåœ¾å›æ”¶ç®—æ³•è¿›è¡Œè°ƒä¼˜ã€‚</li>\n</ul>\n<a id=\"more\"></a>\n\n\n\n\n\n","categories":["Jvm"],"tags":["Jvm"]},{"title":"Nginx-log-format","url":"/posts/3516209833/","content":"<blockquote>\n<p>Ngxin æ—¥å¿—æ ¼å¼åŒ–</p>\n</blockquote>\n<ul>\n<li>Nginxæä¾›çš„è®¿é—®æ—¥å¿—é‡Œå°±è•´è—ç€å¤§é‡æœ‰ç”¨ä¿¡æ¯ã€‚ä»Šå¤©è¿™ç¯‡è¦è¯´çš„å°±æ˜¯å¦‚æœä¿®æ”¹Nginxé»˜è®¤æ—¥å¿—æ ¼å¼ï¼Œä»¥ä¾¿äºæˆ‘ä»¬æ›´å¥½çš„æŒ–æ˜æœ‰æ•ˆæŒ‡æ ‡ã€‚</li>\n</ul>\n<p>ç¼–è¾‘<code>/etc/nginx.conf</code>é…ç½®æ–‡ä»¶ï¼Œåœ¨æ—¥å¿—éƒ¨åˆ†æ·»åŠ ä¸‹é¢ä¸¤æ®µä»£ç ï¼Œç¼–è¾‘å®Œæˆåé‡å¯NginxæœåŠ¡å³å¯ã€‚</p>\n<figure class=\"highlight nginx\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"attribute\">log_format</span> main <span class=\"string\">'<span class=\"variable\">$host</span> - <span class=\"variable\">$remote_addr</span> - [<span class=\"variable\">$time_local</span>] \"<span class=\"variable\">$request</span>\" '</span></span><br><span class=\"line\">                <span class=\"string\">'<span class=\"variable\">$status</span> <span class=\"variable\">$upstream_response_time</span> <span class=\"variable\">$request_time</span> \"<span class=\"variable\">$http_referer</span>\"'</span></span><br><span class=\"line\">                <span class=\"string\">'\"<span class=\"variable\">$http_user_agent</span>\" \"<span class=\"variable\">$http_x_forwarded_for</span>\" <span class=\"variable\">$body_bytes_sent</span> '</span>;</span><br><span class=\"line\"><span class=\"attribute\">access_log</span> /var/log/nginx/access.log main;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>ç®€å•ç½—åˆ—ä¸€ä¸‹å˜é‡çš„å«ä¹‰:</p>\n</blockquote>\n<ul>\n<li><code>$host</code> è®¿é—®åŸŸå</li>\n<li><code>$remote_addr</code> å®¢æˆ·ç«¯IPåœ°å€</li>\n<li><code>$time_local</code> è®¿é—®æ—¶é—´</li>\n<li><code>$status</code> è®¿é—®çŠ¶æ€ç </li>\n<li><code>$upstream_response_time</code> åº”ç”¨è¿”å›åˆ°Nginxçš„æ—¶é—´</li>\n<li><code>$request_time</code> è¯·æ±‚æ—¶é—´</li>\n<li><code>$http_referer</code> è¯·æ±‚æ¥æº</li>\n<li><code>$http_user_agent</code> è®¿é—®å®¢æˆ·ç«¯</li>\n<li><code>$http_x_forwarded_for</code> å®¢æˆ·ç«¯IPåœ°å€</li>\n<li><code>$body_bytes_sent</code> è¿”å›ç»™å®¢æˆ·ç«¯å¤§å°</li>\n</ul>\n<blockquote>\n<p>åœ¨serverä¸­ä¸ç”Ÿæ•ˆçš„é—®é¢˜</p>\n</blockquote>\n<ul>\n<li>åœ¨serverä¸­å¢åŠ  <code>access_log /var/log/nginx/access.log main;</code></li>\n</ul>\n<blockquote>\n<p>æ—¥æœŸæ˜¾ç¤ºé—®é¢˜</p>\n</blockquote>\n<ul>\n<li><p><code>[01/Jul/2020:03:25:17 +0800]  </code>å®˜æ–¹é»˜è®¤æ˜¯è¿™ç§</p>\n</li>\n<li><p>ä¿®æ”¹é»˜è®¤æ ¼å¼</p>\n</li>\n</ul>\n<figure class=\"highlight nginx\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"attribute\">log_format</span> main <span class=\"string\">'<span class=\"variable\">$host</span> - <span class=\"variable\">$remote_addr</span> - [<span class=\"variable\">$time_iso8601</span>] \"<span class=\"variable\">$request</span>\" '</span></span><br><span class=\"line\">                <span class=\"string\">'<span class=\"variable\">$status</span> <span class=\"variable\">$upstream_response_time</span> <span class=\"variable\">$request_time</span> \"<span class=\"variable\">$http_referer</span>\"'</span></span><br><span class=\"line\">                <span class=\"string\">'\"<span class=\"variable\">$http_user_agent</span>\" \"<span class=\"variable\">$http_x_forwarded_for</span>\" <span class=\"variable\">$body_bytes_sent</span> '</span>;</span><br><span class=\"line\"><span class=\"attribute\">access_log</span> /var/log/nginx/access.log main;</span><br></pre></td></tr></table></figure>\n\n\n\n<ul>\n<li>åœ¨serverä¸­å¢åŠ ä¸‹é¢ä»£ç </li>\n</ul>\n<figure class=\"highlight nginx\"><table><tr><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"><span class=\"section\">server</span> &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">\tif ($time_iso8601 ~ \"^(\\d&#123;4&#125;)-(\\d&#123;2&#125;)-(\\d&#123;2&#125;) (\\d&#123;2&#125;):(\\d&#123;2&#125;):(\\d&#123;2&#125;)\") &#123;</span><br><span class=\"line\">\t\t\t<span class=\"attribute\">set</span> <span class=\"variable\">$year</span> <span class=\"variable\">$1</span>;</span><br><span class=\"line\">\t\t\t<span class=\"attribute\">set</span> <span class=\"variable\">$month</span> <span class=\"variable\">$2</span>;</span><br><span class=\"line\">\t\t\t<span class=\"attribute\">set</span> <span class=\"variable\">$day</span> <span class=\"variable\">$3</span>;</span><br><span class=\"line\">\t\t\t<span class=\"attribute\">set</span> <span class=\"variable\">$hour</span> <span class=\"variable\">$4</span>;</span><br><span class=\"line\">\t\t\t<span class=\"attribute\">set</span> <span class=\"variable\">$minutes</span> <span class=\"variable\">$5</span>;</span><br><span class=\"line\">\t\t\t<span class=\"attribute\">set</span> <span class=\"variable\">$seconds</span> <span class=\"variable\">$6</span>;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n","categories":["Nginx"],"tags":["Nginx"]},{"title":"Centos7_jenkinséƒ¨ç½²","url":"/posts/1108772964/","content":"<blockquote>\n<p>è®°å½•æœ€è¿‘åœ¨Centos7ä¸Šé¢éƒ¨ç½²jenkensã€‚å®‰è£…çš„æ–¹æ³•æœ‰å¾ˆå¤šï¼Œä¸‹é¢é‡‡ç”¨æœ€ç®€å•çš„æ–¹å¼å®‰è£…ã€‚</p>\n</blockquote>\n<h2 id=\"å‚è€ƒæ–‡çŒ®\"><a href=\"#å‚è€ƒæ–‡çŒ®\" class=\"headerlink\" title=\"å‚è€ƒæ–‡çŒ®\"></a>å‚è€ƒæ–‡çŒ®</h2><ul>\n<li>åœ¨çº¿æ–‡æ¡£ <a href=\"https://jenkins.io/doc/\" target=\"_blank\" rel=\"noopener\">https://jenkins.io/doc/</a></li>\n<li>åè¯è§£é‡Šï¼š<ul>\n<li>CI</li>\n</ul>\n</li>\n</ul>\n<blockquote>\n<p>jenkins æ˜¯ä¸€ä¸ªåè°ƒè€…çš„èº«ä»½ï¼Œç®¡ç†å’Œåè°ƒäº†ä»£ç åº“ï¼Œä»£ç ä»“åº“ï¼Œä»£ç è¿è¡Œç¯å¢ƒç­‰ã€‚</p>\n</blockquote>\n<h2 id=\"jenkins-ç®€ä»‹\"><a href=\"#jenkins-ç®€ä»‹\" class=\"headerlink\" title=\"jenkins ç®€ä»‹\"></a>jenkins ç®€ä»‹</h2><blockquote>\n<p>Jenkinsæ˜¯ä¸€ä¸ªå¼€æºè½¯ä»¶é¡¹ç›®ï¼Œæ—¨åœ¨æä¾›ä¸€ä¸ªå¼€æ”¾æ˜“ç”¨çš„è½¯ä»¶å¹³å°ï¼Œä½¿è½¯ä»¶çš„æŒç»­é›†æˆå˜æˆå¯èƒ½ã€‚æŒç»­é›†æˆï¼ˆCIï¼‰å·²æˆä¸ºå½“å‰è®¸å¤šè½¯ä»¶å¼€å‘å›¢é˜Ÿåœ¨æ•´ä¸ªè½¯ä»¶å¼€å‘ç”Ÿå‘½å‘¨æœŸå†…ä¾§é‡äºä¿è¯ä»£ç è´¨é‡çš„å¸¸è§åšæ³•ã€‚å®ƒæ˜¯ä¸€ç§å®è·µï¼Œæ—¨åœ¨ç¼“å’Œå’Œç¨³å›ºè½¯ä»¶çš„æ„å»ºè¿‡ç¨‹ã€‚å¹¶ä¸”èƒ½å¤Ÿå¸®åŠ©æ‚¨çš„å¼€å‘å›¢é˜Ÿåº”å¯¹å¦‚ä¸‹æŒ‘æˆ˜ï¼š</p>\n</blockquote>\n<ul>\n<li>æŒç»­ã€è‡ªåŠ¨åœ°æ„å»º/æµ‹è¯•è½¯ä»¶é¡¹ç›®ã€‚</li>\n<li>ç›‘æ§ä¸€äº›å®šæ—¶æ‰§è¡Œçš„ä»»åŠ¡ã€‚</li>\n<li>é«˜åº¦å¯æ‰©å±•æ€§ã€å…¨çƒå¤§é‡å›¢é˜Ÿä½¿ç”¨ï¼Œå¹¶å…±äº«ä»£ç ã€‚</li>\n<li>åŸºäºæ’ä»¶ã€å¯ä»¥åšå‡ºéå¸¸å¤šæœ‰è¶£çš„äº‹æƒ…ã€‚</li>\n</ul>\n<p><img src=\"https://z201.oss-cn-shanghai.aliyuncs.com/JavaNote/jenkins/2.jpg\"> </p>\n<h2 id=\"å®‰è£éƒ¨ç½²\"><a href=\"#å®‰è£éƒ¨ç½²\" class=\"headerlink\" title=\"å®‰è£éƒ¨ç½²\"></a>å®‰è£éƒ¨ç½²</h2><a id=\"more\"></a>\n\n<blockquote>\n<p>å•å®ä¾‹éƒ¨ç½²</p>\n</blockquote>\n<h3 id=\"æ£€æŸ¥å½“å‰ç³»ç»Ÿç¯å¢ƒ\"><a href=\"#æ£€æŸ¥å½“å‰ç³»ç»Ÿç¯å¢ƒ\" class=\"headerlink\" title=\"æ£€æŸ¥å½“å‰ç³»ç»Ÿç¯å¢ƒ\"></a>æ£€æŸ¥å½“å‰ç³»ç»Ÿç¯å¢ƒ</h3><figure class=\"highlight sh\"><table><tr><td class=\"code\"><pre><span class=\"line\">[root@localhost jenkins]<span class=\"comment\"># cat /etc/os-release </span></span><br><span class=\"line\">NAME=<span class=\"string\">\"CentOS Linux\"</span></span><br><span class=\"line\">VERSION=<span class=\"string\">\"7 (Core)\"</span></span><br><span class=\"line\">ID=<span class=\"string\">\"centos\"</span></span><br><span class=\"line\">ID_LIKE=<span class=\"string\">\"rhel fedora\"</span></span><br><span class=\"line\">VERSION_ID=<span class=\"string\">\"7\"</span></span><br><span class=\"line\">PRETTY_NAME=<span class=\"string\">\"CentOS Linux 7 (Core)\"</span></span><br><span class=\"line\">ANSI_COLOR=<span class=\"string\">\"0;31\"</span></span><br><span class=\"line\">CPE_NAME=<span class=\"string\">\"cpe:/o:centos:centos:7\"</span></span><br><span class=\"line\">HOME_URL=<span class=\"string\">\"https://www.centos.org/\"</span></span><br><span class=\"line\">BUG_REPORT_URL=<span class=\"string\">\"https://bugs.centos.org/\"</span></span><br><span class=\"line\"></span><br><span class=\"line\">CENTOS_MANTISBT_PROJECT=<span class=\"string\">\"CentOS-7\"</span></span><br><span class=\"line\">CENTOS_MANTISBT_PROJECT_VERSION=<span class=\"string\">\"7\"</span></span><br><span class=\"line\">REDHAT_SUPPORT_PRODUCT=<span class=\"string\">\"centos\"</span></span><br><span class=\"line\">REDHAT_SUPPORT_PRODUCT_VERSION=<span class=\"string\">\"7\"</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"æ·»åŠ æºä»¥åŠå…¬é’¥\"><a href=\"#æ·»åŠ æºä»¥åŠå…¬é’¥\" class=\"headerlink\" title=\"æ·»åŠ æºä»¥åŠå…¬é’¥\"></a>æ·»åŠ æºä»¥åŠå…¬é’¥</h3><h4 id=\"æ›´æ–°å®‰è£…jenkensæº\"><a href=\"#æ›´æ–°å®‰è£…jenkensæº\" class=\"headerlink\" title=\"æ›´æ–°å®‰è£…jenkensæº\"></a>æ›´æ–°å®‰è£…jenkensæº</h4><figure class=\"highlight sh\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># yum æºå¯¼å…¥</span></span><br><span class=\"line\">sudo wget -O /etc/yum.repos.d/jenkins.repo https://pkg.jenkins.io/redhat-stable/jenkins.repo</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#å¯¼å…¥å¯†é’¥</span></span><br><span class=\"line\">sudo rpm --import https://pkg.jenkins.io/redhat-stable/jenkins.io.key</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#å®‰è£…</span></span><br><span class=\"line\">sudo yum install jenkins</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># æ‰‹åŠ¨ä¸‹è½½å®‰è£…åŒ…å®‰è£…</span></span><br><span class=\"line\">https://pkg.jenkins.io/redhat-stable/ <span class=\"comment\"># è¿™é‡Œé¢æ‰¾</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#æ£€æŸ¥å®‰è£…</span></span><br><span class=\"line\">whereis jenkins</span><br><span class=\"line\">&gt; jenkins: /usr/lib/jenkins</span><br><span class=\"line\"><span class=\"comment\"># æç¤ºä»¥ä¸Šå†…å®¹è¯´æ˜å®‰è£…æˆåŠŸ</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"ä¿®æ”¹jenkensé…ç½®ä¿¡æ¯\"><a href=\"#ä¿®æ”¹jenkensé…ç½®ä¿¡æ¯\" class=\"headerlink\" title=\"ä¿®æ”¹jenkensé…ç½®ä¿¡æ¯\"></a>ä¿®æ”¹jenkensé…ç½®ä¿¡æ¯</h3><figure class=\"highlight sh\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># ç¼–è¾‘jenkinsé…ç½®æ–‡ä»¶</span></span><br><span class=\"line\">vim /etc/sysconfig/jenkins</span><br><span class=\"line\"><span class=\"comment\"># è¿™é‡Œä¸»è¦ç¼–è¾‘ä¸¤ä¸ªå‚æ•° JENKINS_USER JENKINS_JAVA_OPTIONS</span></span><br><span class=\"line\"><span class=\"comment\"># JENKINS_USER jenkensæƒé™ç”¨æˆ·</span></span><br><span class=\"line\"><span class=\"comment\"># JENKINS_JAVA_OPTIONS jenkenså¯åŠ¨å‚æ•°ï¼Œè¿™é‡Œä¸»è¦è®¾ç½®å¯åŠ¨å†…å­˜ã€‚</span></span><br><span class=\"line\">JENKINS_USER=<span class=\"string\">\"root\"</span></span><br><span class=\"line\">JENKINS_JAVA_OPTIONS=<span class=\"string\">\"-server -Xms512m -Xmx1024m -XX:PermSize=256m -XX:MaxPermSize=512m  -Djava.awt.headless=true\"</span></span><br><span class=\"line\"><span class=\"comment\"># ä¿®æ”¹ç›®å½•æƒé™ å¦‚æœä½ ä¸æ˜¯ä½¿ç”¨rootè´¦å·,æˆ‘å·ä¸‹æ‡’ã€‚</span></span><br><span class=\"line\">chown -R root:root /var/lib/jenkins</span><br><span class=\"line\">chown -R root:root /var/cache/jenkins</span><br><span class=\"line\">chown -R root:root /var/<span class=\"built_in\">log</span>/jenkins</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"å¯åŠ¨junketsæ£€æŸ¥\"><a href=\"#å¯åŠ¨junketsæ£€æŸ¥\" class=\"headerlink\" title=\"å¯åŠ¨junketsæ£€æŸ¥\"></a>å¯åŠ¨junketsæ£€æŸ¥</h3><figure class=\"highlight sh\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#é‡è½½æ‰€æœ‰ä¿®æ”¹è¿‡çš„é…ç½®æ–‡ä»¶</span></span><br><span class=\"line\">sudo systemctl daemon-reload</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#å¯åŠ¨JenkinsæœåŠ¡</span></span><br><span class=\"line\">sudo systemctl start jenkins</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#ç”±äºJenkinsä¸æ˜¯Native Serviceï¼Œæ‰€ä»¥éœ€è¦ç”¨chkconfigå‘½ä»¤è€Œä¸æ˜¯systemctlå‘½ä»¤</span></span><br><span class=\"line\">sudo /sbin/chkconfig jenkins on</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"ç¬¬ä¸€æ¬¡å¯åŠ¨é…ç½®\"><a href=\"#ç¬¬ä¸€æ¬¡å¯åŠ¨é…ç½®\" class=\"headerlink\" title=\"ç¬¬ä¸€æ¬¡å¯åŠ¨é…ç½®\"></a>ç¬¬ä¸€æ¬¡å¯åŠ¨é…ç½®</h3><figure class=\"highlight sh\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># æŸ¥çœ‹å¯†ç </span></span><br><span class=\"line\">cat /var/lib/jenkins/secrets/initialAdminPassword</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"é…ç½®jenkens-jdk-mavenç¯å¢ƒ\"><a href=\"#é…ç½®jenkens-jdk-mavenç¯å¢ƒ\" class=\"headerlink\" title=\"é…ç½®jenkens jdk mavenç¯å¢ƒ\"></a>é…ç½®jenkens jdk mavenç¯å¢ƒ</h3><figure class=\"highlight sh\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># åœ¨ç³»ç»Ÿç¯å¢ƒä¸­å¢åŠ </span></span><br><span class=\"line\"><span class=\"comment\"># JAVA_HOME</span></span><br><span class=\"line\"><span class=\"comment\"># MAVEN_HOME </span></span><br><span class=\"line\"><span class=\"comment\"># å¦‚æœjdkæ˜¯é€šè¿‡yum å®‰è£…éœ€è¦é€šè¿‡llæ‰¾åˆ°jvmçš„å®‰è£…åœ°å€</span></span><br><span class=\"line\"><span class=\"comment\"># ll /usr/bin/javac -&gt; /etc/alternatives/javac</span></span><br><span class=\"line\"><span class=\"comment\"># ll /etc/alternatives/javac -&gt; /usr/lib/jvm/java-1.8.0-openjdk-1.8.0.292.b10-1.el7_9.x86_64/bin/javac</span></span><br><span class=\"line\"><span class=\"comment\">#ä¸¾ä¾‹å­</span></span><br><span class=\"line\">JAVA_HOME</span><br><span class=\"line\">/usr/lib/jvm/java-1.8.0-openjdk-1.8.0.292.b10-1.el7_9.x86_64</span><br><span class=\"line\">MAVEN_HOME</span><br><span class=\"line\">/opt/libhome/apache-maven-3.8.1</span><br><span class=\"line\">PATH</span><br><span class=\"line\"><span class=\"variable\">$PATH</span>:<span class=\"variable\">$JAVA_HOME</span>/bin:<span class=\"variable\">$MAVEN_HOME</span>/bin</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"é…ç½®ä¼ä¸šå¾®ä¿¡é€šçŸ¥\"><a href=\"#é…ç½®ä¼ä¸šå¾®ä¿¡é€šçŸ¥\" class=\"headerlink\" title=\"é…ç½®ä¼ä¸šå¾®ä¿¡é€šçŸ¥\"></a>é…ç½®ä¼ä¸šå¾®ä¿¡é€šçŸ¥</h2><blockquote>\n<p>å®‰è£…æ’ä»¶ <a href=\"https://plugins.jenkins.io/qy-wechat-notification\" target=\"_blank\" rel=\"noopener\">Qy Wechat Notification Plugin</a></p>\n</blockquote>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">å¦‚æœæ— æ³•å‘é€é€šçŸ¥æç¤ºjavax.net.ssl.SSLHandshakeException: No appropriate protocol (protocol is disabled or cipher suites are inappropriate</span><br><span class=\"line\">éœ€è¦ä¿®æ”¹$JRE&#x2F;lib&#x2F;security&#x2F;java.security</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>å»æ‰ä¸¤ä¸ªé…ç½®ä¿¡æ¯ <code>TLSv1 TLSv1.1</code></li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">jdk.tls.disabledAlgorithms&#x3D;SSLv3, TLSv1, RC4, DES, MD5withRSA, DH keySize &lt; 1024, \\</span><br><span class=\"line\">EC keySize &lt; 224, 3DES_EDE_CBC, anon, NULL</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"å‹æƒ…æç¤º\"><a href=\"#å‹æƒ…æç¤º\" class=\"headerlink\" title=\"å‹æƒ…æç¤º\"></a>å‹æƒ…æç¤º</h4><blockquote>\n<p>ä¸è¦é€‰æ‹©ç¤¾åŒºæ¨èæ’ä»¶å®‰è£…</p>\n</blockquote>\n<ul>\n<li><p>å› ä¸º <code>Jenkins</code> æ’ä»¶æœåŠ¡å™¨åœ¨å›½å¤–ï¼Œæ‰€ä»¥é€Ÿåº¦ä¸å¤ªç†æƒ³ã€‚æˆ‘ä»¬éœ€è¦æ›´æ¢ä¸ºæ¸…åå¤§å­¦çš„ <code>Jenkins</code> æ’ä»¶æºåï¼Œå†å®‰è£…æ’ä»¶ï¼Œ<strong>æ‰€ä»¥å…ˆä¸è¦ç‚¹å®‰è£…æ’ä»¶ã€‚</strong></p>\n</li>\n<li><p>æ›´æ¢æ–¹æ³•å¾ˆç®€å•ã€‚è¿›å…¥æœåŠ¡å™¨ï¼Œå°† <code>/var/lib/jenkins/updates/default.json</code> å†…çš„æ’ä»¶æºåœ°å€æ›¿æ¢æˆæ¸…åå¤§å­¦çš„æºåœ°å€ï¼Œå°† google æ›¿æ¢ä¸º baidu å³å¯ã€‚</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"code\"><pre><span class=\"line\">sed -i 's/http:\\/\\/updates.jenkins-ci.org\\/download/https:\\/\\/mirrors.tuna.tsinghua.edu.cn\\/jenkins/g' /var/lib/jenkins/updates/default.json &amp;&amp; sed -i 's/http:\\/\\/www.google.com/https:\\/\\/www.baidu.com/g' /var/lib/jenkins/updates/default.json</span><br></pre></td></tr></table></figure>\n\n</li>\n</ul>\n<h2 id=\"ä¿®æ”¹è¿è¡Œç«¯å£\"><a href=\"#ä¿®æ”¹è¿è¡Œç«¯å£\" class=\"headerlink\" title=\"ä¿®æ”¹è¿è¡Œç«¯å£\"></a>ä¿®æ”¹è¿è¡Œç«¯å£</h2><figure class=\"highlight sh\"><table><tr><td class=\"code\"><pre><span class=\"line\">vim /etc/sysconfig/jenkins</span><br><span class=\"line\"></span><br><span class=\"line\">JENKINS_PORT=<span class=\"string\">\"8080\"</span> //æ”¹æˆ JENKINS_PORT=<span class=\"string\">\"8088\"</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"åŸºç¡€å‘½ä»¤\"><a href=\"#åŸºç¡€å‘½ä»¤\" class=\"headerlink\" title=\"åŸºç¡€å‘½ä»¤\"></a>åŸºç¡€å‘½ä»¤</h2><ul>\n<li>å¯åŠ¨ã€é‡å¯ã€å…³é—­</li>\n</ul>\n<figure class=\"highlight sh\"><table><tr><td class=\"code\"><pre><span class=\"line\">[root@localhost jenkins]<span class=\"comment\">#  service jenkins start</span></span><br><span class=\"line\">[root@localhost jenkins]<span class=\"comment\">#  service jenkins restart</span></span><br><span class=\"line\">[root@localhost jenkins]<span class=\"comment\">#  service jenkins shutdown</span></span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>é”™è¯¯æç¤º</li>\n</ul>\n<figure class=\"highlight sh\"><table><tr><td class=\"code\"><pre><span class=\"line\">Starting jenkins (via systemctl):  Warning: jenkins.service changed on disk. Run <span class=\"string\">'systemctl daemon-reload'</span> to reload units.</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>è‹¥å‡ºç°ä¸Šè¿°é—®é¢˜ï¼Œæ‰§è¡Œã€‚</li>\n</ul>\n<figure class=\"highlight sh\"><table><tr><td class=\"code\"><pre><span class=\"line\">[root@localhost jenkins]<span class=\"comment\"># systemctl daemon-reload</span></span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>å¯åŠ¨jenkins</li>\n</ul>\n<figure class=\"highlight sh\"><table><tr><td class=\"code\"><pre><span class=\"line\">[root@localhost jenkins]<span class=\"comment\"># sudo service jenkins start</span></span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>è¿›å…¥jenkins ç½‘ç«™ï¼›ä¸€èˆ¬æ˜¯8080ç«¯å£ã€‚ç•Œé¢ä¼šè®©ä½ è¾“å…¥å¯†ç è¿›å…¥ã€‚</li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">[root@localhost jenkins]# cat &#x2F;var&#x2F;lib&#x2F;jenkins&#x2F;secrets&#x2F;initialAdminPassword</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>å®‰è£…æ’ä»¶,å¦‚æœå‡ºç°ä¸‹åˆ—é”™è¯¯ã€‚</li>\n</ul>\n<figure class=\"highlight sh\"><table><tr><td class=\"code\"><pre><span class=\"line\">An error occurred during installation: No such plugin: cloudbees-folder</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>å¯ä»¥ç›´æ¥è·³è¿‡ã€‚ç›´æ¥åˆ›å»ºç®¡ç†å¸å·è¿›å…¥ã€‚è¿™ä¸ªæ—¶å€™æ’ä»¶åˆ—è¡¨æ˜¯ç©ºçš„ã€‚åœ¨æ’ä»¶é«˜ä¸­æ›¿æ¢URLã€‚</li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">http:&#x2F;&#x2F;mirror.xmission.com&#x2F;jenkins&#x2F;updates&#x2F;update-center.json</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>end.</li>\n</ul>\n<h2 id=\"ä¿®æ”¹Jenkins-å·¥ä½œç©ºé–“ç›®éŒ„\"><a href=\"#ä¿®æ”¹Jenkins-å·¥ä½œç©ºé–“ç›®éŒ„\" class=\"headerlink\" title=\"ä¿®æ”¹Jenkins å·¥ä½œç©ºé–“ç›®éŒ„\"></a>ä¿®æ”¹Jenkins å·¥ä½œç©ºé–“ç›®éŒ„</h2><ul>\n<li>ç³»ç»Ÿè®¾ç½®</li>\n</ul>\n<p><img src=\"https://z201.oss-cn-shanghai.aliyuncs.com/JavaNote/jenkins/3.png\"></p>\n<ul>\n<li>è¿™é‡Œçš„å·¥ä½œç©ºé—´ç›®å½•æœ‰ä¸€ä¸ªç¯å¢ƒé…ç½®å˜é‡ã€‚${JENKINS_HOME}</li>\n<li>åœ¨ç³»ç»Ÿç¯å¢ƒå˜é‡ä¸­é…ç½®JENKINS_HOME æŒ‡å‘æ–°çš„å·¥ä½œç©ºé—´ã€‚</li>\n</ul>\n<h2 id=\"Jenkins-shellæƒé™é—®é¢˜ã€‚\"><a href=\"#Jenkins-shellæƒé™é—®é¢˜ã€‚\" class=\"headerlink\" title=\"Jenkins shellæƒé™é—®é¢˜ã€‚\"></a>Jenkins shellæƒé™é—®é¢˜ã€‚</h2><ul>\n<li>åœ¨æ‰§è¡Œshell è„šæœ¬çš„æ—¶å€™éœ€è¦ä¿®æ”¹æƒé™ï¼Œå¦‚æœä¸ä¿®æ”¹ä¼šå¯¼è‡´éƒ¨åˆ†æƒé™é—®é¢˜ã€‚</li>\n</ul>\n<figure class=\"highlight sh\"><table><tr><td class=\"code\"><pre><span class=\"line\">[root@localhost jenkins]<span class=\"comment\"># vim /etc/sysconfig/jenkins</span></span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>ä¿®æ”¹é…ç½®æ–‡ä»¶çš„ JENKINS_USER = â€œrootâ€</li>\n</ul>\n<h2 id=\"æ’ä»¶\"><a href=\"#æ’ä»¶\" class=\"headerlink\" title=\"æ’ä»¶\"></a>æ’ä»¶</h2><h3 id=\"Maven-Integration-plugin\"><a href=\"#Maven-Integration-plugin\" class=\"headerlink\" title=\"Maven Integration plugin\"></a>Maven Integration plugin</h3><blockquote>\n<p>ç”¨äºMavené¡¹ç›®æ„å»ºã€‚</p>\n</blockquote>\n<h3 id=\"Monitoring\"><a href=\"#Monitoring\" class=\"headerlink\" title=\"Monitoring\"></a>Monitoring</h3><blockquote>\n<p>ç›‘æ§Jenkinsæ‰€æ¶ˆè€—çš„ç³»ç»Ÿèµ„æºï¼Œå¦‚å†…å­˜ä½¿ç”¨ç­‰</p>\n</blockquote>\n<h3 id=\"Publish-Over-SSH\"><a href=\"#Publish-Over-SSH\" class=\"headerlink\" title=\"Publish Over SSH\"></a>Publish Over SSH</h3><blockquote>\n<p>è¿œç¨‹Shell</p>\n</blockquote>\n<h3 id=\"Email-Extersion-Plugin\"><a href=\"#Email-Extersion-Plugin\" class=\"headerlink\" title=\"Email Extersion Plugin\"></a><a href=\"https://wiki.jenkins-ci.org/display/JENKINS/Email-ext+plugin\" target=\"_blank\" rel=\"noopener\">Email Extersion Plugin</a></h3><blockquote>\n<p>é‚®ä»¶é€šçŸ¥</p>\n</blockquote>\n<h4 id=\"é‚®ç®±é…ç½®\"><a href=\"#é‚®ç®±é…ç½®\" class=\"headerlink\" title=\"é‚®ç®±é…ç½®\"></a>é‚®ç®±é…ç½®</h4><blockquote>\n<p>jenkins è‡ªå¸¦é‚®ç®±åŠŸèƒ½ï¼Œå¯ä»¥é€šè¿‡é‚®ç®±å‘é€ä»»åŠ¡æ„å»ºæ—¶çš„ä¿¡æ¯ã€‚</p>\n</blockquote>\n<p><img src=\"https://z201.oss-cn-shanghai.aliyuncs.com/JavaNote/jenkins/email.png\"> </p>\n<ul>\n<li>Jenkins URL æ˜¯å½“å‰jenkinsè®¿é—®åœ°å€ å¯ä»¥æ˜¯å†…ç½‘ä¹Ÿå¯ä»¥æ˜¯å¤–ç½‘ã€‚</li>\n</ul>\n<h4 id=\"é‚®ä»¶é€šçŸ¥\"><a href=\"#é‚®ä»¶é€šçŸ¥\" class=\"headerlink\" title=\"é‚®ä»¶é€šçŸ¥\"></a>é‚®ä»¶é€šçŸ¥</h4><ul>\n<li>SMTPæœåŠ¡å™¨<ul>\n<li>è¿™ä¸ªé‚®ä»¶å¸å·çš„è¿è¥å•†é…ç½®</li>\n<li>é…ç½®å®Œåå¯ä»¥æµ‹è¯•ã€‚</li>\n<li>å¦‚æœæ”¶åˆ°é‚®ä»¶è¯´æ˜é…ç½®æˆåŠŸã€‚</li>\n</ul>\n</li>\n</ul>\n","categories":["Linuxè¿ç»´"],"tags":["Centos7","Jenkins"]},{"title":"å·®ç¼ºè¡¥æ¼-Netty","url":"/posts/3959611604/","content":"<blockquote>\n<p>Nettyæ˜¯ä¸€æ¬¾ç”¨äºå¿«é€Ÿå¼€å‘é«˜æ€§èƒ½çš„ç½‘ç»œåº”ç”¨ç¨‹åºçš„Javaæ¡†æ¶ï¼Œæ­£æ˜¯å› ä¸ºæœ‰ Netty çš„å­˜åœ¨ï¼Œç½‘ç»œç¼–ç¨‹é¢†åŸŸ Java æ‰å¾—ä»¥ä¸ C++ å¹¶è‚©è€Œç«‹ã€‚</p>\n</blockquote>\n<ul>\n<li>Netty å®˜ç½‘ç»™å‡ºäº†æœ‰å…³ Netty çš„æ•´ä½“åŠŸèƒ½æ¨¡å—ç»“æ„</li>\n</ul>\n<p><img src=\"https://z201.oss-cn-shanghai.aliyuncs.com/JavaNote/20211116220629.png\"></p>\n<ul>\n<li>Coreæ ¸å¿ƒå±‚</li>\n</ul>\n<blockquote>\n<p>æä¾›åº•å±‚ç½‘ç»œé€šä¿¡æŠ½è±¡å’Œå®ç°ï¼Œå…¶ä¸­åŒ…æ‹¬äº†å¯æ‰©å±•çš„æ—¶é—´æ¨¡å‹ã€é€šä¿¡APIã€æ”¯æŒé›¶æ‹·è´çš„bufç­‰ã€‚</p>\n</blockquote>\n<ul>\n<li>Protocol Support åè®®æ”¯æŒå±‚</li>\n</ul>\n<blockquote>\n<p>åè®®æ”¯æŒå±‚åŸºæœ¬ä¸Šè¦†ç›–äº†ä¸»æµåè®®çš„ç¼–è§£ç å®ç°ï¼Œæ¯”å¦‚HTTPã€SSLã€WebSocket</p>\n</blockquote>\n<ul>\n<li>Transport Service ä¼ è¾“æœåŠ¡å±‚</li>\n</ul>\n<blockquote>\n<p>ä¼ è¾“æœåŠ¡å±‚æä¾›äº†ç½‘ç»œä¼ è¾“èƒ½åŠ›çš„å®šä¹‰å’Œå®ç°æ–¹æ³•ï¼Œæ”¯æŒ Socketã€HTTP éš§é“ç­‰ã€‚Netty å¯¹ TCPã€UDP ç­‰æ•°æ®ä¼ è¾“åšäº†æŠ½è±¡å’Œå°è£…</p>\n</blockquote>\n<h3 id=\"Nettyæµç¨‹\"><a href=\"#Nettyæµç¨‹\" class=\"headerlink\" title=\"Nettyæµç¨‹\"></a>Nettyæµç¨‹</h3><blockquote>\n<p>ä»åŠŸèƒ½ä¸Šç†è§£é¡ºåº</p>\n</blockquote>\n<ul>\n<li>å¯åŠ¨æœåŠ¡ -&gt; æ„å»ºè¿æ¥ -&gt; æ¥å—æ•°æ® -&gt; ä¸šåŠ¡å¤„ç† -&gt; å‘é€æ•°æ® -&gt; æ–­å¼€è¿æ¥ -&gt; å…³é—­æœåŠ¡</li>\n</ul>\n<h4 id=\"æ¡ˆä¾‹\"><a href=\"#æ¡ˆä¾‹\" class=\"headerlink\" title=\"æ¡ˆä¾‹\"></a>æ¡ˆä¾‹</h4><ul>\n<li>åˆå§‹åŒ–çº¿ç¨‹æ± </li>\n<li>åˆå§‹åŒ–channel</li>\n<li>ç»‘å®šç«¯å£å¹¶å¯åŠ¨</li>\n</ul>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">@Sharable</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">EchoServerHandler</span> <span class=\"keyword\">extends</span> <span class=\"title\">ChannelInboundHandlerAdapter</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">channelRead</span><span class=\"params\">(ChannelHandlerContext ctx, Object msg)</span> </span>&#123;</span><br><span class=\"line\">        ctx.write(msg);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">channelReadComplete</span><span class=\"params\">(ChannelHandlerContext ctx)</span> </span>&#123;</span><br><span class=\"line\">        ctx.flush();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">exceptionCaught</span><span class=\"params\">(ChannelHandlerContext ctx, Throwable cause)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"comment\">// Close the connection when an exception is raised.</span></span><br><span class=\"line\">        cause.printStackTrace();</span><br><span class=\"line\">        ctx.close();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * Echoes back any received data from a client.</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">final</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">EchoServer</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> <span class=\"keyword\">boolean</span> SSL = System.getProperty(<span class=\"string\">\"ssl\"</span>) != <span class=\"keyword\">null</span>;</span><br><span class=\"line\">    <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> <span class=\"keyword\">int</span> PORT = Integer.parseInt(System.getProperty(<span class=\"string\">\"port\"</span>, <span class=\"string\">\"8007\"</span>));</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String[] args)</span> <span class=\"keyword\">throws</span> Exception </span>&#123;</span><br><span class=\"line\">        <span class=\"comment\">// Configure SSL.</span></span><br><span class=\"line\">        <span class=\"keyword\">final</span> SslContext sslCtx;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (SSL) &#123;</span><br><span class=\"line\">            SelfSignedCertificate ssc = <span class=\"keyword\">new</span> SelfSignedCertificate();</span><br><span class=\"line\">            sslCtx = SslContextBuilder.forServer(ssc.certificate(), ssc.privateKey()).build();</span><br><span class=\"line\">        &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">            sslCtx = <span class=\"keyword\">null</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// Configure the server.</span></span><br><span class=\"line\">        <span class=\"comment\">// åœ¨å®˜æ–¹çš„exampleä¸­é»˜è®¤æ˜¯Reactorä¸»ä»å¤šçº¿ç¨‹æ¨¡å¼</span></span><br><span class=\"line\">        <span class=\"comment\">// 1.é…ç½®çº¿ç¨‹æ± </span></span><br><span class=\"line\">        EventLoopGroup bossGroup = <span class=\"keyword\">new</span> NioEventLoopGroup(<span class=\"number\">1</span>);</span><br><span class=\"line\">        EventLoopGroup workerGroup = <span class=\"keyword\">new</span> NioEventLoopGroup();</span><br><span class=\"line\">        <span class=\"keyword\">final</span> EchoServerHandler serverHandler = <span class=\"keyword\">new</span> EchoServerHandler();</span><br><span class=\"line\">        <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">            ServerBootstrap b = <span class=\"keyword\">new</span> ServerBootstrap();</span><br><span class=\"line\">            b.group(bossGroup, workerGroup)</span><br><span class=\"line\">             .channel(NioServerSocketChannel<span class=\"class\">.<span class=\"keyword\">class</span>) // 2.åˆå§‹åŒ–<span class=\"title\">channel</span>ç±»å‹</span></span><br><span class=\"line\"><span class=\"class\">             .<span class=\"title\">option</span>(<span class=\"title\">ChannelOption</span>.<span class=\"title\">SO_BACKLOG</span>, 100) // 2.1.è®¾ç½®<span class=\"title\">channel</span>å‚æ•°</span></span><br><span class=\"line\"><span class=\"class\">             .<span class=\"title\">handler</span>(<span class=\"title\">new</span> <span class=\"title\">LoggingHandler</span>(<span class=\"title\">LogLevel</span>.<span class=\"title\">INFO</span>))</span></span><br><span class=\"line\"><span class=\"class\">              // æ³¨å†Œ<span class=\"title\">channelhandler</span>ï¼Œåœ¨<span class=\"title\">netty</span>ä¸­é€šè¿‡<span class=\"title\">ChannelPipeline</span> å»æ³¨å†Œå¤šä¸ª <span class=\"title\">ChannelHandler</span></span></span><br><span class=\"line\"><span class=\"class\">             .<span class=\"title\">childHandler</span>(<span class=\"title\">new</span> <span class=\"title\">ChannelInitializer</span>&lt;<span class=\"title\">SocketChannel</span>&gt;() </span>&#123;</span><br><span class=\"line\">                 <span class=\"meta\">@Override</span></span><br><span class=\"line\">                 <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">initChannel</span><span class=\"params\">(SocketChannel ch)</span> <span class=\"keyword\">throws</span> Exception </span>&#123;</span><br><span class=\"line\">                     ChannelPipeline p = ch.pipeline();</span><br><span class=\"line\">                     <span class=\"keyword\">if</span> (sslCtx != <span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">                         p.addLast(sslCtx.newHandler(ch.alloc()));</span><br><span class=\"line\">                     &#125;</span><br><span class=\"line\">                     <span class=\"comment\">//p.addLast(new LoggingHandler(LogLevel.INFO));</span></span><br><span class=\"line\">                     p.addLast(serverHandler);</span><br><span class=\"line\">                 &#125;</span><br><span class=\"line\">             &#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"comment\">// Start the server. </span></span><br><span class=\"line\">            <span class=\"comment\">// 3.å¯åŠ¨ é€šè¿‡bind() æ–¹æ³•ä¼šçœŸæ­£è§¦å‘å¯åŠ¨ï¼Œsync() æ–¹æ³•åˆ™ä¼šé˜»å¡</span></span><br><span class=\"line\">            ChannelFuture f = b.bind(PORT).sync();</span><br><span class=\"line\">            <span class=\"comment\">// Wait until the server socket is closed.</span></span><br><span class=\"line\">            f.channel().closeFuture().sync();</span><br><span class=\"line\">        &#125; <span class=\"keyword\">finally</span> &#123;</span><br><span class=\"line\">            <span class=\"comment\">// Shut down all event loops to terminate all threads.</span></span><br><span class=\"line\">            bossGroup.shutdownGracefully();</span><br><span class=\"line\">            workerGroup.shutdownGracefully();</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<a id=\"more\"></a>\n\n<h4 id=\"bindæ–¹æ³•\"><a href=\"#bindæ–¹æ³•\" class=\"headerlink\" title=\"bindæ–¹æ³•\"></a>bindæ–¹æ³•</h4><figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">private</span> ChannelFuture <span class=\"title\">doBind</span><span class=\"params\">(<span class=\"keyword\">final</span> SocketAddress localAddress)</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">// 1.è°ƒç”¨ initAndRegister()æ–¹æ³•åˆå§‹åŒ–Channel,æ¥å—è¿”å›åˆ°ChannelFutureã€‚</span></span><br><span class=\"line\">    <span class=\"keyword\">final</span> ChannelFuture regFuture = initAndRegister();</span><br><span class=\"line\">  <span class=\"comment\">// 2.è°ƒç”¨ ChannelFuture.channelæ–¹æ³•ï¼Œè¿”å›Channelã€‚</span></span><br><span class=\"line\">    <span class=\"keyword\">final</span> Channel channel = regFuture.channel();</span><br><span class=\"line\">  <span class=\"comment\">// 3.è°ƒç”¨ ChannelFuture.causeæ–¹æ³•åˆ¤æ–­ initAndRegister()æ˜¯å¦å­˜åœ¨å¼‚å¸¸ã€‚å­˜åœ¨å¼‚å¸¸åˆ™ç›´æ¥è¿”å›</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (regFuture.cause() != <span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> regFuture;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"comment\">// 4.è°ƒç”¨ ChannelFuture.isDoneæ–¹æ³•ï¼Œåˆ¤æ–­initAndRegister()æ–¹æ³•æ˜¯å¦æ‰§è¡Œå®Œæˆã€‚</span></span><br><span class=\"line\">    <span class=\"comment\">// \t å¦‚æœæ‰§è¡Œå®Œæˆåˆ™è°ƒç”¨bind0æ–¹æ³•ï¼Œå¦‚æœæ²¡æœ‰æ‰§è¡Œå®Œæˆï¼ŒChannelFuture æ·»åŠ ä¸€ä¸ªChannelFutureListenerå›è°ƒç›‘å¬ï¼Œå½“initAndRegister()æ–¹æ³•æ‰§è¡Œå®Œæˆåå›è°ƒoperationCompleteæ–¹æ³•ï¼Œè°ƒç”¨è°ƒç”¨ ChannelFuture.cause()æ–¹æ³•åˆ¤æ–­initAndRegister()æ˜¯å¦å­˜åœ¨å¼‚å¸¸ï¼Œæ— å¼‚å¸¸åœ¨æ‰§è¡Œbind0æ–¹æ³•ã€‚</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (regFuture.isDone()) &#123;</span><br><span class=\"line\">        <span class=\"comment\">// At this point we know that the registration was complete and successful.</span></span><br><span class=\"line\">        ChannelPromise promise = channel.newPromise();</span><br><span class=\"line\">        doBind0(regFuture, channel, localAddress, promise);</span><br><span class=\"line\">        <span class=\"keyword\">return</span> promise;</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">        <span class=\"comment\">// Registration future is almost always fulfilled already, but just in case it's not.</span></span><br><span class=\"line\">        <span class=\"keyword\">final</span> PendingRegistrationPromise promise = <span class=\"keyword\">new</span> PendingRegistrationPromise(channel);</span><br><span class=\"line\">        regFuture.addListener(<span class=\"keyword\">new</span> ChannelFutureListener() &#123;</span><br><span class=\"line\">            <span class=\"meta\">@Override</span></span><br><span class=\"line\">            <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">operationComplete</span><span class=\"params\">(ChannelFuture future)</span> <span class=\"keyword\">throws</span> Exception </span>&#123;</span><br><span class=\"line\">                Throwable cause = future.cause();</span><br><span class=\"line\">                <span class=\"keyword\">if</span> (cause != <span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">                    <span class=\"comment\">// Registration on the EventLoop failed so fail the ChannelPromise directly to not cause an</span></span><br><span class=\"line\">                    <span class=\"comment\">// IllegalStateException once we try to access the EventLoop of the Channel.</span></span><br><span class=\"line\">                    promise.setFailure(cause);</span><br><span class=\"line\">                &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">                    <span class=\"comment\">// Registration was successful, so set the correct executor to use.</span></span><br><span class=\"line\">                    <span class=\"comment\">// See https://github.com/netty/netty/issues/2586</span></span><br><span class=\"line\">                    promise.registered();</span><br><span class=\"line\"></span><br><span class=\"line\">                    doBind0(regFuture, channel, localAddress, promise);</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">        <span class=\"keyword\">return</span> promise;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"Channel\"><a href=\"#Channel\" class=\"headerlink\" title=\"Channel\"></a>Channel</h4><blockquote>\n<p>Nettyç½‘ç»œé€šä¿¡ç»„ä»¶ã€ç”¨äºæ‰§è¡Œç½‘ç»œI/Oæ“ä½œã€‚</p>\n</blockquote>\n<ul>\n<li><p>æä¾›ç½‘ç»œç›¸å…³é…ç½®ä¿¡æ¯</p>\n</li>\n<li><p>Channelå‚æ•°</p>\n<ul>\n<li><p>SO_KEEPALIVE </p>\n<ul>\n<li>è®¾ç½®ä¸º true ä»£è¡¨å¯ç”¨äº† TCP SO_KEEPALIVE å±æ€§ï¼ŒTCP ä¼šä¸»åŠ¨æ¢æµ‹è¿æ¥çŠ¶æ€ï¼Œå³è¿æ¥ä¿æ´»</li>\n</ul>\n</li>\n<li><p>SO_BACKLOG </p>\n<ul>\n<li>å·²å®Œæˆä¸‰æ¬¡æ¡æ‰‹çš„è¯·æ±‚é˜Ÿåˆ—æœ€å¤§é•¿åº¦ï¼ŒåŒä¸€æ—¶åˆ»æœåŠ¡ç«¯å¯èƒ½ä¼šå¤„ç†å¤šä¸ªè¿æ¥ï¼Œåœ¨é«˜å¹¶å‘æµ·é‡è¿æ¥çš„åœºæ™¯ä¸‹ï¼Œè¯¥å‚æ•°åº”é€‚å½“è°ƒå¤§</li>\n</ul>\n</li>\n<li><p>TCP_NODELAY </p>\n<ul>\n<li>Netty é»˜è®¤æ˜¯ trueï¼Œè¡¨ç¤ºç«‹å³å‘é€æ•°æ®ã€‚å¦‚æœè®¾ç½®ä¸º false è¡¨ç¤ºå¯ç”¨ Nagle ç®—æ³•ï¼Œè¯¥ç®—æ³•ä¼šå°† TCP ç½‘ç»œæ•°æ®åŒ…ç´¯ç§¯åˆ°ä¸€å®šé‡æ‰ä¼šå‘é€ï¼Œè™½ç„¶å¯ä»¥å‡å°‘æŠ¥æ–‡å‘é€çš„æ•°é‡ï¼Œä½†æ˜¯ä¼šé€ æˆä¸€å®šçš„æ•°æ®å»¶è¿Ÿã€‚Netty ä¸ºäº†æœ€å°åŒ–æ•°æ®ä¼ è¾“çš„å»¶è¿Ÿï¼Œé»˜è®¤ç¦ç”¨äº† Nagle ç®—æ³•</li>\n</ul>\n</li>\n<li><p>SO_SNDBUF TCP </p>\n<ul>\n<li>æ•°æ®å‘é€ç¼“å†²åŒºå¤§å°</li>\n</ul>\n</li>\n<li><p>SO_RCVBUF </p>\n<ul>\n<li>TCPæ•°æ®æ¥æ”¶ç¼“å†²åŒºå¤§å°ï¼ŒTCPæ•°æ®æ¥æ”¶ç¼“å†²åŒºå¤§å°</li>\n</ul>\n</li>\n<li><p>SO_LINGER </p>\n<ul>\n<li>è®¾ç½®å»¶è¿Ÿå…³é—­çš„æ—¶é—´ï¼Œç­‰å¾…ç¼“å†²åŒºä¸­çš„æ•°æ®å‘é€å®Œæˆ </li>\n</ul>\n</li>\n<li><p>CONNECT_TIMEOUT_MILLIS  </p>\n<ul>\n<li>è¿æ¥è¶…æ—¶æ—¶é—´</li>\n</ul>\n</li>\n</ul>\n</li>\n<li><p>å¸¸ç”¨çš„Channelç±»å‹</p>\n<ul>\n<li><p>NioSocketChannelï¼Œå¼‚æ­¥çš„å®¢æˆ·ç«¯ TCP Socket è¿æ¥ã€‚</p>\n</li>\n<li><p>NioServerSocketChannelï¼Œå¼‚æ­¥çš„æœåŠ¡å™¨ç«¯ TCP Socket è¿æ¥ã€‚</p>\n</li>\n<li><p>NioDatagramChannelï¼Œå¼‚æ­¥çš„ UDP è¿æ¥ã€‚</p>\n</li>\n<li><p>NioSctpChannelï¼Œå¼‚æ­¥çš„å®¢æˆ·ç«¯ Sctp è¿æ¥ã€‚</p>\n</li>\n<li><p>NioSctpServerChannelï¼Œå¼‚æ­¥çš„ Sctp æœåŠ¡å™¨ç«¯è¿æ¥ï¼Œè¿™äº›é€šé“æ¶µç›–äº† UDP å’Œ TCP ç½‘ç»œ IO ä»¥åŠæ–‡ä»¶ IOã€‚</p>\n</li>\n</ul>\n</li>\n</ul>\n<h4 id=\"EventLoop\"><a href=\"#EventLoop\" class=\"headerlink\" title=\"EventLoop\"></a>EventLoop</h4><blockquote>\n<p>EventLoopå¹¶ä¸æ˜¯Nettyç‹¬æœ‰çš„ï¼Œå®ƒæ˜¯ä¸€ç§<strong>äº‹ä»¶ç­‰å¾…å’Œå¤„ç†çš„ç¨‹åºæ¨¡å‹</strong>ï¼Œå¯ä»¥è§£å†³å¤šçº¿ç¨‹èµ„æºæ¶ˆè€—é«˜çš„é—®é¢˜ã€‚</p>\n</blockquote>\n<ul>\n<li>åœ¨ Netty ä¸­ EventLoop å¯ä»¥ç†è§£ä¸º Reactor çº¿ç¨‹æ¨¡å‹çš„äº‹ä»¶å¤„ç†å¼•æ“ï¼Œæ¯ä¸ª EventLoop çº¿ç¨‹éƒ½ç»´æŠ¤ä¸€ä¸ª Selector é€‰æ‹©å™¨å’Œä»»åŠ¡é˜Ÿåˆ— taskQueueã€‚å®ƒä¸»è¦è´Ÿè´£å¤„ç† I/O äº‹ä»¶ã€æ™®é€šä»»åŠ¡å’Œå®šæ—¶ä»»åŠ¡ã€‚Netty ä¸­æ¨èä½¿ç”¨ NioEventLoop ä½œä¸ºå®ç°ç±»ã€‚</li>\n</ul>\n<p><img src=\"https://z201.oss-cn-shanghai.aliyuncs.com/JavaNote/20211213143517.png\"></p>\n<ul>\n<li>ä¸Šå›¾æ˜¯EventLoopå¸¸è§æ¨¡å‹<ul>\n<li>æ¯æ¬¡å‡ºç°äº‹ä»¶çš„æ—¶å€™ï¼ŒEventloopä¼šå°†äº‹ä»¶å­˜æ”¾åœ¨Event Queueäº‹ä»¶é˜Ÿåˆ—ä¸­ï¼Œé€šè¿‡è½®è¯¢å–å‡ºäº‹ä»¶æ‰§è¡Œæˆ–è€…å°†äº‹ä»¶åˆ†å‘ç»™å“åº”çš„äº‹ä»¶ç›‘å¬æ‰§è¡Œï¼Œäº‹ä»¶æ‰§è¡Œçš„æ–¹å¼é€šå¸¸åˆ†ä¸ºç«‹å³æ‰§è¡Œã€å»¶åæ‰§è¡Œã€å®šæœŸæ‰§è¡Œå‡ ç§ã€‚</li>\n</ul>\n</li>\n</ul>\n<h5 id=\"runæ–¹æ³•\"><a href=\"#runæ–¹æ³•\" class=\"headerlink\" title=\"runæ–¹æ³•\"></a>runæ–¹æ³•</h5><figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">protected</span> <span class=\"keyword\">void</span> <span class=\"title\">run</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (;;) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">                <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">                    <span class=\"keyword\">switch</span> (selectStrategy.calculateStrategy(selectNowSupplier, hasTasks())) &#123;</span><br><span class=\"line\">                    <span class=\"keyword\">case</span> SelectStrategy.CONTINUE:</span><br><span class=\"line\">                        <span class=\"keyword\">continue</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">                    <span class=\"keyword\">case</span> SelectStrategy.BUSY_WAIT:</span><br><span class=\"line\">                        <span class=\"comment\">// fall-through to SELECT since the busy-wait is not supported with NIO</span></span><br><span class=\"line\"></span><br><span class=\"line\">                    <span class=\"keyword\">case</span> SelectStrategy.SELECT: <span class=\"comment\">// å¤„ç†selectäº‹ä»¶</span></span><br><span class=\"line\">                        <span class=\"comment\">// è½®è®­ioäº‹ä»¶</span></span><br><span class=\"line\">                        select(wakenUp.getAndSet(<span class=\"keyword\">false</span>));</span><br><span class=\"line\"></span><br><span class=\"line\">                        <span class=\"comment\">// 'wakenUp.compareAndSet(false, true)' is always evaluated</span></span><br><span class=\"line\">                        <span class=\"comment\">// before calling 'selector.wakeup()' to reduce the wake-up</span></span><br><span class=\"line\">                        <span class=\"comment\">// overhead. (Selector.wakeup() is an expensive operation.)</span></span><br><span class=\"line\">                        <span class=\"comment\">//</span></span><br><span class=\"line\">                        <span class=\"comment\">// However, there is a race condition in this approach.</span></span><br><span class=\"line\">                        <span class=\"comment\">// The race condition is triggered when 'wakenUp' is set to</span></span><br><span class=\"line\">                        <span class=\"comment\">// true too early.</span></span><br><span class=\"line\">                        <span class=\"comment\">//</span></span><br><span class=\"line\">                        <span class=\"comment\">// 'wakenUp' is set to true too early if:</span></span><br><span class=\"line\">                        <span class=\"comment\">// 1) Selector is waken up between 'wakenUp.set(false)' and</span></span><br><span class=\"line\">                        <span class=\"comment\">//    'selector.select(...)'. (BAD)</span></span><br><span class=\"line\">                        <span class=\"comment\">// 2) Selector is waken up between 'selector.select(...)' and</span></span><br><span class=\"line\">                        <span class=\"comment\">//    'if (wakenUp.get()) &#123; ... &#125;'. (OK)</span></span><br><span class=\"line\">                        <span class=\"comment\">//</span></span><br><span class=\"line\">                        <span class=\"comment\">// In the first case, 'wakenUp' is set to true and the</span></span><br><span class=\"line\">                        <span class=\"comment\">// following 'selector.select(...)' will wake up immediately.</span></span><br><span class=\"line\">                        <span class=\"comment\">// Until 'wakenUp' is set to false again in the next round,</span></span><br><span class=\"line\">                        <span class=\"comment\">// 'wakenUp.compareAndSet(false, true)' will fail, and therefore</span></span><br><span class=\"line\">                        <span class=\"comment\">// any attempt to wake up the Selector will fail, too, causing</span></span><br><span class=\"line\">                        <span class=\"comment\">// the following 'selector.select(...)' call to block</span></span><br><span class=\"line\">                        <span class=\"comment\">// unnecessarily.</span></span><br><span class=\"line\">                        <span class=\"comment\">//</span></span><br><span class=\"line\">                        <span class=\"comment\">// To fix this problem, we wake up the selector again if wakenUp</span></span><br><span class=\"line\">                        <span class=\"comment\">// is true immediately after selector.select(...).</span></span><br><span class=\"line\">                        <span class=\"comment\">// It is inefficient in that it wakes up the selector for both</span></span><br><span class=\"line\">                        <span class=\"comment\">// the first case (BAD - wake-up required) and the second case</span></span><br><span class=\"line\">                        <span class=\"comment\">// (OK - no wake-up required).</span></span><br><span class=\"line\"></span><br><span class=\"line\">                        <span class=\"keyword\">if</span> (wakenUp.get()) &#123;</span><br><span class=\"line\">                            selector.wakeup();</span><br><span class=\"line\">                        &#125;</span><br><span class=\"line\">                        <span class=\"comment\">// fall through</span></span><br><span class=\"line\">                    <span class=\"keyword\">default</span>:</span><br><span class=\"line\">                    &#125;</span><br><span class=\"line\">                &#125; <span class=\"keyword\">catch</span> (IOException e) &#123;</span><br><span class=\"line\">                    <span class=\"comment\">// If we receive an IOException here its because the Selector is messed up. Let's rebuild</span></span><br><span class=\"line\">                    <span class=\"comment\">// the selector and retry. https://github.com/netty/netty/issues/8566</span></span><br><span class=\"line\">                    rebuildSelector0();</span><br><span class=\"line\">                    handleLoopException(e);</span><br><span class=\"line\">                    <span class=\"keyword\">continue</span>;</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">                cancelledKeys = <span class=\"number\">0</span>;</span><br><span class=\"line\">                needsToSelectAgain = <span class=\"keyword\">false</span>;</span><br><span class=\"line\">                <span class=\"keyword\">final</span> <span class=\"keyword\">int</span> ioRatio = <span class=\"keyword\">this</span>.ioRatio;</span><br><span class=\"line\">                <span class=\"keyword\">if</span> (ioRatio == <span class=\"number\">100</span>) &#123;</span><br><span class=\"line\">                    <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">                        processSelectedKeys(); <span class=\"comment\">// å¤„ç†ioäº‹ä»¶</span></span><br><span class=\"line\">                    &#125; <span class=\"keyword\">finally</span> &#123;</span><br><span class=\"line\">                        <span class=\"comment\">// Ensure we always run tasks.</span></span><br><span class=\"line\">                        runAllTasks(); <span class=\"comment\">// å¤„ç†æ‰€æœ‰ä»»åŠ¡</span></span><br><span class=\"line\">                    &#125;</span><br><span class=\"line\">                &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">                    <span class=\"keyword\">final</span> <span class=\"keyword\">long</span> ioStartTime = System.nanoTime();</span><br><span class=\"line\">                    <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">                        processSelectedKeys(); <span class=\"comment\">// å¤„ç†ioäº‹ä»¶</span></span><br><span class=\"line\">                    &#125; <span class=\"keyword\">finally</span> &#123;</span><br><span class=\"line\">                        <span class=\"comment\">// Ensure we always run tasks.</span></span><br><span class=\"line\">                        <span class=\"keyword\">final</span> <span class=\"keyword\">long</span> ioTime = System.nanoTime() - ioStartTime;</span><br><span class=\"line\">                        runAllTasks(ioTime * (<span class=\"number\">100</span> - ioRatio) / ioRatio);</span><br><span class=\"line\">                    &#125;</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125; <span class=\"keyword\">catch</span> (Throwable t) &#123;</span><br><span class=\"line\">                handleLoopException(t);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            <span class=\"comment\">// Always handle shutdown even if the loop processing threw an exception.</span></span><br><span class=\"line\">            <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">                <span class=\"keyword\">if</span> (isShuttingDown()) &#123;</span><br><span class=\"line\">                    closeAll();</span><br><span class=\"line\">                    <span class=\"keyword\">if</span> (confirmShutdown()) &#123;</span><br><span class=\"line\">                        <span class=\"keyword\">return</span>;</span><br><span class=\"line\">                    &#125;</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125; <span class=\"keyword\">catch</span> (Throwable t) &#123;</span><br><span class=\"line\">                handleLoopException(t);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br></pre></td></tr></table></figure>\n\n\n\n<h5 id=\"EventLoopè‰¯å¥½çš„å®è·µ\"><a href=\"#EventLoopè‰¯å¥½çš„å®è·µ\" class=\"headerlink\" title=\"EventLoopè‰¯å¥½çš„å®è·µ\"></a>EventLoopè‰¯å¥½çš„å®è·µ</h5><ul>\n<li>ç½‘ç»œè¿æ¥å»ºç«‹è¿‡ç¨‹ä¸­ä¸‰æ¬¡æ¡æ‰‹ã€å®‰å…¨è®¤è¯çš„è¿‡ç¨‹ä¼šæ¶ˆè€—ä¸å°‘æ—¶é—´ã€‚å»ºè®®ä½¿ç”¨Reactoræ··åˆæ¨¡å¼é‡‡ç”¨ Boss å’Œ Worker ä¸¤ä¸ª EventLoopGroupã€‚</li>\n<li>Reactor çº¿ç¨‹æ¨¡å¼é€‚åˆå¤„ç†è€—æ—¶çŸ­çš„ä»»åŠ¡åœºæ™¯ï¼Œè€—æ—¶è¾ƒé•¿çš„ ChannelHandler å¯ä»¥è€ƒè™‘ç»´æŠ¤ä¸€ä¸ªä¸šåŠ¡çº¿ç¨‹æ± ã€‚é¿å… ChannelHandler é˜»å¡è€Œé€ æˆ EventLoop ä¸å¯ç”¨ã€‚</li>\n<li>å¦‚æœä¸šåŠ¡é€»è¾‘æ‰§è¡Œæ—¶é—´è¾ƒçŸ­ï¼Œå»ºè®®ç›´æ¥åœ¨ ChannelHandler ä¸­æ‰§è¡Œã€‚å‡å°‘ç³»ç»Ÿå¤æ‚åº¦ã€‚</li>\n<li>å°½é‡å°‘çš„ChannelHandlerï¼Œå°½é‡å°†ä¸šåŠ¡ç‹¬ç«‹å‡ºå»ã€‚</li>\n</ul>\n<h4 id=\"ChannelPipeline\"><a href=\"#ChannelPipeline\" class=\"headerlink\" title=\"ChannelPipeline\"></a>ChannelPipeline</h4><blockquote>\n<p>å®é™…ç¼–ç è¿‡ç¨‹ä¸­ï¼Œä¸šåŠ¡å¤„ç†é€»è¾‘æ˜¯ ChannelPipeline ä¸­æ‰€å®šä¹‰çš„ ChannelHandler å®Œæˆçš„ï¼ŒNetty æœåŠ¡ç¼–æ’å±‚çš„æ ¸å¿ƒç»„ä»¶ ChannelPipeline å’Œ ChannelHandler ä¸ºç”¨æˆ·æä¾›äº† I/O äº‹ä»¶ç®¡ç†ã€‚</p>\n</blockquote>\n<ul>\n<li>ä»ChannelPipelineæ³¨é‡Šä¸Šé¢æŠ“çš„å›¾</li>\n</ul>\n<p><img src=\"https://z201.oss-cn-shanghai.aliyuncs.com/JavaNote/20211213213842.png\"></p>\n<ul>\n<li>channelPipelineé‡‡ç”¨è´£ä»»é“¾æ²¡äº‹ï¼ŒInboundå…¥ç«™ã€outboundå‡ºç«™ã€‚</li>\n</ul>\n<p><img src=\"https://z201.oss-cn-shanghai.aliyuncs.com/JavaNote/20211213220334.png\"></p>\n<ul>\n<li>æ¯ä¸ª Channel ä¼šç»‘å®šä¸€ä¸ª ChannelPipelineï¼Œæ¯ä¸€ä¸ª ChannelPipeline éƒ½åŒ…å«å¤šä¸ªChannelHandlerContextï¼Œæ‰€æœ‰ ChannelHandlerContext ä¹‹é—´ç»„æˆäº†åŒå‘é“¾è¡¨ã€‚ChannelPipeline çš„åŒå‘é“¾è¡¨åˆ†åˆ«ç»´æŠ¤äº† HeadContext å’Œ TailContext çš„å¤´å°¾èŠ‚ç‚¹ã€‚è‡ªå®šä¹‰çš„ ChannelHandler ä¼šæ’å…¥åˆ° Head å’Œ Tail ä¹‹é—´ã€‚</li>\n<li>ChannelHandlerContextåŒ…å«äº†ChannelHandler ç”Ÿå‘½å‘¨æœŸçš„æ‰€æœ‰äº‹ä»¶ã€‚å…¥ç«™çš„æ—¶å€™æ˜¯ä»headContextå¾€tailContextæ‰§è¡Œï¼Œå‡ºç«™çš„æ—¶å€™tailContextå¾€headContextæ‰§è¡Œã€‚</li>\n</ul>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\">serverBootstrap.childHandler(<span class=\"keyword\">new</span> ChannelInitializer&lt;NioSocketChannel&gt;() &#123;</span><br><span class=\"line\">         <span class=\"meta\">@Override</span></span><br><span class=\"line\">         <span class=\"function\"><span class=\"keyword\">protected</span> <span class=\"keyword\">void</span> <span class=\"title\">initChannel</span><span class=\"params\">(NioSocketChannel ch)</span></span>&#123;</span><br><span class=\"line\">             ChannelPipeline channelPipeline = ch.pipeline();</span><br><span class=\"line\">             channelPipeline.addLast(<span class=\"string\">\"idleHandler\"</span>, <span class=\"keyword\">new</span> ServerIdleCheckHandler());</span><br><span class=\"line\">             channelPipeline.addLast(<span class=\"string\">\"frameDecoder\"</span>,<span class=\"keyword\">new</span> FrameDecoder());</span><br><span class=\"line\">             channelPipeline.addLast(<span class=\"string\">\"frameEncoder\"</span>,<span class=\"keyword\">new</span> FrameEncoder());</span><br><span class=\"line\">             channelPipeline.addLast(<span class=\"string\">\"protocolDecoder\"</span>,<span class=\"keyword\">new</span> ProtocolDecoder());</span><br><span class=\"line\">             channelPipeline.addLast(<span class=\"string\">\"protocolEncoder\"</span>,<span class=\"keyword\">new</span> ProtocolEncoder());</span><br><span class=\"line\">             channelPipeline.addLast(<span class=\"string\">\"loggingHandler\"</span>,<span class=\"keyword\">new</span> LoggingHandler(LogLevel.INFO));</span><br><span class=\"line\">             channelPipeline.addLast(<span class=\"string\">\"protocolProcessHandler\"</span>,<span class=\"keyword\">new</span> ServerProtocolProcessHandler());</span><br><span class=\"line\">         &#125;</span><br><span class=\"line\">     &#125;);</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>è¿è¡Œæ•ˆæœ</li>\n</ul>\n<figure class=\"highlight sh\"><table><tr><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">22:10:57 [work-3-1] FrameDecoder: running</span><br><span class=\"line\">22:10:57 [work-3-1] FrameEncoder: running</span><br><span class=\"line\">22:10:57 [work-3-1] ProtocolDecoder: running</span><br><span class=\"line\">22:10:57 [work-3-1] ServerProtocolProcessHandler: running</span><br><span class=\"line\">22:10:57 [work-3-1] ProtocolEncoder: running</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"ChannelPipelineå¼‚å¸¸å¤„ç†\"><a href=\"#ChannelPipelineå¼‚å¸¸å¤„ç†\" class=\"headerlink\" title=\"ChannelPipelineå¼‚å¸¸å¤„ç†\"></a>ChannelPipelineå¼‚å¸¸å¤„ç†</h5><ul>\n<li>piplelineæ˜¯è´£ä»»é“¾æ¨¡å¼ï¼Œæ¨èåœ¨è‡ªå®šä¹‰handleræœ«ç«¯æ·»åŠ åŒä¸€çš„å¼‚å¸¸å¤„ç†å™¨ã€‚æ ¹æ®å¼‚å¸¸ä¿¡æ¯å¤„ç†é€»è¾‘ã€‚</li>\n</ul>\n<h4 id=\"ByteBuf\"><a href=\"#ByteBuf\" class=\"headerlink\" title=\"ByteBuf\"></a>ByteBuf</h4><blockquote>\n<p>Nettyä¸­çš„æ•°æ®å®¹å™¨ï¼ŒJava Nioä¸­ä¹Ÿæä¾›äº†ByteBufferä½†æ˜¯ä½¿ç”¨å¤æ‚ã€‚</p>\n</blockquote>\n<h4 id=\"Zero-Copy\"><a href=\"#Zero-Copy\" class=\"headerlink\" title=\"Zero-Copy\"></a>Zero-Copy</h4><blockquote>\n<p><strong>Netty</strong> çš„<code>Zero-copy</code> ,é›¶æ‹·è´æ˜¯ä¸€ä¸ªè€³ç†Ÿèƒ½è¯¦çš„è¯è¯­ï¼Œåœ¨ Linuxã€Kafkaã€RocketMQ ç­‰çŸ¥åçš„äº§å“ä¸­éƒ½æœ‰ä½¿ç”¨ï¼Œé€šå¸¸ç”¨äºæå‡ I/O æ€§èƒ½ã€‚</p>\n</blockquote>\n<h4 id=\"Keepalive\"><a href=\"#Keepalive\" class=\"headerlink\" title=\"Keepalive\"></a>Keepalive</h4><blockquote>\n<p>keepaliveå°±æ˜¯å¿ƒè·³ï¼Œä¸€ä¸ªäººçš„å¿ƒè·³è¯æ˜äººè¿˜æ´»ç€ï¼Œé‚£ä¹ˆåœ¨ç½‘ç»œé€šä¿¡çš„åŒæ–¹å¦‚ä½•è¯æ˜å¯¹ç«¯è¿˜æ´»ç€ç€ï¼Œä¸¤ä¸ªæœåŠ¡ä¹‹é—´ä½¿ç”¨å¿ƒè·³æ¥æ£€æµ‹å¯¹æ–¹æ˜¯å¦è¿˜æ´»ç€ã€‚</p>\n</blockquote>\n<h4 id=\"Nettyä¸­çš„è®¾è®¡æ¨¡å¼\"><a href=\"#Nettyä¸­çš„è®¾è®¡æ¨¡å¼\" class=\"headerlink\" title=\"Nettyä¸­çš„è®¾è®¡æ¨¡å¼\"></a>Nettyä¸­çš„è®¾è®¡æ¨¡å¼</h4><ul>\n<li>å•ä¾‹  ReadTimeoutException#INSTANCE</li>\n<li>å·¥å‚ ReflectiveChannelFactory</li>\n<li>ç­–ç•¥ EventExecutorChooserFactory</li>\n<li>è£…é¥°å™¨ WrappedByteBuf</li>\n<li>æ¨¡ç‰ˆ AbstractTrafficShapingHandler</li>\n<li>è´£ä»»é“¾ ChannelPipeline  ChannelHandler</li>\n<li>è§‚å¯Ÿè€… ChannelFuture#addListener</li>\n</ul>\n<h3 id=\"æ‰©å±•\"><a href=\"#æ‰©å±•\" class=\"headerlink\" title=\"æ‰©å±•\"></a>æ‰©å±•</h3><h4 id=\"è‰¯å¥½çš„å®è·µ\"><a href=\"#è‰¯å¥½çš„å®è·µ\" class=\"headerlink\" title=\"è‰¯å¥½çš„å®è·µ\"></a>è‰¯å¥½çš„å®è·µ</h4><ul>\n<li>é€šè¿‡ä¿®æ”¹<code>çº¿ç¨‹å</code>æ–¹ä¾¿æˆ‘ä»¬åœ¨debugæˆ–è€…å¼‚å¸¸è¿½è¸ª,é€šè¿‡NioEventLoopGroupçš„æ„é€ æ–¹æ³•æ¥ä¿®æ”¹åç§°</li>\n</ul>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\">EventLoopGroup bossGroup = <span class=\"keyword\">new</span> NioEventLoopGroup(<span class=\"number\">0</span>,<span class=\"keyword\">new</span> DefaultThreadFactory(<span class=\"string\">\"boss\"</span>));</span><br><span class=\"line\">EventLoopGroup workerGroup = <span class=\"keyword\">new</span> NioEventLoopGroup(,<span class=\"keyword\">new</span> DefaultThreadFactory(<span class=\"string\">\"work\"</span>));</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>ä¿®æ”¹<code>Handler</code>åç§°ï¼Œå¦‚æœä¸è®¾ç½®Handlerçš„åç§°ï¼Œä¼šä½¿ç”¨é»˜è®¤çš„ç±»åã€‚æ·»åŠ åˆ°piplelineåˆ°æ—¶å€™æŒ‡å®šåå­—ã€‚</li>\n</ul>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"> channelPipeline.addLast(<span class=\"string\">\"idleHandler\"</span>, <span class=\"keyword\">new</span> ServerIdleCheckHandler());</span><br><span class=\"line\">channelPipeline.addLast(<span class=\"string\">\"frameDecoder\"</span>,<span class=\"keyword\">new</span> FrameDecoder());</span><br><span class=\"line\"> channelPipeline.addLast(<span class=\"string\">\"frameEncoder\"</span>,<span class=\"keyword\">new</span> FrameEncoder());</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>æ—¥å¿—,è¿™é‡Œä»Nettyè‡ªå¸¦çš„LoggingHandlerè·Ÿè¸ªæºç ,è¿™é‡Œå¯ä»¥çœ‹åˆ°ä¼˜å…ˆä½¿ç”¨çš„æ˜¯SLF4Jã€‚ä½†æ˜¯éœ€è¦æ‰‹åŠ¨å¼•å…¥ç›¸åº”çš„jarä¾èµ–ã€‚</li>\n</ul>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">static</span> InternalLoggerFactory <span class=\"title\">newDefaultFactory</span><span class=\"params\">(String name)</span> </span>&#123;</span><br><span class=\"line\">        InternalLoggerFactory f;</span><br><span class=\"line\">        <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">            f = <span class=\"keyword\">new</span> Slf4JLoggerFactory(<span class=\"keyword\">true</span>);</span><br><span class=\"line\">            f.newInstance(name).debug(<span class=\"string\">\"Using SLF4J as the default logging framework\"</span>);</span><br><span class=\"line\">        &#125; <span class=\"keyword\">catch</span> (Throwable ignore1) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">                f = Log4JLoggerFactory.INSTANCE;</span><br><span class=\"line\">                f.newInstance(name).debug(<span class=\"string\">\"Using Log4J as the default logging framework\"</span>);</span><br><span class=\"line\">            &#125; <span class=\"keyword\">catch</span> (Throwable ignore2) &#123;</span><br><span class=\"line\">                <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">                    f = Log4J2LoggerFactory.INSTANCE;</span><br><span class=\"line\">                    f.newInstance(name).debug(<span class=\"string\">\"Using Log4J2 as the default logging framework\"</span>);</span><br><span class=\"line\">                &#125; <span class=\"keyword\">catch</span> (Throwable ignore3) &#123;</span><br><span class=\"line\">                    f = JdkLoggerFactory.INSTANCE;</span><br><span class=\"line\">                    f.newInstance(name).debug(<span class=\"string\">\"Using java.util.logging as the default logging framework\"</span>);</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> f;</span><br><span class=\"line\">    &#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>åœ¨ä¸åŒçš„å¹³å°åˆ‡æ¢Nio nativeå®ç°,è¿™é‡Œéœ€è¦æ³¨æ„å¼€å‘ç¯å¢ƒå’Œç”Ÿäº§ç¯å¢ƒã€‚åœ¨ç”Ÿäº§ç¯å¢ƒè¿˜éœ€è¦æ³¨æ„æƒé™é—®é¢˜ã€å¹¶ä¸”å‡†å¥½å·nativeçš„åº“ã€‚</li>\n</ul>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// mac </span></span><br><span class=\"line\">EventLoopGroup bossGroup = <span class=\"keyword\">new</span> KQueueEventLoopGroup(<span class=\"number\">0</span>,<span class=\"keyword\">new</span> DefaultThreadFactory(<span class=\"string\">\"boss\"</span>));</span><br><span class=\"line\">EventLoopGroup workerGroup = <span class=\"keyword\">new</span> KQueueEventLoopGroup(<span class=\"number\">0</span>,<span class=\"keyword\">new</span> DefaultThreadFactory(<span class=\"string\">\"work\"</span>));</span><br><span class=\"line\"><span class=\"comment\">// linxu </span></span><br><span class=\"line\">EventLoopGroup bossGroup = <span class=\"keyword\">new</span> EpollEventLoopGroup(<span class=\"number\">0</span>,<span class=\"keyword\">new</span> DefaultThreadFactory(<span class=\"string\">\"boss\"</span>));</span><br><span class=\"line\">EventLoopGroup workerGroup = <span class=\"keyword\">new</span> EpollEventLoopGroup(<span class=\"number\">0</span>,<span class=\"keyword\">new</span> DefaultThreadFactory(<span class=\"string\">\"work\"</span>));</span><br><span class=\"line\"><span class=\"comment\">// æ³¨æ„å¼€å‘ç¯å¢ƒä¸ç”Ÿäº§ç¯å¢ƒ,</span></span><br></pre></td></tr></table></figure>\n\n\n\n<h4 id=\"ä¸ºä»€ä¹ˆè¦ä½¿ç”¨nettyè€Œä¸ä½¿ç”¨Jdkè‡ªå¸¦çš„NIO\"><a href=\"#ä¸ºä»€ä¹ˆè¦ä½¿ç”¨nettyè€Œä¸ä½¿ç”¨Jdkè‡ªå¸¦çš„NIO\" class=\"headerlink\" title=\"ä¸ºä»€ä¹ˆè¦ä½¿ç”¨nettyè€Œä¸ä½¿ç”¨Jdkè‡ªå¸¦çš„NIO\"></a>ä¸ºä»€ä¹ˆè¦ä½¿ç”¨nettyè€Œä¸ä½¿ç”¨Jdkè‡ªå¸¦çš„NIO</h4><blockquote>\n<p>æ›´å¥½çš„apiã€æ›´åŠ ç¨³å®šã€å¯æ‰©å±•æ€§</p>\n</blockquote>\n<ul>\n<li>ç›¸æ¯”nio,nettyåšçš„æ›´å¤šï¼Œåšçš„æ›´å¥½ã€‚</li>\n<li>ä½¿ç”¨jdk nioï¼Œæˆ‘ä»¬ä½¿ç”¨ JDK NIO ç¼–ç¨‹éœ€è¦äº†è§£å¾ˆå¤šå¤æ‚çš„æ¦‚å¿µï¼Œæ¯”å¦‚ Channelsã€Selectorsã€Socketsã€Buffers ç­‰ã€è¿˜éœ€è¦è§£å†³æ²¾åŒ…ã€åŠåŒ…çš„é—®é¢˜ï¼Œè¿˜éœ€è¦åšå¤§é‡çš„å®šåˆ¶åŒ–éœ€æ±‚ã€‚ç½‘ç»œæœ¬èº«å°±å¾ˆå¤æ‚ï¼Œæ¯”å¦‚çŸ­çº¿é‡è¿ã€å¿ƒè·³ã€‚</li>\n<li>nettyè§£å†³äº†å¤§é‡nioçš„bug,æ¯”å¦‚selectç©ºè½¬å¯¼è‡´cpu 100%ï¼Œä½¿ç”¨nettyå¯ä»¥å¾ˆå¥½çš„è§„é¿å¤§é‡å­˜åœ¨çš„é—®é¢˜ï¼Œæ¯•ç«Ÿjdkä¹Ÿæ˜¯äººå†™çš„ã€‚</li>\n<li>nettyåœ¨æ‰©å±•æ€§ä¸Šï¼Œåœ¨çº¿ç¨‹æ¨¡å‹å¯ä»¥é€šè¿‡å‚æ•°é…ç½®é€‰æ‹©çº¿ç¨‹æ¨¡å‹ã€‚</li>\n<li>JDKçš„NIOé»˜è®¤æ˜¯æ°´å¹³è§¦å‘ï¼ŒNettyæ˜¯è¾¹ç¼˜è§¦å‘ï¼ˆé»˜è®¤ï¼‰å’Œæ°´å¹³è§¦å‘å¯ä»¥åˆ‡æ¢ã€‚</li>\n<li>Nettyå®ç°çš„åƒåœ¾å›æ”¶æ›´å°‘ã€æ€§èƒ½æ›´å¥½ã€‚</li>\n</ul>\n<h4 id=\"ç»å…¸çš„ä¸‰ç§I-Oæ¨¡å¼\"><a href=\"#ç»å…¸çš„ä¸‰ç§I-Oæ¨¡å¼\" class=\"headerlink\" title=\"ç»å…¸çš„ä¸‰ç§I/Oæ¨¡å¼\"></a>ç»å…¸çš„ä¸‰ç§I/Oæ¨¡å¼</h4><blockquote>\n<p>BIOï¼ˆé˜»å¡I/Oï¼‰ã€NIO(éé˜»å¡I/O)ã€AIO(å¼‚æ­¥I/O)</p>\n</blockquote>\n<ul>\n<li>é˜»å¡äºéé˜»å¡<ul>\n<li>é˜»å¡æƒ…å†µä¸‹ï¼Œæ²¡æœ‰æ•°æ®ä¼ è¾“è¿‡æ¥æ—¶ï¼Œè¯»æ“ä½œä¼šé˜»å¡ä¸€ç›´ç­‰å¾…åˆ°æœ‰æ•°æ®ï¼Œç¼“å†²åŒºå†™æ»¡çš„æ—¶å€™ï¼Œå†™åšæ“ä¹Ÿä¼šé˜»å¡ã€‚éé˜»å¡é‡åˆ°è¿™ç§æƒ…å†µéƒ½æ˜¯ç›´æ¥è¿”å›ã€‚</li>\n</ul>\n</li>\n<li>åŒæ­¥äºå¼‚æ­¥<ul>\n<li>æ•°æ®å‡†å¤‡å°±ç»ªéœ€è¦è‡ªå·±å»è¯»å–å°±æ˜¯åŒæ­¥ï¼Œæ•°æ®å°±ç»ªç›´æ¥è¯»å–å¥½å›è°ƒç»™ç¨‹åºå°±æ˜¯å¼‚æ­¥ã€‚</li>\n</ul>\n</li>\n</ul>\n<h5 id=\"nettyå¦‚ä½•å®ç°ä¸‰ç§I-Oæ¨¡å¼\"><a href=\"#nettyå¦‚ä½•å®ç°ä¸‰ç§I-Oæ¨¡å¼\" class=\"headerlink\" title=\"nettyå¦‚ä½•å®ç°ä¸‰ç§I/Oæ¨¡å¼\"></a>nettyå¦‚ä½•å®ç°ä¸‰ç§I/Oæ¨¡å¼</h5><ul>\n<li>BIOåœ¨nettyä¸­ä¹Ÿå«OIOå’ŒAIOä¸€èµ·æ›¾ç»éƒ½æ”¯æŒè¿‡ã€‚ç°åœ¨Nettyä»…æ”¯æŒNIOã€‚</li>\n</ul>\n<h5 id=\"nioä¸€å®šä¼˜äºbioå—\"><a href=\"#nioä¸€å®šä¼˜äºbioå—\" class=\"headerlink\" title=\"nioä¸€å®šä¼˜äºbioå—\"></a>nioä¸€å®šä¼˜äºbioå—</h5><ul>\n<li>åœ¨è¿æ¥æ•°å°‘ã€å¹¶å‘ä½çš„åœºæ™¯ä¸‹ï¼ŒBIOæ€§èƒ½å¹¶ä¸è¾“NIOã€‚</li>\n</ul>\n<h5 id=\"ä»€ä¹ˆæ˜¯æ°´å¹³è§¦å‘ã€ä»€ä¹ˆæ˜¯è¾¹ç¼˜è§¦å‘\"><a href=\"#ä»€ä¹ˆæ˜¯æ°´å¹³è§¦å‘ã€ä»€ä¹ˆæ˜¯è¾¹ç¼˜è§¦å‘\" class=\"headerlink\" title=\"ä»€ä¹ˆæ˜¯æ°´å¹³è§¦å‘ã€ä»€ä¹ˆæ˜¯è¾¹ç¼˜è§¦å‘\"></a>ä»€ä¹ˆæ˜¯æ°´å¹³è§¦å‘ã€ä»€ä¹ˆæ˜¯è¾¹ç¼˜è§¦å‘</h5><blockquote>\n<p>è¾¹ç¼˜è§¦å‘ç›¸å½“äºé«˜é€Ÿæ¨¡å¼ï¼Œç†è®ºä¸Šæ•ˆç‡æ›´é«˜ï¼Œä½†æ˜¯å¤æ‚åº¦ä¹Ÿé«˜ï¼Œæ‰€ä»¥ç°åœ¨å¤§å¤šåº”ç”¨ï¼ˆRedisç­‰ï¼‰è¿˜æ˜¯é»˜è®¤æ°´å¹³è§¦å‘ï¼Œå¦‚æœè¿½æ±‚è¦æ›´å¥½çš„æ€§èƒ½ã€åŒæ—¶æœ‰ä¿¡å¿ƒç¼–ç å¥½ï¼Œå¯ä»¥å°è¯•ä½¿ç”¨è¾¹ç¼˜è§¦å‘ï¼Œä¾‹å¦‚nginxã€‚è¾¹ç¼˜è§¦å‘åªæ”¯æŒéé˜»å¡æ¨¡å¼ã€‚</p>\n</blockquote>\n<ul>\n<li>å½“è¢«ç›‘æ§çš„æ–‡ä»¶æœ‰å¯è¯»å†™äº‹ä»¶å‘ç”Ÿæ—¶ï¼Œepoll_wait()ä¼šé€šçŸ¥å¤„ç†ç¨‹åºå»è¯»å†™ï¼Œå¦‚æœè¿™æ¬¡æ²¡æœ‰æŠŠæ•°æ®ä¸€æ¬¡æ€§å…¨éƒ¨è¯»å†™å®Œçš„è¯ï¼Œæ°´å¹³è§¦å‘ï¼šé‚£ä¹ˆä¸‹æ¬¡è°ƒç”¨ epoll_wait()æ—¶é€šçŸ¥ä½ ä¸Šæ¬¡æ²¡è¯»å†™å®Œï¼Œå¦‚æœä¸€ç›´ä¸å¤„ç†å®ƒä¼šä¸€ç›´é€šçŸ¥ä½ ï¼›è¾¹ç¼˜è§¦å‘ï¼šä¸‹æ¬¡è°ƒç”¨ epoll_wait()çš„æ—¶å€™ä¸ä¼šé€šçŸ¥ä½ ï¼Œä¹Ÿå°±æ˜¯åªé€šçŸ¥ä¸€æ¬¡ï¼ŒçŸ¥é“è¯¥æ–‡ä»¶ä¸Šå‡ºç°ç¬¬äºŒæ¬¡å¯è¯»å†™äº‹ä»¶æ‰ä¼šé€šçŸ¥ï¼Œæ•ˆç‡æ¯”æ°´å¹³è§¦å‘è¦é«˜</li>\n</ul>\n<h4 id=\"Nettyå¯¹Reactorçš„æ”¯æŒ\"><a href=\"#Nettyå¯¹Reactorçš„æ”¯æŒ\" class=\"headerlink\" title=\"Nettyå¯¹Reactorçš„æ”¯æŒ\"></a>Nettyå¯¹Reactorçš„æ”¯æŒ</h4><blockquote>\n<p>nioåœ¨nettyä¸­çš„æ˜¯ç”±reactorå®ç°çš„ï¼ŒReactoræ˜¯ä¸€ç§å¼€å‘æ¨¡å¼,åœ¨nettyä¸­Reactoræœ‰ä¸‰ç§æ¨¡å¼ã€‚</p>\n</blockquote>\n<ul>\n<li><strong>å•çº¿ç¨‹æ¨¡å‹</strong>ï¼šEventLoopGroupåªåŒ…å«ä¸€ä¸ªEventLoopï¼ŒBosså’ŒWorkerä½¿ç”¨åŒä¸€ä¸ªEventLoopGroup</li>\n<li><strong>å¤šçº¿ç¨‹æ¨¡å‹</strong>ï¼šEventLoopGroupåŒ…å«å¤šä¸ªEventLoopï¼ŒBosså’ŒWorkerä½¿ç”¨åŒä¸€ä¸ªEventLoopGroup</li>\n<li><strong>ä¸»ä»å¤šçº¿ç¨‹æ¨¡å‹</strong>ï¼šEventLoopGroupåŒ…å«å¤šä¸ªEventLoopï¼ŒBossæ˜¯ä¸»Reactorï¼ŒWorkeræ˜¯ä»Reactorï¼Œå®ƒä»¬åˆ†åˆ«ä½¿ç”¨ä¸åŒçš„EventLoopGroupï¼Œä¸»Reactorè´Ÿè´£æ–°çš„ç½‘ç»œè¿æ¥Channelåˆ›å»ºï¼Œç„¶åæŠŠChannelæ³¨å†Œåˆ°ä»Reactor</li>\n</ul>\n<h5 id=\"Reactorå•çº¿ç¨‹æ¨¡å¼\"><a href=\"#Reactorå•çº¿ç¨‹æ¨¡å¼\" class=\"headerlink\" title=\"Reactorå•çº¿ç¨‹æ¨¡å¼\"></a>Reactorå•çº¿ç¨‹æ¨¡å¼</h5><ul>\n<li>Reactorå•çº¿ç¨‹æ¨¡å¼æ‰€æœ‰çš„I/Oæ“ä½œéƒ½ç”±ä¸€ä¸ªçº¿ç¨‹å®Œæˆã€‚ä»…éœ€è¦å¯åŠ¨ä¸€ä¸ªNioEventLoopGroupã€‚</li>\n</ul>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\">EventLoopGroup group = <span class=\"keyword\">new</span> NioEventLoopGroup(<span class=\"number\">1</span>);</span><br><span class=\"line\">ServerBootstrap b = <span class=\"keyword\">new</span> ServerBootstrap();</span><br><span class=\"line\">b.group(group)</span><br></pre></td></tr></table></figure>\n\n<p>![image-20211120161222982](/Users/zengqingfeng/Library/Application Support/typora-user-images/image-20211120161222982.png)</p>\n<ul>\n<li>ä¸€ä¸ªçº¿ç¨‹æ”¯æŒçš„è¿æ¥æ•°æ˜¯æœ‰é™çš„ï¼Œæ€§èƒ½æ–¹é¢cpuå®¹æ˜“è·‘æ»¡ã€‚</li>\n<li>å½“å¤šä¸ªäº‹ä»¶åŒæ—¶è§¦å‘çš„æ—¶å€™ï¼Œå®¹æ˜“å‡ºç°æŸ±å¡çš„æƒ…å†µï¼Œä¼šå¯¼è‡´æ¶ˆæ¯çš„ç§¯å‹ã€å®¢æˆ·ç«¯è¯·æ±‚è¶…æ—¶ã€‚</li>\n<li>çº¿ç¨‹åœ¨å¤„ç†I/Oäº‹ä»¶ï¼ŒSelectæ— æ³•å¤„ç†å…¶ä»–æ“ä½œï¼Œæ¯”å¦‚å»ºç«‹è¿æ¥ã€äº‹ä»¶åˆ†å‘ç­‰æ“ä½œã€‚é•¿æ—¶é—´çš„çº¿ç¨‹æ»¡è´Ÿè½½ï¼Œå®¹æ˜“å¯¼è‡´æœåŠ¡èŠ‚ç‚¹ä¸å¯ç”¨ã€‚</li>\n</ul>\n<h5 id=\"éä¸»ä»Reactorå¤šçº¿ç¨‹æ¨¡å¼\"><a href=\"#éä¸»ä»Reactorå¤šçº¿ç¨‹æ¨¡å¼\" class=\"headerlink\" title=\"éä¸»ä»Reactorå¤šçº¿ç¨‹æ¨¡å¼\"></a>éä¸»ä»Reactorå¤šçº¿ç¨‹æ¨¡å¼</h5><ul>\n<li>ç”±äºReactorå‡ºç°çš„ä¸¥é‡çš„æ€§èƒ½é—®é¢˜ï¼Œå› æ­¤å‡ºç°äº†å¤šçº¿ç¨‹æ¨¡å‹ï¼Œåœ¨åˆ›å»ºNioEventLoopGroupçš„æ—¶å€™å¯ä»¥ä¸æŒ‡å®šå¤§å°ï¼Œé»˜è®¤æ˜¯2 * cpuçš„çº¿ç¨‹æ•°é‡ï¼Œä¹Ÿå¯ä»¥æ‰‹åŠ¨è®¾ç½®å›ºå®šçš„çº¿ç¨‹æ•°ã€‚</li>\n</ul>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\">EventLoopGroup group = <span class=\"keyword\">new</span> NioEventLoopGroup();</span><br><span class=\"line\">ServerBootstrap b = <span class=\"keyword\">new</span> ServerBootstrap();</span><br><span class=\"line\">b.group(group)</span><br></pre></td></tr></table></figure>\n\n<p>![image-20211120161554909](/Users/zengqingfeng/Library/Application Support/typora-user-images/image-20211120161554909.png)</p>\n<h5 id=\"ä¸»ä»Reactorå¤šçº¿ç¨‹æ¨¡å¼\"><a href=\"#ä¸»ä»Reactorå¤šçº¿ç¨‹æ¨¡å¼\" class=\"headerlink\" title=\"ä¸»ä»Reactorå¤šçº¿ç¨‹æ¨¡å¼\"></a>ä¸»ä»Reactorå¤šçº¿ç¨‹æ¨¡å¼</h5><ul>\n<li>ç°åœ¨ä¸»æµçš„å¼€å‘ä¸»è¦é‡‡ç”¨ä¸»ä»å¤šçº¿ç¨‹æ¨¡å¼,Boosæ˜¯ä¸»Reactor,workeræ˜¯ä»Reactorã€‚å®ƒä»¬åˆ†åˆ«ä½¿ç”¨ä¸åŒçš„NioEventLoopGroupï¼Œä¸»Reactorè´Ÿè´£å¤„ç†ON_ACCEPT,ç„¶åæŠŠChannelæ³¨å†Œåˆ°Reactorä¸Šé¢ï¼Œä»Reactorè´Ÿè´£Channelç”Ÿå‘½å‘¨æœŸå†…çš„IOäº‹ä»¶ã€‚</li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">EventLoopGroup bossGroup &#x3D; new NioEventLoopGroup();</span><br><span class=\"line\">EventLoopGroup workerGroup &#x3D; new NioEventLoopGroup();</span><br><span class=\"line\">ServerBootstrap b &#x3D; new ServerBootstrap();</span><br><span class=\"line\">b.group(bossGroup, workerGroup)</span><br></pre></td></tr></table></figure>\n\n<p>![image-20211120161838884](/Users/zengqingfeng/Library/Application Support/typora-user-images/image-20211120161838884.png)</p>\n<h4 id=\"c10k\"><a href=\"#c10k\" class=\"headerlink\" title=\"c10k\"></a>c10k</h4><blockquote>\n<p>å®ƒçš„æ„æ€æ˜¯ä¸€å°æœºå™¨è¦ç»´æŠ¤ 1 ä¸‡ä¸ªè¿æ¥ï¼Œå°±è¦åˆ›å»º 1 ä¸‡ä¸ªè¿›ç¨‹æˆ–è€…çº¿ç¨‹ï¼Œé‚£ä¹ˆæ“ä½œç³»ç»Ÿæ˜¯æ— æ³•æ‰¿å—çš„ã€‚</p>\n</blockquote>\n<h4 id=\"selectã€pollã€epoll\"><a href=\"#selectã€pollã€epoll\" class=\"headerlink\" title=\"selectã€pollã€epoll\"></a>selectã€pollã€epoll</h4><table>\n<thead>\n<tr>\n<th></th>\n<th>Select</th>\n<th>Poll</th>\n<th>Poll</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>åº•å±‚å®ç°</td>\n<td>æ•°ç»„</td>\n<td>é“¾è¡¨</td>\n<td>å“ˆå¸Œè¡¨</td>\n</tr>\n<tr>\n<td>I/O</td>\n<td>æ¯æ¬¡è°ƒç”¨çº¿æ€§éå†ã€æ—¶é—´å¤æ‚åº¦O(n)</td>\n<td>æ¯æ¬¡è°ƒç”¨çº¿æ€§éå†ã€æ—¶é—´å¤æ‚åº¦O(n)</td>\n<td>æ—¶é—´é€šçŸ¥æ–¹å¼ã€æ—¶é—´å¤æ‚åº¦O(1)</td>\n</tr>\n<tr>\n<td>æœ€å¤§è¿æ¥æ•°</td>\n<td>1024(x86)ã€2048(x64)</td>\n<td>æ— ä¸Šé™</td>\n<td>æ— ä¸Šé™</td>\n</tr>\n</tbody></table>\n<h4 id=\"Nettyé€šç”¨æ¨¡å¼ä¸‹NIOå®ç°å¤šè·¯å¤ç”¨å™¨æ˜¯å¦‚ä½•è·¨å¹³å°çš„\"><a href=\"#Nettyé€šç”¨æ¨¡å¼ä¸‹NIOå®ç°å¤šè·¯å¤ç”¨å™¨æ˜¯å¦‚ä½•è·¨å¹³å°çš„\" class=\"headerlink\" title=\"Nettyé€šç”¨æ¨¡å¼ä¸‹NIOå®ç°å¤šè·¯å¤ç”¨å™¨æ˜¯å¦‚ä½•è·¨å¹³å°çš„\"></a>Nettyé€šç”¨æ¨¡å¼ä¸‹NIOå®ç°å¤šè·¯å¤ç”¨å™¨æ˜¯å¦‚ä½•è·¨å¹³å°çš„</h4><blockquote>\n<p>nettyåœ¨ä¸åŒå¹³å°å•ç‹¬å®ç°äº†NIOï¼Œæ®è¯´æ€§èƒ½æ›´å¥½ã€‚windows iocp ã€mac kqueue ã€linux epool</p>\n</blockquote>\n<ul>\n<li>Nettyé€šç”¨æ¨¡å¼ä¸€èˆ¬æŒ‡çš„æ˜¯NioEnventLoopGroupã€NioEventLoopã€NioSelectSocketChannelã€NioSocketChannelçš„ä½¿ç”¨åœºæ™¯ä¸‹ï¼Œå®é™…ä¸Šé’ˆå¯¹Linuxå’Œmacå•ç‹¬åšäº†NIOçš„å®ç°ã€‚</li>\n</ul>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// è¯¥æ–¹æ³•åœ¨ä¸åŒçš„å¹³å°ä¸Šè¿”å›ä¸åŒçš„ç±»å‹ã€‚</span></span><br><span class=\"line\">sun.nio.ch.DefaultSelectorProvider.create()</span><br><span class=\"line\">  </span><br><span class=\"line\">  </span><br><span class=\"line\"><span class=\"keyword\">package</span> sun.nio.ch;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.nio.channels.spi.SelectorProvider;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">DefaultSelectorProvider</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"title\">DefaultSelectorProvider</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> SelectorProvider <span class=\"title\">create</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"comment\">// åœ¨mac/bsdçš„ç¯å¢ƒä¸‹è¿”å›KQueue</span></span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> KQueueSelectorProvider();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"Netty-æ˜¯å¦‚ä½•è§£å†³-epoll-ç©ºè½®è¯¢çš„-Bug\"><a href=\"#Netty-æ˜¯å¦‚ä½•è§£å†³-epoll-ç©ºè½®è¯¢çš„-Bug\" class=\"headerlink\" title=\"Netty æ˜¯å¦‚ä½•è§£å†³ epoll ç©ºè½®è¯¢çš„ Bug\"></a>Netty æ˜¯å¦‚ä½•è§£å†³ epoll ç©ºè½®è¯¢çš„ Bug</h4><blockquote>\n<p>åœ¨ JDK ä¸­ï¼Œ Epoll çš„å®ç°æ˜¯å­˜åœ¨æ¼æ´çš„ï¼Œå³ä½¿ Selector è½®è¯¢çš„äº‹ä»¶åˆ—è¡¨ä¸ºç©ºï¼ŒNIO çº¿ç¨‹ä¸€æ ·å¯ä»¥è¢«å”¤é†’ï¼Œå¯¼è‡´ CPU 100% å ç”¨ã€‚è¿™å°±æ˜¯è‡­åæ˜­è‘—çš„ JDK epoll ç©ºè½®è¯¢çš„ Bug</p>\n</blockquote>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// æ¯æ¬¡æ‰§è¡Œ Select æ“ä½œä¹‹å‰è®°å½•å½“å‰æ—¶é—´ currentTimeNanosã€‚</span></span><br><span class=\"line\">           <span class=\"keyword\">long</span> time = System.nanoTime();</span><br><span class=\"line\">           <span class=\"comment\">// time - TimeUnit.MILLISECONDS.toNanos(timeoutMillis) &gt;= currentTimeNanosï¼Œ</span></span><br><span class=\"line\">           <span class=\"comment\">// å¦‚æœäº‹ä»¶è½®è¯¢çš„æŒç»­æ—¶é—´å¤§äºç­‰äº timeoutMillisï¼Œé‚£ä¹ˆè¯´æ˜æ˜¯æ­£å¸¸çš„ï¼Œå¦åˆ™è¡¨æ˜é˜»å¡æ—¶é—´å¹¶æœªè¾¾åˆ°é¢„æœŸï¼Œå¯èƒ½è§¦å‘äº†ç©ºè½®è¯¢çš„ Bugã€‚</span></span><br><span class=\"line\">           <span class=\"keyword\">if</span> (time - TimeUnit.MILLISECONDS.toNanos(timeoutMillis) &gt;= currentTimeNanos) &#123;</span><br><span class=\"line\">               <span class=\"comment\">// timeoutMillis elapsed without anything selected.</span></span><br><span class=\"line\">               selectCnt = <span class=\"number\">1</span>;</span><br><span class=\"line\">               <span class=\"comment\">// è®¡æ•°å˜é‡ selectCntã€‚åœ¨æ­£å¸¸æƒ…å†µä¸‹ï¼ŒselectCnt ä¼šé‡ç½®ï¼Œ</span></span><br><span class=\"line\">               <span class=\"comment\">// å¦åˆ™ä¼šå¯¹ selectCnt è‡ªå¢è®¡æ•°ã€‚å½“ selectCnt è¾¾åˆ° SELECTOR_AUTO_REBUILD_THRESHOLDï¼ˆé»˜è®¤512ï¼‰ é˜ˆå€¼æ—¶ï¼Œ</span></span><br><span class=\"line\">               <span class=\"comment\">// ä¼šè§¦å‘é‡å»º Selector å¯¹è±¡ã€‚</span></span><br><span class=\"line\">           &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (SELECTOR_AUTO_REBUILD_THRESHOLD &gt; <span class=\"number\">0</span> &amp;&amp;</span><br><span class=\"line\">                   selectCnt &gt;= SELECTOR_AUTO_REBUILD_THRESHOLD) &#123;</span><br><span class=\"line\">               <span class=\"comment\">// The code exists in an extra method to ensure the method is not too big to inline as this</span></span><br><span class=\"line\">               <span class=\"comment\">// branch is not very likely to get hit very frequently.</span></span><br><span class=\"line\">               selector = selectRebuildSelector(selectCnt);</span><br><span class=\"line\">               selectCnt = <span class=\"number\">1</span>;</span><br><span class=\"line\">               <span class=\"keyword\">break</span>;</span><br><span class=\"line\">           &#125;</span><br><span class=\"line\">           currentTimeNanos = time;</span><br></pre></td></tr></table></figure>\n\n\n\n<h4 id=\"TCP-IPä¸­ç²˜åŒ…ã€åŠåŒ…\"><a href=\"#TCP-IPä¸­ç²˜åŒ…ã€åŠåŒ…\" class=\"headerlink\" title=\"TCP/IPä¸­ç²˜åŒ…ã€åŠåŒ…\"></a>TCP/IPä¸­ç²˜åŒ…ã€åŠåŒ…</h4><blockquote>\n<p>TCPæ˜¯æµå¼åè®®ï¼Œæ•°æ®æ˜¯æ— æ¸…æ™°è¾¹ç•Œçš„ã€‚æ‹†åŒ…/ç²˜åŒ…é—®é¢˜çš„å­˜åœ¨ï¼Œæ•°æ®æ¥æ”¶æ–¹å¾ˆéš¾ç•Œå®šæ•°æ®åŒ…çš„è¾¹ç•Œåœ¨å“ªé‡Œï¼Œå¾ˆéš¾è¯†åˆ«å‡ºä¸€ä¸ªå®Œæ•´çš„æ•°æ®åŒ…ã€‚æ‰€ä»¥éœ€è¦æä¾›ä¸€ç§æœºåˆ¶æ¥è¯†åˆ«æ•°æ®åŒ…çš„ç•Œé™ï¼Œè¿™ä¹Ÿæ˜¯è§£å†³æ‹†åŒ…/ç²˜åŒ…çš„å”¯ä¸€æ–¹æ³•ï¼šå®šä¹‰åº”ç”¨å±‚çš„é€šä¿¡åè®®ã€‚</p>\n</blockquote>\n<h5 id=\"ç²˜åŒ…\"><a href=\"#ç²˜åŒ…\" class=\"headerlink\" title=\"ç²˜åŒ…\"></a>ç²˜åŒ…</h5><ul>\n<li>æ•°æ®å‘é€æ–¹æ¯æ¬¡å†™å…¥æ•°æ®å¤§å°å°äºå¥—æ¥å­—ç¼“å­˜åŒºå¤§å°ã€‚åˆå¹¶å‘é€æ•°æ®çš„æ—¶å€™ã€‚</li>\n</ul>\n<h5 id=\"åŠåŒ…\"><a href=\"#åŠåŒ…\" class=\"headerlink\" title=\"åŠåŒ…\"></a>åŠåŒ…</h5><ul>\n<li>å‘é€æ–¹æ—¶å†™å…¥æ•°æ®å¤§å°å°äºå¥—æ¥å­—ç¼“å­˜åŒºå¤§å°ã€‚(å‘é€çš„æ•°æ®å¤§äºTCPåè®®ä¸­MTUæœ€å¤§ä¼ è¾“å•ä½)å¿…é¡»æ‹†åŒ…ã€‚</li>\n</ul>\n<h5 id=\"å¦‚ä½•è§£å†³\"><a href=\"#å¦‚ä½•è§£å†³\" class=\"headerlink\" title=\"å¦‚ä½•è§£å†³\"></a>å¦‚ä½•è§£å†³</h5><blockquote>\n<p>å°è£…æˆå¸§(framing)</p>\n</blockquote>\n<ul>\n<li><p>æ¶ˆæ¯é•¿åº¦å›ºå®š</p>\n<ul>\n<li>æ¯ä¸ªæ•°æ®æŠ¥æ–‡éƒ½éœ€è¦ä¸€ä¸ªå›ºå®šçš„é•¿åº¦ã€‚å½“æ¥æ”¶æ–¹ç´¯è®¡è¯»å–åˆ°å›ºå®šé•¿åº¦çš„æŠ¥æ–‡åï¼Œå°±è®¤ä¸ºå·²ç»è·å¾—ä¸€ä¸ªå®Œæ•´çš„æ¶ˆæ¯ã€‚å½“å‘é€æ–¹çš„æ•°æ®å°äºå›ºå®šé•¿åº¦æ—¶ï¼Œåˆ™éœ€è¦ç©ºä½è¡¥é½ã€‚</li>\n</ul>\n</li>\n<li><p>ç‰¹å®šåˆ†éš”ç¬¦</p>\n<ul>\n<li>å‘é€æŠ¥æ–‡æ—¶å°¾éƒ¨éœ€è¦æ·»åŠ ç‰¹å®šåˆ†éš”ç¬¦ï¼Œæ¨èçš„åšæ³•æ˜¯å°†æ¶ˆæ¯è¿›è¡Œç¼–ç ï¼Œä¾‹å¦‚ base64 ç¼–ç ï¼Œç„¶åå¯ä»¥é€‰æ‹© 64 ä¸ªç¼–ç å­—ç¬¦ä¹‹å¤–çš„å­—ç¬¦ä½œä¸ºç‰¹å®šåˆ†éš”ç¬¦ã€‚Redis åœ¨é€šä¿¡è¿‡ç¨‹ä¸­é‡‡ç”¨çš„å°±æ˜¯æ¢è¡Œåˆ†éš”ç¬¦ <code>\\n </code>ã€<code>\\r\\n</code>ã€‚</li>\n</ul>\n</li>\n<li><p>æ¶ˆæ¯é•¿åº¦ + æ¶ˆæ¯å†…å®¹</p>\n<ul>\n<li>å…ˆè§£æå›ºå®šé•¿åº¦çš„å­—æ®µè·å–é•¿åº¦ï¼Œç„¶åè¯»å–åç»­çš„å†…å®¹ã€‚é•¿åº¦ç†è®ºä¸Šæœ‰é™åˆ¶ï¼Œéœ€è¦æå‰é¢„çŸ¥å¯èƒ½çš„æœ€å¤§é•¿åº¦ã€‚</li>\n</ul>\n</li>\n</ul>\n<h4 id=\"Netty-å¯¹ä¸‰ç§å¸¸ç”¨å°å¸§æ–¹å¼çš„æ”¯æŒ\"><a href=\"#Netty-å¯¹ä¸‰ç§å¸¸ç”¨å°å¸§æ–¹å¼çš„æ”¯æŒ\" class=\"headerlink\" title=\"Netty å¯¹ä¸‰ç§å¸¸ç”¨å°å¸§æ–¹å¼çš„æ”¯æŒ\"></a>Netty å¯¹ä¸‰ç§å¸¸ç”¨å°å¸§æ–¹å¼çš„æ”¯æŒ</h4><blockquote>\n<p>Nettyä¸­è§£å†³ç²˜åŒ…åŠåŒ…çš„ç¼–è§£ç å«åšä¸€æ¬¡è§£ç å™¨ã€‚</p>\n</blockquote>\n<ul>\n<li><p>å›ºå®šé•¿åº¦  <code>FixedLengthFrameDecoder</code> </p>\n</li>\n<li><p>åˆ†éš”ç¬¦   <code>DelimiterBasedFrameDecoder</code></p>\n</li>\n<li><p>å›ºå®šé•¿åº¦å­—æ®µå­˜ä¸ªå†…å®¹çš„é•¿åº¦ä¿¡æ¯ <code>LengthFieldBasedFrameDecoder</code> <code>LengthFieldPrepender</code></p>\n<ul>\n<li>LengthFieldBasedFrameDecoderæŒ‰ç…§æŒ‡å®šçš„åŒ…é•¿åº¦åç§»é‡å¯¹æ¥å—çš„æ•°æ®è¿›è¡Œç¼–ç ã€‚</li>\n</ul>\n<p><img src=\"https://z201.oss-cn-shanghai.aliyuncs.com/JavaNote/20211123154642.png\"></p>\n<ul>\n<li>LengthFieldPrepender åœ¨å“åº”æ•°æ®çš„æ—¶å€™ä»å°è£…æ•°æ®ï¼Œåœ¨æ•°æ®å‰é¢å¢åŠ æ•°æ®çš„é•¿åº¦ã€‚</li>\n</ul>\n<p><img src=\"https://z201.oss-cn-shanghai.aliyuncs.com/JavaNote/20211123154934.png\"></p>\n</li>\n</ul>\n<h4 id=\"äºŒæ¬¡ç¼–è§£ç æ–¹å¼\"><a href=\"#äºŒæ¬¡ç¼–è§£ç æ–¹å¼\" class=\"headerlink\" title=\"äºŒæ¬¡ç¼–è§£ç æ–¹å¼\"></a>äºŒæ¬¡ç¼–è§£ç æ–¹å¼</h4><blockquote>\n<p>Nettyå†…ç½®ç¼–è§£ç å™¨åœ¨å®é™…å·¥ä½œä¸­éœ€è¦äºŒæ¬¡ç¼–è§£ç ï¼Œæ¯”å¦‚æˆ‘ä»¬ä¸šåŠ¡æ•°æ®æ˜¯jsonæ ¼å¼ï¼Œå°±éœ€è¦å°†åŸå§‹æ•°æ®è½¬æ¢æˆç”¨æˆ·æ•°æ®</p>\n</blockquote>\n<ul>\n<li>åœ¨nettyæºç ä¸­å†…ç½®äº†å¾ˆå¤šäºŒæ¬¡è§£ç å™¨javaåºåˆ—åŒ–ã€XMLã€JSONç­‰ç­‰ï¼Œéƒ½åœ¨codecåŒ…ä¸‹ã€‚</li>\n</ul>\n<p><img src=\"https://z201.oss-cn-shanghai.aliyuncs.com/JavaNote/20211122162837.png\"></p>\n<ul>\n<li>æ¯”å¦‚ä½¿ç”¨protobufäºŒæ¬¡è§£ç å™¨</li>\n</ul>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\">ch.pipeline().addLast(<span class=\"keyword\">new</span> ProtobufVarint32FrameDecoder());</span><br><span class=\"line\">ch.pipeline().addLast(<span class=\"keyword\">new</span> ProtobufDecoder(PersonOuterClass.Person.getDefaultInstance()));</span><br><span class=\"line\">ch.pipeline().addLast(<span class=\"keyword\">new</span> ProtobufVarint32LengthFieldPrepender());</span><br><span class=\"line\">ch.pipeline().addLast(<span class=\"keyword\">new</span> ProtobufEncoder());</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"Linuxç³»ç»Ÿå‚æ•°\"><a href=\"#Linuxç³»ç»Ÿå‚æ•°\" class=\"headerlink\" title=\"Linuxç³»ç»Ÿå‚æ•°\"></a>Linuxç³»ç»Ÿå‚æ•°</h4><ul>\n<li>ä¿®æ”¹linuxå¯¹å•ä¸€è¿›ç¨‹æ‰“å¼€çš„æ–‡ä»¶å¥æŸ„æ•°é‡é™åˆ¶<ul>\n<li><code>ulimit -n [xxx]</code>å°½é‡ä¸è¦åšä¸´æ—¶çš„è®¾ç½®ã€‚</li>\n</ul>\n</li>\n</ul>\n<h4 id=\"æœ‰TCPçš„keepaliveï¼Œä¸ºä»€ä¹ˆè¿˜éœ€è¦åº”ç”¨å±‚çš„keepalive\"><a href=\"#æœ‰TCPçš„keepaliveï¼Œä¸ºä»€ä¹ˆè¿˜éœ€è¦åº”ç”¨å±‚çš„keepalive\" class=\"headerlink\" title=\"æœ‰TCPçš„keepaliveï¼Œä¸ºä»€ä¹ˆè¿˜éœ€è¦åº”ç”¨å±‚çš„keepalive\"></a>æœ‰TCPçš„keepaliveï¼Œä¸ºä»€ä¹ˆè¿˜éœ€è¦åº”ç”¨å±‚çš„keepalive</h4><blockquote>\n<p>TCPä¸­çš„keepaliveé»˜è®¤æ˜¯å…³é—­ï¼Œå› æ­¤æ¢æµ‹åŒ…åœ¨ä¼ é€’ä¸­å¯èƒ½ä¸¢å¤±ï¼Œé»˜è®¤çš„è¶…æ—¶æ—¶é—´å¤ªé•¿ï¼Œé»˜è®¤æ˜¯7200+9*75ç§’ï¼Œä¹Ÿå°±æ˜¯2ä¸ªå¤šå°æ—¶ã€‚TCPæ˜¯ä¸€ä¸ªä¼ è¾“å±‚çš„åè®®ï¼Œä¼ è¾“å±‚çš„æ•°æ®ç•…é€šå¹¶ä¸ä¸€å®šæ“ä½œç³»ç»Ÿè¿›ç¨‹æ‰€å¯¹åº”çš„æœåŠ¡ç•…é€šã€‚</p>\n</blockquote>\n","categories":["Netty"],"tags":["Netty","NIO","IO","Reactor"]},{"title":"Jenkins-local-deployment-level","url":"/posts/1708465251/","content":"<blockquote>\n<p>æ•´ç†ä¸‹Jenkinsæœ¬åœ°éƒ¨ç½²ç¨‹åºçš„è¿‡ç¨‹ã€‚</p>\n</blockquote>\n<ul>\n<li><p>åœ¨å¼€å‘é˜¶æ®µï¼Œè®¸å¤šç¼–è¯‘å·¥å…·ä¼šå°†æˆ‘ä»¬çš„æºç ç¼–è¯‘å¯ä½¿ç”¨çš„æ–‡ä»¶ã€‚ä¾‹å¦‚ <code>vue-cli</code> çš„é¡¹ç›®ä¼šè¢« <code>webpack</code> æ‰“åŒ…ç¼–è¯‘ä¸ºæµè§ˆå™¨çš„æ–‡ä»¶ï¼Œ<code>Java</code> é¡¹ç›®ä¼šè¢«ç¼–è¯‘ä¸º <code>.class/jar</code> æ–‡ä»¶ä»¥ä¾›æœåŠ¡å™¨ä½¿ç”¨ã€‚</p>\n<ol>\n<li><p>å¼€å‘äººå‘˜å°†æºä»£ç ï¼Œç»è¿‡ç¼–è¯‘ã€å‹ç¼©ç­‰ä¸€ç³»åˆ—æµç¨‹æ‰“åŒ…</p>\n</li>\n<li><p>ä¸Šä¼ åˆ°æœåŠ¡å™¨ã€‚</p>\n</li>\n<li><p>åœ¨æœåŠ¡å™¨å°†ç¼–è¯‘åçš„æ–‡ä»¶ï¼Œæ‰‹åŠ¨å¯ç”¨çš„å®¹å™¨æœåŠ¡å†…ï¼ˆä¾‹å¦‚ <code>Nginxï¼ŒTomcatï¼ŒApache</code> ç­‰æœåŠ¡ï¼‰</p>\n</li>\n</ol>\n</li>\n</ul>\n<h3 id=\"å•æœºéƒ¨ç½²\"><a href=\"#å•æœºéƒ¨ç½²\" class=\"headerlink\" title=\"å•æœºéƒ¨ç½²\"></a>å•æœºéƒ¨ç½²</h3><blockquote>\n<p>åœ¨jenkinsæ‰€åœ¨çš„æœºå™¨ä¸Šéƒ¨ç½²ç¨‹åº</p>\n</blockquote>\n<ol>\n<li><a href=\"https://z201.cn/2021/05/25/Centos7-jenkins%E9%83%A8%E7%BD%B2/\">éƒ¨ç½²jenkins</a>å¹¶é…ç½®ç¯å¢ƒ</li>\n<li>è®¾ç½®jenkins-credentials (åç»­ç”¨äºä»gitä»“åº“ä¸­è·å–ä»£ç )</li>\n<li>åˆ›å»ºä»»åŠ¡<ol>\n<li>è®¾ç½®ä»“åº“åœ°å€</li>\n<li>è®¾ç½®ç¨‹åºéƒ¨ç½²shellè„šæœ¬</li>\n</ol>\n</li>\n</ol>\n<ul>\n<li><p>jenkins shell</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"code\"><pre><span class=\"line\">mvn clean install -Dmaven.test.skip=true</span><br><span class=\"line\">cp x x x/target/xxx-1.0.0-SNAPSHOT.jar /opt/xxx/upgrade</span><br><span class=\"line\">cd /opt/xxx</span><br><span class=\"line\">BUILD_ID=dontKillMe sh xxx.sh</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>ç¼–å†™ç¨‹åºè¿è¡Œshellè„šæœ¬ã€‚</p>\n</li>\n<li><p>éƒ¨ç½²java</p>\n</li>\n</ul>\n<figure class=\"highlight shell\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\">!/bin/bash</span></span><br><span class=\"line\">app=xxx</span><br><span class=\"line\">appName=$&#123;app&#125;-1.0.0-SNAPSHOT</span><br><span class=\"line\">projPath=/opt/xxx</span><br><span class=\"line\">upgradePath=$&#123;projPath&#125;/upgrade</span><br><span class=\"line\">backPath=$&#123;projPath&#125;/backup</span><br><span class=\"line\">logFile=$&#123;projPath&#125;/data/logs/$&#123;app&#125;.log</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> æ£€æŸ¥å‡çº§æ–‡ä»¶æ˜¯å¦å­˜åœ¨</span></span><br><span class=\"line\">echo \"checking upgrade file...\"</span><br><span class=\"line\">if [ ! -f $&#123;upgradePath&#125;/$&#123;appName&#125;.jar ]; then</span><br><span class=\"line\">    echo \"cann't found file $&#123;upgradePath&#125;/$&#123;appName&#125;.jar!\"</span><br><span class=\"line\">    exit</span><br><span class=\"line\">fi</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> ç»“æŸè¿›ç¨‹</span></span><br><span class=\"line\">pid=`ps aux | grep $&#123;projPath&#125;/$&#123;appName&#125;.jar | grep -v grep | grep -v kill | awk '&#123;print $2&#125;'`</span><br><span class=\"line\">if [ $&#123;pid&#125; ]; then</span><br><span class=\"line\">    echo \"kill $&#123;appName&#125;!\"</span><br><span class=\"line\">    kill -9 $pid</span><br><span class=\"line\">fi</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> å¤‡ä»½åŸå‡çº§æ–‡ä»¶,å¦‚æœå­˜åœ¨çš„è¯</span></span><br><span class=\"line\">if [ -f $&#123;projPath&#125;/$&#123;appName&#125;.jar ]; then</span><br><span class=\"line\">    timeStr=`date +%Y%m%d%H%M%S`</span><br><span class=\"line\">    mv $&#123;projPath&#125;/$&#123;appName&#125;.jar $&#123;backPath&#125;/$&#123;appName&#125;.jar.bak_$&#123;timeStr&#125;</span><br><span class=\"line\">    echo \"load $&#123;appName&#125; success!\"</span><br><span class=\"line\">    echo \"backup $&#123;appName&#125; success!\"</span><br><span class=\"line\">fi</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> æ‹·è´å‡çº§æ–‡ä»¶</span></span><br><span class=\"line\">echo \"copy $&#123;appName&#125;.jar...\"</span><br><span class=\"line\">cp $&#123;upgradePath&#125;/$&#123;appName&#125;.jar $&#123;projPath&#125;/$&#123;appName&#125;.jar</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> å¯åŠ¨è¿›ç¨‹</span></span><br><span class=\"line\">echo \"start $&#123;appName&#125;...\"</span><br><span class=\"line\">nohup java -Djava.security.egd=file:/dev/./urandom -Xms512m -Xmx512m -XX:MetaspaceSize=256m -XX:MaxMetaspaceSize=256m -jar $&#123;projPath&#125;/$&#123;appName&#125;.jar --spring.profiles.active=test &gt;/dev/null 2&gt;&amp;1 &amp;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> æŸ¥çœ‹æ—¥å¿—</span></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> åˆ¤æ–­å½“å¤©æ—¥å¿—æ–‡ä»¶æ˜¯å¦å­˜åœ¨</span></span><br><span class=\"line\">if [ ! -f $&#123;logFile&#125; ]; then</span><br><span class=\"line\">    # æ–‡ä»¶ä¸å­˜åœ¨åˆ™åˆ›å»ºæ–‡ä»¶ï¼Œå†æ‰§è¡Œtailå‘½ä»¤</span><br><span class=\"line\">    touch $&#123;logFile&#125;</span><br><span class=\"line\">fi</span><br><span class=\"line\">echo \"tail -f $&#123;logFile&#125;\"</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>éƒ¨ç½²vue</li>\n</ul>\n<figure class=\"highlight shell\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\">!/bin/bash</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> git revert</span></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> git restore .</span></span><br><span class=\"line\"></span><br><span class=\"line\">applicationPath=/opt/view/xxxx</span><br><span class=\"line\"></span><br><span class=\"line\">echo 'delete old files...'</span><br><span class=\"line\">rm -rf $&#123;applicationPath&#125;/*</span><br><span class=\"line\"></span><br><span class=\"line\">echo 'copy files after npm build!'</span><br><span class=\"line\">cp -rf dist/* $&#123;applicationPath&#125;</span><br></pre></td></tr></table></figure>\n\n","categories":["å®è·µ"],"tags":["å·¥ç¨‹åŒ–"]},{"title":"Macå®‰è£…neo4jå’Œjupyter","url":"/posts/1666574776/","content":"<blockquote>\n<p>å‡†å¤‡å­¦ä¹ ä¸‹neo4jè®°å½•åœ¨macä¸‹å®‰è£…neo4jçš„å‘ã€‚</p>\n</blockquote>\n<h2 id=\"neo4jå®˜ç½‘ç½‘ç«™ä¸‹è½½å¤±è´¥\"><a href=\"#neo4jå®˜ç½‘ç½‘ç«™ä¸‹è½½å¤±è´¥\" class=\"headerlink\" title=\"neo4jå®˜ç½‘ç½‘ç«™ä¸‹è½½å¤±è´¥\"></a>neo4jå®˜ç½‘ç½‘ç«™ä¸‹è½½å¤±è´¥</h2><blockquote>\n<p>å›½å†…åªèƒ½ä»é•œåƒåœ°å€ä¸‹è½½</p>\n</blockquote>\n<p><a href=\"http://doc.we-yun.com:1008/\" target=\"_blank\" rel=\"noopener\">http://doc.we-yun.com:1008/</a> </p>\n<h2 id=\"é…ç½®jdk11\"><a href=\"#é…ç½®jdk11\" class=\"headerlink\" title=\"é…ç½®jdk11\"></a>é…ç½®jdk11</h2><blockquote>\n<p>å¯ä»¥æŸ¥çœ‹æˆ‘ä¸Šé¢å†…å®¹å®ç”¨Jenvç®¡ç†å¤šä¸ªç‰ˆæœ¬ã€‚</p>\n</blockquote>\n<h2 id=\"å¯åŠ¨neo4j\"><a href=\"#å¯åŠ¨neo4j\" class=\"headerlink\" title=\"å¯åŠ¨neo4j\"></a>å¯åŠ¨neo4j</h2><blockquote>\n<p>ä¸‹è½½å®Œæˆåè§£å‹</p>\n</blockquote>\n<figure class=\"highlight shell\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> å¯åŠ¨</span></span><br><span class=\"line\">./neo4j  start</span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> å…³é—­</span></span><br><span class=\"line\">./neo4j  stop</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"neo4jç•Œé¢\"><a href=\"#neo4jç•Œé¢\" class=\"headerlink\" title=\"neo4jç•Œé¢\"></a>neo4jç•Œé¢</h2><ul>\n<li>åœ¨æµè§ˆå™¨ä¸­è¾“å…¥localhost:7474</li>\n<li>åˆå§‹ç”¨æˆ·åã€å¯†ç å‡ä¸ºneo4jï¼Œ ç¬¬ä¸€æ¬¡ç™»å½•éœ€è¦ä¿®æ”¹å¯†ç </li>\n</ul>\n<h2 id=\"å®‰è£…jupyter\"><a href=\"#å®‰è£…jupyter\" class=\"headerlink\" title=\"å®‰è£…jupyter\"></a>å®‰è£…jupyter</h2><blockquote>\n<p>æ³¨æ„æå‰å®‰è£…pythonç¯å¢ƒ</p>\n</blockquote>\n<figure class=\"highlight shell\"><table><tr><td class=\"code\"><pre><span class=\"line\">pip install jupyter notebook -i http://mirrors.aliyun.com/pypi/simple/ --trusted-host=mirrors.aliyun.com</span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> æ£€æŸ¥ç‰ˆæœ¬</span></span><br><span class=\"line\">jupyter --version</span><br></pre></td></tr></table></figure>\n\n","categories":["å®è·µ"],"tags":["Neo4j","Jupiter"]},{"title":"Macä¸‹OpenJdk11-JavaFxå¼€å‘ç¯å¢ƒé…ç½®","url":"/posts/4130926005/","content":"<blockquote>\n<p>OpenJdk 11 ç¯å¢ƒä¸‹JavaFxå¼€å‘ç¯å¢ƒè®¾ç½®</p>\n</blockquote>\n<ul>\n<li><a href=\"https://www.coder.work/article/884639\" target=\"_blank\" rel=\"noopener\">https://www.coder.work/article/884639</a></li>\n<li><a href=\"https://stackoverflow.com/questions/54291958/javafx-11-illegalaccesserror-when-creating-label\" target=\"_blank\" rel=\"noopener\">https://stackoverflow.com/questions/54291958/javafx-11-illegalaccesserror-when-creating-label</a></li>\n<li><a href=\"https://gluonhq.com/products/javafx/\" target=\"_blank\" rel=\"noopener\">https://gluonhq.com/products/javafx/</a></li>\n</ul>\n<h2 id=\"pomä¾èµ–\"><a href=\"#pomä¾èµ–\" class=\"headerlink\" title=\"pomä¾èµ–\"></a>pomä¾èµ–</h2><figure class=\"highlight xml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">dependencies</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>org.openjfx<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>javafx-controls<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>11<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>org.openjfx<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>javafx-fxml<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>11<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"ideaè®¾ç½®\"><a href=\"#ideaè®¾ç½®\" class=\"headerlink\" title=\"ideaè®¾ç½®\"></a>ideaè®¾ç½®</h3><blockquote>\n<p>ä¸‹è½½javafxç‰ˆæœ¬ï¼Œç„¶åå¼•å…¥ä¾èµ–ã€‚é¡¹ç›®libä¸­å¼•å…¥ã€‚å¯åŠ¨çš„æ—¶å€™åœ¨vmä¸­æ·»åŠ å¯åŠ¨å‚æ•°</p>\n</blockquote>\n<figure class=\"highlight shell\"><table><tr><td class=\"code\"><pre><span class=\"line\">--module-path</span><br><span class=\"line\"><span class=\"meta\">/Users/$</span><span class=\"bash\">USER/word/libhome/javafx-sdk-11.0.2/lib</span></span><br><span class=\"line\">--add-modules</span><br><span class=\"line\">javafx.controls</span><br><span class=\"line\">--add-modules</span><br><span class=\"line\">javafx.base</span><br><span class=\"line\">--add-modules</span><br><span class=\"line\">javafx.graphics</span><br><span class=\"line\">--add-modules</span><br><span class=\"line\">javafx.fxml</span><br><span class=\"line\">--add-modules</span><br><span class=\"line\">javafx.media</span><br></pre></td></tr></table></figure>\n\n","categories":["å®è·µ"],"tags":["openJdk11"]},{"title":"Macä½¿ç”¨Jenvç®¡ç†å¤šç‰ˆæœ¬Jdk","url":"/posts/62740049/","content":"<blockquote>\n<p>ç®€å•è®°å½•ä¸‹macä¸‹å¤šç‰ˆæœ¬jdkç®¡ç† </p>\n</blockquote>\n<ul>\n<li><a href=\"https://adoptopenjdk.net/\" target=\"_blank\" rel=\"noopener\">https://adoptopenjdk.net/</a></li>\n<li><a href=\"https://www.jianshu.com/p/1a147d5515f0\" target=\"_blank\" rel=\"noopener\">https://www.jianshu.com/p/1a147d5515f0</a></li>\n</ul>\n<h2 id=\"æ£€æŸ¥ç¯å¢ƒ\"><a href=\"#æ£€æŸ¥ç¯å¢ƒ\" class=\"headerlink\" title=\"æ£€æŸ¥ç¯å¢ƒ\"></a>æ£€æŸ¥ç¯å¢ƒ</h2><h3 id=\"æŸ¥çœ‹å½“å‰å®‰è£…çš„jdkç‰ˆæœ¬\"><a href=\"#æŸ¥çœ‹å½“å‰å®‰è£…çš„jdkç‰ˆæœ¬\" class=\"headerlink\" title=\"æŸ¥çœ‹å½“å‰å®‰è£…çš„jdkç‰ˆæœ¬\"></a>æŸ¥çœ‹å½“å‰å®‰è£…çš„jdkç‰ˆæœ¬</h3><figure class=\"highlight shell\"><table><tr><td class=\"code\"><pre><span class=\"line\">/usr/libexec/java_home -V</span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> å¦‚æœæœ‰å®‰è£…è¿‡jdkç‰ˆæœ¬è¿™é‡Œä¼šè¾“å‡ºä¿¡æ¯</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"ä½¿ç”¨brew-å®‰è£…jenv\"><a href=\"#ä½¿ç”¨brew-å®‰è£…jenv\" class=\"headerlink\" title=\"ä½¿ç”¨brew å®‰è£…jenv\"></a>ä½¿ç”¨brew å®‰è£…jenv</h3><figure class=\"highlight shell\"><table><tr><td class=\"code\"><pre><span class=\"line\">brew install jenv</span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\">æ£€æŸ¥</span></span><br><span class=\"line\">jenv doctor </span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> åˆšå®‰è£…ä¼šæç¤ºå¾ˆå¤šä¿¡æ¯</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"åˆå§‹åŒ–jenv\"><a href=\"#åˆå§‹åŒ–jenv\" class=\"headerlink\" title=\"åˆå§‹åŒ–jenv\"></a>åˆå§‹åŒ–jenv</h3><figure class=\"highlight shell\"><table><tr><td class=\"code\"><pre><span class=\"line\">brew install jenv</span><br><span class=\"line\">jenv init -</span><br><span class=\"line\">echo 'eval \"$(jenv init -)\"' &gt;&gt; ~/.bash_profile</span><br><span class=\"line\">echo 'eval \"$(jenv init -)\"' &gt;&gt; ~/.zprofile</span><br><span class=\"line\">jenv add &lt;path-to-java8-Home-Dir&gt; # è¿™é‡Œä»/usr/libexec/java_home -V è·å–javaHome</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"åˆ‡æ¢jdk\"><a href=\"#åˆ‡æ¢jdk\" class=\"headerlink\" title=\"åˆ‡æ¢jdk\"></a>åˆ‡æ¢jdk</h3><figure class=\"highlight shell\"><table><tr><td class=\"code\"><pre><span class=\"line\">âœ  ~ jenv versions</span><br><span class=\"line\">* system (set by /Users/zengqingfeng/.jenv/version)</span><br><span class=\"line\">  1.8</span><br><span class=\"line\">  1.8.0.275</span><br><span class=\"line\">  openjdk64-1.8.0.275</span><br><span class=\"line\">  </span><br><span class=\"line\">âœ  ~ jenv local system # åˆ‡æ¢ç‰ˆæœ¬</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"å¯èƒ½å‡ºç°çš„é—®é¢˜\"><a href=\"#å¯èƒ½å‡ºç°çš„é—®é¢˜\" class=\"headerlink\" title=\"å¯èƒ½å‡ºç°çš„é—®é¢˜\"></a>å¯èƒ½å‡ºç°çš„é—®é¢˜</h3><ul>\n<li>ä½¿ç”¨ jenv è¿‡ç¨‹å¯èƒ½ä¼šå‘ç°ï¼Œå½“åˆ‡æ¢ JDK ç‰ˆæœ¬ä¹‹åï¼Œ <code>${JAVA_HOME}</code> ç¯å¢ƒå˜é‡æ²¡æœ‰æ”¹å˜ï¼Œè¿˜æ˜¯ä¸Šä¸€ä¸ª JDK ç‰ˆæœ¬é…ç½®ã€‚</li>\n</ul>\n<figure class=\"highlight shell\"><table><tr><td class=\"code\"><pre><span class=\"line\">è¿™æ—¶å¯ä»¥è¿è¡Œ exec $SHELL -l ï¼Œ $&#123;JAVA_HOME&#125; å°†ä¼šå˜æˆå½“å‰ç‰ˆæœ¬ã€‚</span><br></pre></td></tr></table></figure>\n\n","categories":["å®è·µ"],"tags":["openJdk11","jenv"]},{"title":"æŸ¥ç¼ºè¡¥æ¼-ç½‘ç»œåè®®","url":"/posts/595781010/","content":"<blockquote>\n<p>æœ¬ç« æ˜¯æ•´ç†çŸ¥è¯†å†…å®¹ï¼Œä¸ºå¼ºåŒ–çŸ¥è¯†é•¿æœŸæ›´æ–°ã€‚</p>\n</blockquote>\n<h3 id=\"ç½‘ç»œåè®®\"><a href=\"#ç½‘ç»œåè®®\" class=\"headerlink\" title=\"ç½‘ç»œåè®®\"></a>ç½‘ç»œåè®®</h3><blockquote>\n<p>ç½‘ç»œåè®®æ˜¯ä¸€ç»„ç¡®å®šçš„è§„åˆ™ï¼Œè¿™äº›è§„åˆ™ç¡®å®šå¦‚ä½•åœ¨åŒä¸€ç½‘ç»œä¸­çš„ä¸åŒè®¾å¤‡ä¹‹é—´ä¼ è¾“æ•°æ®ã€‚æœ¬è´¨ä¸Šï¼Œå®ƒå…è®¸è¿æ¥çš„è®¾å¤‡å½¼æ­¤é€šä¿¡ï¼Œè€Œä¸ç®¡å…¶å†…éƒ¨è¿‡ç¨‹ï¼Œç»“æ„æˆ–è®¾è®¡æ˜¯å¦æœ‰å·®å¼‚ã€‚ï¼ˆä¸¤ä¸ªç«¯ç‚¹éƒ½éœ€è¦äº†è§£åè®®æ‰èƒ½è¿›è¡Œäº¤æµï¼‰ã€‚</p>\n</blockquote>\n<h3 id=\"OSIç½‘ç»œæ¨¡å‹\"><a href=\"#OSIç½‘ç»œæ¨¡å‹\" class=\"headerlink\" title=\"OSIç½‘ç»œæ¨¡å‹\"></a>OSIç½‘ç»œæ¨¡å‹</h3><blockquote>\n<p>OSIè‹±æ–‡å…¨ç§°å«åš(Open System Interconnection Model). ä¸­æ–‡å…¨ç§°å«åšå¼€æ”¾å¼ç³»ç»Ÿäº’è”æ¨¡å‹. ä¹Ÿå«åšç½‘ç»œ7å±‚æ¨¡å‹ï¼Œä»ä¸‹åˆ°ä¸Šä¾æ¬¡ä¸ºï¼Œç‰©ç†å±‚ï¼Œæ•°æ®é“¾è·¯å±‚ï¼Œç½‘ç»œå±‚ï¼Œä¼ è¾“å±‚ï¼Œä¼šè¯å±‚ï¼Œè¡¨ç¤ºå±‚ï¼Œåº”ç”¨å±‚ã€‚</p>\n</blockquote>\n<ul>\n<li>OISæ¦‚å¿µæ¨¡å‹<strong>å®é™…ä¸Šå¹¶æ²¡æœ‰çœŸæ­£å®ç°è¿‡ï¼Œä½†æ˜¯æˆ‘ä»¬éœ€è¦å‚è€ƒè¿™ä¸ªåˆ†å±‚æ¥ç†è§£ç½‘ç»œåè®®</strong>ä¸€èˆ¬æ¥è¯´æŠŠ5-7å±‚å«åšä¸Šå±‚ï¼Œ1-4å±‚å«åšä¸‹å±‚ã€‚</li>\n</ul>\n<p><img src=\"https://z201.oss-cn-shanghai.aliyuncs.com/JavaNote/20211123214245.png\"></p>\n<ul>\n<li>7-åº”ç”¨å±‚ -&gt; ç½‘ç»œæµç¨‹åº”ç”¨ï¼ˆè¡¨ç¤ºçš„æ˜¯ç”¨æˆ·ç•Œé¢ï¼Œä¾‹å¦‚Telnetï¼ŒHTTPã€FTPã€TFTPã€SMTPã€SNMPã€DNSã€TELNETã€HTTPSã€POP3ã€DHCPï¼‰</li>\n<li>6-è¡¨ç¤ºå±‚ -&gt; æ•°æ®è¡¨ç¤º (æ•°æ®å¦‚ä½•å‘ˆç°ï¼Œç‰¹æ®Šå¤„ç†-&gt;ä¾‹å¦‚åŠ å¯†ï¼Œæ¯”å¦‚JPEGã€ASCLLã€EBCDICã€åŠ å¯†æ ¼å¼ç­‰ï¼‰</li>\n<li>5-ä¼šè¯å±‚ -&gt; ä¸»æœºé—´çš„é€šä¿¡ï¼ˆå°†ä¸åŒåº”ç”¨ç¨‹åºçš„æ•°æ®åˆ†å¼€ã€‚å»ºç«‹ï¼Œç®¡ç†å’Œç»ˆæ­¢åº”ç”¨ä¹‹é—´çš„ä¼šè¯ï¼‰</li>\n<li>4-ä¼ è¾“å±‚ -&gt; ç«¯åˆ°ç«¯è¿æ¥ï¼ˆå¯é æˆ–ä¸å¯é çš„ä¼ é€’ï¼Œä¾‹å¦‚TCPï¼ŒUDP)</li>\n<li>3-ç½‘ç»œå±‚ -&gt; åœ°å€å’Œæœ€ä½³è·¯å¾„ï¼ˆæä¾›è·¯ç”±å™¨ç”¨äºè·¯å¾„çš„é€»è¾‘å¯»å€ï¼Œæ¯”å¦‚ICMP IGMP IP(IPV4 IPV6)ï¼‰</li>\n<li>2-æ•°æ®é“¾è·¯å±‚ -&gt; åª’ä½“è®¿é—®ï¼ˆå°†ä½ç»„åˆæˆå­—èŠ‚ï¼Œå°†å­—èŠ‚ç»„åˆæˆå¸§ï¼Œä½¿ç”¨MACåœ°å€è®¿é—®ï¼Œé”™è¯¯æ£€æµ‹-æ¯”å¦‚HDLCï¼‰</li>\n<li>1-ç‰©ç†å±‚ -&gt; äºŒè¿›åˆ¶ä¼ è¾“ï¼ˆåœ¨è®¾å¤‡ä¹‹é—´ç§»åŠ¨bitsã€‚ä¾‹å¦‚V.35ï¼‰</li>\n</ul>\n<h3 id=\"TCP-IPç½‘ç»œæ¨¡å‹\"><a href=\"#TCP-IPç½‘ç»œæ¨¡å‹\" class=\"headerlink\" title=\"TCP/IPç½‘ç»œæ¨¡å‹\"></a>TCP/IPç½‘ç»œæ¨¡å‹</h3><blockquote>\n<p>TCP/IP æ¨¡å‹å’ŒOSIç›¸æ¯”ä¼šç®€å•ä¸€ç‚¹ï¼Œåªæœ‰å››å±‚ï¼Œåˆ†åˆ«ä¸ºæ•°æ®é“¾è·¯å±‚ï¼Œç½‘ç»œå±‚ï¼Œä¼ è¾“å±‚å’Œåº”ç”¨å±‚ã€‚</p>\n</blockquote>\n<p><img src=\"https://z201.oss-cn-shanghai.aliyuncs.com/JavaNote/20211123214318.png\"></p>\n<h3 id=\"OSIæ¨¡å‹ä¸TCP-IPæ¨¡å‹\"><a href=\"#OSIæ¨¡å‹ä¸TCP-IPæ¨¡å‹\" class=\"headerlink\" title=\"OSIæ¨¡å‹ä¸TCP/IPæ¨¡å‹\"></a>OSIæ¨¡å‹ä¸TCP/IPæ¨¡å‹</h3><p><img src=\"https://z201.oss-cn-shanghai.aliyuncs.com/JavaNote/20211123215305.png\"></p>\n<ul>\n<li>4-åº”ç”¨å±‚ -&gt; å¯¹åº”äºOSIçš„5-7å±‚</li>\n<li>3-ä¼ è¾“å±‚ -&gt; è¿™ä¸ªæ˜¯å’ŒOSIçš„ç¬¬å››å±‚æƒ³åŒçš„</li>\n<li>2-ç½‘ç»œå±‚ -&gt; è¿™ä¸ªæ˜¯å’ŒOSIçš„ç¬¬3ç½‘ç»œå±‚å¯¹åº”çš„</li>\n<li>1-ç½‘ç»œè®¿é—®å±‚ -&gt; è¿™ä¸ªæ˜¯å’ŒOSIçš„ç¬¬1-2å±‚æ‰€å¯¹åº”çš„</li>\n</ul>\n<a id=\"more\"></a>\n\n<h3 id=\"TCP-IPåè®®\"><a href=\"#TCP-IPåè®®\" class=\"headerlink\" title=\"TCP/IPåè®®\"></a>TCP/IPåè®®</h3><blockquote>\n<p>TCP/IPçš„å‰èº«APPA:NCPåè®®ã€‚</p>\n</blockquote>\n<p><img src=\"https://z201.oss-cn-shanghai.aliyuncs.com/JavaNote/20211123220629.png\"></p>\n<ul>\n<li>TCPï¼š<strong>é¢å‘è¿æ¥çš„ã€å¯é çš„ã€æ‹¥å¡æ§åˆ¶ã€åŸºäºå­—èŠ‚æµçš„ã€æœ‰çŠ¶æ€æœåŠ¡</strong>ä¼ è¾“å±‚é€šä¿¡åè®®ã€‚</li>\n<li>UDPï¼š<strong>é¢å‘æ— è¿æ¥ã€åŸºäºæ•°æ®åŒ…ã€æ— çŠ¶æ€æœåŠ¡</strong></li>\n<li>IPï¼šæ ¹æ®IPåœ°å€ç©¿é€ç½‘ç»œä¼ è¾“æ•°æ®ã€‚</li>\n</ul>\n<h4 id=\"TCP\"><a href=\"#TCP\" class=\"headerlink\" title=\"TCP\"></a>TCP</h4><blockquote>\n<p>TCPçš„å…¨ç§°æ˜¯Transmission Control Protocolï¼Œåœ¨IPåè®®ä¹‹ä¸Šï¼Œè§£å†³ç½‘ç»œé€šä¿¡å¯ä¾èµ–çš„é—®é¢˜ã€‚TCPåŸºæœ¬ä¸Šè¢«ä»¥ä¸Šå¤§å¤šæ•°çš„åè®®æ‰€ä½¿ç”¨ã€‚</p>\n</blockquote>\n<ul>\n<li><strong>é¢å‘è¿æ¥</strong>ï¼Œä¹Ÿå°±æ˜¯å»ºç«‹è¿æ¥ã€‚ä¸ºäº†å®¢æˆ·ç«¯ä¸æœåŠ¡ç«¯ç»´æŠ¤çš„è¿æ¥ï¼Œè€Œå»ºç«‹ä¸€å®šçš„æ•°æ®ç»“æ„ç»´æŠ¤äº’ç›¸äº¤äº’çš„çŠ¶æ€ã€‚é€šè¿‡è¿™ç§æ•°æ®ç»“æ„æ¥ä¿è¯æ‰€è°“çš„é¢ç›¸è¿æ¥çš„ç‰¹æ€§ã€‚</li>\n<li><strong>å¯é æ€§</strong>ï¼Œé€šè¿‡TCPè¿æ¥ä¼ è¾“çš„æ•°æ®ï¼Œæ— å·®é”™ã€ä¸ä¸¢å¤±ã€ä¸é‡å¤ã€æŒ‰é¡ºåºåˆ°è¾¾ã€‚ä½¿ç”¨æ ¡éªŒã€ç¡®è®¤å’Œé‡ä¼ æœºåˆ¶æ¥ä¿è¯å¯é ä¼ è¾“ã€‚</li>\n<li><strong>é˜»å¡æ§åˆ¶</strong>ï¼ŒTCPè‡ªå·±å†³å®šä½•æ—¶åœæ­¢å’Œå‘é€æ•°æ®ã€‚</li>\n<li><strong>åŸºäºå­—èŠ‚æµ</strong>ï¼Œå‘é€çš„æ—¶å€™æ˜¯ä¸€ä¸ªæµï¼Œæ²¡å¤´æ²¡å°¾ï¼Œæ¶ˆæ¯æ˜¯<strong>æœ‰åº</strong>çš„ï¼Œä¼šå¯¹<strong>é‡å¤</strong>çš„æ¶ˆæ¯ä¸¢å¼ƒã€‚</li>\n<li><strong>çŠ¶æ€æœåŠ¡</strong>ï¼Œè‡ªèº«ç»´æŠ¤äº†çŠ¶æ€</li>\n</ul>\n<h5 id=\"ç«¯å£å·\"><a href=\"#ç«¯å£å·\" class=\"headerlink\" title=\"ç«¯å£å·\"></a>ç«¯å£å·</h5><blockquote>\n<p>TCPæŠ¥æ–‡ä¸­æœ‰ç«¯å£ç›¸å…³ä¿¡æ¯ï¼Œç©¿æ’ä¸‹ã€‚ç«¯å£å·çš„èŒƒå›´ä»0åˆ°65535ï¼Œé€šè¿‡ç«¯å£å·è¢«åˆ†ä¸ºä¸‰ä¸ªä¸åŒçš„ç±»åˆ«ã€‚</p>\n</blockquote>\n<ul>\n<li>å…¬è®¤ç«¯å£ï¼ˆWell-Knownï¼‰0-1023 æ˜¯ç»è¿‡å®è·µæ£€éªŒçš„åè®®ï¼Œæ‰€ä»¥ç§°ä¸ºå…¬è®¤ç«¯å£ã€‚è¯¸å¦‚Httpä½¿ç”¨ç«¯å£80ï¼Œhttpsä½¿ç”¨443<ul>\n<li>HTTP - 80</li>\n<li>HTTPS - 443</li>\n<li>FTP - 20,21</li>\n<li>SSH - 22</li>\n<li>Telnet - 23</li>\n</ul>\n</li>\n<li>æ³¨å†Œç«¯å£ï¼ˆRegisteredï¼‰1024-49151</li>\n<li>ä¸´æ—¶ç«¯å£ï¼ˆEphemeralï¼‰49152-65535</li>\n</ul>\n<h5 id=\"TCPæŠ¥æ–‡æ ¼å¼\"><a href=\"#TCPæŠ¥æ–‡æ ¼å¼\" class=\"headerlink\" title=\"TCPæŠ¥æ–‡æ ¼å¼\"></a>TCPæŠ¥æ–‡æ ¼å¼</h5><blockquote>\n<p>TCP æŠ¥æ–‡æ˜¯ TCP å±‚ä¼ è¾“çš„æ•°æ®å•å…ƒï¼Œä¹Ÿç§°ä¸ºæŠ¥æ–‡æ®µã€‚TCP æŠ¥æ–‡ä¸­æ¯ä¸ªå­—æ®µå¦‚å›¾æ‰€ç¤ºã€‚</p>\n</blockquote>\n<p><img src=\"https://z201.oss-cn-shanghai.aliyuncs.com/JavaNote/20211123230635.png\"></p>\n<h5 id=\"æŠ¥æ–‡å­—æ®µå«ä¹‰\"><a href=\"#æŠ¥æ–‡å­—æ®µå«ä¹‰\" class=\"headerlink\" title=\"æŠ¥æ–‡å­—æ®µå«ä¹‰\"></a>æŠ¥æ–‡å­—æ®µå«ä¹‰</h5><blockquote>\n<p>å›ºå®šé¦–éƒ¨é•¿åº¦ä¸º20å­—èŠ‚,å¯å˜éƒ¨åˆ†0~40å­—èŠ‚</p>\n</blockquote>\n<ul>\n<li><p><em>Source Prot</em> æºç«¯å£ 16bit èŒƒå›´ 0 ~ 56625</p>\n</li>\n<li><p><em>Destination Port</em> ç›®æ ‡ç«¯å£ 16bit èŒƒå›´ 0 ~ 56625</p>\n</li>\n<li><p><em>Sequence Number</em> åºåˆ—å·å­—æ®µ 32bit </p>\n<ul>\n<li>å®ƒè¡¨ç¤ºæœ¬æŠ¥æ–‡æ®µæ‰€å‘é€æ•°æ®çš„ç¬¬ä¸€ä¸ªå­—èŠ‚çš„ç¼–å·ã€‚åœ¨ TCP è¿æ¥ä¸­ï¼Œæ‰€ä¼ é€çš„å­—èŠ‚æµçš„æ¯ä¸€ä¸ªå­—èŠ‚éƒ½ä¼šæŒ‰é¡ºåºç¼–å·ã€‚å½“SYNæ ‡è®°ä¸ä¸º1æ—¶ï¼Œè¿™æ˜¯å½“å‰æ•°æ®åˆ†æ®µç¬¬ä¸€ä¸ªå­—æ¯çš„åºåˆ—å·ï¼›å¦‚æœSYNçš„å€¼æ˜¯1æ—¶ï¼Œè¿™ä¸ªå­—æ®µçš„å€¼å°±æ˜¯åˆå§‹åºåˆ—å€¼ï¼ˆISNï¼‰ï¼Œç”¨äºå¯¹åºåˆ—å·è¿›è¡ŒåŒæ­¥ã€‚è¿™æ—¶ï¼Œç¬¬ä¸€ä¸ªå­—èŠ‚çš„åºåˆ—å·æ¯”è¿™ä¸ªå­—æ®µçš„å€¼å¤§1ï¼Œä¹Ÿå°±æ˜¯ISNåŠ 1ã€‚<strong>è§£å†³ç½‘ç»œåŒ…ä¹±åºé—®é¢˜</strong></li>\n</ul>\n</li>\n<li><p><em>Acknowledgment Numberï¼ŒACK Number</em>  ç¡®è®¤å·å­—æ®µ</p>\n<ul>\n<li>TCP ç¡®è®¤å·ï¼ˆAcknowledgment Numberï¼ŒACK Numberï¼‰ï¼šå  32 ä½ã€‚å®ƒè¡¨ç¤ºæ¥æ”¶æ–¹æœŸæœ›æ”¶åˆ°å‘é€æ–¹ä¸‹ä¸€ä¸ªæŠ¥æ–‡æ®µçš„ç¬¬ä¸€ä¸ªå­—èŠ‚æ•°æ®çš„ç¼–å·ã€‚å…¶å€¼æ˜¯æ¥æ”¶è®¡ç®—æœºå³å°†æ¥æ”¶åˆ°çš„ä¸‹ä¸€ä¸ªåºåˆ—å·ï¼Œä¹Ÿå°±æ˜¯ä¸‹ä¸€ä¸ªæ¥æ”¶åˆ°çš„å­—èŠ‚çš„åºåˆ—å·åŠ 1ã€‚<strong>è§£å†³ç½‘ç»œä¸ä¸¢åŒ…é—®é¢˜</strong></li>\n</ul>\n</li>\n<li><p><em>Header Length</em> æ•°æ®åç§»å­—æ®µ </p>\n<ul>\n<li>TCP é¦–éƒ¨é•¿åº¦ï¼ˆHeader Lengthï¼‰ï¼šæ•°æ®åç§»æ˜¯æŒ‡æ•°æ®æ®µä¸­çš„â€œæ•°æ®â€éƒ¨åˆ†èµ·å§‹å¤„è·ç¦» TCP æ•°æ®æ®µèµ·å§‹å¤„çš„å­—èŠ‚åç§»é‡ï¼Œå  4 ä½ã€‚å…¶å®è¿™é‡Œçš„â€œæ•°æ®åç§»â€ä¹Ÿæ˜¯åœ¨ç¡®å®š TCP æ•°æ®æ®µå¤´éƒ¨åˆ†çš„é•¿åº¦ï¼Œå‘Šè¯‰æ¥æ”¶ç«¯çš„åº”ç”¨ç¨‹åºï¼Œæ•°æ®ä»ä½•å¤„å¼€å§‹ã€‚</li>\n</ul>\n</li>\n<li><p><em>Reserved</em> ä¿ç•™å­—æ®µ 4bit ä¸º TCP å°†æ¥çš„å‘å±•é¢„ç•™ç©ºé—´ï¼Œç›®å‰å¿…é¡»å…¨éƒ¨ä¸º 0ã€‚</p>\n</li>\n<li><p>æ ‡å¿—ä½å­—æ®µ</p>\n<blockquote>\n<p>SYN æ˜¯å‘èµ·ä¸€ä¸ªè¿æ¥ï¼ŒACK æ˜¯å›å¤ï¼ŒRST æ˜¯é‡æ–°è¿æ¥ï¼ŒFINç»“æŸè¿æ¥ã€‚æ³¨æ„è¿™å‡ ä¸ªæ ‡å¿—ä½ã€‚</p>\n</blockquote>\n<ul>\n<li>CWRï¼ˆCongestion Window Reduceï¼‰ï¼šæ‹¥å¡çª—å£å‡å°‘æ ‡å¿—ï¼Œç”¨æ¥è¡¨æ˜å®ƒæ¥æ”¶åˆ°äº†è®¾ç½® ECE æ ‡å¿—çš„ TCP åŒ…ã€‚å¹¶ä¸”ï¼Œå‘é€æ–¹æ”¶åˆ°æ¶ˆæ¯ä¹‹åï¼Œé€šè¿‡å‡å°å‘é€çª—å£çš„å¤§å°æ¥é™ä½å‘é€é€Ÿç‡ã€‚</li>\n<li>ECEï¼ˆECN Echoï¼‰ï¼šç”¨æ¥åœ¨ TCP ä¸‰æ¬¡æ¡æ‰‹æ—¶è¡¨æ˜ä¸€ä¸ª TCP ç«¯æ˜¯å…·å¤‡ ECN åŠŸèƒ½çš„ã€‚åœ¨æ•°æ®ä¼ è¾“è¿‡ç¨‹ä¸­ï¼Œå®ƒä¹Ÿç”¨æ¥è¡¨æ˜æ¥æ”¶åˆ°çš„ TCP åŒ…çš„ IP å¤´éƒ¨çš„ ECN è¢«è®¾ç½®ä¸º 11ï¼Œå³ç½‘ç»œçº¿è·¯æ‹¥å µã€‚</li>\n<li>URGï¼ˆUrgentï¼‰ï¼šè¡¨ç¤ºæœ¬æŠ¥æ–‡æ®µä¸­å‘é€çš„æ•°æ®æ˜¯å¦åŒ…å«ç´§æ€¥æ•°æ®ã€‚URG=1 æ—¶è¡¨ç¤ºæœ‰ç´§æ€¥æ•°æ®ã€‚å½“ URG=1 æ—¶ï¼Œåé¢çš„ç´§æ€¥æŒ‡é’ˆå­—æ®µæ‰æœ‰æ•ˆã€‚</li>\n<li><strong>ACK</strong>ï¼šè¡¨ç¤ºå‰é¢çš„ç¡®è®¤å·å­—æ®µæ˜¯å¦æœ‰æ•ˆã€‚ACK=1 æ—¶è¡¨ç¤ºæœ‰æ•ˆã€‚åªæœ‰å½“ ACK=1 æ—¶ï¼Œå‰é¢çš„ç¡®è®¤å·å­—æ®µæ‰æœ‰æ•ˆã€‚TCP è§„å®šï¼Œè¿æ¥å»ºç«‹åï¼ŒACK å¿…é¡»ä¸º 1ã€‚</li>\n<li>PSHï¼ˆPushï¼‰ï¼šå‘Šè¯‰å¯¹æ–¹æ”¶åˆ°è¯¥æŠ¥æ–‡æ®µåæ˜¯å¦ç«‹å³æŠŠæ•°æ®æ¨é€ç»™ä¸Šå±‚ã€‚å¦‚æœå€¼ä¸º 1ï¼Œè¡¨ç¤ºåº”å½“ç«‹å³æŠŠæ•°æ®æäº¤ç»™ä¸Šå±‚ï¼Œè€Œä¸æ˜¯ç¼“å­˜èµ·æ¥ã€‚</li>\n<li><strong>RST</strong>ï¼šè¡¨ç¤ºæ˜¯å¦é‡ç½®è¿æ¥ã€‚å¦‚æœ RST=1ï¼Œè¯´æ˜ TCP è¿æ¥å‡ºç°äº†ä¸¥é‡é”™è¯¯ï¼ˆå¦‚ä¸»æœºå´©æºƒï¼‰ï¼Œå¿…é¡»é‡Šæ”¾è¿æ¥ï¼Œç„¶åå†é‡æ–°å»ºç«‹è¿æ¥ã€‚</li>\n<li><strong>SYN</strong>ï¼šåœ¨å»ºç«‹è¿æ¥æ—¶ä½¿ç”¨ï¼Œç”¨æ¥åŒæ­¥åºå·ã€‚å½“ SYN=1ï¼ŒACK=0 æ—¶ï¼Œè¡¨ç¤ºè¿™æ˜¯ä¸€ä¸ªè¯·æ±‚å»ºç«‹è¿æ¥çš„æŠ¥æ–‡æ®µï¼›å½“ SYN=1ï¼ŒACK=1 æ—¶ï¼Œè¡¨ç¤ºå¯¹æ–¹åŒæ„å»ºç«‹è¿æ¥ã€‚SYN=1 æ—¶ï¼Œè¯´æ˜è¿™æ˜¯ä¸€ä¸ªè¯·æ±‚å»ºç«‹è¿æ¥æˆ–åŒæ„å»ºç«‹è¿æ¥çš„æŠ¥æ–‡ã€‚åªæœ‰åœ¨å‰ä¸¤æ¬¡æ¡æ‰‹ä¸­ SYN æ‰ä¸º 1ã€‚</li>\n<li><strong>FIN</strong>ï¼šæ ‡è®°æ•°æ®æ˜¯å¦å‘é€å®Œæ¯•ã€‚å¦‚æœ FIN=1ï¼Œè¡¨ç¤ºæ•°æ®å·²ç»å‘é€å®Œæˆï¼Œå½“é€šä¿¡ç»“æŸå¸Œæœ›æ–­å¼€è¿æ¥æ—¶ï¼Œé€šä¿¡åŒæ–¹çš„ä¸»æœºä¹‹é—´å°±å¯ä»¥ç›¸äº’äº¤æ¢ <code>FIN</code> ä½ç½®ä¸º 1 çš„ TCP æ®µã€‚</li>\n</ul>\n</li>\n<li><p><em>Window Size</em> çª—å£å¤§å°å­—æ®µ 16bit </p>\n<ul>\n<li>å®ƒè¡¨ç¤ºä» Ack Number å¼€å§‹è¿˜å¯ä»¥æ¥æ”¶å¤šå°‘å­—èŠ‚çš„æ•°æ®é‡ï¼Œä¹Ÿè¡¨ç¤ºå½“å‰æ¥æ”¶ç«¯çš„æ¥æ”¶çª—å£è¿˜æœ‰å¤šå°‘å‰©ä½™ç©ºé—´ã€‚è¯¥å­—æ®µå¯ä»¥ç”¨äº <strong>TCP çš„æµé‡æ§åˆ¶</strong>ã€‚</li>\n</ul>\n</li>\n<li><p><em>TCP Checksum</em> TCP æ ¡éªŒå­—æ®µ 16bit</p>\n<ul>\n<li>å®ƒç”¨äº<strong>ç¡®è®¤ä¼ è¾“çš„æ•°æ®æ˜¯å¦æœ‰æŸå</strong>ã€‚å‘é€ç«¯åŸºäºæ•°æ®å†…å®¹æ ¡éªŒç”Ÿæˆä¸€ä¸ªæ•°å€¼ï¼Œæ¥æ”¶ç«¯æ ¹æ®æ¥æ”¶çš„æ•°æ®æ ¡éªŒç”Ÿæˆä¸€ä¸ªå€¼ã€‚ä¸¤ä¸ªå€¼å¿…é¡»ç›¸åŒï¼Œæ‰èƒ½è¯æ˜æ•°æ®æ˜¯æœ‰æ•ˆçš„ã€‚å¦‚æœä¸¤ä¸ªå€¼ä¸åŒï¼Œåˆ™ä¸¢æ‰è¿™ä¸ªæ•°æ®åŒ…ã€‚Checksum æ˜¯æ ¹æ®ä¼ªå¤´ + TCP å¤´ + TCP æ•°æ®ä¸‰éƒ¨åˆ†è¿›è¡Œè®¡ç®—çš„ã€‚</li>\n</ul>\n</li>\n<li><p><em>Urgent Pointer</em> ç´§æ€¥æŒ‡é’ˆå­—æ®µ </p>\n<ul>\n<li>ä»…å½“å‰é¢çš„ URG æ§åˆ¶ä½ä¸º 1 æ—¶æ‰æœ‰æ„ä¹‰ã€‚å®ƒæŒ‡å‡ºæœ¬æ•°æ®æ®µä¸­ä¸ºç´§æ€¥æ•°æ®çš„å­—èŠ‚æ•°ï¼Œå  16 ä½ã€‚å½“æ‰€æœ‰ç´§æ€¥æ•°æ®å¤„ç†å®Œåï¼ŒTCP å°±ä¼šå‘Šè¯‰åº”ç”¨ç¨‹åºæ¢å¤åˆ°æ­£å¸¸æ“ä½œã€‚å³ä½¿å½“å‰çª—å£å¤§å°ä¸º 0ï¼Œä¹Ÿæ˜¯å¯ä»¥å‘é€ç´§æ€¥æ•°æ®çš„ï¼Œå› ä¸ºç´§æ€¥æ•°æ®æ— é¡»ç¼“å­˜ã€‚</li>\n</ul>\n</li>\n<li><p><em>Option</em> å¯é€‰é¡¹å­—æ®µ</p>\n<ul>\n<li>é•¿åº¦ä¸å®šï¼Œä½†é•¿åº¦å¿…é¡»æ˜¯ 32bits çš„æ•´æ•°å€ã€‚</li>\n</ul>\n</li>\n</ul>\n<h5 id=\"TCPçŠ¶æ€\"><a href=\"#TCPçŠ¶æ€\" class=\"headerlink\" title=\"TCPçŠ¶æ€\"></a>TCPçŠ¶æ€</h5><blockquote>\n<p>TCPçš„çŠ¶æ€å˜è¿å›¾æ›´ç»†è‡´çš„æè¿°äº†TCPè¿æ¥å»ºç«‹å’Œè¿æ¥ç»ˆæ­¢ä¸­çš„å„ä¸ªçŠ¶æ€</p>\n</blockquote>\n<p><img src=\"https://z201.oss-cn-shanghai.aliyuncs.com/JavaNote/20211123232928.png\"></p>\n<h5 id=\"ä¸‰æ¬¡æ¡æ‰‹å»ºç«‹è¿æ¥\"><a href=\"#ä¸‰æ¬¡æ¡æ‰‹å»ºç«‹è¿æ¥\" class=\"headerlink\" title=\"ä¸‰æ¬¡æ¡æ‰‹å»ºç«‹è¿æ¥\"></a>ä¸‰æ¬¡æ¡æ‰‹å»ºç«‹è¿æ¥</h5><blockquote>\n<p>æ¡æ‰‹çš„ä¸»è¦è¡Œä¸º SYN åŒæ­¥ ACK ç¡®è®¤ </p>\n<ol>\n<li><p>åŒæ­¥Sequenceåºåˆ—å·ï¼Œåˆå§‹åŒ–åºåˆ—å·ISNï¼ˆInital Sequence Numberï¼‰</p>\n</li>\n<li><p>äº¤æ¢TCPé€šè®¯å‚æ•°ï¼Œæ¯”å¦‚MSSã€çª—å£æ¯”ä¾‹å› å­ã€é€‰æ‹©æ€§ç¡®è®¤ã€æŒ‡å®šæ ¡éªŒç®—æ³•</p>\n</li>\n<li><p>é˜²æ­¢å¤±æ•ˆçš„è¿æ¥è¯·æ±‚è®¿é—®åˆ°æœåŠ¡å™¨ç«¯ï¼Œè®©æœåŠ¡å™¨è¯¯è®¤ä¸ºè¦å»ºç«‹è¿æ¥ã€‚</p>\n</li>\n</ol>\n</blockquote>\n<p><img src=\"https://z201.oss-cn-shanghai.aliyuncs.com/JavaNote/20211208200222.png\"></p>\n<ul>\n<li><p>è¿‡ç¨‹</p>\n<ul>\n<li>Client å‘é€ è‡ªèº«çš„SYN åˆ° Server ï¼Œå¹¶åŒ…å«åˆå§‹åŒ–åºåˆ—å·</li>\n<li>Server å‘é€ä¸€ä¸ª SYN å’Œ ACK åœ¨åŒä¸€ä¸ªæŠ¥æ–‡ä¸­ ç»™Client  ï¼Œ </li>\n<li>Client å‘é€ä¸€ä¸ª ACK ç»™ Server</li>\n</ul>\n</li>\n<li><p>å®è·µè¿‡ç¨‹</p>\n<ul>\n<li>å‡†å¤‡ä¸€å°linxu Centos ä¸”å®‰è£…å¥½ tcpdump </li>\n<li><code>yum install tcpdump</code></li>\n<li><code>tcpdump -i eth0 -w out_3.pcap tcp port 80 -c 3 -S</code>  ç›‘å¬eth0ç½‘å¡ã€å°†å†…å®¹è¾“å‡ºåˆ°out_3.pacp æ–¹ä¾¿ Wireshark åˆ†æ ã€ç›‘å¬tcp åè®® ç«¯å£ 80 åªä¿ç•™å‰3ä¸ªåŒ…ï¼Œç”¨ç»å¯¹åºåˆ—å·ä»£æ›¿ç›¸å¯¹åºåˆ—åŒ–ã€‚åœ¨å®¢æˆ·ç«¯ä½¿ç”¨ curlå‘½ä»¤è®¿é—®å¯¹äºæœåŠ¡å³å¯ã€‚</li>\n</ul>\n<p><img src=\"https://z201.oss-cn-shanghai.aliyuncs.com/JavaNote/20211203154224.png\"></p>\n<ul>\n<li>ç¬¬ä¸€æ¬¡æ¡æ‰‹å®¢æˆ·ç«¯å‘é€è‡ªèº«åºåˆ—å· 2883770579 å¹¶ä¸” å°† syn è®¾ç½®ä¸º 1  </li>\n</ul>\n<p><img src=\"https://z201.oss-cn-shanghai.aliyuncs.com/JavaNote/20211203155019.png\"></p>\n<pre><code>- ç¬¬äºŒæ¬¡æ¡æ‰‹ å°† synè®¾ç½®ä¸º 1 ã€ack è®¾ç½®ä¸º 1ï¼Œ å¹¶ä¸”è¿”å›ç¡®è®¤æŠ¥æ–‡ack 2883770579 + 1 = 2883770580 ã€‚</code></pre>\n<p><img src=\"https://z201.oss-cn-shanghai.aliyuncs.com/JavaNote/20211203155507.png\"></p>\n<ul>\n<li>ç¬¬ä¸‰æ¬¡æ¡æ‰‹ å°†ACKè®¾ç½®æˆ1 ï¼Œ ç¡®è®¤æŠ¥æ–‡ack 2054592687 + 1 = 2054592689 ã€‚</li>\n</ul>\n<p><img src=\"https://z201.oss-cn-shanghai.aliyuncs.com/JavaNote/20211208200251.png\"></p>\n</li>\n</ul>\n<h5 id=\"å››æ¬¡æŒ¥æ‰‹å…³é—­è¿æ¥\"><a href=\"#å››æ¬¡æŒ¥æ‰‹å…³é—­è¿æ¥\" class=\"headerlink\" title=\"å››æ¬¡æŒ¥æ‰‹å…³é—­è¿æ¥\"></a>å››æ¬¡æŒ¥æ‰‹å…³é—­è¿æ¥</h5><blockquote>\n<p>TCPæ˜¯å…¨åŒå·¥çš„ï¼Œä¸”å­˜åœ¨åŠå…³é—­(half-close)çŠ¶æ€çš„å­˜åœ¨ï¼Œæ‰€ä»¥ç»ˆæ­¢TCPåè®®éœ€è¦4æ¬¡æ¡æ‰‹ã€‚è¿æ¥åŒæ–¹éƒ½éœ€è¦å…³é—­è¿æ¥ã€‚</p>\n</blockquote>\n<p><img src=\"https://z201.oss-cn-shanghai.aliyuncs.com/JavaNote/20211203152951.png\"></p>\n<ul>\n<li><p>è¿‡ç¨‹</p>\n<ul>\n<li>Clinet å‘é€è‡ªèº« FIN Måˆ° Server </li>\n<li>Server å‘é€ä¸€ä¸ªACK åˆ‡ M + 1 ç»™ Client</li>\n<li>Server å‘é€ FIN N åˆ° Client </li>\n<li>Client å‘é€ ACK N + 1 åˆ° Server</li>\n</ul>\n</li>\n<li><p>å®è·µè¿‡ç¨‹</p>\n<ul>\n<li><code>tcpdump -i eth0 -w out_3.pcap tcp port 80  -S</code></li>\n</ul>\n<p><img src=\"https://z201.oss-cn-shanghai.aliyuncs.com/JavaNote/20211203165015.png\"></p>\n<ul>\n<li>ä¸çŸ¥é“ä¸ºä»€ä¹ˆä¸æ˜¯å››æ¬¡ï¼Œåœ¨å®¢æˆ·ç«¯å‘é€å®Œè¯·æ±‚åï¼Œä¸ä¼šç«‹åˆ»å…³é—­è¿æ¥ï¼Œä»ç„¶å¤„äºestablishçŠ¶æ€ï¼ŒçŸ­è¿æ¥ä¼šç»è¿‡fin-wait1 fin wait2 time_wait</li>\n</ul>\n</li>\n</ul>\n<h5 id=\"MSSåˆ†æ®µ\"><a href=\"#MSSåˆ†æ®µ\" class=\"headerlink\" title=\"MSSåˆ†æ®µ\"></a>MSSåˆ†æ®µ</h5><blockquote>\n<p>å®¢æˆ·ç«¯ä¸æœåŠ¡å™¨ä¹‹é—´çš„é€šä¿¡æ˜¯ä¸€ä¸ªæ•°æ®ä¼ è¾“è¿‡ç¨‹ã€‚é€šä¿¡çš„æ¶ˆæ¯å°†ä»¥æ•°æ®åŒ…å½¢å¼è¿›è¡Œä¼ è¾“ã€‚TCP åè®®åœ¨æ•°æ®è¿›è¡Œæ•°æ®ä¼ è¾“æ—¶ï¼Œä½¿ç”¨æ»‘åŠ¨çª—å£æœºåˆ¶æ¥åŒæ—¶å‘é€å¤šä¸ªæ•°æ®åŒ…ã€‚å½“æ•°æ®åŒ…ä¸¢å¤±æ—¶ï¼ŒTCP åè®®åˆ©ç”¨æ•°æ®é‡å‘åŠŸèƒ½é‡æ–°å‘é€æ•°æ®åŒ…ã€‚å› æ¥æ”¶ç«¯æ¥æ”¶æ•°æ®åŒ…çš„èƒ½åŠ›ä¸åŒï¼ŒTCP æµæ§åˆ¶ä¼šæ ¹æ®æ¥æ”¶ç«¯çš„èƒ½åŠ›å‘é€é€‚å½“æ•°é‡çš„æ•°æ®åŒ…ã€‚</p>\n</blockquote>\n<ul>\n<li>æ•°æ®åˆ†ç‰‡<ul>\n<li>æ•°æ®åœ¨ä¼ è¾“çš„è¿‡ç¨‹ä¸­ï¼Œä¼šç»è¿‡å¾ˆå¤šçš„ç‰©ç†è®¾å¤‡ï¼Œè¿™äº›è®¾å¤‡å¤„ç†çš„æ•°æ®éƒ½æœ‰ä¸€äº›é™åˆ¶ï¼Œå› æ­¤åœ¨å‘é€æ•°æ®éƒ½æ˜¯å¥½ä¸èƒ½è¶…è¿‡æœ€å¤§çš„å­—èŠ‚æ•°ã€‚è¿™ä¸ªæœ€å¤§çš„å­—èŠ‚æ•°å°±æ˜¯ï¼ˆMaximum Segment Sizeï¼ŒMSSï¼‰ã€‚å½“è¦å‘é€çš„æ•°æ®è¶…è¿‡è¯¥å€¼çš„æ—¶å€™ï¼Œå°±éœ€è¦å°†æ•°æ®æ‹†åˆ†ä¸ºå¤šä¸ªåŒ…ï¼Œä¾æ¬¡å‘é€ã€‚</li>\n</ul>\n</li>\n</ul>\n<h5 id=\"TCPæµé‡æ§åˆ¶\"><a href=\"#TCPæµé‡æ§åˆ¶\" class=\"headerlink\" title=\"TCPæµé‡æ§åˆ¶\"></a>TCPæµé‡æ§åˆ¶</h5><h5 id=\"TCPé˜»å¡æ§åˆ¶\"><a href=\"#TCPé˜»å¡æ§åˆ¶\" class=\"headerlink\" title=\"TCPé˜»å¡æ§åˆ¶\"></a>TCPé˜»å¡æ§åˆ¶</h5><h5 id=\"TCPçš„RST\"><a href=\"#TCPçš„RST\" class=\"headerlink\" title=\"TCPçš„RST\"></a>TCPçš„RST</h5><h4 id=\"UDP\"><a href=\"#UDP\" class=\"headerlink\" title=\"UDP\"></a>UDP</h4><blockquote>\n<p>DNS,SNMPå’ŒTFTPéƒ½æ˜¯ä½¿ç”¨UDPï¼Œå®é™…ä¸ŠDNSå’ŒSNMPæ—¢å¯ä»¥ä½¿ç”¨TCPä¹Ÿå¯ä»¥ä½¿ç”¨UDPã€‚ç›¸æ¯”TCPï¼ŒUDPæä¾›äº†æ•ˆç‡ï¼ŒTCPåœ¨ä½¿ç”¨è¿‡ç¨‹ä¸­æœ‰å¤ªå¤šçš„å¼€é”€ï¼Œå®é™…ä¸Šå¹¶ä¸æ˜¯æ‰€æœ‰çš„åœºæ™¯éƒ½éœ€è¦TCPå¯é çš„é€šä¿¡æœºåˆ¶ï¼Œæ¯”å¦‚DNS</p>\n</blockquote>\n<ul>\n<li><strong>æ— è¿æ¥</strong> ä¸æä¾›å¤æ‚çš„æ§åˆ¶æœºåˆ¶ï¼Œåˆ©ç”¨ IP æä¾›é¢å‘ã€Œæ— è¿æ¥ã€çš„é€šä¿¡æœåŠ¡</li>\n<li>åè®®çœŸçš„éå¸¸ç®€æ´ï¼Œå¤´éƒ¨åªæœ‰ <code>8</code> ä¸ªå­—èŠ‚ï¼ˆ 64 ä½ï¼‰</li>\n</ul>\n<h5 id=\"UDPæŠ¥æ–‡æ ¼å¼\"><a href=\"#UDPæŠ¥æ–‡æ ¼å¼\" class=\"headerlink\" title=\"UDPæŠ¥æ–‡æ ¼å¼\"></a>UDPæŠ¥æ–‡æ ¼å¼</h5><p><img src=\"https://z201.oss-cn-shanghai.aliyuncs.com/JavaNote/20211124012658.png\"></p>\n<h5 id=\"æŠ¥æ–‡å­—æ®µå«ä¹‰-1\"><a href=\"#æŠ¥æ–‡å­—æ®µå«ä¹‰-1\" class=\"headerlink\" title=\"æŠ¥æ–‡å­—æ®µå«ä¹‰\"></a>æŠ¥æ–‡å­—æ®µå«ä¹‰</h5><ul>\n<li><em>Source Prot</em> æºç«¯å£ 16bit èŒƒå›´ 0 ~ 56625</li>\n<li><em>Destination Port</em> ç›®æ ‡ç«¯å£ 16bit èŒƒå›´ 0 ~ 56625</li>\n<li><em>Length</em> é•¿åº¦ 16bit è¡¨ç¤º UDP æ•°æ®æŠ¥é•¿åº¦ï¼ŒåŒ…å« UDP æŠ¥æ–‡å¤´å’Œ UDP æ•°æ®é•¿åº¦ã€‚å› ä¸º UDP æŠ¥æ–‡å¤´é•¿åº¦æ˜¯ 8 ä¸ªå­—èŠ‚ï¼Œæ‰€ä»¥è¿™ä¸ªå€¼æœ€å°ä¸º 8ã€‚</li>\n<li><em>checksum</em> æ ¡éªŒå€¼ 16bit å¯ä»¥æ£€éªŒæ•°æ®åœ¨ä¼ è¾“è¿‡ç¨‹ä¸­æ˜¯å¦è¢«æŸåã€‚</li>\n</ul>\n<h4 id=\"IP\"><a href=\"#IP\" class=\"headerlink\" title=\"IP\"></a>IP</h4><blockquote>\n<p>IPåè®®æ˜¯TCP/IPåè®®çš„æ ¸å¿ƒï¼Œæ‰€æœ‰çš„TCPï¼ŒUDPï¼ŒIMCPï¼ŒIGMPçš„æ•°æ®éƒ½ä»¥IPæ•°æ®æ ¼å¼ä¼ è¾“ã€‚è¦æ³¨æ„çš„æ˜¯ï¼ŒIPä¸æ˜¯å¯é çš„åè®®ï¼Œè¿™æ˜¯è¯´ï¼ŒIPåè®®æ²¡æœ‰æä¾›ä¸€ç§æ•°æ®æœªä¼ è¾¾ä»¥åçš„å¤„ç†æœºåˆ¶ï¼Œè¿™è¢«è®¤ä¸ºæ˜¯ä¸Šå±‚åè®®ï¼šTCPæˆ–UDPè¦åšçš„äº‹æƒ…ã€‚</p>\n</blockquote>\n<ul>\n<li>æ— è¿æ¥ã€éå¯é ã€æ— ç¡®è®¤ã€‚</li>\n<li>IPåè®®æä¾›äº†ä¸€ç§åˆ†å±‚ã€ä¸ç¡¬ä»¶æ— å…³çš„å¯»å€ç³»ç»Ÿï¼Œå®ƒå¯ä»¥åœ¨å¤æ‚çš„è·¯ç”±å¼ç½‘ç»œä¸­ä¼ è¾“æ•°æ®æœåŠ¡ã€‚</li>\n<li>IPåè®®å¯ä»¥å°†å¤šä¸ªç½‘ç»œè¿æ¥èµ·æ¥ï¼Œåœ¨æºåœ°å€å’Œç›®çš„åœ°å€ä¹‹é—´ä¼ è¾“æ•°æ®ï¼Œä»¥é€‚åº”ä¸åŒç½‘ç»œå¯¹æ•°æ®åŒ…çš„è¦æ±‚ã€‚</li>\n</ul>\n<h3 id=\"HTTP-HTTPS\"><a href=\"#HTTP-HTTPS\" class=\"headerlink\" title=\"HTTP/HTTPS\"></a>HTTP/HTTPS</h3><blockquote>\n<p>HTTP å°±æ˜¯è¶…æ–‡æœ¬ä¼ è¾“åè®®ï¼Œä¹Ÿå°±æ˜¯ HyperText Transfer Protocolã€‚HTTP over SSL/TLS ä¹Ÿå°±æ˜¯è¿è¡Œåœ¨ SSL/TLS åè®®ä¸Šçš„ HTTPã€‚</p>\n</blockquote>\n<p><img src=\"https://z201.oss-cn-shanghai.aliyuncs.com/JavaNote/20211206141044.png\"></p>\n<ul>\n<li><p>HTTPé‡è¦é‡Œç¨‹ç¢‘çš„æ—¶é—´ç‚¹</p>\n<ul>\n<li>Http0.9 -&gt; 1991</li>\n</ul>\n</li>\n<li><p>Http1.0 -&gt;1996</p>\n<ul>\n<li>Http 1.1 -&gt; 1999</li>\n</ul>\n</li>\n<li><p>Http2 -&gt; 2015</p>\n</li>\n<li><p>HTML è¶…æ–‡æœ¬æ ‡è®°è¯­è¨€</p>\n</li>\n</ul>\n<h4 id=\"HTTP1-1\"><a href=\"#HTTP1-1\" class=\"headerlink\" title=\"HTTP1.1\"></a>HTTP1.1</h4><blockquote>\n<p>1995 å¹´ï¼Œç½‘æ™¯çš„ Netscape Navigator å’Œå¾®è½¯çš„ Internet Explorer å¼€å§‹äº†è‘—åçš„â€œæµè§ˆå™¨å¤§æˆ˜â€ï¼Œéƒ½å¸Œæœ›åœ¨äº’è”ç½‘ä¸Šå æ®ä¸»å¯¼åœ°ä½ã€‚</p>\n</blockquote>\n<h4 id=\"HTTP2\"><a href=\"#HTTP2\" class=\"headerlink\" title=\"HTTP2\"></a>HTTP2</h4><blockquote>\n<p>HTTP/2 åŸºäº Google çš„ SPDY åè®®ï¼Œæ³¨é‡æ€§èƒ½æ”¹å–„ã€‚</p>\n</blockquote>\n<h4 id=\"HTTP3\"><a href=\"#HTTP3\" class=\"headerlink\" title=\"HTTP3\"></a>HTTP3</h4><blockquote>\n<p>HTTP/3 åŸºäº Google çš„ QUIC åè®®ï¼Œæ˜¯å°†æ¥çš„å‘å±•æ–¹å‘ã€‚</p>\n</blockquote>\n<h4 id=\"Proxy\"><a href=\"#Proxy\" class=\"headerlink\" title=\"Proxy\"></a>Proxy</h4><blockquote>\n<p>Http Proxyæ˜¯Httpåè®®ä¸­çš„ä¸€ä¸ªç¯èŠ‚ï¼Œä¸­è½¬ç«™å¯ä»¥è½¬å‘å®¢æˆ·ç«¯è¯·æ±‚ä¹Ÿå¯ä»¥è½¬å‘æœåŠ¡ç«¯åº”ç­”ã€‚</p>\n</blockquote>\n<ul>\n<li>åŒ¿åä»£ç†ï¼šå®Œå…¨â€œéšåŒ¿â€äº†è¢«ä»£ç†çš„æœºå™¨ï¼Œå¤–ç•Œçœ‹åˆ°çš„åªæ˜¯ä»£ç†æœåŠ¡å™¨ã€‚</li>\n<li>é€æ˜ä»£ç†ï¼šé¡¾åæ€ä¹‰ï¼Œå®ƒåœ¨ä¼ è¾“è¿‡ç¨‹ä¸­æ˜¯â€œé€æ˜å¼€æ”¾â€çš„ï¼Œå¤–ç•Œæ—¢çŸ¥é“ä»£ç†ï¼Œä¹ŸçŸ¥é“å®¢æˆ·ç«¯ã€‚</li>\n<li>æ­£å‘ä»£ç†ï¼šé è¿‘å®¢æˆ·ç«¯ï¼Œä»£è¡¨å®¢æˆ·ç«¯å‘æœåŠ¡å™¨å‘é€è¯·æ±‚ã€‚</li>\n<li>åå‘ä»£ç†ï¼šé è¿‘æœåŠ¡å™¨ç«¯ï¼Œä»£è¡¨æœåŠ¡å™¨å“åº”å®¢æˆ·ç«¯çš„è¯·æ±‚ã€‚</li>\n</ul>\n<h4 id=\"SSL-TLS\"><a href=\"#SSL-TLS\" class=\"headerlink\" title=\"SSL/TLS\"></a>SSL/TLS</h4><blockquote>\n<p><em>TLS</em> æ˜¯<em>SSL</em> çš„æ”¹è‰¯ç‰ˆæœ¬</p>\n</blockquote>\n<h3 id=\"æ‰©å±•\"><a href=\"#æ‰©å±•\" class=\"headerlink\" title=\"æ‰©å±•\"></a>æ‰©å±•</h3><h4 id=\"æè¿°ä¸‹GETä¸POSTçš„åŒºåˆ«ã€‚\"><a href=\"#æè¿°ä¸‹GETä¸POSTçš„åŒºåˆ«ã€‚\" class=\"headerlink\" title=\"æè¿°ä¸‹GETä¸POSTçš„åŒºåˆ«ã€‚\"></a>æè¿°ä¸‹GETä¸POSTçš„åŒºåˆ«ã€‚</h4><ul>\n<li>GETå’ŒPOSTæ˜¯HTTPè¯·æ±‚çš„ä¸¤ç§åŸºæœ¬æ–¹æ³•ã€‚<ul>\n<li>GETï¼šç‰¹å®šæµè§ˆå™¨å’ŒæœåŠ¡å™¨å¯¹URLé•¿åº¦æœ‰é™åˆ¶ï¼Œä¾‹å¦‚ IEå¯¹URLé•¿åº¦çš„é™åˆ¶æ˜¯2083å­—èŠ‚(2K+35)ã€‚ç†è®ºä¸Šæ²¡æœ‰é•¿åº¦é™åˆ¶ï¼Œå…¶é™åˆ¶å–å†³äºæ“ä½œç³» ç»Ÿçš„æ”¯æŒã€‚æ‰€ä»¥GETæäº¤æ—¶ï¼Œä¼ è¾“æ•°æ®å°±ä¼šå—åˆ°URLé•¿åº¦çš„é™åˆ¶ã€‚</li>\n<li>POSTï¼šç”±äºä¸æ˜¯é€šè¿‡URLä¼ å€¼ï¼Œç†è®ºä¸Šæ•°æ®ä¸å—é™ã€‚ä½†å®é™…å„ä¸ªWEBæœåŠ¡å™¨ä¼šè§„å®šå¯¹postæäº¤æ•°æ®å¤§å°è¿›è¡Œé™åˆ¶ã€‚</li>\n</ul>\n</li>\n<li>GETå’ŒPOSTæœ¬è´¨ä¸Šæ²¡æœ‰åŒºåˆ«,åªæ˜¯åœ¨æµè§ˆå™¨ä¸Šç›´è§‚ä½“ç°æ–¹å¼ä¸åŒã€‚GETå’ŒPOSTæœ¬è´¨ä¸Šå°±æ˜¯TCPé“¾æ¥ï¼Œå¹¶æ— å·®åˆ«ã€‚ä½†æ˜¯ç”±äºHTTPçš„è§„å®šå’Œæµè§ˆå™¨/æœåŠ¡å™¨çš„é™åˆ¶ï¼Œå¯¼è‡´ä»–ä»¬åœ¨åº”ç”¨è¿‡ç¨‹ä¸­ä½“ç°å‡ºä¸€äº›ä¸åŒã€‚</li>\n<li>GETäº§ç”Ÿä¸€ä¸ªTCPæ•°æ®åŒ…;POSTäº§ç”Ÿä¸¤ä¸ªTCPæ•°æ®åŒ…ã€‚<ul>\n<li>å¯¹äºGETæ–¹å¼çš„è¯·æ±‚ï¼Œæµè§ˆå™¨ä¼šæŠŠhttp headerå’Œdataä¸€å¹¶å‘é€å‡ºå»ï¼ŒæœåŠ¡å™¨å“åº”200(è¿”å›æ•°æ®);</li>\n<li>è€Œå¯¹äºPOSTï¼Œæµè§ˆå™¨å…ˆå‘é€headerï¼ŒæœåŠ¡å™¨å“åº”100 continueï¼Œæµè§ˆå™¨å†å‘é€dataï¼ŒæœåŠ¡å™¨å“åº”200 ok(è¿”å›æ•°æ®)ã€‚</li>\n<li>åœ¨ç½‘ç»œç¯å¢ƒå¥½çš„æƒ…å†µä¸‹ï¼Œå‘ä¸€æ¬¡åŒ…çš„æ—¶é—´å’Œå‘ä¸¤æ¬¡åŒ…çš„æ—¶é—´å·®åˆ«åŸºæœ¬å¯ä»¥æ— è§†ã€‚è€Œåœ¨ç½‘ç»œç¯å¢ƒå·®çš„æƒ…å†µä¸‹ï¼Œä¸¤æ¬¡åŒ…çš„TCPåœ¨éªŒè¯æ•°æ®åŒ…å®Œæ•´æ€§ä¸Šï¼Œæœ‰éå¸¸å¤§çš„ä¼˜ç‚¹ï¼Œä¸€èˆ¬çš„æµè§ˆPOSTä¼šå‘é€ä¸¤æ¬¡ï¼Œä½†æ˜¯Firefoxå°±å‘é€ä¸€æ¬¡ã€‚</li>\n</ul>\n</li>\n<li>å®‰å…¨æ€§<ul>\n<li>åœ¨æ²¡æœ‰åŠ å¯†çš„æƒ…å†µå®‰å…¨æ€§æ˜¯ä¸€æ ·çš„,åœ¨æµè§ˆå™¨è°ƒè¯•æ¨¡å¼ä¸‹å¯ä»¥çœ‹åˆ°æ‰€æœ‰æ•°æ®çš„ã€‚</li>\n</ul>\n</li>\n</ul>\n<h4 id=\"æè¿°ä¸‹HTTP-Cookieã€‚\"><a href=\"#æè¿°ä¸‹HTTP-Cookieã€‚\" class=\"headerlink\" title=\"æè¿°ä¸‹HTTP Cookieã€‚\"></a>æè¿°ä¸‹HTTP Cookieã€‚</h4><ul>\n<li>ä¸€ä¸ªcookieå°±æ˜¯å­˜å‚¨åœ¨ç”¨æˆ·ä¸»æœºæµè§ˆå™¨ä¸­çš„ä¸€å°æ®µæ–‡æœ¬æ–‡ä»¶ã€‚Cookiesæ˜¯çº¯æ–‡æœ¬å½¢å¼ï¼Œå®ƒä»¬ä¸åŒ…å«ä»»ä½•å¯æ‰§è¡Œä»£ç ã€‚ä¸€ä¸ªWebé¡µé¢æˆ–æœåŠ¡å™¨å‘Šä¹‹æµè§ˆå™¨æ¥å°†è¿™äº›ä¿¡æ¯å­˜å‚¨å¹¶ä¸”åŸºäºä¸€ç³»åˆ—è§„åˆ™åœ¨ä¹‹åçš„æ¯ä¸ªè¯·æ±‚ä¸­éƒ½å°†è¯¥ä¿¡æ¯è¿”å›è‡³æœåŠ¡å™¨ã€‚WebæœåŠ¡å™¨ä¹‹åå¯ä»¥åˆ©ç”¨è¿™äº›ä¿¡æ¯æ¥æ ‡è¯†ç”¨æˆ·ã€‚å¤šæ•°éœ€è¦ç™»å½•çš„ç«™ç‚¹é€šå¸¸ä¼šåœ¨ä½ çš„è®¤è¯ä¿¡æ¯é€šè¿‡åæ¥è®¾ç½®ä¸€ä¸ªcookieï¼Œä¹‹ååªè¦è¿™ä¸ªcookieå­˜åœ¨å¹¶ä¸”åˆæ³•ï¼Œå°±å¯ä»¥è‡ªç”±çš„æµè§ˆè¿™ä¸ªç«™ç‚¹çš„æ‰€æœ‰éƒ¨åˆ†ã€‚å†æ¬¡ï¼Œcookieåªæ˜¯åŒ…å«äº†æ•°æ®ã€‚åœ¨åç»­çš„http è¯·æ±‚ä¸­ï¼Œæµè§ˆå™¨ä¼šå°†cookieå¸¦å›ç»™Web Serverã€‚åŒæ—¶åœ¨æµè§ˆå™¨å…è®¸è„šæœ¬æ‰§è¡Œçš„æƒ…å†µä¸‹ï¼ŒCookieæ˜¯å¯ä»¥è¢«JavaScriptç­‰è„šæœ¬è®¾ç½®çš„ã€‚</li>\n<li>Cookieçš„ç±»åˆ«ã€‚<ul>\n<li>Session Cookieè¿™ä¸ªç±»å‹çš„cookieåªåœ¨ä¼šè¯æœŸé—´å†…æœ‰æ•ˆï¼Œå³å½“å…³é—­æµè§ˆå™¨çš„æ—¶å€™ï¼Œå®ƒä¼šè¢«æµè§ˆå™¨åˆ é™¤ã€‚è®¾ç½®session cookieçš„åŠæ³•æ˜¯ï¼šåœ¨åˆ›å»ºcookieä¸è®¾ç½®Expireså³å¯ã€‚</li>\n<li>Persistent CookieæŒä¹…å‹cookieé¡¾åæ€ä¹‰å°±æ˜¯ä¼šé•¿æœŸåœ¨ç”¨æˆ·ä¼šè¯ä¸­ç”Ÿæ•ˆã€‚å½“ä½ è®¾ç½®cookieçš„å±æ€§Max-Ageä¸º1ä¸ªæœˆçš„è¯ï¼Œé‚£ä¹ˆåœ¨è¿™ä¸ªæœˆé‡Œæ¯ä¸ªç›¸å…³URLçš„httpè¯·æ±‚ä¸­éƒ½ä¼šå¸¦æœ‰è¿™ä¸ªcookieã€‚æ‰€ä»¥å®ƒå¯ä»¥è®°å½•å¾ˆå¤šç”¨æˆ·åˆå§‹åŒ–æˆ–è‡ªå®šä¹‰åŒ–çš„ä¿¡æ¯ï¼Œæ¯”å¦‚ä»€ä¹ˆæ—¶å€™ç¬¬ä¸€æ¬¡ç™»å½•åŠå¼±ç™»å½•æ€ç­‰ã€‚</li>\n<li>Secure cookieå®‰å…¨cookieæ˜¯åœ¨httpsè®¿é—®ä¸‹çš„cookieå½¢æ€ï¼Œä»¥ç¡®ä¿cookieåœ¨ä»å®¢æˆ·ç«¯ä¼ é€’åˆ°Serverçš„è¿‡ç¨‹ä¸­å§‹ç»ˆåŠ å¯†çš„ã€‚ä½†æ˜¯å¿…é¡»æ˜¯åœ¨HTTPSçš„æƒ…å†µæ‰æœ‰æ•ˆæœã€‚</li>\n<li>HttpOnly å±æ€§ï¼Œè¿™ä¸ªæ•°æ®è®¾ç½®ä¸ºtrueåï¼Œå®¢æˆ·ç«¯é€šè¿‡JSæ˜¯æ— æ³•è·å–åˆ°cookieä¿¡æ¯çš„ï¼ˆæš‚æ—¶çš„ï¼‰ã€‚</li>\n</ul>\n</li>\n</ul>\n<h4 id=\"æè¿°ä¸‹Servlet-Cookie-ä¸Sessionã€‚\"><a href=\"#æè¿°ä¸‹Servlet-Cookie-ä¸Sessionã€‚\" class=\"headerlink\" title=\"æè¿°ä¸‹Servlet Cookie ä¸Sessionã€‚\"></a>æè¿°ä¸‹Servlet Cookie ä¸Sessionã€‚</h4><ul>\n<li><p>å…·ä½“æ¥è¯´cookieæœºåˆ¶é‡‡ç”¨çš„æ˜¯åœ¨å®¢æˆ·ç«¯ä¿æŒçŠ¶æ€çš„æ–¹æ¡ˆï¼Œè€Œsessionæœºåˆ¶é‡‡ç”¨çš„æ˜¯åœ¨æœåŠ¡å™¨ç«¯ä¿æŒçŠ¶æ€çš„æ–¹æ¡ˆã€‚</p>\n<ul>\n<li>æœåŠ¡å™¨ç«¯ä¿æŒçŠ¶æ€çš„æ–¹æ¡ˆåœ¨å®¢æˆ·ç«¯ä¹Ÿéœ€è¦ä¿å­˜ä¸€ä¸ªæ ‡è¯†ï¼Œæ‰€ä»¥sessionæœºåˆ¶å¯èƒ½éœ€è¦å€ŸåŠ©äºcookieæœºåˆ¶æ¥è¾¾åˆ°ä¿å­˜æ ‡è¯†çš„ç›®çš„ã€‚</li>\n</ul>\n</li>\n<li><p>Sessionæ˜¯ä»¥cookieä¸ºåŸºç¡€çš„ã€‚åœ¨ä¸€äº›webå¼€å‘çš„ä¹¦ä¸­ï¼Œå¾€å¾€åªæ˜¯ç®€å•çš„æŠŠSessionå’Œcookieä½œä¸ºä¸¤ç§å¹¶åˆ—çš„httpä¼ é€ä¿¡æ¯çš„æ–¹å¼ï¼Œsession cookiesä½äºæœåŠ¡å™¨ç«¯ï¼Œpersistent cookieä½äºå®¢æˆ·ç«¯ã€‚</p>\n</li>\n</ul>\n<ul>\n<li>Cookieä¸æ˜¯å¾ˆå®‰å…¨ï¼Œåˆ«äººå¯ä»¥åˆ†æå­˜æ”¾åœ¨æœ¬åœ°çš„cookieå¹¶è¿›è¡Œcookieæ¬ºéª—è€ƒè™‘åˆ°å®‰å…¨åº”å½“ä½¿ç”¨sessionã€‚</li>\n<li>Sessionä¼šåœ¨ä¸€å®šæ—¶é—´å†…ä¿å­˜åœ¨æœåŠ¡å™¨ä¸Šã€‚å½“è®¿é—®å¢å¤šï¼Œä¼šæ¯”è¾ƒå ç”¨ä½ æœåŠ¡å™¨çš„æ€§èƒ½è€ƒè™‘åˆ°å‡è½»æœåŠ¡å™¨æ€§èƒ½æ–¹é¢ï¼Œåº”å½“ä½¿ç”¨cookieã€‚</li>\n<li>å•ä¸ªCookieä¿å­˜çš„æ•°æ®ä¸èƒ½è¶…è¿‡4Kï¼Œå¾ˆå¤šæµè§ˆå™¨éƒ½é™åˆ¶ä¸€ä¸ªç«™ç‚¹æœ€å¤šä¿å­˜20ä¸ªcookieã€‚</li>\n<li>å…³é—­æµè§ˆå™¨ä¸ä¼šå¯¼è‡´æœåŠ¡ç«¯sessionè¢«åˆ é™¤ï¼ŒæœåŠ¡å™¨ä¸ºsessionè®¾ç½®äº†ä¸€ä¸ªå¤±æ•ˆæ—¶é—´ï¼Œå½“è·ç¦»å®¢æˆ·ä¸Šä¸€æ¬¡ä½¿ç”¨sessionçš„æ—¶é—´è¶…è¿‡äº†è¿™ä¸ªå¤±æ•ˆæ—¶é—´æ—¶ï¼ŒæœåŠ¡å™¨å°±å¯ä»¥è®¤ä¸ºå®¢æˆ·ç«¯å·²ç»åœæ­¢äº†æ´»åŠ¨ï¼Œæ‰ä¼šæŠŠsessionåˆ é™¤ä»¥èŠ‚çœå­˜å‚¨ç©ºé—´ã€‚</li>\n<li>å…³é—­æµè§ˆå™¨ï¼Œåªä¼šæ˜¯æµè§ˆå™¨ç«¯å†…å­˜é‡Œçš„session cookieæ¶ˆå¤±ï¼Œä½†ä¸ä¼šä½¿ä¿å­˜åœ¨æœåŠ¡å™¨ç«¯çš„sessionå¯¹è±¡æ¶ˆå¤±ï¼ŒåŒæ ·ä¹Ÿä¸ä¼šä½¿å·²ç»ä¿å­˜åˆ°ç¡¬ç›˜ä¸Šçš„æŒä¹…åŒ–cookieæ¶ˆå¤±ã€‚</li>\n</ul>\n<h4 id=\"URIä¸URLçš„åŒºåˆ«\"><a href=\"#URIä¸URLçš„åŒºåˆ«\" class=\"headerlink\" title=\"URIä¸URLçš„åŒºåˆ«\"></a>URIä¸URLçš„åŒºåˆ«</h4><h5 id=\"URL\"><a href=\"#URL\" class=\"headerlink\" title=\"URL\"></a>URL</h5><ul>\n<li>RFC1738 (1994.12) Uniform Resource Locator è¡¨ç¤ºèµ„æºçš„ä½ç½®ï¼ŒæœŸæœ›ææä¾›æŸ¥æ‰¾èµ„æºçš„æ–¹æ³•ã€‚</li>\n<li>å®ƒæ˜¯å¯ä»¥å¯¹äº’è”ç½‘ä¸Šèµ„æºä½ç½®è®¿é—®æ–¹å¼å¯¹ä¸€ç§ç®€æ´è¡¨è¾¾ã€‚é€šå¸¸çš„è¡¨ç°æ ¼å¼å¦‚ä¸‹ã€‚</li>\n</ul>\n<figure class=\"highlight sh\"><table><tr><td class=\"code\"><pre><span class=\"line\">scheme://host[:port<span class=\"comment\">#]/path/â€¦/[;url-params][?query-string][#anchor]</span></span><br><span class=\"line\"></span><br><span class=\"line\">scheme //æœ‰æˆ‘ä»¬å¾ˆç†Ÿæ‚‰çš„httpã€httpsã€ftpä»¥åŠè‘—åçš„ed2kï¼Œè¿…é›·çš„thunderç­‰ã€‚</span><br><span class=\"line\">host   //HTTPæœåŠ¡å™¨çš„IPåœ°å€æˆ–è€…åŸŸå</span><br><span class=\"line\">port<span class=\"comment\">#  //HTTPæœåŠ¡å™¨çš„é»˜è®¤ç«¯å£æ˜¯80ï¼Œè¿™ç§æƒ…å†µä¸‹ç«¯å£å·å¯ä»¥çœç•¥ã€‚å¦‚æœä½¿ç”¨äº†åˆ«çš„ç«¯å£ï¼Œå¿…é¡»æŒ‡æ˜ï¼Œ</span></span><br><span class=\"line\">ä¾‹å¦‚tomcatçš„é»˜è®¤ç«¯å£æ˜¯8080  http://localhost:8080/</span><br><span class=\"line\">path   //è®¿é—®èµ„æºçš„è·¯å¾„</span><br><span class=\"line\">url-params  //æ‰€å¸¦å‚æ•° </span><br><span class=\"line\">query-string    //å‘é€ç»™httpæœåŠ¡å™¨çš„æ•°æ®</span><br><span class=\"line\">anchor //é”šç‚¹å®šä½</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"URN\"><a href=\"#URN\" class=\"headerlink\" title=\"URN\"></a>URN</h5><ul>\n<li>RFC2141 (1997.5) Uniform Resource Name ï¼Œèµ„æºæ˜ å°„åç§°ã€‚æ¯”å¦‚</li>\n</ul>\n<figure class=\"highlight sh\"><table><tr><td class=\"code\"><pre><span class=\"line\">mailto: xxxxx@qq.com</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"URI\"><a href=\"#URI\" class=\"headerlink\" title=\"URI\"></a>URI</h5><ul>\n<li>RFC1630 (1994.6) Uniform Resource Identifier ç”¨äºåŒºåˆ†èµ„æº , æ˜¯ URL å’Œ URN çš„è¶…é›†ï¼Œç”¨äºå–ä»£URL å’Œ URNæ¦‚å¿µã€‚</li>\n<li>URI å±äºçˆ¶ç±»ï¼Œè€Œ URL å±äº URI çš„å­ç±»ã€‚URL æ˜¯ URI çš„ä¸€ä¸ªå­é›†ã€‚<strong>URIï¼šç»Ÿä¸€èµ„æºæ ‡è¯† URLï¼šç»Ÿä¸€èµ„æºå®šä½ URNï¼šç»Ÿä¸€èµ„æºåç§°ã€‚</strong></li>\n</ul>\n<p><img src=\"https://z201.oss-cn-shanghai.aliyuncs.com/JavaNote/20211123132409.png\"></p>\n<h4 id=\"TCPå®‰å…¨é—®é¢˜\"><a href=\"#TCPå®‰å…¨é—®é¢˜\" class=\"headerlink\" title=\"TCPå®‰å…¨é—®é¢˜\"></a>TCPå®‰å…¨é—®é¢˜</h4><h5 id=\"SYNæ”»å‡»\"><a href=\"#SYNæ”»å‡»\" class=\"headerlink\" title=\"SYNæ”»å‡»\"></a>SYNæ”»å‡»</h5><blockquote>\n<p>åœ¨ä¸‰æ¬¡æ¡æ‰‹è¿‡ç¨‹ä¸­ï¼ŒæœåŠ¡ç«¯æ”¶åˆ°SYN-ACKä¹‹åï¼Œæ”¶åˆ°å®¢æˆ·ç«¯çš„ACKä¹‹å‰TCPè¿æ¥æˆä¸ºåŠè¿æ¥(half-open connect) ï¼Œè¿™ä¸ªæ—¶å€™æœåŠ¡å™¨å¤„äºSYN_REVDçŠ¶æ€ï¼Œæ”¶åˆ°ACKä¹‹åæœåŠ¡å™¨æ‰èƒ½è½¬å…¥ESTABLISHEDçŠ¶æ€ã€‚</p>\n</blockquote>\n<ul>\n<li>SYN æ”»å‡»æŒ‡çš„æ˜¯ï¼Œæ”»å‡»å®¢æˆ·ç«¯åœ¨çŸ­æ—¶é—´å†…ä¼ªé€ å¤§é‡ä¸å­˜åœ¨çš„IPåœ°å€ï¼Œå‘æœåŠ¡å™¨ä¸æ–­åœ°å‘é€SYNåŒ…ï¼ŒæœåŠ¡å™¨å›å¤ç¡®è®¤åŒ…ï¼Œå¹¶ç­‰å¾…å®¢æˆ·çš„ç¡®è®¤ã€‚ç”±äºæºåœ°å€æ˜¯ä¸å­˜åœ¨çš„ï¼ŒæœåŠ¡å™¨éœ€è¦ä¸æ–­çš„é‡å‘ç›´è‡³è¶…æ—¶ï¼Œè¿™äº›ä¼ªé€ çš„SYNåŒ…å°†é•¿æ—¶é—´å ç”¨æœªè¿æ¥é˜Ÿåˆ—ï¼Œæ­£å¸¸çš„SYNè¯·æ±‚è¢«ä¸¢å¼ƒï¼Œå¯¼è‡´ç›®æ ‡ç³»ç»Ÿè¿è¡Œç¼“æ…¢ï¼Œä¸¥é‡è€…ä¼šå¼•èµ·ç½‘ç»œå µå¡ç”šè‡³ç³»ç»Ÿç˜«ç—ªã€‚</li>\n</ul>\n<h5 id=\"SYNæ£€æµ‹\"><a href=\"#SYNæ£€æµ‹\" class=\"headerlink\" title=\"SYNæ£€æµ‹\"></a>SYNæ£€æµ‹</h5><ul>\n<li>åœ¨Linux/Unixä¸Šå¯ä»¥ä½¿ç”¨ç³»ç»Ÿè‡ªå¸¦çš„netstatså‘½ä»¤æ¥æ£€æµ‹SYNæ”»å‡»ã€‚</li>\n</ul>\n<h5 id=\"SYNæ”»å‡»é˜²èŒƒ\"><a href=\"#SYNæ”»å‡»é˜²èŒƒ\" class=\"headerlink\" title=\"SYNæ”»å‡»é˜²èŒƒ\"></a>SYNæ”»å‡»é˜²èŒƒ</h5><h6 id=\"è®¾ç½®è¶…æ—¶æ—¶é—´ä¸ç¼“å­˜åˆ—é˜Ÿã€‚\"><a href=\"#è®¾ç½®è¶…æ—¶æ—¶é—´ä¸ç¼“å­˜åˆ—é˜Ÿã€‚\" class=\"headerlink\" title=\"è®¾ç½®è¶…æ—¶æ—¶é—´ä¸ç¼“å­˜åˆ—é˜Ÿã€‚\"></a>è®¾ç½®è¶…æ—¶æ—¶é—´ä¸ç¼“å­˜åˆ—é˜Ÿã€‚</h6><ul>\n<li><p>åº”ç”¨å±‚connectè¶…æ—¶æ—¶é—´è°ƒæ•´ã€‚</p>\n</li>\n<li><p>æ“ä½œç³»ç»Ÿå†…æ ¸é™åˆ¶è°ƒæ•´ã€‚</p>\n<ul>\n<li>æœåŠ¡å™¨ç«¯SYN_RCVçŠ¶æ€</li>\n<li>net.ipv4.tcp_max_syn_backlog:  SYN_RCVDçŠ¶æ€çš„æœ€å¤§è¿æ¥æ•°ã€‚</li>\n<li>net.ipv4.tcp_synack_retries: è¢«åŠ¨å»ºç«‹æ—¶,å‘SYN/ACKçš„é‡è¯•æ¬¡æ•°ã€‚</li>\n<li>å®¢æˆ·ç«¯SYN_SENTçŠ¶æ€</li>\n<li>net.ipv4.tcp_syn_retries = 6 ä¸»åŠ¨å»ºç«‹è¿æ¥æ—¶ï¼Œå‘SYNçš„é‡è¯•æ¬¡æ•°ã€‚</li>\n<li>net.ipv4.ip_local_port_range = 32768 60999 å»ºç«‹è¿æ¥æ—¶çš„æœ¬åœ°ç«¯å£å¯ç”¨èŒƒå›´ã€‚</li>\n<li>ACCEPTåˆ—é˜Ÿè®¾ç½®</li>\n</ul>\n</li>\n</ul>\n","categories":["çŸ¥è¯†ç‚¹"],"tags":["Http","Tcp","Udp"]},{"title":"MySQLåŸºç¡€ï¼ˆå››ï¼‰","url":"/posts/3237165083/","content":"<blockquote>\n<p>æœ¬ç« æ˜¯æ•´ç†çŸ¥è¯†å†…å®¹ï¼Œä¸ºå¼ºåŒ–çŸ¥è¯†é•¿æœŸæ›´æ–°ã€‚</p>\n</blockquote>\n<h2 id=\"ç»ƒæ‰‹é¡¹ç›®\"><a href=\"#ç»ƒæ‰‹é¡¹ç›®\" class=\"headerlink\" title=\"ç»ƒæ‰‹é¡¹ç›®\"></a>ç»ƒæ‰‹é¡¹ç›®</h2><h3 id=\"ç‰›å®¢ç½‘\"><a href=\"#ç‰›å®¢ç½‘\" class=\"headerlink\" title=\"ç‰›å®¢ç½‘\"></a>ç‰›å®¢ç½‘</h3><h4 id=\"å‡†å¤‡ä¸€ä¸ªmysql-5-7çš„æ•°æ®åº“\"><a href=\"#å‡†å¤‡ä¸€ä¸ªmysql-5-7çš„æ•°æ®åº“\" class=\"headerlink\" title=\"å‡†å¤‡ä¸€ä¸ªmysql 5.7çš„æ•°æ®åº“\"></a>å‡†å¤‡ä¸€ä¸ªmysql 5.7çš„æ•°æ®åº“</h4><h4 id=\"é…ç½®æœ¬åœ°æ•°æ®åº“\"><a href=\"#é…ç½®æœ¬åœ°æ•°æ®åº“\" class=\"headerlink\" title=\"é…ç½®æœ¬åœ°æ•°æ®åº“\"></a>é…ç½®æœ¬åœ°æ•°æ®åº“</h4><ul>\n<li><p><a href=\"https://launchpad.net/test-db/employees-db-1/1.0.6\" target=\"_blank\" rel=\"noopener\">https://launchpad.net/test-db/employees-db-1/1.0.6</a> ä¸‹è½½æ–‡ä»¶ <strong>employees_db-full-1.0.6.tar.bz2</strong></p>\n</li>\n<li><p>è§£å‹æ–‡ä»¶</p>\n</li>\n</ul>\n<figure class=\"highlight sh\"><table><tr><td class=\"code\"><pre><span class=\"line\">âœ  employees_db tree </span><br><span class=\"line\">.</span><br><span class=\"line\">â”œâ”€â”€ Changelog</span><br><span class=\"line\">â”œâ”€â”€ README</span><br><span class=\"line\">â”œâ”€â”€ employees.sql</span><br><span class=\"line\">â”œâ”€â”€ employees_partitioned.sql</span><br><span class=\"line\">â”œâ”€â”€ employees_partitioned2.sql</span><br><span class=\"line\">â”œâ”€â”€ employees_partitioned3.sql</span><br><span class=\"line\">â”œâ”€â”€ load_departments.dump</span><br><span class=\"line\">â”œâ”€â”€ load_dept_emp.dump</span><br><span class=\"line\">â”œâ”€â”€ load_dept_manager.dump</span><br><span class=\"line\">â”œâ”€â”€ load_employees.dump</span><br><span class=\"line\">â”œâ”€â”€ load_salaries.dump</span><br><span class=\"line\">â”œâ”€â”€ load_titles.dump</span><br><span class=\"line\">â”œâ”€â”€ objects.sql</span><br><span class=\"line\">â”œâ”€â”€ test_employees_md5.sql</span><br><span class=\"line\">â””â”€â”€ test_employees_sha.sql</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>åœ¨å°†æ–‡ä»¶å¯¼å…¥æ•°æ®åº“</li>\n</ul>\n<figure class=\"highlight sh\"><table><tr><td class=\"code\"><pre><span class=\"line\">mysql -uroot -p -t &lt; employees.sql</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"è§£å†³é—®é¢˜\"><a href=\"#è§£å†³é—®é¢˜\" class=\"headerlink\" title=\"è§£å†³é—®é¢˜\"></a>è§£å†³é—®é¢˜</h4><ul>\n<li>employees.sql ä¿®æ”¹å†…å®¹</li>\n</ul>\n<figure class=\"highlight sql\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 38è¡Œ set storage_engine = InnoDB; æ›¿æ¢</span></span><br><span class=\"line\"><span class=\"keyword\">set</span> default_storage_engine = <span class=\"keyword\">InnoDB</span>;</span><br><span class=\"line\"><span class=\"comment\"># 44è¡Œ select CONCAT('storage engine: ', @@storage_engine) as INFO; æ›¿æ¢</span></span><br><span class=\"line\"><span class=\"keyword\">select</span> <span class=\"keyword\">CONCAT</span>(<span class=\"string\">'storage engine: '</span>, @@default_storage_engine) <span class=\"keyword\">as</span> INFO;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>æ³¨æ„å¯¼å…¥çš„æ—¶å€™ä¼šå‡ºç°æ–‡ä»¶æ‰“ä¸å¼€çš„é—®é¢˜</li>\n</ul>\n<figure class=\"highlight sql\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">SELECT</span> <span class=\"string\">'LOADING departments'</span> <span class=\"keyword\">as</span> <span class=\"string\">'INFO'</span>;</span><br><span class=\"line\">source /home/employees_db/load_departments.dump ;</span><br><span class=\"line\"><span class=\"keyword\">SELECT</span> <span class=\"string\">'LOADING employees'</span> <span class=\"keyword\">as</span> <span class=\"string\">'INFO'</span>;</span><br><span class=\"line\">source /home/employees_db/load_employees.dump ;</span><br><span class=\"line\"><span class=\"keyword\">SELECT</span> <span class=\"string\">'LOADING dept_emp'</span> <span class=\"keyword\">as</span> <span class=\"string\">'INFO'</span>;</span><br><span class=\"line\">source /home/employees_db/load_dept_emp.dump ;</span><br><span class=\"line\"><span class=\"keyword\">SELECT</span> <span class=\"string\">'LOADING dept_manager'</span> <span class=\"keyword\">as</span> <span class=\"string\">'INFO'</span>;</span><br><span class=\"line\">source /home/employees_db/load_dept_manager.dump ;</span><br><span class=\"line\"><span class=\"keyword\">SELECT</span> <span class=\"string\">'LOADING titles'</span> <span class=\"keyword\">as</span> <span class=\"string\">'INFO'</span>;</span><br><span class=\"line\">source /home/employees_db/load_titles.dump ;</span><br><span class=\"line\"><span class=\"keyword\">SELECT</span> <span class=\"string\">'LOADING salaries'</span> <span class=\"keyword\">as</span> <span class=\"string\">'INFO'</span>;</span><br><span class=\"line\">source /home/employees_db/load_salaries.dump ;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><p>è¿™é‡Œè¦å°†æ–‡ä»¶æ­£ç¡®çš„è·¯å¾„å†™è¿›å»ã€‚</p>\n</li>\n<li><p>å¦‚æœæ˜¯æœ¬åœ°çš„dockerç¯å¢ƒéƒ¨ç½²mysqlï¼Œå¯ä»¥ä½¿ç”¨docker cp å‘½ä»¤å°†æ–‡ä»¶å¤åˆ¶åˆ°å®¹å™¨ä¸­ã€‚åœ¨ç™»é™†åˆ°å®¹å™¨æ‰§è¡Œå¯¼å…¥è„šæœ¬</p>\n</li>\n</ul>\n<figure class=\"highlight sh\"><table><tr><td class=\"code\"><pre><span class=\"line\">// ä»å®¿ä¸»æœºå™¨æ‹·è´åˆ°å®¹å™¨ä¸­</span><br><span class=\"line\">docker cp ~/Downloads/employees_db laughing_black:/home</span><br><span class=\"line\">// laughing_black æ˜¯å®¹å™¨çš„åç§°</span><br><span class=\"line\"></span><br><span class=\"line\">// ä»å®¹å™¨ä¸­æ‹·è´ä¼šå®¿ä¸»æœºå™¨ä¸­</span><br><span class=\"line\">docker cp laughing_black:/employees_db.sql .</span><br></pre></td></tr></table></figure>\n\n","categories":["å®è·µ"],"tags":["MySQL"]},{"title":"Tcpdumpå…¥é—¨","url":"/posts/2803052659/","content":"<h2 id=\"tcpdump\"><a href=\"#tcpdump\" class=\"headerlink\" title=\"tcpdump\"></a>tcpdump</h2><blockquote>\n<p>dump the traffic on a networkï¼Œæ ¹æ®ä½¿ç”¨è€…çš„å®šä¹‰å¯¹ç½‘ç»œä¸Šçš„æ•°æ®åŒ…è¿›è¡Œæˆªè·çš„åŒ…åˆ†æå·¥å…·ã€‚</p>\n</blockquote>\n<h3 id=\"å®‰è£…\"><a href=\"#å®‰è£…\" class=\"headerlink\" title=\"å®‰è£…\"></a>å®‰è£…</h3><h4 id=\"linux\"><a href=\"#linux\" class=\"headerlink\" title=\"linux\"></a>linux</h4><figure class=\"highlight sh\"><table><tr><td class=\"code\"><pre><span class=\"line\">yum install tcpdump</span><br><span class=\"line\">[root@~]<span class=\"comment\"># tcpdump --v</span></span><br><span class=\"line\">tcpdump version 4.9.2</span><br><span class=\"line\">libpcap version 1.5.3</span><br><span class=\"line\">OpenSSL 1.0.2k-fips  26 Jan 2017</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"Mac\"><a href=\"#Mac\" class=\"headerlink\" title=\"Mac\"></a>Mac</h4><figure class=\"highlight sh\"><table><tr><td class=\"code\"><pre><span class=\"line\">brew install tcpdump</span><br><span class=\"line\">âœ  ~ tcpdump --v</span><br><span class=\"line\">tcpdump version 4.99.1</span><br><span class=\"line\">libpcap version 1.10.1</span><br><span class=\"line\">OpenSSL 1.1.1k  25 Mar 2021</span><br></pre></td></tr></table></figure>\n\n<a id=\"more\"></a>\n\n<h3 id=\"å‚æ•°\"><a href=\"#å‚æ•°\" class=\"headerlink\" title=\"å‚æ•°\"></a>å‚æ•°</h3><ul>\n<li><code>-A  </code>  ä»¥ASCIIæ ¼å¼æ‰“å°å‡ºæ‰€æœ‰åˆ†ç»„ï¼Œå¹¶å°†é“¾è·¯å±‚çš„å¤´æœ€å°åŒ–</li>\n<li><code>-d </code>   å°†åŒ¹é…ä¿¡æ¯åŒ…çš„ä»£ç ä»¥äººä»¬èƒ½å¤Ÿç†è§£çš„æ±‡ç¼–æ ¼å¼ç»™å‡º</li>\n<li><code>-D </code>   æ‰“å°å‡ºç³»ç»Ÿä¸­æ‰€æœ‰å¯ä»¥ç”¨tcpdumpæˆªåŒ…çš„ç½‘ç»œæ¥å£</li>\n<li><code>-ddd</code>    å°†åŒ¹é…ä¿¡æ¯åŒ…çš„ä»£ç ä»¥åè¿›åˆ¶çš„å½¢å¼è¾“å‡º</li>\n<li><code>-e</code>    åœ¨è¾“å‡ºè¡Œæ‰“å°å‡ºæ•°æ®é“¾è·¯å±‚çš„å¤´éƒ¨ä¿¡æ¯</li>\n<li><code>-f  </code>  å°†å¤–éƒ¨çš„Internetåœ°å€ä»¥æ•°å­—çš„å½¢å¼æ‰“å°å‡ºæ¥</li>\n<li><code>-l </code>   ä½¿æ ‡å‡†è¾“å‡ºå˜ä¸ºç¼“å†²è¡Œå½¢å¼</li>\n<li><code>-L</code>    åˆ—å‡ºç½‘ç»œæ¥å£çš„å·²çŸ¥æ•°æ®é“¾è·¯</li>\n<li><code>-n</code>    ä¸æŠŠç½‘ç»œåœ°å€è½¬æ¢æˆåå­—</li>\n<li><code>-N</code>    ä¸è¾“å‡ºä¸»æœºåä¸­çš„åŸŸåéƒ¨åˆ†ï¼Œå¦‚â€œkongove.ubuntu.cnâ€åªè¾“å‡ºâ€œkongoveâ€</li>\n<li><code>-O</code>    ä¸è¿è¡Œåˆ†ç»„åˆ†ç»„åŒ¹é…ï¼ˆpacket-matchingï¼‰ä»£ç ä¼˜åŒ–ç¨‹åº</li>\n<li><code>-p </code>   ä¸å°†ç½‘ç»œæ¥å£è®¾ç½®æˆæ··æ‚æ¨¡å¼</li>\n<li><code>-q </code>   å¿«é€Ÿè¾“å‡ºï¼Œåªè¾“å‡ºè¾ƒå°‘çš„åè®®ä¿¡æ¯</li>\n<li><code>-S </code>   å°†tcpçš„åºåˆ—å·ä»¥ç»å¯¹å€¼å½¢å¼è¾“å‡ºï¼Œè€Œä¸æ˜¯ç›¸å¯¹å€¼</li>\n<li><code>-t</code>    åœ¨è¾“å‡ºçš„æ¯ä¸€è¡Œä¸æ‰“å°æ—¶é—´æˆ³</li>\n<li><code>-u</code>    è¾“å‡ºæœªè§£ç çš„NFSå¥æŸ„</li>\n<li><code>-v </code>   è¾“å‡ºä¸€ä¸ªç¨å¾®è¯¦ç»†çš„ä¿¡æ¯ï¼Œä¾‹å¦‚åœ¨ipåŒ…ä¸­å¯ä»¥åŒ…æ‹¬ttlå’ŒæœåŠ¡ç±»å‹çš„ä¿¡æ¯</li>\n<li><code>-vv </code>   è¾“å‡ºè¯¦ç»†çš„æŠ¥æ–‡ä¿¡æ¯</li>\n<li><code>-c count </code>   æŒ‡å®šç›‘å¬æ•°æ®åŒ…æ•°é‡ï¼Œå½“æ”¶åˆ°æŒ‡å®šçš„åŒ…çš„æ•°ç›®åï¼Œtcpdumpå°±ä¼šåœæ­¢</li>\n<li><code>-C file_size</code>    é™å®šæ•°æ®åŒ…å†™å…¥æ–‡ä»¶å¤§å°</li>\n<li><code>-F file</code>    ä»æŒ‡å®šçš„æ–‡ä»¶ä¸­è¯»å–è¡¨è¾¾å¼,å¿½ç•¥å…¶å®ƒçš„è¡¨è¾¾å¼</li>\n<li><code>-i interface</code>    æŒ‡å®šç›‘å¬ç½‘ç»œæ¥å£</li>\n<li><code>-m module</code>    æ‰“å¼€æŒ‡å®šçš„SMI MIBç»„ä»¶</li>\n<li><code>-M secret </code>   å¦‚æœtcpæŠ¥æ–‡ä¸­å­˜åœ¨TCP-MD5é€‰é¡¹ï¼Œåˆ™éœ€è¦ç”¨secretä½œä¸ºå…±äº«çš„éªŒè¯ç ç”¨äºéªŒè¯TCP-MD5é€‰é€‰é¡¹æ‘˜è¦ï¼ˆè¯¦è§RFC 2385ï¼‰<br>-r file    ä»æŒ‡å®šçš„æ–‡ä»¶ä¸­è¯»å–åŒ…(è¿™äº›åŒ…ä¸€èˆ¬é€šè¿‡-wé€‰é¡¹äº§ç”Ÿ)</li>\n<li><code>-s snaplen</code>    ä»æ¯ä¸ªåˆ†ç»„ä¸­è¯»å–æœ€å¼€å§‹çš„snaplenä¸ªå­—èŠ‚ï¼Œè€Œä¸æ˜¯é»˜è®¤çš„68ä¸ªå­—èŠ‚</li>\n<li><code>-T type </code>   å°†æˆªå–çš„æ•°æ®åŒ…ç›´æ¥è§£é‡Šä¸ºæŒ‡å®šç±»å‹çš„æŠ¥æ–‡ï¼Œå¸¸è§ç±»å‹æœ‰rpcï¼ˆè¿œç¨‹è¿‡ç¨‹è°ƒç”¨ï¼‰å’Œsnmpï¼ˆç®€å•ç½‘ç»œç®¡ç†åè®®ï¼‰ï¼Œè¿˜åŒ…æ‹¬aodvã€cnfpã€rpcã€rtpã€rtcpã€snmpã€tftpã€vatã€wbç­‰<br>-w file    æŒ‡å®šå°†ç›‘å¬åˆ°çš„æ•°æ®åŒ…å†™å…¥æ–‡ä»¶ï¼Œä¸åˆ†æå’Œæ‰“å°æ•°æ®åŒ…</li>\n<li><code>-W filecount </code>   é™å®šèƒ½å†™å…¥æ–‡ä»¶æ•°æ®åŒ…çš„æ•°é‡</li>\n<li><code>-E </code>spi@ipaddr algo:secret,â€¦    ç”¨spi@ipaddr algo:secretè§£å¯†é‚£äº›ä»¥addrä½œä¸ºåœ°å€ï¼Œå¹¶ä¸”åŒ…å«äº†å®‰å…¨å‚æ•°ç´¢å¼•å€¼spiçš„IPsec ESPåˆ†ç»„</li>\n</ul>\n<h3 id=\"å‘½ä»¤æ ¼å¼\"><a href=\"#å‘½ä»¤æ ¼å¼\" class=\"headerlink\" title=\"å‘½ä»¤æ ¼å¼\"></a>å‘½ä»¤æ ¼å¼</h3><blockquote>\n<p>tcpdumpé‡‡ç”¨å‘½ä»¤è¡Œæ–¹å¼ï¼Œå®ƒçš„å‘½ä»¤æ ¼å¼ä¸ºï¼š</p>\n</blockquote>\n<figure class=\"highlight sh\"><table><tr><td class=\"code\"><pre><span class=\"line\">tcpdump [ -adeflnNOpqStvx ] [ -c æ•°é‡ ] [ -F æ–‡ä»¶å ] [ -i ç½‘ç»œæ¥å£ ] [ -r æ–‡ä»¶å] [ -s snaplen ]  [ -T ç±»å‹ ] [ -w æ–‡ä»¶å ] [è¡¨è¾¾å¼ ]</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"è¡¨è¾¾å¼\"><a href=\"#è¡¨è¾¾å¼\" class=\"headerlink\" title=\"è¡¨è¾¾å¼\"></a>è¡¨è¾¾å¼</h3><h3 id=\"æ‰©å±•\"><a href=\"#æ‰©å±•\" class=\"headerlink\" title=\"æ‰©å±•\"></a>æ‰©å±•</h3><h4 id=\"æŒ‡å®šè¿è¡Œæ—¶é—´\"><a href=\"#æŒ‡å®šè¿è¡Œæ—¶é—´\" class=\"headerlink\" title=\"æŒ‡å®šè¿è¡Œæ—¶é—´\"></a>æŒ‡å®šè¿è¡Œæ—¶é—´</h4><blockquote>\n<p>tcpdumpé€šå¸¸éƒ½æ˜¯æ‰‹åŠ¨è¿è¡Œï¼Œéœ€è¦ä½¿ç”¨ç±»ä¼¼Ctrl+Céƒ½æ–¹å¼ç»ˆç»“ï¼Œæƒ³æ§åˆ¶è¿è¡Œæ—¶é—´ä¸ç”¨æ‰‹åŠ¨åœæ­¢ç¨‹åºã€‚</p>\n</blockquote>\n<ul>\n<li>æ–¹æ³•ä¸€ è¶…æ—¶</li>\n</ul>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">timeout 5400 tcpdump -i eth0 <span class=\"string\">'port 8080'</span> -w myfile</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>æ–¹æ³•äºŒ ç»„åˆ <code>-G {sec}</code> (æ¯ x ç§’è½®æ¢è½¬å‚¨æ–‡ä»¶)å’Œ <code>-W {count}</code> (é™åˆ¶è½¬å‚¨æ–‡ä»¶çš„æ•°é‡),å°†è¿è¡Œ 15 ç§’ç„¶ååœæ­¢ã€‚</li>\n</ul>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">tcpdump -G 15 -W 1 -w myfile.pcap -i eth0 <span class=\"string\">'port 8080'</span></span><br></pre></td></tr></table></figure>\n\n<h4 id=\"æŒ‡å®šé—´éš”ä¿å­˜\"><a href=\"#æŒ‡å®šé—´éš”ä¿å­˜\" class=\"headerlink\" title=\"æŒ‡å®šé—´éš”ä¿å­˜\"></a>æŒ‡å®šé—´éš”ä¿å­˜</h4><ul>\n<li>æ–¹æ³•ä¸€ -G 600 600sä¿å­˜ä¸€æ¬¡ -i æŒ‡å®šç½‘å¡ -s -w ä¿å­˜æ–‡ä»¶çš„æ ¼å¼</li>\n</ul>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">tcpdump -i lo -s0 -G 600  -w %Y_%m%d_%H%M_%S.pcap</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>æ–¹æ³•äºŒ -C 5 æ¯5Mä¿å­˜ä¸€ä¸ªåŒ…</li>\n</ul>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">tcpdump -i lo -s0 -C 5 -Z root -w eth0.pcap</span><br></pre></td></tr></table></figure>\n","categories":["è½¯ä»¶"],"tags":["ç½‘ç»œé€šä¿¡","æŠ“åŒ…è½¯ä»¶"]},{"title":"æŸ¥ç¼ºè¡¥æ¼-Zookeeper","url":"/posts/2936478442/","content":"<h3 id=\"Zookeeperæ¦‚è¿°\"><a href=\"#Zookeeperæ¦‚è¿°\" class=\"headerlink\" title=\"Zookeeperæ¦‚è¿°\"></a>Zookeeperæ¦‚è¿°</h3><blockquote>\n<p>Zookeeperå¯ä»¥è®©ä¼ä¸šçš„ITæ¶æ„é€æ­¥ä»é›†ä¸­å¼å‘åˆ†å¸ƒå¼è¿‡åº¦ï¼Œæ‰€è°“çš„åˆ†å¸ƒå¼æ˜¯æŒ‡ï¼šæŠŠä¸€ä¸ªè®¡ç®—ä»»åŠ¡åˆ†è§£æˆè‹¥å¹²ä¸ªè®¡ç®—å•å…ƒï¼Œå¹¶ä¸”åˆ†æ´¾åˆ°è‹¥å¹²ä¸åŒçš„è®¡ç®—æœºä¸­å»æ‰§è¡Œï¼Œç„¶åæ±‡æ€»è®¡ç®—ç»“æœçš„è¿‡ç¨‹ã€‚</p>\n</blockquote>\n<ul>\n<li><p>Zookeeperä»‹ç»</p>\n<ul>\n<li>Zookeeperæ˜¯æºä»£ç å¼€æ”¾çš„åˆ†å¸ƒå¼åè°ƒæœåŠ¡ï¼Œç”±é›…è™åˆ›å»ºï¼Œæ˜¯Google Chubbyå¼€æºå®ç°ã€‚Zookeeperæ˜¯ä¸€ä¸ªé«˜æ€§èƒ½çš„åˆ†å¸ƒå¼æ•°æ®ä¸€è‡´æ€§è§£å†³æ–¹æ¡ˆï¼Œå®ƒå°†é‚£äº›å¤æ‚ã€å®¹æ˜“å‡ºé”™çš„åˆ†å¸ƒå¼ä¸€è‡´æ€§æœåŠ¡å°è£…èµ·æ¥ï¼Œæ„æˆä¸€ä¸ªæç¬‘å¯é çš„åŸè¯­é›†ï¼Œå¹¶æä¾›ä¸€ç³»åˆ—ç®€å•æ˜“ç”¨çš„æ¥å£ç»™ç”¨æˆ·ä½¿ç”¨ã€‚</li>\n</ul>\n</li>\n<li><p>Zookeeperçš„å…¸å‹åº”ç”¨åœºæ™¯</p>\n<ul>\n<li>æ•°æ®å‘å¸ƒ/è®¢é˜… é¡¾åæ€ä¹‰å°±æ˜¯ä¸€æ–¹æŠŠæ•°æ®å‘å¸ƒå‡ºæ¥ï¼Œå¦ä¸€æ–¹é€šè¿‡æŸç§æ‰‹åŠ¨å¯ä»¥å¾—åˆ°è¿™äº›æ•°æ®ã€‚<ul>\n<li>é€šå¸¸æ•°æ®è®¢é˜…æœ‰ä¸¤ç§æ–¹å¼ï¼šæ¨æ¨¡å¼å’Œæ‹‰æ¨¡å¼ï¼Œæ¨æ¨¡å¼ä¸€èˆ¬æ˜¯æœåŠ¡å™¨ä¸»åŠ¨å‘å®¢æˆ·ç«¯æ¨é€æ¶ˆæ¯ï¼Œæ‹‰æ¨¡å¼æ˜¯å®¢æˆ·ç«¯ä¸»åŠ¨å»æœåŠ¡ç«¯è·å–æ•°æ®ï¼ˆé€šå¸¸é‡‡ç”¨çš„æ˜¯è½®è¯¢çš„æ–¹å¼ï¼‰ã€‚</li>\n<li>Zookeeperé‡‡ç”¨ä¸¤ç§æ–¹å¼çš„ç»“åˆã€‚<ul>\n<li>å‘å¸ƒè€…å°†æ•°æ®å‘å¸ƒåˆ°Zookeeperé›†ç¾¤èŠ‚ç‚¹ä¸Šï¼Œè®¢é˜…è€…é€šè¿‡ä¸€å®šçš„æ–¹æ³•å‘Šè¯‰æœåŠ¡å™¨ï¼Œæˆ‘å¯¹é‚£ä¸ªèŠ‚ç‚¹çš„æ•°æ®æ„Ÿå…´è¶£ï¼Œé‚£ä¸ªæœåŠ¡å™¨åœ¨è¿™äº›èŠ‚ç‚¹çš„æ•°æ®å‘é€å˜åŒ–æ—¶ï¼Œå°±é€šçŸ¥å®¢æˆ·ç«¯ï¼Œå®¢æˆ·ç«¯å¾—åˆ°é€šçŸ¥åå¯ä»¥å»æœåŠ¡å™¨è·å–æ•°æ®ä¿¡æ¯ã€‚</li>\n<li>åˆ†å¸ƒå¼åè°ƒ/é€šçŸ¥<ul>\n<li>å¿ƒè·³æ£€æµ‹ï¼šåœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸­ï¼Œé€šå¸¸éœ€è¦æœºå™¨æ˜¯å¦å¯ä»¥ç”¨ï¼ŒZookeeperä¸­æˆ‘ä»¬è®©æ‰€æœ‰çš„æœºå™¨éƒ½æ³¨å†Œä¸€ä¸ªä¸´æ—¶èŠ‚ç‚¹ï¼Œæ‰€ä»¥åªéœ€è¦åˆ¤æ–­è¿™ä¸ªèŠ‚ç‚¹æ˜¯å¦å­˜åœ¨å°±å¯ä»¥äº†ï¼Œä¸éœ€è¦ç›´æ¥å»è¿æ¥éœ€è¦æ£€æŸ¥çš„æœºå™¨ï¼Œé™ä½ç³»ç»Ÿçš„è´Ÿè½½åº¦ï¼ˆèŠ‚ç‚¹åˆ†ä¸ºä¸´æ—¶å’ŒæŒä¹…ï¼‰ã€‚</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n<li><p>Zookpeeperé‡é‡çº§ä½¿ç”¨</p>\n<ul>\n<li>Hadoopã€HBaseã€Stormã€Solrã€‚</li>\n</ul>\n</li>\n<li><p>é›†ç¾¤è§’è‰²</p>\n<ul>\n<li>Leaderã€Followerã€Observer<ul>\n<li>LeaderæœåŠ¡å™¨æ˜¯æ•´ä¸ªZookeeperé›†ç¾¤å·¥ä½œæœºåˆ¶çš„æ ¸å¿ƒ</li>\n<li>FolloweræœåŠ¡å™¨æ˜¯Zookeeperé›†ç¾¤çŠ¶æ€çš„è·Ÿéšè€…</li>\n<li>OserveræœåŠ¡å™¨å……å½“ä¸€ä¸ªè§‚å¯Ÿè€…çš„è§’è‰²</li>\n<li>Leaderã€Followerè®¾è®¡æ¨¡å¼ï¼ŒObserverè§‚å¯Ÿè€…æ¨¡å¼</li>\n</ul>\n</li>\n</ul>\n</li>\n<li><p>ä¼šè¯</p>\n<ul>\n<li>ä¼šè¯æ˜¯æŒ‡å®¢æˆ·ç«¯ZookeeperæœåŠ¡å™¨çš„è¿æ¥ï¼ŒZookeeperä¸­çš„ä¼šè¯å«Sessionï¼Œå®¢æˆ·ç«¯ä¸æœåŠ¡å™¨å»ºç«‹TCPçš„é•¿è¿æ¥æ¥ç»´æŒä¸€ä¸ªSession,å®¢æˆ·ç«¯åœ¨å¯åŠ¨çš„æ—¶å€™é¦–å…ˆä¼šä¸æœåŠ¡å™¨å»ºç«‹ä¸€ä¸ªTCPè¿æ¥,é€šè¿‡è¿™ä¸ªè¿æ¥å®¢æˆ·ç«¯èƒ½å¤Ÿé€šè¿‡å¿ƒè·³æ£€æµ‹ä¸æœåŠ¡å™¨ä¿æŒæœ‰æ•ˆçš„ä¼šè¯ï¼Œä¹Ÿèƒ½å‘ZookeeperæœåŠ¡å™¨å‘é€è¯·æ±‚å¹¶è·å¾—å“åº”ã€‚</li>\n</ul>\n</li>\n<li><p>æ•°æ®èŠ‚ç‚¹</p>\n<ul>\n<li>Zookeeperä¸­çš„èŠ‚ç‚¹æœ‰ä¸¤ç±»<ul>\n<li>é›†ç¾¤ä¸­çš„ä¸€å°æœºå™¨ç§°ä¸ºä¸€ä¸ªèŠ‚ç‚¹</li>\n<li>æ•°æ®æ¨¡å‹ä¸­çš„æ•°æ®å•å…ƒZnodeï¼Œåˆ†åˆ«ä¸ºæŒä¹…èŠ‚ç‚¹å’Œä¸´æ—¶èŠ‚ç‚¹ã€‚ï¼ˆå…¶å®æ•°æ®èŠ‚ç‚¹å°±æ˜¯ä¸€ä¸ªtreeèŠ‚ç‚¹å°±æ˜¯Znodeï¼‰</li>\n</ul>\n</li>\n</ul>\n</li>\n<li><p>ç‰ˆæœ¬</p>\n<ul>\n<li>Zookeeperä¸­çš„ç‰ˆæœ¬<ul>\n<li>version<ul>\n<li>å½“å‰æ•°æ®èŠ‚ç‚¹æ•°æ®å†…å®¹ç‰ˆæœ¬</li>\n</ul>\n</li>\n<li>cversion<ul>\n<li>å½“å‰æ•°æ®èŠ‚ç‚¹å­èŠ‚ç‚¹çš„ç‰ˆæœ¬å·</li>\n</ul>\n</li>\n<li>aversion<ul>\n<li>å½“å‰æ•°æ®èŠ‚ç‚¹ACLå˜æ›´ç‰ˆæœ¬å·</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n<li><p>watcherï¼ˆäº‹ä»¶ç›‘å¬å™¨ï¼‰</p>\n<ul>\n<li>Zookeeperå…è®¸ç”¨æˆ·åœ¨æŒ‡å®šèŠ‚ç‚¹ä¸Šæ³¨å†Œä¸€äº›Watcherï¼Œå½“æ•°æ®èŠ‚ç‚¹å‘ç”Ÿå˜åŒ–çš„æ—¶å€™ï¼ŒZookeeperæœåŠ¡å™¨ä¼šæŠŠè¿™ä¸ªå˜åŒ–é€šçŸ¥å‘é€ç»™æ„Ÿå…´è¶£çš„å®¢æˆ·ç«¯ã€‚</li>\n</ul>\n</li>\n<li><p>ACLæƒé™æ§åˆ¶</p>\n<ul>\n<li>ACLæ˜¯Access Contril Lists çš„ç¼©å†™,Zookeeperé‡‡ç”¨ACLç­–ç•¥æ¥è¿›è¡Œæƒé™æ§åˆ¶,æœ‰ä»¥ä¸‹æƒé™ï¼š<ul>\n<li>CREATEï¼šåˆ›å»ºå­èŠ‚ç‚¹</li>\n<li>READï¼šè·å–å­èŠ‚ç‚¹</li>\n<li>WRITE:æ›´æ–°å­èŠ‚ç‚¹æ•°æ®æƒé™</li>\n<li>DELETE:åˆ é™¤å­èŠ‚ç‚¹æƒé™</li>\n<li>ADMINï¼šè®¾ç½®èŠ‚ç‚¹ACLæƒé™</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"Zoopeeperç¯å¢ƒæ­å»ºï¼ˆé›†ç¾¤ã€å•æœºã€ä¼ªé›†ç¾¤ï¼‰\"><a href=\"#Zoopeeperç¯å¢ƒæ­å»ºï¼ˆé›†ç¾¤ã€å•æœºã€ä¼ªé›†ç¾¤ï¼‰\" class=\"headerlink\" title=\"Zoopeeperç¯å¢ƒæ­å»ºï¼ˆé›†ç¾¤ã€å•æœºã€ä¼ªé›†ç¾¤ï¼‰\"></a>Zoopeeperç¯å¢ƒæ­å»ºï¼ˆé›†ç¾¤ã€å•æœºã€ä¼ªé›†ç¾¤ï¼‰</h3><ul>\n<li>å•æœºæ¨¡å¼ï¼ˆè®¾å¤‡ç¯å¢ƒæœ‰é™æš‚æ—¶å•æœºï¼‰<ul>\n<li>å‡†å¤‡å·¥ä½œ<ul>\n<li>ä¸‹è½½Zookeeperï¼ˆæ­¤å¤„è‡ªè¡Œå¤„ç†ï¼‰</li>\n<li>è§£å‹ tar xzvf xxx.gz è§£å‹</li>\n<li>é‡å‘½åæ–‡ä»¶å¤¹ Zookeeper å‘½ä»¤mv xxx xxx åé¢çš„å‚æ•°æ˜¯æ–°åå­—ï¼ˆå¯ä»¥ä¸åšï¼‰</li>\n<li>è¿›å…¥æ–‡ä»¶å¤¹ä¸­/conf/</li>\n<li>å¤åˆ¶é…ç½®æ–‡ä»¶zoo_sample.cfgï¼ˆæ ·ä¾‹æ–‡ä»¶ï¼‰ å¹¶é‡å‘½å zoo.cfg</li>\n</ul>\n</li>\n<li>ç¼–è¾‘zoo.cfgå†…å®¹ï¼ˆä»…ä¾›å‚è€ƒ,å…·ä½“ç¯å¢ƒè‡ªè¡Œä¿®æ”¹ï¼‰</li>\n<li>tickTime = 2000<ul>\n<li>tickTimeï¼šåŸºæœ¬äº‹ä»¶å•å…ƒï¼Œä»¥æ¯«ç§’ä¸ºå•ä½ã€‚è¿™ä¸ªæ—¶é—´æ˜¯ä½œä¸º Zookeeper æœåŠ¡å™¨ä¹‹é—´æˆ–å®¢æˆ·ç«¯ä¸æœåŠ¡å™¨ä¹‹é—´ç»´æŒå¿ƒè·³çš„æ—¶é—´é—´éš”ï¼Œä¹Ÿå°±æ˜¯æ¯ä¸ª tickTime æ—¶é—´å°±ä¼šå‘é€ä¸€ä¸ªå¿ƒè·³ã€‚</li>\n</ul>\n</li>\n<li>initLimit= 5<ul>\n<li>initLimit:è¿™ä¸ªé…ç½®é¡¹ç”¨æ¥é…ç½®Zookeeperæ¥å—å®¢æˆ·ç«¯åˆå§‹åŒ–è¿æ¥æ—¶æœ€é•¿èƒ½å¿å—å¤šå°‘ä¸ªå¿ƒè·³æ—¶é—´é—´éš”æ•°ï¼Œå½“å·²è¶…è¿‡5ä¸ªå¿ƒè·³çš„æ—¶é—´ï¼ˆä¹Ÿå°±æ˜¯tickTimeï¼‰é•¿åº¦åZookeeperæœåŠ¡å™¨è¿˜æ²¡æœ‰æ”¶åˆ°å®¢æˆ·ç«¯çš„è¿”å›ä¿¡æ¯ï¼Œé‚£ä¹ˆè¡¨æ˜è¿™ä¸ªå®¢æˆ·ç«¯è¿æ¥å¤±è´¥ã€‚æ€»çš„æ—¶é—´é•¿åº¦æ˜¯5 * 2000=4sã€‚</li>\n</ul>\n</li>\n<li>dataDir = D:\\zookeeper\\data<ul>\n<li>é¡¾åæ€ä¹‰å°±æ˜¯ Zookeeper ä¿å­˜æ•°æ®å¿«ç…§çš„ç›®å½•ï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼ŒZookeeper å°†å†™æ•°æ®çš„æ—¥å¿—æ–‡ä»¶ä¹Ÿä¿å­˜åœ¨è¿™ä¸ªç›®å½•é‡Œï¼‰ã€‚</li>\n</ul>\n</li>\n<li>dataLogDir= D:\\zookeeper\\log<ul>\n<li>é¡¾åæ€ä¹‰å°±æ˜¯ Zookeeper ä¿å­˜æ—¥å¿—çš„ç›®å½•ã€‚</li>\n</ul>\n</li>\n<li>synclimit = 5<ul>\n<li>è¿™ä¸ªé…ç½®é¡¹è¡¨ç¤ºLeaderä¸Followerä¹‹é—´å‘é€æ¶ˆæ¯ï¼Œè¯·æ±‚å’Œåº”ç­”æ—¶é—´é•¿é•¿åº¦ï¼Œæœ€é•¿ä¸èƒ½è¶…è¿‡å¤šå°‘ä¸ªtickTimeçš„æ—¶é—´é•¿åº¦,æ€»çš„æ—¶é—´é•¿åº¦æ˜¯2 * 2000 = 4sã€‚</li>\n</ul>\n</li>\n<li>clientPort = 2181<ul>\n<li>è¿™ä¸ªç«¯å£å°±æ˜¯å®¢æˆ·ç«¯è¿æ¥ Zookeeper æœåŠ¡å™¨çš„ç«¯å£ï¼ŒZookeeper ä¼šç›‘å¬è¿™ä¸ªç«¯å£ï¼Œæ¥å—å®¢æˆ·ç«¯çš„è®¿é—®è¯·æ±‚ã€‚</li>\n</ul>\n</li>\n<li>Serverï¼ˆå¾…ç»­ï¼‰<ul>\n<li>æ ¼å¼ï¼šserver.id=host:port:portï¼ˆä¸¤ä¸ªportä¿è¯å¯ä»¥æ­£å¸¸ä½¿ç”¨å°±è¡Œï¼‰<ul>\n<li>idï¼šé€šå¸¸ä¸ºæ•´æ•°ï¼Œå¹¶ä¸”ä¸èƒ½é‡å¤ä½¿ç”¨æ•´æ•°ã€‚</li>\n<li>hostï¼šæœåŠ¡å™¨çš„IPåœ°å€ã€‚</li>\n<li>port: Followerç«¯å£</li>\n<li>port: Leaderé€‰ä¸¾æŠ•ç¥¨ã€‚</li>\n</ul>\n</li>\n<li>ZooKeeperå»ºè®®ä½¿ç”¨hostnameï¼Œè€Œéipã€‚è¿™éœ€è¦å¯¹ä¸»æœºçš„/etc/hostnameå’Œ/etc/hostsåšhostç»‘å®š(ä¸ç”¨çš„OSä¸åŒä¿®æ”¹æ–¹å¼)ã€‚</li>\n<li>åˆ›å»ºä¸€ä¸ªmyidæ–‡ä»¶ï¼ˆæ”¾åœ¨ dataDiræ–‡ä»¶ä¸‹é¢ï¼‰</li>\n<li>å†™å…¥ä¸€è¡Œæ•°æ®ï¼ˆè¯·æŸ¥é˜…zoo.cfgæ–‡ä»¶ï¼‰<ul>\n<li>å†™å…¥idä½ç½®çš„æ•°æ®å³å¯ã€‚è¡¨ç¤ºå½“å‰ç³»ç»Ÿç¯å¢ƒZookeeperæ˜¯å“ªä¸€ä¸ªServerï¼ˆé€šè®¯ç”¨çš„ï¼‰ã€‚</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>å¯åŠ¨æœåŠ¡ä¸åœæ­¢æœåŠ¡</li>\n<li>è¿›å…¥bin/æ–‡ä»¶</li>\n<li>æ‰§è¡ŒzkServer.cmd æˆ–åˆ™ <a href=\"http://zkserver.sh/\" target=\"_blank\" rel=\"noopener\">zkServer.sh</a></li>\n<li>CMDç›´æ¥åŒå‡»è¿è¡Œ ,SHåˆ™ sudo sh ./zkServer.sh start å¯åŠ¨ stop å…³é—­</li>\n<li>éªŒè¯ ä½¿ç”¨telnetæ¥æµ‹è¯•(è‡ªè¡Œå®‰è£…)<ul>\n<li>telnet ip port æ•²å‘½ä»¤ stat è‹¥è¿”å›æ•°æ®è¡¨ç¤ºå½“å‰æœåŠ¡å™¨ä¸èƒ½å¯¹å¤–æä¾›æœåŠ¡è¡¨æ˜é›†ç¾¤ä¸‹å…¶ä»–æœåŠ¡å™¨æœªå¯åŠ¨ï¼ˆåœ¨Zookeeperä¸­åªè¦æœ‰åŠæ•°çš„æœåŠ¡å™¨æ­£å¸¸å·¥ä½œå°±å¯ä»¥å‘å¤–æä¾›æœåŠ¡ï¼‰ã€‚</li>\n</ul>\n</li>\n<li>åœ¨æ­¤ç®€å•è¯´æ˜ä¸‹ä½•ä¸ºä¼ªé›†ç¾¤å°±æ˜¯åœ¨ä¸€å°æœåŠ¡å™¨ä¸Šçš„å¤šä¸ªZookeeperçš„é›†ç¾¤å«ä¼ªé›†ç¾¤ï¼ˆä¼ªé›†ç¾¤ ä¸¤ä¸ªportä¸èƒ½ä¸å…¶ä»–zookeeperçš„portä¸€æ ·ï¼‰ã€‚</li>\n<li>å•æœºæ¨¡å¼å°±åˆ é™¤å…¶ä»–æœåŠ¡å™¨è¿è¡Œçš„æ—¶å€™å°±æ˜¯å•æœºæ¨¡å¼ã€‚</li>\n</ul>\n</li>\n</ul>\n","categories":["æœªåˆ†ç±»"]},{"title":"Docker-Compose-Redis5.0+Mysql5.7","url":"/posts/2663149277/","content":"<blockquote>\n<p>è®°å½•ä¸‹ä½¿ç”¨docker-composeæ„å»ºç®¡ç†Redisã€mysqlã€‚</p>\n</blockquote>\n<h2 id=\"å‡†å¤‡å·¥ä½œ\"><a href=\"#å‡†å¤‡å·¥ä½œ\" class=\"headerlink\" title=\"å‡†å¤‡å·¥ä½œ\"></a>å‡†å¤‡å·¥ä½œ</h2><ol>\n<li>åˆ›å»ºå·¥ä½œç›®å½•</li>\n</ol>\n<figure class=\"highlight sh\"><table><tr><td class=\"code\"><pre><span class=\"line\">$ mkdir -p docker docker/mysql docker/mysql/data docker/redis docker/redis/data</span><br><span class=\"line\"><span class=\"comment\"># ä½¿ç”¨ tree docker æŸ¥çœ‹ç›®å½•ç»“æ„ yum -y install tree å®‰è£…</span></span><br><span class=\"line\">$ tree docker</span><br><span class=\"line\">docker</span><br><span class=\"line\">â”œâ”€â”€ mysql</span><br><span class=\"line\">â”‚Â Â  â””â”€â”€ data</span><br><span class=\"line\">â””â”€â”€ redis</span><br><span class=\"line\">    â””â”€â”€ data</span><br><span class=\"line\">$ touch docker/mysql/my.cnf docker/redis/redis.conf </span><br><span class=\"line\">$ tree docker</span><br><span class=\"line\">docker</span><br><span class=\"line\">â”œâ”€â”€ mysql</span><br><span class=\"line\">â”‚Â Â  â”œâ”€â”€ data</span><br><span class=\"line\">â”‚Â Â  â””â”€â”€ my.cnf</span><br><span class=\"line\">â””â”€â”€ redis</span><br><span class=\"line\">    â”œâ”€â”€ data</span><br><span class=\"line\">    â””â”€â”€ redis.conf</span><br></pre></td></tr></table></figure>\n\n<ol start=\"2\">\n<li>å‡†å¤‡my.conf ã€redis.conf<ol>\n<li>my.conf</li>\n</ol>\n</li>\n</ol>\n<figure class=\"highlight sh\"><table><tr><td class=\"code\"><pre><span class=\"line\">[client]</span><br><span class=\"line\"> port = 3306</span><br><span class=\"line\"> socket = /var/lib/mysql/data/mysql.sock</span><br><span class=\"line\">[mysqld]</span><br><span class=\"line\"> <span class=\"comment\"># é’ˆå¯¹5.7ç‰ˆæœ¬æ‰§è¡Œgroup byå­—å¥å‡ºé”™é—®é¢˜è§£å†³</span></span><br><span class=\"line\">sql_mode=<span class=\"string\">'STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION'</span></span><br><span class=\"line\"> <span class=\"comment\"># ä¸€èˆ¬é…ç½®é€‰é¡¹</span></span><br><span class=\"line\"> basedir = /var/lib/mysql</span><br><span class=\"line\"> datadir = /var/lib/mysql/data</span><br><span class=\"line\"> port = 3306</span><br><span class=\"line\"> socket = /var/lib/mysql/data/mysql.sock</span><br><span class=\"line\"> lc-messages-dir = /usr/share/mysql <span class=\"comment\"># åŠ¡å¿…é…ç½®æ­¤é¡¹ï¼Œå¦åˆ™æ‰§è¡Œsqlå‡ºé”™æ—¶ï¼Œåªèƒ½æ˜¾ç¤ºé”™è¯¯ä»£ç è€Œä¸æ˜¾ç¤ºå…·ä½“é”™è¯¯æ¶ˆæ¯</span></span><br><span class=\"line\"> character-set-server=utf8</span><br><span class=\"line\"> back_log = 300</span><br><span class=\"line\"> max_connections = 3000</span><br><span class=\"line\"> max_connect_errors = 50</span><br><span class=\"line\"> table_open_cache = 4096</span><br><span class=\"line\"> max_allowed_packet = 32M</span><br><span class=\"line\"> <span class=\"comment\">#binlog_cache_size = 4M</span></span><br><span class=\"line\"> max_heap_table_size = 128M</span><br><span class=\"line\"> read_rnd_buffer_size = 16M</span><br><span class=\"line\"> sort_buffer_size = 16M</span><br><span class=\"line\"> join_buffer_size = 16M</span><br><span class=\"line\"> thread_cache_size = 16</span><br><span class=\"line\"> query_cache_size = 64M</span><br><span class=\"line\"> query_cache_limit = 4M</span><br><span class=\"line\"> ft_min_word_len = 8</span><br><span class=\"line\"> thread_stack = 512K</span><br><span class=\"line\"> transaction_isolation = REPEATABLE-READ</span><br><span class=\"line\"> tmp_table_size = 64M</span><br><span class=\"line\"> <span class=\"comment\">#log-bin=mysql-bin</span></span><br><span class=\"line\"> long_query_time = 6</span><br><span class=\"line\"> server_id=1</span><br><span class=\"line\"> innodb_buffer_pool_size = 256M</span><br><span class=\"line\"> innodb_thread_concurrency = 16</span><br><span class=\"line\"> innodb_log_buffer_size = 16M</span><br></pre></td></tr></table></figure>\n\n<ol start=\"2\">\n<li>redis.conf å¯ä»¥å»è¿™é‡Œä¸‹è½½ <a href=\"https://redis.io/topics/config\" target=\"_blank\" rel=\"noopener\">å®˜ç½‘</a></li>\n</ol>\n<figure class=\"highlight sh\"><table><tr><td class=\"code\"><pre><span class=\"line\">wget https://raw.githubusercontent.com/redis/redis/5.0/redis.conf</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># ä¿®æ”¹å†…å®¹</span></span><br><span class=\"line\">daemonize no     <span class=\"comment\">## è‹¥ä½¿ç”¨å¼€æœºå¯åŠ¨ï¼Œç”Ÿæˆpidï¼Œè¯¥é¡¹å¿…é¡»è®¾ç½®ä¸ºè¯¶yesï¼Œå¦åˆ™rediså°†ä¸èƒ½å¤Ÿæ­£å¸¸æ‰§è¡Œå¼€æœºå¯åŠ¨(systemctl start redis,æ‰§è¡Œåä¸€ç›´å¡ç€ï¼Œç›´åˆ°è¶…æ—¶)</span></span><br><span class=\"line\"><span class=\"comment\">#bind 127.0.0.1  ##æ³¨é‡Šæ‰ï¼Œå…è®¸æ‰€æœ‰å…¶ä»–ipè®¿é—®ï¼ŒçœŸå®ä½¿ç”¨æœ€å¥½åä¸‹é™åˆ¶ï¼Œåªå…è®¸æŸäº›ä¸»æœºè®¿é—®</span></span><br><span class=\"line\">protected-mode no  <span class=\"comment\">## å…è®¸å…¶ä»–æœºå™¨ä¸Šçš„å®¢æˆ·ç«¯è¿æ¥å½“å‰redisï¼Œé…ç½®æ–‡ä»¶è®¾ç½®è¯¥é¡¹ï¼Œåˆ™å¼€æœºå¯åŠ¨å¤„å°±å¯ä»¥å»æ‰--protected no </span></span><br><span class=\"line\">requirepass root  <span class=\"comment\">##è®¾ç½®å¯†ç </span></span><br><span class=\"line\"><span class=\"comment\"># daemonize yesï¼Œä»–çš„ä½œç”¨æ˜¯å¼€å¯å®ˆæŠ¤è¿›ç¨‹æ¨¡å¼ï¼Œåœ¨è¯¥æ¨¡å¼ä¸‹ï¼Œredisä¼šåœ¨åå°è¿è¡Œï¼Œå¹¶å°†è¿›ç¨‹pidå·å†™å…¥è‡³redis.confé€‰é¡¹pidfileè®¾ç½®çš„æ–‡ä»¶ä¸­ï¼Œæ­¤æ—¶rediså°†ä¸€ç›´è¿è¡Œï¼Œé™¤éæ‰‹åŠ¨killè¯¥è¿›ç¨‹ã€‚ä½†æ˜¯åœ¨åé¢çš„å‘½ä»¤ä¸­â€œ-dâ€é€‰é¡¹ä¹Ÿæ˜¯å¼€å¯daemonizeï¼Œè¿™æ˜¯dockerè‡ªå®¶çš„æ–¹å¼ã€‚</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"ç¼–å†™Docker-Composeæ–‡ä»¶\"><a href=\"#ç¼–å†™Docker-Composeæ–‡ä»¶\" class=\"headerlink\" title=\"ç¼–å†™Docker-Composeæ–‡ä»¶\"></a>ç¼–å†™Docker-Composeæ–‡ä»¶</h2><figure class=\"highlight dockerfile\"><table><tr><td class=\"code\"><pre><span class=\"line\">version : <span class=\"string\">'3'</span></span><br><span class=\"line\">services:</span><br><span class=\"line\">  mysql:</span><br><span class=\"line\">    image: mysql/mysql-server:<span class=\"number\">5.7</span>.<span class=\"number\">18</span></span><br><span class=\"line\">    container_name: mysql5.<span class=\"number\">7.18</span>-dev</span><br><span class=\"line\">    networks:</span><br><span class=\"line\">      - net-shop-db</span><br><span class=\"line\">    ports:</span><br><span class=\"line\">      - <span class=\"string\">\"3306:3306\"</span></span><br><span class=\"line\">    volumes:</span><br><span class=\"line\">      - /opt/docker/mysql/my.cnf:/etc/my.cnf <span class=\"comment\"># æ˜ å°„æ•°æ®åº“é…ç½®æ–‡ä»¶</span></span><br><span class=\"line\">      - /opt/docker/mysql/data:/var/lib/mysql/data  <span class=\"comment\"># æ˜ å°„æ•°æ®åº“ä¿å­˜ç›®å½•åˆ°å®¿ä¸»æœºï¼Œé˜²æ­¢æ•°æ®ä¸¢å¤±</span></span><br><span class=\"line\">      - /opt/docker/mysql/log:/var/log/mysql <span class=\"comment\"># æ—¥å¿—æ–‡ä»¶</span></span><br><span class=\"line\">      - /etc/localtime:/etc/localtime:ro <span class=\"comment\"># è®¾ç½®å®¹å™¨æ—¶åŒºä¸å®¿ä¸»æœºä¿æŒä¸€è‡´</span></span><br><span class=\"line\">    restart: always <span class=\"comment\"># è®¾ç½®å®¹å™¨è‡ªå¯æ¨¡å¼</span></span><br><span class=\"line\">    command: [</span><br><span class=\"line\">      <span class=\"string\">'--character-set-server=utf8mb4'</span>,</span><br><span class=\"line\">      <span class=\"string\">'--collation-server=utf8mb4_unicode_ci'</span>,</span><br><span class=\"line\">      <span class=\"string\">'--lower_case_table_names=1'</span>,</span><br><span class=\"line\">      <span class=\"string\">'--default-time-zone=+8:00'</span>]</span><br><span class=\"line\">    environment:</span><br><span class=\"line\">      - TZ=Asia/Shanghai <span class=\"comment\"># è®¾ç½®å®¹å™¨æ—¶åŒºä¸å®¿ä¸»æœºä¿æŒä¸€è‡´</span></span><br><span class=\"line\">      - MYSQL_ROOT_PASSWORD=root <span class=\"comment\"># è®¾ç½®rootå¯†ç </span></span><br><span class=\"line\">  redis:</span><br><span class=\"line\">    image: redis:<span class=\"number\">5.0</span>.<span class=\"number\">5</span></span><br><span class=\"line\">    container_name: redis5.<span class=\"number\">0.6</span>-dev</span><br><span class=\"line\">    networks:</span><br><span class=\"line\">      - net-shop-db</span><br><span class=\"line\">    ports:</span><br><span class=\"line\">      - <span class=\"string\">\"6379:6379\"</span></span><br><span class=\"line\">    volumes:</span><br><span class=\"line\">      - /etc/localtime:/etc/localtime:ro <span class=\"comment\"># è®¾ç½®å®¹å™¨æ—¶åŒºä¸å®¿ä¸»æœºä¿æŒä¸€è‡´</span></span><br><span class=\"line\">      - /opt/docker/redis/data:/data</span><br><span class=\"line\">      - /opt/docker/redis/redis.conf:/etc/redis.conf</span><br><span class=\"line\">    command: redis-server /etc/redis.conf <span class=\"comment\"># å¯åŠ¨rediså‘½ä»¤</span></span><br><span class=\"line\">    environment:</span><br><span class=\"line\">      - TZ=Asia/Shanghai <span class=\"comment\"># è®¾ç½®å®¹å™¨æ—¶åŒºä¸å®¿ä¸»æœºä¿æŒä¸€è‡´</span></span><br><span class=\"line\">    restart: always <span class=\"comment\"># è®¾ç½®å®¹å™¨è‡ªå¯æ¨¡å¼</span></span><br><span class=\"line\"></span><br><span class=\"line\">networks:</span><br><span class=\"line\">  net-shop-db:</span><br><span class=\"line\">    driver: bridge</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"åŸºæœ¬ç”¨æ³•\"><a href=\"#åŸºæœ¬ç”¨æ³•\" class=\"headerlink\" title=\"åŸºæœ¬ç”¨æ³•\"></a>åŸºæœ¬ç”¨æ³•</h2><blockquote>\n<p>æ³¨æ„éœ€è¦æå‰å¯åŠ¨docker</p>\n</blockquote>\n<ol>\n<li>åˆ›å»ºå¹¶å¯åŠ¨å®¹å™¨ <code>docker-compose -f docker-compose.yml up -d</code></li>\n<li>æ‰¹é‡åœæ­¢å®¹å™¨å¹¶æ¸…é™¤å®¹å™¨ <code>docker-compose -f docker-compose.yml down</code></li>\n<li>é‡æ–°æ„å»ºå®¹å™¨ <code>docker-compose -f docker-compose.yml up --build -d</code></li>\n<li>å¯åŠ¨å¤±è´¥ï¼Œå¯ä»¥æŸ¥çœ‹å®¹å™¨æ—¥å¿—ä¿¡æ¯è·å–å¸®åŠ© <code>docker logs å®¹å™¨åè¯æˆ–å®¹å™¨ID # æ—¢docker-compose.ymlæ–‡ä»¶å‚æ•°container_nameæŒ‡å®šçš„å€¼</code></li>\n</ol>\n<h2 id=\"å¤‡æ³¨\"><a href=\"#å¤‡æ³¨\" class=\"headerlink\" title=\"å¤‡æ³¨\"></a>å¤‡æ³¨</h2><ol>\n<li>docker-compose å‘½ä»¤ä¸å­˜åœ¨ã€æœªæ‰¾åˆ°å‘½ä»¤ã€‚ç›´æ¥ä»githubä¸Šä¸‹è½½ï¼Œå›½å†…ä¸‹è½½å·¨æ…¢ã€‚</li>\n</ol>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># æ³¨æ„æŸ¥çœ‹docker ç‰ˆæœ¬ å’Œ docker-compose çš„ç‰ˆæœ¬</span></span><br><span class=\"line\"><span class=\"built_in\">cd</span> /usr/<span class=\"built_in\">local</span>/bin/</span><br><span class=\"line\"></span><br><span class=\"line\">curl -L https://github.com/docker/compose/releases/download/1.27.4/docker-compose-`uname -s`-`uname -m` -o /usr/<span class=\"built_in\">local</span>/bin/docker-compose</span><br><span class=\"line\"><span class=\"comment\">#ã€‚ç›´æ¥ç”¨å›½å†…çš„é•œåƒ</span></span><br><span class=\"line\">curl -L https://get.daocloud.io/docker/compose/releases/download/1.27.4/docker-compose-`uname -s`-`uname -m` &gt; /usr/<span class=\"built_in\">local</span>/bin/docker-compose</span><br><span class=\"line\"></span><br><span class=\"line\">chmod +x /usr/<span class=\"built_in\">local</span>/bin/docker-compose</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"å‚è€ƒ\"><a href=\"#å‚è€ƒ\" class=\"headerlink\" title=\"å‚è€ƒ\"></a>å‚è€ƒ</h2><p><a href=\"https://yefeihonours.github.io/post/docker/docker_compose/\" target=\"_blank\" rel=\"noopener\">docker-compose å‘½ä»¤ä¸å­˜åœ¨ã€æœªæ‰¾åˆ°å‘½ä»¤</a></p>\n<p><a href=\"https://zhuanlan.zhihu.com/p/43654441\" target=\"_blank\" rel=\"noopener\">ä½¿ç”¨ docker-compose åœ¨ Docker ä¸­å¯åŠ¨æœ‰å¯†ç çš„ Redis å®¹å™¨</a></p>\n<p><a href=\"https://cloud.tencent.com/developer/article/1678769\" target=\"_blank\" rel=\"noopener\">Docker-Composeæ­å»ºmysqlã€redisã€zookeeperã€rabbitmqã€consulã€elasticsearchç¯å¢ƒ</a></p>\n<p><a href=\"https://juejin.cn/post/6844903655389265927\" target=\"_blank\" rel=\"noopener\">Docker Composeå¤šå®¹å™¨éƒ¨ç½²</a></p>\n<p><a href=\"https://colobu.com/2018/05/15/Stop-and-remove-all-docker-containers-and-images/\" target=\"_blank\" rel=\"noopener\">åœæ­¢ã€åˆ é™¤æ‰€æœ‰çš„dockerå®¹å™¨å’Œé•œåƒ</a></p>\n<p><a href=\"https://my.oschina.net/u/4362704/blog/3308004\" target=\"_blank\" rel=\"noopener\">å®¿ä¸»æœºè¿æ¥dockerä¸­çš„mysql</a></p>\n<p><a href=\"https://developer.aliyun.com/article/618035\" target=\"_blank\" rel=\"noopener\">Docker Compose å®‰è£… on centos7</a></p>\n<p><a href=\"https://cloud.tencent.com/developer/article/1678769\" target=\"_blank\" rel=\"noopener\">Docker-Composeæ­å»ºmysqlã€redisã€zookeeperã€rabbitmqã€consulã€elasticsearchç¯å¢ƒ</a></p>\n<p><a href=\"https://zhuanlan.zhihu.com/p/140732202\" target=\"_blank\" rel=\"noopener\">docker-composeä¸€é”®å®‰è£…redis+mysql+rabbitmq</a></p>\n","categories":["Docker"],"tags":["Mysql","Redis","Docker","Docker-Compose"]},{"title":"Centos7.*-Dockeréƒ¨ç½²","url":"/posts/3601561739/","content":"<blockquote>\n<p>è®°å½•ä¸‹è‡ªå·±åœ¨é˜¿é‡Œäº‘éƒ¨ç½²dockerè®°å½•ã€‚</p>\n</blockquote>\n<h2 id=\"å‡†å¤‡å·¥ä½œ\"><a href=\"#å‡†å¤‡å·¥ä½œ\" class=\"headerlink\" title=\"å‡†å¤‡å·¥ä½œ\"></a>å‡†å¤‡å·¥ä½œ</h2><ol>\n<li>å‡†å¤‡ä¸€å°ESCæœåŠ¡å™¨ï¼Œå¹¶å¯ä»¥ä½¿ç”¨æ§åˆ¶å°ç™»å½•ã€‚</li>\n<li>æ£€æŸ¥ESCæ˜¯å¦å®‰è£…äº†dockerï¼Œå¯ä»¥é€‰æ‹©æ˜¯å¦å¸è½½é‡è£…ã€‚<ol>\n<li>æ£€æŸ¥dockeræ˜¯å¦å®‰è£…,<code>docker æ˜¾ç¤ºç›¸å…³ä¿¡æ¯åˆ™è¡¨ç¤ºå®‰è£…</code></li>\n<li>å¸è½½dockerï¼Œè‹¥ä¸é‡è£…ç›´æ¥å¿½ç•¥ï¼Œ<code>yum list installed | grep docker</code>æŸ¥çœ‹å®‰è£…å†…å®¹</li>\n</ol>\n</li>\n</ol>\n<figure class=\"highlight sh\"><table><tr><td class=\"code\"><pre><span class=\"line\">$ yum list installed | grep docker</span><br><span class=\"line\">containerd.io.x86_64                1.3.7-3.1.el7                   @docker-ce-stable</span><br><span class=\"line\">docker-ce.x86_64                    3:19.03.13-3.el7                @docker-ce-stable</span><br><span class=\"line\">docker-ce-cli.x86_64                1:19.03.13-3.el7                @docker-ce-stable</span><br><span class=\"line\"><span class=\"comment\"># ä¾æ¬¡å¸è½½</span></span><br><span class=\"line\">$ yum -y remove docker-ce.x86_64</span><br><span class=\"line\">$ yum -y remove docker-ce-cli.x86_64</span><br><span class=\"line\">$ yum -y remove containerd.io.x86_64</span><br><span class=\"line\"><span class=\"comment\"># æ£€æŸ¥å¸è½½ç»“æœ</span></span><br><span class=\"line\">$ yum list installed | grep docker</span><br><span class=\"line\"><span class=\"comment\"># æ— è¾“å‡ºå†…å®¹</span></span><br><span class=\"line\">$ docker </span><br><span class=\"line\"><span class=\"comment\"># -bash: docekr: æœªæ‰¾åˆ°å‘½ä»¤ åˆ™è¡¨ç¤ºå¸è½½å¹²å‡€äº†</span></span><br></pre></td></tr></table></figure>\n\n<ol start=\"3\">\n<li>å®‰è£…docker<ol>\n<li>æ›´æ–°yum <code>yum update</code></li>\n<li>è·å–å®˜æ–¹æº<code>wget -P /etc/yum.repos.d/ https://download.docker.com/linux/centos/docker-ce.repo</code></li>\n<li>æŸ¥çœ‹å¯ä»¥å®‰è£…çš„ç‰ˆæœ¬<code>yum list docker-ce --showduplicates | sort -r</code></li>\n<li>é€‰æ‹©å®‰è£… <code>yum install -y docker-ce-18.03.0.ce-1.el7.centos</code></li>\n<li>å®‰è£…docker <code>yum install docker -y</code><ol>\n<li>æ£€æŸ¥<code>docker -v</code>è¾“å‡ºç‰ˆæœ¬ä¿¡æ¯</li>\n</ol>\n</li>\n</ol>\n</li>\n</ol>\n<h2 id=\"è®¾ç½®dockerç›¸å…³ä¿¡æ¯\"><a href=\"#è®¾ç½®dockerç›¸å…³ä¿¡æ¯\" class=\"headerlink\" title=\"è®¾ç½®dockerç›¸å…³ä¿¡æ¯\"></a>è®¾ç½®dockerç›¸å…³ä¿¡æ¯</h2><ol>\n<li>è®¾ç½®dockerå¼€æœºå¯åŠ¨é¡¹<code>systemctl enable docker.service</code></li>\n<li>å…³é—­dockerå¼€æœºå¯åŠ¨é¡¹ <code>systemctl stop docker.service</code></li>\n<li>æ£€æŸ¥dockerå½“å‰è¿è¡Œæƒ…å†µ <code>systemctl status docker</code></li>\n<li>è‹¥æœªå¯åŠ¨åˆ™å¯åŠ¨docker <code>systemctl start docker</code> ,è‹¥å¯åŠ¨äº†å¯ä»¥é‡å¯<code>systemctl restart docker</code></li>\n<li>æ£€æŸ¥dockerè¿è¡Œæƒ…å†µ<code>service docker status</code></li>\n</ol>\n<h2 id=\"å‚è€ƒæ–‡æ¡£\"><a href=\"#å‚è€ƒæ–‡æ¡£\" class=\"headerlink\" title=\"å‚è€ƒæ–‡æ¡£\"></a>å‚è€ƒæ–‡æ¡£</h2><p><a href=\"https://developer.aliyun.com/article/336442\" target=\"_blank\" rel=\"noopener\">é˜¿é‡Œäº‘CentOS 7ä¸Šå®‰è£…é…ç½®Docker</a></p>\n<p><a href=\"https://www.digitalocean.com/community/tutorials/how-to-install-and-use-docker-compose-on-centos-7\" target=\"_blank\" rel=\"noopener\">How To Install and Use Docker Compose on CentOS 7</a></p>\n","categories":["Linuxè¿ç»´"],"tags":["Centos7","Linux","Docker"]},{"title":"æºç åˆ†æ-nettyæºç ç¯å¢ƒæ­å»º","url":"/posts/2918322548/","content":"<h2 id=\"0x00-é˜…è¯»æºä»£ç \"><a href=\"#0x00-é˜…è¯»æºä»£ç \" class=\"headerlink\" title=\"0x00 é˜…è¯»æºä»£ç \"></a>0x00 é˜…è¯»æºä»£ç </h2><h3 id=\"ä¸‹è½½æºä»£ç \"><a href=\"#ä¸‹è½½æºä»£ç \" class=\"headerlink\" title=\"ä¸‹è½½æºä»£ç \"></a>ä¸‹è½½æºä»£ç </h3><ul>\n<li>é˜…è¯»ç‰ˆæœ¬å· <code>netty-4.1.33.Final</code><ul>\n<li>ç”±äºgithubä¸‹è½½é€Ÿåº¦æ˜¯åœ¨å¤ªæ…¢äº†ï¼Œè¿™é‡Œç”¨giteeå…‹éš†ä¸€ä¸ªé•œåƒã€‚</li>\n<li>ä¸‹è½½ç‰ˆæœ¬<code>git clone -b netty-4.1.33.Final git@gitee.com:Z201/netty.git</code></li>\n</ul>\n</li>\n</ul>\n<h3 id=\"æŸ¥çœ‹æºä»£ç ç»“æ„\"><a href=\"#æŸ¥çœ‹æºä»£ç ç»“æ„\" class=\"headerlink\" title=\"æŸ¥çœ‹æºä»£ç ç»“æ„\"></a>æŸ¥çœ‹æºä»£ç ç»“æ„</h3><ul>\n<li>æŸ¥çœ‹é¡¹ç›®ä¸»è¦æ–‡ä»¶å¤¹</li>\n</ul>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">tree -d  -L 1    </span><br><span class=\"line\">â”œâ”€â”€ all</span><br><span class=\"line\">â”œâ”€â”€ bom</span><br><span class=\"line\">â”œâ”€â”€ buffer (Core nettyå®šåˆ¶çš„buffer)</span><br><span class=\"line\">â”œâ”€â”€ codec (Protocol Support)</span><br><span class=\"line\">â”œâ”€â”€ codec-dns (Protocol Support)</span><br><span class=\"line\">â”œâ”€â”€ codec-haproxy (Protocol Support)</span><br><span class=\"line\">â”œâ”€â”€ codec-http (Protocol Support)</span><br><span class=\"line\">â”œâ”€â”€ codec-http2 (Protocol Support)</span><br><span class=\"line\">â”œâ”€â”€ codec-memcache (Protocol Support)</span><br><span class=\"line\">â”œâ”€â”€ codec-mqtt (Protocol Support ç‰©è”ç½‘)</span><br><span class=\"line\">â”œâ”€â”€ codec-redis (Protocol Support )</span><br><span class=\"line\">â”œâ”€â”€ codec-smtp (Protocol Support é‚®ä»¶)</span><br><span class=\"line\">â”œâ”€â”€ codec-socks (Protocol Support)</span><br><span class=\"line\">â”œâ”€â”€ codec-stomp (Protocol Support ws)</span><br><span class=\"line\">â”œâ”€â”€ codec-xml (Protocol Support)</span><br><span class=\"line\">â”œâ”€â”€ common (Core)</span><br><span class=\"line\">â”œâ”€â”€ dev-tools</span><br><span class=\"line\">â”œâ”€â”€ docker</span><br><span class=\"line\">â”œâ”€â”€ example ï¼ˆæŠ„ä»£ç çš„åœ°æ–¹ï¼‰</span><br><span class=\"line\">â”œâ”€â”€ handler  (Protocol Support)</span><br><span class=\"line\">â”œâ”€â”€ handler-proxy (Protocol Support)</span><br><span class=\"line\">â”œâ”€â”€ license</span><br><span class=\"line\">â”œâ”€â”€ microbench (æµ‹è¯•ç”¨çš„)</span><br><span class=\"line\">â”œâ”€â”€ resolver\t(Core)</span><br><span class=\"line\">â”œâ”€â”€ resolver-dns (Core)</span><br><span class=\"line\">â”œâ”€â”€ tarball</span><br><span class=\"line\">â”œâ”€â”€ target</span><br><span class=\"line\">â”œâ”€â”€ testsuite</span><br><span class=\"line\">â”œâ”€â”€ testsuite-autobahn</span><br><span class=\"line\">â”œâ”€â”€ testsuite-http2</span><br><span class=\"line\">â”œâ”€â”€ testsuite-osgi</span><br><span class=\"line\">â”œâ”€â”€ testsuite-shading</span><br><span class=\"line\">â”œâ”€â”€ transport (Transport Services)</span><br><span class=\"line\">â”œâ”€â”€ transport-native-epoll  (Transport Servicesnative omitted - reserved keyword <span class=\"keyword\">in</span> Java)</span><br><span class=\"line\">â”œâ”€â”€ transport-native-kqueue (Transport Servicesnative omitted - reserved keyword <span class=\"keyword\">in</span> Java)</span><br><span class=\"line\">â”œâ”€â”€ transport-native-unix-common Transport Services native omitted - reserved keyword <span class=\"keyword\">in</span> Java)</span><br><span class=\"line\">â”œâ”€â”€ transport-native-unix-common-tests </span><br><span class=\"line\">â”œâ”€â”€ transport-rxtx (Transport Services ä¸²å£ç¼–ç¨‹ ä½œåºŸ)</span><br><span class=\"line\">â”œâ”€â”€ transport-sctp (Transport Services )</span><br><span class=\"line\">â””â”€â”€ transport-udt  (Transport Services ä½œåºŸ)</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>å°†é¡¹ç›®å¯¼å…¥ideaä¸­ï¼Œç¬”è€…é‡‡ç”¨macç³»ç»Ÿã€‚è¿™é‡Œéœ€è¦æ³¨æ„éœ€è¦å®‰è£…éƒ¨åˆ†è½¯ä»¶ã€‚</li>\n</ul>\n<figure class=\"highlight shell\"><table><tr><td class=\"code\"><pre><span class=\"line\">brew install autoconf automake libtool</span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> å¦‚æœå®‰è£…äº†å›½å†…çš„é•œåƒå‡ºç°Error opening archive: Failed to open</span></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> <span class=\"built_in\">export</span> HOMEBREW_BOTTLE_DOMAIN=<span class=\"string\">''</span></span></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> å‚è€ƒæ–‡æ¡£ https://zhuanlan.zhihu.com/p/383707713</span></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> å¦‚æœæ˜¯macç³»ç»Ÿéœ€è¦æ‰‹åŠ¨å°†pomæ–‡ä»¶tcnative.classifierä¿®æ”¹æˆå¯¹åº”ç³»ç»Ÿçš„ã€‚</span></span><br><span class=\"line\">mvn install -Dmaven.test.skip=true</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"0x01-æ ¹æ®å®˜æ–¹æ–‡æ¡£å¿«é€Ÿå…¥é—¨\"><a href=\"#0x01-æ ¹æ®å®˜æ–¹æ–‡æ¡£å¿«é€Ÿå…¥é—¨\" class=\"headerlink\" title=\"0x01 æ ¹æ®å®˜æ–¹æ–‡æ¡£å¿«é€Ÿå…¥é—¨\"></a>0x01 æ ¹æ®å®˜æ–¹æ–‡æ¡£å¿«é€Ÿå…¥é—¨</h2><blockquote>\n<p>å¼ºçƒˆæ¨èè®¤çœŸé˜…è¯»nettyçš„å®˜æ–¹æ–‡æ¡£ã€‚</p>\n</blockquote>\n<ul>\n<li>å®˜æ–¹æ–‡æ¡£åœ°å€ ï¼š<a href=\"https://netty.io/wiki/index.html\" target=\"_blank\" rel=\"noopener\">https://netty.io/wiki/index.html</a></li>\n</ul>\n<h3 id=\"Core\"><a href=\"#Core\" class=\"headerlink\" title=\"Core\"></a>Core</h3><ul>\n<li>netty-commonæ¨¡å—æ˜¯ Netty çš„æ ¸å¿ƒåŸºç¡€åŒ…ï¼Œå…¶ä»–æ¨¡å—éƒ½éœ€è¦ä¾èµ–å®ƒã€‚å¸¸ç”¨çš„åŒ…æ‹¬é€šç”¨å·¥å…·ç±»å’Œè‡ªå®šä¹‰å¹¶å‘åŒ…ã€‚</li>\n<li>netty-buffer æ¨¡å—ä¸­Nettyè‡ªå·±å®ç°äº†çš„ä¸€ä¸ªæ›´åŠ å®Œå¤‡çš„ByteBuf å·¥å…·ç±»ï¼Œç”¨äºç½‘ç»œé€šä¿¡ä¸­çš„æ•°æ®è½½ä½“ã€‚</li>\n<li>netty-resoveræ¨¡å—ä¸»è¦æä¾›äº†ä¸€äº›æœ‰å…³åŸºç¡€è®¾æ–½çš„è§£æå·¥å…·ï¼ŒåŒ…æ‹¬ IP Addressã€Hostnameã€DNS ç­‰ã€‚</li>\n</ul>\n<h3 id=\"Protocol-Support\"><a href=\"#Protocol-Support\" class=\"headerlink\" title=\"Protocol Support\"></a>Protocol Support</h3><ul>\n<li>netty-codecæ¨¡å—ä¸»è¦è´Ÿè´£ç¼–è§£ç å·¥ä½œï¼Œæä¾›ä¸»æµåè®®çš„ç¼–è¾‘ç ï¼Œè¿˜æä¾›äº†æŠ½è±¡ç¼–è§£ç ç±» ByteToMessageDecoder å’Œ MessageToByteEncoderï¼Œé€šè¿‡ç»§æ‰¿è¿™ä¸¤ä¸ªç±»æˆ‘ä»¬å¯ä»¥è½»æ¾å®ç°è‡ªå®šä¹‰çš„ç¼–è§£ç é€»è¾‘ã€‚</li>\n</ul>\n<h3 id=\"Transport-Service\"><a href=\"#Transport-Service\" class=\"headerlink\" title=\"Transport Service\"></a>Transport Service</h3><ul>\n<li>netty-transport æ¨¡å—å¯ä»¥è¯´æ˜¯ Netty æä¾›æ•°æ®å¤„ç†å’Œä¼ è¾“çš„æ ¸å¿ƒæ¨¡å—ï¼Œå¦‚ Bootstrapã€Channelã€ChannelHandlerã€EventLoopã€EventLoopGroupã€ChannelPipeline ç­‰ã€‚å…¶ä¸­ Bootstrap è´Ÿè´£å®¢æˆ·ç«¯æˆ–æœåŠ¡ç«¯çš„å¯åŠ¨å·¥ä½œï¼ŒåŒ…æ‹¬åˆ›å»ºã€åˆå§‹åŒ– Channel ç­‰ï¼›EventLoop è´Ÿè´£å‘æ³¨å†Œçš„ Channel å‘èµ· I/O è¯»å†™æ“ä½œï¼›ChannelPipeline è´Ÿè´£ ChannelHandler çš„æœ‰åºç¼–æ’ï¼Œè¿™äº›ç»„ä»¶åœ¨ä»‹ç» Netty é€»è¾‘æ¶æ„çš„æ—¶å€™éƒ½æœ‰æ‰€æ¶‰åŠã€‚</li>\n</ul>\n","categories":["æºç åˆ†æ"],"tags":["Netty"]},{"title":"MySQLåŸºç¡€ï¼ˆä¸‰ï¼‰","url":"/posts/2011046270/","content":"<h2 id=\"SQL-å¸¸è§ç”¨æ³•\"><a href=\"#SQL-å¸¸è§ç”¨æ³•\" class=\"headerlink\" title=\"SQL å¸¸è§ç”¨æ³•\"></a>SQL å¸¸è§ç”¨æ³•</h2><h3 id=\"1-æŸ¥æ‰¾æ•°æ®çš„æŸ¥è¯¢\"><a href=\"#1-æŸ¥æ‰¾æ•°æ®çš„æŸ¥è¯¢\" class=\"headerlink\" title=\"1. æŸ¥æ‰¾æ•°æ®çš„æŸ¥è¯¢\"></a>1. æŸ¥æ‰¾æ•°æ®çš„æŸ¥è¯¢</h3><h4 id=\"SELECT-ç”¨äºä»æ•°æ®åº“ä¸­é€‰æ‹©æ•°æ®\"><a href=\"#SELECT-ç”¨äºä»æ•°æ®åº“ä¸­é€‰æ‹©æ•°æ®\" class=\"headerlink\" title=\"SELECT: ç”¨äºä»æ•°æ®åº“ä¸­é€‰æ‹©æ•°æ®\"></a><strong>SELECT</strong>: ç”¨äºä»æ•°æ®åº“ä¸­é€‰æ‹©æ•°æ®</h4><ul>\n<li><code>SELECT</code> * <code>FROM</code> table_name;</li>\n</ul>\n<h4 id=\"DISTINCT-ç”¨äºè¿‡æ»¤æ‰é‡å¤çš„å€¼å¹¶è¿”å›æŒ‡å®šåˆ—çš„è¡Œ\"><a href=\"#DISTINCT-ç”¨äºè¿‡æ»¤æ‰é‡å¤çš„å€¼å¹¶è¿”å›æŒ‡å®šåˆ—çš„è¡Œ\" class=\"headerlink\" title=\"DISTINCT: ç”¨äºè¿‡æ»¤æ‰é‡å¤çš„å€¼å¹¶è¿”å›æŒ‡å®šåˆ—çš„è¡Œ\"></a><strong>DISTINCT</strong>: ç”¨äºè¿‡æ»¤æ‰é‡å¤çš„å€¼å¹¶è¿”å›æŒ‡å®šåˆ—çš„è¡Œ</h4><ul>\n<li><code>SELECT DISTINCT</code> column_name;</li>\n</ul>\n<h4 id=\"WHERE-ç”¨äºè¿‡æ»¤è®°å½•-è¡Œ\"><a href=\"#WHERE-ç”¨äºè¿‡æ»¤è®°å½•-è¡Œ\" class=\"headerlink\" title=\"WHERE: ç”¨äºè¿‡æ»¤è®°å½•/è¡Œ\"></a><strong>WHERE</strong>: ç”¨äºè¿‡æ»¤è®°å½•/è¡Œ</h4><ul>\n<li><code>SELECT</code> column1, column2 <code>FROM</code> table_name <code>WHERE</code> condition;</li>\n<li><code>SELECT</code> * <code>FROM</code> table_name <code>WHERE</code> condition1 <code>AND</code> condition2;</li>\n<li><code>SELECT</code> * <code>FROM</code> table_name <code>WHERE</code> condition1 <code>OR</code> condition2;</li>\n<li><code>SELECT</code> * <code>FROM</code> table_name <code>WHERE NOT</code> condition;</li>\n<li><code>SELECT</code> * <code>FROM</code> table_name <code>WHERE</code> condition1 <code>AND</code> (condition2 <code>OR</code> condition3);</li>\n<li><code>SELECT</code> * <code>FROM</code> table_name <code>WHERE EXISTS</code> (<code>SELECT</code> column_name <code>FROM</code> table_name <code>WHERE</code> condition);</li>\n</ul>\n<h4 id=\"ORDER-BY-ç”¨äºç»“æœé›†çš„æ’åºï¼Œå‡åºï¼ˆASCï¼‰æˆ–è€…é™åºï¼ˆDESCï¼‰\"><a href=\"#ORDER-BY-ç”¨äºç»“æœé›†çš„æ’åºï¼Œå‡åºï¼ˆASCï¼‰æˆ–è€…é™åºï¼ˆDESCï¼‰\" class=\"headerlink\" title=\"ORDER BY: ç”¨äºç»“æœé›†çš„æ’åºï¼Œå‡åºï¼ˆASCï¼‰æˆ–è€…é™åºï¼ˆDESCï¼‰\"></a><strong>ORDER BY</strong>: ç”¨äºç»“æœé›†çš„æ’åºï¼Œå‡åºï¼ˆASCï¼‰æˆ–è€…é™åºï¼ˆDESCï¼‰</h4><ul>\n<li><code>SELECT</code> * <code>FROM</code> table_name <code>ORDER BY</code> column;</li>\n<li><code>SELECT</code> * <code>FROM</code> table_name <code>ORDER BY</code> column <code>DESC</code>;</li>\n<li><code>SELECT</code> * <code>FROM</code> table_name <code>ORDER BY</code> column1 <code>ASC</code>, column2 <code>DESC</code>;</li>\n</ul>\n<h4 id=\"SELECT-TOP-ç”¨äºæŒ‡å®šä»è¡¨é¡¶éƒ¨è¿”å›çš„è®°å½•æ•°\"><a href=\"#SELECT-TOP-ç”¨äºæŒ‡å®šä»è¡¨é¡¶éƒ¨è¿”å›çš„è®°å½•æ•°\" class=\"headerlink\" title=\"SELECT TOP: ç”¨äºæŒ‡å®šä»è¡¨é¡¶éƒ¨è¿”å›çš„è®°å½•æ•°\"></a><strong>SELECT TOP</strong>: ç”¨äºæŒ‡å®šä»è¡¨é¡¶éƒ¨è¿”å›çš„è®°å½•æ•°</h4><ul>\n<li><code>SELECT TOP</code> number columns_names <code>FROM</code> table_name <code>WHERE</code> condition;</li>\n<li><code>SELECT TOP</code> percent columns_names <code>FROM</code> table_name <code>WHERE</code> condition;</li>\n<li>å¹¶éæ‰€æœ‰æ•°æ®åº“ç³»ç»Ÿéƒ½æ”¯æŒ<code>SELECT TOP</code>ã€‚ MySQL ä¸­æ˜¯<code>LIMIT</code>å­å¥</li>\n<li><code>SELECT</code> column_names <code>FROM</code> table_name <code>LIMIT</code> offset, count;</li>\n</ul>\n<h4 id=\"LIKE-ç”¨äºæœç´¢åˆ—ä¸­çš„ç‰¹å®šæ¨¡å¼ï¼ŒWHERE-å­å¥ä¸­ä½¿ç”¨çš„è¿ç®—ç¬¦\"><a href=\"#LIKE-ç”¨äºæœç´¢åˆ—ä¸­çš„ç‰¹å®šæ¨¡å¼ï¼ŒWHERE-å­å¥ä¸­ä½¿ç”¨çš„è¿ç®—ç¬¦\" class=\"headerlink\" title=\"LIKE: ç”¨äºæœç´¢åˆ—ä¸­çš„ç‰¹å®šæ¨¡å¼ï¼ŒWHERE å­å¥ä¸­ä½¿ç”¨çš„è¿ç®—ç¬¦\"></a><strong>LIKE</strong>: ç”¨äºæœç´¢åˆ—ä¸­çš„ç‰¹å®šæ¨¡å¼ï¼ŒWHERE å­å¥ä¸­ä½¿ç”¨çš„è¿ç®—ç¬¦</h4><ul>\n<li>% (percent sign) æ˜¯ä¸€ä¸ªè¡¨ç¤ºé›¶ä¸ªï¼Œä¸€ä¸ªæˆ–å¤šä¸ªå­—ç¬¦çš„é€šé…ç¬¦</li>\n<li>_ (underscore) æ˜¯ä¸€ä¸ªè¡¨ç¤ºå•ä¸ªå­—ç¬¦é€šé…ç¬¦</li>\n<li><code>SELECT</code> column_names <code>FROM</code> table_name <code>WHERE</code> column_name <code>LIKE</code> pattern;</li>\n<li><code>LIKE</code> â€˜a%â€™    ï¼ˆæŸ¥æ‰¾ä»»ä½•ä»¥â€œaâ€å¼€å¤´çš„å€¼ï¼‰</li>\n<li><code>LIKE</code> â€˜%aâ€™    ï¼ˆæŸ¥æ‰¾ä»»ä½•ä»¥â€œaâ€ç»“å°¾çš„å€¼ï¼‰</li>\n<li><code>LIKE</code> â€˜%or%â€™  ï¼ˆæŸ¥æ‰¾ä»»ä½•åŒ…å«â€œorâ€çš„å€¼ï¼‰</li>\n<li><code>LIKE</code> â€˜_r%â€™   ï¼ˆæŸ¥æ‰¾ä»»ä½•ç¬¬äºŒä½æ˜¯â€œrâ€çš„å€¼ï¼‰</li>\n<li><code>LIKE</code> â€˜a_%_%â€™ ï¼ˆæŸ¥æ‰¾ä»»ä½•ä»¥â€œaâ€å¼€å¤´ä¸”é•¿åº¦è‡³å°‘ä¸º3çš„å€¼ï¼‰</li>\n<li><code>LIKE</code> â€˜[a-c]%â€™ï¼ˆæŸ¥æ‰¾ä»»ä½•ä»¥â€œaâ€æˆ–â€œbâ€æˆ–â€œcâ€å¼€å¤´çš„å€¼ï¼‰</li>\n</ul>\n<h4 id=\"IN-ç”¨äºåœ¨-WHERE-å­å¥ä¸­æŒ‡å®šå¤šä¸ªå€¼çš„è¿ç®—ç¬¦\"><a href=\"#IN-ç”¨äºåœ¨-WHERE-å­å¥ä¸­æŒ‡å®šå¤šä¸ªå€¼çš„è¿ç®—ç¬¦\" class=\"headerlink\" title=\"IN: ç”¨äºåœ¨ WHERE å­å¥ä¸­æŒ‡å®šå¤šä¸ªå€¼çš„è¿ç®—ç¬¦\"></a><strong>IN</strong>: ç”¨äºåœ¨ WHERE å­å¥ä¸­æŒ‡å®šå¤šä¸ªå€¼çš„è¿ç®—ç¬¦</h4><ul>\n<li>æœ¬è´¨ä¸Šï¼ŒINè¿ç®—ç¬¦æ˜¯å¤šä¸ªORæ¡ä»¶çš„ç®€å†™</li>\n<li><code>SELECT</code> column_names <code>FROM</code> table_name <code>WHERE</code> column_name <code>IN</code> (value1, value2, â€¦);</li>\n<li><code>SELECT</code> column_names <code>FROM</code> table_name <code>WHERE</code> column_name <code>IN</code> (<code>SELECT STATEMENT</code>);</li>\n</ul>\n<h4 id=\"BETWEEN-ç”¨äºè¿‡æ»¤ç»™å®šèŒƒå›´çš„å€¼çš„è¿ç®—ç¬¦\"><a href=\"#BETWEEN-ç”¨äºè¿‡æ»¤ç»™å®šèŒƒå›´çš„å€¼çš„è¿ç®—ç¬¦\" class=\"headerlink\" title=\"BETWEEN: ç”¨äºè¿‡æ»¤ç»™å®šèŒƒå›´çš„å€¼çš„è¿ç®—ç¬¦\"></a><strong>BETWEEN</strong>: ç”¨äºè¿‡æ»¤ç»™å®šèŒƒå›´çš„å€¼çš„è¿ç®—ç¬¦</h4><ul>\n<li><code>SELECT</code> column_names <code>FROM</code> table_name <code>WHERE</code> column_name <code>BETWEEN</code> value1 <code>AND</code> value2;</li>\n<li><code>SELECT</code> * <code>FROM</code> Products <code>WHERE</code> (column_name <code>BETWEEN</code> value1 <code>AND</code> value2) <code>AND NOT</code> column_name2 <code>IN</code> (value3, value4);</li>\n<li><code>SELECT</code> * <code>FROM</code> Products <code>WHERE</code> column_name <code>BETWEEN</code> #01/07/1999# AND #03/12/1999#;</li>\n</ul>\n<h4 id=\"NULL-ä»£è¡¨ä¸€ä¸ªå­—æ®µæ²¡æœ‰å€¼\"><a href=\"#NULL-ä»£è¡¨ä¸€ä¸ªå­—æ®µæ²¡æœ‰å€¼\" class=\"headerlink\" title=\"NULL: ä»£è¡¨ä¸€ä¸ªå­—æ®µæ²¡æœ‰å€¼\"></a><strong>NULL</strong>: ä»£è¡¨ä¸€ä¸ªå­—æ®µæ²¡æœ‰å€¼</h4><ul>\n<li><code>SELECT</code> * <code>FROM</code> table_name <code>WHERE</code> column_name <code>IS NULL</code>;</li>\n<li><code>SELECT</code> * <code>FROM</code> table_name <code>WHERE</code> column_name <code>IS NOT NULL</code>;</li>\n</ul>\n<h4 id=\"AS-ç”¨äºç»™è¡¨æˆ–è€…åˆ—åˆ†é…åˆ«å\"><a href=\"#AS-ç”¨äºç»™è¡¨æˆ–è€…åˆ—åˆ†é…åˆ«å\" class=\"headerlink\" title=\"AS: ç”¨äºç»™è¡¨æˆ–è€…åˆ—åˆ†é…åˆ«å\"></a><strong>AS</strong>: ç”¨äºç»™è¡¨æˆ–è€…åˆ—åˆ†é…åˆ«å</h4><ul>\n<li><code>SELECT</code> column_name <code>AS</code> alias_name <code>FROM</code> table_name;</li>\n<li><code>SELECT</code> column_name <code>FROM</code> table_name <code>AS</code> alias_name;</li>\n<li><code>SELECT</code> column_name <code>AS</code> alias_name1, column_name2 <code>AS</code> alias_name2;</li>\n<li><code>SELECT</code> column_name1, column_name2 + â€˜, â€˜ + column_name3 <code>AS</code> alias_name;</li>\n</ul>\n<h4 id=\"UNION-ç”¨äºç»„åˆä¸¤ä¸ªæˆ–è€…å¤šä¸ª-SELECT-è¯­å¥çš„ç»“æœé›†çš„è¿ç®—ç¬¦\"><a href=\"#UNION-ç”¨äºç»„åˆä¸¤ä¸ªæˆ–è€…å¤šä¸ª-SELECT-è¯­å¥çš„ç»“æœé›†çš„è¿ç®—ç¬¦\" class=\"headerlink\" title=\"UNION: ç”¨äºç»„åˆä¸¤ä¸ªæˆ–è€…å¤šä¸ª SELECT è¯­å¥çš„ç»“æœé›†çš„è¿ç®—ç¬¦\"></a><strong>UNION</strong>: ç”¨äºç»„åˆä¸¤ä¸ªæˆ–è€…å¤šä¸ª SELECT è¯­å¥çš„ç»“æœé›†çš„è¿ç®—ç¬¦</h4><ul>\n<li>æ¯ä¸ª SELECT è¯­å¥å¿…é¡»æ‹¥æœ‰ç›¸åŒçš„åˆ—æ•°</li>\n<li>åˆ—å¿…é¡»æ‹¥æœ‰ç›¸ä¼¼çš„æ•°æ®ç±»å‹</li>\n<li>æ¯ä¸ª SELECT è¯­å¥ä¸­çš„åˆ—ä¹Ÿå¿…é¡»å…·æœ‰ç›¸åŒçš„é¡ºåº</li>\n<li><code>SELECT</code> columns_names <code>FROM</code> table1 <code>UNION SELECT</code> column_name <code>FROM</code> table2;</li>\n<li><code>UNION</code> ä»…å…è®¸é€‰æ‹©ä¸åŒçš„å€¼, <code>UNION ALL</code> å…è®¸é‡å¤</li>\n</ul>\n<h4 id=\"ANY-ALL-ç”¨äºæ£€æŸ¥-WHERE-æˆ–-HAVING-å­å¥ä¸­ä½¿ç”¨çš„å­æŸ¥è¯¢æ¡ä»¶çš„è¿ç®—ç¬¦\"><a href=\"#ANY-ALL-ç”¨äºæ£€æŸ¥-WHERE-æˆ–-HAVING-å­å¥ä¸­ä½¿ç”¨çš„å­æŸ¥è¯¢æ¡ä»¶çš„è¿ç®—ç¬¦\" class=\"headerlink\" title=\"ANY|ALL: ç”¨äºæ£€æŸ¥ WHERE æˆ– HAVING å­å¥ä¸­ä½¿ç”¨çš„å­æŸ¥è¯¢æ¡ä»¶çš„è¿ç®—ç¬¦\"></a><strong>ANY|ALL</strong>: ç”¨äºæ£€æŸ¥ WHERE æˆ– HAVING å­å¥ä¸­ä½¿ç”¨çš„å­æŸ¥è¯¢æ¡ä»¶çš„è¿ç®—ç¬¦</h4><ul>\n<li><code>ANY</code> å¦‚æœä»»ä½•å­æŸ¥è¯¢å€¼æ»¡è¶³æ¡ä»¶ï¼Œåˆ™è¿”å› trueã€‚</li>\n<li><code>ALL</code> å¦‚æœæ‰€æœ‰å­æŸ¥è¯¢å€¼éƒ½æ»¡è¶³æ¡ä»¶ï¼Œåˆ™è¿”å› trueã€‚</li>\n<li><code>SELECT</code> columns_names <code>FROM</code> table1 <code>WHERE</code> column_name operator (<code>ANY</code>|<code>ALL</code>) (<code>SELECT</code> column_name <code>FROM</code> table_name <code>WHERE</code> condition);</li>\n</ul>\n<h4 id=\"GROUP-BY-é€šå¸¸ä¸èšåˆå‡½æ•°ï¼ˆCOUNTï¼ŒMAXï¼ŒMINï¼ŒSUMï¼ŒAVGï¼‰ä¸€èµ·ä½¿ç”¨ï¼Œç”¨äºå°†ç»“æœé›†åˆ†ç»„ä¸ºä¸€åˆ—æˆ–å¤šåˆ—\"><a href=\"#GROUP-BY-é€šå¸¸ä¸èšåˆå‡½æ•°ï¼ˆCOUNTï¼ŒMAXï¼ŒMINï¼ŒSUMï¼ŒAVGï¼‰ä¸€èµ·ä½¿ç”¨ï¼Œç”¨äºå°†ç»“æœé›†åˆ†ç»„ä¸ºä¸€åˆ—æˆ–å¤šåˆ—\" class=\"headerlink\" title=\"GROUP BY: é€šå¸¸ä¸èšåˆå‡½æ•°ï¼ˆCOUNTï¼ŒMAXï¼ŒMINï¼ŒSUMï¼ŒAVGï¼‰ä¸€èµ·ä½¿ç”¨ï¼Œç”¨äºå°†ç»“æœé›†åˆ†ç»„ä¸ºä¸€åˆ—æˆ–å¤šåˆ—\"></a><strong>GROUP BY</strong>: é€šå¸¸ä¸èšåˆå‡½æ•°ï¼ˆCOUNTï¼ŒMAXï¼ŒMINï¼ŒSUMï¼ŒAVGï¼‰ä¸€èµ·ä½¿ç”¨ï¼Œç”¨äºå°†ç»“æœé›†åˆ†ç»„ä¸ºä¸€åˆ—æˆ–å¤šåˆ—</h4><ul>\n<li><code>SELECT</code> column_name1, COUNT(column_name2) <code>FROM</code> table_name <code>WHERE</code> condition <code>GROUP BY</code> column_name1 <code>ORDER BY</code> COUNT(column_name2) DESC;</li>\n</ul>\n<h4 id=\"HAVING-HAVING-å­å¥æŒ‡å®š-SELECT-è¯­å¥åº”ä»…è¿”å›èšåˆå€¼æ»¡è¶³æŒ‡å®šæ¡ä»¶çš„è¡Œã€‚å®ƒè¢«æ·»åŠ åˆ°-SQL-è¯­è¨€ä¸­ï¼Œå› ä¸ºWHEREå…³é”®å­—ä¸èƒ½ä¸èšåˆå‡½æ•°ä¸€èµ·ä½¿ç”¨ã€‚\"><a href=\"#HAVING-HAVING-å­å¥æŒ‡å®š-SELECT-è¯­å¥åº”ä»…è¿”å›èšåˆå€¼æ»¡è¶³æŒ‡å®šæ¡ä»¶çš„è¡Œã€‚å®ƒè¢«æ·»åŠ åˆ°-SQL-è¯­è¨€ä¸­ï¼Œå› ä¸ºWHEREå…³é”®å­—ä¸èƒ½ä¸èšåˆå‡½æ•°ä¸€èµ·ä½¿ç”¨ã€‚\" class=\"headerlink\" title=\"HAVING: HAVING å­å¥æŒ‡å®š SELECT è¯­å¥åº”ä»…è¿”å›èšåˆå€¼æ»¡è¶³æŒ‡å®šæ¡ä»¶çš„è¡Œã€‚å®ƒè¢«æ·»åŠ åˆ° SQL è¯­è¨€ä¸­ï¼Œå› ä¸ºWHEREå…³é”®å­—ä¸èƒ½ä¸èšåˆå‡½æ•°ä¸€èµ·ä½¿ç”¨ã€‚\"></a><strong>HAVING</strong>: HAVING å­å¥æŒ‡å®š SELECT è¯­å¥åº”ä»…è¿”å›èšåˆå€¼æ»¡è¶³æŒ‡å®šæ¡ä»¶çš„è¡Œã€‚å®ƒè¢«æ·»åŠ åˆ° SQL è¯­è¨€ä¸­ï¼Œå› ä¸ºWHEREå…³é”®å­—ä¸èƒ½ä¸èšåˆå‡½æ•°ä¸€èµ·ä½¿ç”¨ã€‚</h4><ul>\n<li><code>SELECT</code> <code>COUNT</code>(column_name1), column_name2 <code>FROM</code> table <code>GROUP BY</code> column_name2 <code>HAVING</code> <code>COUNT(</code>column_name1<code>)</code> &gt; 5;</li>\n</ul>\n<a id=\"more\"></a>\n\n<h3 id=\"2-ä¿®æ”¹æ•°æ®çš„æŸ¥è¯¢\"><a href=\"#2-ä¿®æ”¹æ•°æ®çš„æŸ¥è¯¢\" class=\"headerlink\" title=\"2. ä¿®æ”¹æ•°æ®çš„æŸ¥è¯¢\"></a>2. ä¿®æ”¹æ•°æ®çš„æŸ¥è¯¢</h3><h4 id=\"INSERT-INTO-ç”¨äºåœ¨è¡¨ä¸­æ’å…¥æ–°è®°å½•-è¡Œ\"><a href=\"#INSERT-INTO-ç”¨äºåœ¨è¡¨ä¸­æ’å…¥æ–°è®°å½•-è¡Œ\" class=\"headerlink\" title=\"INSERT INTO: ç”¨äºåœ¨è¡¨ä¸­æ’å…¥æ–°è®°å½•/è¡Œ\"></a><strong>INSERT INTO</strong>: ç”¨äºåœ¨è¡¨ä¸­æ’å…¥æ–°è®°å½•/è¡Œ</h4><ul>\n<li><code>INSERT INTO</code> table_name (column1, column2) <code>VALUES</code> (value1, value2);</li>\n<li><code>INSERT INTO</code> table_name <code>VALUES</code> (value1, value2 â€¦);</li>\n</ul>\n<h4 id=\"UPDATE-ç”¨äºä¿®æ”¹è¡¨ä¸­çš„ç°æœ‰è®°å½•-è¡Œ\"><a href=\"#UPDATE-ç”¨äºä¿®æ”¹è¡¨ä¸­çš„ç°æœ‰è®°å½•-è¡Œ\" class=\"headerlink\" title=\"UPDATE: ç”¨äºä¿®æ”¹è¡¨ä¸­çš„ç°æœ‰è®°å½•/è¡Œ\"></a><strong>UPDATE</strong>: ç”¨äºä¿®æ”¹è¡¨ä¸­çš„ç°æœ‰è®°å½•/è¡Œ</h4><ul>\n<li><code>UPDATE</code> table_name <code>SET</code> column1 = value1, column2 = value2 <code>WHERE</code> condition;</li>\n<li><code>UPDATE</code> table_name <code>SET</code> column_name = value;</li>\n</ul>\n<h4 id=\"DELETE-ç”¨äºåˆ é™¤è¡¨ä¸­çš„ç°æœ‰è®°å½•-è¡Œ\"><a href=\"#DELETE-ç”¨äºåˆ é™¤è¡¨ä¸­çš„ç°æœ‰è®°å½•-è¡Œ\" class=\"headerlink\" title=\"DELETE: ç”¨äºåˆ é™¤è¡¨ä¸­çš„ç°æœ‰è®°å½•/è¡Œ\"></a><strong>DELETE</strong>: ç”¨äºåˆ é™¤è¡¨ä¸­çš„ç°æœ‰è®°å½•/è¡Œ</h4><ul>\n<li><code>DELETE FROM</code> table_name <code>WHERE</code> condition;</li>\n<li><code>DELETE</code> * <code>FROM</code> table_name;</li>\n</ul>\n<h3 id=\"3-èšåˆæŸ¥è¯¢\"><a href=\"#3-èšåˆæŸ¥è¯¢\" class=\"headerlink\" title=\"3. èšåˆæŸ¥è¯¢\"></a>3. èšåˆæŸ¥è¯¢</h3><h4 id=\"COUNT-è¿”å›å‡ºç°æ¬¡æ•°\"><a href=\"#COUNT-è¿”å›å‡ºç°æ¬¡æ•°\" class=\"headerlink\" title=\"COUNT: è¿”å›å‡ºç°æ¬¡æ•°\"></a><strong>COUNT</strong>: è¿”å›å‡ºç°æ¬¡æ•°</h4><ul>\n<li><code>SELECT COUNT (DISTINCT</code> column_name<code>)</code>;</li>\n</ul>\n<h4 id=\"MIN-and-MAX-è¿”å›æ‰€é€‰åˆ—çš„æœ€å°-æœ€å¤§å€¼\"><a href=\"#MIN-and-MAX-è¿”å›æ‰€é€‰åˆ—çš„æœ€å°-æœ€å¤§å€¼\" class=\"headerlink\" title=\"MIN() and MAX(): è¿”å›æ‰€é€‰åˆ—çš„æœ€å°/æœ€å¤§å€¼\"></a><strong>MIN() and MAX()</strong>: è¿”å›æ‰€é€‰åˆ—çš„æœ€å°/æœ€å¤§å€¼</h4><ul>\n<li><code>SELECT MIN (</code>column_names<code>) FROM</code> table_name <code>WHERE</code> condition;</li>\n<li><code>SELECT MAX (</code>column_names<code>) FROM</code> table_name <code>WHERE</code> condition;</li>\n</ul>\n<h4 id=\"AVG-è¿”å›æ•°å­—åˆ—çš„å¹³å‡å€¼\"><a href=\"#AVG-è¿”å›æ•°å­—åˆ—çš„å¹³å‡å€¼\" class=\"headerlink\" title=\"AVG(): è¿”å›æ•°å­—åˆ—çš„å¹³å‡å€¼\"></a><strong>AVG()</strong>: è¿”å›æ•°å­—åˆ—çš„å¹³å‡å€¼</h4><ul>\n<li><code>SELECT AVG (</code>column_name<code>) FROM</code> table_name <code>WHERE</code> condition;</li>\n</ul>\n<h4 id=\"SUM-è¿”å›æ•°å€¼åˆ—çš„æ€»å’Œ\"><a href=\"#SUM-è¿”å›æ•°å€¼åˆ—çš„æ€»å’Œ\" class=\"headerlink\" title=\"SUM(): è¿”å›æ•°å€¼åˆ—çš„æ€»å’Œ\"></a><strong>SUM()</strong>: è¿”å›æ•°å€¼åˆ—çš„æ€»å’Œ</h4><ul>\n<li><code>SELECT SUM (</code>column_name<code>) FROM</code> table_name <code>WHERE</code> condition;</li>\n</ul>\n<h3 id=\"4-è¿æ¥æŸ¥è¯¢\"><a href=\"#4-è¿æ¥æŸ¥è¯¢\" class=\"headerlink\" title=\"4. è¿æ¥æŸ¥è¯¢\"></a>4. è¿æ¥æŸ¥è¯¢</h3><h4 id=\"INNER-JOIN-å†…è¿æ¥ï¼Œè¿”å›åœ¨ä¸¤å¼ è¡¨ä¸­å…·æœ‰åŒ¹é…å€¼çš„è®°å½•\"><a href=\"#INNER-JOIN-å†…è¿æ¥ï¼Œè¿”å›åœ¨ä¸¤å¼ è¡¨ä¸­å…·æœ‰åŒ¹é…å€¼çš„è®°å½•\" class=\"headerlink\" title=\"INNER JOIN: å†…è¿æ¥ï¼Œè¿”å›åœ¨ä¸¤å¼ è¡¨ä¸­å…·æœ‰åŒ¹é…å€¼çš„è®°å½•\"></a><strong>INNER JOIN</strong>: å†…è¿æ¥ï¼Œè¿”å›åœ¨ä¸¤å¼ è¡¨ä¸­å…·æœ‰åŒ¹é…å€¼çš„è®°å½•</h4><ul>\n<li><code>SELECT</code> column_names <code>FROM</code> table1 <code>INNER JOIN</code> table2 <code>ON</code> table1.column_name=table2.column_name;</li>\n<li><code>SELECT</code> table1.column_name1, table2.column_name2, table3.column_name3 <code>FROM</code> ((table1 <code>INNER JOIN</code> table2 <code>ON</code> relationship) <code>INNER JOIN</code> table3 <code>ON</code> relationship);</li>\n</ul>\n<h4 id=\"LEFT-OUTER-JOIN-å·¦å¤–è¿æ¥ï¼Œè¿”å›å·¦è¡¨ï¼ˆtable1ï¼‰ä¸­çš„æ‰€æœ‰è®°å½•ï¼Œä»¥åŠå³è¡¨ä¸­çš„åŒ¹é…è®°å½•ï¼ˆtable2ï¼‰\"><a href=\"#LEFT-OUTER-JOIN-å·¦å¤–è¿æ¥ï¼Œè¿”å›å·¦è¡¨ï¼ˆtable1ï¼‰ä¸­çš„æ‰€æœ‰è®°å½•ï¼Œä»¥åŠå³è¡¨ä¸­çš„åŒ¹é…è®°å½•ï¼ˆtable2ï¼‰\" class=\"headerlink\" title=\"LEFT (OUTER) JOIN: å·¦å¤–è¿æ¥ï¼Œè¿”å›å·¦è¡¨ï¼ˆtable1ï¼‰ä¸­çš„æ‰€æœ‰è®°å½•ï¼Œä»¥åŠå³è¡¨ä¸­çš„åŒ¹é…è®°å½•ï¼ˆtable2ï¼‰\"></a><strong>LEFT (OUTER) JOIN</strong>: å·¦å¤–è¿æ¥ï¼Œè¿”å›å·¦è¡¨ï¼ˆtable1ï¼‰ä¸­çš„æ‰€æœ‰è®°å½•ï¼Œä»¥åŠå³è¡¨ä¸­çš„åŒ¹é…è®°å½•ï¼ˆtable2ï¼‰</h4><ul>\n<li><code>SELECT</code> column_names <code>FROM</code> table1 <code>LEFT JOIN</code> table2 <code>ON</code> table1.column_name=table2.column_name;</li>\n</ul>\n<h4 id=\"RIGHT-OUTER-JOIN-å³å¤–è¿æ¥ï¼Œè¿”å›å³è¡¨ï¼ˆtable2ï¼‰ä¸­çš„æ‰€æœ‰è®°å½•ï¼Œä»¥åŠå·¦è¡¨ï¼ˆtable1ï¼‰ä¸­åŒ¹é…çš„è®°å½•\"><a href=\"#RIGHT-OUTER-JOIN-å³å¤–è¿æ¥ï¼Œè¿”å›å³è¡¨ï¼ˆtable2ï¼‰ä¸­çš„æ‰€æœ‰è®°å½•ï¼Œä»¥åŠå·¦è¡¨ï¼ˆtable1ï¼‰ä¸­åŒ¹é…çš„è®°å½•\" class=\"headerlink\" title=\"RIGHT (OUTER) JOIN: å³å¤–è¿æ¥ï¼Œè¿”å›å³è¡¨ï¼ˆtable2ï¼‰ä¸­çš„æ‰€æœ‰è®°å½•ï¼Œä»¥åŠå·¦è¡¨ï¼ˆtable1ï¼‰ä¸­åŒ¹é…çš„è®°å½•\"></a><strong>RIGHT (OUTER) JOIN</strong>: å³å¤–è¿æ¥ï¼Œè¿”å›å³è¡¨ï¼ˆtable2ï¼‰ä¸­çš„æ‰€æœ‰è®°å½•ï¼Œä»¥åŠå·¦è¡¨ï¼ˆtable1ï¼‰ä¸­åŒ¹é…çš„è®°å½•</h4><ul>\n<li><code>SELECT</code> column_names <code>FROM</code> table1 <code>RIGHT JOIN</code> table2 <code>ON</code> table1.column_name=table2.column_name;</li>\n</ul>\n<h4 id=\"FULL-OUTER-JOIN-å…¨å¤–è¿æ¥ï¼Œå…¨è¿æ¥æ˜¯å·¦å³å¤–è¿æ¥çš„å¹¶é›†-è¿æ¥è¡¨åŒ…å«è¢«è¿æ¥çš„è¡¨çš„æ‰€æœ‰è®°å½•-å¦‚æœç¼ºå°‘åŒ¹é…çš„è®°å½•-ä»¥-NULL-å¡«å……ã€‚\"><a href=\"#FULL-OUTER-JOIN-å…¨å¤–è¿æ¥ï¼Œå…¨è¿æ¥æ˜¯å·¦å³å¤–è¿æ¥çš„å¹¶é›†-è¿æ¥è¡¨åŒ…å«è¢«è¿æ¥çš„è¡¨çš„æ‰€æœ‰è®°å½•-å¦‚æœç¼ºå°‘åŒ¹é…çš„è®°å½•-ä»¥-NULL-å¡«å……ã€‚\" class=\"headerlink\" title=\"FULL (OUTER) JOIN: å…¨å¤–è¿æ¥ï¼Œå…¨è¿æ¥æ˜¯å·¦å³å¤–è¿æ¥çš„å¹¶é›†. è¿æ¥è¡¨åŒ…å«è¢«è¿æ¥çš„è¡¨çš„æ‰€æœ‰è®°å½•, å¦‚æœç¼ºå°‘åŒ¹é…çš„è®°å½•, ä»¥ NULL å¡«å……ã€‚\"></a><strong>FULL (OUTER) JOIN</strong>: å…¨å¤–è¿æ¥ï¼Œå…¨è¿æ¥æ˜¯å·¦å³å¤–è¿æ¥çš„å¹¶é›†. è¿æ¥è¡¨åŒ…å«è¢«è¿æ¥çš„è¡¨çš„æ‰€æœ‰è®°å½•, å¦‚æœç¼ºå°‘åŒ¹é…çš„è®°å½•, ä»¥ NULL å¡«å……ã€‚</h4><ul>\n<li><code>SELECT</code> column_names <code>FROM</code> table1 <code>FULL OUTER JOIN</code> table2 <code>ON</code> table1.column_name=table2.column_name;</li>\n</ul>\n<h4 id=\"Self-JOIN-è‡ªè¿æ¥ï¼Œè¡¨è‡ªèº«è¿æ¥\"><a href=\"#Self-JOIN-è‡ªè¿æ¥ï¼Œè¡¨è‡ªèº«è¿æ¥\" class=\"headerlink\" title=\"Self JOIN: è‡ªè¿æ¥ï¼Œè¡¨è‡ªèº«è¿æ¥\"></a><strong>Self JOIN</strong>: è‡ªè¿æ¥ï¼Œè¡¨è‡ªèº«è¿æ¥</h4><ul>\n<li><code>SELECT</code> column_names <code>FROM</code> table1 T1, table1 T2 <code>WHERE</code> condition;</li>\n</ul>\n<h3 id=\"5-è§†å›¾æŸ¥è¯¢\"><a href=\"#5-è§†å›¾æŸ¥è¯¢\" class=\"headerlink\" title=\"5. è§†å›¾æŸ¥è¯¢\"></a>5. è§†å›¾æŸ¥è¯¢</h3><h4 id=\"CREATE-åˆ›å»ºè§†å›¾\"><a href=\"#CREATE-åˆ›å»ºè§†å›¾\" class=\"headerlink\" title=\"CREATE: åˆ›å»ºè§†å›¾\"></a><strong>CREATE</strong>: åˆ›å»ºè§†å›¾</h4><ul>\n<li><code>CREATE VIEW</code> view_name <code>AS SELECT</code> column1, column2 <code>FROM</code> table_name <code>WHERE</code> condition;</li>\n</ul>\n<h4 id=\"SELECT-æ£€ç´¢è§†å›¾\"><a href=\"#SELECT-æ£€ç´¢è§†å›¾\" class=\"headerlink\" title=\"SELECT: æ£€ç´¢è§†å›¾\"></a><strong>SELECT</strong>: æ£€ç´¢è§†å›¾</h4><ul>\n<li><code>SELECT</code> * <code>FROM</code> view_name;</li>\n</ul>\n<h4 id=\"DROP-åˆ é™¤è§†å›¾\"><a href=\"#DROP-åˆ é™¤è§†å›¾\" class=\"headerlink\" title=\"DROP: åˆ é™¤è§†å›¾\"></a><strong>DROP</strong>: åˆ é™¤è§†å›¾</h4><ul>\n<li><code>DROP VIEW</code> view_name;</li>\n</ul>\n<h3 id=\"6-ä¿®æ”¹è¡¨çš„æŸ¥è¯¢\"><a href=\"#6-ä¿®æ”¹è¡¨çš„æŸ¥è¯¢\" class=\"headerlink\" title=\"6. ä¿®æ”¹è¡¨çš„æŸ¥è¯¢\"></a>6. ä¿®æ”¹è¡¨çš„æŸ¥è¯¢</h3><h4 id=\"ADD-æ·»åŠ å­—æ®µ\"><a href=\"#ADD-æ·»åŠ å­—æ®µ\" class=\"headerlink\" title=\"ADD: æ·»åŠ å­—æ®µ\"></a><strong>ADD</strong>: æ·»åŠ å­—æ®µ</h4><ul>\n<li><code>ALTER TABLE</code> table_name <code>ADD</code> column_name column_definition;</li>\n</ul>\n<h4 id=\"MODIFY-ä¿®æ”¹å­—æ®µæ•°æ®ç±»å‹\"><a href=\"#MODIFY-ä¿®æ”¹å­—æ®µæ•°æ®ç±»å‹\" class=\"headerlink\" title=\"MODIFY: ä¿®æ”¹å­—æ®µæ•°æ®ç±»å‹\"></a><strong>MODIFY</strong>: ä¿®æ”¹å­—æ®µæ•°æ®ç±»å‹</h4><ul>\n<li><code>ALTER TABLE</code> table_name <code>MODIFY</code> column_name column_type;</li>\n</ul>\n<h4 id=\"DROP-åˆ é™¤å­—æ®µ\"><a href=\"#DROP-åˆ é™¤å­—æ®µ\" class=\"headerlink\" title=\"DROP: åˆ é™¤å­—æ®µ\"></a><strong>DROP</strong>: åˆ é™¤å­—æ®µ</h4><ul>\n<li><code>ALTER TABLE</code> table_name <code>DROP COLUMN</code> column_name;</li>\n</ul>\n<h3 id=\"æ•°å­¦å‡½æ•°\"><a href=\"#æ•°å­¦å‡½æ•°\" class=\"headerlink\" title=\"æ•°å­¦å‡½æ•°\"></a>æ•°å­¦å‡½æ•°</h3><figure class=\"highlight sql\"><table><tr><td class=\"code\"><pre><span class=\"line\">ABS(x)         <span class=\"comment\">--è¿”å›xçš„ç»å¯¹å€¼</span></span><br><span class=\"line\">BIN(x)         <span class=\"comment\">--è¿”å›xçš„äºŒè¿›åˆ¶ï¼ˆOCTè¿”å›å…«è¿›åˆ¶ï¼ŒHEXè¿”å›åå…­è¿›åˆ¶ï¼‰</span></span><br><span class=\"line\">CEILING(x)     <span class=\"comment\">--è¿”å›å¤§äºxçš„æœ€å°æ•´æ•°å€¼</span></span><br><span class=\"line\">EXP(x)         <span class=\"comment\">--è¿”å›å€¼eï¼ˆè‡ªç„¶å¯¹æ•°çš„åº•ï¼‰çš„xæ¬¡æ–¹</span></span><br><span class=\"line\">FLOOR(x)       <span class=\"comment\">--è¿”å›å°äºxçš„æœ€å¤§æ•´æ•°å€¼</span></span><br><span class=\"line\">GREATEST(x1,x2,...,xn)</span><br><span class=\"line\">                <span class=\"comment\">--è¿”å›é›†åˆä¸­æœ€å¤§çš„å€¼</span></span><br><span class=\"line\">LEAST(x1,x2,...,xn)   </span><br><span class=\"line\">                <span class=\"comment\">--è¿”å›é›†åˆä¸­æœ€å°çš„å€¼</span></span><br><span class=\"line\">LN(x)           <span class=\"comment\">--è¿”å›xçš„è‡ªç„¶å¯¹æ•°</span></span><br><span class=\"line\">LOG(x,y)        <span class=\"comment\">--è¿”å›xçš„ä»¥yä¸ºåº•çš„å¯¹æ•°</span></span><br><span class=\"line\">MOD(x,y)        <span class=\"comment\">--è¿”å›x/yçš„æ¨¡ï¼ˆä½™æ•°ï¼‰</span></span><br><span class=\"line\">PI()            <span class=\"comment\">--è¿”å›piçš„å€¼ï¼ˆåœ†å‘¨ç‡ï¼‰</span></span><br><span class=\"line\">RAND()          <span class=\"comment\">--è¿”å›ï¼åˆ°ï¼‘å†…çš„éšæœºå€¼,å¯ä»¥é€šè¿‡æä¾›ä¸€ä¸ªå‚æ•°(ç§å­)ä½¿RAND()éšæœºæ•°ç”Ÿæˆå™¨ç”Ÿæˆä¸€ä¸ªæŒ‡å®šçš„å€¼ã€‚</span></span><br><span class=\"line\">ROUND(x,y)      <span class=\"comment\">--è¿”å›å‚æ•°xçš„å››èˆäº”å…¥çš„æœ‰yä½å°æ•°çš„å€¼</span></span><br><span class=\"line\">SIGN(x)         <span class=\"comment\">--è¿”å›ä»£è¡¨æ•°å­—xçš„ç¬¦å·çš„å€¼</span></span><br><span class=\"line\">SQRT(x)         <span class=\"comment\">--è¿”å›ä¸€ä¸ªæ•°çš„å¹³æ–¹æ ¹</span></span><br><span class=\"line\"><span class=\"keyword\">TRUNCATE</span>(x,y)   <span class=\"comment\">--è¿”å›æ•°å­—xæˆªçŸ­ä¸ºyä½å°æ•°çš„ç»“æœ</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"èšåˆå‡½æ•°\"><a href=\"#èšåˆå‡½æ•°\" class=\"headerlink\" title=\"èšåˆå‡½æ•°\"></a>èšåˆå‡½æ•°</h3><figure class=\"highlight sql\"><table><tr><td class=\"code\"><pre><span class=\"line\">AVG(X)            <span class=\"comment\">--è¿”å›æŒ‡å®šåˆ—çš„å¹³å‡å€¼</span></span><br><span class=\"line\">COUNT(X)          <span class=\"comment\">--è¿”å›æŒ‡å®šåˆ—ä¸­éNULLå€¼çš„ä¸ªæ•°</span></span><br><span class=\"line\">MIN(X)            <span class=\"comment\">--è¿”å›æŒ‡å®šåˆ—çš„æœ€å°å€¼</span></span><br><span class=\"line\">MAX(X)            <span class=\"comment\">--è¿”å›æŒ‡å®šåˆ—çš„æœ€å¤§å€¼</span></span><br><span class=\"line\">SUM(X)            <span class=\"comment\">--è¿”å›æŒ‡å®šåˆ—çš„æ‰€æœ‰å€¼ä¹‹å’Œ</span></span><br><span class=\"line\">GROUP_CONCAT(X)   <span class=\"comment\">--è¿”å›ç”±å±äºä¸€ç»„çš„åˆ—å€¼è¿æ¥ç»„åˆè€Œæˆçš„ç»“æœï¼Œéå¸¸æœ‰ç”¨</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"å­—ç¬¦ä¸²å‡½æ•°ï¼ˆ20ä¸ªï¼‰\"><a href=\"#å­—ç¬¦ä¸²å‡½æ•°ï¼ˆ20ä¸ªï¼‰\" class=\"headerlink\" title=\"å­—ç¬¦ä¸²å‡½æ•°ï¼ˆ20ä¸ªï¼‰\"></a>å­—ç¬¦ä¸²å‡½æ•°ï¼ˆ20ä¸ªï¼‰</h3><figure class=\"highlight sql\"><table><tr><td class=\"code\"><pre><span class=\"line\">ASCII(char)        <span class=\"comment\">--è¿”å›å­—ç¬¦çš„ASCIIç å€¼</span></span><br><span class=\"line\">BIT_LENGTH(str)    <span class=\"comment\">--è¿”å›å­—ç¬¦ä¸²çš„æ¯”ç‰¹é•¿åº¦</span></span><br><span class=\"line\">CONCAT(s1,s2...,sn) </span><br><span class=\"line\">                   <span class=\"comment\">--å°†s1,s2...,snè¿æ¥æˆå­—ç¬¦ä¸²</span></span><br><span class=\"line\">CONCAT_WS(sep,s1,s2...,sn)</span><br><span class=\"line\">                   <span class=\"comment\">--å°†s1,s2...,snè¿æ¥æˆå­—ç¬¦ä¸²ï¼Œå¹¶ç”¨sepå­—ç¬¦é—´éš”</span></span><br><span class=\"line\"><span class=\"keyword\">INSERT</span>(<span class=\"keyword\">str</span>,x,y,<span class=\"keyword\">instr</span>) </span><br><span class=\"line\">                   <span class=\"comment\">--å°†å­—ç¬¦ä¸²strä»ç¬¬xä½ç½®å¼€å§‹ï¼Œyä¸ªå­—ç¬¦é•¿çš„å­ä¸²æ›¿æ¢ä¸ºå­—ç¬¦ä¸²instrï¼Œè¿”å›ç»“æœ</span></span><br><span class=\"line\">FIND_IN_SET(<span class=\"keyword\">str</span>,<span class=\"keyword\">list</span>)</span><br><span class=\"line\">                   <span class=\"comment\">--åˆ†æé€—å·åˆ†éš”çš„liståˆ—è¡¨ï¼Œå¦‚æœå‘ç°strï¼Œè¿”å›stråœ¨listä¸­çš„ä½ç½®</span></span><br><span class=\"line\"><span class=\"keyword\">LCASE</span>(<span class=\"keyword\">str</span>)æˆ–<span class=\"keyword\">LOWER</span>(<span class=\"keyword\">str</span>) </span><br><span class=\"line\">                   <span class=\"comment\">--è¿”å›å°†å­—ç¬¦ä¸²strä¸­æ‰€æœ‰å­—ç¬¦æ”¹å˜ä¸ºå°å†™åçš„ç»“æœ</span></span><br><span class=\"line\"><span class=\"keyword\">LEFT</span>(<span class=\"keyword\">str</span>,x)        <span class=\"comment\">--è¿”å›å­—ç¬¦ä¸²strä¸­æœ€å·¦è¾¹çš„xä¸ªå­—ç¬¦</span></span><br><span class=\"line\"><span class=\"keyword\">LENGTH</span>(s)          <span class=\"comment\">--è¿”å›å­—ç¬¦ä¸²strä¸­çš„å­—ç¬¦æ•°</span></span><br><span class=\"line\"><span class=\"keyword\">LTRIM</span>(<span class=\"keyword\">str</span>)         <span class=\"comment\">--ä»å­—ç¬¦ä¸²strä¸­åˆ‡æ‰å¼€å¤´çš„ç©ºæ ¼</span></span><br><span class=\"line\"><span class=\"keyword\">POSITION</span>(<span class=\"keyword\">substr</span>,<span class=\"keyword\">str</span>) </span><br><span class=\"line\">                   <span class=\"comment\">--è¿”å›å­ä¸²substråœ¨å­—ç¬¦ä¸²strä¸­ç¬¬ä¸€æ¬¡å‡ºç°çš„ä½ç½®</span></span><br><span class=\"line\">QUOTE(<span class=\"keyword\">str</span>)         <span class=\"comment\">--ç”¨åæ–œæ è½¬ä¹‰strä¸­çš„å•å¼•å·</span></span><br><span class=\"line\"><span class=\"keyword\">REPEAT</span>(<span class=\"keyword\">str</span>,srchstr,rplcstr)</span><br><span class=\"line\">                   <span class=\"comment\">--è¿”å›å­—ç¬¦ä¸²stré‡å¤xæ¬¡çš„ç»“æœ</span></span><br><span class=\"line\"><span class=\"keyword\">REVERSE</span>(<span class=\"keyword\">str</span>)       <span class=\"comment\">--è¿”å›é¢ å€’å­—ç¬¦ä¸²strçš„ç»“æœ</span></span><br><span class=\"line\"><span class=\"keyword\">RIGHT</span>(<span class=\"keyword\">str</span>,x)       <span class=\"comment\">--è¿”å›å­—ç¬¦ä¸²strä¸­æœ€å³è¾¹çš„xä¸ªå­—ç¬¦</span></span><br><span class=\"line\"><span class=\"keyword\">RTRIM</span>(<span class=\"keyword\">str</span>)         <span class=\"comment\">--è¿”å›å­—ç¬¦ä¸²strå°¾éƒ¨çš„ç©ºæ ¼</span></span><br><span class=\"line\"><span class=\"keyword\">STRCMP</span>(s1,s2)      <span class=\"comment\">--æ¯”è¾ƒå­—ç¬¦ä¸²s1å’Œs2</span></span><br><span class=\"line\"><span class=\"keyword\">TRIM</span>(<span class=\"keyword\">str</span>)          <span class=\"comment\">--å»é™¤å­—ç¬¦ä¸²é¦–éƒ¨å’Œå°¾éƒ¨çš„æ‰€æœ‰ç©ºæ ¼</span></span><br><span class=\"line\"><span class=\"keyword\">UCASE</span>(<span class=\"keyword\">str</span>)æˆ–<span class=\"keyword\">UPPER</span>(<span class=\"keyword\">str</span>) </span><br><span class=\"line\">                   <span class=\"comment\">--è¿”å›å°†å­—ç¬¦ä¸²strä¸­æ‰€æœ‰å­—ç¬¦è½¬å˜ä¸ºå¤§å†™åçš„ç»“æœ</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"æ—¥æœŸå’Œæ—¶é—´å‡½æ•°\"><a href=\"#æ—¥æœŸå’Œæ—¶é—´å‡½æ•°\" class=\"headerlink\" title=\"æ—¥æœŸå’Œæ—¶é—´å‡½æ•°\"></a>æ—¥æœŸå’Œæ—¶é—´å‡½æ•°</h3><figure class=\"highlight sql\"><table><tr><td class=\"code\"><pre><span class=\"line\">CURDATE()æˆ–CURRENT_DATE() </span><br><span class=\"line\">                   <span class=\"comment\">--è¿”å›å½“å‰çš„æ—¥æœŸ</span></span><br><span class=\"line\">CURTIME()æˆ–CURRENT_TIME() </span><br><span class=\"line\">                   <span class=\"comment\">--è¿”å›å½“å‰çš„æ—¶é—´</span></span><br><span class=\"line\">DATE_ADD(date,INTERVAL int keyword)</span><br><span class=\"line\">                   <span class=\"comment\">--è¿”å›æ—¥æœŸdateåŠ ä¸Šé—´éš”æ—¶é—´intçš„ç»“æœ(intå¿…é¡»æŒ‰ç…§å…³é”®å­—è¿›è¡Œæ ¼å¼åŒ–)</span></span><br><span class=\"line\"><span class=\"comment\">-- ä¾‹å¦‚</span></span><br><span class=\"line\"><span class=\"keyword\">SELECT</span> <span class=\"keyword\">DATE_ADD</span>(<span class=\"keyword\">CURRENT_DATE</span>,<span class=\"built_in\">INTERVAL</span> <span class=\"number\">6</span> <span class=\"keyword\">MONTH</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">DATE_FORMAT(date,fmt)  </span><br><span class=\"line\">                   <span class=\"comment\">--ä¾ç…§æŒ‡å®šçš„fmtæ ¼å¼æ ¼å¼åŒ–æ—¥æœŸdateå€¼</span></span><br><span class=\"line\">DATE_SUB(date,INTERVAL int keyword)</span><br><span class=\"line\">                   <span class=\"comment\">--è¿”å›æ—¥æœŸdateåŠ ä¸Šé—´éš”æ—¶é—´intçš„ç»“æœ(intå¿…é¡»æŒ‰ç…§å…³é”®å­—è¿›è¡Œæ ¼å¼åŒ–)</span></span><br><span class=\"line\"><span class=\"comment\">-- ä¾‹å¦‚</span></span><br><span class=\"line\"><span class=\"keyword\">SELECT</span> <span class=\"keyword\">DATE_SUB</span>(<span class=\"keyword\">CURRENT_DATE</span>,<span class=\"built_in\">INTERVAL</span> <span class=\"number\">6</span> <span class=\"keyword\">MONTH</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">DAYOFWEEK(date)    <span class=\"comment\">--è¿”å›dateæ‰€ä»£è¡¨çš„ä¸€æ˜ŸæœŸä¸­çš„ç¬¬å‡ å¤©(1~7)</span></span><br><span class=\"line\">DAYOFMONTH(date)   <span class=\"comment\">--è¿”å›dateæ˜¯ä¸€ä¸ªæœˆçš„ç¬¬å‡ å¤©(1~31)</span></span><br><span class=\"line\">DAYOFYEAR(date)    <span class=\"comment\">--è¿”å›dateæ˜¯ä¸€å¹´çš„ç¬¬å‡ å¤©(1~366)</span></span><br><span class=\"line\">DAYNAME(date)      <span class=\"comment\">--è¿”å›dateçš„æ˜ŸæœŸåï¼Œå¦‚ï¼šSELECT DAYNAME(CURRENT_DATE);</span></span><br><span class=\"line\">FROM_UNIXTIME(ts,fmt)  </span><br><span class=\"line\">                   <span class=\"comment\">--æ ¹æ®æŒ‡å®šçš„fmtæ ¼å¼ï¼Œæ ¼å¼åŒ–UNIXæ—¶é—´æˆ³ts</span></span><br><span class=\"line\">HOUR(time)         <span class=\"comment\">--è¿”å›timeçš„å°æ—¶å€¼(0~23)</span></span><br><span class=\"line\">MINUTE(time)       <span class=\"comment\">--è¿”å›timeçš„åˆ†é’Ÿå€¼(0~59)</span></span><br><span class=\"line\">MONTH(date)        <span class=\"comment\">--è¿”å›dateçš„æœˆä»½å€¼(1~12)</span></span><br><span class=\"line\">MONTHNAME(date)    <span class=\"comment\">--è¿”å›dateçš„æœˆä»½åï¼Œå¦‚ï¼šSELECT MONTHNAME(CURRENT_DATE);</span></span><br><span class=\"line\">NOW()              <span class=\"comment\">--è¿”å›å½“å‰çš„æ—¥æœŸå’Œæ—¶é—´</span></span><br><span class=\"line\">QUARTER(date)      <span class=\"comment\">--è¿”å›dateåœ¨ä¸€å¹´ä¸­çš„å­£åº¦(1~4)</span></span><br><span class=\"line\"><span class=\"comment\">-- ä¾‹å¦‚</span></span><br><span class=\"line\"><span class=\"keyword\">SELECT</span> <span class=\"keyword\">QUARTER</span>(<span class=\"keyword\">CURRENT_DATE</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">WEEK(date)         <span class=\"comment\">--è¿”å›æ—¥æœŸdateä¸ºä¸€å¹´ä¸­ç¬¬å‡ å‘¨(0~53)</span></span><br><span class=\"line\">YEAR(date)         <span class=\"comment\">--è¿”å›æ—¥æœŸdateçš„å¹´ä»½(1000~9999)</span></span><br><span class=\"line\"><span class=\"comment\">-- ä¾‹å¦‚ï¼Œè·å–å½“å‰ç³»ç»Ÿæ—¶é—´</span></span><br><span class=\"line\"><span class=\"keyword\">SELECT</span> FROM_UNIXTIME(<span class=\"keyword\">UNIX_TIMESTAMP</span>());</span><br><span class=\"line\"><span class=\"keyword\">SELECT</span> <span class=\"keyword\">EXTRACT</span>(YEAR_MONTH <span class=\"keyword\">FROM</span> <span class=\"keyword\">CURRENT_DATE</span>);</span><br><span class=\"line\"><span class=\"keyword\">SELECT</span> <span class=\"keyword\">EXTRACT</span>(DAY_SECOND <span class=\"keyword\">FROM</span> <span class=\"keyword\">CURRENT_DATE</span>);</span><br><span class=\"line\"><span class=\"keyword\">SELECT</span> <span class=\"keyword\">EXTRACT</span>(HOUR_MINUTE <span class=\"keyword\">FROM</span> <span class=\"keyword\">CURRENT_DATE</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">-- è¿”å›ä¸¤ä¸ªæ—¥æœŸå€¼ä¹‹é—´çš„å·®å€¼(æœˆæ•°)</span></span><br><span class=\"line\"><span class=\"keyword\">SELECT</span> <span class=\"keyword\">PERIOD_DIFF</span>(<span class=\"number\">200302</span>,<span class=\"number\">199802</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">-- åœ¨Mysqlä¸­è®¡ç®—å¹´é¾„ï¼š</span></span><br><span class=\"line\"><span class=\"keyword\">SELECT</span> <span class=\"keyword\">DATE_FORMAT</span>(<span class=\"keyword\">FROM_DAYS</span>(<span class=\"keyword\">TO_DAYS</span>(<span class=\"keyword\">NOW</span>())-<span class=\"keyword\">TO_DAYS</span>(birthday)),<span class=\"string\">'%Y'</span>)+<span class=\"number\">0</span> <span class=\"keyword\">AS</span> age <span class=\"keyword\">FROM</span> employee;</span><br><span class=\"line\"><span class=\"comment\">-- è¿™æ ·ï¼Œå¦‚æœBrithdayæ˜¯æœªæ¥çš„å¹´æœˆæ—¥çš„è¯ï¼Œè®¡ç®—ç»“æœä¸º0ã€‚</span></span><br><span class=\"line\"><span class=\"comment\">-- ä¸‹é¢çš„SQLè¯­å¥è®¡ç®—å‘˜å·¥çš„ç»å¯¹å¹´é¾„ï¼Œå³å½“Birthdayæ˜¯æœªæ¥çš„æ—¥æœŸæ—¶ï¼Œå°†å¾—åˆ°è´Ÿå€¼ã€‚</span></span><br><span class=\"line\"><span class=\"keyword\">SELECT</span> <span class=\"keyword\">DATE_FORMAT</span>(<span class=\"keyword\">NOW</span>(), <span class=\"string\">'%Y'</span>) </span><br><span class=\"line\">- <span class=\"keyword\">DATE_FORMAT</span>(birthday, <span class=\"string\">'%Y'</span>) </span><br><span class=\"line\">-(<span class=\"keyword\">DATE_FORMAT</span>(<span class=\"keyword\">NOW</span>(), <span class=\"string\">'00-%m-%d'</span>) </span><br><span class=\"line\">&lt; <span class=\"keyword\">DATE_FORMAT</span>(birthday, <span class=\"string\">'00-%m-%d'</span>)) <span class=\"keyword\">AS</span> age <span class=\"keyword\">from</span> employee</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"åŠ å¯†å‡½æ•°\"><a href=\"#åŠ å¯†å‡½æ•°\" class=\"headerlink\" title=\"åŠ å¯†å‡½æ•°\"></a>åŠ å¯†å‡½æ•°</h3><figure class=\"highlight sql\"><table><tr><td class=\"code\"><pre><span class=\"line\">AES_ENCRYPT(str,key)  </span><br><span class=\"line\"><span class=\"comment\">--è¿”å›ç”¨å¯†é’¥keyå¯¹å­—ç¬¦ä¸²stråˆ©ç”¨é«˜çº§åŠ å¯†æ ‡å‡†ç®—æ³•åŠ å¯†åçš„ç»“æœï¼Œè°ƒç”¨AES_ENCRYPTçš„ç»“æœæ˜¯ä¸€ä¸ªäºŒè¿›åˆ¶å­—ç¬¦ä¸²ï¼Œä»¥BLOBç±»å‹å­˜å‚¨</span></span><br><span class=\"line\">AES_DECRYPT(str,key)  </span><br><span class=\"line\">                   <span class=\"comment\">--è¿”å›ç”¨å¯†é’¥keyå¯¹å­—ç¬¦ä¸²stråˆ©ç”¨é«˜çº§åŠ å¯†æ ‡å‡†ç®—æ³•è§£å¯†åçš„ç»“æœ</span></span><br><span class=\"line\">DECODE(str,key)    <span class=\"comment\">--ä½¿ç”¨keyä½œä¸ºå¯†é’¥è§£å¯†åŠ å¯†å­—ç¬¦ä¸²str</span></span><br><span class=\"line\">ENCRYPT(str,salt)  <span class=\"comment\">--ä½¿ç”¨UNIXcrypt()å‡½æ•°ï¼Œç”¨å…³é”®è¯salt(ä¸€ä¸ªå¯ä»¥æƒŸä¸€ç¡®å®šå£ä»¤çš„å­—ç¬¦ä¸²ï¼Œå°±åƒé’¥åŒ™ä¸€æ ·)åŠ å¯†å­—ç¬¦ä¸²str</span></span><br><span class=\"line\">ENCODE(str,key)    <span class=\"comment\">--ä½¿ç”¨keyä½œä¸ºå¯†é’¥åŠ å¯†å­—ç¬¦ä¸²strï¼Œè°ƒç”¨ENCODE()çš„ç»“æœæ˜¯ä¸€ä¸ªäºŒè¿›åˆ¶å­—ç¬¦ä¸²ï¼Œå®ƒä»¥BLOBç±»å‹å­˜å‚¨</span></span><br><span class=\"line\">MD5()              <span class=\"comment\">--è®¡ç®—å­—ç¬¦ä¸²strçš„MD5æ ¡éªŒå’Œ</span></span><br><span class=\"line\">PASSWORD(str)      <span class=\"comment\">--è¿”å›å­—ç¬¦ä¸²strçš„åŠ å¯†ç‰ˆæœ¬ï¼Œè¿™ä¸ªåŠ å¯†è¿‡ç¨‹æ˜¯ä¸å¯é€†è½¬çš„ï¼Œå’ŒUNIXå¯†ç åŠ å¯†è¿‡ç¨‹ä½¿ç”¨ä¸åŒçš„ç®—æ³•ã€‚</span></span><br><span class=\"line\">SHA()              <span class=\"comment\">--è®¡ç®—å­—ç¬¦ä¸²strçš„å®‰å…¨æ•£åˆ—ç®—æ³•(SHA)æ ¡éªŒå’Œ</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">-- ä¾‹å¦‚</span></span><br><span class=\"line\"><span class=\"keyword\">SELECT</span> <span class=\"keyword\">ENCRYPT</span>(<span class=\"string\">'root'</span>,<span class=\"string\">'salt'</span>) ;</span><br><span class=\"line\"><span class=\"keyword\">SELECT</span> <span class=\"keyword\">ENCODE</span>(<span class=\"string\">'xufeng'</span>,<span class=\"string\">'key'</span>) ;</span><br><span class=\"line\"><span class=\"keyword\">SELECT</span> <span class=\"keyword\">DECODE</span>(<span class=\"keyword\">ENCODE</span>(<span class=\"string\">'xufeng'</span>,<span class=\"string\">'key'</span>),<span class=\"string\">'key'</span>) ;<span class=\"comment\">--åŠ è§£å¯†æ”¾åœ¨ä¸€èµ·</span></span><br><span class=\"line\"><span class=\"keyword\">SELECT</span> <span class=\"keyword\">AES_ENCRYPT</span>(<span class=\"string\">'root'</span>,<span class=\"string\">'key'</span>) ;</span><br><span class=\"line\"><span class=\"keyword\">SELECT</span> <span class=\"keyword\">AES_DECRYPT</span>(<span class=\"keyword\">AES_ENCRYPT</span>(<span class=\"string\">'root'</span>,<span class=\"string\">'key'</span>),<span class=\"string\">'key'</span>) ;</span><br><span class=\"line\"><span class=\"keyword\">SELECT</span> <span class=\"keyword\">MD5</span>(<span class=\"string\">'123456'</span>) ;</span><br><span class=\"line\"><span class=\"keyword\">SELECT</span> <span class=\"keyword\">SHA</span>(<span class=\"string\">'123456'</span>) ;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"æ§åˆ¶æµå‡½æ•°\"><a href=\"#æ§åˆ¶æµå‡½æ•°\" class=\"headerlink\" title=\"æ§åˆ¶æµå‡½æ•°\"></a>æ§åˆ¶æµå‡½æ•°</h3><figure class=\"highlight sql\"><table><tr><td class=\"code\"><pre><span class=\"line\">CASE WHEN [test1] THEN [result1]...ELSE [default] <span class=\"keyword\">END</span> </span><br><span class=\"line\">                    <span class=\"comment\">--å¦‚æœtest1æ˜¯çœŸï¼Œåˆ™è¿”å›result1ï¼Œå¦åˆ™è¿”å›default</span></span><br><span class=\"line\"><span class=\"keyword\">CASE</span> [<span class=\"keyword\">test</span>] <span class=\"keyword\">WHEN</span> [val1] <span class=\"keyword\">THEN</span> [<span class=\"keyword\">result</span>]...ELSE [<span class=\"keyword\">default</span>] <span class=\"keyword\">END</span>  </span><br><span class=\"line\">                    <span class=\"comment\">--å¦‚æœtestå’ŒvalNç›¸ç­‰ï¼Œåˆ™è¿”å›resultï¼Œå¦åˆ™è¿”å›default</span></span><br><span class=\"line\"><span class=\"keyword\">IF</span>(<span class=\"keyword\">test</span>,t,f)        <span class=\"comment\">--å¦‚æœtestæ˜¯çœŸï¼Œè¿”å›tï¼›å¦åˆ™è¿”å›f</span></span><br><span class=\"line\"><span class=\"keyword\">IFNULL</span>(arg1,arg2)   <span class=\"comment\">--å¦‚æœarg1ä¸æ˜¯ç©ºï¼Œè¿”å›arg1ï¼Œå¦åˆ™è¿”å›arg2</span></span><br><span class=\"line\"><span class=\"keyword\">NULLIF</span>(arg1,arg2)   <span class=\"comment\">--å¦‚æœarg1=arg2è¿”å›NULLï¼›å¦åˆ™è¿”å›arg1</span></span><br><span class=\"line\"><span class=\"comment\">-- è¿™äº›å‡½æ•°çš„ç¬¬ä¸€ä¸ªæ˜¯IFNULL()ï¼Œå®ƒæœ‰ä¸¤ä¸ªå‚æ•°ï¼Œå¹¶ä¸”å¯¹ç¬¬ä¸€ä¸ªå‚æ•°è¿›è¡Œåˆ¤æ–­ã€‚</span></span><br><span class=\"line\"><span class=\"comment\">-- å¦‚æœç¬¬ä¸€ä¸ªå‚æ•°ä¸æ˜¯NULLï¼Œå‡½æ•°å°±ä¼šå‘è°ƒç”¨è€…è¿”å›ç¬¬ä¸€ä¸ªå‚æ•°ï¼›</span></span><br><span class=\"line\"><span class=\"comment\">-- å¦‚æœæ˜¯NULL,å°†è¿”å›ç¬¬äºŒä¸ªå‚æ•°ã€‚</span></span><br><span class=\"line\"><span class=\"comment\">-- ä¾‹å¦‚</span></span><br><span class=\"line\"><span class=\"keyword\">SELECT</span> <span class=\"keyword\">IFNULL</span>(<span class=\"number\">1</span>,<span class=\"number\">2</span>), </span><br><span class=\"line\"><span class=\"keyword\">IFNULL</span>(<span class=\"literal\">NULL</span>,<span class=\"number\">10</span>),</span><br><span class=\"line\"><span class=\"keyword\">IFNULL</span>(<span class=\"number\">4</span>*<span class=\"literal\">NULL</span>,<span class=\"string\">'false'</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">NULLIF() <span class=\"comment\">-- å‡½æ•°å°†ä¼šæ£€éªŒæä¾›çš„ä¸¤ä¸ªå‚æ•°æ˜¯å¦ç›¸ç­‰ï¼Œå¦‚æœç›¸ç­‰ï¼Œåˆ™è¿”å›NULLï¼Œ</span></span><br><span class=\"line\"><span class=\"comment\">-- å¦‚æœä¸ç›¸ç­‰ï¼Œå°±è¿”å›ç¬¬ä¸€ä¸ªå‚æ•°ã€‚</span></span><br><span class=\"line\"><span class=\"comment\">-- ä¾‹å¦‚</span></span><br><span class=\"line\"><span class=\"keyword\">SELECT</span>  <span class=\"keyword\">NULLIF</span>(<span class=\"number\">1</span>,<span class=\"number\">1</span>),</span><br><span class=\"line\"> <span class=\"keyword\">NULLIF</span>(<span class=\"string\">'A'</span>,<span class=\"string\">'B'</span>),</span><br><span class=\"line\"> <span class=\"keyword\">NULLIF</span>(<span class=\"number\">2</span>+<span class=\"number\">3</span>,<span class=\"number\">4</span>+<span class=\"number\">1</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">MySQLçš„IF()</span><br><span class=\"line\"><span class=\"comment\">-- å‡½æ•°ä¹Ÿå¯ä»¥å»ºç«‹ä¸€ä¸ªç®€å•çš„æ¡ä»¶æµ‹è¯•ï¼Œ</span></span><br><span class=\"line\"><span class=\"comment\">-- è¿™ä¸ªå‡½æ•°æœ‰ä¸‰ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªæ˜¯è¦è¢«åˆ¤æ–­çš„è¡¨è¾¾å¼ï¼Œ</span></span><br><span class=\"line\"><span class=\"comment\">-- å¦‚æœè¡¨è¾¾å¼ä¸ºçœŸï¼ŒIF()å°†ä¼šè¿”å›ç¬¬äºŒä¸ªå‚æ•°ï¼Œ</span></span><br><span class=\"line\"><span class=\"comment\">-- å¦‚æœä¸ºå‡ï¼ŒIF()å°†ä¼šè¿”å›ç¬¬ä¸‰ä¸ªå‚æ•°ã€‚</span></span><br><span class=\"line\"><span class=\"comment\">-- ä¾‹å¦‚</span></span><br><span class=\"line\"><span class=\"keyword\">SELECT</span> <span class=\"keyword\">IF</span>(<span class=\"number\">1</span>&lt;<span class=\"number\">10</span>,<span class=\"number\">2</span>,<span class=\"number\">3</span>),<span class=\"keyword\">IF</span>(<span class=\"number\">56</span>&gt;<span class=\"number\">100</span>,<span class=\"string\">'true'</span>,<span class=\"string\">'false'</span>);</span><br><span class=\"line\"><span class=\"comment\">-- IF()å‡½æ•°åœ¨åªæœ‰ä¸¤ç§å¯èƒ½ç»“æœæ—¶æ‰é€‚åˆä½¿ç”¨ã€‚</span></span><br><span class=\"line\"><span class=\"comment\">-- ç„¶è€Œï¼Œåœ¨ç°å®ä¸–ç•Œä¸­ï¼Œæˆ‘ä»¬å¯èƒ½å‘ç°åœ¨æ¡ä»¶æµ‹è¯•ä¸­ä¼šéœ€è¦å¤šä¸ªåˆ†æ”¯ã€‚</span></span><br><span class=\"line\"><span class=\"comment\">-- åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå®ƒå’ŒPHPåŠPerlè¯­è¨€çš„switch-caseæ¡ä»¶ä¾‹ç¨‹ä¸€æ ·ã€‚</span></span><br><span class=\"line\"></span><br><span class=\"line\">CASE</span><br><span class=\"line\"><span class=\"comment\">-- å‡½æ•°çš„æ ¼å¼æœ‰äº›å¤æ‚ï¼Œé€šå¸¸å¦‚ä¸‹æ‰€ç¤ºï¼š</span></span><br><span class=\"line\">CASE [expression to be evaluated]</span><br><span class=\"line\">WHEN [val 1] THEN [result 1]</span><br><span class=\"line\">WHEN [val 2] THEN [result 2]</span><br><span class=\"line\">WHEN [val 3] THEN [result 3]</span><br><span class=\"line\">......</span><br><span class=\"line\">WHEN [val n] THEN [result n]</span><br><span class=\"line\">ELSE [default result]</span><br><span class=\"line\"><span class=\"keyword\">END</span></span><br><span class=\"line\"><span class=\"comment\">-- è¿™é‡Œï¼Œç¬¬ä¸€ä¸ªå‚æ•°æ˜¯è¦è¢«åˆ¤æ–­çš„å€¼æˆ–è¡¨è¾¾å¼ï¼Œæ¥ä¸‹æ¥çš„æ˜¯ä¸€ç³»åˆ—çš„WHEN-THENå—ï¼Œ</span></span><br><span class=\"line\"><span class=\"comment\">-- æ¯ä¸€å—çš„ç¬¬ä¸€ä¸ªå‚æ•°æŒ‡å®šè¦æ¯”è¾ƒçš„å€¼ï¼Œå¦‚æœä¸ºçœŸï¼Œå°±è¿”å›ç»“æœã€‚</span></span><br><span class=\"line\"><span class=\"comment\">-- æ‰€æœ‰çš„WHEN-THENå—å°†ä»¥ELSEå—ç»“æŸï¼Œå½“ENDç»“æŸäº†æ‰€æœ‰å¤–éƒ¨çš„CASEå—æ—¶ï¼Œ</span></span><br><span class=\"line\"><span class=\"comment\">-- å¦‚æœå‰é¢çš„æ¯ä¸€ä¸ªå—éƒ½ä¸åŒ¹é…å°±ä¼šè¿”å›ELSEå—æŒ‡å®šçš„é»˜è®¤ç»“æœã€‚</span></span><br><span class=\"line\"><span class=\"comment\">-- å¦‚æœæ²¡æœ‰æŒ‡å®šELSEå—ï¼Œè€Œä¸”æ‰€æœ‰çš„WHEN-THENæ¯”è¾ƒéƒ½ä¸æ˜¯çœŸï¼ŒMySQLå°†ä¼šè¿”å›NULLã€‚</span></span><br><span class=\"line\"><span class=\"keyword\">CASE</span>å‡½æ•°è¿˜æœ‰å¦å¤–ä¸€ç§å¥æ³•ï¼Œæœ‰æ—¶ä½¿ç”¨èµ·æ¥éå¸¸æ–¹ä¾¿ï¼Œå¦‚ä¸‹ï¼š</span><br><span class=\"line\"><span class=\"keyword\">CASE</span></span><br><span class=\"line\"><span class=\"keyword\">WHEN</span> [conditional <span class=\"keyword\">test</span> <span class=\"number\">1</span>] <span class=\"keyword\">THEN</span> [<span class=\"keyword\">result</span> <span class=\"number\">1</span>]</span><br><span class=\"line\"><span class=\"keyword\">WHEN</span> [conditional <span class=\"keyword\">test</span> <span class=\"number\">2</span>] <span class=\"keyword\">THEN</span> [<span class=\"keyword\">result</span> <span class=\"number\">2</span>]</span><br><span class=\"line\"><span class=\"keyword\">ELSE</span> [<span class=\"keyword\">default</span> <span class=\"keyword\">result</span>]</span><br><span class=\"line\"><span class=\"keyword\">END</span></span><br><span class=\"line\"><span class=\"comment\">-- è¿™ç§æ¡ä»¶ä¸‹ï¼Œè¿”å›çš„ç»“æœå–å†³äºç›¸åº”çš„æ¡ä»¶æµ‹è¯•æ˜¯å¦ä¸ºçœŸã€‚</span></span><br><span class=\"line\">ä¾‹å¦‚ï¼š</span><br><span class=\"line\"><span class=\"keyword\">SELECT</span>  <span class=\"keyword\">CASE</span> <span class=\"string\">'green'</span></span><br><span class=\"line\">      <span class=\"keyword\">WHEN</span> <span class=\"string\">'red'</span> <span class=\"keyword\">THEN</span> <span class=\"string\">'stop'</span></span><br><span class=\"line\">      <span class=\"keyword\">WHEN</span> <span class=\"string\">'green'</span> <span class=\"keyword\">THEN</span> <span class=\"string\">'go'</span> <span class=\"keyword\">END</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">SELECT</span> <span class=\"keyword\">CASE</span>  <span class=\"number\">9</span> </span><br><span class=\"line\"><span class=\"keyword\">WHEN</span> <span class=\"number\">1</span> <span class=\"keyword\">THEN</span> <span class=\"string\">'a'</span></span><br><span class=\"line\"><span class=\"keyword\">WHEN</span> <span class=\"number\">2</span> <span class=\"keyword\">THEN</span> <span class=\"string\">'b'</span> <span class=\"keyword\">ELSE</span> <span class=\"string\">'N/A'</span> <span class=\"keyword\">END</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">SELECT</span> <span class=\"keyword\">CASE</span> <span class=\"keyword\">WHEN</span> (<span class=\"number\">2</span>+<span class=\"number\">2</span>)=<span class=\"number\">4</span> <span class=\"keyword\">THEN</span> <span class=\"string\">'OK'</span> </span><br><span class=\"line\"><span class=\"keyword\">WHEN</span> (<span class=\"number\">2</span>+<span class=\"number\">2</span>)&lt;&gt;<span class=\"number\">4</span> <span class=\"keyword\">THEN</span> <span class=\"string\">'not OK'</span> <span class=\"keyword\">END</span> <span class=\"keyword\">AS</span> <span class=\"keyword\">STATUS</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">SELECT</span> <span class=\"keyword\">Name</span>,<span class=\"keyword\">IF</span>((IsActive = <span class=\"number\">1</span>),<span class=\"string\">'å·²æ¿€æ´»'</span>,<span class=\"string\">'æœªæ¿€æ´»'</span>) <span class=\"keyword\">AS</span> <span class=\"keyword\">RESULT</span> </span><br><span class=\"line\"><span class=\"keyword\">FROM</span> UserLoginInfo;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">SELECT</span> fname,lname,(math+sci+lit) <span class=\"keyword\">AS</span> total,</span><br><span class=\"line\"><span class=\"keyword\">CASE</span> <span class=\"keyword\">WHEN</span> (math+sci+lit) &lt; <span class=\"number\">50</span> <span class=\"keyword\">THEN</span> <span class=\"string\">'D'</span></span><br><span class=\"line\">     <span class=\"keyword\">WHEN</span> (math+sci+lit) <span class=\"keyword\">BETWEEN</span> <span class=\"number\">50</span> <span class=\"keyword\">AND</span> <span class=\"number\">150</span> <span class=\"keyword\">THEN</span> <span class=\"string\">'C'</span></span><br><span class=\"line\">     <span class=\"keyword\">WHEN</span> (math+sci+lit) <span class=\"keyword\">BETWEEN</span> <span class=\"number\">151</span> <span class=\"keyword\">AND</span> <span class=\"number\">250</span> <span class=\"keyword\">THEN</span> <span class=\"string\">'B'</span></span><br><span class=\"line\"><span class=\"keyword\">ELSE</span> <span class=\"string\">'A'</span> <span class=\"keyword\">END</span> <span class=\"keyword\">AS</span> grade <span class=\"keyword\">FROM</span> marks ;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">SELECT</span> <span class=\"keyword\">IF</span>(<span class=\"keyword\">ENCRYPT</span>(<span class=\"string\">'sue'</span>,<span class=\"string\">'ts'</span>)=upass,<span class=\"string\">'allow'</span>,<span class=\"string\">'deny'</span>) <span class=\"keyword\">AS</span> LoginResult</span><br><span class=\"line\"><span class=\"keyword\">FROM</span> <span class=\"keyword\">users</span> <span class=\"keyword\">WHERE</span> uname = <span class=\"string\">'sue'</span>;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"æ ¼å¼åŒ–å‡½æ•°\"><a href=\"#æ ¼å¼åŒ–å‡½æ•°\" class=\"headerlink\" title=\"æ ¼å¼åŒ–å‡½æ•°\"></a>æ ¼å¼åŒ–å‡½æ•°</h3><figure class=\"highlight sql\"><table><tr><td class=\"code\"><pre><span class=\"line\">DATE_FORMAT(date,fmt)  </span><br><span class=\"line\">                  <span class=\"comment\">--ä¾ç…§å­—ç¬¦ä¸²fmtæ ¼å¼åŒ–æ—¥æœŸdateå€¼</span></span><br><span class=\"line\">FORMAT(x,y)       <span class=\"comment\">--æŠŠxæ ¼å¼åŒ–ä¸ºä»¥é€—å·éš”å¼€çš„æ•°å­—åºåˆ—ï¼Œyæ˜¯ç»“æœçš„å°æ•°ä½æ•°</span></span><br><span class=\"line\">INET_ATON(ip)     <span class=\"comment\">--è¿”å›IPåœ°å€çš„æ•°å­—è¡¨ç¤º</span></span><br><span class=\"line\">INET_NTOA(num)    <span class=\"comment\">--è¿”å›æ•°å­—æ‰€ä»£è¡¨çš„IPåœ°å€</span></span><br><span class=\"line\">TIME_FORMAT(time,fmt)   </span><br><span class=\"line\">                  <span class=\"comment\">--ä¾ç…§å­—ç¬¦ä¸²fmtæ ¼å¼åŒ–æ—¶é—´timeå€¼</span></span><br><span class=\"line\"><span class=\"comment\">-- å…¶ä¸­æœ€ç®€å•çš„æ˜¯FORMAT()å‡½æ•°ï¼Œ</span></span><br><span class=\"line\"><span class=\"comment\">-- å®ƒå¯ä»¥æŠŠå¤§çš„æ•°å€¼æ ¼å¼åŒ–ä¸ºä»¥é€—å·é—´éš”çš„æ˜“è¯»çš„åºåˆ—ã€‚</span></span><br><span class=\"line\"><span class=\"comment\">-- ä¾‹å¦‚</span></span><br><span class=\"line\"><span class=\"keyword\">SELECT</span> <span class=\"keyword\">FORMAT</span>(<span class=\"number\">34234.34323432</span>,<span class=\"number\">3</span>) ;</span><br><span class=\"line\"><span class=\"keyword\">SELECT</span> <span class=\"keyword\">DATE_FORMAT</span>(<span class=\"keyword\">NOW</span>(),<span class=\"string\">'%W,%D %M %Y %r'</span>) ;</span><br><span class=\"line\"><span class=\"keyword\">SELECT</span> <span class=\"keyword\">DATE_FORMAT</span>(<span class=\"keyword\">NOW</span>(),<span class=\"string\">'%Y-%m-%d'</span>) ;</span><br><span class=\"line\"><span class=\"keyword\">SELECT</span> <span class=\"keyword\">DATE_FORMAT</span>(<span class=\"number\">19990330</span>,<span class=\"string\">'%Y-%m-%d'</span>) ;</span><br><span class=\"line\"><span class=\"keyword\">SELECT</span> <span class=\"keyword\">DATE_FORMAT</span>(<span class=\"keyword\">NOW</span>(),<span class=\"string\">'%h:%i %p'</span>) ;</span><br><span class=\"line\"><span class=\"keyword\">SELECT</span> <span class=\"keyword\">INET_ATON</span>(<span class=\"string\">'10.122.89.47'</span>) ;</span><br><span class=\"line\"><span class=\"keyword\">SELECT</span> <span class=\"keyword\">INET_NTOA</span>(<span class=\"number\">175790383</span>) ;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"ç±»å‹è½¬åŒ–å‡½æ•°\"><a href=\"#ç±»å‹è½¬åŒ–å‡½æ•°\" class=\"headerlink\" title=\"ç±»å‹è½¬åŒ–å‡½æ•°\"></a>ç±»å‹è½¬åŒ–å‡½æ•°</h3><figure class=\"highlight sql\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">-- ä¸ºäº†è¿›è¡Œæ•°æ®ç±»å‹è½¬åŒ–ï¼ŒMySQLæä¾›äº†CAST()å‡½æ•°ï¼Œ</span></span><br><span class=\"line\"><span class=\"comment\">-- å®ƒå¯ä»¥æŠŠä¸€ä¸ªå€¼è½¬åŒ–ä¸ºæŒ‡å®šçš„æ•°æ®ç±»å‹ã€‚</span></span><br><span class=\"line\"><span class=\"comment\">-- ç±»å‹æœ‰ï¼š</span></span><br><span class=\"line\">BINARY,CHAR,DATE,TIME,DATETIME,SIGNED,UNSIGNED</span><br><span class=\"line\"><span class=\"comment\">-- ä¾‹å¦‚</span></span><br><span class=\"line\"><span class=\"keyword\">SELECT</span> <span class=\"keyword\">CAST</span>(<span class=\"keyword\">NOW</span>() <span class=\"keyword\">AS</span> SIGNED <span class=\"built_in\">INTEGER</span>),<span class=\"keyword\">CURDATE</span>()+<span class=\"number\">0</span>;</span><br><span class=\"line\"><span class=\"keyword\">SELECT</span> <span class=\"string\">'f'</span>=<span class=\"built_in\">BINARY</span> <span class=\"string\">'F'</span>,<span class=\"string\">'f'</span>=<span class=\"keyword\">CAST</span>(<span class=\"string\">'F'</span> <span class=\"keyword\">AS</span> <span class=\"built_in\">BINARY</span>);</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"ç³»ç»Ÿä¿¡æ¯å‡½æ•°\"><a href=\"#ç³»ç»Ÿä¿¡æ¯å‡½æ•°\" class=\"headerlink\" title=\"ç³»ç»Ÿä¿¡æ¯å‡½æ•°\"></a>ç³»ç»Ÿä¿¡æ¯å‡½æ•°</h3><figure class=\"highlight sql\"><table><tr><td class=\"code\"><pre><span class=\"line\">DATABASE()         <span class=\"comment\">--è¿”å›å½“å‰æ•°æ®åº“å</span></span><br><span class=\"line\">BENCHMARK(count,expr)   </span><br><span class=\"line\">                   <span class=\"comment\">--å°†è¡¨è¾¾å¼expré‡å¤è¿è¡Œcountæ¬¡</span></span><br><span class=\"line\">CONNECTION_ID()    <span class=\"comment\">--è¿”å›å½“å‰å®¢æˆ·çš„è¿æ¥ID</span></span><br><span class=\"line\">FOUND_ROWS()       <span class=\"comment\">--è¿”å›æœ€åä¸€ä¸ªSELECTæŸ¥è¯¢è¿›è¡Œæ£€ç´¢çš„æ€»è¡Œæ•°</span></span><br><span class=\"line\">USER()æˆ–SYSTEM_USER()  </span><br><span class=\"line\">                   <span class=\"comment\">--è¿”å›å½“å‰ç™»é™†ç”¨æˆ·å</span></span><br><span class=\"line\">VERSION()          <span class=\"comment\">--è¿”å›MySQLæœåŠ¡å™¨çš„ç‰ˆæœ¬</span></span><br><span class=\"line\"><span class=\"comment\">-- ä¾‹å¦‚</span></span><br><span class=\"line\"><span class=\"keyword\">SELECT</span> <span class=\"keyword\">DATABASE</span>(),<span class=\"keyword\">VERSION</span>(),<span class=\"keyword\">USER</span>();</span><br><span class=\"line\">SELECTBENCHMARK(9999999,LOG(RAND()*PI()));</span><br><span class=\"line\"><span class=\"comment\">--è¯¥ä¾‹ä¸­,MySQLè®¡ç®—LOG(RAND()*PI())è¡¨è¾¾å¼9999999æ¬¡ã€‚</span></span><br></pre></td></tr></table></figure>\n\n","categories":["å®è·µ"],"tags":["MySQL"]},{"title":"å®è·µ-centos7æ­å»ºselenium-javaè¿è¡Œç¯å¢ƒ","url":"/posts/4212331734/","content":"<blockquote>\n<p>æœ€è¿‘åœ¨ç¼–å†™çˆ¬è™«ç¨‹åºï¼Œè¿™é‡Œç®€å•çš„åšä¸‹ç¬”è®°ã€‚</p>\n</blockquote>\n<h3 id=\"é˜…è¯»æ³¨æ„äº‹é¡¹\"><a href=\"#é˜…è¯»æ³¨æ„äº‹é¡¹\" class=\"headerlink\" title=\"é˜…è¯»æ³¨æ„äº‹é¡¹\"></a>é˜…è¯»æ³¨æ„äº‹é¡¹</h3><ol>\n<li>éœ€è¦ä¸€å°æœåŠ¡å™¨(é˜¿é‡ŒESC)è¿™ç§ï¼Œåˆ†é…çš„å…¬ç½‘ipã€‚</li>\n<li>è¿™é‡Œä½¿ç”¨çš„yumå®‰è£…ï¼Œæ‰€ä»¥ç¯å¢ƒé…ç½®éƒ½åˆ›å»ºå¥½äº†ï¼Œä¸éœ€è¦åœ¨æ‰‹åŠ¨ä¿®æ”¹ã€‚</li>\n</ol>\n<h3 id=\"å‡†å¤‡å·¥ä½œ\"><a href=\"#å‡†å¤‡å·¥ä½œ\" class=\"headerlink\" title=\"å‡†å¤‡å·¥ä½œ\"></a>å‡†å¤‡å·¥ä½œ</h3><blockquote>\n<p>å®‰è£…Javaã€mavenã€gitã€seleniumè¿è¡Œç¯å¢ƒ</p>\n</blockquote>\n<figure class=\"highlight sh\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># ä½¿ç”¨çš„æœºå™¨æ˜¯centos7.4</span></span><br><span class=\"line\"><span class=\"comment\"># ç³»ç»Ÿç¯å¢ƒä¸€ä¸ªä¸€ä¸ªæ¥å®‰è£…ã€‚</span></span><br><span class=\"line\"><span class=\"comment\"># 1.æ£€æŸ¥æ˜¯å¦å®‰è£…jdk</span></span><br><span class=\"line\">-&gt; yum install java-1.8.0-openjdk-devel.x86_64</span><br><span class=\"line\">-&gt; java -version</span><br><span class=\"line\">openjdk version <span class=\"string\">\"1.8.0_262\"</span></span><br><span class=\"line\">OpenJDK Runtime Environment (build 1.8.0_262-b10)</span><br><span class=\"line\">OpenJDK 64-Bit Server VM (build 25.262-b10, mixed mode)</span><br><span class=\"line\">-&gt; yum install maven</span><br><span class=\"line\">-&gt; mvn -version</span><br><span class=\"line\">Java version: 1.8.0_262, vendor: Oracle Corporation</span><br><span class=\"line\">Java home: /usr/lib/jvm/java-1.8.0-openjdk-1.8.0.262.b10-0.el7_8.x86_64/jre</span><br><span class=\"line\">Default locale: zh_CN, platform encoding: UTF-8</span><br><span class=\"line\">OS name: <span class=\"string\">\"linux\"</span>, version: <span class=\"string\">\"3.10.0-862.el7.x86_64\"</span>, arch: <span class=\"string\">\"amd64\"</span>, family: <span class=\"string\">\"unix\"</span></span><br><span class=\"line\">-&gt; yum install git</span><br><span class=\"line\">git version 1.8.3.1</span><br><span class=\"line\"><span class=\"comment\"># æŸ¥çœ‹æ˜¯å¦ç”Ÿæˆè¿‡è¯ä¹¦</span></span><br><span class=\"line\">-&gt; ls -al ~/.ssh</span><br><span class=\"line\"><span class=\"comment\"># è¿™é‡Œé…ç½®ä¸‹sshå…¬é’¥æ–¹ä¾¿gitæ‹‰å»ä»£ç </span></span><br><span class=\"line\">-&gt; ssh-keygen -t rsa -C â€œyou email@gamil.comâ€</span><br><span class=\"line\"><span class=\"comment\"># æŸ¥çœ‹è¯ä¹¦</span></span><br><span class=\"line\">-&gt; cat ~/.ssh/id_rsa.pub</span><br><span class=\"line\"><span class=\"comment\"># å¼€å§‹é…ç½® selenium è¿è¡Œç¯å¢ƒ</span></span><br><span class=\"line\">-&gt; wget https://dl.google.com/linux/direct/google-chrome-stable_current_x86_64.rpm</span><br><span class=\"line\">-&gt; yum localinstall google-chrome-stable_current_x86_64.rpm</span><br><span class=\"line\"><span class=\"comment\"># æ£€æŸ¥ç‰ˆæœ¬ </span></span><br><span class=\"line\">-&gt; google-chrome --version </span><br><span class=\"line\">Google Chrome 85.0.4183.83 </span><br><span class=\"line\"><span class=\"comment\"># å®‰è£… chromedriver</span></span><br><span class=\"line\">-&gt; yum install chromedriver</span><br><span class=\"line\">-&gt; chromedriver -version</span><br><span class=\"line\">ChromeDriver 84.0.4147.89 </span><br><span class=\"line\"><span class=\"comment\"># è¿™é‡Œæ³¨æ„ chromedriver å¯èƒ½ä¸chromeçš„ç‰ˆæœ¬ä¸ä¸€è‡´ï¼Œå»å®˜æ–¹ç½‘ç«™ä¸‹è½½åè§£å‹å¤åˆ¶åˆ°/usr/binä¸­</span></span><br><span class=\"line\"><span class=\"comment\"># ä¸‹è½½åœ°å€ https://chromedriver.chromium.org/</span></span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>æ³¨æ„ google-chrome å’Œ chromedriverç‰ˆæœ¬æ˜¯éœ€è¦å¯¹åº”çš„å…·ä½“å¯ä»¥åˆ°å®˜æ–¹æŸ¥çœ‹ã€‚</li>\n<li>åœ¨centosä¸Šè¿è¡Œéœ€è¦é…ç½®ä¸‹å…³é”®å‚æ•°</li>\n</ul>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\">ChromeOptions chromeOptions = <span class=\"keyword\">new</span> ChromeOptions();</span><br><span class=\"line\">   chromeOptions.addArguments(<span class=\"string\">\"--headless\"</span>);</span><br><span class=\"line\">   chromeOptions.addArguments(<span class=\"string\">\"--disable-gpu\"</span>); <span class=\"comment\">// ä¸é…ç½®ä¸€å®šæŠ¥é”™</span></span><br><span class=\"line\">   chromeOptions.addArguments(<span class=\"string\">\"--no-sandbox\"</span>);</span><br><span class=\"line\">   <span class=\"comment\">// åˆ›å»ºæ— ç•Œé¢æµè§ˆå™¨å¯¹è±¡</span></span><br><span class=\"line\">   chromeOptions.setHeadless(<span class=\"keyword\">true</span>);</span><br><span class=\"line\">   <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> ChromeDriver(chromeOptions);</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>å¯åŠ¨ä»£ç çš„éœ€è¦æŒ‡å®šç¯å¢ƒå˜é‡</li>\n</ul>\n<figure class=\"highlight\"><table><tr><td class=\"code\"><pre><span class=\"line\">System.setProperty(<span class=\"string\">\"webdriver.chrome.chromedriver\"</span>, <span class=\"string\">\"/usr/bin/chromedriver\"</span>);</span><br><span class=\"line\"># å…·ä½“å¯ä»¥é€šè¿‡ whereis chromedriveræŸ¥çœ‹ã€‚</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"å‚è€ƒæ–‡çŒ®\"><a href=\"#å‚è€ƒæ–‡çŒ®\" class=\"headerlink\" title=\"å‚è€ƒæ–‡çŒ®\"></a>å‚è€ƒæ–‡çŒ®</h3><p><a href=\"https://segmentfault.com/a/1190000015389941\" target=\"_blank\" rel=\"noopener\">CentOSä½¿ç”¨yumå®‰è£…jdk</a></p>\n","categories":["å®è·µ"],"tags":["Java","selenium","çˆ¬è™«"]},{"title":"å®è·µ-nginxé…ç½®https","url":"/posts/2531120770/","content":"<blockquote>\n<p>æœ€è¿‘åœ¨æ­å»ºæµ‹è¯•ç¯å¢ƒï¼Œå¾ˆä¹…æ²¡æ¥è§¦nginxäº†ã€‚</p>\n</blockquote>\n<h3 id=\"é˜…è¯»æ³¨æ„äº‹é¡¹\"><a href=\"#é˜…è¯»æ³¨æ„äº‹é¡¹\" class=\"headerlink\" title=\"é˜…è¯»æ³¨æ„äº‹é¡¹\"></a>é˜…è¯»æ³¨æ„äº‹é¡¹</h3><ol>\n<li>éœ€è¦ä¸€ä¸ªåŸŸåï¼Œå¹¶ä¸”åœ¨å›½å†…å¤‡æ¡ˆè¿‡ã€‚</li>\n<li>éœ€è¦ä¸€å°æœåŠ¡å™¨(é˜¿é‡ŒESC)è¿™ç§ï¼Œåˆ†é…çš„å…¬ç½‘ipã€‚</li>\n<li>ç”³è¯·æˆ–è€…è´­ä¹°ä¸€å¼ è¯ä¹¦ã€‚å’ŒåŸŸååšå…³è”ï¼ŒåŸŸåè§£æåˆ°æœåŠ¡å™¨çš„å…¬ç½‘ipã€‚æ³¨æ„å¼€æ”¾æœåŠ¡åŒºçš„80ã€443ç«¯å£ã€‚<ol>\n<li>è¯ä¹¦æœ‰ä¸¤ä¸ªæ–‡ä»¶<ol>\n<li><code>domian.name.key domain.name.pem</code></li>\n</ol>\n</li>\n<li>å§è¯ä¹¦ä¸Šä¼ åˆ°ç›®æ ‡nginxæœåŠ¡å™¨ä¸­ã€‚</li>\n<li>æ£€æŸ¥æœåŠ¡å™¨é˜²ç«å¢™</li>\n</ol>\n</li>\n</ol>\n<figure class=\"highlight sh\"><table><tr><td class=\"code\"><pre><span class=\"line\">sudo firewall-cmd --permanent --zone=public --add-service=http</span><br><span class=\"line\">sudo firewall-cmd --permanent --zone=public --add-service=https</span><br><span class=\"line\">sudo firewall-cmd --reload</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"å¼€å§‹æ­¥éª¤\"><a href=\"#å¼€å§‹æ­¥éª¤\" class=\"headerlink\" title=\"å¼€å§‹æ­¥éª¤\"></a>å¼€å§‹æ­¥éª¤</h3><h4 id=\"å®‰è£…nginx\"><a href=\"#å®‰è£…nginx\" class=\"headerlink\" title=\"å®‰è£…nginx\"></a>å®‰è£…nginx</h4><blockquote>\n<p>æœåŠ¡å™¨ä½¿ç”¨çš„CentosæœåŠ¡å™¨ ä½¿ç”¨yumå®‰è£…nginxã€‚</p>\n</blockquote>\n<figure class=\"highlight sh\"><table><tr><td class=\"code\"><pre><span class=\"line\">-&gt; yum install -y nginx</span><br><span class=\"line\"><span class=\"comment\">#æ£€æŸ¥nginxå®‰è£…ä½ç½®ä¿¡æ¯</span></span><br><span class=\"line\">-&gt; whereis nginx</span><br><span class=\"line\">nginx: /usr/sbin/nginx /usr/lib64/nginx /etc/nginx /usr/share/nginx /usr/share/man/man3/nginx.3pm.gz /usr/share/man/man8/nginx.8.gz</span><br><span class=\"line\"><span class=\"comment\"># å®é™…ä¸Šæ˜¯å®‰è£…åˆ°/etc/nginxé‡Œé¢äº†</span></span><br><span class=\"line\"><span class=\"comment\"># è®¾ç½®å¼€æœºè‡ªåŠ¨å¯åŠ¨nginx</span></span><br><span class=\"line\">-&gt; sudo systemctl <span class=\"built_in\">enable</span> nginx</span><br><span class=\"line\">Created symlink from /etc/systemd/system/multi-user.target.wants/nginx.service to /usr/lib/systemd/system/nginx.service.</span><br><span class=\"line\"><span class=\"comment\"># åˆ‡æ¢åˆ°nginxå®‰è£…ç›®å½•</span></span><br><span class=\"line\">-&gt; <span class=\"built_in\">cd</span> /etc/nginx</span><br><span class=\"line\"><span class=\"comment\"># å¯åŠ¨nginx</span></span><br><span class=\"line\">-&gt; nginx</span><br><span class=\"line\"><span class=\"comment\"># æµ‹è¯•nginx åœ¨æµè§ˆå™¨é‡Œé¢è¯·æ±‚http://ip å°±å¯ä»¥äº†çœ‹åˆ°nginxé¡µé¢å°±ç®—å®‰è£…æˆåŠŸ</span></span><br></pre></td></tr></table></figure>\n\n<h4 id=\"é…ç½®è¯ä¹¦\"><a href=\"#é…ç½®è¯ä¹¦\" class=\"headerlink\" title=\"é…ç½®è¯ä¹¦\"></a>é…ç½®è¯ä¹¦</h4><figure class=\"highlight sh\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># åˆ›å»ºè¯ä¹¦æ–‡ä»¶å¹¶ä¸”å°†è¯ä¹¦å¤åˆ¶è¿‘æ–‡ä»¶ä¸­</span></span><br><span class=\"line\">-&gt; <span class=\"built_in\">cd</span> /etc/nginx</span><br><span class=\"line\">-&gt; mkdir cert</span><br><span class=\"line\">-&gt; mv domian.name.key /etc/nginx/cert/</span><br><span class=\"line\">-&gt; mv domian.name.pem /etc/nginx/cert/</span><br><span class=\"line\"><span class=\"comment\"># é…ç½®nginx.confæ–‡ä»¶ä½¿è¯ä¹¦ç”Ÿæ•ˆï¼Œå¹¶å°†80ç«¯å£è½¬å‘åˆ°443ç«¯å£ä¸Šã€‚</span></span><br><span class=\"line\">-&gt; vim nginx.conf</span><br><span class=\"line\"><span class=\"comment\">#ä»¥ä¸‹å±æ€§ä¸­ä»¥sslå¼€å¤´çš„å±æ€§ä»£è¡¨ä¸è¯ä¹¦é…ç½®æœ‰å…³ï¼Œå…¶ä»–å±æ€§è¯·æ ¹æ®è‡ªå·±çš„éœ€è¦è¿›è¡Œé…ç½®ã€‚</span></span><br><span class=\"line\">server &#123;</span><br><span class=\"line\">         listen 443; <span class=\"comment\">#é…ç½®HTTPSçš„é»˜è®¤è®¿é—®ç«¯å£å·ä¸º443ã€‚æ­¤å¤„å¦‚æœæœªé…ç½®HTTPSçš„é»˜è®¤è®¿é—®ç«¯å£ï¼Œå¯èƒ½ä¼šé€ æˆNginxæ— æ³•å¯åŠ¨ã€‚Nginx 1.15.0ä»¥ä¸Šç‰ˆæœ¬è¯·ä½¿ç”¨listen 443 sslä»£æ›¿listen 443å’Œssl onã€‚</span></span><br><span class=\"line\">         server_name www.certificatestests.com; <span class=\"comment\">#å°†www.certificatestests.comä¿®æ”¹ä¸ºæ‚¨è¯ä¹¦ç»‘å®šçš„åŸŸåï¼Œä¾‹å¦‚ï¼šwww.example.comã€‚å¦‚æœæ‚¨è´­ä¹°çš„æ˜¯é€šé…ç¬¦åŸŸåè¯ä¹¦ï¼Œè¦ä¿®æ”¹ä¸ºé€šé…ç¬¦åŸŸåï¼Œä¾‹å¦‚ï¼š*.aliyun.comã€‚</span></span><br><span class=\"line\">         root html;</span><br><span class=\"line\">         index index.html index.htm;</span><br><span class=\"line\">         ssl_certificate cert/domain name.pem;  <span class=\"comment\">#å°†domain name.pemæ›¿æ¢æˆæ‚¨è¯ä¹¦çš„æ–‡ä»¶åç§°ã€‚</span></span><br><span class=\"line\">         ssl_certificate_key cert/domain name.key; <span class=\"comment\">#å°†domain name.keyæ›¿æ¢æˆæ‚¨è¯ä¹¦çš„å¯†é’¥æ–‡ä»¶åç§°ã€‚</span></span><br><span class=\"line\">         ssl_session_timeout 5m;</span><br><span class=\"line\">         ssl_ciphers ECDHE-RSA-AES128-GCM-SHA256:ECDHE:ECDH:AES:HIGH:!NULL:!aNULL:!MD5:!ADH:!RC4; <span class=\"comment\">#ä½¿ç”¨æ­¤åŠ å¯†å¥—ä»¶ã€‚</span></span><br><span class=\"line\">         ssl_protocols TLSv1 TLSv1.1 TLSv1.2; <span class=\"comment\">#ä½¿ç”¨è¯¥åè®®è¿›è¡Œé…ç½®ã€‚</span></span><br><span class=\"line\">         ssl_prefer_server_ciphers on;</span><br><span class=\"line\">         location / &#123;</span><br><span class=\"line\">         root html;  <span class=\"comment\">#ç«™ç‚¹ç›®å½•ã€‚</span></span><br><span class=\"line\">         index index.html index.htm;</span><br><span class=\"line\">                    &#125;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">server &#123;</span><br><span class=\"line\"><span class=\"comment\">#        listen       80 default_server;</span></span><br><span class=\"line\"><span class=\"comment\">#        listen       [::]:80 default_server;</span></span><br><span class=\"line\"><span class=\"comment\">#        server_name  _;</span></span><br><span class=\"line\">        listen 80;</span><br><span class=\"line\">        listen [::]:80;</span><br><span class=\"line\">        server_name www.certificatestests.com;</span><br><span class=\"line\">        <span class=\"built_in\">return</span> 301 https://<span class=\"variable\">$host</span><span class=\"variable\">$request_uri</span>;</span><br><span class=\"line\">       &#125;</span><br><span class=\"line\"><span class=\"comment\"># ä¿å­˜å¹¶æ¨å‡ºã€æ£€æŸ¥é…ç½®nginxé…ç½®æ–‡ä»¶æ˜¯å¦åˆæ³•ã€å¹¶é‡å¯nginx</span></span><br><span class=\"line\">-&gt; nginx -t</span><br><span class=\"line\">nginx: the configuration file /etc/nginx/nginx.conf syntax is ok</span><br><span class=\"line\">nginx: configuration file /etc/nginx/nginx.conf <span class=\"built_in\">test</span> is successful</span><br><span class=\"line\">-&gt; nginx -s reload</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"æµ‹è¯•åŸŸåè¯ä¹¦æ˜¯å¦ç”Ÿæ•ˆ\"><a href=\"#æµ‹è¯•åŸŸåè¯ä¹¦æ˜¯å¦ç”Ÿæ•ˆ\" class=\"headerlink\" title=\"æµ‹è¯•åŸŸåè¯ä¹¦æ˜¯å¦ç”Ÿæ•ˆ\"></a>æµ‹è¯•åŸŸåè¯ä¹¦æ˜¯å¦ç”Ÿæ•ˆ</h4><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">https:&#x2F;&#x2F;domian</span><br><span class=\"line\">http:&#x2F;&#x2F;domian æ£€æŸ¥æ˜¯å¦å®‰å…¨é“¾æ¥å³å¯ã€‚ä¸€èˆ¬æµè§ˆå™¨ä¸Šé¢ä¼šå‡ºç°ä¸€ä¸ªå®‰å…¨çš„æ ‡å¿—</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"å‚è€ƒæ–‡çŒ®\"><a href=\"#å‚è€ƒæ–‡çŒ®\" class=\"headerlink\" title=\"å‚è€ƒæ–‡çŒ®\"></a>å‚è€ƒæ–‡çŒ®</h3><p><a href=\"https://help.aliyun.com/document_detail/98728.html?spm=5176.2020520163.0.dexternal.3e4756a7jNJMZQ\" target=\"_blank\" rel=\"noopener\">é˜¿é‡Œäº‘å¸®åŠ©æ–‡æ¡£-åœ¨Nginxä¸Šé…ç½®è¯ä¹¦</a></p>\n<p><a href=\"https://segmentfault.com/a/1190000018109309\" target=\"_blank\" rel=\"noopener\">CentOS 7 ä¸Šå®‰è£…æœ€æ–°ç‰ˆ Nginx</a></p>\n","categories":["å®è·µ"],"tags":["Nginx","Https"]},{"title":"å®è·µ-spring-bootæ›¿æ¢å†…ç½®tomcatç‰ˆæœ¬","url":"/posts/3681309085/","content":"<blockquote>\n<p>æœ¬ç« åªæ˜¯å›é¡¾ä¸€æ¬¡eurekaç‰ˆæœ¬å‡çº§åtomcatèµ„æºå ç”¨è¿‡é«˜çš„é—®é¢˜ï¼Œä¸´æ—¶è§£å†³ã€‚</p>\n</blockquote>\n<h3 id=\"å‡çº§springBootã€SpringCloudç‰ˆæœ¬\"><a href=\"#å‡çº§springBootã€SpringCloudç‰ˆæœ¬\" class=\"headerlink\" title=\"å‡çº§springBootã€SpringCloudç‰ˆæœ¬\"></a>å‡çº§springBootã€SpringCloudç‰ˆæœ¬</h3><ul>\n<li>å‡çº§å®Œæˆåç›´æ¥åœ¨æµ‹è¯•ç¯å¢ƒæµ‹è¯•éƒ¨ç½²ï¼Œç»“æœå‘ç°eurekaçš„cpuèµ„æºå ç”¨è¿‡é«˜ï¼Œå¯¼è‡´å‡æ­»ã€‚é€šè¿‡arthaså‘ç°æ˜¯tomcatçº¿ç¨‹é˜»å¡ã€‚é€šè¿‡dependepencyçœ‹äº†ä¸‹springbootä¸­å†…åµŒtomcatçš„ç‰ˆæœ¬æ˜¯9äº†ã€‚ä¹‹å‰æ˜¯8ï¼Œæµ‹è¯•ç¯å¢ƒä¸€å¤§å †äººç­‰ç€æµ‹è¯•æ¥å£ã€‚é¦–å…ˆæƒ³ç€é™ä½tomcatç‰ˆæœ¬ã€‚</li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">æŸ¥çœ‹ä¾èµ–</span><br><span class=\"line\">gradle dependencies</span><br><span class=\"line\">mvn dependency:tree &gt; output.txt   # è¾“å‡ºåˆ°æ–‡ä»¶é‡Œ</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"æ’é™¤SpringBootçš„Tomcatï¼ŒæŒ‡å®šTomcatç‰ˆæœ¬\"><a href=\"#æ’é™¤SpringBootçš„Tomcatï¼ŒæŒ‡å®šTomcatç‰ˆæœ¬\" class=\"headerlink\" title=\"æ’é™¤SpringBootçš„Tomcatï¼ŒæŒ‡å®šTomcatç‰ˆæœ¬\"></a>æ’é™¤SpringBootçš„Tomcatï¼ŒæŒ‡å®šTomcatç‰ˆæœ¬</h3><p>æœ‰æ—¶å€™æˆ‘ä»¬éœ€è¦åœ¨ç‰¹å®šæƒ…å†µä¸‹ä½¿ç”¨ç‰¹å®šçš„Tomcatç‰ˆæœ¬ï¼Œè¿™æ—¶å€™æ€»ä¸èƒ½å› ä¸ºTomcatå°±æ”¹å˜SpringBootçš„ç‰ˆæœ¬ï¼Œæ‰€ä»¥å¯ä»¥é‡‡ç”¨æ’é™¤SpringBootä¸­çš„TomcatåŒ…ï¼Œç„¶åæ‰‹åŠ¨æŒ‡å®šTomcatçš„ç‰ˆæœ¬ï¼Œå½“ç„¶è¿˜è¦å¼•å…¥Tomcatç›¸å…³çš„åŒ…ã€‚</p>\n<h5 id=\"Gradleçš„é…ç½®\"><a href=\"#Gradleçš„é…ç½®\" class=\"headerlink\" title=\"Gradleçš„é…ç½®\"></a>Gradleçš„é…ç½®</h5><figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\">compile(<span class=\"string\">'org.springframework.boot:spring-boot-starter-web'</span>) &#123;</span><br><span class=\"line\">  exclude <span class=\"keyword\">module</span>: <span class=\"string\">\"spring-boot-starter-tomcat\"</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\">compile <span class=\"string\">'org.apache.tomcat.embed:tomcat-embed-core:8.5.37'</span></span><br><span class=\"line\">compile <span class=\"string\">'org.apache.tomcat.embed:tomcat-embed-el:8.5.37'</span></span><br><span class=\"line\">compile <span class=\"string\">'org.apache.tomcat.embed:tomcat-embed-logging-juli:8.5.2'</span></span><br><span class=\"line\">compile <span class=\"string\">'org.apache.tomcat.embed:tomcat-embed-websocket:8.5.37'</span></span><br></pre></td></tr></table></figure>\n\n<p>å¦‚æœä¸æŒ‡å®šç‰ˆæœ¬ï¼Œåˆ™ä¼šä½¿ç”¨æœ€æ–°çš„Tomcatç‰ˆæœ¬, å¦åˆ™ç›´æ¥æŒ‡å®šå¯¹åº”çš„ç‰ˆæœ¬å·ã€‚</p>\n<h5 id=\"Mavençš„é…ç½®\"><a href=\"#Mavençš„é…ç½®\" class=\"headerlink\" title=\"Mavençš„é…ç½®\"></a>Mavençš„é…ç½®</h5><ol>\n<li>åœ¨ pom.xmlæ–‡ä»¶é‡Œé¢æ·»åŠ ä¸€ä¸ªæ ‡ç­¾<properties>ï¼Œæ·»åŠ æœŸæœ›çš„ç‰ˆæœ¬ã€‚</li>\n</ol>\n<figure class=\"highlight xml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">tomcat.version</span>&gt;</span>8.5.37<span class=\"tag\">&lt;/<span class=\"name\">tomcat.version</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<ol>\n<li>æ·»åŠ å¿…è¦çš„JaråŒ…ï¼š</li>\n</ol>\n<figure class=\"highlight xml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span> </span><br><span class=\"line\">   <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>org.apache.tomcat<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span> </span><br><span class=\"line\">   <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>tomcat-juli<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span> </span><br><span class=\"line\">   <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>$&#123;tomcat.version&#125;<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span> </span><br><span class=\"line\"> <span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>org.apache.tomcat.embed<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>tomcat-embed-logging-juli<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>$&#123;tomcat.version&#125;<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<p>é‡æ–°éƒ¨ç½²eurekaåä¸€åˆ‡æ­£å¸¸ã€‚å¤„ç†æ—¶é—´çŸ­æš‚ï¼Œæ²¡æœ‰å½±å“å¤§å®¶å·¥ä½œã€‚æ—¶é—´è¿‡äº†å¤§åŠå¹´äº†ï¼Œä¹Ÿå¿˜è®°å…·ä½“æ˜¯å•¥åŸå› äº†ã€‚æœ‰æœºä¼šæœ¬åœ°å¤ç°è¯•è¯•ã€‚</p>\n","categories":["å®è·µ"],"tags":["Eureka","Tomcat","SpringBoot"]},{"title":"å®è·µ-eurekaé’‰é’‰å‘Šè­¦é€šçŸ¥","url":"/posts/288875540/","content":"<blockquote>\n<p>æœ¬ç¯‡å¹…åªæ˜¯å›é¡¾ä½¿ç”¨eurekaçš„æ—¶å€™å¦‚ä½•é’‰é’‰å‘Šè­¦ã€‚</p>\n</blockquote>\n<h3 id=\"eurekaå¦‚ä½•å¿«é€Ÿå®ç°é’‰é’‰å‘Šè­¦\"><a href=\"#eurekaå¦‚ä½•å¿«é€Ÿå®ç°é’‰é’‰å‘Šè­¦\" class=\"headerlink\" title=\"eurekaå¦‚ä½•å¿«é€Ÿå®ç°é’‰é’‰å‘Šè­¦\"></a>eurekaå¦‚ä½•å¿«é€Ÿå®ç°é’‰é’‰å‘Šè­¦</h3><p><a href=\"https://z201.cn/2020/07/15/%E5%AE%9E%E8%B7%B5-spring-boot%E5%BC%82%E5%B8%B8%E9%92%89%E9%92%89%E9%80%9A%E7%9F%A5/\">å®è·µ-spring-bootå¼‚å¸¸é’‰é’‰é€šçŸ¥</a></p>\n<p>â€‹        ä¸Šé¢å®è·µäº†springbootå…¨å±€å¼‚å¸¸é’‰é’‰å‘Šè­¦æœºåˆ¶ã€‚è¿™ç¯‡ä¸»è¦å›é¡¾eurekaç›‘å¬æœºåˆ¶é’‰é’‰å‘Šè­¦ã€‚åœ¨æ—¥å¸¸ç»´æŠ¤å·¥ä½œä¸­ï¼Œå¦‚æœå‡ºç°ç½‘ç»œæŠ–åŠ¨æˆ–è€…å…¶å®ƒé—®é¢˜å¯¼è‡´åº”ç”¨ä¸å¯ç”¨ï¼Œéœ€è¦ç¬¬ä¸€ä»¶å‘å‡ºå‘Šè­¦æé†’ç›¸å…³äººå‘˜å°½å¿«å¤„ç†ã€‚</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">sequenceDiagram</span><br><span class=\"line\">eureka -&gt;&gt; eventListener : event</span><br><span class=\"line\">eventListener -&gt;&gt;  é’‰é’‰ : alarmNoticeSend</span><br><span class=\"line\">é’‰é’‰ -&gt;&gt; å¼€å‘äººå‘˜  : eurekaInstanceInfo</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>å®ä¾‹å›¾</li>\n</ul>\n<p><img src=\"https://z201.oss-cn-shanghai.aliyuncs.com/JavaNote/eureka%E5%AE%9E%E4%BE%8B%E9%92%89%E9%92%89%E5%91%8A%E8%AD%A6.png\"></p>\n<p>â€‹        å…³é”®ä»£ç </p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">@EventListener</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">listen</span><span class=\"params\">(EurekaInstanceCanceledEvent event)</span> </span>&#123;</span><br><span class=\"line\">        log.error(<span class=\"string\">\"å‘Šè­¦é€šçŸ¥ [&#123;&#125;] æœåŠ¡æ³¨é”€ timestamp [&#123;&#125;] serverId [&#123;&#125;]\"</span>,</span><br><span class=\"line\">                event.getAppName(),</span><br><span class=\"line\">                event.getTimestamp(),</span><br><span class=\"line\">                event.getServerId());</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (!event.isReplication()) &#123;</span><br><span class=\"line\">            ServiceNotice serviceNotice = <span class=\"keyword\">new</span> ServiceNotice();</span><br><span class=\"line\">            serviceNotice.setTitle(<span class=\"string\">\"å‘Šè­¦é€šçŸ¥ æœåŠ¡ä¸‹çº¿\"</span>);</span><br><span class=\"line\">            serviceNotice.setAppName(event.getAppName());</span><br><span class=\"line\">            serviceNotice.setTimestamp(event.getTimestamp());</span><br><span class=\"line\">            serviceNotice.setServerId(event.getServerId());</span><br><span class=\"line\">            serviceNotice.setProfiles(active);</span><br><span class=\"line\">            alarmNoticeManage.createNotice(serviceNotice, <span class=\"string\">\"\"</span>);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@EventListener</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">listen</span><span class=\"params\">(EurekaInstanceRegisteredEvent event)</span> </span>&#123;</span><br><span class=\"line\">        log.info(<span class=\"string\">\"å‘Šè­¦é€šçŸ¥ [&#123;&#125;] æœåŠ¡æ³¨å†Œ timestamp [&#123;&#125;] id [&#123;&#125;] ipAddr [&#123;&#125;] \"</span>,</span><br><span class=\"line\">                event.getInstanceInfo().getAppName(),</span><br><span class=\"line\">                event.getTimestamp(),</span><br><span class=\"line\">                event.getInstanceInfo().getId(),</span><br><span class=\"line\">                event.getInstanceInfo().getIPAddr()</span><br><span class=\"line\">        );</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (!event.isReplication()) &#123;</span><br><span class=\"line\">            ServiceNotice serviceNotice = <span class=\"keyword\">new</span> ServiceNotice();</span><br><span class=\"line\">            serviceNotice.setTitle(<span class=\"string\">\"å‘Šè­¦é€šçŸ¥ æœåŠ¡ä¸Šçº¿\"</span>);</span><br><span class=\"line\">            serviceNotice.setAppName(event.getInstanceInfo().getAppName());</span><br><span class=\"line\">            serviceNotice.setTimestamp(event.getTimestamp());</span><br><span class=\"line\">            serviceNotice.setServerId(event.getInstanceInfo().getId());</span><br><span class=\"line\">            serviceNotice.setProfiles(active);</span><br><span class=\"line\">            alarmNoticeManage.createNotice(serviceNotice, <span class=\"string\">\"\"</span>);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>æ•ˆæœå¦‚ä¸‹</li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">å‘Šè­¦é€šçŸ¥ æœåŠ¡ä¸‹çº¿</span><br><span class=\"line\">2020-07-16 16:03:20 Z-GATEWAY 192.168.31.7:z-gateway:9000 profiles dev1</span><br><span class=\"line\">@xxx</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>eurekaæŸ¥çœ‹æºç å¾—çŸ¥æœ‰äº”ä¸ªäº‹ä»¶ã€‚</li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">EurekaServerStartedEvent - EurekaæœåŠ¡ç«¯å¯åŠ¨äº‹ä»¶</span><br><span class=\"line\">EurekaRegistryAvailableEvent - EurekaæœåŠ¡ç«¯å¯ç”¨äº‹ä»¶</span><br><span class=\"line\">EurekaInstanceRegisteredEvent - Eurekaå®¢æˆ·ç«¯æœåŠ¡æ³¨å†Œäº‹ä»¶</span><br><span class=\"line\">EurekaInstanceRenewedEvent - Eurekaå®¢æˆ·ç«¯ç»­çº¦äº‹ä»¶</span><br><span class=\"line\">EurekaInstanceCanceledEvent - Eurekaå®¢æˆ·ç«¯ä¸‹çº¿äº‹ä»¶</span><br></pre></td></tr></table></figure>\n\n<p>è¿™é‡Œå°±æ¯”è¾ƒç®€å•äº†ã€‚</p>\n","categories":["å®è·µ"],"tags":["å¾®æœåŠ¡","Java","Eureka","é’‰é’‰"]},{"title":"å®è·µ-SpringBootå¼‚å¸¸é’‰é’‰é€šçŸ¥","url":"/posts/1118278652/","content":"<blockquote>\n<p>æœ¬ç¯‡å¹…åªæ˜¯å›é¡¾ä½¿ç”¨é’‰é’‰åšå¼‚å¸¸å‘Šè­¦éœ€è¦é‚£äº›å…³é”®ä¸šåŠ¡ä¿¡æ¯ã€‚</p>\n</blockquote>\n<h3 id=\"ä¸ºä»€ä¹ˆè¦åšé’‰é’‰é€šçŸ¥ï¼Ÿ\"><a href=\"#ä¸ºä»€ä¹ˆè¦åšé’‰é’‰é€šçŸ¥ï¼Ÿ\" class=\"headerlink\" title=\"ä¸ºä»€ä¹ˆè¦åšé’‰é’‰é€šçŸ¥ï¼Ÿ\"></a>ä¸ºä»€ä¹ˆè¦åšé’‰é’‰é€šçŸ¥ï¼Ÿ</h3><p>â€‹        äº‹æƒ…è¦ä»æˆ‘å…¥èŒä¸Šå®¶å…¬å¸è¯´èµ·ï¼Œè¿›å…¥å…¬å¸åæŠŠçº¿ä¸Šé¡¹ç›®cloneä¸‹æ¥å¤§è‡´çœ‹äº†ä¸‹ã€‚ä»£ç é£æ ¼è¿‡äºæ»åã€ç¼–ç é£æ ¼æ··ä¹±ã€‚è¿›å…¥å…¬å¸ç¬¬ä¸€å‘¨å°±å‡ºç°äº†çº¿ä¸Šæ•…éšœï¼Œå—¯ã€‚æˆ‘å»çº¿ä¸Šæ£€æŸ¥æ—¥å¿—ï¼Œemmmmç«Ÿç„¶æ²¡æœ‰æ—¥å¿—è¾“å‡ºã€‚è¿™æ¬¡æ•…éšœæ˜¯ç”±å®¢æˆ·åé¦ˆæ¥çš„ã€‚å½“æ—¶æˆ‘éå¸¸åƒæƒŠï¼Œå¤§ä¼™å¥½åƒå¾ˆæ·¡å®šçš„æ ·å­ï¼Œä¹ ä»¥ä¸ºå¸¸äº†ï¼Ÿ</p>\n<p>â€‹        æƒ³åˆ°å½“åˆé¢è¯•çš„æ—¶å€™å’Œæ€»ç›‘çš„è°ˆè¯ï¼Œä¸»è¦æ˜¯å¸¦é¢†å›¢é˜Ÿè½åœ°å¾®æœåŠ¡æ¶æ„ï¼Œçœ‹æ¥å¿…é¡»å¤§åˆ€é˜”æ–§äº†ã€‚</p>\n<p>â€‹        é¦–å…ˆæƒ³åˆ°çš„æ—¶å€™æ”¹è¿›æ—¥å¿—è¾“å‡ºã€å®šä¹‰å…¨å±€å¼‚å¸¸çº§åˆ«ï¼Œæ ¹æ®å¼‚å¸¸çº§åˆ«è¾“å‡ºæ—¥å¿—ã€‚</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">sequenceDiagram</span><br><span class=\"line\">Javaåº”ç”¨ -&gt;&gt; SpringAopå…¨å±€å¼‚å¸¸æ‹¦æˆª : runtimeException</span><br><span class=\"line\">SpringAopå…¨å±€å¼‚å¸¸æ‹¦æˆª -&gt;&gt;  é’‰é’‰ : alarmNoticeSend</span><br><span class=\"line\">é’‰é’‰ -&gt;&gt; å¼€å‘äººå‘˜  : exceptionInfo</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>æ•ˆæœå›¾</li>\n</ul>\n<p><img src=\"https://z201.oss-cn-shanghai.aliyuncs.com/JavaNote/springboot%E9%92%89%E9%92%89%E5%85%A8%E5%B1%80%E5%BC%82%E5%B8%B8%E6%8B%A6%E6%88%AA.png\"></p>\n<p>â€‹        æˆ‘ä»¬éœ€è¦ä»é’‰é’‰é‡Œé¢çœ‹åˆ°é‚£äº›å¼‚å¸¸ä¿¡æ¯å‘¢ï¼Ÿè¿™æ˜¯å½“æ—¶è¾“å‡ºåˆ°é’‰é’‰çš„ä¿¡æ¯ã€‚é€šè¿‡ç¼–å†™å…¨å±€æ‹¦æˆªå™¨ï¼Œåœ¨å…¬å…±åŸºç¡€é¡¹ç›®é‡Œé¢æ·»åŠ äº†aopå…¨å±€æ‹¦æˆªã€‚åˆšå¼€å§‹ä¸Šçº¿çš„æ—¶å€™é’‰é’‰ä¸€å¤©åŠ¨ä¸åŠ¨å°±å‡ åƒä¸ªå¼‚å¸¸å‘Šè­¦ã€‚åˆšå¼€å§‹å¤§ä¼™éƒ½å¾ˆç´§å¼ ï¼Œè¿‡äº†ä¸ªæŠŠæœˆå¤§ä¼™å·²ç»åˆéº»æœ¨äº†ã€‚</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\">å‘Šè­¦ä¿¡æ¯</span><br><span class=\"line\">å·¥ç¨‹åï¼šz201-gateway</span><br><span class=\"line\">ç±»è·¯å¾„ï¼šcn.z201.cloud.gateway.VlinkFrameworkGatewayApplicationTest</span><br><span class=\"line\">æ–¹æ³•åï¼šalarm</span><br><span class=\"line\">å¼‚å¸¸ä¿¡æ¯ï¼šjava.lang.IllegalAccessException</span><br><span class=\"line\">å¼‚å¸¸è¿½è¸ªï¼š</span><br><span class=\"line\">cn.z201.cloud.gateway.VlinkFrameworkGatewayApplicationTest.alarm(VlinkFrameworkGatewayApplicationTest.java:<span class=\"number\">64</span>)</span><br><span class=\"line\">sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)</span><br><span class=\"line\">sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:<span class=\"number\">62</span>)</span><br><span class=\"line\">sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:<span class=\"number\">43</span>)</span><br><span class=\"line\">java.lang.reflect.Method.invoke(Method.java:<span class=\"number\">498</span>)</span><br><span class=\"line\">org.junit.runners.model.FrameworkMethod$<span class=\"number\">1</span>.runReflectiveCall(FrameworkMethod.java:<span class=\"number\">50</span>)</span><br><span class=\"line\">org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:<span class=\"number\">12</span>)</span><br><span class=\"line\">org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:<span class=\"number\">47</span>)</span><br><span class=\"line\">org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:<span class=\"number\">17</span>)</span><br><span class=\"line\">org.springframework.test.context.junit4.statements.RunBeforeTestExecutionCallbacks.evaluate(RunBeforeTestExecutionCallbacks.java:<span class=\"number\">74</span>)</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"è¿™æ ·çš„å‘Šè­¦ä¿¡æ¯å°±å¤Ÿäº†å—ï¼Ÿ\"><a href=\"#è¿™æ ·çš„å‘Šè­¦ä¿¡æ¯å°±å¤Ÿäº†å—ï¼Ÿ\" class=\"headerlink\" title=\"è¿™æ ·çš„å‘Šè­¦ä¿¡æ¯å°±å¤Ÿäº†å—ï¼Ÿ\"></a>è¿™æ ·çš„å‘Šè­¦ä¿¡æ¯å°±å¤Ÿäº†å—ï¼Ÿ</h3><p>â€‹        æ˜æ˜¾è¿™æ ·æ˜¯ä¸å¤Ÿå¤Ÿçš„ï¼Œå‰ç«¯æœ‰å®‰å“ã€iosã€å¾®ä¿¡å°ç¨‹åºã€webã€å¿«åº”ç”¨ã€‚å¤ªå¤šå‰ç«¯é¡¹ç›®äº†ï¼Œåç«¯éœ€è¦è¯†åˆ«å‡ºæ˜¯å“ªé‡Œçš„é¡¹ç›®å‡ºçš„é—®é¢˜ã€‚äºæ˜¯åˆæ”¹è¿›äº†ä¸€æ¬¡ã€‚é‚€è¯·å‰ç«¯å¼€å‘äººå‘˜åœ¨HttpHeaderé‡Œé¢å¢åŠ é¢å¤–å‚æ•°ã€‚ä¸ºäº†åšæµé‡åŒºåˆ†ä¹Ÿå¢åŠ äº†ä¸€äº›å‚æ•°ã€‚</p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"> &#123;</span><br><span class=\"line\">  <span class=\"string\">\"Content-Type\"</span>:<span class=\"string\">\"application/json\"</span> </span><br><span class=\"line\">  \"Authorization\":\"Bearer xxxxxxxxxx\"  ## jwt</span><br><span class=\"line\">  \"Client-Business-Group-Source\": \"1\", ##  ä¸šåŠ¡ç»„æ¥æºå”¯ä¸€æ ‡å·</span><br><span class=\"line\">  \"Client-Business-Source\": \"1000\", ## ä¸šåŠ¡æ¥æºå”¯ä¸€æ ‡å·</span><br><span class=\"line\">  \"Client-Business-Activity-Source\": \"1\", ## æŸ¥çœ‹ä»‹ç»ã€æ›´å¤š é’ˆå¯¹ç‰¹æ®Šä¸šåŠ¡æµé‡è¯†åˆ«</span><br><span class=\"line\">  \"Client-Env-Source\": \"1\",\t\t\t\t ##å®¢æˆ·ç«¯ç¯å¢ƒæ¥æº  1 ios  2 android  3 windows</span><br><span class=\"line\">  \"Client-Platform-Source\": \"xxx\", ##å®¢æˆ·ç«¯å¹³å° xxxæ‰‹æœºå‹å·ã€æµè§ˆå™¨</span><br><span class=\"line\">  \"Client-Start-Time\": \"1\",        ##è¯·æ±‚æ—¶é—´æˆ³</span><br><span class=\"line\">  \"Client-Version-Source\": \"1.0.0\" ##å®¢æˆ·ç«¯ç‰ˆæœ¬å·</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>â€‹        é€šè¿‡ä¸Šé¢çš„æ”¹è¿›å‘Šè­¦ä¿¡æ¯å®Œå–„å¾ˆå¤šã€‚</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">å‘Šè­¦ä¿¡æ¯</span><br><span class=\"line\">å·¥ç¨‹åï¼šz201-gateway</span><br><span class=\"line\">ç±»è·¯å¾„ï¼šcn.z201.cloud.gateway.VlinkFrameworkGatewayApplicationTest</span><br><span class=\"line\">æ–¹æ³•åï¼šalarm</span><br><span class=\"line\">å¼‚å¸¸ä¿¡æ¯ï¼šjava.lang.IllegalAccessException</span><br><span class=\"line\">å¼‚å¸¸æ‰©å±•ä¿¡æ¯ï¼š &#123;</span><br><span class=\"line\">  &quot;Client-Business-Source&quot;: &quot;1000&quot;, </span><br><span class=\"line\">  &quot;Client-Business-Activity-Source&quot;: &quot;1&quot;, </span><br><span class=\"line\">  &quot;Client-Env-Source&quot;: &quot;1&quot;,\t\t\t\t </span><br><span class=\"line\">  &quot;Client-Platform-Source&quot;: &quot;xxx&quot;,   </span><br><span class=\"line\">  &quot;Client-Version-Source&quot;: &quot;1.0.0&quot; </span><br><span class=\"line\">&#125; </span><br><span class=\"line\">å¼‚å¸¸è¿½è¸ªï¼š</span><br><span class=\"line\">cn.z201.cloud.gateway.VlinkFrameworkGatewayApplicationTest.alarm(VlinkFrameworkGatewayApplicationTest.java:64)</span><br><span class=\"line\">sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)</span><br><span class=\"line\">sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)</span><br><span class=\"line\">sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)</span><br><span class=\"line\">java.lang.reflect.Method.invoke(Method.java:498)</span><br><span class=\"line\">org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)</span><br><span class=\"line\">org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)</span><br><span class=\"line\">org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)</span><br><span class=\"line\">org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)</span><br><span class=\"line\">org.springframework.test.context.junit4.statements.RunBeforeTestExecutionCallbacks.evaluate(RunBeforeTestExecutionCallbacks.java:74)</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"åˆ†å¸ƒå¼ä¸‹é¢ä¸´çš„é—®é¢˜ï¼\"><a href=\"#åˆ†å¸ƒå¼ä¸‹é¢ä¸´çš„é—®é¢˜ï¼\" class=\"headerlink\" title=\"åˆ†å¸ƒå¼ä¸‹é¢ä¸´çš„é—®é¢˜ï¼\"></a>åˆ†å¸ƒå¼ä¸‹é¢ä¸´çš„é—®é¢˜ï¼</h3><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">sequenceDiagram</span><br><span class=\"line\">gateway -&gt;&gt; åº”ç”¨A : httpRequest</span><br><span class=\"line\">åº”ç”¨A -&gt;&gt;  åº”ç”¨B : httpRequest</span><br><span class=\"line\">åº”ç”¨B --&gt;&gt; åº”ç”¨A : httpResponse</span><br><span class=\"line\">åº”ç”¨A --&gt;&gt; gateway : httpResponse</span><br></pre></td></tr></table></figure>\n\n<p><img src=\"https://z201.oss-cn-shanghai.aliyuncs.com/JavaNote/%E5%A4%9A%E5%BA%94%E7%94%A8%E9%93%BE%E8%B7%AF%E8%AF%B7%E6%B1%82.png\"></p>\n<p>â€‹        å½“è°ƒç”¨é“¾å¤šçš„æ—¶å€™å®šä½é—®é¢˜å°±æœ‰ç‚¹éº»çƒ¦ï¼Œæ¯”å¦‚åº”ç”¨aè°ƒç”¨åº”ç”¨bã€‚åº”ç”¨bæ‰§è¡Œäº†å¼‚å¸¸ä¿¡æ¯ç›´æ¥æŠ›å‡ºäº†å‘Šè­¦ä¿¡æ¯ã€‚ä½†æ˜¯spring cloud http rpcé»˜è®¤æ˜¯ä¸ä¼šå§è¯·æ±‚å‚æ•°ä¼ é€’åˆ°åé¢çš„æœåŠ¡ä¸­ï¼Œéœ€è¦æˆ‘ä»¬åšä¸‹ç®€å•çš„æ‰©å±•ã€‚</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@author</span> z201.coding@gmail.com</span></span><br><span class=\"line\"><span class=\"comment\"> **/</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">interface</span> <span class=\"title\">HttpApiConstant</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    String X_REAL_IP = <span class=\"string\">\"x-real-ip\"</span>;</span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * è¯·æ±‚å¤´è·Ÿè¸ªidåã€‚</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    String HTTP_HEADER_TRACE_ID = <span class=\"string\">\"AppTraceId\"</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * è¯·æ±‚å¤´</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    String HTTP_TOKEN_HEADER = <span class=\"string\">\"Authorization\"</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * appç§Ÿæˆ·</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    String APP_TENANT = <span class=\"string\">\"Tenant\"</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    String CLIENT_BUSINESS_GROUP_SOURCE = <span class=\"string\">\"Client-Business-Group-Source\"</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    String CLIENT_BUSINESS_SOURCE = <span class=\"string\">\"Client-Business-Source\"</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    String CLIENT_BUSINESS_ACTIVITY_SOURCE = <span class=\"string\">\"Client-Business-Activity-Source\"</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    String CLIENT_EVN_SOURCE = <span class=\"string\">\"Client-Env-Source\"</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    String CLIENT_PLATFORM_SOURCE = <span class=\"string\">\"Client-Platform-Source\"</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    String CLIENT_START_TIME = <span class=\"string\">\"Client-Start-Time\"</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    String CLIENT_VERSION_SOURCE = <span class=\"string\">\"Client-Version-Source\"</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@author</span> z201.coding@gmail.com</span></span><br><span class=\"line\"><span class=\"comment\"> * è‡ªå®šä¹‰restTemplateæ‹¦æˆªå™¨</span></span><br><span class=\"line\"><span class=\"comment\"> * è¿™é‡Œå¯ä»¥æŠŠä¸€äº›å‚æ•°ä»åº”ç”¨å±‚ä¼ åˆ°å†…éƒ¨æœåŠ¡</span></span><br><span class=\"line\"><span class=\"comment\"> **/</span></span><br><span class=\"line\"><span class=\"meta\">@Slf</span>4j</span><br><span class=\"line\"><span class=\"meta\">@ConditionalOnClass</span>(WebMvcConfigurer<span class=\"class\">.<span class=\"keyword\">class</span>)</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"title\">public</span> <span class=\"title\">class</span> <span class=\"title\">MdcFeignInterceptorConfig</span> <span class=\"keyword\">implements</span> <span class=\"title\">RequestInterceptor</span>, <span class=\"title\">HttpApiConstant</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">MdcFeignInterceptorConfig</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        log.info(<span class=\"string\">\"Loaded Z-REST-INTERCEPTOR [V1.0.0]\"</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">apply</span><span class=\"params\">(RequestTemplate template)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">            HttpServletRequest request = ((ServletRequestAttributes) RequestContextHolder.currentRequestAttributes())</span><br><span class=\"line\">                    .getRequest();</span><br><span class=\"line\">            String xRealIp = request.getHeader(X_REAL_IP);</span><br><span class=\"line\">            String authentication = request.getHeader(HTTP_TOKEN_HEADER);</span><br><span class=\"line\">            String appTraceId = request.getHeader(HTTP_HEADER_TRACE_ID);</span><br><span class=\"line\">            String businessGroupSource = request.getHeader(CLIENT_BUSINESS_GROUP_SOURCE);</span><br><span class=\"line\">            String clientBusinessSource = request.getHeader(CLIENT_BUSINESS_SOURCE);</span><br><span class=\"line\">            String clientBusinessActivitySource = request.getHeader(CLIENT_BUSINESS_ACTIVITY_SOURCE);</span><br><span class=\"line\">            String clientEnvSource = request.getHeader(CLIENT_EVN_SOURCE);</span><br><span class=\"line\">            String clientPlatformSource = request.getHeader(CLIENT_PLATFORM_SOURCE);</span><br><span class=\"line\">            String clientStartTime = request.getHeader(CLIENT_START_TIME);</span><br><span class=\"line\">            String clientVersionSource = request.getHeader(CLIENT_VERSION_SOURCE);</span><br><span class=\"line\">            template.header(HttpHeaders.ACCEPT_ENCODING, <span class=\"string\">\"gzip\"</span>);</span><br><span class=\"line\">            template.header(X_REAL_IP, xRealIp);</span><br><span class=\"line\">            template.header(HTTP_TOKEN_HEADER, authentication);</span><br><span class=\"line\">            template.header(CLIENT_BUSINESS_GROUP_SOURCE, businessGroupSource);</span><br><span class=\"line\">            template.header(CLIENT_BUSINESS_SOURCE, clientBusinessSource);</span><br><span class=\"line\">            template.header(CLIENT_BUSINESS_ACTIVITY_SOURCE, clientBusinessActivitySource);</span><br><span class=\"line\">            template.header(CLIENT_EVN_SOURCE, clientEnvSource);</span><br><span class=\"line\">            template.header(CLIENT_PLATFORM_SOURCE, clientPlatformSource);</span><br><span class=\"line\">            template.header(CLIENT_START_TIME, clientStartTime);</span><br><span class=\"line\">            template.header(CLIENT_VERSION_SOURCE, clientVersionSource);</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (log.isDebugEnabled()) &#123;</span><br><span class=\"line\">                Enumeration&lt;String&gt; headerNames = request.getHeaderNames();</span><br><span class=\"line\">                <span class=\"keyword\">while</span> (headerNames.hasMoreElements()) &#123;</span><br><span class=\"line\">                    String name = headerNames.nextElement();</span><br><span class=\"line\">                    String value = request.getHeader(name);</span><br><span class=\"line\">                    log.debug(<span class=\"string\">\"header &#123;&#125; - &#123;&#125;\"</span>, name, value);</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125; <span class=\"keyword\">catch</span> (Exception e) &#123;</span><br><span class=\"line\">            log.error(<span class=\"string\">\"template exception &#123;&#125;\"</span>,e.getMessage());</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>ç®€å•çš„å¼‚å¸¸é’‰é’‰å‘Šè­¦å°±åˆ°è¿™é‡Œç»“æŸäº†ã€‚</p>\n","categories":["å®è·µ"],"tags":["å¾®æœåŠ¡","Java","Spring","é’‰é’‰"]},{"title":"Centos7-Openrestyéƒ¨ç½²","url":"/posts/225068205/","content":"<h2 id=\"OpenResty\"><a href=\"#OpenResty\" class=\"headerlink\" title=\"OpenResty\"></a>OpenResty</h2><blockquote>\n<p>OpenResty(åˆç§°ï¼šngx_openresty) æ˜¯ä¸€ä¸ªåŸºäº NGINX çš„å¯ä¼¸ç¼©çš„ Web å¹³å°ï¼Œç”±ä¸­å›½äººç« äº¦æ˜¥å‘èµ·ï¼Œæä¾›äº†å¾ˆå¤šé«˜è´¨é‡çš„ç¬¬ä¸‰æ–¹æ¨¡å—ã€‚OpenResty æ˜¯ä¸€ä¸ªå¼ºå¤§çš„ Web åº”ç”¨æœåŠ¡å™¨</p>\n</blockquote>\n<h3 id=\"å®‰è£…æ–¹æ³•\"><a href=\"#å®‰è£…æ–¹æ³•\" class=\"headerlink\" title=\"å®‰è£…æ–¹æ³•\"></a>å®‰è£…æ–¹æ³•</h3><ul>\n<li>é€šè¿‡æºå®‰è£…</li>\n<li>ç¼–è¯‘å®‰è£…</li>\n</ul>\n<h3 id=\"æºå®‰è£…\"><a href=\"#æºå®‰è£…\" class=\"headerlink\" title=\"æºå®‰è£…\"></a>æºå®‰è£…</h3><ul>\n<li>å®‰è£…yum-utils</li>\n</ul>\n<figure class=\"highlight shell\"><table><tr><td class=\"code\"><pre><span class=\"line\">yum install yum-utils</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>æ·»åŠ openrestyæºrepo</li>\n</ul>\n<figure class=\"highlight shell\"><table><tr><td class=\"code\"><pre><span class=\"line\">yum-config-manager --add-repo https://openresty.org/package/rhel/openresty.repo</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>å®‰è£…</li>\n</ul>\n<figure class=\"highlight shell\"><table><tr><td class=\"code\"><pre><span class=\"line\">yum install -y openresty</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>å¯åŠ¨</li>\n</ul>\n<figure class=\"highlight shell\"><table><tr><td class=\"code\"><pre><span class=\"line\">systemctl start openresty</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>æ•ˆæœ</li>\n</ul>\n<p><img src=\"https://z201.oss-cn-shanghai.aliyuncs.com/JavaNote/20211208162209.png\"></p>\n<ul>\n<li>å®‰è£…openrestyå‘½ä»¤è¡Œå·¥å…·</li>\n</ul>\n<figure class=\"highlight shell\"><table><tr><td class=\"code\"><pre><span class=\"line\">yum install -y openresty-resty</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>æ£€æŸ¥å½“å‰å®‰è£…çš„openresty</li>\n</ul>\n<figure class=\"highlight shell\"><table><tr><td class=\"code\"><pre><span class=\"line\">/usr/local/openresty/bin/openresty -V</span><br></pre></td></tr></table></figure>\n\n","categories":["Linuxè¿ç»´"],"tags":["Centos7","Linux","Openresty"]},{"title":"æŸ¥ç¼ºè¡¥æ¼-Jvm","url":"/posts/1071592781/","content":"<blockquote>\n<p>æœ¬ç« æ˜¯æ•´ç†çŸ¥è¯†å†…å®¹ï¼Œä¸ºå¼ºåŒ–çŸ¥è¯†é•¿æœŸæ›´æ–°ã€‚</p>\n</blockquote>\n<h2 id=\"JVM\"><a href=\"#JVM\" class=\"headerlink\" title=\"JVM\"></a>JVM</h2><blockquote>\n<p>JVM å…¨ç§° Java Virtual Machineï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬è€³ç†Ÿèƒ½è¯¦çš„ Java è™šæ‹Ÿæœºã€‚JVM ä¼šç¿»è¯‘æ‰§è¡Œ Java å­—èŠ‚ç ï¼Œç„¶åè°ƒç”¨çœŸæ­£çš„æ“ä½œç³»ç»Ÿå‡½æ•°ï¼Œè¿™äº›æ“ä½œç³»ç»Ÿå‡½æ•°æ˜¯ä¸å¹³å°æ¯æ¯ç›¸å…³çš„ã€‚</p>\n</blockquote>\n<p><img src=\"https://z201.oss-cn-shanghai.aliyuncs.com/JavaNote/20211124021707.png\"></p>\n<ul>\n<li>å¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œé€šè¿‡JVMï¼ŒJavaå®ç°äº†è·¨å¹³å°ã€åªè¦classæ–‡ä»¶èƒ½æ­£å¸¸æ‰§è¡Œï¼Œå°±å¯ä»¥åœ¨å…¶ä»–ç³»ç»Ÿä¸Šé¢è¿è¡Œã€‚ JVM ä¸æ“ä½œç³»ç»Ÿä¹‹é—´çš„å…³ç³»ï¼šJVM ä¸Šæ‰¿å¼€å‘è¯­è¨€ï¼Œä¸‹æ¥æ“ä½œç³»ç»Ÿï¼Œå®ƒçš„ä¸­é—´æ¥å£å°±æ˜¯å­—èŠ‚ç ã€‚</li>\n</ul>\n<h3 id=\"JDK\"><a href=\"#JDK\" class=\"headerlink\" title=\"JDK\"></a>JDK</h3><ul>\n<li>JDK çš„å…¨æ‹¼ï¼ŒJava Development Kit JVMã€JREã€JDK å®ƒä»¬ä¸‰è€…ä¹‹é—´çš„å…³ç³»ï¼Œå¯ä»¥ç”¨ä¸€ä¸ªåŒ…å«å…³ç³»è¡¨ç¤ºã€‚</li>\n</ul>\n<p><img src=\"https://z201.oss-cn-shanghai.aliyuncs.com/JavaNote/20211124021902.png\"></p>\n<h2 id=\"JVMå­—èŠ‚ç \"><a href=\"#JVMå­—èŠ‚ç \" class=\"headerlink\" title=\"JVMå­—èŠ‚ç \"></a>JVMå­—èŠ‚ç </h2><blockquote>\n<p>å¯¹äº Java å¼€å‘è€…æ¥è¯´ï¼Œè™šæ‹Ÿæœºã€å­—èŠ‚ç å°±æ˜¯å…¶åº•å±‚çŸ¥è¯†ã€‚<code>Java Byte</code> ç”±å•å­—èŠ‚ <code>bute</code>çš„æŒ‡ä»¤ç»„æˆ,ç†è®ºä¸Šæœ€å¤šæ”¯æŒ256ä¸ªæ“ä½œç ã€‚å®é™…ä¸Šåªä½¿ç”¨äº†200ä¸ªå·¦å³æ“ä½œç ã€‚</p>\n</blockquote>\n<h3 id=\"ç¼–è¯‘javaæ–‡ä»¶\"><a href=\"#ç¼–è¯‘javaæ–‡ä»¶\" class=\"headerlink\" title=\"ç¼–è¯‘javaæ–‡ä»¶\"></a>ç¼–è¯‘javaæ–‡ä»¶</h3><blockquote>\n<p>è¿™é‡Œé‡‡ç”¨xxd xx.java </p>\n</blockquote>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">package</span> cn.z201.jvm;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Testing</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String[] args)</span></span>&#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">\"Hello world!\"</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>é€šè¿‡javacç¼–è¯‘æˆclassæ–‡ä»¶ã€åœ¨ç”¨xxdæŸ¥çœ‹ç¼–è¯‘åçš„16è¿›åˆ¶classæ–‡ä»¶ã€‚</li>\n</ul>\n<figure class=\"highlight shell\"><table><tr><td class=\"code\"><pre><span class=\"line\">âœ  jvm git:(master) âœ— javac Testing.java </span><br><span class=\"line\">âœ  jvm git:(master) âœ— xxd Testing.class </span><br><span class=\"line\">00000000: cafe babe 0000 0034 001d 0a00 0600 0f09  .......4........</span><br><span class=\"line\">00000010: 0010 0011 0800 120a 0013 0014 0700 1507  ................</span><br><span class=\"line\">00000020: 0016 0100 063c 696e 6974 3e01 0003 2829  .....&lt;init&gt;...()</span><br><span class=\"line\">00000030: 5601 0004 436f 6465 0100 0f4c 696e 654e  V...Code...LineN</span><br><span class=\"line\">00000040: 756d 6265 7254 6162 6c65 0100 046d 6169  umberTable...mai</span><br><span class=\"line\">00000050: 6e01 0016 285b 4c6a 6176 612f 6c61 6e67  n...([Ljava/lang</span><br><span class=\"line\">00000060: 2f53 7472 696e 673b 2956 0100 0a53 6f75  /String;)V...Sou</span><br><span class=\"line\">00000070: 7263 6546 696c 6501 000c 5465 7374 696e  rceFile...Testin</span><br><span class=\"line\">00000080: 672e 6a61 7661 0c00 0700 0807 0017 0c00  g.java..........</span><br><span class=\"line\">00000090: 1800 1901 000c 4865 6c6c 6f20 776f 726c  ......Hello worl</span><br><span class=\"line\">000000a0: 6421 0700 1a0c 001b 001c 0100 1363 6e2f  d!...........cn/</span><br><span class=\"line\">000000b0: 7a32 3031 2f6a 766d 2f54 6573 7469 6e67  z201/jvm/Testing</span><br><span class=\"line\">000000c0: 0100 106a 6176 612f 6c61 6e67 2f4f 626a  ...java/lang/Obj</span><br><span class=\"line\">000000d0: 6563 7401 0010 6a61 7661 2f6c 616e 672f  ect...java/lang/</span><br><span class=\"line\">000000e0: 5379 7374 656d 0100 036f 7574 0100 154c  System...out...L</span><br><span class=\"line\">000000f0: 6a61 7661 2f69 6f2f 5072 696e 7453 7472  java/io/PrintStr</span><br><span class=\"line\">00000100: 6561 6d3b 0100 136a 6176 612f 696f 2f50  eam;...java/io/P</span><br><span class=\"line\">00000110: 7269 6e74 5374 7265 616d 0100 0770 7269  rintStream...pri</span><br><span class=\"line\">00000120: 6e74 6c6e 0100 1528 4c6a 6176 612f 6c61  ntln...(Ljava/la</span><br><span class=\"line\">00000130: 6e67 2f53 7472 696e 673b 2956 0021 0005  ng/String;)V.!..</span><br><span class=\"line\">00000140: 0006 0000 0000 0002 0001 0007 0008 0001  ................</span><br><span class=\"line\">00000150: 0009 0000 001d 0001 0001 0000 0005 2ab7  ..............*.</span><br><span class=\"line\">00000160: 0001 b100 0000 0100 0a00 0000 0600 0100  ................</span><br><span class=\"line\">00000170: 0000 0500 0900 0b00 0c00 0100 0900 0000  ................</span><br><span class=\"line\">00000180: 2500 0200 0100 0000 09b2 0002 1203 b600  %...............</span><br><span class=\"line\">00000190: 04b1 0000 0001 000a 0000 000a 0002 0000  ................</span><br><span class=\"line\">000001a0: 0008 0008 0009 0001 000d 0000 0002 000e  ................</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>ç¼–è¯‘åå®Œå…¨çœ‹ä¸æ‡‚ï¼Œjdkå®é™…ä¸Šæä¾›äº†ä¸“é—¨ç”¨æ¥è§£æç±»æ–‡ä»¶çš„å·¥å…·<code>javap</code></li>\n</ul>\n<h3 id=\"javap\"><a href=\"#javap\" class=\"headerlink\" title=\"javap\"></a>javap</h3><blockquote>\n<p>javapèƒ½å¯¹ç»™å®šçš„classæ–‡ä»¶æä¾›çš„å­—èŠ‚ä»£ç è¿›è¡Œåç¼–è¯‘</p>\n</blockquote>\n<ul>\n<li>ä½¿ç”¨æ ¼å¼</li>\n</ul>\n<figure class=\"highlight shell\"><table><tr><td class=\"code\"><pre><span class=\"line\">javap &lt;options&gt; &lt;classes&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">  -help  --help  -?        è¾“å‡ºæ­¤ç”¨æ³•æ¶ˆæ¯</span><br><span class=\"line\">  -version                 ç‰ˆæœ¬ä¿¡æ¯</span><br><span class=\"line\">  -v  -verbose             è¾“å‡ºé™„åŠ ä¿¡æ¯</span><br><span class=\"line\">  -l                       è¾“å‡ºè¡Œå·å’Œæœ¬åœ°å˜é‡è¡¨</span><br><span class=\"line\">  -public                  ä»…æ˜¾ç¤ºå…¬å…±ç±»å’Œæˆå‘˜</span><br><span class=\"line\">  -protected               æ˜¾ç¤ºå—ä¿æŠ¤çš„/å…¬å…±ç±»å’Œæˆå‘˜</span><br><span class=\"line\">  -package                 æ˜¾ç¤ºç¨‹åºåŒ…/å—ä¿æŠ¤çš„/å…¬å…±ç±»</span><br><span class=\"line\">                           å’Œæˆå‘˜ (é»˜è®¤)</span><br><span class=\"line\">  -p  -private             æ˜¾ç¤ºæ‰€æœ‰ç±»å’Œæˆå‘˜</span><br><span class=\"line\">  -c                       å¯¹ä»£ç è¿›è¡Œåæ±‡ç¼–</span><br><span class=\"line\">  -s                       è¾“å‡ºå†…éƒ¨ç±»å‹ç­¾å</span><br><span class=\"line\">  -sysinfo                 æ˜¾ç¤ºæ­£åœ¨å¤„ç†çš„ç±»çš„</span><br><span class=\"line\">                           ç³»ç»Ÿä¿¡æ¯ (è·¯å¾„, å¤§å°, æ—¥æœŸ, MD5 æ•£åˆ—)</span><br><span class=\"line\">  -constants               æ˜¾ç¤ºæœ€ç»ˆå¸¸é‡</span><br><span class=\"line\">  -classpath &lt;path&gt;        æŒ‡å®šæŸ¥æ‰¾ç”¨æˆ·ç±»æ–‡ä»¶çš„ä½ç½®</span><br><span class=\"line\">  -cp &lt;path&gt;               æŒ‡å®šæŸ¥æ‰¾ç”¨æˆ·ç±»æ–‡ä»¶çš„ä½ç½®</span><br><span class=\"line\">  -bootclasspath &lt;path&gt;    è¦†ç›–å¼•å¯¼ç±»æ–‡ä»¶çš„ä½ç½®</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>æ¼”ç¤ºä¸‹ä¸Šé¢çš„ç±»</li>\n</ul>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\">javap -c -s -v Testing</span><br><span class=\"line\"></span><br><span class=\"line\">Classfile /Users/z201/word/z201.github.io.code/java-learning/learn-jvm/src/test/java/cn/z201/jvm/Testing<span class=\"class\">.<span class=\"keyword\">class</span></span></span><br><span class=\"line\"><span class=\"class\">  <span class=\"title\">Last</span> <span class=\"title\">modified</span> 2020-03-01</span>; size <span class=\"number\">432</span> bytes</span><br><span class=\"line\">  MD5 checksum b50deb6f6e7df9bb99585bc71b92d39b</span><br><span class=\"line\">  Compiled from <span class=\"string\">\"Testing.java\"</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">cn</span>.<span class=\"title\">z201</span>.<span class=\"title\">jvm</span>.<span class=\"title\">Testing</span></span></span><br><span class=\"line\">  minor version: 0</span><br><span class=\"line\">  major version: <span class=\"number\">52</span></span><br><span class=\"line\">  flags: ACC_PUBLIC, ACC_SUPER</span><br><span class=\"line\">Constant pool:</span><br><span class=\"line\">   #1 = Methodref          #6.#15         // java/lang/Object.\"&lt;init&gt;\":()V</span><br><span class=\"line\">   #2 = Fieldref           #16.#17        // java/lang/System.out:Ljava/io/PrintStream;</span><br><span class=\"line\">   #3 = String             #18            // Hello world!</span><br><span class=\"line\">   #4 = Methodref          #19.#20        // java/io/PrintStream.println:(Ljava/lang/String;)V</span><br><span class=\"line\">   #5 = Class              #21            // cn/z201/jvm/Testing</span><br><span class=\"line\">   #6 = Class              #22            // java/lang/Object</span><br><span class=\"line\">   #7 = Utf8               &lt;init&gt;</span><br><span class=\"line\">   #8 = Utf8               ()V</span><br><span class=\"line\">   #9 = Utf8               Code</span><br><span class=\"line\">  #10 = Utf8               LineNumberTable</span><br><span class=\"line\">  #11 = Utf8               main</span><br><span class=\"line\">  #12 = Utf8               ([Ljava/lang/String;)V</span><br><span class=\"line\">  #13 = Utf8               SourceFile</span><br><span class=\"line\">  #14 = Utf8               Testing.java</span><br><span class=\"line\">  #15 = NameAndType        #7:#8          // \"&lt;init&gt;\":()V</span><br><span class=\"line\">  #16 = Class              #23            // java/lang/System</span><br><span class=\"line\">  #17 = NameAndType        #24:#25        // out:Ljava/io/PrintStream;</span><br><span class=\"line\">  #18 = Utf8               Hello world!</span><br><span class=\"line\">  #19 = Class              #26            // java/io/PrintStream</span><br><span class=\"line\">  #20 = NameAndType        #27:#28        // println:(Ljava/lang/String;)V</span><br><span class=\"line\">  #21 = Utf8               cn/z201/jvm/Testing</span><br><span class=\"line\">  #22 = Utf8               java/lang/Object</span><br><span class=\"line\">  #23 = Utf8               java/lang/System</span><br><span class=\"line\">  #24 = Utf8               out</span><br><span class=\"line\">  #25 = Utf8               Ljava/io/PrintStream;</span><br><span class=\"line\">  #26 = Utf8               java/io/PrintStream</span><br><span class=\"line\">  #27 = Utf8               println</span><br><span class=\"line\">  #28 = Utf8               (Ljava/lang/String;)V</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">  <span class=\"keyword\">public</span> cn.z201.jvm.Testing();</span><br><span class=\"line\">    descriptor: ()V</span><br><span class=\"line\">    flags: ACC_PUBLIC</span><br><span class=\"line\">    Code:</span><br><span class=\"line\">      stack=<span class=\"number\">1</span>, locals=<span class=\"number\">1</span>, args_size=<span class=\"number\">1</span></span><br><span class=\"line\">         <span class=\"number\">0</span>: aload_0</span><br><span class=\"line\">         1: invokespecial #1                  // Method java/lang/Object.\"&lt;init&gt;\":()V</span><br><span class=\"line\">         <span class=\"number\">4</span>: <span class=\"keyword\">return</span></span><br><span class=\"line\">      LineNumberTable:</span><br><span class=\"line\">        line <span class=\"number\">5</span>: <span class=\"number\">0</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(java.lang.String[])</span></span>;</span><br><span class=\"line\">    descriptor: ([Ljava/lang/String;)V</span><br><span class=\"line\">    flags: ACC_PUBLIC, ACC_STATIC</span><br><span class=\"line\">    Code:</span><br><span class=\"line\">      stack=<span class=\"number\">2</span>, locals=<span class=\"number\">1</span>, args_size=<span class=\"number\">1</span></span><br><span class=\"line\">         0: getstatic     #2                  // Field java/lang/System.out:Ljava/io/PrintStream;</span><br><span class=\"line\">         3: ldc           #3                  // String Hello world!</span><br><span class=\"line\">         5: invokevirtual #4                  // Method java/io/PrintStream.println:(Ljava/lang/String;)V</span><br><span class=\"line\">         <span class=\"number\">8</span>: <span class=\"keyword\">return</span></span><br><span class=\"line\">      LineNumberTable:</span><br><span class=\"line\">        line <span class=\"number\">8</span>: <span class=\"number\">0</span></span><br><span class=\"line\">        line <span class=\"number\">9</span>: <span class=\"number\">8</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\">SourceFile: <span class=\"string\">\"Testing.java\"</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"IDEA-bytecode-viewer\"><a href=\"#IDEA-bytecode-viewer\" class=\"headerlink\" title=\"IDEA bytecode viewer\"></a>IDEA bytecode viewer</h3><blockquote>\n<p>jclasslib is a bytecode viewer for Java class files</p>\n</blockquote>\n<ul>\n<li>åœ¨pluginsä¸­æœç´¢jclasslib bytecode viewer</li>\n<li>å®‰è£…é‡å¯IDEAåï¼Œç¼–è¯‘é¡¹ç›®ä»£ç (run ä¸€æ¬¡)é€‰ä¸­ä»£ç æ–‡ä»¶ view èœå•ä¸­æœ‰ bytecode viewer é€‰é¡¹ã€‚</li>\n</ul>\n<p><img src=\"https://z201.oss-cn-shanghai.aliyuncs.com/JavaNote/20211124135425.png\"></p>\n<ul>\n<li>IDEA æ˜¾ç¤ºçš„å†…å®¹æ›´åŠ å®¹æ˜“é˜…è¯»ã€‚</li>\n</ul>\n<h2 id=\"JVMçš„å†…å­˜å¸ƒå±€\"><a href=\"#JVMçš„å†…å­˜å¸ƒå±€\" class=\"headerlink\" title=\"JVMçš„å†…å­˜å¸ƒå±€\"></a>JVMçš„å†…å­˜å¸ƒå±€</h2><p><img src=\"https://z201.oss-cn-shanghai.aliyuncs.com/JavaNote/JVM%E5%86%85%E5%AD%98%E5%B8%83%E5%B1%80.png\"></p>\n<h3 id=\"å †\"><a href=\"#å †\" class=\"headerlink\" title=\"å †\"></a>å †</h3><ul>\n<li><p>å †ï¼ˆJava Heapï¼‰ ä¹Ÿå« Java å †æˆ–è€…æ˜¯ GC å †ï¼Œå®ƒæ˜¯ä¸€ä¸ªçº¿ç¨‹å…±äº«çš„å†…å­˜åŒºåŸŸï¼Œä¹Ÿæ˜¯ JVM ä¸­å ç”¨å†…å­˜æœ€å¤§çš„ä¸€å—åŒºåŸŸï¼ŒJava ä¸­æ‰€æœ‰çš„å¯¹è±¡éƒ½å­˜å‚¨åœ¨è¿™é‡Œã€‚</p>\n<ul>\n<li><p>å­˜å‚¨çš„æ˜¯æˆ‘ä»¬<strong>new</strong>æ¥çš„å¯¹è±¡ï¼Œä¸å­˜æ”¾åŸºæœ¬ç±»å‹å’Œå¯¹è±¡å¼•ç”¨ã€‚</p>\n</li>\n<li><p>ç”±äºåˆ›å»ºäº†å¤§é‡çš„å¯¹è±¡ï¼Œåƒåœ¾å›æ”¶å™¨ä¸»è¦å·¥ä½œåœ¨è¿™å—åŒºåŸŸã€‚</p>\n</li>\n<li><p>çº¿ç¨‹å…±äº«åŒºåŸŸï¼Œå› æ­¤æ˜¯çº¿ç¨‹ä¸å®‰å…¨çš„ã€‚</p>\n</li>\n<li><p>èƒ½å¤Ÿå‘ç”Ÿå†…å­˜æº¢å‡ºï¼Œä¸»è¦æœ‰OutOfMemoryErrorå’ŒStackOverflowErrorã€‚</p>\n</li>\n<li><p>é‚£ä¹ˆä»€ä¹ˆæ—¶å€™å‘ç”ŸOutOfMemoryErrorï¼Œä»€ä¹ˆæ—¶å€™å‘ç”ŸStackOverflowErrorï¼Ÿè™šæ‹Ÿæœºåœ¨æ‰©å±•æ ˆæ—¶æ— æ³•ç”³è¯·åˆ°è¶³å¤Ÿçš„å†…å­˜ç©ºé—´ï¼Œ<strong>å°†æŠ›å‡ºOutOfMemoryErrorå¼‚å¸¸</strong>ï¼Œçº¿ç¨‹è¯·æ±‚çš„æ ˆæ·±åº¦è¶…è¿‡è™šæ‹Ÿæœºæ‰€å…è®¸çš„æœ€å¤§æ·±åº¦ï¼Œ<strong>å°†æŠ›å‡ºStackOverflowErrorå¼‚å¸¸</strong>ã€‚</p>\n</li>\n<li><p>Javaå †åŒºè¿˜å¯ä»¥åˆ’åˆ†ä¸º<strong>æ–°ç”Ÿä»£å’Œè€å¹´ä»£</strong>ï¼Œæ–°ç”Ÿä»£åˆå¯ä»¥è¿›ä¸€æ­¥åˆ’åˆ†ä¸º<strong>EdenåŒºã€Survivor 1åŒºã€Survivor 2åŒº</strong>ã€‚å…·ä½“æ¯”ä¾‹å‚æ•°çš„è¯ï¼Œå¯ä»¥çœ‹ä¸€ä¸‹ä¸‹é¢è¿™å¼ å›¾ã€‚</p>\n</li>\n</ul>\n<p><img src=\"https://z201.oss-cn-shanghai.aliyuncs.com/JavaNote/Java%E5%A0%86%E7%9A%84%E5%88%92%E5%88%86.png\"></p>\n<ul>\n<li>åˆç†è®¾ç½®è€å¹´ä»£å’Œæ–°ç”Ÿä»£çš„ç©ºé—´æ¯”ä¾‹å¯¹ JVM åƒåœ¾å›æ”¶çš„æ€§èƒ½æœ‰å¾ˆå¤§å½±å“ï¼ŒJVM è®¾ç½®è€å¹´ä»£æ–°ç”Ÿä»£æ¯”ä¾‹çš„å‚æ•°æ˜¯ -XX:NewRatioã€‚</li>\n</ul>\n</li>\n</ul>\n<h4 id=\"æ–°ç”Ÿä»£\"><a href=\"#æ–°ç”Ÿä»£\" class=\"headerlink\" title=\"æ–°ç”Ÿä»£\"></a>æ–°ç”Ÿä»£</h4><ul>\n<li>æ–°ç”Ÿä»£æ˜¯ç±»çš„è¯ç”Ÿã€æˆé•¿ã€æ¶ˆäº¡çš„åŒºåŸŸï¼Œä¸€ä¸ªç±»åœ¨è¿™é‡Œäº§ç”Ÿã€åº”ç”¨ï¼Œæœ€åè¢«åƒåœ¾å›æ”¶å™¨æ”¶é›†ï¼Œç»“æŸç”Ÿå‘½ã€‚æ–°ç”ŸåŒºåˆåˆ†ä¸ºä¸¤éƒ¨åˆ†ï¼šä¼Šç”¸åŒºï¼ˆEden spaceï¼‰å’Œå¹¸å­˜åŒºï¼ˆSurvivor paceï¼‰ï¼Œç»å¤§å¤šæ•°çš„ç±»éƒ½æ˜¯åœ¨ä¼Šç”¸åŒºè¢« new å‡ºæ¥çš„ã€‚å¹¸å­˜åŒºæœ‰ä¸¤ä¸ªï¼š0åŒºï¼ˆfrom Survivor 0 spaceï¼‰å’Œ 1åŒºï¼ˆto Survivor 1 spaceï¼‰ã€‚ä¸¤ä¸ªSurvivor åŒºç©ºé—´ä¸€æ ·å¤§ï¼Œå½“Eden åŒºæ»¡äº†ï¼Œåˆ™ä¼šè§¦å‘æ™®é€šGCï¼Œè‹¥ Eden åŒºä¸­çš„å¯¹è±¡ç»è¿‡åƒåœ¾å›æ”¶æ²¡æœ‰è¢«å›æ”¶æ‰ï¼Œä¼šå°†Eden åŒºä¸­çš„å¹¸å­˜å¯¹è±¡ç§»åŠ¨åˆ°å¹¸å­˜0åŒºã€‚è‹¥å¹¸å­˜0åŒºä¹Ÿæ»¡äº†ï¼Œå†å¯¹è¯¥åŒºåŸŸè¿›è¡Œåƒåœ¾å›æ”¶ï¼Œç„¶åç§»åŠ¨åˆ°1åŒºï¼Œç„¶åä¹‹å‰çš„0åŒºå°†ç½®ä¸ºç©ºï¼Œæ²¡æœ‰ä»»ä½•æ•°æ®ã€‚æ˜¾ç„¶ï¼ŒSurvivor åŒºåªæ˜¯å¢åŠ äº†å¯¹è±¡åœ¨å¹´è½»ä»£ä¸­é€—ç•™çš„æ—¶é—´ï¼Œå¢åŠ äº†è¢«åƒåœ¾å›æ”¶çš„å¯èƒ½æ€§ã€‚é‚£å¦‚æœ1åŒºä¹Ÿæ»¡äº†å‘¢ï¼Ÿå†ç§»åŠ¨åˆ°å…»è€åŒºã€‚è‹¥å…»è€åŒºä¹Ÿæ»¡äº†ï¼Œé‚£ä¹ˆè¿™æ—¶å€™å°†äº§ç”ŸFull GCï¼Œè¿›è¡Œå…»è€åŒºçš„å†…å­˜æ¸…ç†ã€‚è‹¥å…»è€åŒºæ‰§è¡ŒFull GC ä¹‹åå‘ç°ä¾ç„¶æ— æ³•è¿›è¡Œå¯¹è±¡çš„ä¿å­˜ï¼Œå°±ä¼šäº§ç”Ÿ OOM å¼‚å¸¸â€œOutOfMemoryErrorâ€ã€‚</li>\n<li>æ¯æ¬¡åƒåœ¾å›æ”¶æ—¶éƒ½æœ‰å¤§é‡çš„å¯¹è±¡éœ€è¦è¢«å›æ”¶ã€‚åƒåœ¾å›æ”¶å™¨åœ¨æ–°ç”Ÿä»£é‡‡ç”¨çš„æ”¶é›†ç®—æ³•æ˜¯Copying(å¤åˆ¶)æ–¹æ³•ï¼šå®ƒå°†å¯ç”¨å†…å­˜æŒ‰å®¹é‡åˆ’åˆ†ä¸ºå¤§å°ç›¸ç­‰çš„ä¸¤å—ï¼Œæ¯æ¬¡åªä½¿ç”¨å…¶ä¸­çš„ä¸€å—ã€‚å½“è¿™ä¸€å—é¢å¯¹å†…å­˜ç”¨å®Œäº†ï¼Œå°±å°†è¿˜å­˜æ´»çš„å¯¹è±¡å¤åˆ¶åˆ°å¦å¤–ä¸€å—ï¼Œç„¶åå†æŠŠå·²ä½¿ç”¨çš„å†…å­˜ç©ºé—´ä¸€æ¬¡æ¸…ç†æ‰ã€‚ç”±äºæ–°ç”Ÿä»£æœ‰æ¯æ¬¡åƒåœ¾å›æ”¶æ—¶éƒ½æœ‰å¤§é‡çš„å¯¹è±¡éœ€è¦è¢«å›æ”¶çš„ç‰¹ç‚¹ï¼Œæ‰€ä»¥é‡‡ç”¨Copyingç®—æ³•ï¼Œå¤åˆ¶çš„å­˜æ´»å¯¹è±¡è¾ƒå°‘ï¼Œæ€§èƒ½æ¯”è¾ƒå¥½ã€‚ä½†æ˜¯Copyingç®—æ³•è¿˜æ˜¯æœ‰ç¼ºé™·çš„ï¼Œé‚£å°±æ˜¯å†…å­˜çš„ä½¿ç”¨ç‡åªæœ‰ä¸€åŠã€‚</li>\n</ul>\n<h4 id=\"OutOfMemoryError\"><a href=\"#OutOfMemoryError\" class=\"headerlink\" title=\"OutOfMemoryError\"></a>OutOfMemoryError</h4><figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\">java.lang.OutOfMemoryError: Java heap space</span><br></pre></td></tr></table></figure>\n\n<ol>\n<li>Java è™šæ‹Ÿæœºçš„å †å†…å­˜è®¾ç½®ä¸å¤Ÿï¼Œå¯ä»¥é€šè¿‡-Xmsã€-Xmxæ¥è°ƒæ•´</li>\n<li>ä»£ç ä¸­åˆ›å»ºäº†å¤§é‡å¤§å¯¹è±¡ï¼Œå¹¶ä¸”é•¿æ—¶é—´ä¸èƒ½è¢«åƒåœ¾å›æ”¶å™¨æ”¶é›†</li>\n<li>å†…å­˜åŠ è½½çš„æ•°æ®é‡å¤ªå¤§ï¼šä¸€æ¬¡æ€§ä»æ•°æ®åº“å–å¤ªå¤šæ•°æ®</li>\n<li>é›†åˆç±»ä¸­æœ‰å¯¹å¯¹è±¡çš„å¼•ç”¨ï¼Œä½¿ç”¨åæœªæ¸…ç©ºï¼ŒGCä¸èƒ½è¿›è¡Œå›æ”¶</li>\n<li>ä»£ç ä¸­å­˜åœ¨å¾ªç¯äº§ç”Ÿè¿‡å¤šçš„é‡å¤å¯¹è±¡</li>\n</ol>\n<h3 id=\"è€å¹´ä»£\"><a href=\"#è€å¹´ä»£\" class=\"headerlink\" title=\"è€å¹´ä»£\"></a>è€å¹´ä»£</h3><ul>\n<li>å¹´è½»ä»£ä¸­ç»è¿‡åƒåœ¾å›æ”¶æ²¡æœ‰å›æ”¶æ‰çš„å¯¹è±¡å°†è¢«Copyåˆ°å¹´è€ä»£ã€‚</li>\n<li>æ¯æ¬¡åƒåœ¾å›æ”¶æ—¶åªæœ‰å°‘é‡çš„å¯¹è±¡éœ€è¦è¢«å›æ”¶ã€‚åƒåœ¾å›æ”¶å™¨åœ¨è€å¹´ä»£é‡‡ç”¨çš„æ”¶é›†ç®—æ³•æ˜¯ Mark-Compac tç®—æ³•ï¼šä¸ºäº†è§£å†³Copyingç®—æ³•çš„ç¼ºé™·ï¼Œå……åˆ†åˆ©ç”¨å†…å­˜ç©ºé—´ï¼Œæå‡ºäº†Mark-Compactç®—æ³•ã€‚å®ƒå…ˆå°†éœ€è¦å›æ”¶çš„å¯¹è±¡è¿›è¡Œæ ‡è®°ï¼Œç„¶åå°†å­˜æ´»å¯¹è±¡éƒ½å‘ä¸€ç«¯ç§»åŠ¨ï¼Œç„¶åæ¸…ç†æ‰ç«¯è¾¹ç•Œä»¥å¤–çš„å†…å­˜ã€‚</li>\n</ul>\n<h4 id=\"FULL-GC\"><a href=\"#FULL-GC\" class=\"headerlink\" title=\"FULL GC\"></a>FULL GC</h4><ul>\n<li>å½“è€å¹´ä»£ç©ºé—´æ»¡äº†ï¼Œå°±ä¼šå¯¹æ–°ç”Ÿä»£å’Œè€å¹´ä»£ç©ºé—´è¿›è¡Œä¸€æ¬¡å…¨é‡åƒåœ¾å›æ”¶ï¼Œå³Full GCã€‚</li>\n</ul>\n<h3 id=\"æ–¹æ³•åŒº\"><a href=\"#æ–¹æ³•åŒº\" class=\"headerlink\" title=\"æ–¹æ³•åŒº\"></a>æ–¹æ³•åŒº</h3><ul>\n<li>æ–¹æ³•åŒºï¼ˆMethod Areaï¼‰ ä¹Ÿè¢«ç§°ä¸ºéå †åŒºï¼Œç”¨äºå’Œâ€œJava å †â€çš„æ¦‚å¿µè¿›è¡ŒåŒºåˆ†ï¼Œå®ƒä¹Ÿæ˜¯çº¿ç¨‹å…±äº«çš„å†…å­˜åŒºåŸŸï¼Œç”¨äºå­˜å‚¨å·²ç»è¢« JVM åŠ è½½çš„ç±»å‹ä¿¡æ¯ã€å¸¸é‡ã€é™æ€å˜é‡ã€ä»£ç ç¼“å­˜ç­‰æ•°æ®ã€‚    </li>\n</ul>\n<h4 id=\"è¿è¡Œæ—¶å¸¸é‡æ± \"><a href=\"#è¿è¡Œæ—¶å¸¸é‡æ± \" class=\"headerlink\" title=\"è¿è¡Œæ—¶å¸¸é‡æ± \"></a>è¿è¡Œæ—¶å¸¸é‡æ± </h4><ul>\n<li>Run-Time Constant Poolè¿™æ˜¯æ–¹æ³•åŒºçš„ä¸€éƒ¨åˆ†ï¼Œç‰ˆæœ¬å·ã€å­—æ®µã€æ–¹æ³•ã€è¶…ç±»ã€æ¥å£ç­‰å„ç§ä¿¡æ¯ï¼Œè¿˜æœ‰ä¸€é¡¹ä¿¡æ¯å°±æ˜¯å¸¸é‡æ± ã€‚Java çš„å¸¸é‡æ± å¯ä»¥å­˜æ”¾å„ç§å¸¸é‡ä¿¡æ¯ï¼Œä¸ç®¡æ˜¯ç¼–è¯‘æœŸç”Ÿæˆçš„å„ç§å­—é¢é‡ï¼Œè¿˜æ˜¯éœ€è¦åœ¨è¿è¡Œæ—¶å†³å®šçš„ç¬¦å·å¼•ç”¨ã€‚</li>\n</ul>\n<h3 id=\"ç¨‹åºè®¡æ•°å™¨\"><a href=\"#ç¨‹åºè®¡æ•°å™¨\" class=\"headerlink\" title=\"ç¨‹åºè®¡æ•°å™¨\"></a>ç¨‹åºè®¡æ•°å™¨</h3><ul>\n<li>ç¨‹åºè®¡æ•°å™¨ï¼ˆProgram Counter Registerï¼‰ çº¿ç¨‹ç‹¬æœ‰ä¸€å—å¾ˆå°çš„å†…å­˜åŒºåŸŸï¼Œä¿å­˜å½“å‰çº¿ç¨‹æ‰€æ‰§è¡Œå­—èŠ‚ç çš„ä½ç½®ï¼ŒåŒ…æ‹¬æ­£åœ¨æ‰§è¡Œçš„æŒ‡ä»¤ã€è·³è½¬ã€åˆ†æ”¯ã€å¾ªç¯ã€å¼‚å¸¸å¤„ç†ç­‰ã€‚</li>\n</ul>\n<h3 id=\"è™šæ‹Ÿæœºæ ˆ\"><a href=\"#è™šæ‹Ÿæœºæ ˆ\" class=\"headerlink\" title=\"è™šæ‹Ÿæœºæ ˆ\"></a>è™šæ‹Ÿæœºæ ˆ</h3><ul>\n<li><p>è™šæ‹Ÿæœºæ ˆä¹Ÿå« Java è™šæ‹Ÿæœºæ ˆï¼ˆJava Virtual Machine Stackï¼‰ï¼Œå’Œç¨‹åºè®¡æ•°å™¨ç›¸åŒå®ƒä¹Ÿæ˜¯çº¿ç¨‹ç‹¬äº«çš„ï¼Œç”¨æ¥æè¿° Java æ–¹æ³•çš„æ‰§è¡Œï¼Œåœ¨æ¯ä¸ªæ–¹æ³•è¢«æ‰§è¡Œæ—¶å°±ä¼šåŒæ­¥åˆ›å»ºä¸€ä¸ªæ ˆå¸§ï¼Œç”¨æ¥å­˜å‚¨å±€éƒ¨å˜é‡è¡¨ã€æ“ä½œæ ˆã€åŠ¨æ€é“¾æ¥ã€æ–¹æ³•å‡ºå£ç­‰ä¿¡æ¯ã€‚å½“è°ƒç”¨æ–¹æ³•æ—¶æ‰§è¡Œå…¥æ ˆï¼Œè€Œæ–¹æ³•è¿”å›æ—¶æ‰§è¡Œå‡ºæ ˆã€‚</p>\n<ul>\n<li><p><strong>çº¿ç¨‹ç§æœ‰åŒºåŸŸï¼Œæ¯ä¸€ä¸ªçº¿ç¨‹éƒ½æœ‰ç‹¬äº«ä¸€ä¸ªè™šæ‹Ÿæœºæ ˆï¼Œå› æ­¤è¿™æ˜¯çº¿ç¨‹å®‰å…¨çš„åŒºåŸŸã€‚</strong></p>\n</li>\n<li><p>å­˜æ”¾åŸºæœ¬æ•°æ®ç±»å‹ä»¥åŠå¯¹è±¡çš„å¼•ç”¨ã€‚</p>\n</li>\n<li><p>æ¯ä¸€ä¸ªæ–¹æ³•æ‰§è¡Œçš„æ—¶å€™ä¼šåœ¨è™šæ‹Ÿæœºæ ˆä¸­åˆ›å»ºä¸€ä¸ªç›¸åº”æ ˆå¸§ï¼Œæ–¹æ³•æ‰§è¡Œå®Œæ¯•åè¯¥æ ˆå¸§å°±ä¼šè¢«é”€æ¯ã€‚<strong>æ–¹æ³•æ ˆå¸§æ˜¯ä»¥å…ˆè¿›åå‡ºçš„æ–¹å¼è™šæ‹Ÿæœºæ ˆçš„ã€‚</strong></p>\n</li>\n<li><p>æ¯ä¸€ä¸ªæ ˆå¸§åˆå¯ä»¥åˆ’åˆ†ä¸º<strong>å±€éƒ¨å˜é‡è¡¨ã€æ“ä½œæ•°æ ˆã€åŠ¨æ€é“¾æ¥ã€æ–¹æ³•å‡ºå£</strong>ä»¥åŠé¢å¤–çš„é™„åŠ ä¿¡æ¯ã€‚</p>\n<ul>\n<li>è¿™ä¸ªåŒºåŸŸå¯èƒ½æœ‰ä¸¤ç§å¼‚å¸¸ï¼šå¦‚æœçº¿ç¨‹è¯·æ±‚çš„æ ˆæ·±åº¦å¤§äºè™šæ‹Ÿæœºæ‰€å…è®¸çš„æ·±åº¦ï¼Œå°†æŠ›å‡ºStackOverflowErrorå¼‚å¸¸ï¼ˆé€šå¸¸æ˜¯é€’å½’å¯¼è‡´çš„ï¼‰ï¼›JVMåŠ¨æ€æ‰©å±•æ—¶æ— æ³•ç”³è¯·åˆ°è¶³å¤Ÿå†…å­˜åˆ™æŠ›å‡ºOutOfMemoryErrorå¼‚å¸¸ã€‚</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"æœ¬åœ°æ–¹æ³•æ ˆ\"><a href=\"#æœ¬åœ°æ–¹æ³•æ ˆ\" class=\"headerlink\" title=\"æœ¬åœ°æ–¹æ³•æ ˆ\"></a>æœ¬åœ°æ–¹æ³•æ ˆ</h3><ul>\n<li><p>æœ¬åœ°æ–¹æ³•æ ˆï¼ˆNative Method Stacksï¼‰ä¸è™šæ‹Ÿæœºæ ˆç±»ä¼¼ï¼Œå®ƒæ˜¯çº¿ç¨‹ç‹¬äº«çš„ï¼Œå¹¶ä¸”ä½œç”¨ä¹Ÿå’Œè™šæ‹Ÿæœºæ ˆç±»ä¼¼ã€‚åªä¸è¿‡è™šæ‹Ÿæœºæ ˆæ˜¯ä¸ºè™šæ‹Ÿæœºä¸­æ‰§è¡Œçš„ Java æ–¹æ³•æœåŠ¡çš„ï¼Œè€Œæœ¬åœ°æ–¹æ³•æ ˆåˆ™æ˜¯ä¸ºè™šæ‹Ÿæœºä½¿ç”¨åˆ°çš„æœ¬åœ°ï¼ˆNativeï¼‰æ–¹æ³•æœåŠ¡ã€‚</p>\n</li>\n<li><p>JVM çš„æ‰§è¡Œæµç¨‹æ˜¯ï¼Œé¦–å…ˆå…ˆæŠŠ Java ä»£ç ï¼ˆ.javaï¼‰è½¬åŒ–æˆå­—èŠ‚ç ï¼ˆ.classï¼‰ï¼Œç„¶åé€šè¿‡ç±»åŠ è½½å™¨å°†å­—èŠ‚ç åŠ è½½åˆ°å†…å­˜ä¸­ï¼Œæ‰€è°“çš„å†…å­˜ä¹Ÿå°±æ˜¯æˆ‘ä»¬ä¸Šé¢ä»‹ç»çš„è¿è¡Œæ—¶æ•°æ®åŒºï¼Œä½†å­—èŠ‚ç å¹¶ä¸æ˜¯å¯ä»¥ç›´æ¥äº¤ç»™æ“ä½œç³»ç»Ÿæ‰§è¡Œçš„æœºå™¨ç ï¼Œè€Œæ˜¯ä¸€å¥— JVM çš„æŒ‡ä»¤é›†ã€‚è¿™ä¸ªæ—¶å€™éœ€è¦ä½¿ç”¨ç‰¹å®šçš„å‘½ä»¤è§£æå™¨ä¹Ÿå°±æ˜¯æˆ‘ä»¬ä¿—ç§°çš„<strong>æ‰§è¡Œå¼•æ“ï¼ˆExecution Engineï¼‰</strong>å°†å­—èŠ‚ç ç¿»è¯‘æˆå¯ä»¥è¢«åº•å±‚æ“ä½œç³»ç»Ÿæ‰§è¡Œçš„æŒ‡ä»¤å†å»æ‰§è¡Œï¼Œè¿™æ ·å°±å®ç°äº†æ•´ä¸ª Java ç¨‹åºçš„è¿è¡Œï¼Œè¿™ä¹Ÿæ˜¯ JVM çš„æ•´ä½“æ‰§è¡Œæµç¨‹ã€‚</p>\n</li>\n</ul>\n<h3 id=\"ç±»çš„åŠ è½½æœºåˆ¶\"><a href=\"#ç±»çš„åŠ è½½æœºåˆ¶\" class=\"headerlink\" title=\"ç±»çš„åŠ è½½æœºåˆ¶\"></a>ç±»çš„åŠ è½½æœºåˆ¶</h3><blockquote>\n<p>ç¬¦å·å¼•ç”¨å’Œç›´æ¥å¼•ç”¨æœ‰ä¸€ä¸ªé‡è¦çš„åŒºåˆ«ï¼šä½¿ç”¨ç¬¦å·å¼•ç”¨æ—¶è¢«å¼•ç”¨çš„ç›®æ ‡ä¸ä¸€å®šå·²ç»åŠ è½½åˆ°å†…å­˜ä¸­ï¼›è€Œä½¿ç”¨ç›´æ¥å¼•ç”¨æ—¶ï¼Œå¼•ç”¨çš„ç›®æ ‡å¿…å®šå·²ç»å­˜åœ¨è™šæ‹Ÿæœºçš„å†…å­˜ä¸­äº†ã€‚</p>\n</blockquote>\n<ul>\n<li>ç±»çš„ç”Ÿå‘½å‘¨æœŸä¼šç»å†ä»¥ä¸‹ 7 ä¸ªé˜¶æ®µï¼š</li>\n</ul>\n<p><img src=\"https://z201.oss-cn-shanghai.aliyuncs.com/JavaNote/ClassLoading.png\"></p>\n<ol>\n<li>åŠ è½½é˜¶æ®µï¼ˆLoadingï¼‰</li>\n<li>éªŒè¯é˜¶æ®µï¼ˆVerificationï¼‰</li>\n<li>å‡†å¤‡é˜¶æ®µï¼ˆPreparationï¼‰</li>\n<li>è§£æé˜¶æ®µï¼ˆResolutionï¼‰</li>\n<li>åˆå§‹åŒ–é˜¶æ®µï¼ˆInitializationï¼‰</li>\n<li>ä½¿ç”¨é˜¶æ®µï¼ˆUsingï¼‰</li>\n<li>å¸è½½é˜¶æ®µï¼ˆUnloadingï¼‰</li>\n</ol>\n<h4 id=\"åŠ è½½é˜¶æ®µ\"><a href=\"#åŠ è½½é˜¶æ®µ\" class=\"headerlink\" title=\"åŠ è½½é˜¶æ®µ\"></a>åŠ è½½é˜¶æ®µ</h4><blockquote>\n<p>æ­¤é˜¶æ®µç”¨äºæŸ¥åˆ°ç›¸åº”çš„ç±»ï¼ˆé€šè¿‡ç±»åè¿›è¡ŒæŸ¥æ‰¾ï¼‰å¹¶å°†æ­¤ç±»çš„å­—èŠ‚æµè½¬æ¢ä¸ºæ–¹æ³•åŒºè¿è¡Œæ—¶çš„æ•°æ®ç»“æ„ï¼Œç„¶åå†åœ¨å†…å­˜ä¸­ç”Ÿæˆä¸€ä¸ªèƒ½ä»£è¡¨æ­¤ç±»çš„ java.lang.Class å¯¹è±¡ï¼Œä½œä¸ºå…¶ä»–æ•°æ®è®¿é—®çš„å…¥å£ã€‚</p>\n</blockquote>\n<ul>\n<li>Javaè¯­è¨€çš„ç±»å‹å¯ä»¥åˆ†ä¸ºä¸¤å¤§ç±»ï¼š<strong>åŸºæœ¬ç±»å‹ã€å¼•ç”¨ç±»å‹</strong>ã€‚åŸºæœ¬ç±»å‹æ˜¯ç”±è™šæ‹Ÿæœºé¢„å…ˆå®šä¹‰å¥½çš„ï¼Œæ‰€ä»¥ä¸ä¼šç»å†å•ç‹¬çš„ç±»åŠ è½½è¿‡ç¨‹ã€‚è€Œå¼•ç”¨ç±»å‹åˆåˆ†ä¸ºå››ç§ï¼š<strong>ç±»ã€æ¥å£ã€æ•°ç»„ç±»ã€æ³›å‹å‚æ•°</strong>ã€‚ç”±äºæ³›å‹å‚æ•°ä¼šåœ¨ç¼–è¯‘çš„è¿‡ç¨‹ä¸­è¢«æ“¦é™¤ï¼ˆå…³äºç±»å‹æ“¦é™¤çš„çŸ¥è¯†ï¼Œå¤§å®¶å¯ä»¥æŸ¥ä¸‹èµ„æ–™ï¼‰ï¼Œæ‰€ä»¥åœ¨Javaä¸­åªæœ‰ç±»ã€æ¥å£ã€æ•°ç»„ç±»ä¸‰ç§ç±»å‹éœ€è¦ç»å†JVMå¯¹å…¶è¿›è¡Œè¿æ¥å’Œåˆå§‹åŒ–çš„è¿‡ç¨‹ã€‚</li>\n</ul>\n<h4 id=\"éªŒè¯é˜¶æ®µ\"><a href=\"#éªŒè¯é˜¶æ®µ\" class=\"headerlink\" title=\"éªŒè¯é˜¶æ®µ\"></a>éªŒè¯é˜¶æ®µ</h4><blockquote>\n<p>æ­¤æ­¥éª¤ä¸»è¦æ˜¯ä¸ºäº†éªŒè¯å­—èŠ‚ç çš„å®‰å…¨æ€§ï¼Œå¦‚æœä¸åšå®‰å…¨æ ¡éªŒçš„è¯å¯èƒ½ä¼šè½½å…¥éå®‰å…¨æˆ–æœ‰é”™è¯¯çš„å­—èŠ‚ç ï¼Œä»è€Œå¯¼è‡´ç³»ç»Ÿå´©æºƒï¼Œå®ƒæ˜¯ JVM è‡ªæˆ‘ä¿æŠ¤çš„ä¸€é¡¹é‡è¦ä¸¾æªã€‚</p>\n</blockquote>\n<ul>\n<li>éªŒè¯çš„ä¸»è¦åŠ¨ä½œå¤§æ¦‚æœ‰ä»¥ä¸‹å‡ ä¸ªï¼š<ul>\n<li>æ–‡ä»¶æ ¼å¼æ ¡éªŒåŒ…æ‹¬å¸¸é‡æ± ä¸­çš„å¸¸é‡ç±»å‹ã€Class æ–‡ä»¶çš„å„ä¸ªéƒ¨åˆ†æ˜¯å¦è¢«åˆ é™¤æˆ–è¢«è¿½åŠ äº†å…¶ä»–ä¿¡æ¯ç­‰ï¼›</li>\n<li>å…ƒæ•°æ®æ ¡éªŒåŒ…æ‹¬çˆ¶ç±»æ­£ç¡®æ€§æ ¡éªŒï¼ˆæ£€æŸ¥çˆ¶ç±»æ˜¯å¦æœ‰è¢« final ä¿®é¥°ï¼‰ã€æŠ½è±¡ç±»æ ¡éªŒç­‰ï¼›</li>\n<li>å­—èŠ‚ç æ ¡éªŒï¼Œæ­¤æ­¥éª¤æœ€ä¸ºå…³é”®å’Œå¤æ‚ï¼Œä¸»è¦ç”¨äºæ ¡éªŒç¨‹åºä¸­çš„è¯­ä¹‰æ˜¯å¦åˆæ³•ä¸”ç¬¦åˆé€»è¾‘ï¼›</li>\n<li>ç¬¦å·å¼•ç”¨æ ¡éªŒï¼Œå¯¹ç±»è‡ªèº«ä»¥å¤–æ¯”å¦‚å¸¸é‡æ± ä¸­çš„å„ç§ç¬¦å·å¼•ç”¨çš„ä¿¡æ¯è¿›è¡ŒåŒ¹é…æ€§æ ¡éªŒã€‚</li>\n</ul>\n</li>\n</ul>\n<h4 id=\"å‡†å¤‡é˜¶æ®µ\"><a href=\"#å‡†å¤‡é˜¶æ®µ\" class=\"headerlink\" title=\"å‡†å¤‡é˜¶æ®µ\"></a>å‡†å¤‡é˜¶æ®µ</h4><p>æ­¤é˜¶æ®µæ˜¯ç”¨æ¥åˆå§‹åŒ–å¹¶ä¸ºç±»ä¸­å®šä¹‰çš„é™æ€å˜é‡åˆ†é…å†…å­˜çš„ï¼Œè¿™äº›é™æ€å˜é‡ä¼šè¢«åˆ†é…åˆ°æ–¹æ³•åŒºä¸Šã€‚è¿™äº›å˜é‡æ‰€ä½¿ç”¨çš„å†…å­˜éƒ½å°†åœ¨æ–¹æ³•åŒºï¼ˆ&lt;Jdk1.8ï¼‰å…ƒæ•°æ®åŒºï¼ˆ&gt;=Jdk1.8ï¼‰ä¸­è¿›è¡Œåˆ†é…ã€‚è¿™æ—¶å€™è¿›è¡Œå†…å­˜åˆ†é…çš„ä»…åŒ…æ‹¬ç±»å˜é‡ï¼Œè€Œä¸åŒ…æ‹¬å®ä¾‹å˜é‡ï¼Œå®ä¾‹å˜é‡å°†ä¼šåœ¨å¯¹è±¡å®ä¾‹åŒ–çš„æ—¶å€™éšå¯¹è±¡ä¸€èµ·åˆ†é…åœ¨Javaå †ä¸­ã€‚</p>\n<h4 id=\"è§£æé˜¶æ®µ\"><a href=\"#è§£æé˜¶æ®µ\" class=\"headerlink\" title=\"è§£æé˜¶æ®µ\"></a>è§£æé˜¶æ®µ</h4><blockquote>\n<p>æ­¤é˜¶æ®µä¸»è¦æ˜¯ç”¨æ¥è§£æç±»ã€æ¥å£ã€å­—æ®µåŠæ–¹æ³•çš„ï¼Œè§£ææ—¶ä¼šæŠŠç¬¦å·å¼•ç”¨æ›¿æ¢æˆç›´æ¥å¼•ç”¨ã€‚</p>\n</blockquote>\n<ul>\n<li><p>æ‰€è°“çš„ç¬¦å·å¼•ç”¨æ˜¯æŒ‡ä»¥ä¸€ç»„ç¬¦å·æ¥æè¿°æ‰€å¼•ç”¨çš„ç›®æ ‡ï¼Œç¬¦å·å¯ä»¥æ˜¯ä»»ä½•å½¢å¼çš„å­—é¢é‡ï¼Œåªè¦ä½¿ç”¨æ—¶èƒ½æ— æ­§ä¹‰åœ°å®šä½åˆ°ç›®æ ‡å³å¯ï¼›è€Œç›´æ¥å¼•ç”¨æ˜¯å¯ä»¥ç›´æ¥æŒ‡å‘ç›®æ ‡çš„æŒ‡é’ˆã€ç›¸å¯¹åç§»é‡æˆ–è€…æ˜¯ä¸€ä¸ªèƒ½é—´æ¥å®šä½åˆ°ç›®æ ‡çš„å¥æŸ„ã€‚</p>\n</li>\n<li><p>ç¬¦å·å¼•ç”¨å’Œç›´æ¥å¼•ç”¨æœ‰ä¸€ä¸ªé‡è¦çš„åŒºåˆ«ï¼šä½¿ç”¨ç¬¦å·å¼•ç”¨æ—¶è¢«å¼•ç”¨çš„ç›®æ ‡ä¸ä¸€å®šå·²ç»åŠ è½½åˆ°å†…å­˜ä¸­ï¼›è€Œä½¿ç”¨ç›´æ¥å¼•ç”¨æ—¶ï¼Œå¼•ç”¨çš„ç›®æ ‡å¿…å®šå·²ç»å­˜åœ¨è™šæ‹Ÿæœºçš„å†…å­˜ä¸­äº†ã€‚</p>\n</li>\n</ul>\n<h4 id=\"åˆå§‹åŒ–\"><a href=\"#åˆå§‹åŒ–\" class=\"headerlink\" title=\"åˆå§‹åŒ–\"></a>åˆå§‹åŒ–</h4><blockquote>\n<p>åˆå§‹åŒ–é˜¶æ®µ JVM å°±æ­£å¼å¼€å§‹æ‰§è¡Œç±»ä¸­ç¼–å†™çš„ Java ä¸šåŠ¡ä»£ç äº†ã€‚åˆ°è¿™ä¸€æ­¥éª¤ä¹‹åï¼Œç±»çš„åŠ è½½è¿‡ç¨‹å°±ç®—æ­£å¼å®Œæˆäº†ã€‚</p>\n</blockquote>\n<ul>\n<li>JVM è§„èŒƒæšä¸¾äº†ä¸‹è¿°å¤šç§è§¦å‘æƒ…å†µï¼š<ul>\n<li>å½“è™šæ‹Ÿæœºå¯åŠ¨æ—¶ï¼Œåˆå§‹åŒ–ç”¨æˆ·æŒ‡å®šçš„ä¸»ç±»ï¼›<ul>\n<li>å½“é‡åˆ°ç”¨ä»¥æ–°å»ºç›®æ ‡ç±»å®ä¾‹çš„ new æŒ‡ä»¤æ—¶ï¼Œåˆå§‹åŒ– new æŒ‡ä»¤çš„ç›®æ ‡ç±»;</li>\n<li>å½“é‡åˆ°è°ƒç”¨é™æ€æ–¹æ³•çš„æŒ‡ä»¤æ—¶ï¼Œåˆå§‹åŒ–è¯¥é™æ€æ–¹æ³•æ‰€åœ¨çš„ç±»;</li>\n<li>å½“é‡åˆ°è®¿é—®é™æ€å­—æ®µçš„æŒ‡ä»¤æ—¶ï¼Œåˆå§‹åŒ–è¯¥é™æ€å­—æ®µæ‰€åœ¨çš„ç±»ï¼›å­ç±»çš„åˆå§‹åŒ–ä¼šè§¦å‘çˆ¶ç±»çš„åˆå§‹åŒ–;</li>\n<li>å¦‚æœä¸€ä¸ªæ¥å£å®šä¹‰äº† default æ–¹æ³•ï¼Œé‚£ä¹ˆç›´æ¥å®ç°æˆ–è€…é—´æ¥å®ç°è¯¥æ¥å£çš„ç±»çš„åˆå§‹åŒ–ï¼Œä¼šè§¦å‘è¯¥æ¥å£çš„åˆå§‹åŒ–;</li>\n<li>ä½¿ç”¨åå°„ API å¯¹æŸä¸ªç±»è¿›è¡Œåå°„è°ƒç”¨æ—¶ï¼Œåˆå§‹åŒ–è¿™ä¸ªç±»ï¼›</li>\n<li>å½“åˆæ¬¡è°ƒç”¨ MethodHandle å®ä¾‹æ—¶ï¼Œåˆå§‹åŒ–è¯¥ MethodHandle æŒ‡å‘çš„æ–¹æ³•æ‰€åœ¨çš„ç±»ã€‚</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<a id=\"more\"></a>\n\n<h3 id=\"Jvmåƒåœ¾å›æ”¶\"><a href=\"#Jvmåƒåœ¾å›æ”¶\" class=\"headerlink\" title=\"Jvmåƒåœ¾å›æ”¶\"></a>Jvmåƒåœ¾å›æ”¶</h3><ul>\n<li>JVMå¯ä»¥è‡ªåŠ¨ç®¡ç†å†…å­˜ï¼Œæ‹¥æœ‰è‡ªåŠ¨åƒåœ¾å›æ”¶æœºåˆ¶ï¼Œä¸»è¦æ˜¯å¯¹å †ä¸­çš„å¯¹è±¡è¿›è¡Œæ¸…ç†ã€‚</li>\n</ul>\n<h4 id=\"å¯è¾¾æ€§åˆ†æç®—æ³•\"><a href=\"#å¯è¾¾æ€§åˆ†æç®—æ³•\" class=\"headerlink\" title=\"å¯è¾¾æ€§åˆ†æç®—æ³•\"></a>å¯è¾¾æ€§åˆ†æç®—æ³•</h4><blockquote>\n<p>ä»çº¿ç¨‹æ ˆå¸§ä¸­å±€éƒ¨å˜é‡æˆ–è€…æ–¹æ³•åŒºçš„é™æ€å˜é‡å¼•ç”¨çš„å¯¹è±¡è¿›è¡Œæ ‡è®°ï¼Œç„¶ååˆ¤æ–­è¢«æ ‡è®°çš„å¯¹è±¡æ˜¯å¦å¼•ç”¨äº†å…¶ä»–å¯¹è±¡ï¼Œé€šè¿‡æŒç»­æ ‡è®°ã€‚æ‰¾å‡ºæœªè¢«æ ‡è®°çš„å¯¹è±¡ï¼Œè¿™äº›å¯¹è±¡å°±æ˜¯å¯ä»¥è¢«å›æ”¶çš„åƒåœ¾å¯¹è±¡ã€‚</p>\n</blockquote>\n<h4 id=\"å›æ”¶æ–¹å¼\"><a href=\"#å›æ”¶æ–¹å¼\" class=\"headerlink\" title=\"å›æ”¶æ–¹å¼\"></a>å›æ”¶æ–¹å¼</h4><h5 id=\"æ¸…ç†\"><a href=\"#æ¸…ç†\" class=\"headerlink\" title=\"æ¸…ç†\"></a>æ¸…ç†</h5><ul>\n<li>å°†åƒåœ¾å¯¹è±¡å ç”¨ç”¨çš„ç©ºé—´æ ‡è®°æˆç©ºé—²ï¼Œè®°å½•åœ¨ä¸€ä¸ªç©ºé—²åˆ—é˜Ÿä¸­ï¼Œå½“éœ€è¦åˆ†é…æ–°å¯¹è±¡çš„æ—¶å€™ï¼Œå°±ä»ç©ºé—´åˆ—é˜Ÿä¸­æ‰¾åˆ°åˆé€‚çš„ç©ºé—´åˆ†é…ç»™è¿™ä¸ªå¯¹è±¡ã€‚ä½†æ˜¯åƒåœ¾å¯¹è±¡æ˜¯æ•£è½åœ¨å†…å­˜ç©ºé—´å„å¤„ï¼Œå¹¶ä¸æ˜¯è¿ç»­å­˜æ”¾çš„ã€‚å½“éœ€è¦åˆ†é…ä¸€æ®µè¿ç»­å¤§çš„å†…å­˜ç©ºé—´çš„æ—¶å€™ï¼Œå¯èƒ½å‡ºç°æ²¡æœ‰è¶³å¤Ÿç©ºé—²ç©ºé—´çš„é—®é¢˜ã€‚</li>\n</ul>\n<p><img src=\"https://z201.oss-cn-shanghai.aliyuncs.com/JavaNote/20211023224631.png\"></p>\n<h5 id=\"å‹ç¼©\"><a href=\"#å‹ç¼©\" class=\"headerlink\" title=\"å‹ç¼©\"></a>å‹ç¼©</h5><ul>\n<li>ä»å †ç©ºé—´çš„å¤´éƒ¨å¼€å§‹ï¼Œå°†å­˜æ´»çš„å¯¹è±¡æ‹·è´åœ¨ä¸€æ®µè¿ç»­çš„å†…å­˜ç©ºé—´ä¸­ï¼Œå‰©ä½™çš„ç©ºé—´å°±æ˜¯è¿ç»­çš„ç©ºé—²ç©ºé—´ã€‚</li>\n</ul>\n<p><img src=\"https://z201.oss-cn-shanghai.aliyuncs.com/JavaNote/20211023224648.png\"></p>\n<h5 id=\"å¤åˆ¶\"><a href=\"#å¤åˆ¶\" class=\"headerlink\" title=\"å¤åˆ¶\"></a>å¤åˆ¶</h5><ul>\n<li>å°†å †ç©ºé—´æ‹†åˆ†æˆ2ç©ºé—´fromã€toï¼Œå…¶ä¸­ä¸€éƒ¨åˆ†åˆ›å»ºå¯¹è±¡ï¼Œå½“fromç©ºé—´å¯¹è±¡ä½¿ç”¨å®Œæˆåï¼Œå°†æ ‡è®°è¿‡çš„å¯¹è±¡å¤åˆ¶åˆ°toç©ºé—´ä¸­ï¼Œå½“å¯¹è±¡ä»fromå¤åˆ¶åˆ°toç©ºé—´åï¼Œä¸¤ä¸ªç©ºé—´äº¤æ¢å¼•ç”¨ï¼Œç»§ç»­åœ¨fromç©ºé—´åˆ›å»ºå¯¹è±¡ï¼Œä¸€ç›´åˆ°fromç©ºé—´æ»¡äº†ã€‚è¿™é‡Œçš„ç©ºé—²æ˜¯æŒ‡æ ‡è®°ç©ºé—²ã€‚</li>\n</ul>\n<p><img src=\"https://z201.oss-cn-shanghai.aliyuncs.com/JavaNote/20211023224706.png\"></p>\n<h4 id=\"åƒåœ¾å›æ”¶å™¨\"><a href=\"#åƒåœ¾å›æ”¶å™¨\" class=\"headerlink\" title=\"åƒåœ¾å›æ”¶å™¨\"></a>åƒåœ¾å›æ”¶å™¨</h4><blockquote>\n<p>å…·ä½“æ‰§è¡Œåƒåœ¾å›æ”¶çš„å›æ”¶å™¨æœ‰å››ç§,</p>\n</blockquote>\n<p><img src=\"https://z201.oss-cn-shanghai.aliyuncs.com/JavaNote/20211124020112.png\"></p>\n<h5 id=\"Serial\"><a href=\"#Serial\" class=\"headerlink\" title=\"Serial\"></a>Serial</h5><ul>\n<li>æ—©æœŸçš„åƒåœ¾å›æ”¶å™¨ï¼Œåªæœ‰ä¸€ä¸ªæ‰§è¡Œåƒåœ¾å›æ”¶ã€‚</li>\n</ul>\n<h5 id=\"Parallel\"><a href=\"#Parallel\" class=\"headerlink\" title=\"Parallel\"></a>Parallel</h5><ul>\n<li>å¤šä¸ªçº¿ç¨‹æ‰§è¡Œåƒåœ¾å›æ”¶ï¼Œé€‚åˆåœ¨å¤šæ ¸cpuä¸Šé¢ï¼Œåœ¨ä¸²è¡Œæˆ–è€…å¹¶è¡Œåƒåœ¾å›æ”¶è¿‡ç¨‹ä¸­ï¼Œéœ€è¦åœæ­¢ç”¨æˆ·ç¨‹åºçº¿ç¨‹ï¼Œæˆ–è€…å¯èƒ½å¯¼è‡´å¯¹è±¡æ ‡è®°é”™ä¹±ã€‚å¯¹ç”¨æˆ·ç¨‹åºå½±å“è¾ƒå¤§ï¼Œç¨‹åºéƒ½åœæ­¢äº†ã€‚</li>\n</ul>\n<h5 id=\"CMS\"><a href=\"#CMS\" class=\"headerlink\" title=\"CMS\"></a>CMS</h5><ul>\n<li>åœ¨åƒåœ¾å›æ”¶çš„é˜¶æ®µï¼Œåƒåœ¾å›æ”¶å™¨å’Œç”¨æˆ·çº¿ç¨‹å¯ä»¥å¹¶å‘æ‰§è¡Œï¼Œå¯¹ç¨‹åºçº¿ç¨‹å½±å“è¾ƒå°ã€‚</li>\n</ul>\n<h5 id=\"G1\"><a href=\"#G1\" class=\"headerlink\" title=\"G1\"></a>G1</h5><ul>\n<li>å°†å †æ‹†åˆ†æˆå¤šä¸ªå­åŒºåŸŸï¼Œæ¯ä¸ªåŒºåŸŸç‹¬è‡ªè¿›è¡Œåƒåœ¾å›æ”¶ã€‚æ•´ä¸ªè¿‡ç¨‹åƒåœ¾å›æ”¶çº¿ç¨‹å’Œç”¨æˆ·ç¨‹åºçº¿ç¨‹å¹¶è¡Œã€‚æ•ˆç‡è¾ƒé«˜é€‚åˆå¤šç§åœºæ™¯ã€‚</li>\n</ul>\n<h3 id=\"ç±»åŠ è½½å™¨\"><a href=\"#ç±»åŠ è½½å™¨\" class=\"headerlink\" title=\"ç±»åŠ è½½å™¨\"></a>ç±»åŠ è½½å™¨</h3><blockquote>\n<p>è™šæ‹Ÿæœºè®¾è®¡å›¢é˜ŸæŠŠåŠ è½½åŠ¨ä½œæ”¾åˆ° JVM å¤–éƒ¨å®ç°ï¼Œä»¥ä¾¿è®©åº”ç”¨ç¨‹åºå†³å®šå¦‚ä½•è·å–æ‰€éœ€çš„ç±»ï¼ŒJVM æä¾›äº† 3 ç§ç±»åŠ è½½å™¨ï¼š</p>\n</blockquote>\n<p><img src=\"https://z201.oss-cn-shanghai.aliyuncs.com/JavaNote/20211020020028.png\"></p>\n<ul>\n<li><p>BootstrapClassloader  å¯åŠ¨ï¼ˆæ ¹ï¼‰ç±»åŠ è½½å™¨</p>\n<ul>\n<li>å®ƒä¸æ˜¯javaç±»ï¼Œè¯¥ç±»åŠ è½½å™¨ç”±C++å®ç°ï¼Œå®ƒåµŒå¥—åœ¨JVMå†…æ ¸é‡Œï¼Œå½“JVMå¯åŠ¨æ—¶è¯¥ç±»åŠ è½½å™¨å°±å¯åŠ¨äº†ã€‚è´Ÿè´£åŠ è½½JavaåŸºç¡€ç±»ï¼Œå¯¹åº”åŠ è½½çš„æ–‡ä»¶æ˜¯JRE/lib/ ç›®å½•ä¸‹çš„rt.jarã€resources.jarã€charsets.jarç­‰ã€‚</li>\n</ul>\n</li>\n<li><p>ExtensionClassLoader æ‰©å±•ç±»åŠ è½½å™¨</p>\n<ul>\n<li>åŠ è½½JRE/lib/extä¸‹é¢æŒ‡å®šè¦ç”¨çš„jaråŒ…ï¼Œç»§æ‰¿URLClassLoaderã€‚</li>\n</ul>\n</li>\n<li><p>AppClassLoader åº”ç”¨ç¨‹åºç±»åŠ è½½å™¨</p>\n<ul>\n<li>åŠ è½½åº”ç”¨ç¨‹åºclasspathç›®å½•ä¸‹çš„æ‰€æŒ‡å®šçš„ç±»åº“ï¼Œç»§æ‰¿URLClassLoaderã€‚</li>\n</ul>\n</li>\n<li><p>è‡ªä¸Šè€Œä¸‹å°è¯•åŠ è½½ï¼Œæœ€ä¸‹é¢çš„åŠ è½½å™¨æ²¡æœ‰åŠ è½½åˆ°çš„è¯ï¼Œåˆ™æŠ›å‡ºClassNotFoundExceptionã€‚</p>\n<ul>\n<li>å¦‚æœä¸€ä¸ªç±»åŠ è½½å™¨æ”¶åˆ°äº†ç±»åŠ è½½è¯·æ±‚ï¼Œå®ƒå¹¶ä¸ä¼šè‡ªå·±å…ˆå»åŠ è½½ï¼Œè€Œæ˜¯æŠŠè¿™ä¸ªè¯·æ±‚å§”æ‰˜ç»™çˆ¶ç±»çš„åŠ è½½å™¨å»æ‰§è¡Œï¼›</li>\n<li>å¦‚æœçˆ¶ç±»åŠ è½½å™¨è¿˜å­˜åœ¨å…¶çˆ¶ç±»åŠ è½½å™¨ï¼Œåˆ™è¿›ä¸€æ­¥å‘ä¸Šå§”æ‰˜ï¼Œä¾æ¬¡é€’å½’,è¯·æ±‚æœ€ç»ˆå°†åˆ°è¾¾é¡¹å±‚çš„å¯åŠ¨ç±»åŠ è½½å™¨ï¼›</li>\n<li>å¦‚æœçˆ¶ç±»åŠ è½½å™¨å¯ä»¥å®Œæˆç±»åŠ è½½ä»»åŠ¡ï¼Œå°±æˆåŠŸè¿”å›ï¼Œå€˜è‹¥çˆ¶ç±»åŠ è½½å™¨æ— æ³•å®Œæˆæ­¤åŠ è½½ä»»åŠ¡ï¼Œå­åŠ è½½å™¨æ‰ä¼šå°è¯•è‡ªå·±å»åŠ è½½ï¼Œ</li>\n</ul>\n</li>\n</ul>\n<h4 id=\"åŒäº²å§”æ´¾æœºåˆ¶\"><a href=\"#åŒäº²å§”æ´¾æœºåˆ¶\" class=\"headerlink\" title=\"åŒäº²å§”æ´¾æœºåˆ¶\"></a>åŒäº²å§”æ´¾æœºåˆ¶</h4><ul>\n<li>è¿™ç§å·¥ä½œåŸç†å°±æ˜¯åŒäº²å§”æ´¾æœºåˆ¶ã€‚Javaç±»éšç€åŠ è½½å®ƒçš„ç±»åŠ è½½å™¨ä¸€èµ·å…·å¤‡äº†ä¸€ç§å¸¦æœ‰ä¼˜å…ˆçº§çš„å±‚æ¬¡å…³ç³»ã€‚æ¯”å¦‚ï¼ŒJavaä¸­çš„Objectç±»ï¼Œå®ƒå­˜æ”¾åœ¨rt.jarä¹‹ä¸­,æ— è®ºå“ªä¸€ä¸ªç±»åŠ è½½å™¨è¦åŠ è½½è¿™ä¸ªç±»ï¼Œæœ€ç»ˆéƒ½æ˜¯å§”æ´¾ç»™å¤„äºæ¨¡å‹æœ€é¡¶ç«¯çš„å¯åŠ¨ç±»åŠ è½½å™¨è¿›è¡ŒåŠ è½½ï¼Œå› æ­¤Objectåœ¨å„ç§ç±»åŠ è½½ç¯å¢ƒä¸­éƒ½æ˜¯åŒä¸€ä¸ªç±»ã€‚å¦‚æœä¸é‡‡ç”¨åŒäº²å§”æ´¾æ¨¡å‹ï¼Œé‚£ä¹ˆç”±å„ä¸ªç±»åŠ è½½å™¨è‡ªå·±å»åŠ è½½çš„è¯ï¼Œé‚£ä¹ˆç³»ç»Ÿä¸­ä¼šå­˜åœ¨å¤šç§ä¸åŒçš„Objectç±»ã€‚<ul>\n<li>é¿å…æ ¸å¿ƒAPIè¢«ç¯¡æ”¹ã€‚</li>\n<li>é¿å…ç±»çš„é‡å¤åŠ è½½ã€‚</li>\n</ul>\n</li>\n<li>å­ç±»åŠ è½½å™¨å¯ä»¥è®¿é—®çˆ¶åŠ è½½å™¨çš„ç±»å‹ï¼Œä½†æ˜¯åè¿‡æ¥ä¸è¡Œã€‚ç”±äºçˆ¶åŠ è½½å™¨çš„ç±»å‹å¯¹äºå­åŠ è½½å™¨æ˜¯å¯è§çš„ï¼Œæ‰€ä»¥çˆ¶åŠ è½½å™¨ä¸­åŠ è½½çš„ç±»å‹ä¸ä¼šå†å­åŠ è½½å™¨ä¸­åŠ è½½ã€‚</li>\n</ul>\n<h4 id=\"è´Ÿè´£ä¾èµ–\"><a href=\"#è´Ÿè´£ä¾èµ–\" class=\"headerlink\" title=\"è´Ÿè´£ä¾èµ–\"></a>è´Ÿè´£ä¾èµ–</h4><ul>\n<li>å¦‚æœä¸€ä¸ªåŠ è½½å™¨åœ¨åŠ è½½æŸä¸ªç±»çš„æ—¶å€™ï¼Œå‘ç°è¿™ä¸ªç±»ä¾èµ–äºå¦å¤–å‡ ä¸ªç±»æˆ–æ¥å£ï¼Œä¹Ÿä¼šå»å°è¯•åŠ è½½è¿™äº›ä¾èµ–é¡¹ã€‚</li>\n</ul>\n<h4 id=\"ç¼“å­˜åŠ è½½\"><a href=\"#ç¼“å­˜åŠ è½½\" class=\"headerlink\" title=\"ç¼“å­˜åŠ è½½\"></a>ç¼“å­˜åŠ è½½</h4><ul>\n<li>ä¸ºäº†æå‡åŠ è½½æ•ˆç‡ï¼Œæ¶ˆé™¤é‡å¤åŠ è½½ï¼Œä¸€æ—¦æŸä¸ªç±»è¢«ä¸€ä¸ªç±»åŠ è½½å™¨åŠ è½½ï¼Œé‚£ä¹ˆå®ƒä¼šç¼“å­˜è¿™ä¸ªåŠ è½½ç»“æœï¼Œä¸ä¼šé‡å¤åŠ è½½ã€‚</li>\n</ul>\n<h3 id=\"æ‰©å±•\"><a href=\"#æ‰©å±•\" class=\"headerlink\" title=\"æ‰©å±•\"></a>æ‰©å±•</h3><h4 id=\"ä½ å°†å¦‚ä½•ä½¿ç”¨thread-dumpï¼Ÿä½ å°†å¦‚ä½•åˆ†æThread-dumpï¼Ÿ\"><a href=\"#ä½ å°†å¦‚ä½•ä½¿ç”¨thread-dumpï¼Ÿä½ å°†å¦‚ä½•åˆ†æThread-dumpï¼Ÿ\" class=\"headerlink\" title=\"ä½ å°†å¦‚ä½•ä½¿ç”¨thread dumpï¼Ÿä½ å°†å¦‚ä½•åˆ†æThread dumpï¼Ÿ\"></a>ä½ å°†å¦‚ä½•ä½¿ç”¨thread dumpï¼Ÿä½ å°†å¦‚ä½•åˆ†æThread dumpï¼Ÿ</h4><ul>\n<li>çº¿ç¨‹è½¬å‚¨æ˜¯ä¸€ä¸ªJVMæ´»åŠ¨çº¿ç¨‹çš„åˆ—è¡¨ï¼Œå®ƒå¯¹äºåˆ†æç³»ç»Ÿç“¶é¢ˆå’Œæ­»é”éå¸¸æœ‰ç”¨ã€‚æœ‰å¾ˆå¤šæ–¹æ³•å¯ä»¥è·å–çº¿ç¨‹è½¬å‚¨â€”â€”ä½¿ç”¨Profilerï¼ŒKill -3å‘½ä»¤ï¼Œjstackå·¥å…·ç­‰ç­‰ã€‚æˆ‘æ›´å–œæ¬¢jstackå·¥å…·ï¼Œå› ä¸ºå®ƒå®¹æ˜“ä½¿ç”¨å¹¶ä¸”æ˜¯JDKè‡ªå¸¦çš„ã€‚ç”±äºå®ƒæ˜¯ä¸€ä¸ªåŸºäºç»ˆç«¯çš„å·¥å…·ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥ç¼–å†™ä¸€äº›è„šæœ¬å»å®šæ—¶çš„äº§ç”Ÿçº¿ç¨‹è½¬å‚¨ä»¥å¾…åˆ†æã€‚</li>\n</ul>\n<h4 id=\"Javaä¸­å †å’Œæ ˆæœ‰ä»€ä¹ˆä¸åŒ\"><a href=\"#Javaä¸­å †å’Œæ ˆæœ‰ä»€ä¹ˆä¸åŒ\" class=\"headerlink\" title=\"Javaä¸­å †å’Œæ ˆæœ‰ä»€ä¹ˆä¸åŒ?\"></a><strong>Java</strong>ä¸­å †å’Œæ ˆæœ‰ä»€ä¹ˆä¸åŒ?</h4><ul>\n<li>æ ˆæ˜¯â¼€å—å’Œçº¿ç¨‹ç´§å¯†ç›¸å…³çš„å†…å­˜åŒºåŸŸ,æ¯ä¸ªçº¿ç¨‹éƒ½æœ‰â¾ƒâ¼°çš„æ ˆå†…å­˜ï¼Œâ½¤äºå­˜å‚¨æœ¬åœ°å˜é‡ï¼Œâ½…æ³•å‚æ•°å’Œæ ˆè°ƒâ½¤ï¼Œâ¼€ä¸ªçº¿ç¨‹ä¸­å­˜å‚¨çš„å˜é‡å¯¹å…¶å®ƒçº¿ç¨‹æ˜¯ä¸å¯â»…çš„ã€‚</li>\n<li>å †æ˜¯æ‰€æœ‰çº¿ç¨‹å…±äº«çš„â¼€â½šå…¬â½¤å†…å­˜åŒºåŸŸ,å¯¹è±¡éƒ½åœ¨å †â¾¥åˆ›å»ºï¼Œä¸ºäº†æå‡æ•ˆç‡çº¿ç¨‹ä¼šä»å †ä¸­å¼„â¼€ä¸ªç¼“å­˜åˆ°â¾ƒâ¼°çš„æ ˆï¼Œå¦‚æœå¤šä¸ªçº¿ç¨‹ä½¿â½¤è¯¥å˜é‡å°±å¯èƒ½å¼•å‘é—®é¢˜ï¼Œè¿™æ—¶volatile å˜é‡å°±å¯ä»¥å‘æŒ¥ä½œâ½¤äº†ï¼Œå®ƒè¦æ±‚çº¿ç¨‹ä»ä¸»å­˜ä¸­è¯»å–å˜é‡çš„å€¼ã€‚</li>\n</ul>\n<h4 id=\"å†…å­˜æ³„æ¼å’Œå†…å­˜æº¢å‡º\"><a href=\"#å†…å­˜æ³„æ¼å’Œå†…å­˜æº¢å‡º\" class=\"headerlink\" title=\"å†…å­˜æ³„æ¼å’Œå†…å­˜æº¢å‡º\"></a>å†…å­˜æ³„æ¼å’Œå†…å­˜æº¢å‡º</h4><ul>\n<li>å†…å­˜æº¢å‡ºæ˜¯è¯´ç¨‹åºéœ€è¦ç”³è¯·çš„å†…å­˜è¶…è¿‡äº†JVMå½“å‰å¯ä»¥åˆ†é…çš„æœ€å¤§å†…å­˜ï¼Œæº¢å‡ºã€‚</li>\n<li>å†…å­˜æ³„æ¼æ˜¯è¯´æœŸæœ›è¢«å›æ”¶çš„å†…å­˜å¯¹è±¡æ²¡æœ‰è¢«å›æ”¶ï¼Œæ³„æ¼ã€‚</li>\n<li>å†…å­˜æ³„æ¼æŒç»­å‘ç”Ÿï¼Œå¾ˆå¯èƒ½å¼•èµ·å†…å­˜æº¢å‡ºã€‚</li>\n</ul>\n","categories":["æŸ¥ç¼ºè¡¥æ¼"],"tags":["Jvm","Java"]},{"title":"Gitåˆå¹¶å¤šæ¡commit","url":"/posts/2939564960/","content":"<blockquote>\n<p>å·¥ä½œä¸­å¯èƒ½å‡ºç°ä¸€ä¸ªbugä¿®å¤å¤šæ¬¡è°ƒæ•™æˆ–è€…å¼€å‘è¿‡ç¨‹ä¸­éœ€è¦ä¸´æ—¶ä¿å­˜ä»£ç åˆ°åˆ†æ”¯ä¸Šçš„æ“ä½œã€‚ä½†æ˜¯åˆå¹¶ä¸»åˆ†æ”¯çš„æ—¶å€™ä¸å¸Œæœ›æŠŠè¿‡å¤šçš„æäº¤è®°å½•ä¿¡æ¯å±•ç¤ºå‡ºæ¥ã€‚è¿™é‡Œå°±éœ€è¦ç”¨åˆ°git rebase å‘½åã€‚</p>\n</blockquote>\n<h2 id=\"æ¡ˆä¾‹\"><a href=\"#æ¡ˆä¾‹\" class=\"headerlink\" title=\"æ¡ˆä¾‹\"></a>æ¡ˆä¾‹</h2><blockquote>\n<p>ä½¿ç”¨git rebase åˆå¹¶å¤šæ¡commit</p>\n</blockquote>\n<ol>\n<li>æŸ¥çœ‹git log é€‰æ‹©è¦åˆå¹¶çš„è®°å½•</li>\n</ol>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">git <span class=\"built_in\">log</span> --oneline</span><br></pre></td></tr></table></figure>\n\n<p><img src=\"https://z201.oss-cn-shanghai.aliyuncs.com/JavaNote/20211220220324.png\"></p>\n<p>2.é€‰ä¸­ä¸€ä¸ªcommit idä½œä¸ºåˆå¹¶åˆ°å¯¹è±¡ï¼Œä»ä¸Šè‡³ä¸‹æŒ‰ç…§æœ€æ–°æäº¤çš„è®°å½•æ’åºã€‚è¿™é‡Œå¯ä»¥é€‰ä¸­ç¬¬ä¸‰æ¡è®°å½•ã€‚</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">git rebase -i 7893ade</span><br></pre></td></tr></table></figure>\n\n<p><img src=\"https://z201.oss-cn-shanghai.aliyuncs.com/JavaNote/20211220220518.png\"></p>\n<ul>\n<li>è¿™é‡Œä¼šæ˜¾ç¤ºå¯ä»¥åˆå¹¶çš„è®°å½•è¿˜æœ‰gitçš„å‘½ä»¤å¸®åŠ©ä¿¡æ¯</li>\n</ul>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># å‘½ä»¤:</span></span><br><span class=\"line\"><span class=\"comment\"># p, pick &lt;æäº¤&gt; = ä½¿ç”¨æäº¤</span></span><br><span class=\"line\"><span class=\"comment\"># r, reword &lt;æäº¤&gt; = ä½¿ç”¨æäº¤ï¼Œä½†ä¿®æ”¹æäº¤è¯´æ˜</span></span><br><span class=\"line\"><span class=\"comment\"># e, edit &lt;æäº¤&gt; = ä½¿ç”¨æäº¤ï¼Œè¿›å…¥ shell ä»¥ä¾¿è¿›è¡Œæäº¤ä¿®è¡¥</span></span><br><span class=\"line\"><span class=\"comment\"># s, squash &lt;æäº¤&gt; = ä½¿ç”¨æäº¤ï¼Œä½†èåˆåˆ°å‰ä¸€ä¸ªæäº¤</span></span><br><span class=\"line\"><span class=\"comment\"># f, fixup &lt;æäº¤&gt; = ç±»ä¼¼äº \"squash\"ï¼Œä½†ä¸¢å¼ƒæäº¤è¯´æ˜æ—¥å¿—</span></span><br><span class=\"line\"><span class=\"comment\"># x, exec &lt;å‘½ä»¤&gt; = ä½¿ç”¨ shell è¿è¡Œå‘½ä»¤ï¼ˆæ­¤è¡Œå‰©ä½™éƒ¨åˆ†ï¼‰</span></span><br><span class=\"line\"><span class=\"comment\"># b, break = åœ¨æ­¤å¤„åœæ­¢ï¼ˆä½¿ç”¨ 'git rebase --continue' ç»§ç»­å˜åŸºï¼‰</span></span><br><span class=\"line\"><span class=\"comment\"># d, drop &lt;æäº¤&gt; = åˆ é™¤æäº¤</span></span><br><span class=\"line\"><span class=\"comment\"># l, label &lt;label&gt; = ä¸ºå½“å‰ HEAD æ‰“ä¸Šæ ‡è®°</span></span><br><span class=\"line\"><span class=\"comment\"># t, reset &lt;label&gt; = é‡ç½® HEAD åˆ°è¯¥æ ‡è®°</span></span><br><span class=\"line\"><span class=\"comment\"># m, merge [-C &lt;commit&gt; | -c &lt;commit&gt;] &lt;label&gt; [# &lt;oneline&gt;]</span></span><br><span class=\"line\"><span class=\"comment\"># .       åˆ›å»ºä¸€ä¸ªåˆå¹¶æäº¤ï¼Œå¹¶ä½¿ç”¨åŸå§‹çš„åˆå¹¶æäº¤è¯´æ˜ï¼ˆå¦‚æœæ²¡æœ‰æŒ‡å®š</span></span><br><span class=\"line\"><span class=\"comment\"># .       åŸå§‹æäº¤ï¼Œä½¿ç”¨æ³¨é‡Šéƒ¨åˆ†çš„ oneline ä½œä¸ºæäº¤è¯´æ˜ï¼‰ã€‚ä½¿ç”¨</span></span><br><span class=\"line\"><span class=\"comment\"># .       -c &lt;æäº¤&gt; å¯ä»¥ç¼–è¾‘æäº¤è¯´æ˜ã€‚</span></span><br><span class=\"line\"><span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"comment\"># å¯ä»¥å¯¹è¿™äº›è¡Œé‡æ–°æ’åºï¼Œå°†ä»ä¸Šè‡³ä¸‹æ‰§è¡Œã€‚</span></span><br><span class=\"line\"><span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"comment\"># å¦‚æœæ‚¨åœ¨è¿™é‡Œåˆ é™¤ä¸€è¡Œï¼Œå¯¹åº”çš„æäº¤å°†ä¼šä¸¢å¤±ã€‚</span></span><br><span class=\"line\"><span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"comment\"># ç„¶è€Œï¼Œå¦‚æœæ‚¨åˆ é™¤å…¨éƒ¨å†…å®¹ï¼Œå˜åŸºæ“ä½œå°†ä¼šç»ˆæ­¢ã€‚</span></span><br><span class=\"line\"><span class=\"comment\">#</span></span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>è¿™é‡Œå°†è¦åˆå¹¶çš„commit å‰ç¼€pick æ”¹æˆ s æˆ–è€… squash å°±å¯ä»¥å¼€å§‹åˆå¹¶äº†ã€‚è¿™é‡Œä½¿ç”¨vim <code>:wq</code>ä¿å­˜</li>\n</ul>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">pick a755a10 å®Œå–„å•å…ƒæµ‹è¯•</span><br><span class=\"line\">s d3f1272 å®Œå–„ä»£ç </span><br><span class=\"line\">s 547947e</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>æ­£å¸¸æƒ…å†µä¸‹ï¼Œä¸å›åˆ›å»ºä¸´æ—¶ç©ºé—´ã€‚ç›´æ¥å°†ä»£ç æ¨é€åˆ°éœ€è¦å­˜å‚¨åˆ†æ”¯å°±å¯ä»¥äº†ã€‚è¿™é‡Œä¸ç›´æ¥æ¨é€ä¸»åˆ†æ”¯ï¼Œå»ºè®®åˆå¹¶è¿‡å»ã€‚</li>\n</ul>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">git push -f origin branch</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>ä¸æ­£å¸¸çš„æƒ…å†µï¼Œä¸€èˆ¬æ˜¯åˆå¹¶å†²çªï¼Œåªéœ€è¦å°†åˆå¹¶è§£å†³æ‰ï¼Œ åœ¨å°†åˆå¹¶çš„æ–‡ä»¶æ·»åŠ æš‚å­˜åŒºï¼Œåœ¨ä½¿ç”¨git rebase â€“continueã€‚æˆ–è€…ç›´æ¥æ”¾å¼ƒgit rebase â€“abort æˆ–è€…ç›´æ¥åˆ‡æ¢åˆ°å…¶ä»–åˆ†æ”¯ï¼Œç„¶ååˆ é™¤åˆšæ‰æ“ä½œçš„æ–‡ä»¶é€€å›<code>rm -rf .git/rebase-merge</code></li>\n<li>æ£€æŸ¥<code>git log --oneline</code></li>\n</ul>\n","categories":["Git"],"tags":["Rebase"]},{"title":"Redis-cliä½¿ç”¨","url":"/posts/3808068988/","content":"<blockquote>\n<p>åœ¨macä¸­ä½¿ç”¨redis-cliã€‚ç›¸æ¯”rdmæˆ‘å¯èƒ½æ›´å–œæ¬¢è¿™ä¸ªå‘½ä»¤è¡Œå·¥å…·ã€‚</p>\n</blockquote>\n<h3 id=\"åœ¨macä¸­ä¹‹å®‰è£…redis-cli\"><a href=\"#åœ¨macä¸­ä¹‹å®‰è£…redis-cli\" class=\"headerlink\" title=\"åœ¨macä¸­ä¹‹å®‰è£…redis-cli\"></a>åœ¨macä¸­ä¹‹å®‰è£…redis-cli</h3><blockquote>\n<p>æŒ‰ç…§æ ‡å‡†çš„æŒ‰ç…§æµç¨‹ï¼Œéœ€è¦å…ˆå®‰è£…redis-serverã€‚</p>\n</blockquote>\n<figure class=\"highlight shell\"><table><tr><td class=\"code\"><pre><span class=\"line\">brew tap ringohub/redis-cli</span><br><span class=\"line\"></span><br><span class=\"line\">brew update &amp;&amp; brew doctor</span><br><span class=\"line\"></span><br><span class=\"line\">brew install redis-cli</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>ç›¸å…³æ–‡æ¡£<a href=\"https://stackoverflow.com/questions/39704273/macos-x-is-there-a-way-to-install-only-redis-cli\" target=\"_blank\" rel=\"noopener\">https://stackoverflow.com/questions/39704273/macos-x-is-there-a-way-to-install-only-redis-cli</a></li>\n</ul>\n<h3 id=\"æ ¹æ®rediså¸¸ç”¨å‘½ä»¤æ¥å­¦ä¹ ä½¿ç”¨redis-cliã€‚\"><a href=\"#æ ¹æ®rediså¸¸ç”¨å‘½ä»¤æ¥å­¦ä¹ ä½¿ç”¨redis-cliã€‚\" class=\"headerlink\" title=\"æ ¹æ®rediså¸¸ç”¨å‘½ä»¤æ¥å­¦ä¹ ä½¿ç”¨redis-cliã€‚\"></a>æ ¹æ®rediså¸¸ç”¨å‘½ä»¤æ¥å­¦ä¹ ä½¿ç”¨redis-cliã€‚</h3>","categories":["Redis"],"tags":["Redis","Redis-cli"]},{"title":"å®è·µNginxæ—¥å¿—ç®€å•çš„ç»Ÿè®¡","url":"/posts/2239464817/","content":"<blockquote>\n<p>å…¬å¸æ²¡æœ‰æ—¥å¿—é‡‡é›†å¹³å°ï¼Œåˆä¸å¤ªå¯èƒ½åœ¨ä¸šåŠ¡ç³»ç»Ÿé‡Œé¢æäº‹æƒ…ã€‚å¥½åœ¨ä¹‹å‰æœ‰ç©è¿‡elkæ—¥å¿—åˆ†æç»„åˆã€‚ç›´æ¥ä»æœåŠ¡å™¨ä¸Šé¢æ’¸å‡ºæ—¥å¿—ç®€å•çš„ç”¨linuxå‘½ä»¤åˆ†æä¸‹å§ã€‚</p>\n</blockquote>\n<p>Nginxæ—¥å¿—ç»Ÿè®¡ï¼ˆç®€å•çš„ï¼‰</p>\n<p>ï¼ˆæ—¥å¿—æ–‡ä»¶å«access.log åœ¨å½“å‰ç›®å½•ä¸‹ï¼‰</p>\n<p><strong>ç»Ÿè®¡ PVï¼Œå°±æ˜¯æ—¥å¿—è¡Œæ•°</strong></p>\n<p><code>cat access.log |wc -l</code></p>\n<p><strong>UV, å³æ˜¯ç»Ÿè®¡ IP æ•°</strong></p>\n<p><code>cat access.log |awk &#39;{print $1}&#39; |sort |uniq -c |wc -l</code></p>\n<p><strong>ä½¿ç”¨linux grep è¿›è¡Œç»Ÿè®¡</strong></p>\n<p><code>grep -E &quot;POST|GET&quot; access.log | awk -F &#39;&quot;&#39; &#39;{print $2,$3}&#39; | awk &#39;{print $2}&#39;| sort | uniq -c | sort -k1nr | head -100</code></p>\n<p><strong>è€—æ—¶çš„è¯·æ±‚å‘ç”Ÿæ—¶é—´ã€æ‰€è¯·æ±‚çš„ URI å’Œè€—æ—¶</strong></p>\n<p><code>cat access.log | awk &#39;{print $4,$7,$10,$NF}&#39; | sort -k3 -nr | head -100</code></p>\n<p><strong>ç»Ÿè®¡</strong>nginx<strong>è®¿é—®é¢‘æ¬¡æœ€é«˜çš„</strong>100<strong>ä¸ª</strong>Ip**</p>\n<p><code>grep -E &quot;POST|GET&quot; access.log | awk -F &#39;&quot;&#39; &#39;{print $(NF-1)}&#39; | sort | uniq -c | sort -k1nr | head -100</code></p>\n<p><strong>ç»Ÿè®¡</strong>nginx<strong>è®¿é—®ä¸æ­£å¸¸ï¼ˆçŠ¶æ€ç </strong>400+<strong>ï¼‰çš„å‰</strong>100<strong>ä¸ª</strong>url<strong>å’Œé¢‘æ¬¡</strong></p>\n<p><code>grep -E &quot;POST|GET&quot; access.log | awk -F &#39;&quot;&#39; &#39;{print $2,$3}&#39; | awk &#39;{if ($4&gt;=&quot;400&quot;) {print $4,$1,$2}}&#39; | sort | uniq -c | sort -k1nr | head -100</code></p>\n<p><strong>ç»Ÿè®¡nginxè®¿é—®çŠ¶æ€ç é200çš„å‰100ä¸ª</strong>url<strong>å’Œé¢‘æ¬¡**</strong></p>\n<p><code>grep -E &quot;POST|GET&quot; access.log | awk -F &#39;&quot;&#39; &#39;{print $2,$3}&#39; | awk &#39;{if ($4!=200) {print $4,$1,$2}}&#39; | sort | uniq -c | sort -k1nr | head -100</code></p>\n<p><strong>ä¸åŒ URI çš„å¹³å‡è€—æ—¶</strong></p>\n<p><code>grep -E &quot;POST|GET&quot; access.log  | awk &#39;{s[$10] += $NF;c[$10]++}END{for(i in s){print i,s[i]/c[i]}}&#39; |sort -k2 -nr | head</code></p>\n<p><strong>æ¯ç§’è¯·æ±‚é‡ç»Ÿè®¡</strong></p>\n<p>ç»Ÿè®¡æ¯ç§’çš„è¯·æ±‚æ•°,top100çš„æ—¶é—´ç‚¹(ç²¾ç¡®åˆ°ç§’)</p>\n<p><code>grep -E &quot;POST|GET&quot; access.log |  awk &#39;{print $4}&#39; access.log |cut -c 14-21|sort|uniq -c|sort -nr|head -n 100</code></p>\n<p><strong>æ¯åˆ†é’Ÿè¯·æ±‚é‡ç»Ÿè®¡</strong></p>\n<p>ç»Ÿè®¡æ¯åˆ†é’Ÿçš„è¯·æ±‚æ•°,top100çš„æ—¶é—´ç‚¹(ç²¾ç¡®åˆ°åˆ†é’Ÿ)</p>\n<p><code>grep -E &quot;POST|GET&quot; access.log |  awk &#39;{print $4}&#39; access.log |cut -c 14-18|sort|uniq -c|sort -nr|head -n 100</code></p>\n<p><strong>æ¯å°æ—¶è¯·æ±‚é‡ç»Ÿè®¡</strong></p>\n<p>ç»Ÿè®¡æ¯å°æ—¶çš„è¯·æ±‚æ•°,top100çš„æ—¶é—´ç‚¹(ç²¾ç¡®åˆ°å°æ—¶)</p>\n<p><code>grep -E &quot;POST|GET&quot; access.log |  awk &#39;{print $4}&#39; access.log |cut -c 14-15|sort|uniq -c|sort -nr|head -n 100</code></p>\n<p><strong>ç»Ÿè®¡èœ˜è››æŠ“å–æ¬¡æ•°</strong></p>\n<p><code>grep &#39;Baiduspider&#39; access.log |wc -l</code></p>\n","categories":["Nginx"],"tags":["nginx"]},{"title":"æ€»ç»“ä»£ç é£æ ¼","url":"/posts/1362086803/","content":"<blockquote>\n<p>å¥½ä¹…æ²¡æ›´æ–°åšå®¢ï¼Œæœ€è¿‘å…¬å¸è®©æˆ‘å‡ºä¸€ä¸ªä»£ç è§„èŒƒï¼Œæˆ‘å“äº†ä¸€è·³ã€‚èµ¶å¿™ç¿»å‡ºé˜¿é‡Œã€Š ç å‡ºé«˜æ•ˆã€‹ï¼Œä¸æ•¢é€ æ¬¡ï¼Œæˆ‘å°±è¡¥å……ç‚¹ä¸ªäººçš„æƒ³æ³•å§ã€‚ä»£ç æ˜¯ç»™äººçœ‹çš„ã€‚ä»£ç é£æ ¼åº”è¯¥éµå¾ª<code>æç®€ä¸»ä¹‰</code>                                                                                                      </p>\n</blockquote>\n<h3 id=\"1ã€é¿å…å¤æ‚ã€è¿½æ±‚ç®€å•\"><a href=\"#1ã€é¿å…å¤æ‚ã€è¿½æ±‚ç®€å•\" class=\"headerlink\" title=\"1ã€é¿å…å¤æ‚ã€è¿½æ±‚ç®€å•\"></a>1ã€é¿å…å¤æ‚ã€è¿½æ±‚ç®€å•</h3><blockquote>\n<p>æ—¥å¸¸å¼€å‘ä¸­ï¼Œé™¤äº†è§£å†³ä¸šåŠ¡é—®é¢˜è¿˜éœ€è¦è§£å†³è®¸å¤šçš„å·¥ç¨‹é—®é¢˜ã€‚å¦‚ä½•é€‰æ‹©å½“ä¸‹åˆé€‚çš„æ–¹æ³•è§£å†³é—®é¢˜ï¼›éœ€è¦ä¸æ–­å°è¯•å’Œæ‘¸ç´¢ï¼Œæ²¡æœ‰æœ€å¥½çš„æ–¹æ³•åªæœ‰æ›´å¥½çš„æ–¹æ³•ã€‚</p>\n</blockquote>\n<h3 id=\"2ã€åˆç†å¹³æ»‘çš„å¤„ç†æŠ€æœ¯å€ºåŠ¡\"><a href=\"#2ã€åˆç†å¹³æ»‘çš„å¤„ç†æŠ€æœ¯å€ºåŠ¡\" class=\"headerlink\" title=\"2ã€åˆç†å¹³æ»‘çš„å¤„ç†æŠ€æœ¯å€ºåŠ¡\"></a>2ã€åˆç†å¹³æ»‘çš„å¤„ç†æŠ€æœ¯å€ºåŠ¡</h3><blockquote>\n<p>æŠ€æœ¯çš„æ¼”å˜é€Ÿåº¦å¤ªå¿«ï¼Œå¦‚ä½•é¿å…é•¿æ—¶é—´çš„æŠ€æœ¯å€ºåŠ¡æ˜¯éå¸¸ä¸¥é‡çš„é—®é¢˜ï¼Œæ€»ä¹‹å¼Šå¤§äºåˆ©ã€‚å°½å¯èƒ½ä¿æŒè½»è£…ä¸Šé˜µï¼Œé¿å…æ‹–æ²¹ç“¶é¡¹ç›®ã€‚</p>\n<p>å…³é”®å­—ï¼š</p>\n<ul>\n<li>ä¸€æ–¹åº“: æœ¬å·¥ç¨‹å†…éƒ¨å­é¡¹ç›®æ¨¡å—ä¾èµ–çš„åº“(jar åŒ…)ã€‚ </li>\n<li>äºŒæ–¹åº“: å…¬å¸å†…éƒ¨å‘å¸ƒåˆ°ä¸­å¤®ä»“åº“ï¼Œå¯ä¾›å…¬å¸å†…éƒ¨å…¶å®ƒåº”ç”¨ä¾èµ–çš„åº“(jaråŒ…)ã€‚ </li>\n<li>ä¸‰æ–¹åº“: å…¬å¸ä¹‹å¤–çš„å¼€æºåº“(jar åŒ…)ã€‚ </li>\n</ul>\n</blockquote>\n<h4 id=\"ã€é¿å…è¿‡åº¦å°è£…ã€\"><a href=\"#ã€é¿å…è¿‡åº¦å°è£…ã€\" class=\"headerlink\" title=\"ã€é¿å…è¿‡åº¦å°è£…ã€\"></a>ã€é¿å…è¿‡åº¦å°è£…ã€</h4><blockquote>\n<p>ç‰¹åˆ«æ˜¯æ²¡æœ‰å®Œæ•´çš„æŠ€æœ¯äººå‘˜ç¼–åˆ¶çš„æƒ…å†µä¸‹ï¼Œæ€ä¹ˆç®€å•æ€ä¹ˆå¤„ç†ï¼ˆå»é™¤ä¸­é—´å•†èµšå·®ä»·ä¸€ä¸ªé“ç†ã€‚ï¼‰é¿å…è¿‡åº¦å¼€å‘<code>ä¸€æ–¹åº“</code>ï¼›å»ºè®®ä½¿ç”¨åŸç”Ÿæ–¹å¼(ç»¼åˆè¯„ä¼°ä»£ç é‡)<code>é¿å…æ¡†æ¶è¿‡åº¦å°è£…</code>ã€‚ï¼ˆJavaçš„æ–¹æ³•è°ƒç”¨é“¾è¿‡é•¿æ˜¯å‡ºäº†åçš„æ¶å¿ƒï¼‰</p>\n</blockquote>\n<h4 id=\"ã€é¿å…ä»£ç è¿‡åº¦é‡å¤ã€\"><a href=\"#ã€é¿å…ä»£ç è¿‡åº¦é‡å¤ã€\" class=\"headerlink\" title=\"ã€é¿å…ä»£ç è¿‡åº¦é‡å¤ã€\"></a>ã€é¿å…ä»£ç è¿‡åº¦é‡å¤ã€</h4><blockquote>\n<p>æ¯æ¬¡å¼€å‘ä¸šåŠ¡éƒ½ä¼šå†™å¾ˆå¤šçš„ä»£ç ã€‚å®šæœŸå¯¹å…¬å¸é¡¹ç›®è¿›è¡ŒåŸºç¡€ä»£ç çš„é‡æ„ã€‚åˆç†çš„æ‹†åˆ†<code>ä¸šåŠ¡æ— å…³çš„åŸºç¡€ä»£ç </code>ã€‚</p>\n</blockquote>\n<h4 id=\"ã€é¿å…ç‰ˆæœ¬æ··ä¹±ã€\"><a href=\"#ã€é¿å…ç‰ˆæœ¬æ··ä¹±ã€\" class=\"headerlink\" title=\"ã€é¿å…ç‰ˆæœ¬æ··ä¹±ã€\"></a>ã€é¿å…ç‰ˆæœ¬æ··ä¹±ã€</h4><p>ä½¿ç”¨ç»Ÿä¸€çš„ç‰ˆæœ¬ç®¡ç†ã€‚çº¦æŸæ‰€æœ‰çš„é¡¹ç›®jarç‰ˆæœ¬ä¾èµ–ã€‚é˜²æ­¢å› ä¸ºè¿‡åº¦ä½¿ç”¨<code>ä¸‰æ–¹åº“</code>å‡ºç°å¥‡æ€ªçš„bugã€‚å…¬å¸<code>bom</code>éœ€è¦å•ç‹¬å¤„ç†ã€‚å°½é‡ä¿æŒä¸ç¤¾åŒºç‰ˆæœ¬åŒæ­¥ï¼Œæ¯”å¦‚springbootæœ€æ–°ç‰ˆæ˜¯2.1.3 ï¼Œé‚£ä¹ˆå…¬å¸ä½¿ç”¨çš„ç‰ˆæœ¬æœ€å¥½æ˜¯è¿‘åŠå¹´çš„GAç‰ˆæœ¬ã€‚</p>\n<h4 id=\"ã€ç‰©æå¿…åã€\"><a href=\"#ã€ç‰©æå¿…åã€\" class=\"headerlink\" title=\"ã€ç‰©æå¿…åã€\"></a>ã€ç‰©æå¿…åã€</h4><blockquote>\n<p>è¯·å‹¿è¿‡åº¦ä¾èµ–æŸæ¡†æ¶æ ˆæˆ–è€…è§£å†³æ–¹å¼ï¼Œå®¢è§‚çš„å¯¹æ¯”ç›¸å…³è§£å†³æ–¹æ¡ˆä¼˜ç¼ºç‚¹ã€‚</p>\n</blockquote>\n<h4 id=\"ã€é€‰æ‹©å¤§äºåŠªåŠ›ã€\"><a href=\"#ã€é€‰æ‹©å¤§äºåŠªåŠ›ã€\" class=\"headerlink\" title=\"ã€é€‰æ‹©å¤§äºåŠªåŠ›ã€\"></a>ã€é€‰æ‹©å¤§äºåŠªåŠ›ã€</h4><blockquote>\n<p>é›†ä¸­ç²¾åŠ›æŒæ¡æ ¸å¿ƒçŸ¥è¯†ã€‚æŒ‰ç…§ç›®å‰æŠ€æœ¯æ¼”å˜çš„é€Ÿåº¦ï¼Œæ›´æ–°æœ€å¿«çš„æ˜¯åº”ç”¨æŠ€æœ¯ï¼Œå…¶æ¬¡æ˜¯è¡Œä¸šè§„èŒƒç›¸å…³æŠ€æœ¯ã€‚æœ€åæ‰æ˜¯é©å‘½æ€§çš„æŠ€æœ¯ã€‚</p>\n</blockquote>\n<p><img src=\"https://z201.oss-cn-shanghai.aliyuncs.com/JavaNote/%E4%BB%A3%E7%A0%81%E6%80%BB%E7%BB%93/%E6%8A%80%E6%9C%AF%E8%B1%A1%E9%99%90%E5%9B%BE.png\"></p>\n<a id=\"more\"></a>\n\n<h3 id=\"3ã€æŒ‡å®šä¸€ç§å·¥ç¨‹ç»“æ„\"><a href=\"#3ã€æŒ‡å®šä¸€ç§å·¥ç¨‹ç»“æ„\" class=\"headerlink\" title=\"3ã€æŒ‡å®šä¸€ç§å·¥ç¨‹ç»“æ„\"></a>3ã€æŒ‡å®šä¸€ç§å·¥ç¨‹ç»“æ„</h3><blockquote>\n<p>ç»Ÿä¸€çš„å·¥ç¨‹ç»“æ„ï¼Œå¯¹å¼€å‘äººå‘˜æ¥è¯´å¦‚åŒæŒ‡è·¯æ˜ç¯ï¼Œå¯ä»¥å¿«é€Ÿçš„åŒºåˆ†ç›¸å…³ä»£ç ä½ç½®ã€‚</p>\n</blockquote>\n<h4 id=\"ã€é˜¿é‡Œå·´å·´Javaå¼€å‘æ‰‹å†Œ-åº”ç”¨åˆ†å±‚ã€\"><a href=\"#ã€é˜¿é‡Œå·´å·´Javaå¼€å‘æ‰‹å†Œ-åº”ç”¨åˆ†å±‚ã€\" class=\"headerlink\" title=\"ã€é˜¿é‡Œå·´å·´Javaå¼€å‘æ‰‹å†Œ-åº”ç”¨åˆ†å±‚ã€\"></a>ã€é˜¿é‡Œå·´å·´Javaå¼€å‘æ‰‹å†Œ-åº”ç”¨åˆ†å±‚ã€</h4><p><img src=\"https://z201.oss-cn-shanghai.aliyuncs.com/JavaNote/%E4%BB%A3%E7%A0%81%E6%80%BB%E7%BB%93/%E9%A1%B9%E7%9B%AE%E7%BB%93%E6%9E%84.png\"></p>\n<ul>\n<li>å¼€æ”¾æ¥å£å±‚:å¯ç›´æ¥å°è£… Service æ–¹æ³•æš´éœ²æˆ RPC æ¥å£;é€šè¿‡ Web å°è£…æˆ http æ¥å£;è¿›è¡Œ ç½‘å…³å®‰å…¨æ§åˆ¶ã€æµé‡æ§åˆ¶ç­‰ã€‚ </li>\n<li>ç»ˆç«¯æ˜¾ç¤ºå±‚:å„ä¸ªç«¯çš„æ¨¡æ¿æ¸²æŸ“å¹¶æ‰§è¡Œæ˜¾ç¤ºçš„å±‚ã€‚å½“å‰ä¸»è¦æ˜¯ velocity æ¸²æŸ“ï¼ŒJS æ¸²æŸ“ï¼Œ JSP æ¸²æŸ“ï¼Œç§»åŠ¨ç«¯å±•ç¤ºç­‰ã€‚ </li>\n<li>Web å±‚:ä¸»è¦æ˜¯å¯¹è®¿é—®æ§åˆ¶è¿›è¡Œè½¬å‘ï¼Œå„ç±»åŸºæœ¬å‚æ•°æ ¡éªŒï¼Œæˆ–è€…ä¸å¤ç”¨çš„ä¸šåŠ¡ç®€å•å¤„ç†ç­‰ã€‚ </li>\n<li>Service å±‚:ç›¸å¯¹å…·ä½“çš„ä¸šåŠ¡é€»è¾‘æœåŠ¡å±‚ã€‚ </li>\n<li>Manager å±‚:é€šç”¨ä¸šåŠ¡å¤„ç†å±‚ï¼Œå®ƒæœ‰å¦‚ä¸‹ç‰¹å¾:<ol>\n<li>å¯¹ç¬¬ä¸‰æ–¹å¹³å°å°è£…çš„å±‚ï¼Œé¢„å¤„ç†è¿”å›ç»“æœåŠè½¬åŒ–å¼‚å¸¸ä¿¡æ¯;</li>\n<li>å¯¹Serviceå±‚é€šç”¨èƒ½åŠ›çš„ä¸‹æ²‰ï¼Œå¦‚ç¼“å­˜æ–¹æ¡ˆã€ä¸­é—´ä»¶é€šç”¨å¤„ç†; </li>\n<li>ä¸DAOå±‚äº¤äº’ï¼Œå¯¹å¤šä¸ªDAOçš„ç»„åˆå¤ç”¨ã€‚ </li>\n</ol>\n</li>\n<li>DAO å±‚:æ•°æ®è®¿é—®å±‚ï¼Œä¸åº•å±‚ MySQLã€Oracleã€Hbase ç­‰è¿›è¡Œæ•°æ®äº¤äº’ã€‚ </li>\n<li>å¤–éƒ¨æ¥å£æˆ–ç¬¬ä¸‰æ–¹å¹³å°:åŒ…æ‹¬å…¶å®ƒéƒ¨é—¨RPCå¼€æ”¾æ¥å£ï¼ŒåŸºç¡€å¹³å°ï¼Œå…¶å®ƒå…¬å¸çš„HTTPæ¥å£ã€‚ </li>\n</ul>\n<h4 id=\"ã€å»ºè®®åˆ†å±‚æ–¹å¼ã€\"><a href=\"#ã€å»ºè®®åˆ†å±‚æ–¹å¼ã€\" class=\"headerlink\" title=\"ã€å»ºè®®åˆ†å±‚æ–¹å¼ã€\"></a>ã€å»ºè®®åˆ†å±‚æ–¹å¼ã€</h4><blockquote>\n<p>æ ¹æ®å·¥ä½œå®é™…æƒ…å†µï¼Œå‚è€ƒé˜¿é‡Œçš„åº”ç”¨åˆ†å±‚åé€‚å½“é‡‡çº³ã€‚</p>\n</blockquote>\n<p><img src=\"https://z201.oss-cn-shanghai.aliyuncs.com/JavaNote/%E4%BB%A3%E7%A0%81%E6%80%BB%E7%BB%93/%E5%BB%BA%E8%AE%AE%E5%BA%94%E7%94%A8%E5%88%86%E5%B1%82.png\"></p>\n<ul>\n<li><p>å¼€æ”¾æ¥å£å±‚:å¯ç›´æ¥å°è£… Service æ–¹æ³•æš´éœ²æˆ RPC æ¥å£;é€šè¿‡ Web å°è£…æˆ http æ¥å£;è¿›è¡Œ ç½‘å…³å®‰å…¨æ§åˆ¶ã€æµé‡æ§åˆ¶ç­‰ã€‚ </p>\n</li>\n<li><p><del>ç»ˆç«¯æ˜¾ç¤ºå±‚:å„ä¸ªç«¯çš„æ¨¡æ¿æ¸²æŸ“å¹¶æ‰§è¡Œæ˜¾ç¤ºçš„å±‚ã€‚å½“å‰ä¸»è¦æ˜¯ velocity æ¸²æŸ“ï¼ŒJS æ¸²æŸ“ï¼Œ JSP æ¸²æŸ“ï¼Œç§»åŠ¨ç«¯å±•ç¤ºç­‰</del>  </p>\n</li>\n<li><p><del>Web å±‚:ä¸»è¦æ˜¯å¯¹è®¿é—®æ§åˆ¶è¿›è¡Œè½¬å‘ï¼Œå„ç±»åŸºæœ¬å‚æ•°æ ¡éªŒï¼Œæˆ–è€…ä¸å¤ç”¨çš„ä¸šåŠ¡ç®€å•å¤„ç†ç­‰</del>  </p>\n</li>\n<li><p>Service å±‚:ç›¸å¯¹å…·ä½“çš„ä¸šåŠ¡é€»è¾‘æœåŠ¡å±‚ã€‚ </p>\n</li>\n<li><p>Manager å±‚:é€šç”¨ä¸šåŠ¡å¤„ç†å±‚ï¼Œå®ƒæœ‰å¦‚ä¸‹ç‰¹å¾:</p>\n<ol>\n<li><p>å¯¹ç¬¬ä¸‰æ–¹å¹³å°å°è£…çš„å±‚ï¼Œé¢„å¤„ç†è¿”å›ç»“æœåŠè½¬åŒ–å¼‚å¸¸ä¿¡æ¯ã€‚</p>\n</li>\n<li><p>å¯¹Serviceå±‚é€šç”¨èƒ½åŠ›çš„ä¸‹æ²‰ï¼Œå¦‚ç¼“å­˜æ–¹æ¡ˆã€ä¸­é—´ä»¶é€šç”¨å¤„ç†ã€‚</p>\n</li>\n<li><p>ä¸DAOå±‚äº¤äº’ï¼Œå¯¹å¤šä¸ªDAOçš„ç»„åˆå¤ç”¨ã€‚ </p>\n</li>\n</ol>\n</li>\n<li><p>DAO å±‚:æ•°æ®è®¿é—®å±‚ï¼Œä¸åº•å±‚ MySQLã€Oracleã€Hbase ç­‰è¿›è¡Œæ•°æ®äº¤äº’ã€‚ </p>\n</li>\n<li><p>å¤–éƒ¨æ¥å£æˆ–ç¬¬ä¸‰æ–¹å¹³å°:åŒ…æ‹¬å…¶å®ƒéƒ¨é—¨RPCå¼€æ”¾æ¥å£ï¼ŒåŸºç¡€å¹³å°ï¼Œå…¶å®ƒå…¬å¸çš„HTTPæ¥å£ã€‚</p>\n</li>\n</ul>\n<blockquote>\n<p>ç›®å‰Javaå·²ç»ä¸å†™å‰ç«¯ä»£ç ï¼Œæ‰€ä»¥ç»ˆç«¯æ˜¾ç¤ºå±‚å’ŒWebå·²ç»æ²¡æœ‰ä½¿ç”¨çš„ä»·å€¼ã€‚è¿™é‡Œéœ€è¦é¢å¤–çš„æ³¨æ„ï¼Œå¼€æ”¾æ¥å£å±‚ä¸éœ€è¦ä»»ä½•çš„ä¸šåŠ¡æ“ä½œï¼Œæ–¹ä¾¿åšå®Œæ•´çš„å•å…ƒæµ‹è¯•ã€‚å°†å‚æ•°æ ¡éªŒç­‰æ“ä½œæ”¾åœ¨å…·ä½“ä¸šåŠ¡æ‰§è¡Œçš„è¿‡ç¨‹ä¸­ã€‚</p>\n</blockquote>\n<h4 id=\"ã€å»ºè®®åˆ†å±‚å¼‚å¸¸å¤„ç†æ–¹å¼ã€\"><a href=\"#ã€å»ºè®®åˆ†å±‚å¼‚å¸¸å¤„ç†æ–¹å¼ã€\" class=\"headerlink\" title=\"ã€å»ºè®®åˆ†å±‚å¼‚å¸¸å¤„ç†æ–¹å¼ã€\"></a>ã€å»ºè®®åˆ†å±‚å¼‚å¸¸å¤„ç†æ–¹å¼ã€</h4><ul>\n<li>(åˆ†å±‚å¼‚å¸¸å¤„ç†è§„çº¦)åœ¨ DAO å±‚ï¼Œäº§ç”Ÿçš„å¼‚å¸¸ç±»å‹æœ‰å¾ˆå¤šï¼Œæ— æ³•ç”¨ç»†ç²’åº¦çš„å¼‚å¸¸è¿›è¡Œcatchï¼Œä½¿ç”¨catch(Exception e)æ–¹å¼ï¼Œå¹¶throw new xxxException(e)ï¼Œä¸éœ€è¦æ‰“å°æ—¥å¿—ï¼Œå› ä¸ºæ—¥å¿—åœ¨ Manager/Service å±‚ä¸€å®šéœ€è¦æ•è·å¹¶æ‰“å°åˆ°æ—¥å¿—æ–‡ä»¶ä¸­å»ï¼Œå¦‚æœåŒå°æœåŠ¡å™¨å†æ‰“æ—¥å¿—ï¼Œæµªè´¹æ€§èƒ½å’Œå­˜å‚¨ã€‚<code>åœ¨ Service å±‚å‡ºç°å¼‚å¸¸æ—¶ï¼Œå¿…é¡»è®°å½•å‡ºé”™æ—¥å¿—åˆ°ç£ç›˜ï¼Œå°½å¯èƒ½å¸¦ä¸Šå‚æ•°ä¿¡æ¯ï¼Œç›¸å½“äºä¿æŠ¤æ¡ˆå‘ç°åœº</code>ã€‚å¦‚æœ Manager å±‚ä¸ Service åŒæœºéƒ¨ç½²ï¼Œæ—¥å¿—æ–¹å¼ä¸ DAOå±‚å¤„ç†ä¸€è‡´ï¼Œå¦‚æœæ˜¯å•ç‹¬éƒ¨ç½²ï¼Œåˆ™é‡‡ç”¨ä¸ Service ä¸€è‡´çš„å¤„ç†æ–¹å¼ã€‚</li>\n</ul>\n<h4 id=\"ã€åˆ†å±‚é¢†åŸŸæ¨¡å‹è§„çº¦ã€\"><a href=\"#ã€åˆ†å±‚é¢†åŸŸæ¨¡å‹è§„çº¦ã€\" class=\"headerlink\" title=\"ã€åˆ†å±‚é¢†åŸŸæ¨¡å‹è§„çº¦ã€\"></a>ã€åˆ†å±‚é¢†åŸŸæ¨¡å‹è§„çº¦ã€</h4><ul>\n<li>DO(Data Object):æ­¤å¯¹è±¡ä¸æ•°æ®åº“è¡¨ç»“æ„ä¸€ä¸€å¯¹åº”ï¼Œé€šè¿‡ DAO å±‚å‘ä¸Šä¼ è¾“æ•°æ®æºå¯¹è±¡ã€‚ </li>\n<li>DTO(Data Transfer Object):æ•°æ®ä¼ è¾“å¯¹è±¡ï¼ŒService æˆ– Manager å‘å¤–ä¼ è¾“çš„å¯¹è±¡ã€‚ </li>\n<li>BO(Business Object):ä¸šåŠ¡å¯¹è±¡ï¼Œç”± Service å±‚è¾“å‡ºçš„å°è£…ä¸šåŠ¡é€»è¾‘çš„å¯¹è±¡ã€‚ </li>\n<li><del>AO(ApplicationObject):åº”ç”¨å¯¹è±¡ï¼Œåœ¨Webå±‚ä¸Serviceå±‚ä¹‹é—´æŠ½è±¡çš„å¤ç”¨å¯¹è±¡æ¨¡å‹ï¼Œ æä¸ºè´´è¿‘å±•ç¤ºå±‚ï¼Œå¤ç”¨åº¦ä¸é«˜</del>ã€‚</li>\n<li><del>VO(View Object):æ˜¾ç¤ºå±‚å¯¹è±¡ï¼Œé€šå¸¸æ˜¯ Web å‘æ¨¡æ¿æ¸²æŸ“å¼•æ“å±‚ä¼ è¾“çš„å¯¹è±¡</del>ã€‚</li>\n<li><del>Query:æ•°æ®æŸ¥è¯¢å¯¹è±¡ï¼Œå„å±‚æ¥æ”¶ä¸Šå±‚çš„æŸ¥è¯¢è¯·æ±‚ã€‚æ³¨æ„è¶…è¿‡ 2 ä¸ªå‚æ•°çš„å»ºè®®æŸ¥è¯¢å°è£…ï¼Œ<code>ç¦æ­¢ä½¿ç”¨ Map ç±»æ¥ä¼ è¾“</code>ã€‚</del> </li>\n</ul>\n<blockquote>\n<p>æ²¡æœ‰å¿…è¦è¿‡åº¦è®¾è®¡ã€å¯¼è‡´ä»£ç é‡å¢åŠ ã€‚DTOã€AOã€VO Query åœ¨å®é™…å¼€å‘è¿‡ç¨‹å®é™…ä¸Šå¯ä»¥å®Œå…¨å¤ç”¨ã€‚Queryæ˜¯æŸ¥è¯¢å‚æ•°,é€šå¸¸ç”¨äºç”¨æˆ·åˆ†é¡µæŸ¥è¯¢å’Œæ™®é€šå‚æ•°æŸ¥è¯¢ç­‰å°è£…ä½“ã€‚BOéœ€è¦é«˜åº¦æŠ½è±¡ï¼Œå±äºä¸šåŠ¡æ¨¡å‹ã€‚ç›®å‰æ¥å£æ•°æ®æ˜¾ç¤ºè¦æ±‚ä¸é«˜çš„æƒ…å†µå¯ä»¥é€‚å½“æ”¾å®½ï¼Œä¸ä½¿ç”¨ BOå±‚ã€‚</p>\n</blockquote>\n<h4 id=\"ã€åˆ†å±‚å‚è€ƒã€\"><a href=\"#ã€åˆ†å±‚å‚è€ƒã€\" class=\"headerlink\" title=\"ã€åˆ†å±‚å‚è€ƒã€\"></a>ã€åˆ†å±‚å‚è€ƒã€</h4><ul>\n<li>æ¨èçš„å‚è€ƒ</li>\n</ul>\n<blockquote>\n<p>ä¸»ç›®å½•ç¤ºä¾‹:com.github.z201.pre</p>\n<ul>\n<li>com.github.z201   å…¬å¸åŸŸå(è¿™åªæ˜¯ä¾‹å­)</li>\n<li>pre               é¡¹ç›®åç§°</li>\n<li>dao              æ¨¡å—åç§°</li>\n</ul>\n<p>æ¨¡å—ç¤ºä¾‹:com.github.z201.pre</p>\n<ul>\n<li>dao     #mybaitsæ¥å£æ˜ å°„å±‚</li>\n<li>entity  # mysqlè¡¨æ˜ å°„å±‚</li>\n<li>dto      # ç½‘ç»œä¼ è¾“å±‚</li>\n<li>manger # ç¬¬ä¸‰æ–¹ï¼ˆç¼“å­˜ã€äº‹åŠ¡ã€mpã€å¤–éƒ¨æ¥å£ï¼‰</li>\n<li>service  # ä¸»è¦ä¸šåŠ¡å®ç°ï¼ˆæ— äº‹åŠ¡å¤„ç†ã€ç®€å•ä¸šåŠ¡ï¼‰</li>\n<li>utils       # é¡¹ç›®å·¥å…·ç±»ï¼ˆè¯¥é¡¹ç›®ç‹¬ç«‹ä½¿ç”¨çš„ï¼‰</li>\n</ul>\n<p>å¯¹äºè¯¥æ¨¡å—å…³é”®æ¨¡å—ï¼Œå»ºè®®å•ç‹¬åŒºåˆ†ï¼Œç”¨äºè¯†åˆ«ã€‚æŒ‰ç…§é»„é‡‘æ³•åˆ™ï¼Œä¸€ä¸ªæ¨¡å—ä¸­æ ¸å¿ƒæ¥å£å°‘æ•°ã€‚</p>\n</blockquote>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">âœ  demo git:(develop) âœ— tree src/main -d -L 7</span><br><span class=\"line\">src/main</span><br><span class=\"line\">â”œâ”€â”€ java</span><br><span class=\"line\">â”‚Â Â  â””â”€â”€ com</span><br><span class=\"line\">â”‚Â Â      â””â”€â”€ github</span><br><span class=\"line\">â”‚Â Â          â””â”€â”€ z201</span><br><span class=\"line\">â”‚Â Â              â””â”€â”€ pre</span><br><span class=\"line\">â”‚Â Â                  â”œâ”€â”€ annotation <span class=\"comment\"># å…³é”®ä¸šåŠ¡ï¼ˆæ³¨è§£æ‹¦æˆªå±‚ï¼‰</span></span><br><span class=\"line\">â”‚Â Â                  â”œâ”€â”€ dao        <span class=\"comment\"># mybaitsæ¥å£æ˜ å°„å±‚</span></span><br><span class=\"line\">â”‚Â Â                  â”œâ”€â”€ entity     <span class=\"comment\"># å®ä½“æ˜ å°„å±‚</span></span><br><span class=\"line\">â”‚Â Â                  â”œâ”€â”€ dto     </span><br><span class=\"line\">â”‚Â                   â”‚   â”œâ”€â”€ cache\t <span class=\"comment\"># ç¼“å­˜ä¼ è¾“å±‚</span></span><br><span class=\"line\">â”‚Â Â                  â”‚Â Â  â”œâ”€â”€ param  <span class=\"comment\"># è¯·æ±‚å‚æ•°å°è£…ä½“ï¼ˆQueryçš„ç»†åŒ–ï¼‰</span></span><br><span class=\"line\">â”‚Â Â                  â”‚Â Â  â”œâ”€â”€ result <span class=\"comment\"># å“åº”å‚æ•°å°è£…ä½“</span></span><br><span class=\"line\">â”‚Â Â                  â”‚Â Â  â””â”€â”€ search <span class=\"comment\"># æŸ¥è¯¢å‚æ•°å°è£…ä½“ï¼ˆQueryçš„ç»†åŒ–ï¼‰</span></span><br><span class=\"line\">â”‚Â Â                  â”œâ”€â”€ <span class=\"built_in\">limit</span>      <span class=\"comment\"># å…³é”®ä¸šåŠ¡å®ç°ï¼ˆå…³é”®ä¸šåŠ¡ä¸å»ºè®®æ”¾åˆ°serviceå±‚ï¼Œæ–¹ä¾¿å¿«é€Ÿè¯†åˆ«ã€‚ï¼‰</span></span><br><span class=\"line\">â”‚Â Â                  â”‚Â Â  â””â”€â”€ impl</span><br><span class=\"line\">â”‚Â Â                  â”œâ”€â”€ manger     <span class=\"comment\"># ç¬¬ä¸‰æ–¹ï¼ˆç¼“å­˜ã€äº‹åŠ¡ã€mpã€å¤–éƒ¨æ¥å£ï¼‰</span></span><br><span class=\"line\">â”‚Â Â                  â”‚Â Â  â””â”€â”€ impl   <span class=\"comment\"># å®ç°ç±»</span></span><br><span class=\"line\">â”‚Â Â                  â”œâ”€â”€ service    <span class=\"comment\"># ä¸»è¦ä¸šåŠ¡å®ç°ï¼ˆæ— äº‹åŠ¡å¤„ç†ï¼‰</span></span><br><span class=\"line\">â”‚Â Â                  â”‚Â Â  â””â”€â”€ impl   <span class=\"comment\"># å®ç°ç±»</span></span><br><span class=\"line\">â”‚Â Â                  â””â”€â”€ utils      <span class=\"comment\"># é¡¹ç›®å·¥å…·ç±»ï¼ˆè¯¥é¡¹ç›®ç‹¬ç«‹ä½¿ç”¨çš„ï¼‰</span></span><br><span class=\"line\">â”‚Â Â                      â””â”€â”€ common  </span><br><span class=\"line\">â”‚Â Â                      </span><br><span class=\"line\">â””â”€â”€ resource</span><br><span class=\"line\">    â””â”€â”€ mapper <span class=\"comment\"># mybatisæ–‡ä»¶ã€‚</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"4ã€ä¿æŒä»£ç çš„æ•´æ´\"><a href=\"#4ã€ä¿æŒä»£ç çš„æ•´æ´\" class=\"headerlink\" title=\"4ã€ä¿æŒä»£ç çš„æ•´æ´\"></a>4ã€ä¿æŒä»£ç çš„æ•´æ´</h3><blockquote>\n<p>å†™å‡ºè¿è¡Œä»£ç ï¼ˆbugï¼‰æ˜¯ç®€å•çš„ã€å†™å‡ºé€‚åˆé˜…è¯»çš„ä»£ç æ˜¯å›°éš¾ï¼Œå»ºè®®é˜…è¯»<code>é˜¿é‡Œå·´å·´Javaå¼€å‘æ‰‹å†Œ</code> ä»¥åŠ<code>ç å‡ºé«˜æ•ˆJavaå¼€å‘æ‰‹å†Œ</code>ç›¸å…³ç« èŠ‚ã€‚è¿™é‡Œåšä¸‹å†…å®¹è¡¥å……ã€‚</p>\n</blockquote>\n<h4 id=\"ã€å°½å¯èƒ½å°‘å†™ä»£ç ã€\"><a href=\"#ã€å°½å¯èƒ½å°‘å†™ä»£ç ã€\" class=\"headerlink\" title=\"ã€å°½å¯èƒ½å°‘å†™ä»£ç ã€\"></a>ã€å°½å¯èƒ½å°‘å†™ä»£ç ã€</h4><blockquote>\n<p>å†™çš„è¶Šå¤šé”™çš„è¶Šå¤šï¼Œé”™çš„è¶Šå¤šä¿®å¤è¶Šéš¾ã€‚</p>\n</blockquote>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ä½¿ç”¨lombokè¯­æ³•ç³–ï¼Œç®€åŒ–æ¨¡ç‰ˆä»£ç ã€‚</span></span><br><span class=\"line\"><span class=\"meta\">@Data</span></span><br><span class=\"line\"><span class=\"meta\">@AllArgsConstructor</span></span><br><span class=\"line\"><span class=\"meta\">@NoArgsConstructor</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">SmSpaceFunctionCache</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * ä¸»é”®</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> Integer id;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * åŠŸèƒ½åç§°</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> String name;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * å›¾ç‰‡ä¸»é”®idï¼ˆä½¿ç”¨è¿è¥åå° sm_admin_pictrueè¡¨å­˜å‚¨å›¾ç‰‡)</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> Integer adminPictureId;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * å›¾ç‰‡åœ°å€</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> String picPath;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * æ’åº é»˜è®¤ 0</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> Integer orderBy;</span><br><span class=\"line\">\t\t<span class=\"comment\">// æ—  get ã€ set æ›´å¤šç‰¹æ€§è¯·æŸ¥é˜…lombokä½¿ç”¨æ–¹æ³•ã€‚</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"ã€æé«˜ä»£ç è¦†ç›–ç‡ã€\"><a href=\"#ã€æé«˜ä»£ç è¦†ç›–ç‡ã€\" class=\"headerlink\" title=\"ã€æé«˜ä»£ç è¦†ç›–ç‡ã€\"></a>ã€æé«˜ä»£ç è¦†ç›–ç‡ã€</h4><blockquote>\n<p>ï¼ˆé¿å…æ— è°ƒç”¨ä»£ç ï¼Œé¿å…è¿‡åº¦ä½¿ç”¨ä»£ç ç”Ÿæˆå™¨ï¼‰å¥å£®çš„ä»£ç æ˜¯å¹²å‡€ã€ç®€æ´çš„ã€‚é¿å…é‡å‹é¡¹ç›®å‡ºç°ï¼ˆä¿æŒé¡¹ç›®ä¸šåŠ¡ä»£ç 1-2Wè¡Œï¼Œå¯ä»¥é€‚å½“çš„æ¨¡å—åŒ–ï¼‰</p>\n</blockquote>\n<h4 id=\"ã€åˆç†æ‹†åˆ†ä»£ç é€»è¾‘ã€\"><a href=\"#ã€åˆç†æ‹†åˆ†ä»£ç é€»è¾‘ã€\" class=\"headerlink\" title=\"ã€åˆç†æ‹†åˆ†ä»£ç é€»è¾‘ã€\"></a>ã€åˆç†æ‹†åˆ†ä»£ç é€»è¾‘ã€</h4><blockquote>\n<p>ï¼ˆé¿å…ä»£ç è¿‡åº¦ä¼˜åŒ–å’Œè¿‡æ—©ä¼˜åŒ–ï¼Œ<code>éœ€æ±‚ä¸€å®šä¼šæ”¹ã€ä¸€å®šä¼šæ”¹ã€ä¸€å®šä¼šæ”¹</code>ï¼‰é€‚å½“è°ƒæ•´ä»£ç ï¼Œä¿è¯é˜…è¯»æ–¹ä¾¿å³å¯ã€‚æ¨èä½¿ç”¨é˜¿é‡Œ<code>p3c</code>ä»£ç æ£€æŸ¥å·¥å…·ã€‚é¬¼æ•…äº‹ï¼šæå…‰ç£Šä»¥å‰åŠåä¸ºçš„åŒäº‹ç”¨Eclipseï¼Œäººå®¶æ‰“æ­»ä¸è‚¯ç”¨ã€‚ä»–è‡ªå·±æèµ·æ¥ï¼Œç»™äººå®¶è¯´ï¼Œä½ çœ‹ï¼Œå¤šæ–¹ä¾¿ã€‚åä¸ºçš„åŒæ—¶é»˜é»˜çš„è¾“å…¥äº†ä¸€ä¸ªæ–‡ä»¶åï¼Œè·³è¿‡å»ï¼ŒEclipseå´©è´µäº†ï¼Œæ–‡ä»¶å¤ªå¤§ã€‚</p>\n</blockquote>\n<h4 id=\"ã€æ›´æ–°æ³¨é‡Šã€\"><a href=\"#ã€æ›´æ–°æ³¨é‡Šã€\" class=\"headerlink\" title=\"ã€æ›´æ–°æ³¨é‡Šã€\"></a>ã€æ›´æ–°æ³¨é‡Šã€</h4><blockquote>\n<p>ä»£ç åƒä¸‡è¡Œï¼Œæ³¨é‡Šç¬¬ä¸€è¡Œã€‚æ³¨é‡Šä¸è§„èŒƒï¼ŒåŒäº‹ä¸¤è¡Œæ³ªã€‚æ”¹ä»£ç ä¸æ”¹æ³¨é‡Šéå¸¸å®¹æ˜“è¯¯å¯¼ä»–äººã€‚å°½å¯èƒ½ä¿æŒä¸ªäººä»£ç çš„æ³¨é‡Šä¿¡æ¯åˆç†ã€‚</p>\n</blockquote>\n<h4 id=\"ã€é¢å‘æ¥å£ç¼–ç¨‹ã€\"><a href=\"#ã€é¢å‘æ¥å£ç¼–ç¨‹ã€\" class=\"headerlink\" title=\"ã€é¢å‘æ¥å£ç¼–ç¨‹ã€\"></a>ã€é¢å‘æ¥å£ç¼–ç¨‹ã€</h4><blockquote>\n<ul>\n<li>é¢å‘æ¥å£ç¼–ç¨‹å’Œé¢å‘å¯¹è±¡ç¼–ç¨‹å¹¶ä¸æ˜¯å¹³çº§çš„ï¼Œå®ƒå¹¶ä¸æ˜¯æ¯”é¢å‘å¯¹è±¡ç¼–ç¨‹æ›´å…ˆè¿›çš„ä¸€ç§ç‹¬ç«‹çš„ç¼–ç¨‹æ€æƒ³ï¼Œè€Œæ˜¯é™„å±äºé¢å‘å¯¹è±¡æ€æƒ³ä½“ç³»ï¼Œå±äºå…¶ä¸€éƒ¨åˆ†ã€‚æˆ–è€…è¯´ï¼Œå®ƒæ˜¯é¢å‘å¯¹è±¡ç¼–ç¨‹ä½“ç³»ä¸­çš„æ€æƒ³ç²¾é«“ä¹‹ä¸€ã€‚</li>\n<li>åœ¨ä¸€ä¸ªé¢å‘å¯¹è±¡çš„ç³»ç»Ÿä¸­ï¼Œç³»ç»Ÿçš„å„ç§åŠŸèƒ½æ˜¯ç”±è®¸è®¸å¤šå¤šçš„ä¸åŒå¯¹è±¡åä½œå®Œæˆçš„ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå„ä¸ªå¯¹è±¡å†…éƒ¨æ˜¯å¦‚ä½•å®ç°è‡ªå·±çš„,å¯¹ç³»ç»Ÿè®¾è®¡äººå‘˜æ¥è®²å°±ä¸é‚£ä¹ˆé‡è¦äº†ï¼›è€Œå„ä¸ªå¯¹è±¡ä¹‹é—´çš„åä½œå…³ç³»åˆ™æˆä¸ºç³»ç»Ÿè®¾è®¡çš„å…³é”®ã€‚å°åˆ°ä¸åŒç±»ä¹‹é—´çš„é€šä¿¡ï¼Œå¤§åˆ°å„æ¨¡å—ä¹‹é—´çš„äº¤äº’ï¼Œåœ¨ç³»ç»Ÿè®¾è®¡ä¹‹åˆéƒ½æ˜¯è¦ç€é‡è€ƒè™‘çš„ï¼Œè¿™ä¹Ÿæ˜¯ç³»ç»Ÿè®¾è®¡çš„ä¸»è¦å·¥ä½œå†…å®¹ã€‚é¢å‘æ¥å£ç¼–ç¨‹å°±æ˜¯æŒ‡æŒ‰ç…§è¿™ç§æ€æƒ³æ¥ç¼–ç¨‹ã€‚</li>\n</ul>\n</blockquote>\n<ul>\n<li>é™ä½ç¨‹åºçš„è€¦åˆæ€§ã€‚åœ¨ç¨‹åºä¸­ç´§å¯†çš„è”ç³»å¹¶ä¸æ˜¯ä¸€ä»¶å¥½çš„äº‹æƒ…ï¼Œå› ä¸ºä¸¤ç§äº‹ç‰©ä¹‹é—´è”ç³»è¶Šç´§å¯†ï¼Œæ›´æ¢å…¶ä¸­ä¹‹ä¸€çš„éš¾åº¦å°±è¶Šå¤§ï¼Œæ‰©å±•åŠŸèƒ½å’Œdebugçš„éš¾åº¦ä¹Ÿå°±è¶Šå¤§ã€‚ </li>\n<li>æ˜“äºç¨‹åºçš„æ‰©å±•ã€‚</li>\n<li>æœ‰åˆ©äºç¨‹åºçš„ç»´æŠ¤ã€‚</li>\n</ul>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * ç¤ºä¾‹ä»£ç ,åœ¨æ¥å£æš´éœ²å±‚ï¼Œæ˜¯ä¸å»ºè®®åšä»»ä½•çš„ä¸šåŠ¡æ“ä½œã€‚å»ºè®®ä½¿ç”¨beanå°è£…æ•°æ®ã€‚</span></span><br><span class=\"line\"><span class=\"comment\"> **/</span></span><br><span class=\"line\"><span class=\"meta\">@RestController</span></span><br><span class=\"line\"><span class=\"meta\">@RequestMapping</span>(FunctionController.ROUTER_INDEX)</span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">FunctionController</span></span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> String ROUTER_INDEX = <span class=\"string\">\"/api/space\"</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Autowired</span></span><br><span class=\"line\">    PackageFunctionServiceI packageFunctionService;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * è·å–åŠŸèƒ½åˆ†é¡µåˆ—è¡¨</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@return</span></span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"meta\">@PostMapping</span>(<span class=\"string\">\"/function/list\"</span>)</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> Object <span class=\"title\">listSpaceFunction</span><span class=\"params\">(@RequestBody SpacePackageFunctionSearch pageSearch)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> packageFunctionService.listSpaceFunction(pageSearch);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  .....</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>if/for/while/switch/doç­‰ä¿ç•™å­—ä¸å·¦å³æ‹¬å·ä¹‹é—´éƒ½å¿…é¡»åŠ ç©ºæ ¼ã€‚</li>\n</ul>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"># åˆç†çš„å¢åŠ ç©ºæ ¼ï¼Œæ–¹ä¾¿é˜…è¯»ä»£ç ã€‚</span><br><span class=\"line\"><span class=\"keyword\">if</span> (<span class=\"keyword\">null</span> == endTime || <span class=\"number\">0L</span> == endTime) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> RuntimeException(<span class=\"string\">\"è·å–ç”¨æˆ·vipçš„åˆ°æœŸæ—¶é—´å¤±è´¥äº†ï¼Œæ•°æ®å‡ºç°å¼‚å¸¸ã€‚ï½ï½ï½\"</span>);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"5ã€é˜²å¾¡å¼ç¼–ç¨‹\"><a href=\"#5ã€é˜²å¾¡å¼ç¼–ç¨‹\" class=\"headerlink\" title=\"5ã€é˜²å¾¡å¼ç¼–ç¨‹\"></a>5ã€é˜²å¾¡å¼ç¼–ç¨‹</h3><ul>\n<li>è¯·ä¸è¦ç›¸ä¿¡ä»»ä½•å‚æ•°ã€‚å°½å¯èƒ½ä¿æŒå®¢è§‚çš„æ€åº¦ç¼–å†™ä»£ç ã€‚å‚è€ƒ&lt;&lt;ä»£ç å¤§å…¨&gt;&gt; <code>ã€äººç±»éƒ½æ˜¯ä¸å®‰å…¨ã€ä¸å€¼å¾—ä¿¡ä»»çš„ï¼Œæ‰€æœ‰çš„äººï¼Œéƒ½ä¼šçŠ¯é”™è¯¯ï¼Œè€Œä½ å†™çš„ä»£ç ï¼Œåº”è¯¥è€ƒè™‘åˆ°æ‰€æœ‰å¯èƒ½å‘ç”Ÿçš„é”™è¯¯ï¼Œè®©ä½ çš„ç¨‹åºä¸ä¼šå› ä¸ºä»–äººçš„é”™è¯¯è€Œå‘ç”Ÿé”™è¯¯ã€</code></li>\n</ul>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// è¿™æ˜¯ä»å†…éƒ¨æ¥å£è°ƒç”¨çš„æ•°æ®ï¼Œé¦–å…ˆä¸ä¿¡ä»»ç»™çš„æ•°æ®ã€‚é¿å…å¸¸è§„é”™è¯¯å¯¼è‡´è‡ªå·±çš„é€»è¾‘å‡ºç°æ˜æ˜¾çš„bugã€‚</span></span><br><span class=\"line\"><span class=\"comment\">// è·å–vipçš„åˆ°æœŸæ—¶é—´</span></span><br><span class=\"line\"><span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">  endTime = spaceVipCacheService.getSpaceVipEndTimeByUserId(userId);</span><br><span class=\"line\">&#125; <span class=\"keyword\">catch</span> (InvalidProtocolBufferException e) &#123;</span><br><span class=\"line\">  log.warn(<span class=\"string\">\"è·å–ç”¨æˆ·vipçš„åˆ°æœŸæ—¶é—´å¤±è´¥äº†ï¼Œç³»ç»Ÿå‡ºç°å¼‚å¸¸ã€‚ï½ï½ï½ \"</span>);</span><br><span class=\"line\">  <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> RuntimeException(<span class=\"string\">\"è·å–ç”¨æˆ·vipçš„åˆ°æœŸæ—¶é—´å¤±è´¥äº†ï¼Œç³»ç»Ÿå‡ºç°å¼‚å¸¸ã€‚ï½ï½ï½\"</span>);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">if</span> (<span class=\"keyword\">null</span> == endTime || <span class=\"number\">0L</span> == endTime) &#123;</span><br><span class=\"line\">  log.warn(<span class=\"string\">\"è·å–ç”¨æˆ·vipçš„åˆ°æœŸæ—¶é—´å¤±è´¥äº†ï¼Œç³»ç»Ÿå‡ºç°å¼‚å¸¸ã€‚ï½ï½ï½ \"</span>);</span><br><span class=\"line\">  <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> RuntimeException(<span class=\"string\">\"è·å–ç”¨æˆ·vipçš„åˆ°æœŸæ—¶é—´å¤±è´¥äº†ï¼Œæ•°æ®å‡ºç°å¼‚å¸¸ã€‚ï½ï½ï½\"</span>);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"6ã€æŠ›å¼‚å¸¸-or-è¿”å›é”™è¯¯ç -or-æ—¥å¿—\"><a href=\"#6ã€æŠ›å¼‚å¸¸-or-è¿”å›é”™è¯¯ç -or-æ—¥å¿—\" class=\"headerlink\" title=\"6ã€æŠ›å¼‚å¸¸ or è¿”å›é”™è¯¯ç  or æ—¥å¿—\"></a>6ã€æŠ›å¼‚å¸¸ or è¿”å›é”™è¯¯ç  or æ—¥å¿—</h3><blockquote>\n<p>å…¬å¸å¤–çš„http/apiå¼€æ”¾æ¥å£å¿…é¡»ä½¿ç”¨â€œé”™è¯¯ç â€ï¼›åº”ç”¨å†…éƒ¨æ¨èå¼‚å¸¸æŠ›å‡º(é€‚å½“æŠ›å‡ºå †æ ˆï¼Œæ€§èƒ½å½±å“)ã€‚é¿å…æ¶æ„è¯·æ±‚æ¥å£ï¼Œå¹¶é€šè¿‡è¿”å›æ¶ˆæ¯çŒœå‡ºæ¥å£å‚æ•°çš„é—®é¢˜ã€‚æ—¥å¿—æ–‡ä»¶æ¨èè‡³å°‘ä¿å­˜15å¤©ï¼Œå› ä¸ºæœ‰äº›å¼‚å¸¸å…·å¤‡ä»¥â€œå‘¨â€ä¸ºé¢‘æ¬¡å‘ç”Ÿçš„ç‰¹ç‚¹ã€‚</p>\n</blockquote>\n<ul>\n<li>å°±javaæ—¥å¿—æ¡†æ¶è€Œè¨€ï¼Œå»ºè®®ä½¿ç”¨ä¾¨æ¥slf4jæ¥è¾“å‡ºæ—¥å¿—ã€‚<ul>\n<li>å½“é‡åˆ°é—®é¢˜çš„æ—¶å€™ï¼Œåªèƒ½åŠŸè¿‡debugåŠŸèƒ½æ¥ç¡®å®šé—®é¢˜ã€‚åº”è¯¥è€ƒè™‘è¾“å‡ºæ—¥å¿—ä¿¡æ¯ï¼Œè‰¯å¥½çš„ç³»ç»Ÿæ—¥å¿—ä¿¡æ¯å¯¹é—®é¢˜è¿›è¡Œå®šä½çš„ã€‚</li>\n<li>é¡¹ç›®ä¸­å¤§é‡çš„åˆ†æ”¯åˆ¤æ–­if \\elseã€switch çš„åˆ†æ”¯æ—¶å€™ä½¿ç”¨æ—¥å¿—å¯ä»¥å®šä½å…·ä½“æ˜¯å“ªä¸ªä¸šåŠ¡æµç¨‹ã€‚</li>\n</ul>\n</li>\n</ul>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//å°½å¯èƒ½å‚æ•°åŒ–æ—¥å¿—ä¿¡æ¯ï¼Œæ—¥å¿—æ˜¯ç»™äººçœ‹çš„ã€‚ä¸æ˜¯ä¸ºäº†è¾“å‡ºè€Œè¾“å‡ºã€‚å…³é”®å‚æ•°å¯ä»¥éš”ç¦»æ˜¾ç¤ºæ¯”å¦‚ [&#123;&#125;]</span></span><br><span class=\"line\">logger.debug(<span class=\"string\">\"è¿™æ˜¯ä¸€æ¡debugæ—¥å¿— [&#123;&#125;]\"</span> , userId);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// å¯¹äºdebugæ—¥å¿—ï¼Œå¿…é¡»åˆ¤æ–­æ—¥å¿—çš„çº§åˆ«æ‰èƒ½è¿›è¡Œè¾“å‡ºã€‚</span></span><br><span class=\"line\"><span class=\"keyword\">if</span>(logger.isDebugEnabled())&#123;</span><br><span class=\"line\">  logger.debug(<span class=\"string\">\"è¿™æ˜¯ä¸€æ¡debugæ—¥å¿— [&#123;&#125;]\"</span> , userId);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// é¿å…ä½¿ç”¨å­—ç¬¦ä¸²æ‹¼æ¥çš„æ–¹å¼è¾“å‡ºæ—¥å¿—ï¼Œè¿™æ ·ä¼šå¯¼è‡´ç”Ÿäº§äº†å¾ˆå¤šçš„stringå¯¹è±¡ã€‚</span></span><br><span class=\"line\">logger.debug(<span class=\"string\">\"è¿™æ˜¯ä¸€æ¡å­—ç¬¦ä¸²æ‹¼æ¥çš„æ—¥å¿—è¾“å‡º : [\"</span>  + userId +<span class=\"string\">\"]\"</span>);</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>æ—¥å¿—çº§åˆ«çš„ä½¿ç”¨<ul>\n<li><code>æ—¥å¿—çº§åˆ« trace, debug, info, warn, error, fatal</code></li>\n</ul>\n</li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\"> è¿™é‡Œä»¥log4jç›¸å…³çš„æ—¥å¿—çš„æ‰“å°çº§åˆ«ï¼ŒOFFå³ä¸æ‰“å°ï¼Œå…¶ä»–åˆ™æŒ‰ç…§æ ‡å‡†çº§åˆ«é…ç½®å³å¯ï¼Œå¦‚ debug </span><br><span class=\"line\">       å…³é—­ï¼šOFF(0)</span><br><span class=\"line\">è‡´å‘½ï¼šFATAL(100)ï¼Œå¯¹åº”Logger.fatalæ–¹æ³•</span><br><span class=\"line\">é”™è¯¯ï¼šERROR(200)ï¼Œå¯¹åº”Logger.erroræ–¹æ³•</span><br><span class=\"line\">è­¦å‘Šï¼šWARN(300)ï¼Œå¯¹åº”Logger.warnæ–¹æ³•</span><br><span class=\"line\">ä¿¡æ¯ï¼šINFO(400)ï¼Œå¯¹åº”Logger.infoæ–¹æ³•</span><br><span class=\"line\">è°ƒè¯•ï¼šDEBUG(500)ï¼Œå¯¹åº”Logger.debugæ–¹æ³•</span><br><span class=\"line\">è·Ÿè¸ªï¼šTRACE(600)ï¼Œå¯¹åº”Logger.traceæ–¹æ³•</span><br><span class=\"line\">å…¨éƒ¨ï¼šALL(Integer.MAX_VALUE)</span><br><span class=\"line\">å½“æŒ‡å®šæŸä¸€ä¸ªçº§åˆ«æ—¶ï¼Œæ¯”å¦‚DEBUGï¼Œé‚£ä¹ˆæ‰€æœ‰ä½äºè¿™ä¸ªçº§åˆ«çš„å…¶å®ƒçº§åˆ«æ—¥å¿—ï¼Œéƒ½ä¼šè¢«æ‰“å°ã€‚</span><br><span class=\"line\">å½“æŒ‡å®šçº§åˆ«ä¸ºDEBUGæ—¶ï¼ŒLogger.debugã€Logger.infoã€Logger.warnã€Logger.errorä»¥åŠLogger.fatalç­‰æ–¹æ³•</span><br><span class=\"line\">éƒ½èƒ½è¾“å‡ºæ—¥å¿—ï¼Œä½†Logger.traceæ— æ³•è¾“å‡ºæ—¥å¿—ã€‚</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>errorï¼šå¯¹äºå½±å“åˆ°ç¨‹åºæ­£å¸¸è¿è¡Œçš„ä¿¡æ¯ï¼Œéœ€è¦åŠæ—¶è¡¥è´§å¹¶è¾“å‡ºï¼Œé€‚ç”¨èŒƒå›´<code>é…ç½®æ–‡ä»¶è¯»å–å¤±è´¥ã€ç¬¬ä¸‰æ–¹è°ƒç”¨å¤±è´¥ã€æ•°æ®åº“è¿æ¥å¤±è´¥ã€ç¼“å­˜ç­‰å…³é”®ç»„ä»¶å¤±è´¥å¼‚å¸¸</code></li>\n</ul>\n<h3 id=\"7ã€æ–¹æ³•å‘½åã€å˜é‡å‘½å\"><a href=\"#7ã€æ–¹æ³•å‘½åã€å˜é‡å‘½å\" class=\"headerlink\" title=\"7ã€æ–¹æ³•å‘½åã€å˜é‡å‘½å\"></a>7ã€æ–¹æ³•å‘½åã€å˜é‡å‘½å</h3><blockquote>\n<p>å»ºè®®é˜…è¯»<code>é˜¿é‡Œå·´å·´Javaå¼€å‘æ‰‹å†Œ</code> ä»¥åŠ<code>ç å‡ºé«˜æ•ˆJavaå¼€å‘æ‰‹å†Œ</code>ç›¸å…³ç« èŠ‚ã€‚è¿™é‡Œåšä¸‹å†…å®¹è¡¥å……ã€‚</p>\n</blockquote>\n<ul>\n<li><p>å˜é‡å‘½å</p>\n<blockquote>\n<p>å¦‚æœæƒ³ä¸åˆ°åˆé€‚çš„å˜é‡åå­—ï¼Œéº»çƒ¦æŠŠæ³¨é‡Šå†™æ¸…æ¥šã€‚å¦‚æœè¿æ€è€ƒçš„æ—¶é—´éƒ½æ²¡æœ‰è¯·ä½¿ç”¨TODOæ ‡è®°ã€‚</p>\n</blockquote>\n</li>\n<li><p>serviceå±‚</p>\n<blockquote>\n<p>å¦‚æœæƒ³ä¸åˆ°åˆé€‚çš„æ–¹æ³•åå­—ï¼Œéº»çƒ¦æŠŠæ³¨é‡Šå†™å…¨ã€‚å¦‚æœè¿æ€è€ƒçš„æ—¶é—´éƒ½æ²¡æœ‰è¯·ä½¿ç”¨TODOæ ‡è®°ã€‚</p>\n</blockquote>\n</li>\n<li><p>Daoå±‚</p>\n<blockquote>\n<p>å¦‚æœæ˜¯æ‰¹é‡å»ºè®®åŠ ä¸ŠBatchã€‚</p>\n</blockquote>\n</li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">è·å–å•ä¸ªå¯¹è±¡ &#96;getXxx&#96;</span><br><span class=\"line\">è·å–å¤šä¸ªå¯¹è±¡&#96;listXxx&#96;</span><br><span class=\"line\">é€šè¿‡å¤æ‚çš„æŸ¥è¯¢&#96;listXxxBySearch&#96;è¿™é‡Œçš„&#96;search&#96;å°±æ˜¯å‚æ•°å°è£…ä½“</span><br><span class=\"line\">è·å–ç»Ÿè®¡å€¼ &#96;countXxx&#96;</span><br><span class=\"line\">æ’å…¥&#96;saveXxx&#96; &#x2F; &#96;insertXxx&#96;</span><br><span class=\"line\">åˆ é™¤ &#96;removeXxx&#96; &#x2F; &#96;deleteXxx&#96;</span><br><span class=\"line\">ä¿®æ”¹ &#96;updateXxx&#96;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"8ã€Redis\"><a href=\"#8ã€Redis\" class=\"headerlink\" title=\"8ã€Redis\"></a>8ã€Redis</h3><ul>\n<li>keyåè®¾è®¡</li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">#å»ºè®®ï¼šå¯è¯»æ€§å’Œå¯ç®¡ç†æ€§ï¼ˆredisä½œä¸ºæ ‡å‡†ç¼“å­˜æ—¶æ¨èï¼‰</span><br><span class=\"line\">#ä»¥ä¸šåŠ¡å(æˆ–æ•°æ®åº“å)ä¸ºå‰ç¼€(é˜²æ­¢keyå†²çª)ï¼Œç”¨å†’å·åˆ†éš”ï¼Œæ¯”å¦‚ä¸šåŠ¡å:è¡¨å:id</span><br><span class=\"line\">ugc:video:1</span><br><span class=\"line\"></span><br><span class=\"line\">#ç®€æ´æ€§</span><br><span class=\"line\">#å»ºè®®ï¼šä¿è¯è¯­ä¹‰çš„å‰æä¸‹ï¼Œæ§åˆ¶keyçš„é•¿åº¦ï¼Œå½“keyè¾ƒå¤šæ—¶ï¼Œå†…å­˜å ç”¨ä¹Ÿä¸å®¹å¿½è§†ï¼Œä¾‹å¦‚ï¼š</span><br><span class=\"line\">user:&#123;uid&#125;:friends:messages:&#123;mid&#125;ç®€åŒ–ä¸ºu:&#123;uid&#125;:fr:m:&#123;mid&#125;ã€‚</span><br><span class=\"line\"></span><br><span class=\"line\">#å¼ºåˆ¶ï¼šä¸è¦åŒ…å«ç‰¹æ®Šå­—ç¬¦</span><br><span class=\"line\">åä¾‹ï¼šåŒ…å«ç©ºæ ¼ã€æ¢è¡Œã€å•åŒå¼•å·ä»¥åŠå…¶ä»–è½¬ä¹‰å­—ç¬¦</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>valueè®¾è®¡</li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\"># å¼ºåˆ¶ï¼šæ‹’ç»bigkey(é˜²æ­¢ç½‘å¡æµé‡ã€æ…¢æŸ¥è¯¢)</span><br><span class=\"line\">stringç±»å‹æ§åˆ¶åœ¨20KBä»¥å†…ï¼Œhashã€listã€setã€zsetå…ƒç´ ä¸ªæ•°ä¸è¦è¶…è¿‡5000ï¼Œè¿™é‡ŒæŒ‡çš„æ˜¯field(ä¸æ˜¯key)ã€‚</span><br><span class=\"line\"># åä¾‹ï¼šä¸€ä¸ªåŒ…å«200ä¸‡ä¸ªå…ƒç´ çš„listã€‚</span><br><span class=\"line\">éå­—ç¬¦ä¸²çš„bigkeyï¼Œä¸è¦ä½¿ç”¨delåˆ é™¤ï¼Œä½¿ç”¨hscanã€sscanã€zscanæ–¹å¼æ¸è¿›å¼åˆ é™¤ï¼ŒåŒæ—¶è¦æ³¨æ„é˜²æ­¢bigkeyè¿‡æœŸæ—¶é—´è‡ªåŠ¨åˆ é™¤é—®é¢˜(ä¾‹å¦‚ä¸€ä¸ª200ä¸‡çš„zsetè®¾ç½®1å°æ—¶è¿‡æœŸï¼Œä¼šè§¦å‘delæ“ä½œï¼Œé€ æˆé˜»å¡ï¼Œè€Œä¸”è¯¥æ“ä½œä¸ä¼šä¸å‡ºç°åœ¨æ…¢æŸ¥è¯¢ä¸­(latencyå¯æŸ¥))ã€‚</span><br><span class=\"line\"></span><br><span class=\"line\"># å»ºè®®- é€‰æ‹©é€‚åˆçš„æ•°æ®ç±»å‹ã€‚</span><br><span class=\"line\">ä¾‹å¦‚ï¼šå®ä½“ç±»å‹(è¦åˆç†æ§åˆ¶å’Œä½¿ç”¨æ•°æ®ç»“æ„å†…å­˜ç¼–ç ä¼˜åŒ–é…ç½®,ä¾‹å¦‚ziplistï¼Œä½†ä¹Ÿè¦æ³¨æ„èŠ‚çœå†…å­˜å’Œæ€§èƒ½ä¹‹é—´çš„å¹³è¡¡)</span><br><span class=\"line\"></span><br><span class=\"line\"># åä¾‹</span><br><span class=\"line\">set user:1:name tom</span><br><span class=\"line\">set user:1:age 19</span><br><span class=\"line\">set user:1:favor football</span><br><span class=\"line\"></span><br><span class=\"line\">æ”¹è¿›</span><br><span class=\"line\">hmset user:1 name tom age 19 favor football</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>æ§åˆ¶keyçš„ç”Ÿå‘½å‘¨æœŸï¼Œredisä¸æ˜¯åƒåœ¾æ¡¶ã€‚</li>\n</ul>\n<p><code>å»ºè®®ä½¿ç”¨expireè®¾ç½®è¿‡æœŸæ—¶é—´(æ¡ä»¶å…è®¸å¯ä»¥æ‰“æ•£è¿‡æœŸæ—¶é—´ï¼Œé˜²æ­¢é›†ä¸­è¿‡æœŸ)ï¼Œä¸è¿‡æœŸçš„æ•°æ®é‡ç‚¹å…³æ³¨idletimeã€‚</code></p>\n<ul>\n<li>ã€å»ºè®®ã€‘ï¼šç¦ç”¨å‘½ä»¤</li>\n</ul>\n<p>ç¦æ­¢çº¿ä¸Šï¼ˆæ­£å¼ç¯å¢ƒï¼‰ä½¿ç”¨keysã€flushallã€flushdbç­‰ï¼Œé€šè¿‡redisçš„renameæœºåˆ¶ç¦æ‰å‘½ä»¤ï¼Œæˆ–è€…ä½¿ç”¨scançš„æ–¹å¼æ¸è¿›å¼å¤„ç†ã€‚</p>\n<ul>\n<li>ã€å»ºè®®ã€‘ä½¿ç”¨æ‰¹é‡æ“ä½œæé«˜æ•ˆç‡</li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">åŸç”Ÿå‘½ä»¤ï¼šä¾‹å¦‚mgetã€msetã€‚</span><br><span class=\"line\">éåŸç”Ÿå‘½ä»¤ï¼šå¯ä»¥ä½¿ç”¨pipelineæé«˜æ•ˆç‡ã€‚</span><br><span class=\"line\">ä½†è¦æ³¨æ„æ§åˆ¶ä¸€æ¬¡æ‰¹é‡æ“ä½œçš„å…ƒç´ ä¸ªæ•°(ä¾‹å¦‚500ä»¥å†…ï¼Œå®é™…ä¹Ÿå’Œå…ƒç´ å­—èŠ‚æ•°æœ‰å…³)ã€‚</span><br><span class=\"line\">æ³¨æ„ä¸¤è€…ä¸åŒï¼š</span><br><span class=\"line\">1. åŸç”Ÿæ˜¯åŸå­æ“ä½œï¼Œpipelineæ˜¯éåŸå­æ“ä½œã€‚</span><br><span class=\"line\">2. pipelineå¯ä»¥æ‰“åŒ…ä¸åŒçš„å‘½ä»¤ï¼ŒåŸç”Ÿåšä¸åˆ°ã€‚</span><br><span class=\"line\">3. pipelineéœ€è¦å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯åŒæ—¶æ”¯æŒã€‚</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>ã€å»ºè®®ã€‘Redisï¼ˆä¼ªï¼‰äº‹åŠ¡åŠŸèƒ½è¾ƒå¼±ï¼Œä¸å»ºè®®è¿‡å¤šä½¿ç”¨</li>\n</ul>\n<p>Redisçš„äº‹åŠ¡åŠŸèƒ½è¾ƒå¼±(ä¸æ”¯æŒå›æ»š)ï¼Œè€Œä¸”é›†ç¾¤ç‰ˆæœ¬(è‡ªç ”å’Œå®˜æ–¹)è¦æ±‚ä¸€æ¬¡äº‹åŠ¡æ“ä½œçš„keyå¿…é¡»åœ¨ä¸€ä¸ªslotä¸Š(å¯ä»¥ä½¿ç”¨hashtagåŠŸèƒ½è§£å†³)ã€‚</p>\n","categories":["è½¯ä»¶å·¥ç¨‹"]},{"title":"Ideaå¸¸ç”¨æ’ä»¶","url":"/posts/1247507960/","content":"<blockquote>\n<p>æœ‰å¿…è¦è®°å½•ä¸‹è‡ªå·±å¸¸ç”¨çš„æ’ä»¶ï¼Œé¿å…ç‰¹æ®Šäº‹ä»¶çš„å‘ç”Ÿã€‚</p>\n</blockquote>\n<h4 id=\"Free-Mybatis-plugin\"><a href=\"#Free-Mybatis-plugin\" class=\"headerlink\" title=\"Free Mybatis plugin\"></a>Free Mybatis plugin</h4><blockquote>\n<p>Mybatis æ’ä»¶ï¼Œå¯ä»¥å®šä½javaå’Œxmlå…³ç³»ã€‚é€šè¿‡javaæ¥å£å¿«é€Ÿç”Ÿæˆç›¸å…³xmlæ–‡ä»¶æˆ–è€…æ–¹æ³•ã€‚</p>\n</blockquote>\n<h4 id=\"Mybaits-Log-plugin\"><a href=\"#Mybaits-Log-plugin\" class=\"headerlink\" title=\"Mybaits Log plugin\"></a>Mybaits Log plugin</h4><blockquote>\n<p>ä½¿ç”¨æ’ä»¶å°†mybaitsé»˜è®¤çš„æ—¥å¿—è¾“å‡ºè½¬æ¢æˆå¯ä»¥è¿è¡Œçš„sqlæ—¥å¿—ã€‚</p>\n</blockquote>\n<h4 id=\"Alibaba-java-coding-guidelines\"><a href=\"#Alibaba-java-coding-guidelines\" class=\"headerlink\" title=\"Alibaba-java-coding-guidelines\"></a>Alibaba-java-coding-guidelines</h4><blockquote>\n<p>é˜¿é‡Œå·´å·´javaä»£ç æ£€æŸ¥å·¥å…·</p>\n</blockquote>\n<h4 id=\"json2pojo\"><a href=\"#json2pojo\" class=\"headerlink\" title=\"json2pojo\"></a>json2pojo</h4><blockquote>\n<p>jsonè½¬beançš„å·¥å…·</p>\n</blockquote>\n<h4 id=\"æŸ¥çœ‹æŸä¸ªæ–¹æ³•è¢«è°ƒç”¨çš„åœ°æ–¹ã€‚-é¼ æ ‡é€‰ä¸­æ–¹æ³•åç§°\"><a href=\"#æŸ¥çœ‹æŸä¸ªæ–¹æ³•è¢«è°ƒç”¨çš„åœ°æ–¹ã€‚-é¼ æ ‡é€‰ä¸­æ–¹æ³•åç§°\" class=\"headerlink\" title=\"æŸ¥çœ‹æŸä¸ªæ–¹æ³•è¢«è°ƒç”¨çš„åœ°æ–¹ã€‚(é¼ æ ‡é€‰ä¸­æ–¹æ³•åç§°)\"></a>æŸ¥çœ‹æŸä¸ªæ–¹æ³•è¢«è°ƒç”¨çš„åœ°æ–¹ã€‚(é¼ æ ‡é€‰ä¸­æ–¹æ³•åç§°)</h4><p><code>Navigate | Call Hierarchy </code> å¿«æ·é”®<code>control + option + h</code></p>\n<h4 id=\"Genterate-ä»£ç ç”Ÿæˆ\"><a href=\"#Genterate-ä»£ç ç”Ÿæˆ\" class=\"headerlink\" title=\"Genterate ä»£ç ç”Ÿæˆ\"></a>Genterate ä»£ç ç”Ÿæˆ</h4><p><code>Code | Genterate</code> #å¿«æ·é”® <code>command + n</code></p>\n<h4 id=\"Copyright-æ¨¡ç‰ˆ\"><a href=\"#Copyright-æ¨¡ç‰ˆ\" class=\"headerlink\" title=\"Copyright æ¨¡ç‰ˆ\"></a>Copyright æ¨¡ç‰ˆ</h4><p><code>Edit | Copyright | Copyright profiles </code></p>\n<ul>\n<li>æ ·æ¿</li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">Copyright (c) $today.year  </span><br><span class=\"line\">@Author:z201.coding@gamil.com</span><br><span class=\"line\">@LastModified:$today.format(&quot;yyyy-MM-dd&quot;)</span><br></pre></td></tr></table></figure>\n\n<a id=\"more\"></a>\n\n<h4 id=\"Maven-Helper\"><a href=\"#Maven-Helper\" class=\"headerlink\" title=\"Maven Helper\"></a>Maven Helper</h4><ul>\n<li>è§£æmaven pomç»“æ„ï¼Œåˆ†æå†²çªï¼›</li>\n</ul>\n<h4 id=\"å¿«æ·æœç´¢\"><a href=\"#å¿«æ·æœç´¢\" class=\"headerlink\" title=\"å¿«æ·æœç´¢\"></a>å¿«æ·æœç´¢</h4><p><code>shift ä¸¤æ¬¡</code></p>\n<h4 id=\"å…¨æ–‡æœç´¢\"><a href=\"#å…¨æ–‡æœç´¢\" class=\"headerlink\" title=\"å…¨æ–‡æœç´¢\"></a>å…¨æ–‡æœç´¢</h4><p><code>command + shift + f</code></p>\n<h4 id=\"æŸ¥æ‰¾æ¥å£çš„å®ç°ç±»ï¼š\"><a href=\"#æŸ¥æ‰¾æ¥å£çš„å®ç°ç±»ï¼š\" class=\"headerlink\" title=\"æŸ¥æ‰¾æ¥å£çš„å®ç°ç±»ï¼š\"></a>æŸ¥æ‰¾æ¥å£çš„å®ç°ç±»ï¼š</h4><p> ctrl + alt +B </p>\n<h4 id=\"æŸ¥çœ‹ç±»æˆ–æ¥å£çš„ç»§æ‰¿å…³ç³»ï¼š\"><a href=\"#æŸ¥çœ‹ç±»æˆ–æ¥å£çš„ç»§æ‰¿å…³ç³»ï¼š\" class=\"headerlink\" title=\"æŸ¥çœ‹ç±»æˆ–æ¥å£çš„ç»§æ‰¿å…³ç³»ï¼š\"></a>æŸ¥çœ‹ç±»æˆ–æ¥å£çš„ç»§æ‰¿å…³ç³»ï¼š</h4><p>ctrl + h</p>\n","categories":["å®è·µ"],"tags":["Idea"]},{"title":"æºç åˆ†æ-skywalkingæºç ç¯å¢ƒæ­å»º","url":"/posts/3595703232/","content":"<h2 id=\"0x00-é˜…è¯»æºä»£ç \"><a href=\"#0x00-é˜…è¯»æºä»£ç \" class=\"headerlink\" title=\"0x00 é˜…è¯»æºä»£ç \"></a>0x00 é˜…è¯»æºä»£ç </h2><blockquote>\n<p>é•¿è¾¾9å¤©çš„æ–­ç½‘ç»ˆäºç»“æŸäº†ã€‚</p>\n</blockquote>\n<h3 id=\"ä¸‹è½½æºä»£ç \"><a href=\"#ä¸‹è½½æºä»£ç \" class=\"headerlink\" title=\"ä¸‹è½½æºä»£ç \"></a>ä¸‹è½½æºä»£ç </h3><ul>\n<li>ä»£ç ä»“åº“åœ°å€ <a href=\"https://gitee.com/Z201/skywalking.git\" target=\"_blank\" rel=\"noopener\">https://gitee.com/Z201/skywalking.git</a></li>\n<li>é˜…è¯»ç‰ˆæœ¬å· <code>v6.0.0-GA</code></li>\n<li>ä¸‹è½½ç‰ˆæœ¬<code>git clone -b v6.0.0-GA https://github.com/apache/skywalking.git</code><ul>\n<li>ç”±äºgithubä¸‹è½½é€Ÿåº¦æ˜¯åœ¨å¤ªæ…¢äº†ï¼Œè¿™é‡Œç”¨giteeå…‹éš†ä¸€ä¸ªé•œåƒã€‚</li>\n<li>ä¸‹è½½ç‰ˆæœ¬<code>git clone -b v6.0.0-GA https://gitee.com/Z201/skywalking.git</code></li>\n</ul>\n</li>\n</ul>\n<h3 id=\"æŸ¥çœ‹æºä»£ç ç»“æ„\"><a href=\"#æŸ¥çœ‹æºä»£ç ç»“æ„\" class=\"headerlink\" title=\"æŸ¥çœ‹æºä»£ç ç»“æ„\"></a>æŸ¥çœ‹æºä»£ç ç»“æ„</h3><blockquote>\n<p>æºç è®¾è®¡å­é¡¹ç›®è¿‡å¤šï¼Œè¿™é‡Œç®€å•æš‚æ—¶2çº§ç›®å½•ã€‚</p>\n</blockquote>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">tree -d L 2</span><br><span class=\"line\">.</span><br><span class=\"line\">â”œâ”€â”€ src  </span><br><span class=\"line\">â”‚   â”œâ”€â”€ main # æºä»£ç </span><br><span class=\"line\">â”‚   â”œâ”€â”€ site # ç«™ç‚¹ç¨³å½“</span><br><span class=\"line\">â”‚   â””â”€â”€ test # å•å…ƒæµ‹è¯•</span><br><span class=\"line\">â””â”€â”€ travis   # å®˜æ–¹çš„cié›†æˆ</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>æŸ¥çœ‹é¡¹ç›®æºç ä¸»ç›®å½•</li>\n</ul>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">âœ  skywalking git:(8b638258b) tree -d -L 1</span><br><span class=\"line\">.</span><br><span class=\"line\">â”œâ”€â”€ apm-application-toolkit</span><br><span class=\"line\">â”œâ”€â”€ apm-checkstyle</span><br><span class=\"line\">â”œâ”€â”€ apm-commons</span><br><span class=\"line\">â”œâ”€â”€ apm-dist</span><br><span class=\"line\">â”œâ”€â”€ apm-protocol <span class=\"comment\"># pdæ–‡ä»¶</span></span><br><span class=\"line\">â”œâ”€â”€ apm-sniffer <span class=\"comment\"># æ’ä»¶</span></span><br><span class=\"line\">â”œâ”€â”€ apm-webapp  </span><br><span class=\"line\">â”œâ”€â”€ docker</span><br><span class=\"line\">â”œâ”€â”€ docs</span><br><span class=\"line\">â”œâ”€â”€ licenses</span><br><span class=\"line\">â”œâ”€â”€ oap-server <span class=\"comment\"># è¿™é‡Œå’Œ5.x æœ‰å¾ˆå¤§çš„ä¸åŒæ”¹åŠ¨äº†å¾ˆå¤šä¸œè¥¿ã€‚</span></span><br><span class=\"line\">â”œâ”€â”€ skywalking-ui </span><br><span class=\"line\">â””â”€â”€ tools</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>å°†é¡¹ç›®å¯¼å…¥ideaä¸­ã€‚</li>\n</ul>\n<p>å®˜æ–¹æ–‡æ¡£:<a href=\"https://github.com/apache/skywalking/blob/master/docs/en/guides/How-to-build.md\" target=\"_blank\" rel=\"noopener\">å¦‚ä½•æ„å»º</a></p>\n<p><code>git submodule init</code></p>\n<p><code>git submodule update</code></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">âœ  skywalking git:(8b638258b) git submodule init</span><br><span class=\"line\">Submodule <span class=\"string\">'apm-protocol/apm-network/src/main/proto'</span> (https://github.com/apache/incubator-skywalking-data-collect-protocol.git) registered <span class=\"keyword\">for</span> path <span class=\"string\">'apm-protocol/apm-network/src/main/proto'</span></span><br><span class=\"line\">Submodule <span class=\"string\">'oap-server/server-query-plugin/query-graphql-plugin/src/main/resources/query-protocol'</span> (https://github.com/apache/incubator-skywalking-query-protocol.git) registered <span class=\"keyword\">for</span> path <span class=\"string\">'oap-server/server-query-plugin/query-graphql-plugin/src/main/resources/query-protocol'</span></span><br><span class=\"line\">Submodule <span class=\"string\">'skywalking-ui'</span> (https://github.com/apache/incubator-skywalking-ui) registered <span class=\"keyword\">for</span> path <span class=\"string\">'skywalking-ui'</span></span><br><span class=\"line\">âœ  skywalking git:(8b638258b) git submodule update</span><br><span class=\"line\">Cloning into <span class=\"string\">'/Users/zengqingfeng/word/source-code/skywalking/apm-protocol/apm-network/src/main/proto'</span>...</span><br><span class=\"line\">Cloning into <span class=\"string\">'/Users/zengqingfeng/word/source-code/skywalking/oap-server/server-query-plugin/query-graphql-plugin/src/main/resources/query-protocol'</span>...</span><br><span class=\"line\">Cloning into <span class=\"string\">'/Users/zengqingfeng/word/source-code/skywalking/skywalking-ui'</span>...</span><br><span class=\"line\">Submodule path <span class=\"string\">'apm-protocol/apm-network/src/main/proto'</span>: checked out <span class=\"string\">'b66fa070fd647662f06497e4ed3657eb258cb6e9'</span></span><br><span class=\"line\">Submodule path <span class=\"string\">'oap-server/server-query-plugin/query-graphql-plugin/src/main/resources/query-protocol'</span>: checked out <span class=\"string\">'c65a23bd6b9bba8d1df30d4de261624952df2b7b'</span></span><br><span class=\"line\">Submodule path <span class=\"string\">'skywalking-ui'</span>: checked out <span class=\"string\">'c44642f73b9f73a54b0d716cade5094304e1a67b'</span></span><br></pre></td></tr></table></figure>\n\n<p><code>clean package -DskipTests</code></p>\n<blockquote>\n<p>è¿™ä¸ªæ—¶å€™æ…¢æ…¢ç­‰å§v6.0.0-GAæœ‰120ä¸ªå­é¡¹ç›®ã€‚æ›´æ–°å®Œä¹‹åå¯¼å…¥IDEAå°±å¥½äº†ã€‚</p>\n</blockquote>\n<h3 id=\"END\"><a href=\"#END\" class=\"headerlink\" title=\"END\"></a>END</h3>","categories":["æºç åˆ†æ"]},{"title":"å®è·µ-spring.redis.timeout=0ä¾ç„¶è¶…æ—¶çš„é—®é¢˜","url":"/posts/51185885/","content":"<blockquote>\n<p>æœ€è¿‘åœ¨çœ‹é¡¹ç›®çš„æ—¶å€™å‘ç°ä¸€ä¸ªä¸´æ—¶é—®é¢˜ï¼Œå°±æ˜¯redis.timeoutè®¾ç½®0ä¾ç„¶è¶…æ—¶çš„é—®é¢˜ã€‚</p>\n</blockquote>\n<ul>\n<li>ä»£ç é€‚ç”¨ç‰ˆæœ¬ <code>jedis:2.9.0</code> , <code>org.springframework.data.redis:1.8.1</code></li>\n</ul>\n<h3 id=\"timeoutè®¾ç½®0çš„é—®é¢˜\"><a href=\"#timeoutè®¾ç½®0çš„é—®é¢˜\" class=\"headerlink\" title=\"timeoutè®¾ç½®0çš„é—®é¢˜\"></a>timeoutè®¾ç½®0çš„é—®é¢˜</h3><blockquote>\n<p>spring.redis.timeout =0 å¦‚æœè®¾ç½®æˆ0 redisé»˜è®¤è¶…æ—¶æ—¶é—´å°±æ˜¯2ç§’. </p>\n</blockquote>\n<p><img src=\"https://z201.oss-cn-shanghai.aliyuncs.com/JavaNote/Jedis/jedis-timeout-1.jpg\"></p>\n<blockquote>\n<p>æ ¹æ®debugå‘ç°è®¾ç½®0ç‚¹æ—¶å€™ä¾ç„¶æ˜¯2000æ¯«ç§’ã€‚</p>\n</blockquote>\n<p><img src=\"https://z201.oss-cn-shanghai.aliyuncs.com/JavaNote/Jedis/jedis-timeout-2.jpg\"></p>\n<blockquote>\n<p>æ ¹æ®åˆå§‹åŒ–æ–¹æ³•æ‰¾åˆ°çš„åŸå› ã€‚</p>\n</blockquote>\n<p><img src=\"https://z201.oss-cn-shanghai.aliyuncs.com/JavaNote/Jedis/jedis-timeout-3.png\"></p>\n<p><img src=\"https://z201.oss-cn-shanghai.aliyuncs.com/JavaNote/Jedis/jedis-timeout-4.png\"></p>\n<blockquote>\n<p>è¿™é‡Œå¯ä»¥çœ‹åˆ°ï¼Œå½“timeoutè®¾ç½®0ç‚¹æ—¶å€™ä¸ä¼šè¢«èµ‹å€¼ã€‚</p>\n</blockquote>\n<h3 id=\"END\"><a href=\"#END\" class=\"headerlink\" title=\"END\"></a>END</h3>","categories":["å®è·µ"],"tags":["Redis","Java","Spring"]},{"title":"åˆæ¢Grpc","url":"/posts/3210089193/","content":"<blockquote>\n<p>17å¹´å¹´åº•åšçš„æŠ€æœ¯è°ƒç ”ï¼Œæ–‡æ¡£å¥½æƒ³æ²¡æœ‰å†™å®Œã€‚</p>\n</blockquote>\n<h2 id=\"gRPC\"><a href=\"#gRPC\" class=\"headerlink\" title=\"gRPC \"></a><a href=\"https://github.com/grpc/grpc\" target=\"_blank\" rel=\"noopener\">gRPC </a></h2><h3 id=\"æµç¨‹æ¦‚å¿µ\"><a href=\"#æµç¨‹æ¦‚å¿µ\" class=\"headerlink\" title=\"æµç¨‹æ¦‚å¿µ\"></a>æµç¨‹æ¦‚å¿µ</h3><p><img src=\"https://z201.oss-cn-shanghai.aliyuncs.com/JavaNote/Grpc/grpc-1.png\"></p>\n<h3 id=\"æ€§èƒ½å¯¹æ¯”\"><a href=\"#æ€§èƒ½å¯¹æ¯”\" class=\"headerlink\" title=\"æ€§èƒ½å¯¹æ¯”\"></a>æ€§èƒ½å¯¹æ¯”</h3><p><img src=\"https://z201.oss-cn-shanghai.aliyuncs.com/JavaNote/Grpc/grpc-2.png\"></p>\n<h3 id=\"è°åœ¨ä½¿ç”¨\"><a href=\"#è°åœ¨ä½¿ç”¨\" class=\"headerlink\" title=\"è°åœ¨ä½¿ç”¨\"></a>è°åœ¨ä½¿ç”¨</h3><p><img src=\"https://z201.oss-cn-shanghai.aliyuncs.com/JavaNote/Grpc/grpc-3.png\"></p>\n<a id=\"more\"></a>\n\n<h2 id=\"ProtoBuf\"><a href=\"#ProtoBuf\" class=\"headerlink\" title=\"ProtoBuf\"></a>ProtoBuf</h2><blockquote>\n<p>Protocol Buffers æ˜¯ google çš„ä¸€ç§æ•°æ®äº¤æ¢çš„æ ¼å¼ï¼Œå®ƒç‹¬ç«‹äºè¯­è¨€ï¼Œç‹¬ç«‹äºå¹³å°ã€‚google æä¾›äº†å¤šç§è¯­è¨€çš„å®ç°ï¼šjavaã€c#ã€c++ã€goã€PHP å’Œ pythonï¼Œæ¯ä¸€ç§å®ç°éƒ½åŒ…å«äº†ç›¸åº”è¯­è¨€çš„ç¼–è¯‘å™¨ä»¥åŠåº“æ–‡ä»¶ã€‚ç”±äºå®ƒæ˜¯ä¸€ç§äºŒè¿›åˆ¶çš„æ ¼å¼ï¼Œæ¯”ä½¿ç”¨ xml è¿›è¡Œæ•°æ®äº¤æ¢å¿«è®¸å¤šã€‚å¯ä»¥æŠŠå®ƒç”¨äºåˆ†å¸ƒå¼åº”ç”¨ä¹‹é—´çš„æ•°æ®é€šä¿¡æˆ–è€…å¼‚æ„ç¯å¢ƒä¸‹çš„æ•°æ®äº¤æ¢ã€‚ä½œä¸ºä¸€ç§æ•ˆç‡å’Œå…¼å®¹æ€§éƒ½å¾ˆä¼˜ç§€çš„äºŒè¿›åˆ¶æ•°æ®ä¼ è¾“æ ¼å¼ï¼Œå¯ä»¥ç”¨äºè¯¸å¦‚ç½‘ç»œä¼ è¾“ã€é…ç½®æ–‡ä»¶ã€æ•°æ®å­˜å‚¨ç­‰è¯¸å¤šé¢†åŸŸã€‚</p>\n<p>è‡³äºprotobufæ˜¯ä»€ä¹ˆã€ä½¿ç”¨åœºæ™¯ã€æœ‰ä»€ä¹ˆå¥½å¤„ï¼Œæœ¬æ–‡ä¸åšè¯´æ˜ï¼Œè¿™é‡Œå°†ä¼šä¸ºå¤§å®¶ä»‹ç»æ€ä¹ˆç”¨ <code>protobuf</code> æ¥å®šä¹‰æˆ‘ä»¬çš„äº¤äº’åè®®ï¼ŒåŒ…æ‹¬ <code>.proto</code> çš„è¯­æ³•ä»¥åŠå¦‚ä½•æ ¹æ®protoæ–‡ä»¶ç”Ÿæˆç›¸åº”çš„ä»£ç ã€‚æœ¬æ–‡åŸºäº<a href=\"https://developers.google.com/protocol-buffers/docs/proto3\" target=\"_blank\" rel=\"noopener\">proto3</a>ï¼Œè¯»è€…ä¹Ÿå¯ä»¥ç‚¹å‡»äº†è§£<a href=\"https://developers.google.com/protocol-buffers/docs/proto\" target=\"_blank\" rel=\"noopener\">proto2</a></p>\n</blockquote>\n<h2 id=\"proto3è¯­æ³•\"><a href=\"#proto3è¯­æ³•\" class=\"headerlink\" title=\"proto3è¯­æ³•\"></a>proto3è¯­æ³•</h2><h3 id=\"å®šä¹‰ä¸€ä¸ª-Message\"><a href=\"#å®šä¹‰ä¸€ä¸ª-Message\" class=\"headerlink\" title=\"å®šä¹‰ä¸€ä¸ª Message\"></a>å®šä¹‰ä¸€ä¸ª Message</h3><p>é¦–å…ˆæˆ‘ä»¬æ¥å®šä¹‰ä¸€ä¸ª Search è¯·æ±‚ï¼Œåœ¨è¿™ä¸ªè¯·æ±‚é‡Œé¢ï¼Œæˆ‘ä»¬éœ€è¦ç»™æœåŠ¡ç«¯å‘é€ä¸‰ä¸ªä¿¡æ¯ï¼š</p>\n<ul>\n<li>queryï¼šæŸ¥è¯¢æ¡ä»¶</li>\n<li>page_numberï¼šä½ æƒ³è¦å“ªä¸€é¡µæ•°æ®</li>\n<li>result_per_pageï¼šæ¯ä¸€é¡µæœ‰å¤šå°‘æ¡æ•°æ®</li>\n</ul>\n<p>äºæ˜¯æˆ‘ä»¬å¯ä»¥è¿™æ ·å®šä¹‰ï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">&#x2F;&#x2F; æŒ‡å®šä½¿ç”¨proto3ï¼Œå¦‚æœä¸æŒ‡å®šçš„è¯ï¼Œç¼–è¯‘å™¨ä¼šä½¿ç”¨proto2å»ç¼–è¯‘</span><br><span class=\"line\">syntax &#x3D; &quot;proto3&quot;; &#x2F;&#x2F;[proto2|proto3]</span><br><span class=\"line\"></span><br><span class=\"line\">message SearchRequests &#123;</span><br><span class=\"line\">    &#x2F;&#x2F; å®šä¹‰SearchRequestsçš„æˆå‘˜å˜é‡ï¼Œéœ€è¦æŒ‡å®šï¼šå˜é‡ç±»å‹ã€å˜é‡åã€å˜é‡Tag</span><br><span class=\"line\">    string query &#x3D; 1;</span><br><span class=\"line\">    int32 page_number &#x3D; 2;</span><br><span class=\"line\">    int32 result_per_page &#x3D; 3;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"å®šä¹‰å¤šä¸ª-message-ç±»å‹\"><a href=\"#å®šä¹‰å¤šä¸ª-message-ç±»å‹\" class=\"headerlink\" title=\"å®šä¹‰å¤šä¸ª message ç±»å‹\"></a>å®šä¹‰å¤šä¸ª message ç±»å‹</h3><p>ä¸€ä¸ª proto æ–‡ä»¶å¯ä»¥å®šä¹‰å¤šä¸ª message ï¼Œæ¯”å¦‚æˆ‘ä»¬å¯ä»¥åœ¨åˆšæ‰é‚£ä¸ª proto æ–‡ä»¶ä¸­æŠŠæœåŠ¡ç«¯è¿”å›çš„æ¶ˆæ¯ç»“æ„ä¹Ÿä¸€èµ·å®šä¹‰ï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">message SearchRequest &#123;</span><br><span class=\"line\">    string query &#x3D; 1;</span><br><span class=\"line\">    int32 page_number &#x3D; 2;</span><br><span class=\"line\">    int32 result_per_page &#x3D; 3;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">message SearchResponse &#123;</span><br><span class=\"line\">    repeated string result &#x3D; 1;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>message å¯ä»¥åµŒå¥—å®šä¹‰ï¼Œæ¯”å¦‚ message å¯ä»¥å®šä¹‰åœ¨å¦ä¸€ä¸ª message å†…éƒ¨</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">message SearchResponse &#123;</span><br><span class=\"line\">    message Result &#123;</span><br><span class=\"line\">        string url &#x3D; 1;</span><br><span class=\"line\">        string title &#x3D; 2;</span><br><span class=\"line\">        repeated string snippets &#x3D; 3;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    repeated Result results &#x3D; 1;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>å®šä¹‰åœ¨ message å†…éƒ¨çš„ message å¯ä»¥è¿™æ ·ä½¿ç”¨ï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">message SomeOtherMessage &#123;</span><br><span class=\"line\">    SearchResponse.Result result &#x3D; 1;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"å®šä¹‰å˜é‡ç±»å‹\"><a href=\"#å®šä¹‰å˜é‡ç±»å‹\" class=\"headerlink\" title=\"å®šä¹‰å˜é‡ç±»å‹\"></a>å®šä¹‰å˜é‡ç±»å‹</h3><p>åœ¨åˆšæ‰çš„ä¾‹å­ä¹‹ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨äº†2ä¸ª<code>æ ‡å‡†å€¼ç±»å‹</code>ï¼š string å’Œ int32ï¼Œé™¤äº†è¿™äº›æ ‡å‡†ç±»å‹ä¹‹å¤–ï¼Œå˜é‡çš„ç±»å‹è¿˜å¯ä»¥æ˜¯å¤æ‚ç±»å‹ï¼Œæ¯”å¦‚è‡ªå®šä¹‰çš„<code>æšä¸¾</code>å’Œè‡ªå®šä¹‰çš„ <code>message</code></p>\n<p>è¿™é‡Œæˆ‘ä»¬æŠŠæ ‡å‡†ç±»å‹åˆ—ä¸¾ä¸€ä¸‹protobufå†…ç½®çš„æ ‡å‡†ç±»å‹ä»¥åŠè·Ÿå„å¹³å°å¯¹åº”çš„å…³ç³»ï¼š</p>\n<table>\n<thead>\n<tr>\n<th>.proto</th>\n<th>è¯´æ˜</th>\n<th>Java</th>\n<th>Python</th>\n<th>Go</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>double</td>\n<td></td>\n<td>double</td>\n<td>float</td>\n<td>float64</td>\n</tr>\n<tr>\n<td>float</td>\n<td></td>\n<td>float</td>\n<td>float</td>\n<td>float32</td>\n</tr>\n<tr>\n<td>int32</td>\n<td>ä½¿ç”¨å˜é•¿ç¼–ç ï¼Œå¯¹è´Ÿæ•°ç¼–ç æ•ˆç‡ä½ï¼Œå¦‚æœä½ çš„å˜é‡å¯èƒ½æ˜¯è´Ÿæ•°ï¼Œå¯ä»¥ä½¿ç”¨sint32</td>\n<td>int</td>\n<td>int</td>\n<td>int32</td>\n</tr>\n<tr>\n<td>int64</td>\n<td>ä½¿ç”¨å˜é•¿ç¼–ç ï¼Œå¯¹è´Ÿæ•°ç¼–ç æ•ˆç‡ä½ï¼Œå¦‚æœä½ çš„å˜é‡å¯èƒ½æ˜¯è´Ÿæ•°ï¼Œå¯ä»¥ä½¿ç”¨sint64</td>\n<td>long</td>\n<td>int/long</td>\n<td>int64</td>\n</tr>\n<tr>\n<td>uint32</td>\n<td>ä½¿ç”¨å˜é•¿ç¼–ç </td>\n<td>int</td>\n<td>int/long</td>\n<td>uint32</td>\n</tr>\n<tr>\n<td>uint64</td>\n<td>ä½¿ç”¨å˜é•¿ç¼–ç </td>\n<td>long</td>\n<td>int/long</td>\n<td>uint64</td>\n</tr>\n<tr>\n<td>sint32</td>\n<td>ä½¿ç”¨å˜é•¿ç¼–ç ï¼Œå¸¦ç¬¦å·çš„intç±»å‹ï¼Œå¯¹è´Ÿæ•°ç¼–ç æ¯”int32é«˜æ•ˆ</td>\n<td>int</td>\n<td>int</td>\n<td>int32</td>\n</tr>\n<tr>\n<td>sint64</td>\n<td>ä½¿ç”¨å˜é•¿ç¼–ç ï¼Œå¸¦ç¬¦å·çš„intç±»å‹ï¼Œå¯¹è´Ÿæ•°ç¼–ç æ¯”int64é«˜æ•ˆ</td>\n<td>long</td>\n<td>int/long</td>\n<td>int64</td>\n</tr>\n<tr>\n<td>fixed32</td>\n<td>4å­—èŠ‚ç¼–ç ï¼Œ å¦‚æœå˜é‡ç»å¸¸å¤§äº228 çš„è¯ï¼Œä¼šæ¯”uint32é«˜æ•ˆ</td>\n<td>int</td>\n<td>int</td>\n<td>int32</td>\n</tr>\n<tr>\n<td>fixed64</td>\n<td>8å­—èŠ‚ç¼–ç ï¼Œ å¦‚æœå˜é‡ç»å¸¸å¤§äº256 çš„è¯ï¼Œä¼šæ¯”uint64é«˜æ•ˆ</td>\n<td>long</td>\n<td>int/long</td>\n<td>uint64</td>\n</tr>\n<tr>\n<td>sfixed32</td>\n<td>4å­—èŠ‚ç¼–ç </td>\n<td>int</td>\n<td>int</td>\n<td>int32</td>\n</tr>\n<tr>\n<td>sfixed64</td>\n<td>8å­—èŠ‚ç¼–ç </td>\n<td>long</td>\n<td>int/long</td>\n<td>int64</td>\n</tr>\n<tr>\n<td>bool</td>\n<td></td>\n<td>boolean</td>\n<td>bool</td>\n<td>bool</td>\n</tr>\n<tr>\n<td>string</td>\n<td>å¿…é¡»åŒ…å«utf-8ç¼–ç æˆ–è€…7-bit ASCII text</td>\n<td>String</td>\n<td>str/unicode</td>\n<td>string</td>\n</tr>\n<tr>\n<td>bytes</td>\n<td>ä»»æ„çš„å­—èŠ‚åºåˆ—</td>\n<td>ByteString</td>\n<td>str</td>\n<td>[]byte</td>\n</tr>\n</tbody></table>\n<p>è¡¥å……è¯´æ˜ï¼š</p>\n<ul>\n<li>In Java, unsigned 32-bit and 64-bit integers are represented using their signed counterparts, with the top bit simply being stored in the sign bit.</li>\n<li>In all cases, setting values to a field will perform type checking to make sure it is valid.</li>\n<li>64-bit or unsigned 32-bit integers are always represented as long when decoded, but can be an int if an int is given when setting the field. In all cases, the value must fit in the type represented when set. See <a href=\"https://developers.google.com/protocol-buffers/docs/proto\" target=\"_blank\" rel=\"noopener\">2</a>.</li>\n<li>Python strings are represented as unicode on decode but can be str if an ASCII string is given (this is subject to change).</li>\n<li>Integer is used on 64-bit machines and string is used on 32-bit machines.</li>\n</ul>\n<p>å…³äºæ ‡å‡†å€¼ç±»å‹ï¼Œè¿˜å¯ä»¥å‚è€ƒ<a href=\"https://developers.google.com/protocol-buffers/docs/proto3#scalar\" target=\"_blank\" rel=\"noopener\">Scalar Value Types</a></p>\n<p>å¦‚æœä½ æƒ³äº†è§£è¿™äº›æ•°æ®æ˜¯æ€ä¹ˆåºåˆ—åŒ–å’Œååºåˆ—åŒ–çš„ï¼Œå¯ä»¥ç‚¹å‡» <a href=\"https://developers.google.com/protocol-buffers/docs/encoding\" target=\"_blank\" rel=\"noopener\">Protocol Buffer Encoding</a> äº†è§£æ›´å¤šå…³äºprotobufç¼–ç å†…å®¹ã€‚</p>\n<h3 id=\"åˆ†é…Tag\"><a href=\"#åˆ†é…Tag\" class=\"headerlink\" title=\"åˆ†é…Tag\"></a>åˆ†é…Tag</h3><p>æ¯ä¸€ä¸ªå˜é‡åœ¨messageå†…éƒ½éœ€è¦è‡ªå®šä¹‰ä¸€ä¸ª<strong>å”¯ä¸€çš„æ•°å­—Tag</strong>ï¼Œprotobufä¼šæ ¹æ®Tagä»æ•°æ®ä¸­æŸ¥æ‰¾å˜é‡å¯¹åº”çš„ä½ç½®ï¼Œå…·ä½“åŸç†è·Ÿprotobufçš„<a href=\"https://developers.google.com/protocol-buffers/docs/encoding\" target=\"_blank\" rel=\"noopener\">äºŒè¿›åˆ¶æ•°æ®æ ¼å¼</a>æœ‰å…³ã€‚Tagä¸€æ—¦æŒ‡å®šï¼Œä»¥åæ›´æ–°åè®®çš„æ—¶å€™ä¹Ÿä¸èƒ½ä¿®æ”¹ï¼Œå¦åˆ™æ— æ³•å¯¹æ—§ç‰ˆæœ¬å…¼å®¹ã€‚</p>\n<p>Tagçš„å–å€¼èŒƒå›´æœ€å°æ˜¯1ï¼Œæœ€å¤§æ˜¯229-1ï¼Œä½† 19000~19999 æ˜¯ protobuf é¢„ç•™çš„ï¼Œç”¨æˆ·ä¸èƒ½ä½¿ç”¨ã€‚</p>\n<p>è™½ç„¶ Tag çš„å®šä¹‰èŒƒå›´æ¯”è¾ƒå¤§ï¼Œä½†ä¸åŒ Tag ä¹Ÿä¼šå¯¹ protobuf ç¼–ç å¸¦æ¥ä¸€äº›å½±å“ï¼š</p>\n<ul>\n<li>1 ~ 15ï¼šå•å­—èŠ‚ç¼–ç </li>\n<li>16 ~ 2047ï¼šåŒå­—èŠ‚ç¼–ç </li>\n</ul>\n<p>ä½¿ç”¨é¢‘ç‡é«˜çš„å˜é‡æœ€å¥½è®¾ç½®ä¸º1 ~ 15ï¼Œè¿™æ ·å¯ä»¥å‡å°‘ç¼–ç åçš„æ•°æ®å¤§å°ï¼Œä½†ç”±äºTagä¸€æ—¦æŒ‡å®šä¸èƒ½ä¿®æ”¹ï¼Œæ‰€ä»¥ä¸ºäº†ä»¥åæ‰©å±•ï¼Œä¹Ÿè®°å¾—ä¸ºæœªæ¥ä¿ç•™ä¸€äº› 1 ~ 15 çš„ Tag</p>\n<h3 id=\"æŒ‡å®šå˜é‡è§„åˆ™\"><a href=\"#æŒ‡å®šå˜é‡è§„åˆ™\" class=\"headerlink\" title=\"æŒ‡å®šå˜é‡è§„åˆ™\"></a>æŒ‡å®šå˜é‡è§„åˆ™</h3><p>åœ¨ proto3 ä¸­ï¼Œå¯ä»¥ç»™å˜é‡æŒ‡å®šä»¥ä¸‹ä¸¤ä¸ªè§„åˆ™ï¼š</p>\n<ul>\n<li><code>singular</code>ï¼š0æˆ–è€…1ä¸ªï¼Œä½†ä¸èƒ½å¤šäº1ä¸ª</li>\n<li><code>repeated</code>ï¼šä»»æ„æ•°é‡ï¼ˆåŒ…æ‹¬0ï¼‰</li>\n</ul>\n<p>å½“æ„å»º message çš„æ—¶å€™ï¼Œbuild æ•°æ®çš„æ—¶å€™ï¼Œä¼šæ£€æµ‹è®¾ç½®çš„æ•°æ®è·Ÿè§„åˆ™æ˜¯å¦åŒ¹é…</p>\n<p>åœ¨proto2ä¸­ï¼Œè§„åˆ™ä¸ºï¼š</p>\n<ul>\n<li>requiredï¼šå¿…é¡»æœ‰ä¸€ä¸ª</li>\n<li>optionalï¼š0æˆ–è€…1ä¸ª</li>\n<li>repeatedï¼šä»»æ„æ•°é‡ï¼ˆåŒ…æ‹¬0ï¼‰</li>\n</ul>\n<h3 id=\"æ³¨é‡Š\"><a href=\"#æ³¨é‡Š\" class=\"headerlink\" title=\"æ³¨é‡Š\"></a>æ³¨é‡Š</h3><p>ç”¨<code>//</code>è¡¨ç¤ºæ³¨é‡Šå¼€å¤´ï¼Œå¦‚</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">message SearchRequest &#123;</span><br><span class=\"line\">    string query &#x3D; 1;</span><br><span class=\"line\">    int32 page_number &#x3D; 2; &#x2F;&#x2F; Which page number do we want</span><br><span class=\"line\">    int32 result_per_page &#x3D; 3; &#x2F;&#x2F; Number of results to return per page</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"ä¿ç•™å˜é‡ä¸è¢«ä½¿ç”¨\"><a href=\"#ä¿ç•™å˜é‡ä¸è¢«ä½¿ç”¨\" class=\"headerlink\" title=\"ä¿ç•™å˜é‡ä¸è¢«ä½¿ç”¨\"></a>ä¿ç•™å˜é‡ä¸è¢«ä½¿ç”¨</h3><p>ä¸Šé¢æˆ‘ä»¬è¯´åˆ°ï¼Œä¸€æ—¦ Tag æŒ‡å®šåå°±ä¸èƒ½å˜æ›´ï¼Œè¿™å°±ä¼šå¸¦æ¥ä¸€ä¸ªé—®é¢˜ï¼Œå‡å¦‚åœ¨ç‰ˆæœ¬1çš„åè®®ä¸­ï¼Œæˆ‘ä»¬æœ‰ä¸ªå˜é‡ï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">int32 number &#x3D; 1ï¼›</span><br></pre></td></tr></table></figure>\n\n<p>åœ¨ç‰ˆæœ¬2ä¸­ï¼Œæˆ‘ä»¬å†³å®šåºŸå¼ƒå¯¹å®ƒçš„ä½¿ç”¨ï¼Œé‚£æˆ‘ä»¬åº”è¯¥å¦‚ä½•ä¿®æ”¹åè®®å‘¢ï¼Ÿæ³¨é‡Šæ‰å®ƒï¼Ÿåˆ é™¤æ‰å®ƒï¼Ÿå¦‚æœæŠŠå®ƒåˆ é™¤äº†ï¼Œåæ¥è€…å¾ˆå¯èƒ½åœ¨å®šä¹‰æ–°å˜é‡çš„æ—¶å€™ï¼Œä½¿æ–°çš„å˜é‡ Tag = 1 ï¼Œè¿™æ ·ä¼šå¯¼è‡´åè®®ä¸å…¼å®¹ã€‚é‚£æœ‰æ²¡æœ‰åŠæ³•è§„é¿è¿™ä¸ªé—®é¢˜å‘¢ï¼Ÿæˆ‘ä»¬å¯ä»¥ç”¨ <code>reserved</code> å…³é”®å­—ï¼Œå½“ä¸€ä¸ªå˜é‡ä¸å†ä½¿ç”¨çš„æ—¶å€™ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠå®ƒçš„å˜é‡åæˆ– Tag ç”¨ <code>reserved</code> æ ‡æ³¨ï¼Œè¿™æ ·ï¼Œå½“è¿™ä¸ª Tag æˆ–è€…å˜é‡åå­—è¢«é‡æ–°ä½¿ç”¨çš„æ—¶å€™ï¼Œç¼–è¯‘å™¨ä¼šæŠ¥é”™</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">message Foo &#123;</span><br><span class=\"line\">    &#x2F;&#x2F; æ³¨æ„ï¼ŒåŒä¸€ä¸ª reserved è¯­å¥ä¸èƒ½åŒæ—¶åŒ…å«å˜é‡åå’Œ Tag </span><br><span class=\"line\">    reserved 2, 15, 9 to 11;</span><br><span class=\"line\">    reserved &quot;foo&quot;, &quot;bar&quot;;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"é»˜è®¤å€¼\"><a href=\"#é»˜è®¤å€¼\" class=\"headerlink\" title=\"é»˜è®¤å€¼\"></a>é»˜è®¤å€¼</h3><p>å½“è§£æ message æ—¶ï¼Œå¦‚æœè¢«ç¼–ç çš„ message é‡Œæ²¡æœ‰åŒ…å«æŸäº›å˜é‡ï¼Œé‚£ä¹ˆæ ¹æ®ç±»å‹ä¸åŒï¼Œä»–ä»¬ä¼šæœ‰ä¸åŒçš„é»˜è®¤å€¼ï¼š</p>\n<ul>\n<li>stringï¼šé»˜è®¤æ˜¯ç©ºçš„å­—ç¬¦ä¸²</li>\n<li>byteï¼šé»˜è®¤æ˜¯ç©ºçš„bytes</li>\n<li>boolï¼šé»˜è®¤ä¸ºfalse</li>\n<li>numericï¼šé»˜è®¤ä¸º0</li>\n<li>enumsï¼šå®šä¹‰åœ¨ç¬¬ä¸€ä½çš„æšä¸¾å€¼ï¼Œä¹Ÿå°±æ˜¯0</li>\n<li>messagesï¼šæ ¹æ®ç”Ÿæˆçš„ä¸åŒè¯­è¨€æœ‰ä¸åŒçš„è¡¨ç°ï¼Œå‚è€ƒ<a href=\"https://developers.google.com/protocol-buffers/docs/reference/overview\" target=\"_blank\" rel=\"noopener\">generated code guide</a></li>\n</ul>\n<p>æ³¨æ„ï¼Œæ”¶åˆ°æ•°æ®åååºåˆ—åŒ–åï¼Œå¯¹äºæ ‡å‡†å€¼ç±»å‹çš„æ•°æ®ï¼Œæ¯”å¦‚boolï¼Œå¦‚æœå®ƒçš„å€¼æ˜¯ falseï¼Œé‚£ä¹ˆæˆ‘ä»¬æ— æ³•åˆ¤æ–­è¿™ä¸ªå€¼æ˜¯å¯¹æ–¹è®¾ç½®çš„ï¼Œè¿˜æ˜¯å¯¹æ–¹å‹æ ¹å°±æ²¡ç»™è¿™ä¸ªå˜é‡è®¾ç½®å€¼ã€‚</p>\n<h3 id=\"å®šä¹‰æšä¸¾-Enumerations\"><a href=\"#å®šä¹‰æšä¸¾-Enumerations\" class=\"headerlink\" title=\"å®šä¹‰æšä¸¾ Enumerations\"></a>å®šä¹‰æšä¸¾ Enumerations</h3><p>åœ¨ protobuf ä¸­ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥å®šä¹‰æšä¸¾ï¼Œå¹¶ä¸”ä½¿ç”¨è¯¥æšä¸¾ç±»å‹ï¼Œæ¯”å¦‚ï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">message SearchRequest &#123;</span><br><span class=\"line\">    string query &#x3D; 1;</span><br><span class=\"line\">    int32 page_number &#x3D; 2; &#x2F;&#x2F; Which page number do we want</span><br><span class=\"line\">    int32 result_per_page &#x3D; 3; &#x2F;&#x2F; Number of results to return per page</span><br><span class=\"line\">    enum Corpus &#123;</span><br><span class=\"line\">        UNIVERSAL &#x3D; 0;</span><br><span class=\"line\">        WEB &#x3D; 1;</span><br><span class=\"line\">        IMAGES &#x3D; 2;</span><br><span class=\"line\">        LOCAL &#x3D; 3;</span><br><span class=\"line\">        NEWS &#x3D; 4;</span><br><span class=\"line\">        PRODUCTS &#x3D; 5;</span><br><span class=\"line\">        VIDEO &#x3D; 6;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    Corpus corpus &#x3D; 4;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>æšä¸¾å®šä¹‰åœ¨ä¸€ä¸ªæ¶ˆæ¯å†…éƒ¨æˆ–æ¶ˆæ¯å¤–éƒ¨éƒ½æ˜¯å¯ä»¥çš„ï¼Œå¦‚æœæšä¸¾æ˜¯ å®šä¹‰åœ¨ message å†…éƒ¨ï¼Œè€Œå…¶ä»– message åˆæƒ³ä½¿ç”¨ï¼Œé‚£ä¹ˆå¯ä»¥é€šè¿‡ <code>MessageType.EnumType</code> çš„æ–¹å¼å¼•ç”¨ã€‚å®šä¹‰æšä¸¾çš„æ—¶å€™ï¼Œæˆ‘ä»¬è¦ä¿è¯<strong>ç¬¬ä¸€ä¸ªæšä¸¾å€¼å¿…é¡»æ˜¯0</strong>ï¼Œæšä¸¾å€¼ä¸èƒ½é‡å¤ï¼Œé™¤éä½¿ç”¨ <code>option allow_alias = true</code> é€‰é¡¹æ¥å¼€å¯åˆ«åã€‚å¦‚ï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">enum EnumAllowingAlias &#123;</span><br><span class=\"line\">    option allow_alias &#x3D; true;</span><br><span class=\"line\">    UNKNOWN &#x3D; 0;</span><br><span class=\"line\">    STARTED &#x3D; 1;</span><br><span class=\"line\">    RUNNING &#x3D; 1;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>æšä¸¾å€¼çš„èŒƒå›´æ˜¯32-bit integerï¼Œä½†å› ä¸ºæšä¸¾å€¼ä½¿ç”¨å˜é•¿ç¼–ç ï¼Œæ‰€ä»¥ä¸æ¨èä½¿ç”¨è´Ÿæ•°ä½œä¸ºæšä¸¾å€¼ï¼Œå› ä¸ºè¿™ä¼šå¸¦æ¥æ•ˆç‡é—®é¢˜ã€‚</p>\n<h3 id=\"å¦‚ä½•å¼•ç”¨å…¶ä»–-proto-æ–‡ä»¶\"><a href=\"#å¦‚ä½•å¼•ç”¨å…¶ä»–-proto-æ–‡ä»¶\" class=\"headerlink\" title=\"å¦‚ä½•å¼•ç”¨å…¶ä»– proto æ–‡ä»¶\"></a>å¦‚ä½•å¼•ç”¨å…¶ä»– proto æ–‡ä»¶</h3><p>åœ¨protoè¯­æ³•ä¸­ï¼Œæœ‰ä¸¤ç§å¼•ç”¨å…¶ä»– proto æ–‡ä»¶çš„æ–¹æ³•ï¼š <code>import</code> å’Œ <code>import public</code>ï¼Œè¿™ä¸¤è€…æœ‰ä»€ä¹ˆåŒºåˆ«å‘¢ï¼Ÿä¸‹é¢ä¸¾ä¸ªä¾‹å­è¯´æ˜ï¼š<br><img src=\"https://z201.oss-cn-shanghai.aliyuncs.com/JavaNote/Grpc/grpc-4.png\" alt=\"è¿™é‡Œå†™å›¾ç‰‡æè¿°\"></p>\n<ul>\n<li>åœ¨æƒ…æ™¯1ä¸­ï¼Œ my.proto <strong>ä¸èƒ½</strong>ä½¿ç”¨ second.proto ä¸­å®šä¹‰çš„å†…å®¹</li>\n<li>åœ¨æƒ…æ™¯2ä¸­ï¼Œ my.proto <strong>å¯ä»¥</strong>ä½¿ç”¨ second.proto ä¸­å®šä¹‰çš„å†…å®¹</li>\n<li>æƒ…æ™¯1å’Œæƒ…æ™¯2ä¸­ï¼Œmy.proto éƒ½å¯ä»¥ä½¿ç”¨ first.proto</li>\n<li>æƒ…æ™¯1å’Œæƒ…æ™¯2ä¸­ï¼Œfirst.proto éƒ½å¯ä»¥ä½¿ç”¨ second.proto</li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">&#x2F;&#x2F; my.proto</span><br><span class=\"line\">import &quot;first.proto&quot;;</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">&#x2F;&#x2F; first.proto</span><br><span class=\"line\">&#x2F;&#x2F;import &quot;second.proto&quot;;</span><br><span class=\"line\">import public &quot;second.proto&quot;;</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">&#x2F;&#x2F; second.proto</span><br><span class=\"line\">...</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"å‡çº§-proto-æ–‡ä»¶æ­£ç¡®çš„å§¿åŠ¿\"><a href=\"#å‡çº§-proto-æ–‡ä»¶æ­£ç¡®çš„å§¿åŠ¿\" class=\"headerlink\" title=\"å‡çº§ proto æ–‡ä»¶æ­£ç¡®çš„å§¿åŠ¿\"></a>å‡çº§ proto æ–‡ä»¶æ­£ç¡®çš„å§¿åŠ¿</h3><p>å‡çº§æ›´æ”¹ proto éœ€è¦éµå¾ªä»¥ä¸‹åŸåˆ™</p>\n<ul>\n<li>ä¸è¦ä¿®æ”¹ä»»ä½•å·²å­˜åœ¨çš„å˜é‡çš„ Tag</li>\n<li>å¦‚æœä½ æ–°å¢äº†å˜é‡ï¼Œæ–°ç”Ÿæˆçš„ä»£ç ä¾ç„¶èƒ½è§£ææ—§çš„æ•°æ®ï¼Œä½†æ–°å¢çš„å˜é‡å°†ä¼šå˜æˆé»˜è®¤å€¼ã€‚ç›¸åº”çš„ï¼Œæ–°ä»£ç åºåˆ—åŒ–çš„æ•°æ®ä¹Ÿèƒ½è¢«æ—§çš„ä»£ç è§£æï¼Œä½†æ—§ä»£ç ä¼šè‡ªåŠ¨å¿½ç•¥æ–°å¢çš„å˜é‡ã€‚</li>\n<li>åºŸå¼ƒä¸ç”¨çš„å˜é‡ç”¨ reserved æ ‡æ³¨</li>\n<li>int32ã€ uint32ã€ int64ã€ uint64 å’Œ bool æ˜¯ç›¸äº’å…¼å®¹çš„ï¼Œè¿™æ„å‘³ä½ å¯ä»¥æ›´æ”¹è¿™äº›å˜é‡çš„ç±»å‹è€Œä¸ä¼šå½±å“å…¼å®¹æ€§</li>\n<li>sint32 å’Œ sint64 æ˜¯å…¼å®¹çš„ï¼Œä½†è·Ÿå…¶ä»–ç±»å‹ä¸å…¼å®¹</li>\n<li>string å’Œ bytes å¯ä»¥å…¼å®¹ï¼Œå‰ææ˜¯ä»–ä»¬éƒ½æ˜¯UTF-8ç¼–ç çš„æ•°æ®</li>\n<li>fixed32 å’Œ sfixed32 æ˜¯å…¼å®¹çš„, fixed64 å’Œ sfixed64æ˜¯å…¼å®¹çš„</li>\n</ul>\n<h3 id=\"Any-çš„ä½¿ç”¨\"><a href=\"#Any-çš„ä½¿ç”¨\" class=\"headerlink\" title=\"Any çš„ä½¿ç”¨\"></a>Any çš„ä½¿ç”¨</h3><p>Anyå¯ä»¥è®©ä½ åœ¨ proto æ–‡ä»¶ä¸­ä½¿ç”¨æœªå®šä¹‰çš„ç±»å‹ï¼Œå…·ä½“é‡Œé¢ä¿å­˜ä»€ä¹ˆæ•°æ®ï¼Œæ˜¯åœ¨ä¸Šå±‚ä¸šåŠ¡ä»£ç ä½¿ç”¨çš„æ—¶å€™å†³å®šçš„ï¼Œä½¿ç”¨ Any å¿…é¡»å¯¼å…¥ <code>import google/protobuf/any.proto</code></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">import &quot;google&#x2F;protobuf&#x2F;any.proto&quot;;</span><br><span class=\"line\"></span><br><span class=\"line\">message ErrorStatus &#123;</span><br><span class=\"line\">    string message &#x3D; 1;</span><br><span class=\"line\">    repeated google.protobuf.Any details &#x3D; 2;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"Oneof-çš„ä½¿ç”¨\"><a href=\"#Oneof-çš„ä½¿ç”¨\" class=\"headerlink\" title=\"Oneof çš„ä½¿ç”¨\"></a>Oneof çš„ä½¿ç”¨</h3><p>Oneof ç±»ä¼¼unionï¼Œå¦‚æœä½ çš„æ¶ˆæ¯ä¸­æœ‰å¾ˆå¤šå¯é€‰å­—æ®µï¼Œè€ŒåŒä¸€ä¸ªæ—¶åˆ»æœ€å¤šä»…æœ‰å…¶ä¸­çš„ä¸€ä¸ªå­—æ®µè¢«è®¾ç½®çš„è¯ï¼Œä½ å¯ä»¥ä½¿ç”¨oneofæ¥å¼ºåŒ–è¿™ä¸ªç‰¹æ€§å¹¶ä¸”èŠ‚çº¦å­˜å‚¨ç©ºé—´ï¼Œå¦‚</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">message LoginReply &#123;</span><br><span class=\"line\">    oneof test_oneof &#123;</span><br><span class=\"line\">        string name &#x3D; 3;</span><br><span class=\"line\">        string age &#x3D; 4;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    required string status &#x3D; 1;</span><br><span class=\"line\">    required string token &#x3D; 2;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>è¿™æ ·ï¼Œname å’Œ age éƒ½æ˜¯ LoginReply çš„æˆå‘˜ï¼Œä½†ä¸èƒ½ç»™ä»–ä»¬åŒæ—¶è®¾ç½®å€¼ï¼ˆè®¾ç½®ä¸€ä¸ªoneofå­—æ®µä¼šè‡ªåŠ¨æ¸…ç†å…¶ä»–çš„oneofå­—æ®µï¼‰ã€‚</p>\n<h3 id=\"Maps-çš„ä½¿ç”¨\"><a href=\"#Maps-çš„ä½¿ç”¨\" class=\"headerlink\" title=\"Maps çš„ä½¿ç”¨\"></a>Maps çš„ä½¿ç”¨</h3><p>protobuf æ”¯æŒå®šä¹‰ map ç±»å‹çš„æˆå‘˜ï¼Œå¦‚ï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">map&lt;key_type, value_type&gt; map_field &#x3D; N;</span><br><span class=\"line\">&#x2F;&#x2F; ä¸¾ä¾‹ï¼šmap&lt;string, Project&gt; projects &#x3D; 3;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>key_type:å¿…é¡»æ˜¯stringæˆ–è€…int</li>\n<li>value_typeï¼šä»»æ„ç±»å‹</li>\n</ul>\n<p>ä½¿ç”¨ map è¦æ³¨æ„ï¼š</p>\n<ul>\n<li>Map ç±»å‹ä¸èƒ½ä½¿ repeated</li>\n<li>Map æ˜¯æ— åºçš„</li>\n<li>ä»¥æ–‡æœ¬æ ¼å¼å±•ç¤ºæ—¶ï¼ŒMap ä»¥ key æ¥æ’åº</li>\n<li>å¦‚æœæœ‰ç›¸åŒçš„é”®ä¼šå¯¼è‡´è§£æå¤±è´¥</li>\n</ul>\n<h3 id=\"Packages-çš„ä½¿ç”¨\"><a href=\"#Packages-çš„ä½¿ç”¨\" class=\"headerlink\" title=\"Packages çš„ä½¿ç”¨\"></a>Packages çš„ä½¿ç”¨</h3><p>ä¸ºäº†é˜²æ­¢ä¸åŒæ¶ˆæ¯ä¹‹é—´çš„å‘½åå†²çªï¼Œä½ å¯ä»¥å¯¹ç‰¹å®šçš„.protoæ–‡ä»¶ææŒ‡å®š package åå­—ã€‚åœ¨å®šä¹‰æ¶ˆæ¯çš„æˆå‘˜çš„æ—¶å€™ï¼Œå¯ä»¥æŒ‡å®šåŒ…çš„åå­—ï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">package foo.bar;</span><br><span class=\"line\">message Open &#123; ... &#125;</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">message Foo &#123;</span><br><span class=\"line\">    ...</span><br><span class=\"line\">    &#x2F;&#x2F; å¸¦ä¸ŠåŒ…å</span><br><span class=\"line\">    foo.bar.Open open &#x3D; 1;</span><br><span class=\"line\">    ...</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"Options\"><a href=\"#Options\" class=\"headerlink\" title=\"Options\"></a>Options</h2><p>Options åˆ†ä¸º file-level optionsï¼ˆåªèƒ½å‡ºç°åœ¨æœ€é¡¶å±‚ï¼Œä¸èƒ½åœ¨æ¶ˆæ¯ã€æšä¸¾ã€æœåŠ¡å†…éƒ¨ä½¿ç”¨ï¼‰ã€ message-level optionsï¼ˆåªèƒ½åœ¨æ¶ˆæ¯å†…éƒ¨ä½¿ç”¨ï¼‰ã€field-level optionsï¼ˆåªèƒ½åœ¨å˜é‡å®šä¹‰æ—¶ä½¿ç”¨ï¼‰</p>\n<ul>\n<li>java_package (file option)ï¼šæŒ‡å®šç”Ÿæˆç±»çš„åŒ…åï¼Œå¦‚æœæ²¡æœ‰æŒ‡å®šæ­¤é€‰é¡¹ï¼Œå°†ç”±å…³é”®å­—packageæŒ‡å®šåŒ…åã€‚æ­¤é€‰é¡¹åªåœ¨ç”Ÿæˆ java ä»£ç æ—¶æœ‰æ•ˆ</li>\n<li>java_multiple_files (file option)ï¼šå¦‚æœä¸º trueï¼Œ å®šä¹‰åœ¨æœ€å¤–å±‚çš„ message ã€enumã€service å°†ä½œä¸ºå•ç‹¬çš„ç±»å­˜åœ¨</li>\n<li>java_outer_classname (file option)ï¼šæŒ‡å®šæœ€å¤–å±‚classçš„ç±»åï¼Œå¦‚æœä¸æŒ‡å®šï¼Œå°†ä¼šä»¥æ–‡ä»¶åä½œä¸ºç±»å</li>\n<li>optimize_for (file option)ï¼šå¯é€‰æœ‰ [SPEED|CODE_SIZE|LITE_RUNTIME] ï¼Œåˆ†åˆ«æ˜¯æ•ˆç‡ä¼˜å…ˆã€ç©ºé—´ä¼˜å…ˆï¼Œç¬¬ä¸‰ä¸ªliteæ˜¯å…¼é¡¾æ•ˆç‡å’Œä»£ç å¤§å°ï¼Œä½†æ˜¯è¿è¡Œæ—¶éœ€è¦ä¾èµ– libprotobuf-lite</li>\n<li>cc_enable_arenas (file option):å¯åŠ¨arena allocationï¼Œc++ä»£ç ä½¿ç”¨</li>\n<li>objc_class_prefix (file option)ï¼šObjective-Cä½¿ç”¨</li>\n<li>deprecated (field option)ï¼šæç¤ºå˜é‡å·²åºŸå¼ƒã€ä¸å»ºè®®ä½¿ç”¨</li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">option java_package &#x3D; &quot;com.example.foo&quot;;</span><br><span class=\"line\">option java_multiple_files &#x3D; true;</span><br><span class=\"line\">option java_outer_classname &#x3D; &quot;Ponycopter&quot;;</span><br><span class=\"line\">option optimize_for &#x3D; CODE_SIZE;</span><br><span class=\"line\">int32 old_field &#x3D; 6 [deprecated&#x3D;true];</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"å®šä¹‰-Services\"><a href=\"#å®šä¹‰-Services\" class=\"headerlink\" title=\"å®šä¹‰ Services\"></a>å®šä¹‰ Services</h2><p>è¿™ä¸ªå…¶å®å’ŒgRPCç›¸å…³ï¼Œè¯¦ç»†å¯å‚è€ƒï¼š<a href=\"http://www.grpc.io/\" target=\"_blank\" rel=\"noopener\">gRPC</a>ï¼Œ è¿™é‡Œåšä¸€ä¸ªç®€å•çš„ä»‹ç»<br>è¦å®šä¹‰ä¸€ä¸ªæœåŠ¡ï¼Œä½ å¿…é¡»åœ¨ä½ çš„ .proto æ–‡ä»¶ä¸­æŒ‡å®š <code>service</code></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">service RouteGuide &#123;</span><br><span class=\"line\">    ...</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>ç„¶ååœ¨æˆ‘ä»¬çš„æœåŠ¡ä¸­å®šä¹‰ <code>rpc</code> æ–¹æ³•ï¼ŒæŒ‡å®šå®ƒä»¬çš„è¯·æ±‚çš„å’Œå“åº”ç±»å‹ã€‚<code>gRPC</code> å…è®¸ä½ å®šä¹‰4ç§ç±»å‹çš„ service æ–¹æ³•</p>\n<h2 id=\"ç®€å•RPC\"><a href=\"#ç®€å•RPC\" class=\"headerlink\" title=\"ç®€å•RPC\"></a>ç®€å•RPC</h2><p>å®¢æˆ·ç«¯ä½¿ç”¨ Stub å‘é€è¯·æ±‚åˆ°æœåŠ¡å™¨å¹¶ç­‰å¾…å“åº”è¿”å›ï¼Œå°±åƒå¹³å¸¸çš„å‡½æ•°è°ƒç”¨ä¸€æ ·ï¼Œè¿™æ˜¯ä¸€ä¸ªé˜»å¡å‹çš„è°ƒç”¨</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">&#x2F;&#x2F; Obtains the feature at a given position.</span><br><span class=\"line\">rpc GetFeature(Point) returns (Feature) &#123;&#125;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"æœåŠ¡å™¨ç«¯æµå¼-RPC\"><a href=\"#æœåŠ¡å™¨ç«¯æµå¼-RPC\" class=\"headerlink\" title=\"æœåŠ¡å™¨ç«¯æµå¼ RPC\"></a>æœåŠ¡å™¨ç«¯æµå¼ RPC</h2><p>å®¢æˆ·ç«¯å‘é€è¯·æ±‚åˆ°æœåŠ¡å™¨ï¼Œæ‹¿åˆ°ä¸€ä¸ªæµå»è¯»å–è¿”å›çš„æ¶ˆæ¯åºåˆ—ã€‚å®¢æˆ·ç«¯è¯»å–è¿”å›çš„æµï¼Œç›´åˆ°é‡Œé¢æ²¡æœ‰ä»»ä½•æ¶ˆæ¯ã€‚ä»ä¾‹å­ä¸­å¯ä»¥çœ‹å‡ºï¼Œé€šè¿‡åœ¨å“åº”ç±»å‹å‰æ’å…¥ <code>stream</code> å…³é”®å­—ï¼Œå¯ä»¥æŒ‡å®šä¸€ä¸ªæœåŠ¡å™¨ç«¯çš„æµæ–¹æ³•</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">&#x2F;&#x2F; Obtains the Features available within the given Rectangle.  Results are</span><br><span class=\"line\">&#x2F;&#x2F; streamed rather than returned at once (e.g. in a response message with a</span><br><span class=\"line\">&#x2F;&#x2F; repeated field), as the rectangle may cover a large area and contain a</span><br><span class=\"line\">&#x2F;&#x2F; huge number of features.</span><br><span class=\"line\">rpc ListFeatures(Rectangle) returns (stream Feature) &#123;&#125;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"å®¢æˆ·ç«¯æµå¼-RPC\"><a href=\"#å®¢æˆ·ç«¯æµå¼-RPC\" class=\"headerlink\" title=\"å®¢æˆ·ç«¯æµå¼ RPC\"></a>å®¢æˆ·ç«¯æµå¼ RPC</h2><p>å®¢æˆ·ç«¯å†™å…¥ä¸€ä¸ªæ¶ˆæ¯åºåˆ—å¹¶å°†å…¶å‘é€åˆ°æœåŠ¡å™¨ï¼ŒåŒæ ·ä¹Ÿæ˜¯ä½¿ç”¨æµã€‚ä¸€æ—¦å®¢æˆ·ç«¯å®Œæˆå†™å…¥æ¶ˆæ¯ï¼Œå®ƒç­‰å¾…æœåŠ¡å™¨å®Œæˆè¯»å–è¿”å›å®ƒçš„å“åº”ã€‚é€šè¿‡åœ¨è¯·æ±‚ç±»å‹å‰æŒ‡å®š <code>stream</code> å…³é”®å­—æ¥æŒ‡å®šä¸€ä¸ªå®¢æˆ·ç«¯çš„æµæ–¹æ³•</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">&#x2F;&#x2F; Accepts a stream of Points on a route being traversed, returning a</span><br><span class=\"line\">&#x2F;&#x2F; RouteSummary when traversal is completed.</span><br><span class=\"line\">rpc RecordRoute(stream Point) returns (RouteSummary) &#123;&#125;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"åŒå‘æµå¼-RPC\"><a href=\"#åŒå‘æµå¼-RPC\" class=\"headerlink\" title=\"åŒå‘æµå¼ RPC\"></a>åŒå‘æµå¼ RPC</h2><p>åŒæ–¹ä½¿ç”¨è¯»å†™æµå»å‘é€ä¸€ä¸ªæ¶ˆæ¯åºåˆ—ã€‚ä¸¤ä¸ªæµç‹¬ç«‹æ“ä½œï¼Œå› æ­¤å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨å¯ä»¥ä»¥ä»»æ„å–œæ¬¢çš„é¡ºåºè¯»å†™ï¼šæ¯”å¦‚ï¼Œ æœåŠ¡å™¨å¯ä»¥åœ¨å†™å…¥å“åº”å‰ç­‰å¾…æ¥æ”¶æ‰€æœ‰çš„å®¢æˆ·ç«¯æ¶ˆæ¯ï¼Œæˆ–è€…å¯ä»¥äº¤æ›¿çš„è¯»å–å’Œå†™å…¥æ¶ˆæ¯ï¼Œæˆ–è€…å…¶ä»–è¯»å†™çš„ç»„åˆã€‚æ¯ä¸ªæµä¸­çš„æ¶ˆæ¯é¡ºåºè¢«é¢„ç•™ã€‚ä½ å¯ä»¥é€šè¿‡åœ¨è¯·æ±‚å’Œå“åº”å‰åŠ  <code>stream</code> å…³é”®å­—å»åˆ¶å®šæ–¹æ³•çš„ç±»å‹</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">&#x2F;&#x2F; Accepts a stream of RouteNotes sent while a route is being traversed,</span><br><span class=\"line\">&#x2F;&#x2F; while receiving other RouteNotes (e.g. from other users).</span><br><span class=\"line\">rpc RouteChat(stream RouteNote) returns (stream RouteNote) &#123;&#125;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"ä»£ç ç”Ÿæˆ\"><a href=\"#ä»£ç ç”Ÿæˆ\" class=\"headerlink\" title=\"ä»£ç ç”Ÿæˆ\"></a>ä»£ç ç”Ÿæˆ</h2><p>ä½¿ç”¨ <code>protoc</code> å·¥å…·å¯ä»¥æŠŠç¼–å†™å¥½çš„ <code>proto</code> æ–‡ä»¶â€œç¼–è¯‘â€ä¸ºJava, Python, C++, Go, Ruby, JavaNano, Objective-C,æˆ–C#ä»£ç ï¼Œ <code>protoc</code> å¯ä»¥ä»<a href=\"https://developers.google.com/protocol-buffers/docs/downloads\" target=\"_blank\" rel=\"noopener\">ç‚¹å‡»è¿™é‡Œ</a>è¿›è¡Œä¸‹è½½ã€‚<code>protoc</code> çš„ä½¿ç”¨æ–¹å¼å¦‚ä¸‹ï¼š</p>\n<blockquote>\n<p> GitHub: tagsåœ°å€ <a href=\"https://github.com/protocolbuffers/protobuf/tags\" target=\"_blank\" rel=\"noopener\">https://github.com/protocolbuffers/protobuf/tags</a></p>\n</blockquote>\n<figure class=\"highlight shell\"><table><tr><td class=\"code\"><pre><span class=\"line\">protoc --proto_path=IMPORT_PATH --cpp_out=DST_DIR --java_out=DST_DIR --python_out=DST_DIR --go_out=DST_DIR --ruby_out=DST_DIR --javanano_out=DST_DIR --objc_out=DST_DIR --csharp_out=DST_DIR path/to/file.proto1</span><br></pre></td></tr></table></figure>\n\n<p>å‚æ•°è¯´æ˜ï¼š</p>\n<ul>\n<li>IMPORT_PATHï¼šæŒ‡å®š proto æ–‡ä»¶çš„è·¯å¾„ï¼Œå¦‚æœæ²¡æœ‰æŒ‡å®šï¼Œ protoc ä¼šä»å½“å‰ç›®å½•æœç´¢å¯¹åº”çš„ proto æ–‡ä»¶ï¼Œå¦‚æœæœ‰å¤šä¸ªè·¯å¾„ï¼Œé‚£ä¹ˆå¯ä»¥æŒ‡å®šå¤šæ¬¡<code>--proto_path</code></li>\n<li>æŒ‡å®šå„è¯­è¨€ä»£ç çš„è¾“å‡ºè·¯å¾„<ul>\n<li>â€“cpp_outï¼šç”Ÿæˆc++ä»£ç </li>\n<li>java_out ï¼šç”Ÿæˆjavaä»£ç </li>\n<li>python_out ï¼šç”Ÿæˆpythonä»£ç </li>\n<li>go_out ï¼šç”Ÿæˆgoä»£ç </li>\n<li>ruby_out ï¼šç”Ÿæˆrubyä»£ç </li>\n<li>javanano_out ï¼šé€‚åˆè¿è¡Œåœ¨æœ‰èµ„æºé™åˆ¶çš„å¹³å°ï¼ˆå¦‚Androidï¼‰çš„javaä»£ç </li>\n<li>objc_out ï¼šç”Ÿæˆ Objective-Cä»£ç </li>\n<li>csharp_out ï¼šç”ŸæˆC#ä»£ç </li>\n<li>php_out ï¼šç”ŸæˆPHPä»£ç </li>\n</ul>\n</li>\n</ul>\n<h3 id=\"å‚è€ƒæ–‡çŒ®\"><a href=\"#å‚è€ƒæ–‡çŒ®\" class=\"headerlink\" title=\"å‚è€ƒæ–‡çŒ®\"></a>å‚è€ƒæ–‡çŒ®</h3><ul>\n<li><a href=\"https://www.ibm.com/developerworks/cn/linux/l-cn-gpb/index.html\" target=\"_blank\" rel=\"noopener\">IMB Google Protocol Buffer çš„ä½¿ç”¨å’ŒåŸç†</a></li>\n<li><a href=\"http://doc.oschina.net/grpc?t=57966\" target=\"_blank\" rel=\"noopener\">osChina gRPC å®˜æ–¹æ–‡æ¡£ç¿»è¯‘</a></li>\n<li><a href=\"https://www.cnblogs.com/shitouer/archive/2013/04/10/google-protocol-buffers-tutorial.html\" target=\"_blank\" rel=\"noopener\">cnblogs Protocol Buffers</a></li>\n</ul>\n","categories":["åŸºç¡€ç†è®º"],"tags":["Grpc","ProtoBuf"]},{"title":"åˆæ¢Arthas","url":"/posts/3713561999/","content":"<blockquote>\n<p>åŸºç¡€ç†è®ºç¯‡å­¦ä¹ ç¬”è®°</p>\n</blockquote>\n<h2 id=\"Arthasï¼ˆé˜¿å°”è¨æ–¯ï¼‰-èƒ½ä¸ºä½ åšä»€ä¹ˆï¼Ÿ\"><a href=\"#Arthasï¼ˆé˜¿å°”è¨æ–¯ï¼‰-èƒ½ä¸ºä½ åšä»€ä¹ˆï¼Ÿ\" class=\"headerlink\" title=\"Arthasï¼ˆé˜¿å°”è¨æ–¯ï¼‰ èƒ½ä¸ºä½ åšä»€ä¹ˆï¼Ÿ\"></a>Arthasï¼ˆé˜¿å°”è¨æ–¯ï¼‰ èƒ½ä¸ºä½ åšä»€ä¹ˆï¼Ÿ</h2><p><img src=\"https://alibaba.github.io/arthas/_images/arthas.png\" alt=\"arthas\"></p>\n<p><code>Arthas</code> æ˜¯Alibabaå¼€æºçš„Javaè¯Šæ–­å·¥å…·ï¼Œæ·±å—å¼€å‘è€…å–œçˆ±ã€‚</p>\n<p>å½“ä½ é‡åˆ°ä»¥ä¸‹ç±»ä¼¼é—®é¢˜è€ŒæŸæ‰‹æ— ç­–æ—¶ï¼Œ<code>Arthas</code>å¯ä»¥å¸®åŠ©ä½ è§£å†³ï¼š</p>\n<ol>\n<li>è¿™ä¸ªç±»ä»å“ªä¸ª jar åŒ…åŠ è½½çš„ï¼Ÿä¸ºä»€ä¹ˆä¼šæŠ¥å„ç§ç±»ç›¸å…³çš„ Exceptionï¼Ÿ</li>\n<li>æˆ‘æ”¹çš„ä»£ç ä¸ºä»€ä¹ˆæ²¡æœ‰æ‰§è¡Œåˆ°ï¼Ÿéš¾é“æ˜¯æˆ‘æ²¡ commitï¼Ÿåˆ†æ”¯æé”™äº†ï¼Ÿ</li>\n<li>é‡åˆ°é—®é¢˜æ— æ³•åœ¨çº¿ä¸Š debugï¼Œéš¾é“åªèƒ½é€šè¿‡åŠ æ—¥å¿—å†é‡æ–°å‘å¸ƒå—ï¼Ÿ</li>\n<li>çº¿ä¸Šé‡åˆ°æŸä¸ªç”¨æˆ·çš„æ•°æ®å¤„ç†æœ‰é—®é¢˜ï¼Œä½†çº¿ä¸ŠåŒæ ·æ— æ³• debugï¼Œçº¿ä¸‹æ— æ³•é‡ç°ï¼</li>\n<li>æ˜¯å¦æœ‰ä¸€ä¸ªå…¨å±€è§†è§’æ¥æŸ¥çœ‹ç³»ç»Ÿçš„è¿è¡ŒçŠ¶å†µï¼Ÿ</li>\n<li>æœ‰ä»€ä¹ˆåŠæ³•å¯ä»¥ç›‘æ§åˆ°JVMçš„å®æ—¶è¿è¡ŒçŠ¶æ€ï¼Ÿ</li>\n</ol>\n<p><code>Arthas</code>æ”¯æŒJDK 6+ï¼Œæ”¯æŒLinux/Mac/Winodwsï¼Œé‡‡ç”¨å‘½ä»¤è¡Œäº¤äº’æ¨¡å¼ï¼ŒåŒæ—¶æä¾›ä¸°å¯Œçš„ <code>Tab</code> è‡ªåŠ¨è¡¥å…¨åŠŸèƒ½ï¼Œè¿›ä¸€æ­¥æ–¹ä¾¿è¿›è¡Œé—®é¢˜çš„å®šä½å’Œè¯Šæ–­ã€‚</p>\n<h3 id=\"å¿«é€Ÿå…¥é—¨\"><a href=\"#å¿«é€Ÿå…¥é—¨\" class=\"headerlink\" title=\"å¿«é€Ÿå…¥é—¨\"></a>å¿«é€Ÿå…¥é—¨</h3><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">wget https://alibaba.github.io/arthas/arthas-boot.jar</span><br><span class=\"line\">java -jar arthas-boot.jar</span><br></pre></td></tr></table></figure>\n\n<p>æ‰“å°å¸®åŠ©ä¿¡æ¯</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">java -jar arthas-boot.jar -h</span><br></pre></td></tr></table></figure>\n\n<p>å¿«é€Ÿå¯åŠ¨(ä½¿ç”¨å›½å†…é˜¿é‡Œä¸‹è½½åŒ…)</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">java -jar arthas-boot.jar --repo-mirror aliyun</span><br></pre></td></tr></table></figure>\n\n<p><img src=\"https://z201.oss-cn-shanghai.aliyuncs.com/JavaNote/Arthas/arthas-up-01.png\"></p>\n<ul>\n<li>å¦‚æœå½“å‰æ²¡æœ‰javaç¨‹åºè¿è¡Œåˆ™æç¤ºè¿™ä¸ªå†…å®¹ï¼Œå¹¶ä¸”ä¸ä¼šè¢«æ­£å¸¸å¯åŠ¨ã€‚</li>\n</ul>\n<p>demoç¨‹åºä½œä¸ºæ¼”ç¤º</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">https://github.com/hengyunabc/spring-boot-inside</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>è¿è¡Œæ•ˆæœ</li>\n</ul>\n<blockquote>\n<p>æˆ‘ä»¬å…ˆè¿è¡Œä¸€ä¸ªdemoï¼Œç„¶åè®©arthasè¿è¡Œèµ·æ¥ã€‚</p>\n</blockquote>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">cd</span> spring-boot-inside // è¿›å…¥æ–‡ä»¶å¤¹</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">cd</span> demo-arthas-spring-boot // è¿›å…¥demoé¡¹ç›®</span><br><span class=\"line\"></span><br><span class=\"line\">mvn clean install  // æ„å»ºé¡¹ç›®</span><br><span class=\"line\"></span><br><span class=\"line\">java -jar demo-arthas-spring-boot-0.0.1-SNAPSHOT.jar  // å¯åŠ¨é¡¹ç›®</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>å¯åŠ¨é¡¹ç›®ä¹‹ååœ¨è¿è¡Œarthas</p>\n</blockquote>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">java -jar arthas-boot.jar</span><br></pre></td></tr></table></figure>\n\n<p><img src=\"https://z201.oss-cn-shanghai.aliyuncs.com/JavaNote/Arthas/arthas-up-02.png\"></p>\n<blockquote>\n<p>å¦‚æœå·²ç»æœ‰å¯åŠ¨çš„é¡¹ç›®,ä¼šæç¤º [1] project-name è¿™ç§ã€‚è¾“å…¥æ•°å­—é€‰æ‹©å¯¹åº”çš„é¡¹ç›®å³å¯ã€‚</p>\n</blockquote>\n<p>END</p>\n","categories":["åŸºç¡€ç†è®º"],"tags":["Java","Arthas"]},{"title":"å®è·µ-ç¼“å­˜ç©¿é€ã€å‡»ç©¿","url":"/posts/3752509203/","content":"<blockquote>\n<p>æˆé•¿å°±æ˜¯ä¸æ–­å‘ç°è¿‡å»å‚»é€¼çš„è¿‡ç¨‹ï¼Œè¿™é‡Œè®²è®²å¹³æ—¶å¼€å‘ç»å¸¸ç”¨åˆ°ç¼“å­˜ã€‚</p>\n</blockquote>\n<h2 id=\"ç¼“å­˜ç©¿é€å’Œç¼“å­˜å‡»ç©¿\"><a href=\"#ç¼“å­˜ç©¿é€å’Œç¼“å­˜å‡»ç©¿\" class=\"headerlink\" title=\"ç¼“å­˜ç©¿é€å’Œç¼“å­˜å‡»ç©¿\"></a>ç¼“å­˜ç©¿é€å’Œç¼“å­˜å‡»ç©¿</h2><ul>\n<li>æœ¬å†…å®¹ç›¸å…³ä»£ç åœ°å€:<a href=\"https://github.com/z201/z201.github.io.code/tree/master/demonstration-project/cache-breakdown\" target=\"_blank\" rel=\"noopener\">cache-breakdown</a></li>\n<li>ä»£ç è¿è¡Œéœ€è¦mysqlå’Œredisç¯å¢ƒ</li>\n</ul>\n<h3 id=\"ç¼“å­˜ç©¿é€\"><a href=\"#ç¼“å­˜ç©¿é€\" class=\"headerlink\" title=\"ç¼“å­˜ç©¿é€\"></a>ç¼“å­˜ç©¿é€</h3><p><img src=\"https://z201.oss-cn-shanghai.aliyuncs.com/JavaNote/%E7%BC%93%E5%AD%98%E5%87%BB%E7%A9%BF/%E6%9F%A5%E8%AF%A2%E7%BC%93%E5%AD%98.svg\"></p>\n<ul>\n<li>ç†æƒ³çš„æƒ…å†µä¸‹æˆ‘ä»¬æ•°æ®ç¼“å­˜åˆ°redisé‡Œé¢ï¼Œå®¢æˆ·è®¿é—®æ•°æ®çš„æ—¶å€™ç›´æ¥å»ç¼“å­˜æŸ¥è¯¢ï¼Œå¦‚æœæ²¡æœ‰ç¼“å­˜å°±å»æ•°æ®åº“æŸ¥è¯¢ã€‚</li>\n<li>ä»”ç»†æƒ³æƒ³è¿™é‡Œå…¶å®æœ‰ä¸€ä¸ªbugï¼Œå¿…é¡»æ˜¯ç¼“å­˜æœ‰çš„æ•°æ®æ‰ä¼šå»æ•°æ®åº“æŸ¥è¯¢ï¼Œå¦‚æœä¸€ç›´éƒ½æ˜¯åœ¨æŸ¥è¯¢ä¸€ä¸ªæ²¡æœ‰å¾—æ•°æ®å’‹åŠå‘¢ï¼Œç¼“å­˜ä¼šä¸€ç›´è½ç©ºï¼Œè€Œä¸”æ¯æ¬¡éƒ½ä¼šå»æ•°æ®åº“æŸ¥è¯¢ã€‚</li>\n</ul>\n<a id=\"more\"></a>\n\n<h4 id=\"å¸¸ç”¨è§£å†³æ€è·¯\"><a href=\"#å¸¸ç”¨è§£å†³æ€è·¯\" class=\"headerlink\" title=\"å¸¸ç”¨è§£å†³æ€è·¯\"></a>å¸¸ç”¨è§£å†³æ€è·¯</h4><blockquote>\n<p>è¿™é‡Œæ³¨æ„åˆ—ä¸¾å¸¸ç”¨æ–¹æ¡ˆï¼Œæ ¹æ®å®é™…æƒ…å†µä½¿ç”¨</p>\n</blockquote>\n<h4 id=\"ç©ºå€¼ç¼“å­˜\"><a href=\"#ç©ºå€¼ç¼“å­˜\" class=\"headerlink\" title=\"ç©ºå€¼ç¼“å­˜\"></a>ç©ºå€¼ç¼“å­˜</h4><blockquote>\n<p>åœ¨è®¿é—®ç¼“å­˜keyä¹‹å‰ï¼Œè®¾ç½®å¦ä¸€ä¸ªçŸ­æœŸkeyæ¥é”ä½å½“å‰keyçš„è®¿é—®ã€‚è¿™ä¸ªæ–¹æ¡ˆå¯ä»¥é™ä½æŒç»­ç¼“å­˜è½ç©ºçš„æƒ…å†µã€‚è‡³å°‘æ•°æ®åº“è¢«ç©¿é€çš„æ¦‚ç‡å°å¾ˆå¤šäº†ã€‚</p>\n</blockquote>\n<p><img src=\"https://z201.oss-cn-shanghai.aliyuncs.com/JavaNote/%E7%BC%93%E5%AD%98%E5%87%BB%E7%A9%BF/%E6%9F%A5%E8%AF%A2%E7%BC%93%E5%AD%98-%E7%A9%BA%E5%80%BC%E7%BC%93%E5%AD%98.svg\"></p>\n<ul>\n<li>Redisæ–¹æ¡ˆ<ul>\n<li>å¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œå½“ç¼“å­˜å’Œæ•°æ®åº“ä¸­éƒ½æ²¡æ‰¾åˆ°çš„æ—¶å€™å°±å°†æŸ¥è¯¢æ¡ä»¶ä½œä¸ºkeyå¹¶åœ¨ç¼“å­˜ä¸­æ’å…¥ä¸€ä¸ªç©ºçš„æ•°æ®ï¼Œå¹¶æŒ‡å®šå¥½è¿‡æœŸæ—¶é—´ã€‚è¿™æ ·ä¸‹æ¬¡çš„è¯·æ±‚å°±ä¼šè¢«ç¼“å­˜å‘½ä¸­ã€‚</li>\n</ul>\n</li>\n</ul>\n<h4 id=\"ä»£ç å®ç°\"><a href=\"#ä»£ç å®ç°\" class=\"headerlink\" title=\"ä»£ç å®ç°\"></a>ä»£ç å®ç°</h4><!--more-->\n\n<ul>\n<li>rediså­—ç¬¦ä¸²æ“ä½œæ¥å£</li>\n</ul>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@author</span> z201.coding@gmail.com</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">interface</span> <span class=\"title\">CacheBreakdownServiceI</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * å†™å…¥å­—ç¬¦ä¸²ç±»å‹</span></span><br><span class=\"line\"><span class=\"comment\">     *</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> key</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> value</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@return</span></span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"function\">Boolean <span class=\"title\">setString</span><span class=\"params\">(String key, String value)</span></span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * å†™å…¥å­—ç¬¦ä¸²å¹¶è®¾ç½®è¿‡æœŸæ—¶é—´</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> key</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> timeout</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> value</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@return</span></span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"function\">Boolean <span class=\"title\">setExString</span><span class=\"params\">(String key, Long timeout, String value)</span></span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * è·å–å­—ç¬¦ä¸²ç±»å‹</span></span><br><span class=\"line\"><span class=\"comment\">     *</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> key</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@return</span></span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"function\">String <span class=\"title\">getString</span><span class=\"params\">(String key)</span></span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * è®¾ç½®keyé»˜è®¤è¿‡æœŸæ—¶é—´</span></span><br><span class=\"line\"><span class=\"comment\">     *</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> key</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@return</span></span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"function\">Boolean <span class=\"title\">expireKey</span><span class=\"params\">(String key)</span></span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * è®¾ç½®keyè¿‡æœŸæ—¶é—´</span></span><br><span class=\"line\"><span class=\"comment\">     *</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> key</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> timeout millis</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@return</span></span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"function\">Boolean <span class=\"title\">expireKey</span><span class=\"params\">(String key, Long timeout)</span></span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * SET if Not exists</span></span><br><span class=\"line\"><span class=\"comment\">     * åªåœ¨é”® key ä¸å­˜åœ¨çš„æƒ…å†µä¸‹ï¼Œ å°†é”® key çš„å€¼è®¾ç½®ä¸º value ã€‚</span></span><br><span class=\"line\"><span class=\"comment\">     * è‹¥é”® key å·²ç»å­˜åœ¨ï¼Œ åˆ™ SETNX å‘½ä»¤ä¸åšä»»ä½•åŠ¨ä½œã€‚</span></span><br><span class=\"line\"><span class=\"comment\">     * (å¦‚æœä¸å­˜åœ¨ï¼Œåˆ™ SET)çš„ç®€å†™ã€‚</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> key</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@return</span></span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"function\">Boolean <span class=\"title\">setNx</span><span class=\"params\">(String key)</span></span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * åˆ é™¤</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> key</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@return</span></span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"function\">Long <span class=\"title\">del</span><span class=\"params\">(String key)</span></span>;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>å®ç°ç±»</li>\n</ul>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@author</span> z201.coding@gmail.com</span></span><br><span class=\"line\"><span class=\"comment\"> **/</span></span><br><span class=\"line\"><span class=\"meta\">@Service</span></span><br><span class=\"line\"><span class=\"meta\">@Slf</span>4j</span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">CacheBreakdownServiceImpl</span> <span class=\"keyword\">implements</span> <span class=\"title\">CacheBreakdownServiceI</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> String CACHE_NAME = <span class=\"string\">\"CACHE-PERSON:\"</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> <span class=\"keyword\">long</span> CACHE_OUT_TIME = <span class=\"number\">600</span>; <span class=\"comment\">// 6ç§’</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Autowired</span></span><br><span class=\"line\">    RedisTemplate redisTemplate;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> Boolean <span class=\"title\">setString</span><span class=\"params\">(String key, String value)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> setExString(key, CACHE_OUT_TIME, value);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> Boolean <span class=\"title\">setExString</span><span class=\"params\">(String key, Long timeout, String value)</span> </span>&#123;</span><br><span class=\"line\">        notNull(key);</span><br><span class=\"line\">        notNull(value);</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (<span class=\"keyword\">null</span> == timeout || timeout &lt;= <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">            timeout = CACHE_OUT_TIME;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">final</span> Long finalTimeout = timeout;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> (Boolean) redisTemplate.execute((RedisCallback&lt;Boolean&gt;) connection -&gt; &#123;</span><br><span class=\"line\">            RedisSerializer&lt;String&gt; stringRedisSerializer = redisTemplate.getStringSerializer();</span><br><span class=\"line\">            <span class=\"keyword\">return</span> connection.setEx(</span><br><span class=\"line\">                    stringRedisSerializer.serialize(CACHE_NAME + key),</span><br><span class=\"line\">                    finalTimeout,</span><br><span class=\"line\">                    stringRedisSerializer.serialize(value));</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> String <span class=\"title\">getString</span><span class=\"params\">(String key)</span> </span>&#123;</span><br><span class=\"line\">        notNull(key);</span><br><span class=\"line\">        <span class=\"keyword\">return</span> (String) redisTemplate.execute((RedisCallback&lt;String&gt;) connection -&gt; &#123;</span><br><span class=\"line\">            RedisSerializer&lt;String&gt; stringRedisSerializer = redisTemplate.getStringSerializer();</span><br><span class=\"line\">            <span class=\"keyword\">final</span> <span class=\"keyword\">byte</span>[] bytes = connection.get(stringRedisSerializer.serialize(CACHE_NAME + key));</span><br><span class=\"line\">            <span class=\"keyword\">return</span> stringRedisSerializer.deserialize(bytes);</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> Boolean <span class=\"title\">expireKey</span><span class=\"params\">(String key)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> expireKey(key, CACHE_OUT_TIME);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> Boolean <span class=\"title\">expireKey</span><span class=\"params\">(String key, Long timeout)</span> </span>&#123;</span><br><span class=\"line\">        notNull(key);</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (<span class=\"keyword\">null</span> == timeout || timeout &lt;= <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">            timeout = CACHE_OUT_TIME;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">final</span> Long finalTimeout = timeout;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> (Boolean) redisTemplate.execute((RedisCallback&lt;Boolean&gt;) connection -&gt; &#123;</span><br><span class=\"line\">            RedisSerializer&lt;String&gt; stringRedisSerializer = redisTemplate.getStringSerializer();</span><br><span class=\"line\">            <span class=\"keyword\">return</span> connection.pExpire(stringRedisSerializer.serialize(CACHE_NAME + key), finalTimeout);</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> Boolean <span class=\"title\">setNx</span><span class=\"params\">(String key)</span> </span>&#123;</span><br><span class=\"line\">        notNull(key);</span><br><span class=\"line\">        <span class=\"keyword\">return</span> (Boolean) redisTemplate.execute((RedisCallback&lt;Boolean&gt;) connection -&gt; &#123;</span><br><span class=\"line\">            RedisSerializer&lt;String&gt; stringRedisSerializer = redisTemplate.getStringSerializer();</span><br><span class=\"line\">            <span class=\"keyword\">return</span> connection.setNX(stringRedisSerializer.serialize(CACHE_NAME + key), stringRedisSerializer.serialize(<span class=\"string\">\"SetNx\"</span>));</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> Long <span class=\"title\">del</span><span class=\"params\">(String key)</span> </span>&#123;</span><br><span class=\"line\">        notNull(key);</span><br><span class=\"line\">        <span class=\"keyword\">return</span> (Long) redisTemplate.execute((RedisCallback&lt;Long&gt;) connection -&gt; &#123;</span><br><span class=\"line\">            RedisSerializer&lt;String&gt; stringRedisSerializer = redisTemplate.getStringSerializer();</span><br><span class=\"line\">            <span class=\"keyword\">return</span> connection.del(stringRedisSerializer.serialize(CACHE_NAME + key));</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">final</span> <span class=\"keyword\">void</span> <span class=\"title\">notNull</span><span class=\"params\">(String key)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (<span class=\"keyword\">null</span> == key || key.isEmpty()) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> RuntimeException();</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>æµ‹è¯•æ•°æ®æ“ä½œæ¥å£</li>\n</ul>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@author</span> z201.coding@gmail.com</span></span><br><span class=\"line\"><span class=\"comment\"> **/</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">interface</span> <span class=\"title\">PersonServiceI</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * æ ¹æ®ä¸»é”®è·å–ç”¨æˆ·</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> id</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@return</span></span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"function\">Person <span class=\"title\">findById</span><span class=\"params\">(Long id)</span></span>;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>æ¥å£å®ç°ç±»</li>\n</ul>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@author</span> z201.coding@gmail.com</span></span><br><span class=\"line\"><span class=\"comment\"> **/</span></span><br><span class=\"line\"><span class=\"meta\">@Service</span></span><br><span class=\"line\"><span class=\"meta\">@Slf</span>4j</span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">PersonServiceImpl</span> <span class=\"keyword\">implements</span> <span class=\"title\">PersonServiceI</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> String INFO = <span class=\"string\">\"INFO:\"</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Autowired</span></span><br><span class=\"line\">    PersonDao personDao;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Autowired</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> CacheBreakdownServiceI cacheBreakdownService;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> Person <span class=\"title\">findById</span><span class=\"params\">(Long id)</span> </span>&#123;</span><br><span class=\"line\">        Gson gson = <span class=\"keyword\">new</span> GsonBuilder().create();</span><br><span class=\"line\">        String key = INFO + id;</span><br><span class=\"line\">        String data = cacheBreakdownService.getString(key);</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (data == <span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">            log.info(<span class=\"string\">\"get db\"</span>);</span><br><span class=\"line\">            Person person = personDao.findById(id);</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (person != <span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">                data = gson.toJson(person);</span><br><span class=\"line\">                <span class=\"keyword\">if</span> (cacheBreakdownService.setString(key, data)) &#123;</span><br><span class=\"line\">                    log.info(<span class=\"string\">\"set cache \"</span>);</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;<span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">                <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> Person();</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        log.info(<span class=\"string\">\"get cache\"</span>);</span><br><span class=\"line\">        Person person = gson.fromJson(data,Person<span class=\"class\">.<span class=\"keyword\">class</span>)</span>;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> person;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>æ•°æ®å‡†å¤‡</li>\n</ul>\n<blockquote>\n<p>å¯¼å…¥æ•°æ®åº“person.sqlï¼Œä¹Ÿå¯ä»¥è‡ªå·±å‚è€ƒæµ‹è¯•ä»£ç ç”Ÿæˆæµ‹è¯•æ•°æ®ã€‚</p>\n</blockquote>\n<figure class=\"highlight sql\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># æŸ¥çœ‹æ•°æ®åº“æ•°æ®</span></span><br><span class=\"line\"><span class=\"keyword\">SELECT</span> <span class=\"keyword\">COUNT</span>(*) <span class=\"keyword\">FROM</span> <span class=\"string\">`person`</span> </span><br><span class=\"line\">&gt;&gt; <span class=\"number\">92022</span></span><br><span class=\"line\"><span class=\"comment\"># æ‰¾ä¸€æ¡æœ‰çš„æ•°æ®</span></span><br><span class=\"line\"><span class=\"keyword\">SELECT</span> full_name <span class=\"keyword\">FROM</span> <span class=\"string\">`person`</span> <span class=\"keyword\">WHERE</span> <span class=\"keyword\">id</span> = <span class=\"number\">1</span></span><br><span class=\"line\">&gt;&gt; çµèŠ¸é»„</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>å•å…ƒæµ‹è¯•ä»£ç ,ç†æƒ³çŠ¶æ€ä¸‹çš„ç¼“å­˜ã€‚</li>\n</ul>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">testCacheBreakdownInfo</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">long</span> startTimes = System.currentTimeMillis();</span><br><span class=\"line\">        log.info(<span class=\"string\">\"fullName &#123;&#125; \"</span>, personService.findById(<span class=\"number\">1L</span>).getFullName());</span><br><span class=\"line\">        log.info(<span class=\"string\">\"fullName &#123;&#125; \"</span>, personService.findById(<span class=\"number\">1L</span>).getFullName());</span><br><span class=\"line\">        log.info(<span class=\"string\">\"fullName &#123;&#125; \"</span>, personService.findById(<span class=\"number\">1L</span>).getFullName());</span><br><span class=\"line\">        log.info(<span class=\"string\">\"fullName &#123;&#125; \"</span>, personService.findById(<span class=\"number\">1L</span>).getFullName());</span><br><span class=\"line\">        log.info(<span class=\"string\">\"fullName &#123;&#125; \"</span>, personService.findById(<span class=\"number\">1L</span>).getFullName());</span><br><span class=\"line\">        <span class=\"keyword\">long</span> endTimes = System.currentTimeMillis();</span><br><span class=\"line\">        log.info(<span class=\"string\">\"æ‰§è¡Œå®Œæ¯•:  &#123;&#125;\"</span>, (endTimes - startTimes));</span><br><span class=\"line\">    &#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>æ—¥å¿—è¾“å‡º</li>\n</ul>\n<figure class=\"highlight verilog\"><table><tr><td class=\"code\"><pre><span class=\"line\">[main] INFO  c<span class=\"variable\">.z201</span><span class=\"variable\">.cache</span><span class=\"variable\">.main</span><span class=\"variable\">.CacheBreakdownTest</span> - Started CacheBreakdownTest in <span class=\"number\">2</span><span class=\"variable\">.013</span> seconds (JVM running <span class=\"keyword\">for</span> <span class=\"number\">2</span><span class=\"variable\">.997</span>)</span><br><span class=\"line\">[main] INFO  io<span class=\"variable\">.lettuce</span><span class=\"variable\">.core</span><span class=\"variable\">.EpollProvider</span> - Starting without optional epoll <span class=\"keyword\">library</span></span><br><span class=\"line\">[main] INFO  io<span class=\"variable\">.lettuce</span><span class=\"variable\">.core</span><span class=\"variable\">.KqueueProvider</span> - Starting without optional kqueue <span class=\"keyword\">library</span></span><br><span class=\"line\">[main] INFO  c<span class=\"variable\">.z</span><span class=\"variable\">.c</span><span class=\"variable\">.service</span><span class=\"variable\">.impl</span><span class=\"variable\">.PersonServiceImpl</span> - get db</span><br><span class=\"line\">[main] INFO  com<span class=\"variable\">.zaxxer</span><span class=\"variable\">.hikari</span><span class=\"variable\">.HikariDataSource</span> - HikariPool-<span class=\"number\">1</span> - Starting...</span><br><span class=\"line\">[main] INFO  com<span class=\"variable\">.zaxxer</span><span class=\"variable\">.hikari</span><span class=\"variable\">.HikariDataSource</span> - HikariPool-<span class=\"number\">1</span> - Start completed.</span><br><span class=\"line\">[main] INFO  c<span class=\"variable\">.z</span><span class=\"variable\">.c</span><span class=\"variable\">.service</span><span class=\"variable\">.impl</span><span class=\"variable\">.PersonServiceImpl</span> - set cache </span><br><span class=\"line\">[main] INFO  c<span class=\"variable\">.z</span><span class=\"variable\">.c</span><span class=\"variable\">.service</span><span class=\"variable\">.impl</span><span class=\"variable\">.PersonServiceImpl</span> - get cache</span><br><span class=\"line\">[main] INFO  c<span class=\"variable\">.z201</span><span class=\"variable\">.cache</span><span class=\"variable\">.main</span><span class=\"variable\">.CacheBreakdownTest</span> - fullName çµèŠ¸é»„ </span><br><span class=\"line\">[main] INFO  c<span class=\"variable\">.z</span><span class=\"variable\">.c</span><span class=\"variable\">.service</span><span class=\"variable\">.impl</span><span class=\"variable\">.PersonServiceImpl</span> - get cache</span><br><span class=\"line\">[main] INFO  c<span class=\"variable\">.z201</span><span class=\"variable\">.cache</span><span class=\"variable\">.main</span><span class=\"variable\">.CacheBreakdownTest</span> - fullName çµèŠ¸é»„ </span><br><span class=\"line\">[main] INFO  c<span class=\"variable\">.z</span><span class=\"variable\">.c</span><span class=\"variable\">.service</span><span class=\"variable\">.impl</span><span class=\"variable\">.PersonServiceImpl</span> - get cache</span><br><span class=\"line\">[main] INFO  c<span class=\"variable\">.z201</span><span class=\"variable\">.cache</span><span class=\"variable\">.main</span><span class=\"variable\">.CacheBreakdownTest</span> - fullName çµèŠ¸é»„ </span><br><span class=\"line\">[main] INFO  c<span class=\"variable\">.z</span><span class=\"variable\">.c</span><span class=\"variable\">.service</span><span class=\"variable\">.impl</span><span class=\"variable\">.PersonServiceImpl</span> - get cache</span><br><span class=\"line\">[main] INFO  c<span class=\"variable\">.z201</span><span class=\"variable\">.cache</span><span class=\"variable\">.main</span><span class=\"variable\">.CacheBreakdownTest</span> - fullName çµèŠ¸é»„ </span><br><span class=\"line\">[main] INFO  c<span class=\"variable\">.z</span><span class=\"variable\">.c</span><span class=\"variable\">.service</span><span class=\"variable\">.impl</span><span class=\"variable\">.PersonServiceImpl</span> - get cache</span><br><span class=\"line\">[main] INFO  c<span class=\"variable\">.z201</span><span class=\"variable\">.cache</span><span class=\"variable\">.main</span><span class=\"variable\">.CacheBreakdownTest</span> - fullName çµèŠ¸é»„ </span><br><span class=\"line\">[main] INFO  c<span class=\"variable\">.z201</span><span class=\"variable\">.cache</span><span class=\"variable\">.main</span><span class=\"variable\">.CacheBreakdownTest</span> - æ‰§è¡Œå®Œæ¯•:  <span class=\"number\">685</span></span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>è¿™é‡Œå¯ä»¥çœ‹åˆ°ç¬¬ä¸€æ¬¡æŸ¥è¯¢åˆ°ç»“æœè¢«ç¼“å­˜ï¼Œæ‰€ä»¥åé¢çš„éƒ½æ˜¯æŸ¥è¯¢åˆ°è¯¥ç¼“å­˜ã€‚</p>\n</blockquote>\n<ul>\n<li>æ¼”ç¤ºç¼“å­˜å‡»ç©¿çš„æƒ…å†µ,id = <code>1000000</code>å®é™…ä¸Šå¹¶ä¸å­˜åœ¨</li>\n</ul>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">testCacheBreakdownInfo</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">long</span> startTimes = System.currentTimeMillis();</span><br><span class=\"line\">    log.info(<span class=\"string\">\"fullName &#123;&#125; \"</span>, personService.findById(<span class=\"number\">100000L</span>).getFullName());</span><br><span class=\"line\">    log.info(<span class=\"string\">\"fullName &#123;&#125; \"</span>, personService.findById(<span class=\"number\">100000L</span>).getFullName());</span><br><span class=\"line\">    log.info(<span class=\"string\">\"fullName &#123;&#125; \"</span>, personService.findById(<span class=\"number\">100000L</span>).getFullName());</span><br><span class=\"line\">    log.info(<span class=\"string\">\"fullName &#123;&#125; \"</span>, personService.findById(<span class=\"number\">100000L</span>).getFullName());</span><br><span class=\"line\">    log.info(<span class=\"string\">\"fullName &#123;&#125; \"</span>, personService.findById(<span class=\"number\">100000L</span>).getFullName());</span><br><span class=\"line\">    <span class=\"keyword\">long</span> endTimes = System.currentTimeMillis();</span><br><span class=\"line\">    log.info(<span class=\"string\">\"æ‰§è¡Œå®Œæ¯•:  &#123;&#125;\"</span>, (endTimes - startTimes));</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>æ—¥å¿—è¾“å‡º</li>\n</ul>\n<figure class=\"highlight verilog\"><table><tr><td class=\"code\"><pre><span class=\"line\">[main] INFO  c<span class=\"variable\">.z201</span><span class=\"variable\">.cache</span><span class=\"variable\">.main</span><span class=\"variable\">.CacheBreakdownTest</span> - Started CacheBreakdownTest in <span class=\"number\">2</span><span class=\"variable\">.009</span> seconds (JVM running <span class=\"keyword\">for</span> <span class=\"number\">2</span><span class=\"variable\">.973</span>)</span><br><span class=\"line\">[main] INFO  io<span class=\"variable\">.lettuce</span><span class=\"variable\">.core</span><span class=\"variable\">.EpollProvider</span> - Starting without optional epoll <span class=\"keyword\">library</span></span><br><span class=\"line\">[main] INFO  io<span class=\"variable\">.lettuce</span><span class=\"variable\">.core</span><span class=\"variable\">.KqueueProvider</span> - Starting without optional kqueue <span class=\"keyword\">library</span></span><br><span class=\"line\">[main] INFO  c<span class=\"variable\">.z</span><span class=\"variable\">.c</span><span class=\"variable\">.service</span><span class=\"variable\">.impl</span><span class=\"variable\">.PersonServiceImpl</span> - get db</span><br><span class=\"line\">[main] INFO  com<span class=\"variable\">.zaxxer</span><span class=\"variable\">.hikari</span><span class=\"variable\">.HikariDataSource</span> - HikariPool-<span class=\"number\">1</span> - Starting...</span><br><span class=\"line\">[main] INFO  com<span class=\"variable\">.zaxxer</span><span class=\"variable\">.hikari</span><span class=\"variable\">.HikariDataSource</span> - HikariPool-<span class=\"number\">1</span> - Start completed.</span><br><span class=\"line\">[main] INFO  c<span class=\"variable\">.z201</span><span class=\"variable\">.cache</span><span class=\"variable\">.main</span><span class=\"variable\">.CacheBreakdownTest</span> - fullName <span class=\"literal\">null</span> </span><br><span class=\"line\">[main] INFO  c<span class=\"variable\">.z</span><span class=\"variable\">.c</span><span class=\"variable\">.service</span><span class=\"variable\">.impl</span><span class=\"variable\">.PersonServiceImpl</span> - get db</span><br><span class=\"line\">[main] INFO  c<span class=\"variable\">.z201</span><span class=\"variable\">.cache</span><span class=\"variable\">.main</span><span class=\"variable\">.CacheBreakdownTest</span> - fullName <span class=\"literal\">null</span> </span><br><span class=\"line\">[main] INFO  c<span class=\"variable\">.z</span><span class=\"variable\">.c</span><span class=\"variable\">.service</span><span class=\"variable\">.impl</span><span class=\"variable\">.PersonServiceImpl</span> - get db</span><br><span class=\"line\">[main] INFO  c<span class=\"variable\">.z201</span><span class=\"variable\">.cache</span><span class=\"variable\">.main</span><span class=\"variable\">.CacheBreakdownTest</span> - fullName <span class=\"literal\">null</span> </span><br><span class=\"line\">[main] INFO  c<span class=\"variable\">.z</span><span class=\"variable\">.c</span><span class=\"variable\">.service</span><span class=\"variable\">.impl</span><span class=\"variable\">.PersonServiceImpl</span> - get db</span><br><span class=\"line\">[main] INFO  c<span class=\"variable\">.z201</span><span class=\"variable\">.cache</span><span class=\"variable\">.main</span><span class=\"variable\">.CacheBreakdownTest</span> - fullName <span class=\"literal\">null</span> </span><br><span class=\"line\">[main] INFO  c<span class=\"variable\">.z</span><span class=\"variable\">.c</span><span class=\"variable\">.service</span><span class=\"variable\">.impl</span><span class=\"variable\">.PersonServiceImpl</span> - get db</span><br><span class=\"line\">[main] INFO  c<span class=\"variable\">.z201</span><span class=\"variable\">.cache</span><span class=\"variable\">.main</span><span class=\"variable\">.CacheBreakdownTest</span> - fullName <span class=\"literal\">null</span> </span><br><span class=\"line\">[main] INFO  c<span class=\"variable\">.z201</span><span class=\"variable\">.cache</span><span class=\"variable\">.main</span><span class=\"variable\">.CacheBreakdownTest</span> - æ‰§è¡Œå®Œæ¯•:  <span class=\"number\">658</span></span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>è¿™é‡Œå¯ä»¥çœ‹åˆ°æˆåŠŸçš„ç¼“å­˜å‡»ç©¿ï¼Œå› ä¸ºç¼“å­˜æœªå‘½ä¸­ï¼Œæ•°æ®åº“é‡Œé¢ä¹Ÿæ²¡æœ‰ã€‚</p>\n</blockquote>\n<h4 id=\"ç©ºå€¼ç¼“å­˜æ–¹æ³•å®æ–½\"><a href=\"#ç©ºå€¼ç¼“å­˜æ–¹æ³•å®æ–½\" class=\"headerlink\" title=\"ç©ºå€¼ç¼“å­˜æ–¹æ³•å®æ–½\"></a>ç©ºå€¼ç¼“å­˜æ–¹æ³•å®æ–½</h4><figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">synchronized</span> Person <span class=\"title\">findById</span><span class=\"params\">(Long id)</span> </span>&#123;</span><br><span class=\"line\">        Gson gson = <span class=\"keyword\">new</span> GsonBuilder().create();</span><br><span class=\"line\">        String key = INFO + id;</span><br><span class=\"line\">        String data = cacheBreakdownService.getString(key);</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (data == <span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">            log.info(<span class=\"string\">\"get db\"</span>);</span><br><span class=\"line\">            Person person = personDao.findById(id);</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (person != <span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">                data = gson.toJson(person);</span><br><span class=\"line\">                <span class=\"keyword\">if</span> (cacheBreakdownService.setString(key, data)) &#123;</span><br><span class=\"line\">                    log.info(<span class=\"string\">\"set cache \"</span>);</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">                <span class=\"comment\">// æ’å…¥ä¸€ä¸ªç©ºæ ¼è¿›å»</span></span><br><span class=\"line\">                <span class=\"keyword\">if</span> (cacheBreakdownService.setString(key, <span class=\"string\">\" \"</span>)) &#123;</span><br><span class=\"line\">                    log.info(<span class=\"string\">\"set cache value null\"</span>);</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">                <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> Person();</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (data == <span class=\"keyword\">null</span> || data.isEmpty() || data.trim().length() == <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> Person();</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        log.info(<span class=\"string\">\"get cache\"</span>);</span><br><span class=\"line\">        Person person = gson.fromJson(data, Person<span class=\"class\">.<span class=\"keyword\">class</span>)</span>;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> person;</span><br><span class=\"line\">    &#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>æ—¥å¿—è¾“å‡º</li>\n</ul>\n<figure class=\"highlight verilog\"><table><tr><td class=\"code\"><pre><span class=\"line\">[main] INFO  c<span class=\"variable\">.z201</span><span class=\"variable\">.cache</span><span class=\"variable\">.main</span><span class=\"variable\">.CacheBreakdownTest</span> - Started CacheBreakdownTest in <span class=\"number\">1</span><span class=\"variable\">.965</span> seconds (JVM running <span class=\"keyword\">for</span> <span class=\"number\">2</span><span class=\"variable\">.973</span>)</span><br><span class=\"line\">[main] INFO  io<span class=\"variable\">.lettuce</span><span class=\"variable\">.core</span><span class=\"variable\">.EpollProvider</span> - Starting without optional epoll <span class=\"keyword\">library</span></span><br><span class=\"line\">[main] INFO  io<span class=\"variable\">.lettuce</span><span class=\"variable\">.core</span><span class=\"variable\">.KqueueProvider</span> - Starting without optional kqueue <span class=\"keyword\">library</span></span><br><span class=\"line\">[main] INFO  c<span class=\"variable\">.z</span><span class=\"variable\">.c</span><span class=\"variable\">.service</span><span class=\"variable\">.impl</span><span class=\"variable\">.PersonServiceImpl</span> - get db</span><br><span class=\"line\">[main] INFO  com<span class=\"variable\">.zaxxer</span><span class=\"variable\">.hikari</span><span class=\"variable\">.HikariDataSource</span> - HikariPool-<span class=\"number\">1</span> - Starting...</span><br><span class=\"line\">[main] INFO  com<span class=\"variable\">.zaxxer</span><span class=\"variable\">.hikari</span><span class=\"variable\">.HikariDataSource</span> - HikariPool-<span class=\"number\">1</span> - Start completed.</span><br><span class=\"line\">  [main] INFO  c<span class=\"variable\">.z</span><span class=\"variable\">.c</span><span class=\"variable\">.service</span><span class=\"variable\">.impl</span><span class=\"variable\">.PersonServiceImpl</span> - set cache value <span class=\"literal\">null</span> # è¿™é‡Œç©ºå€¼ç¼“å­˜</span><br><span class=\"line\">[main] INFO  c<span class=\"variable\">.z201</span><span class=\"variable\">.cache</span><span class=\"variable\">.main</span><span class=\"variable\">.CacheBreakdownTest</span> - fullName <span class=\"literal\">null</span> </span><br><span class=\"line\">[main] INFO  c<span class=\"variable\">.z</span><span class=\"variable\">.c</span><span class=\"variable\">.service</span><span class=\"variable\">.impl</span><span class=\"variable\">.PersonServiceImpl</span> - get cache</span><br><span class=\"line\">[main] INFO  c<span class=\"variable\">.z201</span><span class=\"variable\">.cache</span><span class=\"variable\">.main</span><span class=\"variable\">.CacheBreakdownTest</span> - fullName <span class=\"literal\">null</span> </span><br><span class=\"line\">[main] INFO  c<span class=\"variable\">.z</span><span class=\"variable\">.c</span><span class=\"variable\">.service</span><span class=\"variable\">.impl</span><span class=\"variable\">.PersonServiceImpl</span> - get cache</span><br><span class=\"line\">[main] INFO  c<span class=\"variable\">.z201</span><span class=\"variable\">.cache</span><span class=\"variable\">.main</span><span class=\"variable\">.CacheBreakdownTest</span> - fullName <span class=\"literal\">null</span> </span><br><span class=\"line\">[main] INFO  c<span class=\"variable\">.z</span><span class=\"variable\">.c</span><span class=\"variable\">.service</span><span class=\"variable\">.impl</span><span class=\"variable\">.PersonServiceImpl</span> - get cache</span><br><span class=\"line\">[main] INFO  c<span class=\"variable\">.z201</span><span class=\"variable\">.cache</span><span class=\"variable\">.main</span><span class=\"variable\">.CacheBreakdownTest</span> - fullName <span class=\"literal\">null</span> </span><br><span class=\"line\">[main] INFO  c<span class=\"variable\">.z</span><span class=\"variable\">.c</span><span class=\"variable\">.service</span><span class=\"variable\">.impl</span><span class=\"variable\">.PersonServiceImpl</span> - get cache</span><br><span class=\"line\">[main] INFO  c<span class=\"variable\">.z201</span><span class=\"variable\">.cache</span><span class=\"variable\">.main</span><span class=\"variable\">.CacheBreakdownTest</span> - fullName <span class=\"literal\">null</span> </span><br><span class=\"line\">[main] INFO  c<span class=\"variable\">.z201</span><span class=\"variable\">.cache</span><span class=\"variable\">.main</span><span class=\"variable\">.CacheBreakdownTest</span> - æ‰§è¡Œå®Œæ¯•:  <span class=\"number\">662</span></span><br><span class=\"line\">[Thread-<span class=\"number\">3</span>] INFO  com<span class=\"variable\">.zaxxer</span><span class=\"variable\">.hikari</span><span class=\"variable\">.HikariDataSource</span> - HikariPool-<span class=\"number\">1</span> - Shutdown initiated...</span><br><span class=\"line\">[Thread-<span class=\"number\">3</span>] INFO  com<span class=\"variable\">.zaxxer</span><span class=\"variable\">.hikari</span><span class=\"variable\">.HikariDataSource</span> - HikariPool-<span class=\"number\">1</span> - Shutdown completed.</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>ä½¿ç”¨ç©ºå€¼ç¼“å­˜ï¼ŒåŒæ ·çš„è¯·æ±‚æ¡ä»¶keyåœ¨ç¬¬ä¸€æ¬¡è¢«ç¼“å­˜ç©¿é€åï¼Œå°±è¢«è¿‡æœŸç¼“å­˜äº†ï¼Œæ‰€ä»¥åœ¨è¿‡æœŸèŒƒå›´å†…å°±ä¼šå‘½ä¸­ç¼“å­˜ã€‚</p>\n</blockquote>\n<h3 id=\"ç¼“å­˜å‡»ç©¿\"><a href=\"#ç¼“å­˜å‡»ç©¿\" class=\"headerlink\" title=\"ç¼“å­˜å‡»ç©¿\"></a>ç¼“å­˜å‡»ç©¿</h3><blockquote>\n<p>è¿™ä¸ªåœºæ™¯æ›´å¤šæ˜¯åº”ç”¨åœ¨å¤šçº¿ç¨‹çš„ç¯å¢ƒï¼Œè¿™é‡Œè¡”æ¥ä¸Šé¢çš„ä»£ç ï¼Œå½“å¹¶å‘é‡ä¸Šæ¥çš„æ—¶å€™ï¼Œå¤§é‡çš„æŸ¥è¯¢é›†ä¸­æŸ¥è¯¢æŸä¸€ä¸ªkeyï¼Œè‹¥è¿™ä¸ªæ—¶å€™keyåˆšå¥½å¤±æ•ˆäº†ï¼Œå°±ä¼šå¯¼è‡´è¯·æ±‚å…¨éƒ¨è¿›å…¥æ•°æ®ä¸­ã€‚è¿™ä¸ªå°±æ˜¯æ‰€è°“çš„ç¼“å­˜å‡»ç©¿ã€‚</p>\n</blockquote>\n<p><img src=\"https://z201.oss-cn-shanghai.aliyuncs.com/JavaNote/%E7%BC%93%E5%AD%98%E5%87%BB%E7%A9%BF/%E6%9F%A5%E8%AF%A2%E7%BC%93%E5%AD%98-%E7%BC%93%E5%AD%98%E5%87%BB%E7%A9%BF.svg\"></p>\n<ul>\n<li>æ¼”ç¤ºä»£ç </li>\n</ul>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">testCacheBreakdownInfo</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">long</span> startTimes = System.currentTimeMillis();</span><br><span class=\"line\">    CountDownLatch countDownLatch = <span class=\"keyword\">new</span> CountDownLatch(<span class=\"number\">10</span>);</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>; i &lt; <span class=\"number\">10</span>; i++) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">new</span> Thread(() -&gt; &#123;</span><br><span class=\"line\">            personService.findById(<span class=\"number\">1L</span>);</span><br><span class=\"line\">            countDownLatch.countDown();</span><br><span class=\"line\">        &#125;).start();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">        countDownLatch.await();</span><br><span class=\"line\">    &#125; <span class=\"keyword\">catch</span> (InterruptedException e) &#123;</span><br><span class=\"line\">        e.printStackTrace();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">long</span> endTimes = System.currentTimeMillis();</span><br><span class=\"line\">    log.info(<span class=\"string\">\"æ‰§è¡Œå®Œæ¯•:  &#123;&#125;\"</span>, (endTimes - startTimes));</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>æ—¥å¿—è¾“å‡º</li>\n</ul>\n<figure class=\"highlight verilog\"><table><tr><td class=\"code\"><pre><span class=\"line\">[main] INFO  c<span class=\"variable\">.z201</span><span class=\"variable\">.cache</span><span class=\"variable\">.main</span><span class=\"variable\">.CacheBreakdownTest</span> - Started CacheBreakdownTest in <span class=\"number\">2</span><span class=\"variable\">.139</span> seconds (JVM running <span class=\"keyword\">for</span> <span class=\"number\">3</span><span class=\"variable\">.156</span>)</span><br><span class=\"line\">[Thread-<span class=\"number\">6</span>] INFO  io<span class=\"variable\">.lettuce</span><span class=\"variable\">.core</span><span class=\"variable\">.EpollProvider</span> - Starting without optional epoll <span class=\"keyword\">library</span></span><br><span class=\"line\">[Thread-<span class=\"number\">6</span>] INFO  io<span class=\"variable\">.lettuce</span><span class=\"variable\">.core</span><span class=\"variable\">.KqueueProvider</span> - Starting without optional kqueue <span class=\"keyword\">library</span></span><br><span class=\"line\">[Thread-<span class=\"number\">4</span>] INFO  c<span class=\"variable\">.z</span><span class=\"variable\">.c</span><span class=\"variable\">.service</span><span class=\"variable\">.impl</span><span class=\"variable\">.PersonServiceImpl</span> - get db </span><br><span class=\"line\">[Thread-<span class=\"number\">5</span>] INFO  c<span class=\"variable\">.z</span><span class=\"variable\">.c</span><span class=\"variable\">.service</span><span class=\"variable\">.impl</span><span class=\"variable\">.PersonServiceImpl</span> - get db </span><br><span class=\"line\">[Thread-<span class=\"number\">12</span>] INFO  c<span class=\"variable\">.z</span><span class=\"variable\">.c</span><span class=\"variable\">.service</span><span class=\"variable\">.impl</span><span class=\"variable\">.PersonServiceImpl</span> - get db </span><br><span class=\"line\">[Thread-<span class=\"number\">7</span>] INFO  c<span class=\"variable\">.z</span><span class=\"variable\">.c</span><span class=\"variable\">.service</span><span class=\"variable\">.impl</span><span class=\"variable\">.PersonServiceImpl</span> - get db </span><br><span class=\"line\">[Thread-<span class=\"number\">6</span>] INFO  c<span class=\"variable\">.z</span><span class=\"variable\">.c</span><span class=\"variable\">.service</span><span class=\"variable\">.impl</span><span class=\"variable\">.PersonServiceImpl</span> - get db </span><br><span class=\"line\">[Thread-<span class=\"number\">8</span>] INFO  c<span class=\"variable\">.z</span><span class=\"variable\">.c</span><span class=\"variable\">.service</span><span class=\"variable\">.impl</span><span class=\"variable\">.PersonServiceImpl</span> - get db </span><br><span class=\"line\">[Thread-<span class=\"number\">13</span>] INFO  c<span class=\"variable\">.z</span><span class=\"variable\">.c</span><span class=\"variable\">.service</span><span class=\"variable\">.impl</span><span class=\"variable\">.PersonServiceImpl</span> - get db </span><br><span class=\"line\">[Thread-<span class=\"number\">10</span>] INFO  c<span class=\"variable\">.z</span><span class=\"variable\">.c</span><span class=\"variable\">.service</span><span class=\"variable\">.impl</span><span class=\"variable\">.PersonServiceImpl</span> - get db </span><br><span class=\"line\">[Thread-<span class=\"number\">9</span>] INFO  c<span class=\"variable\">.z</span><span class=\"variable\">.c</span><span class=\"variable\">.service</span><span class=\"variable\">.impl</span><span class=\"variable\">.PersonServiceImpl</span> - get db </span><br><span class=\"line\">[Thread-<span class=\"number\">11</span>] INFO  c<span class=\"variable\">.z</span><span class=\"variable\">.c</span><span class=\"variable\">.service</span><span class=\"variable\">.impl</span><span class=\"variable\">.PersonServiceImpl</span> - get db </span><br><span class=\"line\">[Thread-<span class=\"number\">10</span>] INFO  com<span class=\"variable\">.zaxxer</span><span class=\"variable\">.hikari</span><span class=\"variable\">.HikariDataSource</span> - HikariPool-<span class=\"number\">1</span> - Starting...</span><br><span class=\"line\">[Thread-<span class=\"number\">10</span>] INFO  com<span class=\"variable\">.zaxxer</span><span class=\"variable\">.hikari</span><span class=\"variable\">.HikariDataSource</span> - HikariPool-<span class=\"number\">1</span> - Start completed.</span><br><span class=\"line\">[Thread-<span class=\"number\">7</span>] INFO  c<span class=\"variable\">.z</span><span class=\"variable\">.c</span><span class=\"variable\">.service</span><span class=\"variable\">.impl</span><span class=\"variable\">.PersonServiceImpl</span> - set cache </span><br><span class=\"line\">[Thread-<span class=\"number\">9</span>] INFO  c<span class=\"variable\">.z</span><span class=\"variable\">.c</span><span class=\"variable\">.service</span><span class=\"variable\">.impl</span><span class=\"variable\">.PersonServiceImpl</span> - set cache </span><br><span class=\"line\">[Thread-<span class=\"number\">12</span>] INFO  c<span class=\"variable\">.z</span><span class=\"variable\">.c</span><span class=\"variable\">.service</span><span class=\"variable\">.impl</span><span class=\"variable\">.PersonServiceImpl</span> - set cache </span><br><span class=\"line\">[Thread-<span class=\"number\">11</span>] INFO  c<span class=\"variable\">.z</span><span class=\"variable\">.c</span><span class=\"variable\">.service</span><span class=\"variable\">.impl</span><span class=\"variable\">.PersonServiceImpl</span> - set cache </span><br><span class=\"line\">[Thread-<span class=\"number\">6</span>] INFO  c<span class=\"variable\">.z</span><span class=\"variable\">.c</span><span class=\"variable\">.service</span><span class=\"variable\">.impl</span><span class=\"variable\">.PersonServiceImpl</span> - set cache </span><br><span class=\"line\">[Thread-<span class=\"number\">5</span>] INFO  c<span class=\"variable\">.z</span><span class=\"variable\">.c</span><span class=\"variable\">.service</span><span class=\"variable\">.impl</span><span class=\"variable\">.PersonServiceImpl</span> - set cache </span><br><span class=\"line\">[Thread-<span class=\"number\">8</span>] INFO  c<span class=\"variable\">.z</span><span class=\"variable\">.c</span><span class=\"variable\">.service</span><span class=\"variable\">.impl</span><span class=\"variable\">.PersonServiceImpl</span> - set cache </span><br><span class=\"line\">[Thread-<span class=\"number\">13</span>] INFO  c<span class=\"variable\">.z</span><span class=\"variable\">.c</span><span class=\"variable\">.service</span><span class=\"variable\">.impl</span><span class=\"variable\">.PersonServiceImpl</span> - set cache </span><br><span class=\"line\">[Thread-<span class=\"number\">10</span>] INFO  c<span class=\"variable\">.z</span><span class=\"variable\">.c</span><span class=\"variable\">.service</span><span class=\"variable\">.impl</span><span class=\"variable\">.PersonServiceImpl</span> - set cache </span><br><span class=\"line\">[Thread-<span class=\"number\">4</span>] INFO  c<span class=\"variable\">.z</span><span class=\"variable\">.c</span><span class=\"variable\">.service</span><span class=\"variable\">.impl</span><span class=\"variable\">.PersonServiceImpl</span> - set cache </span><br><span class=\"line\">[main] INFO  c<span class=\"variable\">.z201</span><span class=\"variable\">.cache</span><span class=\"variable\">.main</span><span class=\"variable\">.CacheBreakdownTest</span> - æ‰§è¡Œå®Œæ¯•:  <span class=\"number\">738</span></span><br><span class=\"line\">[Thread-<span class=\"number\">3</span>] INFO  com<span class=\"variable\">.zaxxer</span><span class=\"variable\">.hikari</span><span class=\"variable\">.HikariDataSource</span> - HikariPool-<span class=\"number\">1</span> - Shutdown initiated...</span><br><span class=\"line\">[Thread-<span class=\"number\">3</span>] INFO  com<span class=\"variable\">.zaxxer</span><span class=\"variable\">.hikari</span><span class=\"variable\">.HikariDataSource</span> - HikariPool-<span class=\"number\">1</span> - Shutdown completed.</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>å¹¶å‘èµ·æ¥ï¼Œæ›´æ–°æ“ä½œæ‰€æœ‰çš„è¯·æ±‚éƒ½è¿›å…¥ã€‚</p>\n</blockquote>\n<h4 id=\"å¸¸ç”¨è§£å†³æ€è·¯-1\"><a href=\"#å¸¸ç”¨è§£å†³æ€è·¯-1\" class=\"headerlink\" title=\"å¸¸ç”¨è§£å†³æ€è·¯\"></a>å¸¸ç”¨è§£å†³æ€è·¯</h4><blockquote>\n<p>è¿™é‡Œæ³¨æ„åˆ—ä¸¾å¸¸ç”¨æ–¹æ¡ˆï¼Œæ ¹æ®å®é™…æƒ…å†µä½¿ç”¨</p>\n</blockquote>\n<h4 id=\"Redis-SETNXæ–¹æ¡ˆ\"><a href=\"#Redis-SETNXæ–¹æ¡ˆ\" class=\"headerlink\" title=\"Redis SETNXæ–¹æ¡ˆ\"></a>Redis SETNXæ–¹æ¡ˆ</h4><ul>\n<li>åœ¨è®¿é—®keyä¹‹å‰ï¼Œé‡‡ç”¨SETNXï¼ˆset if not existsï¼‰æ¥è®¾ç½®å¦ä¸€ä¸ªçŸ­æœŸkeyæ¥é”ä½å½“å‰keyçš„è®¿é—®ï¼Œè®¿é—®ç»“æŸå†åˆ é™¤è¯¥çŸ­æœŸkeyã€‚</li>\n</ul>\n<h4 id=\"ä»£ç å®ç°-1\"><a href=\"#ä»£ç å®ç°-1\" class=\"headerlink\" title=\"ä»£ç å®ç°\"></a>ä»£ç å®ç°</h4><figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> Person <span class=\"title\">findById</span><span class=\"params\">(Long id)</span> </span>&#123;</span><br><span class=\"line\">        Gson gson = <span class=\"keyword\">new</span> GsonBuilder().create();</span><br><span class=\"line\">        String key = INFO + id;</span><br><span class=\"line\">        String data = cacheBreakdownService.getString(key);</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (data == <span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">            <span class=\"comment\">// è®¾ç½® setNx</span></span><br><span class=\"line\">            <span class=\"keyword\">final</span> String nxKey = NX + id;</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (cacheBreakdownService.setNx(nxKey)) &#123;</span><br><span class=\"line\">                <span class=\"comment\">// æŒ‡å®šè¿‡æœŸæ—¶é—´ 1 ç§’</span></span><br><span class=\"line\">                cacheBreakdownService.expireKey(nxKey, <span class=\"number\">1L</span>);</span><br><span class=\"line\">                log.info(<span class=\"string\">\"get db \"</span>);</span><br><span class=\"line\">                Person person = personDao.findById(id);</span><br><span class=\"line\">                <span class=\"keyword\">if</span> (person != <span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">                    data = gson.toJson(person);</span><br><span class=\"line\">                    <span class=\"keyword\">if</span> (cacheBreakdownService.setString(key, data)) &#123;</span><br><span class=\"line\">                        log.info(<span class=\"string\">\"set cache \"</span>);</span><br><span class=\"line\">                        cacheBreakdownService.del(nxKey);</span><br><span class=\"line\">                        <span class=\"keyword\">return</span> person;</span><br><span class=\"line\">                    &#125;</span><br><span class=\"line\">                &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">                    <span class=\"comment\">// æ’å…¥ä¸€ä¸ªç©ºæ ¼è¿›å»</span></span><br><span class=\"line\">                    <span class=\"keyword\">if</span> (cacheBreakdownService.setString(key, <span class=\"string\">\" \"</span>)) &#123;</span><br><span class=\"line\">                        log.info(<span class=\"string\">\"set cache value null\"</span>);</span><br><span class=\"line\">                    &#125;</span><br><span class=\"line\">                    <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> Person();</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (data == <span class=\"keyword\">null</span> || data.isEmpty() || data.trim().length() == <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">            log.info(<span class=\"string\">\"get null\"</span>);</span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> Person();</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        log.info(<span class=\"string\">\"get cache\"</span>);</span><br><span class=\"line\">        Person person = gson.fromJson(data, Person<span class=\"class\">.<span class=\"keyword\">class</span>)</span>;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> person;</span><br><span class=\"line\">    &#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>å†æ¬¡è¿è¡Œæµ‹è¯•ä»£ç </li>\n</ul>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">testCacheBreakdownInfo</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">long</span> startTimes = System.currentTimeMillis();</span><br><span class=\"line\">        CountDownLatch countDownLatch = <span class=\"keyword\">new</span> CountDownLatch(<span class=\"number\">5</span>);</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>; i &lt; <span class=\"number\">5</span>; i++) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">new</span> Thread(() -&gt; &#123;</span><br><span class=\"line\">                log.info(<span class=\"string\">\" fullName &#123;&#125; \"</span> , personService.findById(<span class=\"number\">2L</span>).getFullName());;</span><br><span class=\"line\">                countDownLatch.countDown();</span><br><span class=\"line\">            &#125;).start();</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">            countDownLatch.await();</span><br><span class=\"line\">        &#125; <span class=\"keyword\">catch</span> (InterruptedException e) &#123;</span><br><span class=\"line\">            e.printStackTrace();</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        CountDownLatch countDownLatch2 = <span class=\"keyword\">new</span> CountDownLatch(<span class=\"number\">5</span>);</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>; i &lt; <span class=\"number\">5</span>; i++) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">new</span> Thread(() -&gt; &#123;</span><br><span class=\"line\">                log.info(<span class=\"string\">\" fullName &#123;&#125; \"</span> , personService.findById(<span class=\"number\">3L</span>).getFullName());;</span><br><span class=\"line\">                countDownLatch2.countDown();</span><br><span class=\"line\">            &#125;).start();</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">            countDownLatch2.await();</span><br><span class=\"line\">        &#125; <span class=\"keyword\">catch</span> (InterruptedException e) &#123;</span><br><span class=\"line\">            e.printStackTrace();</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">long</span> endTimes = System.currentTimeMillis();</span><br><span class=\"line\">        log.info(<span class=\"string\">\"æ‰§è¡Œå®Œæ¯•:  &#123;&#125;\"</span>, (endTimes - startTimes));</span><br><span class=\"line\">    &#125;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>è¿™é‡Œä¸ºäº†é¿å…è¿‡äºé›†ä¸­ï¼Œæ‰€ä»¥åˆ†æˆä¸¤ç»„çº¿ç¨‹ï¼Œç¬¬ä¸€ç»„å½“ä¸­ä»»æ„çº¿ç¨‹æˆåŠŸå°†ç¼“å­˜æ›´æ–°ï¼Œç¬¬äºŒç»„çº¿ç¨‹å°±èƒ½è·å–åˆ°æ–°çš„ç¼“å­˜ã€‚</p>\n</blockquote>\n<ul>\n<li>æ—¥å¿—è¾“å‡º</li>\n</ul>\n<figure class=\"highlight verilog\"><table><tr><td class=\"code\"><pre><span class=\"line\">[main] INFO  c<span class=\"variable\">.z201</span><span class=\"variable\">.cache</span><span class=\"variable\">.main</span><span class=\"variable\">.CacheBreakdownTest</span> - Started CacheBreakdownTest in <span class=\"number\">2</span><span class=\"variable\">.029</span> seconds (JVM running <span class=\"keyword\">for</span> <span class=\"number\">3</span><span class=\"variable\">.134</span>)</span><br><span class=\"line\">[Thread-<span class=\"number\">7</span>] INFO  io<span class=\"variable\">.lettuce</span><span class=\"variable\">.core</span><span class=\"variable\">.EpollProvider</span> - Starting without optional epoll <span class=\"keyword\">library</span></span><br><span class=\"line\">[Thread-<span class=\"number\">7</span>] INFO  io<span class=\"variable\">.lettuce</span><span class=\"variable\">.core</span><span class=\"variable\">.KqueueProvider</span> - Starting without optional kqueue <span class=\"keyword\">library</span></span><br><span class=\"line\">[Thread-<span class=\"number\">8</span>] INFO  c<span class=\"variable\">.z</span><span class=\"variable\">.c</span><span class=\"variable\">.service</span><span class=\"variable\">.impl</span><span class=\"variable\">.PersonServiceImpl</span> - get <span class=\"literal\">null</span></span><br><span class=\"line\">[Thread-<span class=\"number\">6</span>] INFO  c<span class=\"variable\">.z</span><span class=\"variable\">.c</span><span class=\"variable\">.service</span><span class=\"variable\">.impl</span><span class=\"variable\">.PersonServiceImpl</span> - get <span class=\"literal\">null</span></span><br><span class=\"line\">[Thread-<span class=\"number\">4</span>] INFO  c<span class=\"variable\">.z</span><span class=\"variable\">.c</span><span class=\"variable\">.service</span><span class=\"variable\">.impl</span><span class=\"variable\">.PersonServiceImpl</span> - get <span class=\"literal\">null</span></span><br><span class=\"line\">[Thread-<span class=\"number\">8</span>] INFO  c<span class=\"variable\">.z201</span><span class=\"variable\">.cache</span><span class=\"variable\">.main</span><span class=\"variable\">.CacheBreakdownTest</span> -  fullName <span class=\"literal\">null</span> </span><br><span class=\"line\">[Thread-<span class=\"number\">4</span>] INFO  c<span class=\"variable\">.z201</span><span class=\"variable\">.cache</span><span class=\"variable\">.main</span><span class=\"variable\">.CacheBreakdownTest</span> -  fullName <span class=\"literal\">null</span> </span><br><span class=\"line\">[Thread-<span class=\"number\">6</span>] INFO  c<span class=\"variable\">.z201</span><span class=\"variable\">.cache</span><span class=\"variable\">.main</span><span class=\"variable\">.CacheBreakdownTest</span> -  fullName <span class=\"literal\">null</span> </span><br><span class=\"line\">[Thread-<span class=\"number\">5</span>] INFO  c<span class=\"variable\">.z</span><span class=\"variable\">.c</span><span class=\"variable\">.service</span><span class=\"variable\">.impl</span><span class=\"variable\">.PersonServiceImpl</span> - get <span class=\"literal\">null</span></span><br><span class=\"line\">[Thread-<span class=\"number\">5</span>] INFO  c<span class=\"variable\">.z201</span><span class=\"variable\">.cache</span><span class=\"variable\">.main</span><span class=\"variable\">.CacheBreakdownTest</span> -  fullName <span class=\"literal\">null</span> </span><br><span class=\"line\">[Thread-<span class=\"number\">7</span>] INFO  c<span class=\"variable\">.z</span><span class=\"variable\">.c</span><span class=\"variable\">.service</span><span class=\"variable\">.impl</span><span class=\"variable\">.PersonServiceImpl</span> - get db </span><br><span class=\"line\">[Thread-<span class=\"number\">7</span>] INFO  com<span class=\"variable\">.zaxxer</span><span class=\"variable\">.hikari</span><span class=\"variable\">.HikariDataSource</span> - HikariPool-<span class=\"number\">1</span> - Starting...</span><br><span class=\"line\">[Thread-<span class=\"number\">7</span>] INFO  com<span class=\"variable\">.zaxxer</span><span class=\"variable\">.hikari</span><span class=\"variable\">.HikariDataSource</span> - HikariPool-<span class=\"number\">1</span> - Start completed.</span><br><span class=\"line\">[Thread-<span class=\"number\">7</span>] INFO  c<span class=\"variable\">.z</span><span class=\"variable\">.c</span><span class=\"variable\">.service</span><span class=\"variable\">.impl</span><span class=\"variable\">.PersonServiceImpl</span> - set cache </span><br><span class=\"line\">[Thread-<span class=\"number\">7</span>] INFO  c<span class=\"variable\">.z201</span><span class=\"variable\">.cache</span><span class=\"variable\">.main</span><span class=\"variable\">.CacheBreakdownTest</span> -  fullName ç¢§çªåˆ˜ </span><br><span class=\"line\">[Thread-<span class=\"number\">10</span>] INFO  c<span class=\"variable\">.z</span><span class=\"variable\">.c</span><span class=\"variable\">.service</span><span class=\"variable\">.impl</span><span class=\"variable\">.PersonServiceImpl</span> - get cache</span><br><span class=\"line\">[Thread-<span class=\"number\">9</span>] INFO  c<span class=\"variable\">.z</span><span class=\"variable\">.c</span><span class=\"variable\">.service</span><span class=\"variable\">.impl</span><span class=\"variable\">.PersonServiceImpl</span> - get cache</span><br><span class=\"line\">[Thread-<span class=\"number\">11</span>] INFO  c<span class=\"variable\">.z</span><span class=\"variable\">.c</span><span class=\"variable\">.service</span><span class=\"variable\">.impl</span><span class=\"variable\">.PersonServiceImpl</span> - get cache</span><br><span class=\"line\">[Thread-<span class=\"number\">12</span>] INFO  c<span class=\"variable\">.z</span><span class=\"variable\">.c</span><span class=\"variable\">.service</span><span class=\"variable\">.impl</span><span class=\"variable\">.PersonServiceImpl</span> - get cache</span><br><span class=\"line\">[Thread-<span class=\"number\">13</span>] INFO  c<span class=\"variable\">.z</span><span class=\"variable\">.c</span><span class=\"variable\">.service</span><span class=\"variable\">.impl</span><span class=\"variable\">.PersonServiceImpl</span> - get cache</span><br><span class=\"line\">[Thread-<span class=\"number\">10</span>] INFO  c<span class=\"variable\">.z201</span><span class=\"variable\">.cache</span><span class=\"variable\">.main</span><span class=\"variable\">.CacheBreakdownTest</span> -  fullName ç¢§çªåˆ˜ </span><br><span class=\"line\">[Thread-<span class=\"number\">11</span>] INFO  c<span class=\"variable\">.z201</span><span class=\"variable\">.cache</span><span class=\"variable\">.main</span><span class=\"variable\">.CacheBreakdownTest</span> -  fullName ç¢§çªåˆ˜ </span><br><span class=\"line\">[Thread-<span class=\"number\">12</span>] INFO  c<span class=\"variable\">.z201</span><span class=\"variable\">.cache</span><span class=\"variable\">.main</span><span class=\"variable\">.CacheBreakdownTest</span> -  fullName ç¢§çªåˆ˜ </span><br><span class=\"line\">[Thread-<span class=\"number\">9</span>] INFO  c<span class=\"variable\">.z201</span><span class=\"variable\">.cache</span><span class=\"variable\">.main</span><span class=\"variable\">.CacheBreakdownTest</span> -  fullName ç¢§çªåˆ˜ </span><br><span class=\"line\">[Thread-<span class=\"number\">13</span>] INFO  c<span class=\"variable\">.z201</span><span class=\"variable\">.cache</span><span class=\"variable\">.main</span><span class=\"variable\">.CacheBreakdownTest</span> -  fullName ç¢§çªåˆ˜ </span><br><span class=\"line\">[main] INFO  c<span class=\"variable\">.z201</span><span class=\"variable\">.cache</span><span class=\"variable\">.main</span><span class=\"variable\">.CacheBreakdownTest</span> - æ‰§è¡Œå®Œæ¯•:  <span class=\"number\">697</span></span><br><span class=\"line\">[Thread-<span class=\"number\">3</span>] INFO  com<span class=\"variable\">.zaxxer</span><span class=\"variable\">.hikari</span><span class=\"variable\">.HikariDataSource</span> - HikariPool-<span class=\"number\">1</span> - Shutdown initiated...</span><br><span class=\"line\">[Thread-<span class=\"number\">3</span>] INFO  com<span class=\"variable\">.zaxxer</span><span class=\"variable\">.hikari</span><span class=\"variable\">.HikariDataSource</span> - HikariPool-<span class=\"number\">1</span> - Shutdown completed.</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>ç¬¬ä¸€ç»„çº¿ç¨‹ä¸­ä»»æ„ä¸€ä¸ªæˆåŠŸæ›´æ–°çš„ç¼“å­˜ï¼Œç¬¬äºŒç»„å°±å¯ä»¥ç›´æ¥èµ°ç¼“å­˜ã€‚</p>\n</blockquote>\n<h4 id=\"åˆ†å¸ƒå¼é”æ”¹è¿›\"><a href=\"#åˆ†å¸ƒå¼é”æ”¹è¿›\" class=\"headerlink\" title=\"åˆ†å¸ƒå¼é”æ”¹è¿›\"></a>åˆ†å¸ƒå¼é”æ”¹è¿›</h4><ul>\n<li><p>ä¸Šé¢çš„<code>setnx </code>å’Œ <code>pExpire</code>æ˜¯åˆ†å¼€çš„ï¼Œè¿™é‡Œå…¶å®ä¼šå‡ºç°ä¸€ä¸ªé—®é¢˜å°±æ˜¯å½“<code>setnx</code>è®¾ç½®æˆåŠŸä½†æ˜¯<code>pExpire</code>æ‰§è¡Œçš„æ—¶å€™çªç„¶ç¨‹åºä¸­æ–­äº†æ€ä¹ˆåŠã€‚è¿™æ ·å°±ç¼–ç¨‹äº†æ­»é”ã€‚å› æ­¤æ‰æœ‰äº†æ”¹è¿›çš„æ–¹æ¡ˆä½¿ç”¨set çš„æ‰©å¼ æ¥åŒæ—¶å®ç° nx exã€‚</p>\n</li>\n<li><p>æ·»åŠ æ¥å£</p>\n</li>\n</ul>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">   * setæ‰©å±•æ–¹å¼</span></span><br><span class=\"line\"><span class=\"comment\">   * <span class=\"doctag\">@param</span> key</span></span><br><span class=\"line\"><span class=\"comment\">   * <span class=\"doctag\">@param</span> value</span></span><br><span class=\"line\"><span class=\"comment\">   * <span class=\"doctag\">@param</span> timeout</span></span><br><span class=\"line\"><span class=\"comment\">   * <span class=\"doctag\">@param</span> option</span></span><br><span class=\"line\"><span class=\"comment\">   * <span class=\"doctag\">@return</span></span></span><br><span class=\"line\"><span class=\"comment\">   */</span></span><br><span class=\"line\">  <span class=\"function\">Boolean <span class=\"title\">set</span><span class=\"params\">(String key, String value, Long timeout, RedisStringCommands.SetOption option)</span></span>;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>æ¥å£å®ç°</li>\n</ul>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> Boolean <span class=\"title\">set</span><span class=\"params\">(String key, String value,Long timeout, RedisStringCommands.SetOption option)</span> </span>&#123;</span><br><span class=\"line\">        notNull(key);</span><br><span class=\"line\">        notNull(value);</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (<span class=\"keyword\">null</span> == timeout || timeout &lt;= <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">            timeout = CACHE_OUT_TIME;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">final</span> Expiration expiration = Expiration.from(timeout, TimeUnit.SECONDS);</span><br><span class=\"line\">        <span class=\"keyword\">return</span> (Boolean) redisTemplate.execute((RedisCallback&lt;Boolean&gt;) connection -&gt; &#123;</span><br><span class=\"line\">            RedisSerializer&lt;String&gt; stringRedisSerializer = redisTemplate.getStringSerializer();</span><br><span class=\"line\">            <span class=\"keyword\">return</span> connection.set(</span><br><span class=\"line\">                    stringRedisSerializer.serialize(CACHE_NAME + key),</span><br><span class=\"line\">                    stringRedisSerializer.serialize(value),</span><br><span class=\"line\">                    expiration,</span><br><span class=\"line\">                    option);</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">    &#125;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>è¿™é‡Œå°±ä¸æ¼”ç¤ºä»£ç æµ‹è¯•æ•ˆæœäº†ã€‚</p>\n</blockquote>\n<h4 id=\"Java-é”æ–¹æ¡ˆ\"><a href=\"#Java-é”æ–¹æ¡ˆ\" class=\"headerlink\" title=\"Java é”æ–¹æ¡ˆ\"></a>Java é”æ–¹æ¡ˆ</h4><blockquote>\n<p>å¦‚æœå°±å•çº¯çš„ä½¿ç”¨ä¸€æŠŠé”èƒ½å¦è§£å†³é—®é¢˜å‘¢ã€‚</p>\n</blockquote>\n<h4 id=\"ä»£ç å®ç°-2\"><a href=\"#ä»£ç å®ç°-2\" class=\"headerlink\" title=\"ä»£ç å®ç°\"></a>ä»£ç å®ç°</h4><ul>\n<li>æ¥å£</li>\n</ul>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">    * æ ¹æ®é™åˆ¶æŸ¥è¯¢</span></span><br><span class=\"line\"><span class=\"comment\">    * <span class=\"doctag\">@param</span> offset åç§»é‡</span></span><br><span class=\"line\"><span class=\"comment\">    * <span class=\"doctag\">@param</span> length è·å–æ•°é‡</span></span><br><span class=\"line\"><span class=\"comment\">    * <span class=\"doctag\">@return</span></span></span><br><span class=\"line\"><span class=\"comment\">    */</span></span><br><span class=\"line\">   <span class=\"function\">List&lt;Person&gt; <span class=\"title\">listByLimit</span><span class=\"params\">(Integer offset , Integer length)</span></span>;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>å®ç°ç±»</li>\n</ul>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Override</span></span><br><span class=\"line\">   <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">synchronized</span> List&lt;Person&gt; <span class=\"title\">listByLimit</span><span class=\"params\">(Integer offset, Integer length)</span> </span>&#123;</span><br><span class=\"line\">       <span class=\"keyword\">if</span> (<span class=\"keyword\">null</span> == offset || offset &lt; <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">           offset = <span class=\"number\">0</span>;</span><br><span class=\"line\">       &#125;</span><br><span class=\"line\">       <span class=\"keyword\">if</span> (<span class=\"keyword\">null</span> == length || length &lt;= <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">           length = <span class=\"number\">10</span>;</span><br><span class=\"line\">       &#125;</span><br><span class=\"line\">       Gson gson = <span class=\"keyword\">new</span> GsonBuilder().create();</span><br><span class=\"line\">       String data = cacheBreakdownService.getString(LIST);</span><br><span class=\"line\">       <span class=\"keyword\">if</span> (data == <span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">               log.info(<span class=\"string\">\"get db\"</span>);</span><br><span class=\"line\">               List&lt;Person&gt; list = personDao.listByLimit(offset, length);</span><br><span class=\"line\">               <span class=\"keyword\">if</span> (list != <span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">                   data = gson.toJson(list);</span><br><span class=\"line\">                   <span class=\"keyword\">if</span> (cacheBreakdownService.setString(LIST, data)) &#123;</span><br><span class=\"line\">                       log.info(<span class=\"string\">\"set cache \"</span>);</span><br><span class=\"line\">                   &#125;</span><br><span class=\"line\">                   <span class=\"keyword\">return</span> list;</span><br><span class=\"line\">               &#125;<span class=\"keyword\">else</span>&#123;</span><br><span class=\"line\">                   <span class=\"comment\">// æ’å…¥ä¸€ä¸ªç©ºæ ¼è¿›å»</span></span><br><span class=\"line\">                   <span class=\"keyword\">if</span> (cacheBreakdownService.setString(LIST, <span class=\"string\">\" \"</span>)) &#123;</span><br><span class=\"line\">                       log.info(<span class=\"string\">\"set cache value null\"</span>);</span><br><span class=\"line\">                   &#125;</span><br><span class=\"line\">                   <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> ArrayList&lt;Person&gt;();</span><br><span class=\"line\">               &#125;</span><br><span class=\"line\">       &#125;</span><br><span class=\"line\">       <span class=\"keyword\">if</span> (data == <span class=\"keyword\">null</span> || data.isEmpty() || data.trim().length() == <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">           log.info(<span class=\"string\">\"get null\"</span>);</span><br><span class=\"line\">           <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> ArrayList&lt;Person&gt;();</span><br><span class=\"line\">       &#125;</span><br><span class=\"line\">       Type type = <span class=\"keyword\">new</span> TypeToken&lt;List&lt;Person&gt;&gt;() &#123;</span><br><span class=\"line\">       &#125;.getType();</span><br><span class=\"line\">       log.info(<span class=\"string\">\"get cache\"</span>);</span><br><span class=\"line\">       <span class=\"keyword\">final</span> List&lt;Person&gt; people = gson.fromJson(data, type);</span><br><span class=\"line\">       <span class=\"keyword\">return</span> people;</span><br><span class=\"line\">   &#125;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>è¿™é‡Œå…ˆç”¨é‡é‡çº§é”ï¼Œé€æ­¥æ”¹é€ ã€‚</p>\n</blockquote>\n<ul>\n<li>æµ‹è¯•æ–¹æ³•</li>\n</ul>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">testCacheBreakdownList</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">long</span> startTimes = System.currentTimeMillis();</span><br><span class=\"line\">        CountDownLatch countDownLatch = <span class=\"keyword\">new</span> CountDownLatch(<span class=\"number\">10</span>);</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>; i &lt; <span class=\"number\">10</span>; i++) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">new</span> Thread(() -&gt; &#123;</span><br><span class=\"line\">                personService.listByLimit(<span class=\"number\">0</span>, <span class=\"number\">10</span>);</span><br><span class=\"line\">                countDownLatch.countDown();</span><br><span class=\"line\">            &#125;).start();</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">            countDownLatch.await();</span><br><span class=\"line\">        &#125; <span class=\"keyword\">catch</span> (InterruptedException e) &#123;</span><br><span class=\"line\">            e.printStackTrace();</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">long</span> endTimes = System.currentTimeMillis();</span><br><span class=\"line\">        log.info(<span class=\"string\">\"æ‰€æœ‰çº¿ç¨‹æ‰§è¡Œå®Œæ¯•: &#123;&#125;\"</span>, (endTimes - startTimes));</span><br><span class=\"line\">    &#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>æ—¥å¿—è¾“å‡º</li>\n</ul>\n<figure class=\"highlight verilog\"><table><tr><td class=\"code\"><pre><span class=\"line\">[main] INFO  c<span class=\"variable\">.z201</span><span class=\"variable\">.cache</span><span class=\"variable\">.main</span><span class=\"variable\">.CacheBreakdownTest</span> - Started CacheBreakdownTest in <span class=\"number\">2</span><span class=\"variable\">.21</span> seconds (JVM running <span class=\"keyword\">for</span> <span class=\"number\">3</span><span class=\"variable\">.311</span>)</span><br><span class=\"line\">[Thread-<span class=\"number\">4</span>] INFO  io<span class=\"variable\">.lettuce</span><span class=\"variable\">.core</span><span class=\"variable\">.EpollProvider</span> - Starting without optional epoll <span class=\"keyword\">library</span></span><br><span class=\"line\">[Thread-<span class=\"number\">4</span>] INFO  io<span class=\"variable\">.lettuce</span><span class=\"variable\">.core</span><span class=\"variable\">.KqueueProvider</span> - Starting without optional kqueue <span class=\"keyword\">library</span></span><br><span class=\"line\">[Thread-<span class=\"number\">4</span>] INFO  c<span class=\"variable\">.z</span><span class=\"variable\">.c</span><span class=\"variable\">.service</span><span class=\"variable\">.impl</span><span class=\"variable\">.PersonServiceImpl</span> - get db</span><br><span class=\"line\">[Thread-<span class=\"number\">4</span>] INFO  com<span class=\"variable\">.zaxxer</span><span class=\"variable\">.hikari</span><span class=\"variable\">.HikariDataSource</span> - HikariPool-<span class=\"number\">1</span> - Starting...</span><br><span class=\"line\">[Thread-<span class=\"number\">4</span>] INFO  com<span class=\"variable\">.zaxxer</span><span class=\"variable\">.hikari</span><span class=\"variable\">.HikariDataSource</span> - HikariPool-<span class=\"number\">1</span> - Start completed.</span><br><span class=\"line\">[Thread-<span class=\"number\">4</span>] INFO  c<span class=\"variable\">.z</span><span class=\"variable\">.c</span><span class=\"variable\">.service</span><span class=\"variable\">.impl</span><span class=\"variable\">.PersonServiceImpl</span> - set cache </span><br><span class=\"line\">[Thread-<span class=\"number\">13</span>] INFO  c<span class=\"variable\">.z</span><span class=\"variable\">.c</span><span class=\"variable\">.service</span><span class=\"variable\">.impl</span><span class=\"variable\">.PersonServiceImpl</span> - get cache</span><br><span class=\"line\">[Thread-<span class=\"number\">12</span>] INFO  c<span class=\"variable\">.z</span><span class=\"variable\">.c</span><span class=\"variable\">.service</span><span class=\"variable\">.impl</span><span class=\"variable\">.PersonServiceImpl</span> - get cache</span><br><span class=\"line\">[Thread-<span class=\"number\">11</span>] INFO  c<span class=\"variable\">.z</span><span class=\"variable\">.c</span><span class=\"variable\">.service</span><span class=\"variable\">.impl</span><span class=\"variable\">.PersonServiceImpl</span> - get cache</span><br><span class=\"line\">[Thread-<span class=\"number\">10</span>] INFO  c<span class=\"variable\">.z</span><span class=\"variable\">.c</span><span class=\"variable\">.service</span><span class=\"variable\">.impl</span><span class=\"variable\">.PersonServiceImpl</span> - get cache</span><br><span class=\"line\">[Thread-<span class=\"number\">9</span>] INFO  c<span class=\"variable\">.z</span><span class=\"variable\">.c</span><span class=\"variable\">.service</span><span class=\"variable\">.impl</span><span class=\"variable\">.PersonServiceImpl</span> - get cache</span><br><span class=\"line\">[Thread-<span class=\"number\">8</span>] INFO  c<span class=\"variable\">.z</span><span class=\"variable\">.c</span><span class=\"variable\">.service</span><span class=\"variable\">.impl</span><span class=\"variable\">.PersonServiceImpl</span> - get cache</span><br><span class=\"line\">[Thread-<span class=\"number\">7</span>] INFO  c<span class=\"variable\">.z</span><span class=\"variable\">.c</span><span class=\"variable\">.service</span><span class=\"variable\">.impl</span><span class=\"variable\">.PersonServiceImpl</span> - get cache</span><br><span class=\"line\">[Thread-<span class=\"number\">6</span>] INFO  c<span class=\"variable\">.z</span><span class=\"variable\">.c</span><span class=\"variable\">.service</span><span class=\"variable\">.impl</span><span class=\"variable\">.PersonServiceImpl</span> - get cache</span><br><span class=\"line\">[Thread-<span class=\"number\">5</span>] INFO  c<span class=\"variable\">.z</span><span class=\"variable\">.c</span><span class=\"variable\">.service</span><span class=\"variable\">.impl</span><span class=\"variable\">.PersonServiceImpl</span> - get cache</span><br><span class=\"line\">[main] INFO  c<span class=\"variable\">.z201</span><span class=\"variable\">.cache</span><span class=\"variable\">.main</span><span class=\"variable\">.CacheBreakdownTest</span> - æ‰€æœ‰çº¿ç¨‹æ‰§è¡Œå®Œæ¯•: <span class=\"number\">715</span></span><br><span class=\"line\">[Thread-<span class=\"number\">3</span>] INFO  com<span class=\"variable\">.zaxxer</span><span class=\"variable\">.hikari</span><span class=\"variable\">.HikariDataSource</span> - HikariPool-<span class=\"number\">1</span> - Shutdown initiated...</span><br><span class=\"line\">[Thread-<span class=\"number\">3</span>] INFO  com<span class=\"variable\">.zaxxer</span><span class=\"variable\">.hikari</span><span class=\"variable\">.HikariDataSource</span> - HikariPool-<span class=\"number\">1</span> - Shutdown completed.</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p> Okï¼Œçœ‹æ—¥å¿—ç¡®å®é”äº†è€Œä¸”æ˜¯æ‚²è§‚é”ï¼Œä½†æ˜¯è¿™é‡Œæœ‰å¦å¤–ä¸€ä¸ªé—®é¢˜ï¼Œå¦‚æœæ›´æ–°æ“ä½œè¶…æ—¶å…¶å®ƒçš„çº¿ç¨‹å°±ä¼šä¸€ç›´ç­‰å¾…ã€‚è¿™ä¸æ˜¯æˆ‘æƒ³è¦çš„ç»“æœã€‚</p>\n</blockquote>\n<ul>\n<li>æ”¹è¿›ä»£ç </li>\n</ul>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">volatile</span> ReentrantLock lock = <span class=\"keyword\">new</span> ReentrantLock();</span><br><span class=\"line\"><span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> List&lt;Person&gt; <span class=\"title\">listByLimit</span><span class=\"params\">(Integer offset, Integer length)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (<span class=\"keyword\">null</span> == offset || offset &lt; <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">            offset = <span class=\"number\">0</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (<span class=\"keyword\">null</span> == length || length &lt;= <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">            length = <span class=\"number\">10</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        Gson gson = <span class=\"keyword\">new</span> GsonBuilder().create();</span><br><span class=\"line\">        String data = cacheBreakdownService.getString(LIST);</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (data == <span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">                lock.lockInterruptibly();</span><br><span class=\"line\">                data = cacheBreakdownService.getString(LIST);</span><br><span class=\"line\">                <span class=\"keyword\">if</span> (data == <span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">                    log.info(<span class=\"string\">\"get db\"</span>);</span><br><span class=\"line\">                    List&lt;Person&gt; list = personDao.listByLimit(offset, length);</span><br><span class=\"line\">                    <span class=\"keyword\">if</span> (list != <span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">                        data = gson.toJson(list);</span><br><span class=\"line\">                        <span class=\"keyword\">if</span> (cacheBreakdownService.setString(LIST, data)) &#123;</span><br><span class=\"line\">                            log.info(<span class=\"string\">\"set cache \"</span>);</span><br><span class=\"line\">                        &#125;</span><br><span class=\"line\">                        <span class=\"keyword\">return</span> list;</span><br><span class=\"line\">                    &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">                        <span class=\"comment\">// æ’å…¥ä¸€ä¸ªç©ºæ ¼è¿›å»</span></span><br><span class=\"line\">                        <span class=\"keyword\">if</span> (cacheBreakdownService.setString(LIST, <span class=\"string\">\" \"</span>)) &#123;</span><br><span class=\"line\">                            log.info(<span class=\"string\">\"set cache value null\"</span>);</span><br><span class=\"line\">                        &#125;</span><br><span class=\"line\">                        <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> ArrayList&lt;Person&gt;();</span><br><span class=\"line\">                    &#125;</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125; <span class=\"keyword\">catch</span> (InterruptedException e) &#123;</span><br><span class=\"line\">                e.printStackTrace();</span><br><span class=\"line\">            &#125; <span class=\"keyword\">finally</span> &#123;</span><br><span class=\"line\">                lock.unlock();</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (data == <span class=\"keyword\">null</span> || data.isEmpty() || data.trim().length() == <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">            log.info(<span class=\"string\">\"get null\"</span>);</span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> ArrayList&lt;Person&gt;();</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        Type type = <span class=\"keyword\">new</span> TypeToken&lt;List&lt;Person&gt;&gt;() &#123;</span><br><span class=\"line\">        &#125;.getType();</span><br><span class=\"line\">        log.info(<span class=\"string\">\"get cache\"</span>);</span><br><span class=\"line\">        <span class=\"keyword\">final</span> List&lt;Person&gt; people = gson.fromJson(data, type);</span><br><span class=\"line\">        <span class=\"keyword\">return</span> people;</span><br><span class=\"line\">    &#125;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>ç¬¬ä¸€æ¬¡ä»ç¼“å­˜ä¸­æ£€æŸ¥ï¼Œå¦‚æœæ²¡æœ‰å‘½ä¸­ã€‚åŠ é”ï¼Œåœ¨æ£€æŸ¥ä¸€æ¬¡ã€‚å¦‚æœè¿˜æ˜¯æ‰¾ä¸åˆ°å°±ä»æ•°æ®åº“ä¸­å°è¯•æ›´æ–°ã€‚</p>\n</blockquote>\n<ul>\n<li>æ—¥å¿—è¾“å‡º</li>\n</ul>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\">[main] INFO  c.z201.cache.main.CacheBreakdownTest - Started CacheBreakdownTest in <span class=\"number\">2.237</span> seconds (JVM running <span class=\"keyword\">for</span> <span class=\"number\">3.485</span>)</span><br><span class=\"line\">[Thread-<span class=\"number\">13</span>] INFO  io.lettuce.core.EpollProvider - Starting without optional epoll library</span><br><span class=\"line\">[Thread-<span class=\"number\">13</span>] INFO  io.lettuce.core.KqueueProvider - Starting without optional kqueue library</span><br><span class=\"line\">[Thread-<span class=\"number\">6</span>] INFO  c.z.c.service.impl.PersonServiceImpl - get db</span><br><span class=\"line\">[Thread-<span class=\"number\">6</span>] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-<span class=\"number\">1</span> - Starting...</span><br><span class=\"line\">[Thread-<span class=\"number\">6</span>] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-<span class=\"number\">1</span> - Start completed.</span><br><span class=\"line\">[Thread-<span class=\"number\">6</span>] INFO  c.z.c.service.impl.PersonServiceImpl - set cache </span><br><span class=\"line\">[Thread-<span class=\"number\">4</span>] INFO  c.z.c.service.impl.PersonServiceImpl - get cache</span><br><span class=\"line\">[Thread-<span class=\"number\">7</span>] INFO  c.z.c.service.impl.PersonServiceImpl - get cache</span><br><span class=\"line\">[Thread-<span class=\"number\">12</span>] INFO  c.z.c.service.impl.PersonServiceImpl - get cache</span><br><span class=\"line\">[Thread-<span class=\"number\">13</span>] INFO  c.z.c.service.impl.PersonServiceImpl - get cache</span><br><span class=\"line\">[Thread-<span class=\"number\">5</span>] INFO  c.z.c.service.impl.PersonServiceImpl - get cache</span><br><span class=\"line\">[Thread-<span class=\"number\">8</span>] INFO  c.z.c.service.impl.PersonServiceImpl - get cache</span><br><span class=\"line\">[Thread-<span class=\"number\">11</span>] INFO  c.z.c.service.impl.PersonServiceImpl - get cache</span><br><span class=\"line\">[Thread-<span class=\"number\">10</span>] INFO  c.z.c.service.impl.PersonServiceImpl - get cache</span><br><span class=\"line\">[Thread-<span class=\"number\">9</span>] INFO  c.z.c.service.impl.PersonServiceImpl - get cache</span><br><span class=\"line\">[main] INFO  c.z201.cache.main.CacheBreakdownTest - æ‰€æœ‰çº¿ç¨‹æ‰§è¡Œå®Œæ¯•: <span class=\"number\">773</span></span><br><span class=\"line\">[Thread-<span class=\"number\">3</span>] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-<span class=\"number\">1</span> - Shutdown initiated...</span><br><span class=\"line\">[Thread-<span class=\"number\">3</span>] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-<span class=\"number\">1</span> - Shutdown completed.</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"END\"><a href=\"#END\" class=\"headerlink\" title=\"END\"></a>END</h3>","categories":["å®è·µ"],"tags":["Mysql","Redis","Spring","Cache","JavaLock"]},{"title":"Docker-ElasticSearch5.6.8","url":"/posts/3253426685/","content":"<h3 id=\"dockeræŸ¥æ‰¾é•œåƒ\"><a href=\"#dockeræŸ¥æ‰¾é•œåƒ\" class=\"headerlink\" title=\"dockeræŸ¥æ‰¾é•œåƒ\"></a>dockeræŸ¥æ‰¾é•œåƒ</h3><p><code>docker search elasticSearch</code></p>\n<p><img src=\"https://z201.oss-cn-shanghai.aliyuncs.com/JavaNote/Docker/docker-search-elasticsearch.png\"></p>\n<h3 id=\"docker-æ‹‰å»é•œåƒ\"><a href=\"#docker-æ‹‰å»é•œåƒ\" class=\"headerlink\" title=\"docker æ‹‰å»é•œåƒ\"></a>docker æ‹‰å»é•œåƒ</h3><p><code>docker pull elasticsearch:5.6.8</code>  ç›´æ¥æ‹‰å»å®˜æ–¹çš„é•œåƒï¼Œ å¯ä»¥ä½¿ç”¨æŒ‡å®šç‰ˆæœ¬ã€‚</p>\n<p><img src=\"https://z201.oss-cn-shanghai.aliyuncs.com/JavaNote/Docker/docker-pull-elasticseatch.png\"></p>\n<h3 id=\"dockerå¯åŠ¨elasticsearch\"><a href=\"#dockerå¯åŠ¨elasticsearch\" class=\"headerlink\" title=\"dockerå¯åŠ¨elasticsearch\"></a>dockerå¯åŠ¨elasticsearch</h3><p><code>docker run  --name elasticsearch  -p 9200:9200 -p 9300:9300 -v $PWD/elasticsearch/data:/usr/share/elasticsearch/data -e &quot;discovery.type=single-node&quot;   elasticsearch:5.6.8</code></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">--name elasticsearch æŒ‡å®šå®¹å™¨åå­—</span><br><span class=\"line\">-p 9200:9200 -p 9300:9300 å°†å®¹å™¨çš„9200ï¼Œ9300ç«¯å£æ˜ å°„æˆä¸»æœºçš„9200ï¼Œ9300ç«¯å£</span><br><span class=\"line\">-e <span class=\"string\">\"discovery.type=single-node\"</span> æŒ‡å®šå•èŠ‚ç‚¹æ¨¡å¼</span><br><span class=\"line\">elasticsearch:5.6.8 imagesåç§°</span><br></pre></td></tr></table></figure>\n\n<p><img src=\"https://z201.oss-cn-shanghai.aliyuncs.com/JavaNote/Docker/docker-ps-elasticsearch.png\"></p>\n<ul>\n<li>è¿™é‡Œåªæ˜¯æ¼”ç¤ºå•ä¸ªèŠ‚ç‚¹ã€‚</li>\n</ul>\n<p><img src=\"https://z201.oss-cn-shanghai.aliyuncs.com/JavaNote/Docker/docker-run-elasticsearch.png\"></p>\n<ul>\n<li>è¿™é‡Œçš„æ—¥å¿—è¾“å‡ºæœ‰ç‚¹é—®é¢˜ï¼Œç„¶åæˆ‘ä¹Ÿæ²¡æŒ‚è½½åˆ°æœ¬åœ°ã€‚ä¸‹æ¬¡å†™é›†ç¾¤éƒ¨ç½²åˆ°æ—¶å€™åœ¨æ¥å¼„ã€‚</li>\n</ul>\n<h2 id=\"END\"><a href=\"#END\" class=\"headerlink\" title=\"END\"></a>END</h2>","categories":["Docker"],"tags":["Docker","ElasticSearch"]},{"title":"Docker-Mysql5.7","url":"/posts/1709401516/","content":"<h3 id=\"dockeræŸ¥æ‰¾é•œåƒ\"><a href=\"#dockeræŸ¥æ‰¾é•œåƒ\" class=\"headerlink\" title=\"dockeræŸ¥æ‰¾é•œåƒ\"></a>dockeræŸ¥æ‰¾é•œåƒ</h3><p><code>docker search mysql</code></p>\n<p><img src=\"https://z201.oss-cn-shanghai.aliyuncs.com/JavaNote/Docker/docker-search-mysql.png\"></p>\n<h3 id=\"docker-æ‹‰å»é•œåƒ\"><a href=\"#docker-æ‹‰å»é•œåƒ\" class=\"headerlink\" title=\"docker æ‹‰å»é•œåƒ\"></a>docker æ‹‰å»é•œåƒ</h3><p><code>docker pull mysql:5.7</code>  ç›´æ¥æ‹‰å»å®˜æ–¹çš„é•œåƒï¼Œ å¯ä»¥ä½¿ç”¨æŒ‡å®šç‰ˆæœ¬ã€‚</p>\n<p><img src=\"https://z201.oss-cn-shanghai.aliyuncs.com/JavaNote/Docker/docker-pull-mysql5.7.png\"></p>\n<h3 id=\"dockerå¯åŠ¨mysql\"><a href=\"#dockerå¯åŠ¨mysql\" class=\"headerlink\" title=\"dockerå¯åŠ¨mysql\"></a>dockerå¯åŠ¨mysql</h3><p><code>docker run -p 3306:3306 -v $PWD/mysql/conf:/mysql/etc/mysql/conf.d -v $PWD/mysql/logs:/logs -v $PWD/mysql/data:/var/lib/mysql -e MYSQL_ROOT_PASSWORD=123456 -d mysql:5.7 </code></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">-p 3306:3306 å°†å®¹å™¨çš„3306ç«¯å£æ˜ å°„æˆä¸»æœºçš„3306ç«¯å£</span><br><span class=\"line\">-v <span class=\"variable\">$PWD</span>/mysql/conf:/mysql/etc/mysql/conf.d å°†ä¸»æœºä¸­å½“å‰ç›®å½•ä¸‹çš„mysql/confæŒ‚è½½åˆ°å®¹å™¨çš„/mysql/etc/mysql/conf.d</span><br><span class=\"line\">-v <span class=\"variable\">$PWD</span>/mysql/logs:/logs å°†ä¸»æœºä¸­å½“å‰ç›®å½•ä¸‹çš„mysql/logsæŒ‚è½½åˆ°å®¹å™¨/logs</span><br><span class=\"line\">-v <span class=\"variable\">$PWD</span>/mysql/data:/var/lib/mysql å°†ä¸»æœºä¸­å½“å‰ç›®å½•ä¸‹çš„mysql/dataæŒ‚è½½åˆ°å®¹å™¨/var/lib/mysql</span><br><span class=\"line\">-e MYSQL_ROOT_PASSWORD=123456  è®¾ç½®root å¯†ç  123456</span><br></pre></td></tr></table></figure>\n\n<p><img src=\"https://z201.oss-cn-shanghai.aliyuncs.com/JavaNote/Docker/docker-mysql-ps.png\"></p>\n<ul>\n<li>è¿™é‡Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œæœ¬æœºæœ‰å¤šä¸ªMysqlçš„æ—¶å€™ï¼Œä¸è¦éƒ½æŒ‚è½½åˆ°ä¸€èµ·äº†ã€‚</li>\n</ul>\n<h3 id=\"è¿›å…¥è¿è¡Œå®¹å™¨ä¸­\"><a href=\"#è¿›å…¥è¿è¡Œå®¹å™¨ä¸­\" class=\"headerlink\" title=\"è¿›å…¥è¿è¡Œå®¹å™¨ä¸­\"></a>è¿›å…¥è¿è¡Œå®¹å™¨ä¸­</h3><p><code>docker exec -it f1a0ccab4748 /bin/bash</code></p>\n<ul>\n<li><p>f1a0ccab4748 æ˜¯mysqlè¿è¡Œå®¹å™¨çš„ID</p>\n<p><img src=\"https://z201.oss-cn-shanghai.aliyuncs.com/JavaNote/Docker/docker-mysql-exec.png\"></p>\n</li>\n</ul>\n<h2 id=\"END\"><a href=\"#END\" class=\"headerlink\" title=\"END\"></a>END</h2>","categories":["Docker"],"tags":["Mysql","Docker"]},{"title":"å®è·µ-spring-redis-string","url":"/posts/795614161/","content":"<blockquote>\n<p>æœ¬ç« æ˜¯æ•´ç†çŸ¥è¯†å†…å®¹ï¼Œä¸ºå¼ºåŒ–çŸ¥è¯†é•¿æœŸæ›´æ–°ã€‚</p>\n</blockquote>\n<h3 id=\"spring-redis-string\"><a href=\"#spring-redis-string\" class=\"headerlink\" title=\"spring-redis-string\"></a>spring-redis-string</h3><blockquote>\n<p>Spring-data-redis æœ‰ä¸¤ä¸ªå®¢æˆ·ç«¯ï¼Œæœ¬ç« èŠ‚ä¸»è¦ä½¿ç”¨lettuceæ¥ä½œä¸ºä»£ç æ¼”ç¤ºã€‚å°½å¯èƒ½é¢å‘redisç¼–ç¨‹ã€‚</p>\n</blockquote>\n<ul>\n<li>å‚è€ƒæ–‡çŒ®<a href=\"http://redisdoc.com/string/index.html\" target=\"_blank\" rel=\"noopener\">redis-string</a></li>\n</ul>\n<h3 id=\"ä»£ç å®ç°\"><a href=\"#ä»£ç å®ç°\" class=\"headerlink\" title=\"ä»£ç å®ç°\"></a>ä»£ç å®ç°</h3><ul>\n<li>æ¥å£</li>\n</ul>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> cn.z201.learning.redis.operating.service;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> java.util.HashMap;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.util.List;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@author</span> z201.coding@gmail.com</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@see</span> cn.z201.learning.redis.operating.service.impl.RedisStringImpl</span></span><br><span class=\"line\"><span class=\"comment\"> **/</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">interface</span> <span class=\"title\">RedisStringI</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * å°†å­—ç¬¦ä¸²å€¼ value å…³è”åˆ° key ã€‚</span></span><br><span class=\"line\"><span class=\"comment\">     * å¦‚æœ key å·²ç»æŒæœ‰å…¶ä»–å€¼ï¼Œ SET å°±è¦†å†™æ—§å€¼ï¼Œ æ— è§†ç±»å‹ã€‚</span></span><br><span class=\"line\"><span class=\"comment\">     * å½“ SET å‘½ä»¤å¯¹ä¸€ä¸ªå¸¦æœ‰ç”Ÿå­˜æ—¶é—´ï¼ˆTTLï¼‰çš„é”®è¿›è¡Œè®¾ç½®ä¹‹åï¼Œ è¯¥é”®åŸæœ‰çš„ TTL å°†è¢«æ¸…é™¤ã€‚</span></span><br><span class=\"line\"><span class=\"comment\">     * &#123;<span class=\"doctag\">@link</span> = http://redisdoc.com/string/set.html &#125;</span></span><br><span class=\"line\"><span class=\"comment\">     * å¯ç”¨ç‰ˆæœ¬ï¼š &gt;= 1.0.0</span></span><br><span class=\"line\"><span class=\"comment\">     * æ—¶é—´å¤æ‚åº¦ï¼š O(1)</span></span><br><span class=\"line\"><span class=\"comment\">     *</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> key</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> value</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@return</span></span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"function\">Boolean <span class=\"title\">set</span><span class=\"params\">(String key, String value)</span></span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * åªåœ¨é”® key ä¸å­˜åœ¨çš„æƒ…å†µä¸‹ï¼Œ å°†é”® key çš„å€¼è®¾ç½®ä¸º value ã€‚</span></span><br><span class=\"line\"><span class=\"comment\">     * è‹¥é”® key å·²ç»å­˜åœ¨ï¼Œ åˆ™ SETNX å‘½ä»¤ä¸åšä»»ä½•åŠ¨ä½œã€‚</span></span><br><span class=\"line\"><span class=\"comment\">     * SETNX æ˜¯ã€SET if Not eXistsã€(å¦‚æœä¸å­˜åœ¨ï¼Œåˆ™ SET)çš„ç®€å†™ã€‚</span></span><br><span class=\"line\"><span class=\"comment\">     * å¯ç”¨ç‰ˆæœ¬ï¼š &gt;= 1.0.0</span></span><br><span class=\"line\"><span class=\"comment\">     * æ—¶é—´å¤æ‚åº¦ï¼š O(1)</span></span><br><span class=\"line\"><span class=\"comment\">     * &#123;<span class=\"doctag\">@link</span> = http://redisdoc.com/string/setnx.html  &#125;</span></span><br><span class=\"line\"><span class=\"comment\">     *</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> key</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> value</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@return</span></span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"function\">Boolean <span class=\"title\">setNx</span><span class=\"params\">(String key, String value)</span></span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * å°†é”® key çš„å€¼è®¾ç½®ä¸º value ï¼Œ å¹¶å°†é”® key çš„ç”Ÿå­˜æ—¶é—´è®¾ç½®ä¸º seconds ç§’é’Ÿã€‚</span></span><br><span class=\"line\"><span class=\"comment\">     * å¦‚æœé”® key å·²ç»å­˜åœ¨ï¼Œ é‚£ä¹ˆ SETEX å‘½ä»¤å°†è¦†ç›–å·²æœ‰çš„å€¼ã€‚</span></span><br><span class=\"line\"><span class=\"comment\">     * &lt;p&gt;</span></span><br><span class=\"line\"><span class=\"comment\">     * &#123;<span class=\"doctag\">@link</span> = http://redisdoc.com/string/setex.html&#125;</span></span><br><span class=\"line\"><span class=\"comment\">     * å¯ç”¨ç‰ˆæœ¬ï¼š &gt;= 2.0.0</span></span><br><span class=\"line\"><span class=\"comment\">     * æ—¶é—´å¤æ‚åº¦ï¼š O(1)</span></span><br><span class=\"line\"><span class=\"comment\">     *</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> key</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> timeout seconds ç§’</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> value</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@return</span></span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"function\">Boolean <span class=\"title\">setEx</span><span class=\"params\">(String key, Long timeout, String value)</span></span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * è¿™ä¸ªå‘½ä»¤å’Œ SETEX å‘½ä»¤ç›¸ä¼¼ï¼Œ ä½†å®ƒä»¥æ¯«ç§’ä¸ºå•ä½è®¾ç½® key çš„ç”Ÿå­˜æ—¶é—´ï¼Œ è€Œä¸æ˜¯åƒ SETEX å‘½ä»¤é‚£æ ·ä»¥ç§’ä¸ºå•ä½è¿›è¡Œè®¾ç½®ã€‚</span></span><br><span class=\"line\"><span class=\"comment\">     * &lt;p&gt;</span></span><br><span class=\"line\"><span class=\"comment\">     * &#123;<span class=\"doctag\">@link</span> = http://redisdoc.com/string/psetex.html&#125;</span></span><br><span class=\"line\"><span class=\"comment\">     * å¯ç”¨ç‰ˆæœ¬ï¼š &gt;= 2.6.0</span></span><br><span class=\"line\"><span class=\"comment\">     * æ—¶é—´å¤æ‚åº¦ï¼š O(1)</span></span><br><span class=\"line\"><span class=\"comment\">     *</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> key</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> timeout milliseconds</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> value</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@return</span></span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"function\">Boolean <span class=\"title\">pSetEx</span><span class=\"params\">(String key, Long timeout, String value)</span></span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * è¿”å›ä¸é”® key ç›¸å…³è”çš„å­—ç¬¦ä¸²å€¼ã€‚</span></span><br><span class=\"line\"><span class=\"comment\">     * &#123;<span class=\"doctag\">@link</span> = http://redisdoc.com/string/get.html&#125;</span></span><br><span class=\"line\"><span class=\"comment\">     * å¯ç”¨ç‰ˆæœ¬ï¼š &gt;= 1.0.0</span></span><br><span class=\"line\"><span class=\"comment\">     * æ—¶é—´å¤æ‚åº¦ï¼š O(1)</span></span><br><span class=\"line\"><span class=\"comment\">     *</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> key</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@return</span></span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"function\">Object <span class=\"title\">get</span><span class=\"params\">(String key)</span></span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * è·å–keyè®¾ç½®çš„valueï¼Œå¹¶è¿”å›ä¹‹å‰è®¾ç½®çš„å€¼ã€‚</span></span><br><span class=\"line\"><span class=\"comment\">     * &#123;<span class=\"doctag\">@link</span> = http://redisdoc.com/string/getset.html&#125;</span></span><br><span class=\"line\"><span class=\"comment\">     * å¯ç”¨ç‰ˆæœ¬ï¼š &gt;= 1.0.0</span></span><br><span class=\"line\"><span class=\"comment\">     * æ—¶é—´å¤æ‚åº¦ï¼š O(1)</span></span><br><span class=\"line\"><span class=\"comment\">     *</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> key</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> value</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@return</span></span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"function\">Object <span class=\"title\">getSet</span><span class=\"params\">(String key, String value)</span></span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * è¿”å›keyå¯¹åº”valueçš„é•¿åº¦</span></span><br><span class=\"line\"><span class=\"comment\">     * &#123;<span class=\"doctag\">@link</span> = http://redisdoc.com/string/strlen.html&#125;</span></span><br><span class=\"line\"><span class=\"comment\">     * å¯ç”¨ç‰ˆæœ¬ï¼š &gt;= 2.2.0</span></span><br><span class=\"line\"><span class=\"comment\">     * å¤æ‚åº¦ï¼š O(1)</span></span><br><span class=\"line\"><span class=\"comment\">     *</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> key</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@return</span></span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"function\">Long <span class=\"title\">strLen</span><span class=\"params\">(String key)</span></span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * å¦‚æœé”® key å·²ç»å­˜åœ¨å¹¶ä¸”å®ƒçš„å€¼æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œ APPEND å‘½ä»¤å°†æŠŠ value è¿½åŠ åˆ°é”® key ç°æœ‰å€¼çš„æœ«å°¾ã€‚</span></span><br><span class=\"line\"><span class=\"comment\">     * å¦‚æœ key ä¸å­˜åœ¨ï¼Œ APPEND å°±ç®€å•åœ°å°†é”® key çš„å€¼è®¾ä¸º value ï¼Œ å°±åƒæ‰§è¡Œ SET key value ä¸€æ ·ã€‚</span></span><br><span class=\"line\"><span class=\"comment\">     * &#123;<span class=\"doctag\">@link</span> = http://redisdoc.com/string/append.html&#125;</span></span><br><span class=\"line\"><span class=\"comment\">     * å¯ç”¨ç‰ˆæœ¬ï¼š &gt;= 2.0.0</span></span><br><span class=\"line\"><span class=\"comment\">     * æ—¶é—´å¤æ‚åº¦ï¼š å¹³æ‘ŠO(1)</span></span><br><span class=\"line\"><span class=\"comment\">     *</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> key</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> value</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@return</span></span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"function\">Long <span class=\"title\">appEnd</span><span class=\"params\">(String key, String value)</span></span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * ä»åç§»é‡ offset å¼€å§‹ï¼Œ ç”¨ value å‚æ•°è¦†å†™(overwrite)é”® key å‚¨å­˜çš„å­—ç¬¦ä¸²å€¼ã€‚</span></span><br><span class=\"line\"><span class=\"comment\">     * ä¸å­˜åœ¨çš„é”® key å½“ä½œç©ºç™½å­—ç¬¦ä¸²å¤„ç†ã€‚</span></span><br><span class=\"line\"><span class=\"comment\">     * SETRANGE å‘½ä»¤ä¼šç¡®ä¿å­—ç¬¦ä¸²è¶³å¤Ÿé•¿ä»¥ä¾¿å°† value è®¾ç½®åˆ°æŒ‡å®šçš„åç§»é‡ä¸Šï¼Œ</span></span><br><span class=\"line\"><span class=\"comment\">     * å¦‚æœé”® key åŸæ¥å‚¨å­˜çš„å­—ç¬¦ä¸²é•¿åº¦æ¯”åç§»é‡å°(æ¯”å¦‚å­—ç¬¦ä¸²åªæœ‰ 5 ä¸ªå­—ç¬¦é•¿ï¼Œ</span></span><br><span class=\"line\"><span class=\"comment\">     * ä½†ä½ è®¾ç½®çš„ offset æ˜¯ 10 )ï¼Œ é‚£ä¹ˆåŸå­—ç¬¦å’Œåç§»é‡ä¹‹é—´çš„ç©ºç™½å°†ç”¨é›¶å­—èŠ‚(zerobytes, \"\\x00\" )è¿›è¡Œå¡«å……ã€‚</span></span><br><span class=\"line\"><span class=\"comment\">     * &lt;p&gt;</span></span><br><span class=\"line\"><span class=\"comment\">     * &#123;<span class=\"doctag\">@link</span> = http://redisdoc.com/string/setrange.html&#125;</span></span><br><span class=\"line\"><span class=\"comment\">     * å¯ç”¨ç‰ˆæœ¬ï¼š &gt;= 2.2.0</span></span><br><span class=\"line\"><span class=\"comment\">     * æ—¶é—´å¤æ‚åº¦ï¼šå¯¹äºé•¿åº¦è¾ƒçŸ­çš„å­—ç¬¦ä¸²ï¼Œå‘½ä»¤çš„å¹³æ‘Šå¤æ‚åº¦O(1)ï¼›å¯¹äºé•¿åº¦è¾ƒå¤§çš„å­—ç¬¦ä¸²ï¼Œå‘½ä»¤çš„å¤æ‚åº¦ä¸º O(M) ï¼Œå…¶ä¸­ M ä¸º value çš„é•¿åº¦ã€‚</span></span><br><span class=\"line\"><span class=\"comment\">     *</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> key</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> offset</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> value</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@return</span></span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"function\">Boolean <span class=\"title\">setRange</span><span class=\"params\">(String key, Long offset, String value)</span></span>;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * è¿”å›é”® key å‚¨å­˜çš„å­—ç¬¦ä¸²å€¼çš„æŒ‡å®šéƒ¨åˆ†ï¼Œ å­—ç¬¦ä¸²çš„æˆªå–èŒƒå›´ç”± start å’Œ end ä¸¤ä¸ªåç§»é‡å†³å®š (åŒ…æ‹¬ start å’Œ end åœ¨å†…)ã€‚</span></span><br><span class=\"line\"><span class=\"comment\">     * è´Ÿæ•°åç§»é‡è¡¨ç¤ºä»å­—ç¬¦ä¸²çš„æœ«å°¾å¼€å§‹è®¡æ•°ï¼Œ -1 è¡¨ç¤ºæœ€åä¸€ä¸ªå­—ç¬¦ï¼Œ -2 è¡¨ç¤ºå€’æ•°ç¬¬äºŒä¸ªå­—ç¬¦ï¼Œ ä»¥æ­¤ç±»æ¨ã€‚</span></span><br><span class=\"line\"><span class=\"comment\">     * GETRANGE é€šè¿‡ä¿è¯å­å­—ç¬¦ä¸²çš„å€¼åŸŸ(range)ä¸è¶…è¿‡å®é™…å­—ç¬¦ä¸²çš„å€¼åŸŸæ¥å¤„ç†è¶…å‡ºèŒƒå›´çš„å€¼åŸŸè¯·æ±‚ã€‚</span></span><br><span class=\"line\"><span class=\"comment\">     * &lt;p&gt;</span></span><br><span class=\"line\"><span class=\"comment\">     * &#123;<span class=\"doctag\">@link</span> = http://redisdoc.com/string/setrange.html&#125;</span></span><br><span class=\"line\"><span class=\"comment\">     * å¯ç”¨ç‰ˆæœ¬ï¼š &gt;= 2.4.0</span></span><br><span class=\"line\"><span class=\"comment\">     * æ—¶é—´å¤æ‚åº¦ï¼š O(N)ï¼Œå…¶ä¸­ N ä¸ºè¢«è¿”å›çš„å­—ç¬¦ä¸²çš„é•¿åº¦ã€‚</span></span><br><span class=\"line\"><span class=\"comment\">     *</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> key</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> start</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> end</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@return</span></span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"function\">Object <span class=\"title\">getRange</span><span class=\"params\">(String key, Long start, Long end)</span></span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * ä¸ºé”® key å‚¨å­˜çš„æ•°å­—å€¼åŠ ä¸Šä¸€ã€‚</span></span><br><span class=\"line\"><span class=\"comment\">     * å¦‚æœé”® key ä¸å­˜åœ¨ï¼Œ é‚£ä¹ˆå®ƒçš„å€¼ä¼šå…ˆè¢«åˆå§‹åŒ–ä¸º 0 ï¼Œ ç„¶åå†æ‰§è¡Œ INCR å‘½ä»¤ã€‚</span></span><br><span class=\"line\"><span class=\"comment\">     * å¦‚æœé”® key å‚¨å­˜çš„å€¼ä¸èƒ½è¢«è§£é‡Šä¸ºæ•°å­—ï¼Œ é‚£ä¹ˆ INCR å‘½ä»¤å°†è¿”å›ä¸€ä¸ªé”™è¯¯ã€‚</span></span><br><span class=\"line\"><span class=\"comment\">     * æœ¬æ“ä½œçš„å€¼é™åˆ¶åœ¨ 64 ä½(bit)æœ‰ç¬¦å·æ•°å­—è¡¨ç¤ºä¹‹å†…ã€‚</span></span><br><span class=\"line\"><span class=\"comment\">     * &lt;p&gt;</span></span><br><span class=\"line\"><span class=\"comment\">     * &#123;<span class=\"doctag\">@link</span> = http://redisdoc.com/string/incr.html&#125;</span></span><br><span class=\"line\"><span class=\"comment\">     * å¯ç”¨ç‰ˆæœ¬ï¼š &gt;= 1.0.0</span></span><br><span class=\"line\"><span class=\"comment\">     * æ—¶é—´å¤æ‚åº¦ï¼š O(1)</span></span><br><span class=\"line\"><span class=\"comment\">     *</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> key</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@return</span></span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"function\">Long <span class=\"title\">incr</span><span class=\"params\">(String key)</span></span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * ä¸ºé”® key å‚¨å­˜çš„æ•°å­—å€¼åŠ ä¸Šå¢é‡ increment ã€‚</span></span><br><span class=\"line\"><span class=\"comment\">     * å¦‚æœé”® key ä¸å­˜åœ¨ï¼Œ é‚£ä¹ˆé”® key çš„å€¼ä¼šå…ˆè¢«åˆå§‹åŒ–ä¸º 0 ï¼Œ ç„¶åå†æ‰§è¡Œ INCRBY å‘½ä»¤ã€‚</span></span><br><span class=\"line\"><span class=\"comment\">     * å¦‚æœé”® key å‚¨å­˜çš„å€¼ä¸èƒ½è¢«è§£é‡Šä¸ºæ•°å­—ï¼Œ é‚£ä¹ˆ INCRBY å‘½ä»¤å°†è¿”å›ä¸€ä¸ªé”™è¯¯ã€‚</span></span><br><span class=\"line\"><span class=\"comment\">     * æœ¬æ“ä½œçš„å€¼é™åˆ¶åœ¨ 64 ä½(bit)æœ‰ç¬¦å·æ•°å­—è¡¨ç¤ºä¹‹å†…ã€‚</span></span><br><span class=\"line\"><span class=\"comment\">     * &lt;p&gt;</span></span><br><span class=\"line\"><span class=\"comment\">     * &#123;<span class=\"doctag\">@link</span> = http://redisdoc.com/string/incrby.html&#125;</span></span><br><span class=\"line\"><span class=\"comment\">     * å¯ç”¨ç‰ˆæœ¬ï¼š &gt;= 1.0.0</span></span><br><span class=\"line\"><span class=\"comment\">     * æ—¶é—´å¤æ‚åº¦ï¼š O(1)</span></span><br><span class=\"line\"><span class=\"comment\">     *</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> key</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> sum</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@return</span></span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"function\">Long <span class=\"title\">incrBy</span><span class=\"params\">(String key, Long sum)</span></span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * ä¸ºé”® key å‚¨å­˜çš„å€¼åŠ ä¸Šæµ®ç‚¹æ•°å¢é‡ increment ã€‚</span></span><br><span class=\"line\"><span class=\"comment\">     * å¦‚æœé”® key ä¸å­˜åœ¨ï¼Œ é‚£ä¹ˆ INCRBYFLOAT ä¼šå…ˆå°†é”® key çš„å€¼è®¾ä¸º 0 ï¼Œ ç„¶åå†æ‰§è¡ŒåŠ æ³•æ“ä½œã€‚</span></span><br><span class=\"line\"><span class=\"comment\">     * å¦‚æœå‘½ä»¤æ‰§è¡ŒæˆåŠŸï¼Œ é‚£ä¹ˆé”® key çš„å€¼ä¼šè¢«æ›´æ–°ä¸ºæ‰§è¡ŒåŠ æ³•è®¡ç®—ä¹‹åçš„æ–°å€¼ï¼Œ å¹¶ä¸”æ–°å€¼ä¼šä»¥å­—ç¬¦ä¸²çš„å½¢å¼è¿”å›ç»™è°ƒç”¨è€…ã€‚</span></span><br><span class=\"line\"><span class=\"comment\">     * æ— è®ºæ˜¯é”® key çš„å€¼è¿˜æ˜¯å¢é‡ increment ï¼Œ éƒ½å¯ä»¥ä½¿ç”¨åƒ 2.0e7 ã€ 3e5 ã€ 90e-2 é‚£æ ·çš„æŒ‡æ•°ç¬¦å·(exponential notation)æ¥è¡¨ç¤ºï¼Œ ä½†æ˜¯ï¼Œ</span></span><br><span class=\"line\"><span class=\"comment\">     * æ‰§è¡Œ INCRBYFLOAT å‘½ä»¤ä¹‹åçš„å€¼æ€»æ˜¯ä»¥åŒæ ·çš„å½¢å¼å‚¨å­˜ï¼Œ ä¹Ÿå³æ˜¯ï¼Œ å®ƒä»¬æ€»æ˜¯ç”±ä¸€ä¸ªæ•°å­—ï¼Œ</span></span><br><span class=\"line\"><span class=\"comment\">     * ä¸€ä¸ªï¼ˆå¯é€‰çš„ï¼‰å°æ•°ç‚¹å’Œä¸€ä¸ªä»»æ„é•¿åº¦çš„å°æ•°éƒ¨åˆ†ç»„æˆï¼ˆæ¯”å¦‚ 3.14 ã€ 69.768 ï¼Œè¯¸å¦‚æ­¤ç±»)ï¼Œ å°æ•°éƒ¨åˆ†å°¾éšçš„ 0 ä¼šè¢«ç§»é™¤ï¼Œ</span></span><br><span class=\"line\"><span class=\"comment\">     * å¦‚æœå¯èƒ½çš„è¯ï¼Œ å‘½ä»¤è¿˜ä¼šå°†æµ®ç‚¹æ•°è½¬æ¢ä¸ºæ•´æ•°ï¼ˆæ¯”å¦‚ 3.0 ä¼šè¢«ä¿å­˜æˆ 3 ï¼‰ã€‚</span></span><br><span class=\"line\"><span class=\"comment\">     * æ­¤å¤–ï¼Œ æ— è®ºåŠ æ³•è®¡ç®—æ‰€å¾—çš„æµ®ç‚¹æ•°çš„å®é™…ç²¾åº¦æœ‰å¤šé•¿ï¼Œ INCRBYFLOAT å‘½ä»¤çš„è®¡ç®—ç»“æœæœ€å¤šåªä¿ç•™å°æ•°ç‚¹çš„ååä¸ƒä½ã€‚</span></span><br><span class=\"line\"><span class=\"comment\">     * å½“ä»¥ä¸‹ä»»æ„ä¸€ä¸ªæ¡ä»¶å‘ç”Ÿæ—¶ï¼Œ å‘½ä»¤è¿”å›ä¸€ä¸ªé”™è¯¯ï¼š</span></span><br><span class=\"line\"><span class=\"comment\">     * é”® key çš„å€¼ä¸æ˜¯å­—ç¬¦ä¸²ç±»å‹(å› ä¸º Redis ä¸­çš„æ•°å­—å’Œæµ®ç‚¹æ•°éƒ½ä»¥å­—ç¬¦ä¸²çš„å½¢å¼ä¿å­˜ï¼Œæ‰€ä»¥å®ƒä»¬éƒ½å±äºå­—ç¬¦ä¸²ç±»å‹ï¼‰ï¼›</span></span><br><span class=\"line\"><span class=\"comment\">     * é”® key å½“å‰çš„å€¼æˆ–è€…ç»™å®šçš„å¢é‡ increment ä¸èƒ½è¢«è§£é‡Š(parse)ä¸ºåŒç²¾åº¦æµ®ç‚¹æ•°ã€‚</span></span><br><span class=\"line\"><span class=\"comment\">     * &lt;p&gt;</span></span><br><span class=\"line\"><span class=\"comment\">     * &#123;<span class=\"doctag\">@link</span> = http://redisdoc.com/string/incrbyfloat.html&#125;</span></span><br><span class=\"line\"><span class=\"comment\">     * å¯ç”¨ç‰ˆæœ¬ï¼š &gt;= 1.0.0</span></span><br><span class=\"line\"><span class=\"comment\">     * æ—¶é—´å¤æ‚åº¦ï¼š O(1)</span></span><br><span class=\"line\"><span class=\"comment\">     *</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> key</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> sum</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@return</span></span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"function\">Float <span class=\"title\">incrByFloat</span><span class=\"params\">(String key, Float sum)</span></span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * ä¸ºé”® key å‚¨å­˜çš„æ•°å­—å€¼å‡å»ä¸€ã€‚</span></span><br><span class=\"line\"><span class=\"comment\">     * å¦‚æœé”® key ä¸å­˜åœ¨ï¼Œ é‚£ä¹ˆé”® key çš„å€¼ä¼šå…ˆè¢«åˆå§‹åŒ–ä¸º 0 ï¼Œ ç„¶åå†æ‰§è¡Œ DECR æ“ä½œã€‚</span></span><br><span class=\"line\"><span class=\"comment\">     * å¦‚æœé”® key å‚¨å­˜çš„å€¼ä¸èƒ½è¢«è§£é‡Šä¸ºæ•°å­—ï¼Œ é‚£ä¹ˆ DECR å‘½ä»¤å°†è¿”å›ä¸€ä¸ªé”™è¯¯ã€‚</span></span><br><span class=\"line\"><span class=\"comment\">     * æœ¬æ“ä½œçš„å€¼é™åˆ¶åœ¨ 64 ä½(bit)æœ‰ç¬¦å·æ•°å­—è¡¨ç¤ºä¹‹å†…ã€‚</span></span><br><span class=\"line\"><span class=\"comment\">     * &lt;p&gt;</span></span><br><span class=\"line\"><span class=\"comment\">     * &#123;<span class=\"doctag\">@link</span> = http://redisdoc.com/string/decr.html&#125;</span></span><br><span class=\"line\"><span class=\"comment\">     * å¯ç”¨ç‰ˆæœ¬ï¼š &gt;= 1.0.0</span></span><br><span class=\"line\"><span class=\"comment\">     * æ—¶é—´å¤æ‚åº¦ï¼š O(1)</span></span><br><span class=\"line\"><span class=\"comment\">     *</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> key</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@return</span></span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"function\">Long <span class=\"title\">decr</span><span class=\"params\">(String key)</span></span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * å°†é”® key å‚¨å­˜çš„æ•´æ•°å€¼å‡å»å‡é‡ decrement ã€‚</span></span><br><span class=\"line\"><span class=\"comment\">     * å¦‚æœé”® key ä¸å­˜åœ¨ï¼Œ é‚£ä¹ˆé”® key çš„å€¼ä¼šå…ˆè¢«åˆå§‹åŒ–ä¸º 0 ï¼Œ ç„¶åå†æ‰§è¡Œ DECRBY å‘½ä»¤ã€‚</span></span><br><span class=\"line\"><span class=\"comment\">     * å¦‚æœé”® key å‚¨å­˜çš„å€¼ä¸èƒ½è¢«è§£é‡Šä¸ºæ•°å­—ï¼Œ é‚£ä¹ˆ DECRBY å‘½ä»¤å°†è¿”å›ä¸€ä¸ªé”™è¯¯ã€‚</span></span><br><span class=\"line\"><span class=\"comment\">     * æœ¬æ“ä½œçš„å€¼é™åˆ¶åœ¨ 64 ä½(bit)æœ‰ç¬¦å·æ•°å­—è¡¨ç¤ºä¹‹å†…ã€‚</span></span><br><span class=\"line\"><span class=\"comment\">     * &lt;p&gt;</span></span><br><span class=\"line\"><span class=\"comment\">     * å¯ç”¨ç‰ˆæœ¬ï¼š &gt;= 1.0.0</span></span><br><span class=\"line\"><span class=\"comment\">     * æ—¶é—´å¤æ‚åº¦ï¼š O(1)</span></span><br><span class=\"line\"><span class=\"comment\">     *</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> key</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> sum</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@return</span></span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"function\">Long <span class=\"title\">decrBy</span><span class=\"params\">(String key, Long sum)</span></span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * åŒæ—¶ä¸ºå¤šä¸ªé”®è®¾ç½®å€¼ã€‚</span></span><br><span class=\"line\"><span class=\"comment\">     * å¦‚æœæŸä¸ªç»™å®šé”®å·²ç»å­˜åœ¨ï¼Œ é‚£ä¹ˆ MSET å°†ä½¿ç”¨æ–°å€¼å»è¦†ç›–æ—§å€¼ï¼Œ</span></span><br><span class=\"line\"><span class=\"comment\">     * å¦‚æœè¿™ä¸æ˜¯ä½ æ‰€å¸Œæœ›çš„æ•ˆæœï¼Œ è¯·è€ƒè™‘ä½¿ç”¨ MSETNX å‘½ä»¤ï¼Œ è¿™ä¸ªå‘½ä»¤åªä¼šåœ¨æ‰€æœ‰ç»™å®šé”®éƒ½ä¸å­˜åœ¨çš„æƒ…å†µä¸‹è¿›è¡Œè®¾ç½®ã€‚</span></span><br><span class=\"line\"><span class=\"comment\">     * MSET æ˜¯ä¸€ä¸ªåŸå­æ€§(atomic)æ“ä½œï¼Œ æ‰€æœ‰ç»™å®šé”®éƒ½ä¼šåœ¨åŒä¸€æ—¶é—´å†…è¢«è®¾ç½®ï¼Œ ä¸ä¼šå‡ºç°æŸäº›é”®è¢«è®¾ç½®äº†ä½†æ˜¯å¦ä¸€äº›é”®æ²¡æœ‰è¢«è®¾ç½®çš„æƒ…å†µã€‚</span></span><br><span class=\"line\"><span class=\"comment\">     * &#123;<span class=\"doctag\">@link</span> = http://redisdoc.com/string/mset.html&#125;</span></span><br><span class=\"line\"><span class=\"comment\">     * å¯ç”¨ç‰ˆæœ¬ï¼š &gt;= 1.0.1</span></span><br><span class=\"line\"><span class=\"comment\">     * æ—¶é—´å¤æ‚åº¦ï¼š O(N)ï¼Œå…¶ä¸­ N ä¸ºè¢«è®¾ç½®çš„é”®æ•°é‡ã€‚</span></span><br><span class=\"line\"><span class=\"comment\">     *</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> map</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@return</span></span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"function\">Boolean <span class=\"title\">mSet</span><span class=\"params\">(HashMap&lt;String, Object&gt; map)</span></span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * å½“ä¸”ä»…å½“æ‰€æœ‰ç»™å®šé”®éƒ½ä¸å­˜åœ¨æ—¶ï¼Œ ä¸ºæ‰€æœ‰ç»™å®šé”®è®¾ç½®å€¼ã€‚</span></span><br><span class=\"line\"><span class=\"comment\">     * å³ä½¿åªæœ‰ä¸€ä¸ªç»™å®šé”®å·²ç»å­˜åœ¨ï¼Œ MSETNX å‘½ä»¤ä¹Ÿä¼šæ‹’ç»æ‰§è¡Œå¯¹æ‰€æœ‰é”®çš„è®¾ç½®æ“ä½œã€‚</span></span><br><span class=\"line\"><span class=\"comment\">     * MSETNX æ˜¯ä¸€ä¸ªåŸå­æ€§(atomic)æ“ä½œï¼Œ æ‰€æœ‰ç»™å®šé”®è¦ä¹ˆå°±å…¨éƒ¨éƒ½è¢«è®¾ç½®ï¼Œ è¦ä¹ˆå°±å…¨éƒ¨éƒ½ä¸è®¾ç½®ï¼Œ ä¸å¯èƒ½å‡ºç°ç¬¬ä¸‰ç§çŠ¶æ€ã€‚</span></span><br><span class=\"line\"><span class=\"comment\">     * &#123;<span class=\"doctag\">@link</span> = http://redisdoc.com/string/msetnx.html&#125;</span></span><br><span class=\"line\"><span class=\"comment\">     * å¯ç”¨ç‰ˆæœ¬ï¼š &gt;= 1.0.1</span></span><br><span class=\"line\"><span class=\"comment\">     * æ—¶é—´å¤æ‚åº¦ï¼š O(N)ï¼Œ å…¶ä¸­ N ä¸ºè¢«è®¾ç½®çš„é”®æ•°é‡ã€‚</span></span><br><span class=\"line\"><span class=\"comment\">     *</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> map</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@return</span></span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"function\">Boolean <span class=\"title\">mSetNx</span><span class=\"params\">(HashMap&lt;String, Object&gt; map)</span></span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * è¿”å›ç»™å®šçš„ä¸€ä¸ªæˆ–å¤šä¸ªå­—ç¬¦ä¸²é”®çš„å€¼ã€‚</span></span><br><span class=\"line\"><span class=\"comment\">     * å¦‚æœç»™å®šçš„å­—ç¬¦ä¸²é”®é‡Œé¢ï¼Œ æœ‰æŸä¸ªé”®ä¸å­˜åœ¨ï¼Œ é‚£ä¹ˆè¿™ä¸ªé”®çš„å€¼å°†ä»¥ç‰¹æ®Šå€¼ nil è¡¨ç¤ºã€‚</span></span><br><span class=\"line\"><span class=\"comment\">     * &#123;<span class=\"doctag\">@link</span> = http://redisdoc.com/string/mget.html&#125;</span></span><br><span class=\"line\"><span class=\"comment\">     * å¯ç”¨ç‰ˆæœ¬ï¼š &gt;= 1.0.0</span></span><br><span class=\"line\"><span class=\"comment\">     * æ—¶é—´å¤æ‚åº¦ï¼š O(N) ï¼Œå…¶ä¸­ N ä¸ºç»™å®šé”®çš„æ•°é‡ã€‚</span></span><br><span class=\"line\"><span class=\"comment\">     *</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> key</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@return</span></span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"function\">List&lt;Object&gt; <span class=\"title\">mGet</span><span class=\"params\">(String[] key)</span></span>;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<a id=\"more\"></a>\n\n<ul>\n<li>ä»£ç å®ç°</li>\n</ul>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> cn.z201.learning.redis.operating.service.impl;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> cn.z201.learning.redis.operating.Tools;</span><br><span class=\"line\"><span class=\"keyword\">import</span> cn.z201.learning.redis.operating.service.RedisStringExpansionI;</span><br><span class=\"line\"><span class=\"keyword\">import</span> cn.z201.learning.redis.operating.service.RedisStringI;</span><br><span class=\"line\"><span class=\"keyword\">import</span> lombok.extern.slf4j.Slf4j;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.springframework.data.redis.core.RedisCallback;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.springframework.data.redis.core.RedisTemplate;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.springframework.data.redis.serializer.RedisSerializer;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.springframework.stereotype.Service;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> java.util.*;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@author</span> z201.coding@gmail.com</span></span><br><span class=\"line\"><span class=\"comment\"> **/</span></span><br><span class=\"line\"><span class=\"meta\">@Slf</span>4j</span><br><span class=\"line\"><span class=\"meta\">@Service</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">RedisStringImpl</span> <span class=\"keyword\">implements</span> <span class=\"title\">RedisStringI</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">   <span class=\"meta\">@Autowired</span></span><br><span class=\"line\">    RedisTemplate redisTemplate;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> Boolean <span class=\"title\">set</span><span class=\"params\">(String key, String value)</span> </span>&#123;</span><br><span class=\"line\">        Tools.notNull(key, value);</span><br><span class=\"line\">        <span class=\"keyword\">return</span> (Boolean) redisTemplate.execute((RedisCallback&lt;Boolean&gt;) connection -&gt; &#123;</span><br><span class=\"line\">            RedisSerializer stringRedisSerializer = redisTemplate.getStringSerializer();</span><br><span class=\"line\">            <span class=\"keyword\">return</span> connection.set(stringRedisSerializer.serialize(key),</span><br><span class=\"line\">                    stringRedisSerializer.serialize(value));</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> Boolean <span class=\"title\">setNx</span><span class=\"params\">(String key, String value)</span> </span>&#123;</span><br><span class=\"line\">        Tools.notNull(key, value);</span><br><span class=\"line\">        <span class=\"keyword\">return</span> (Boolean) redisTemplate.execute((RedisCallback&lt;Boolean&gt;) connection -&gt; &#123;</span><br><span class=\"line\">            RedisSerializer stringRedisSerializer = redisTemplate.getStringSerializer();</span><br><span class=\"line\">            <span class=\"keyword\">return</span> connection.setNX(stringRedisSerializer.serialize(key),</span><br><span class=\"line\">                    stringRedisSerializer.serialize(value));</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> Boolean <span class=\"title\">setEx</span><span class=\"params\">(String key, Long timeout, String value)</span> </span>&#123;</span><br><span class=\"line\">        Tools.notNull(key, value);</span><br><span class=\"line\">        Tools.notNull(timeout);</span><br><span class=\"line\">        <span class=\"keyword\">return</span> (Boolean) redisTemplate.execute((RedisCallback&lt;Boolean&gt;) connection -&gt; &#123;</span><br><span class=\"line\">            RedisSerializer stringRedisSerializer = redisTemplate.getStringSerializer();</span><br><span class=\"line\">            <span class=\"keyword\">return</span> connection.setEx(stringRedisSerializer.serialize(key),</span><br><span class=\"line\">                    timeout,</span><br><span class=\"line\">                    stringRedisSerializer.serialize(value));</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> Boolean <span class=\"title\">pSetEx</span><span class=\"params\">(String key, Long timeout, String value)</span> </span>&#123;</span><br><span class=\"line\">        Tools.notNull(key, value);</span><br><span class=\"line\">        Tools.notNull(timeout);</span><br><span class=\"line\">        <span class=\"keyword\">return</span> (Boolean) redisTemplate.execute((RedisCallback&lt;Boolean&gt;) connection -&gt; &#123;</span><br><span class=\"line\">            RedisSerializer stringRedisSerializer = redisTemplate.getStringSerializer();</span><br><span class=\"line\">            <span class=\"keyword\">return</span> connection.pSetEx(stringRedisSerializer.serialize(key),</span><br><span class=\"line\">                    timeout,</span><br><span class=\"line\">                    stringRedisSerializer.serialize(value));</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> Object <span class=\"title\">get</span><span class=\"params\">(String key)</span> </span>&#123;</span><br><span class=\"line\">        Tools.notNull(key);</span><br><span class=\"line\">        <span class=\"keyword\">return</span> redisTemplate.execute((RedisCallback&lt;Object&gt;) connection -&gt; &#123;</span><br><span class=\"line\">            RedisSerializer stringRedisSerializer = redisTemplate.getStringSerializer();</span><br><span class=\"line\">            <span class=\"keyword\">byte</span>[] bytes = connection.get(stringRedisSerializer.serialize(key));</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (<span class=\"keyword\">null</span> != bytes || bytes.length != <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">                <span class=\"keyword\">return</span> stringRedisSerializer.deserialize(bytes);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"keyword\">null</span>;</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> Object <span class=\"title\">getSet</span><span class=\"params\">(String key, String value)</span> </span>&#123;</span><br><span class=\"line\">        Tools.notNull(key, value);</span><br><span class=\"line\">        <span class=\"keyword\">return</span> redisTemplate.execute((RedisCallback&lt;Object&gt;) connection -&gt; &#123;</span><br><span class=\"line\">            RedisSerializer stringRedisSerializer = redisTemplate.getStringSerializer();</span><br><span class=\"line\">            <span class=\"keyword\">byte</span>[] bytes = connection.getSet(stringRedisSerializer.serialize(key)</span><br><span class=\"line\">                    , stringRedisSerializer.serialize(value));</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (<span class=\"keyword\">null</span> != bytes || bytes.length != <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">                <span class=\"keyword\">return</span> stringRedisSerializer.deserialize(bytes);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"keyword\">null</span>;</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> Long <span class=\"title\">strLen</span><span class=\"params\">(String key)</span> </span>&#123;</span><br><span class=\"line\">        Tools.notNull(key);</span><br><span class=\"line\">        <span class=\"keyword\">return</span> (Long) redisTemplate.execute((RedisCallback&lt;Long&gt;) connection -&gt; &#123;</span><br><span class=\"line\">            RedisSerializer stringRedisSerializer = redisTemplate.getStringSerializer();</span><br><span class=\"line\">            <span class=\"keyword\">return</span> connection.strLen(stringRedisSerializer.serialize(key));</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> Long <span class=\"title\">appEnd</span><span class=\"params\">(String key, String value)</span> </span>&#123;</span><br><span class=\"line\">        Tools.notNull(key, value);</span><br><span class=\"line\">        <span class=\"keyword\">return</span> (Long) redisTemplate.execute((RedisCallback&lt;Long&gt;) connection -&gt; &#123;</span><br><span class=\"line\">            RedisSerializer stringRedisSerializer = redisTemplate.getStringSerializer();</span><br><span class=\"line\">            <span class=\"keyword\">return</span> connection.append(stringRedisSerializer.serialize(key),</span><br><span class=\"line\">                    stringRedisSerializer.serialize(value));</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> Boolean <span class=\"title\">setRange</span><span class=\"params\">(String key, Long offset, String value)</span> </span>&#123;</span><br><span class=\"line\">        Tools.notNull(key, value);</span><br><span class=\"line\">        Tools.notNull(offset);</span><br><span class=\"line\">        <span class=\"keyword\">return</span> (Boolean) redisTemplate.execute((RedisCallback&lt;Boolean&gt;) connection -&gt; &#123;</span><br><span class=\"line\">            RedisSerializer stringRedisSerializer = redisTemplate.getStringSerializer();</span><br><span class=\"line\">            connection.setRange(stringRedisSerializer.serialize(key),</span><br><span class=\"line\">                    stringRedisSerializer.serialize(value),</span><br><span class=\"line\">                    offset);</span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"keyword\">true</span>;</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> Object <span class=\"title\">getRange</span><span class=\"params\">(String key, Long start, Long end)</span> </span>&#123;</span><br><span class=\"line\">        Tools.notNull(key);</span><br><span class=\"line\">        Tools.notNull(start);</span><br><span class=\"line\">        Tools.notNull(end);</span><br><span class=\"line\">        <span class=\"keyword\">return</span> redisTemplate.execute((RedisCallback&lt;Object&gt;) connection -&gt; &#123;</span><br><span class=\"line\">            RedisSerializer stringRedisSerializer = redisTemplate.getStringSerializer();</span><br><span class=\"line\">            <span class=\"keyword\">byte</span>[] bytes = connection.getRange(stringRedisSerializer.serialize(key),</span><br><span class=\"line\">                    start,</span><br><span class=\"line\">                    end);</span><br><span class=\"line\">            <span class=\"keyword\">return</span> stringRedisSerializer.deserialize(bytes);</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> Long <span class=\"title\">incr</span><span class=\"params\">(String key)</span> </span>&#123;</span><br><span class=\"line\">        Tools.notNull(key);</span><br><span class=\"line\">        <span class=\"keyword\">return</span> (Long) redisTemplate.execute((RedisCallback&lt;Long&gt;) connection -&gt; &#123;</span><br><span class=\"line\">            RedisSerializer stringRedisSerializer = redisTemplate.getStringSerializer();</span><br><span class=\"line\">            <span class=\"keyword\">return</span> connection.incr(stringRedisSerializer.serialize(key));</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> Boolean <span class=\"title\">batchIncr</span><span class=\"params\">(String[] key)</span> </span>&#123;</span><br><span class=\"line\">        Tools.notNull(key);</span><br><span class=\"line\">        <span class=\"keyword\">return</span> (Boolean) redisTemplate.execute((RedisCallback&lt;Boolean&gt;) connection -&gt; &#123;</span><br><span class=\"line\">            RedisSerializer stringRedisSerializer = redisTemplate.getStringSerializer();</span><br><span class=\"line\">            connection.openPipeline();</span><br><span class=\"line\">            Integer length = key.length;</span><br><span class=\"line\">            <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>; i &lt; length; i++) &#123;</span><br><span class=\"line\">                connection.incr(stringRedisSerializer.serialize(key[i]));</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            List&lt;Object&gt; result = connection.closePipeline();</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (<span class=\"keyword\">null</span> == result || result.isEmpty() || result.contains(<span class=\"keyword\">false</span>)) &#123;</span><br><span class=\"line\">                <span class=\"keyword\">return</span> <span class=\"keyword\">false</span>;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"keyword\">true</span>;</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> Long <span class=\"title\">incrBy</span><span class=\"params\">(String key, Long sum)</span> </span>&#123;</span><br><span class=\"line\">        Tools.notNull(key);</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (<span class=\"keyword\">null</span> == sum || sum &lt; <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> RuntimeException();</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> (Long) redisTemplate.execute((RedisCallback&lt;Long&gt;) connection -&gt; &#123;</span><br><span class=\"line\">            RedisSerializer stringRedisSerializer = redisTemplate.getStringSerializer();</span><br><span class=\"line\">            <span class=\"keyword\">return</span> connection.incrBy(stringRedisSerializer.serialize(key), sum);</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> Double <span class=\"title\">incrByFloat</span><span class=\"params\">(String key, Double sum)</span> </span>&#123;</span><br><span class=\"line\">        Tools.notNull(key);</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (<span class=\"keyword\">null</span> == sum || sum &lt; <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> RuntimeException();</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> (Double) redisTemplate.execute((RedisCallback&lt;Double&gt;) connection -&gt; &#123;</span><br><span class=\"line\">            RedisSerializer stringRedisSerializer = redisTemplate.getStringSerializer();</span><br><span class=\"line\">            <span class=\"keyword\">return</span> connection.incrBy(stringRedisSerializer.serialize(key), sum.doubleValue());</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> Long <span class=\"title\">decr</span><span class=\"params\">(String key)</span> </span>&#123;</span><br><span class=\"line\">        Tools.notNull(key);</span><br><span class=\"line\">        <span class=\"keyword\">return</span> (Long) redisTemplate.execute((RedisCallback&lt;Long&gt;) connection -&gt; &#123;</span><br><span class=\"line\">            RedisSerializer stringRedisSerializer = redisTemplate.getStringSerializer();</span><br><span class=\"line\">            <span class=\"keyword\">return</span> connection.decr(stringRedisSerializer.serialize(key));</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> Long <span class=\"title\">decrBy</span><span class=\"params\">(String key, Long sum)</span> </span>&#123;</span><br><span class=\"line\">        Tools.notNull(key);</span><br><span class=\"line\">        <span class=\"keyword\">return</span> (Long) redisTemplate.execute((RedisCallback&lt;Long&gt;) connection -&gt; &#123;</span><br><span class=\"line\">            RedisSerializer stringRedisSerializer = redisTemplate.getStringSerializer();</span><br><span class=\"line\">            <span class=\"keyword\">return</span> connection.decrBy(stringRedisSerializer.serialize(key), sum);</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> Boolean <span class=\"title\">mSet</span><span class=\"params\">(HashMap&lt;String, Object&gt; map)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> mSetNx(map, <span class=\"keyword\">false</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> Boolean <span class=\"title\">mSetNx</span><span class=\"params\">(HashMap&lt;String, Object&gt; map)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> mSetNx(map, <span class=\"keyword\">true</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> List&lt;Object&gt; <span class=\"title\">mGet</span><span class=\"params\">(String[] key)</span> </span>&#123;</span><br><span class=\"line\">        Tools.notNull(key);</span><br><span class=\"line\">        <span class=\"keyword\">return</span> (List&lt;Object&gt;) redisTemplate.execute((RedisCallback&lt;List&lt;Object&gt;&gt;) connection -&gt; &#123;</span><br><span class=\"line\">            RedisSerializer stringRedisSerializer = redisTemplate.getStringSerializer();</span><br><span class=\"line\">            Integer length = key.length;</span><br><span class=\"line\">            <span class=\"keyword\">byte</span>[][] bytes = <span class=\"keyword\">new</span> <span class=\"keyword\">byte</span>[length][];</span><br><span class=\"line\">            <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>; i &lt; length; i++) &#123;</span><br><span class=\"line\">                bytes[i] = stringRedisSerializer.serialize(key[i]);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            List&lt;<span class=\"keyword\">byte</span>[]&gt; list = connection.mGet(bytes);</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (<span class=\"keyword\">null</span> != list || list.size() == <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">                List&lt;Object&gt; result = <span class=\"keyword\">new</span> ArrayList&lt;&gt;();</span><br><span class=\"line\">                length = list.size();</span><br><span class=\"line\">                <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>; i &lt; length; i++) &#123;</span><br><span class=\"line\">                    Object object = stringRedisSerializer.deserialize(list.get(i));</span><br><span class=\"line\">                    result.add(String.valueOf(object));</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">                <span class=\"keyword\">return</span> result;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"keyword\">null</span>;</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * é‡æ„ä¹‹åçš„ä»£ç </span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> map</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> nx</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@return</span></span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">private</span> Boolean <span class=\"title\">mSetNx</span><span class=\"params\">(HashMap&lt;String, Object&gt; map, Boolean nx)</span> </span>&#123;</span><br><span class=\"line\">        Assert.notNull(map, <span class=\"string\">\"map is null\"</span>);</span><br><span class=\"line\">        Assert.notEmpty(map, <span class=\"string\">\"map is empty\"</span>);</span><br><span class=\"line\">        redisTemplate.execute((RedisCallback) connection -&gt; &#123;</span><br><span class=\"line\">            RedisSerializer stringRedisSerializer = redisTemplate.getStringSerializer();</span><br><span class=\"line\">            connection.openPipeline();</span><br><span class=\"line\">            Iterator&lt;Map.Entry&lt;String, Object&gt;&gt; iterator = map.entrySet().iterator();</span><br><span class=\"line\">            String key;</span><br><span class=\"line\">            Object value;</span><br><span class=\"line\">            Map&lt;<span class=\"keyword\">byte</span>[], <span class=\"keyword\">byte</span>[]&gt; tuple = <span class=\"keyword\">new</span> HashMap&lt;&gt;();</span><br><span class=\"line\">            <span class=\"keyword\">while</span> (iterator.hasNext()) &#123;</span><br><span class=\"line\">                Map.Entry&lt;String, Object&gt; entry = iterator.next();</span><br><span class=\"line\">                key = entry.getKey();</span><br><span class=\"line\">                value = entry.getValue();</span><br><span class=\"line\">                Tools.notNull(key, value.toString());</span><br><span class=\"line\">                tuple.put(stringRedisSerializer.serialize(key), stringRedisSerializer.serialize(value));</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (nx) &#123;</span><br><span class=\"line\">                <span class=\"keyword\">if</span> (!tuple.isEmpty()) &#123;</span><br><span class=\"line\">                    <span class=\"keyword\">return</span> connection.mSetNX(tuple);</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">                <span class=\"keyword\">if</span> (!tuple.isEmpty()) &#123;</span><br><span class=\"line\">                    <span class=\"keyword\">return</span> connection.mSet(tuple);</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"keyword\">false</span>;</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">true</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>å•å…ƒæµ‹è¯•</li>\n</ul>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">testRedisString</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">    Assert.assertEquals(<span class=\"keyword\">true</span>, redisString.set(<span class=\"string\">\"key\"</span>, <span class=\"string\">\"value\"</span>));</span><br><span class=\"line\">    Assert.assertEquals(<span class=\"string\">\"value\"</span>, redisString.get(<span class=\"string\">\"key\"</span>));</span><br><span class=\"line\">    HashMap map = <span class=\"keyword\">new</span> HashMap&lt;String, Object&gt;();</span><br><span class=\"line\">    map.put(<span class=\"string\">\"key1\"</span>, <span class=\"string\">\"value1\"</span>);</span><br><span class=\"line\">    map.put(<span class=\"string\">\"key2\"</span>, <span class=\"string\">\"value2\"</span>);</span><br><span class=\"line\">    Assert.assertEquals(<span class=\"keyword\">true</span>, redisString.mSet(map));</span><br><span class=\"line\">    Assert.assertEquals(<span class=\"keyword\">true</span>, redisString.set(<span class=\"string\">\"key3\"</span>, <span class=\"string\">\"1\"</span>));</span><br><span class=\"line\">    Assert.assertEquals(<span class=\"keyword\">true</span>, redisString.set(<span class=\"string\">\"key4\"</span>, <span class=\"string\">\"1\"</span>));</span><br><span class=\"line\">    log.info(<span class=\"string\">\"key3  key4 &#123;&#125;\"</span>, redisString.mGet(<span class=\"keyword\">new</span> String[]&#123;<span class=\"string\">\"key3\"</span>, <span class=\"string\">\"key4\"</span>&#125;));</span><br><span class=\"line\">    log.info(<span class=\"string\">\"key4 incr &#123;&#125; \"</span>, redisString.incr(<span class=\"string\">\"key4\"</span>));</span><br><span class=\"line\">    log.info(<span class=\"string\">\"key4 3 incrBy &#123;&#125; \"</span>, redisString.incrBy(<span class=\"string\">\"key4\"</span>, <span class=\"number\">3L</span>));</span><br><span class=\"line\">    log.info(<span class=\"string\">\"key4 decr &#123;&#125; \"</span>, redisString.decr(<span class=\"string\">\"key4\"</span>));</span><br><span class=\"line\">    log.info(<span class=\"string\">\"key4 2 incrBy &#123;&#125; \"</span>, redisString.incrBy(<span class=\"string\">\"key4\"</span>, <span class=\"number\">2L</span>));</span><br><span class=\"line\">    Set&lt;String&gt; keys = redisTool.keys(<span class=\"string\">\"key*\"</span>);</span><br><span class=\"line\">    keys.forEach(item -&gt; log.info(<span class=\"string\">\" keys -&gt; key &#123;&#125; : value &#123;&#125; \"</span>, item, redisString.get(item)));</span><br><span class=\"line\">    redisString.setEx(<span class=\"string\">\"key1111\"</span>, <span class=\"number\">10L</span>, <span class=\"string\">\"value\"</span>);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>æ—¥å¿—è¾“å‡º</li>\n</ul>\n<figure class=\"highlight verilog\"><table><tr><td class=\"code\"><pre><span class=\"line\">[main] INFO  c<span class=\"variable\">.z</span><span class=\"variable\">.l</span><span class=\"variable\">.r</span><span class=\"variable\">.o</span><span class=\"variable\">.RedisOperatingApplicationTests</span> - key4 incr <span class=\"number\">2</span> </span><br><span class=\"line\">[main] INFO  c<span class=\"variable\">.z</span><span class=\"variable\">.l</span><span class=\"variable\">.r</span><span class=\"variable\">.o</span><span class=\"variable\">.RedisOperatingApplicationTests</span> - key3  key4 [<span class=\"number\">1</span>, <span class=\"number\">2</span>]</span><br><span class=\"line\">[main] INFO  c<span class=\"variable\">.z</span><span class=\"variable\">.l</span><span class=\"variable\">.r</span><span class=\"variable\">.o</span><span class=\"variable\">.RedisOperatingApplicationTests</span> - key4 decr <span class=\"number\">1</span> </span><br><span class=\"line\">[main] INFO  c<span class=\"variable\">.z</span><span class=\"variable\">.l</span><span class=\"variable\">.r</span><span class=\"variable\">.o</span><span class=\"variable\">.RedisOperatingApplicationTests</span> - key4 incrBy <span class=\"number\">4</span> </span><br><span class=\"line\">[main] INFO  c<span class=\"variable\">.z</span><span class=\"variable\">.l</span><span class=\"variable\">.r</span><span class=\"variable\">.o</span><span class=\"variable\">.RedisOperatingApplicationTests</span> -  keys -&gt; key key4 : value <span class=\"number\">4</span> </span><br><span class=\"line\">[main] INFO  c<span class=\"variable\">.z</span><span class=\"variable\">.l</span><span class=\"variable\">.r</span><span class=\"variable\">.o</span><span class=\"variable\">.RedisOperatingApplicationTests</span> -  keys -&gt; key key1 : value value1 </span><br><span class=\"line\">[main] INFO  c<span class=\"variable\">.z</span><span class=\"variable\">.l</span><span class=\"variable\">.r</span><span class=\"variable\">.o</span><span class=\"variable\">.RedisOperatingApplicationTests</span> -  keys -&gt; key key3 : value <span class=\"number\">1</span> </span><br><span class=\"line\">[main] INFO  c<span class=\"variable\">.z</span><span class=\"variable\">.l</span><span class=\"variable\">.r</span><span class=\"variable\">.o</span><span class=\"variable\">.RedisOperatingApplicationTests</span> -  keys -&gt; key key : value value </span><br><span class=\"line\">[main] INFO  c<span class=\"variable\">.z</span><span class=\"variable\">.l</span><span class=\"variable\">.r</span><span class=\"variable\">.o</span><span class=\"variable\">.RedisOperatingApplicationTests</span> -  keys -&gt; key key2 : value value2</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"END\"><a href=\"#END\" class=\"headerlink\" title=\"END\"></a>END</h3>","categories":["å®è·µ"],"tags":["Redis","Java","Spring"]},{"title":"å®è·µ-spring-redis","url":"/posts/1727217107/","content":"<blockquote>\n<p>æœ¬ç« æ˜¯æ•´ç†çŸ¥è¯†å†…å®¹ï¼Œä¸ºå¼ºåŒ–çŸ¥è¯†é•¿æœŸæ›´æ–°ã€‚</p>\n</blockquote>\n<h3 id=\"spring-redis\"><a href=\"#spring-redis\" class=\"headerlink\" title=\"spring-redis\"></a>spring-redis</h3><blockquote>\n<p>ä¸ºåç»­å•å…ƒæµ‹è¯•æ­å»ºç¯å¢ƒã€‚</p>\n<p>æ³¨æ„æ­å»ºå¥½redisç¯å¢ƒã€‚</p>\n<p>é¡¹ç›®åœ°å€:<a href=\"https://github.com/z201/z201.github.io.code/tree/master/demonstration-project/redis-operating\" target=\"_blank\" rel=\"noopener\">redis-operating</a></p>\n</blockquote>\n<ul>\n<li>pom</li>\n</ul>\n<figure class=\"highlight xml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">project</span> <span class=\"attr\">xmlns</span>=<span class=\"string\">\"http://maven.apache.org/POM/4.0.0\"</span> <span class=\"attr\">xmlns:xsi</span>=<span class=\"string\">\"http://www.w3.org/2001/XMLSchema-instance\"</span></span></span><br><span class=\"line\"><span class=\"tag\">         <span class=\"attr\">xsi:schemaLocation</span>=<span class=\"string\">\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\"</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">modelVersion</span>&gt;</span>4.0.0<span class=\"tag\">&lt;/<span class=\"name\">modelVersion</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">parent</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>org.springframework.boot<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>spring-boot-starter-parent<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>2.1.3.RELEASE<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">relativePath</span>/&gt;</span> <span class=\"comment\">&lt;!-- lookup parent from repository --&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">parent</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>cn.z201.learning.redis<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>redis-operating<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>0.0.1-SNAPSHOT<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">name</span>&gt;</span>redis-operating<span class=\"tag\">&lt;/<span class=\"name\">name</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">description</span>&gt;</span>Demo project for Spring Boot<span class=\"tag\">&lt;/<span class=\"name\">description</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">properties</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">junit.version</span>&gt;</span>4.12<span class=\"tag\">&lt;/<span class=\"name\">junit.version</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">java.version</span>&gt;</span>1.8<span class=\"tag\">&lt;/<span class=\"name\">java.version</span>&gt;</span></span><br><span class=\"line\">        <span class=\"comment\">&lt;!-- pomæ–‡ä»¶éœ€è¦æŒ‡å®šæ‰“åŒ…ç¼–ç é›†ï¼Œ[WARNING] File encoding has not been set, using platform encoding GBK, i.e. build is platform dependent!  --&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">project.build.sourceEncoding</span>&gt;</span>UTF-8<span class=\"tag\">&lt;/<span class=\"name\">project.build.sourceEncoding</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">properties</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">dependencies</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>org.springframework.boot<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>spring-boot-starter<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>org.springframework.boot<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>spring-boot-starter-data-redis<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>org.springframework.boot<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>spring-boot-starter-test<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">scope</span>&gt;</span>test<span class=\"tag\">&lt;/<span class=\"name\">scope</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>org.apache.commons<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>commons-pool2<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>2.0<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>org.projectlombok<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>lombok<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">dependencies</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">build</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">plugins</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">plugin</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>org.springframework.boot<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>spring-boot-maven-plugin<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;/<span class=\"name\">plugin</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">plugin</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>org.apache.maven.plugins<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>maven-compiler-plugin<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>3.8.0<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">configuration</span>&gt;</span></span><br><span class=\"line\">                    <span class=\"tag\">&lt;<span class=\"name\">source</span>&gt;</span>8<span class=\"tag\">&lt;/<span class=\"name\">source</span>&gt;</span></span><br><span class=\"line\">                    <span class=\"tag\">&lt;<span class=\"name\">target</span>&gt;</span>8<span class=\"tag\">&lt;/<span class=\"name\">target</span>&gt;</span></span><br><span class=\"line\">                    <span class=\"tag\">&lt;<span class=\"name\">encoding</span>&gt;</span>$&#123;project.build.sourceEncoding&#125;<span class=\"tag\">&lt;/<span class=\"name\">encoding</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;/<span class=\"name\">configuration</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;/<span class=\"name\">plugin</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">plugins</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">build</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">project</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>ç¼–å†™æ¥å£</li>\n</ul>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> cn.z201.learning.redis.operating.service;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> java.util.Set;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@author</span> z201.coding@gmail.com</span></span><br><span class=\"line\"><span class=\"comment\"> **/</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">interface</span> <span class=\"title\">RedisToolI</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * è·å–keyå­—èŠ‚æ•°ç»„ç»“æ„</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> pattern</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@return</span></span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"function\">Set&lt;String&gt; <span class=\"title\">keys</span><span class=\"params\">(String pattern)</span></span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * åˆ é™¤key</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> key</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@return</span></span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"function\">Boolean <span class=\"title\">del</span><span class=\"params\">(String key)</span></span>;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>æ¥å£å®ç°</li>\n</ul>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> cn.z201.learning.redis.operating.service.impl;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> cn.z201.learning.redis.operating.service.RedisToolI;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.springframework.data.redis.core.RedisCallback;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.springframework.data.redis.core.RedisTemplate;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.springframework.data.redis.serializer.RedisSerializer;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.springframework.stereotype.Service;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> java.util.LinkedHashSet;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.util.Set;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@author</span> z201.coding@gmail.com</span></span><br><span class=\"line\"><span class=\"comment\"> **/</span></span><br><span class=\"line\"><span class=\"meta\">@Service</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">RedisToolImpl</span> <span class=\"keyword\">implements</span> <span class=\"title\">RedisToolI</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Autowired</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> RedisTemplate redisTemplate;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> Set&lt;String&gt; <span class=\"title\">keys</span><span class=\"params\">(String pattern)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> (Set) redisTemplate.execute((RedisCallback&lt;Set&gt;) connection -&gt; &#123;</span><br><span class=\"line\">            RedisSerializer&lt;String&gt; stringRedisSerializer = redisTemplate.getStringSerializer();</span><br><span class=\"line\">            Set&lt;<span class=\"keyword\">byte</span>[]&gt; sets = connection.keys(stringRedisSerializer.serialize(pattern));</span><br><span class=\"line\">            Set keys = <span class=\"keyword\">new</span> LinkedHashSet&lt;String&gt;();</span><br><span class=\"line\">            sets.forEach(item -&gt; keys.add(stringRedisSerializer.deserialize(item)));</span><br><span class=\"line\">            <span class=\"keyword\">return</span> keys;</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> Boolean <span class=\"title\">del</span><span class=\"params\">(String key)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> (Boolean) redisTemplate.execute((RedisCallback&lt;Boolean&gt;) connection -&gt; &#123;</span><br><span class=\"line\">            RedisSerializer&lt;String&gt; stringRedisSerializer = redisTemplate.getStringSerializer();</span><br><span class=\"line\">            Long status = connection.del(stringRedisSerializer.serialize(key));</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (<span class=\"number\">1</span> == status) &#123;</span><br><span class=\"line\">                <span class=\"keyword\">return</span> <span class=\"keyword\">true</span>;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"keyword\">false</span>;</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>å•å…ƒæµ‹è¯•</li>\n</ul>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\">   <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">testRedisTool</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">       Set&lt;String&gt; keys = redisTool.keys(<span class=\"string\">\"*\"</span>);</span><br><span class=\"line\">       log.info(<span class=\"string\">\"size -&gt; &#123;&#125; \"</span>, keys.size());</span><br><span class=\"line\">       keys.forEach(item -&gt; log.info(<span class=\"string\">\" keys - &gt; &#123;&#125; \"</span>, item));</span><br><span class=\"line\">       <span class=\"keyword\">if</span> (!keys.isEmpty()) &#123;</span><br><span class=\"line\">           log.info(<span class=\"string\">\"éšæœºåˆ é™¤ä¸€ä¸ª\"</span>);</span><br><span class=\"line\">           redisTool.del(keys.iterator().next());</span><br><span class=\"line\">           keys = redisTool.keys(<span class=\"string\">\"*\"</span>);</span><br><span class=\"line\">           log.info(<span class=\"string\">\"size -&gt; &#123;&#125; \"</span>, keys.size());</span><br><span class=\"line\">           keys.forEach(item -&gt; log.info(<span class=\"string\">\" keys - &gt; &#123;&#125; \"</span>, item));</span><br><span class=\"line\">       &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">           log.info(<span class=\"string\">\"å·²ç»æ²¡æœ‰keyäº†\"</span>);</span><br><span class=\"line\">       &#125;</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">   <span class=\"meta\">@Test</span></span><br><span class=\"line\">   <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">testDelKey</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">       Set&lt;String&gt; keys = redisTool.keys(<span class=\"string\">\"*\"</span>);</span><br><span class=\"line\">       log.info(<span class=\"string\">\"size -&gt; &#123;&#125; \"</span>, keys.size());</span><br><span class=\"line\">       keys.forEach(item -&gt;</span><br><span class=\"line\">               redisTool.del(item));</span><br><span class=\"line\">       keys = redisTool.keys(<span class=\"string\">\"*\"</span>);</span><br><span class=\"line\">       <span class=\"keyword\">if</span> (!keys.isEmpty()) &#123;</span><br><span class=\"line\">           log.info(<span class=\"string\">\"size -&gt; &#123;&#125; \"</span>, keys.size());</span><br><span class=\"line\">           keys.forEach(item -&gt; log.info(<span class=\"string\">\" keys - &gt; &#123;&#125; \"</span>, item));</span><br><span class=\"line\">       &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">           log.info(<span class=\"string\">\"å·²ç»æ²¡æœ‰keyäº†\"</span>);</span><br><span class=\"line\">       &#125;</span><br><span class=\"line\">   &#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>åœ¨redisä¸­æ·»åŠ æ•°æ®</li>\n</ul>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">192.168.31.7:6379&gt; <span class=\"built_in\">set</span> key value</span><br><span class=\"line\">OK</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>è¿è¡Œå•å…ƒæµ‹è¯•<code>testRedisTool</code></li>\n</ul>\n<figure class=\"highlight verilog\"><table><tr><td class=\"code\"><pre><span class=\"line\">[main] INFO  io<span class=\"variable\">.lettuce</span><span class=\"variable\">.core</span><span class=\"variable\">.EpollProvider</span> - Starting without optional epoll <span class=\"keyword\">library</span></span><br><span class=\"line\">[main] INFO  io<span class=\"variable\">.lettuce</span><span class=\"variable\">.core</span><span class=\"variable\">.KqueueProvider</span> - Starting without optional kqueue <span class=\"keyword\">library</span></span><br><span class=\"line\">[main] INFO  c<span class=\"variable\">.z</span><span class=\"variable\">.l</span><span class=\"variable\">.r</span><span class=\"variable\">.o</span><span class=\"variable\">.RedisOperatingApplicationTests</span> - size -&gt; <span class=\"number\">1</span> </span><br><span class=\"line\">[main] INFO  c<span class=\"variable\">.z</span><span class=\"variable\">.l</span><span class=\"variable\">.r</span><span class=\"variable\">.o</span><span class=\"variable\">.RedisOperatingApplicationTests</span> -  keys - &gt; key </span><br><span class=\"line\">[main] INFO  c<span class=\"variable\">.z</span><span class=\"variable\">.l</span><span class=\"variable\">.r</span><span class=\"variable\">.o</span><span class=\"variable\">.RedisOperatingApplicationTests</span> - éšæœºåˆ é™¤ä¸€ä¸ª</span><br><span class=\"line\">[main] INFO  c<span class=\"variable\">.z</span><span class=\"variable\">.l</span><span class=\"variable\">.r</span><span class=\"variable\">.o</span><span class=\"variable\">.RedisOperatingApplicationTests</span> - size -&gt; <span class=\"number\">0</span></span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>å•å…ƒæµ‹è¯•<code>testDelKey</code>å°±ä¸æµ‹è¯•äº†ã€‚</li>\n</ul>\n<h3 id=\"END\"><a href=\"#END\" class=\"headerlink\" title=\"END\"></a>END</h3>","categories":["å®è·µ"],"tags":["Redis","Java","Spring"]},{"title":"Docker-Zookeeper","url":"/posts/3958923991/","content":"<blockquote>\n<p>æœ¬ç« æ˜¯æ•´ç†çŸ¥è¯†å†…å®¹ï¼Œä¸ºå¼ºåŒ–çŸ¥è¯†é•¿æœŸæ›´æ–°ã€‚</p>\n</blockquote>\n<h3 id=\"dockeræŸ¥æ‰¾é•œåƒ\"><a href=\"#dockeræŸ¥æ‰¾é•œåƒ\" class=\"headerlink\" title=\"dockeræŸ¥æ‰¾é•œåƒ\"></a>dockeræŸ¥æ‰¾é•œåƒ</h3><p><code>docker search zookeeper</code></p>\n<p><img src=\"https://z201.oss-cn-shanghai.aliyuncs.com/JavaNote/Docker/docker-search-zookeeper.png\"></p>\n<h3 id=\"docker-æ‹‰å»é•œåƒ\"><a href=\"#docker-æ‹‰å»é•œåƒ\" class=\"headerlink\" title=\"docker æ‹‰å»é•œåƒ\"></a>docker æ‹‰å»é•œåƒ</h3><p><code>docker pull zookeeper</code>  ç›´æ¥æ‹‰å»å®˜æ–¹çš„é•œåƒï¼Œä¸€èˆ¬ç¬¬ä¸€ä¸ªå°±æ˜¯ã€‚</p>\n<p><img src=\"https://z201.oss-cn-shanghai.aliyuncs.com/JavaNote/Docker/docker-pull-zookeeper.png\"></p>\n<h3 id=\"dockerå¯åŠ¨zookeeper\"><a href=\"#dockerå¯åŠ¨zookeeper\" class=\"headerlink\" title=\"dockerå¯åŠ¨zookeeper\"></a>dockerå¯åŠ¨zookeeper</h3><p><code>docker run -p 2181:2181 -v $PWD/zookeeper/data:/data  -d zookeeper:latest </code></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">-p 2181:2181ï¼šå°†å®¹å™¨çš„2181ç«¯å£æ˜ å°„æˆä¸»æœºçš„2181ç«¯å£</span><br><span class=\"line\">-v <span class=\"variable\">$PWD</span>/zookeeper/data:/data :å°†ä¸»æœºä¸­å½“å‰ç›®å½•ä¸‹çš„dataæŒ‚è½½åˆ°å®¹å™¨çš„/data</span><br></pre></td></tr></table></figure>\n\n<p><img src=\"https://z201.oss-cn-shanghai.aliyuncs.com/JavaNote/Docker/docker-zookeeper-ps.png\"></p>\n<ul>\n<li>è¿™é‡Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œæœ¬æœºæœ‰å¤šzookeeperçš„æ—¶å€™ï¼Œä¸è¦éƒ½æŒ‚è½½åˆ°ä¸€èµ·äº†ã€‚</li>\n</ul>\n<h3 id=\"è¿›å…¥è¿è¡Œå®¹å™¨ä¸­\"><a href=\"#è¿›å…¥è¿è¡Œå®¹å™¨ä¸­\" class=\"headerlink\" title=\"è¿›å…¥è¿è¡Œå®¹å™¨ä¸­\"></a>è¿›å…¥è¿è¡Œå®¹å™¨ä¸­</h3><p><code>docker exec -it 3f6a8c213504 /bin/bash</code></p>\n<ul>\n<li><p>3f6a8c213504 æ˜¯zookeeperè¿è¡Œå®¹å™¨çš„ID</p>\n<p><img src=\"https://z201.oss-cn-shanghai.aliyuncs.com/JavaNote/Docker/docker-exec-zookeeper.png\"></p>\n</li>\n</ul>\n<h2 id=\"END\"><a href=\"#END\" class=\"headerlink\" title=\"END\"></a>END</h2>","categories":["Docker"],"tags":["Zookeeper","Docker"]},{"title":"Docker-Redis","url":"/posts/1265826095/","content":"<blockquote>\n<p>æœ¬ç« æ˜¯æ•´ç†çŸ¥è¯†å†…å®¹ï¼Œä¸ºå¼ºåŒ–çŸ¥è¯†é•¿æœŸæ›´æ–°ã€‚</p>\n</blockquote>\n<h2 id=\"Dockerç¯å¢ƒä¸‹éƒ¨ç½²redis\"><a href=\"#Dockerç¯å¢ƒä¸‹éƒ¨ç½²redis\" class=\"headerlink\" title=\"Dockerç¯å¢ƒä¸‹éƒ¨ç½²redis\"></a>Dockerç¯å¢ƒä¸‹éƒ¨ç½²redis</h2><h3 id=\"ç¡®è®¤å·²ç»å®‰è£…å¥½äº†Dockerç¯å¢ƒ\"><a href=\"#ç¡®è®¤å·²ç»å®‰è£…å¥½äº†Dockerç¯å¢ƒ\" class=\"headerlink\" title=\"ç¡®è®¤å·²ç»å®‰è£…å¥½äº†Dockerç¯å¢ƒ\"></a>ç¡®è®¤å·²ç»å®‰è£…å¥½äº†Dockerç¯å¢ƒ</h3><blockquote>\n<p> windows å’Œ  linux å¯ä»¥ç”¨ docker infoæ£€æŸ¥æ˜¯å¦å®‰è£…</p>\n</blockquote>\n<p><img src=\"https://z201.oss-cn-shanghai.aliyuncs.com/JavaNote/Docker/docker.png\"></p>\n<ul>\n<li>åœ¨macä¸‹å°±æ˜¯è¿™ä¹ˆä¸ªæƒ…å†µã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè¯·ä¸ç”¨ä½¿ç”¨emailç™»å½•ï¼Œå¦åˆ™åœ¨æŸ¥æ‰¾å®˜æ–¹é•œåƒçš„æ—¶å€™ä¼šæŠ›å‡ºè®¤è¯å¤±è´¥çš„é—®é¢˜ã€‚æ¯”å¦‚æˆ‘æ˜¯ç™»å½•ç”¨æˆ·<code>z201</code></li>\n</ul>\n<a id=\"more\"></a>\n\n<h3 id=\"dockeræŸ¥æ‰¾é•œåƒ\"><a href=\"#dockeræŸ¥æ‰¾é•œåƒ\" class=\"headerlink\" title=\"dockeræŸ¥æ‰¾é•œåƒ\"></a>dockeræŸ¥æ‰¾é•œåƒ</h3><p><code>docker search redis</code></p>\n<p><img src=\"https://z201.oss-cn-shanghai.aliyuncs.com/JavaNote/Docker/docker-search-redis.png\"></p>\n<h3 id=\"docker-æ‹‰å»é•œåƒ\"><a href=\"#docker-æ‹‰å»é•œåƒ\" class=\"headerlink\" title=\"docker æ‹‰å»é•œåƒ\"></a>docker æ‹‰å»é•œåƒ</h3><p><code>docker pull redis</code>  ç›´æ¥æ‹‰å»å®˜æ–¹çš„é•œåƒï¼Œä¸€èˆ¬ç¬¬ä¸€ä¸ªå°±æ˜¯ã€‚</p>\n<p><img src=\"https://z201.oss-cn-shanghai.aliyuncs.com/JavaNote/Docker/docker-pull-redis.png\"></p>\n<h3 id=\"dockerå¯åŠ¨redis\"><a href=\"#dockerå¯åŠ¨redis\" class=\"headerlink\" title=\"dockerå¯åŠ¨redis\"></a>dockerå¯åŠ¨redis</h3><p><code>docker run -p 6379:6379 -v $PWD/data:/data  -d redis:latest redis-server --appendonly yes</code></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">-p 6379:6379ï¼šå°†å®¹å™¨çš„6379ç«¯å£æ˜ å°„æˆä¸»æœºçš„6379ç«¯å£</span><br><span class=\"line\">-v <span class=\"variable\">$PWD</span>/data:/data :å°†ä¸»æœºä¸­å½“å‰ç›®å½•ä¸‹çš„dataæŒ‚è½½åˆ°å®¹å™¨çš„/data</span><br><span class=\"line\">redis-server --appendonly yes : åœ¨å®¹å™¨æ‰§è¡Œredis-serverå¯åŠ¨å‘½ä»¤ï¼Œå¹¶æ‰“å¼€redisæŒä¹…åŒ–é…ç½®</span><br></pre></td></tr></table></figure>\n\n<p><img src=\"https://z201.oss-cn-shanghai.aliyuncs.com/JavaNote/Docker/docker-redis-ps.png\"></p>\n<ul>\n<li>è¿™é‡Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå¦‚æœä½ æœ¬åœ°æœ‰å¾ˆå¤šçš„rediså®¹å™¨åœ¨è·‘ï¼Œä¸è¦éƒ½æŒ‚è½½åˆ°ä¸€èµ·äº†ã€‚</li>\n</ul>\n<h3 id=\"è¿›å…¥redisè¿è¡Œå®¹å™¨ä¸­\"><a href=\"#è¿›å…¥redisè¿è¡Œå®¹å™¨ä¸­\" class=\"headerlink\" title=\"è¿›å…¥redisè¿è¡Œå®¹å™¨ä¸­\"></a>è¿›å…¥redisè¿è¡Œå®¹å™¨ä¸­</h3><p><code>docker run -it redis:latest redis-cli -h 192.168.31.7</code></p>\n<ul>\n<li><p>è¿™é‡Œä½¿ç”¨redis-cli è¿æ¥redis ã€‚æ³¨æ„ä¸‹è¿™é‡Œçš„ipï¼Œæ˜¯ä½ æœ¬æœºçš„ipã€‚</p>\n<p><img src=\"https://z201.oss-cn-shanghai.aliyuncs.com/JavaNote/Docker/docker-redis-cli.png\"></p>\n</li>\n<li><p>Redis <code>Keys</code> å‘½ä»¤ç”¨äºæŸ¥æ‰¾æ‰€æœ‰ç¬¦åˆç»™å®šæ¨¡å¼ pattern çš„ key ,è¿™é‡Œå¯ä»¥çœ‹åˆ°redisç›®å‰æ˜¯ç©ºçš„ã€‚</p>\n</li>\n</ul>\n<h2 id=\"END\"><a href=\"#END\" class=\"headerlink\" title=\"END\"></a>END</h2>","categories":["Docker"],"tags":["Redis","Docker"]},{"title":"å®è·µ-spring-boot-dubbo","url":"/posts/2696067944/","content":"<blockquote>\n<p>ç¦»èŒä¸¤ä¸ªæœˆï¼Œå¤ªä¹…æ²¡å†™é¡¹ç›®äº†ï¼Œé‡æ–°æ¸©æ•…ä¸‹ã€‚</p>\n</blockquote>\n<ul>\n<li><p>è¿™é‡Œçš„ä»£ç æ˜¯æœ€ç®€å•çš„æ¼”ç¤ºæ•ˆæœã€‚</p>\n</li>\n<li><p>é¡¹ç›®ä¸‹è½½åœ°å€ <code>git cloen -b v1.0.0 https://github.com/z201/learning-spring-dubbo-micro-service.git</code></p>\n</li>\n<li><p><code>v1.0.0</code>åˆ†æ”¯dubbo xml é…ç½®æ¼”ç¤ºåŸºäºzkåšæ³¨å†Œä¸­å¿ƒã€‚</p>\n</li>\n<li><p><code>v2.0.0</code>åˆ†æ”¯dubbo annotation é…ç½®æ¼”ç¤ºåŸºäºzkåšæ³¨å†Œä¸­å¿ƒã€‚</p>\n</li>\n<li><p><code>v3.0.0</code>åˆ†æ”¯dubbo xml é…ç½®æ¼”ç¤ºåŸºäºnacosåšæ³¨å†Œä¸­å¿ƒã€‚</p>\n</li>\n</ul>\n<h3 id=\"é¡¹ç›®æ¨¡å—\"><a href=\"#é¡¹ç›®æ¨¡å—\" class=\"headerlink\" title=\"é¡¹ç›®æ¨¡å—\"></a>é¡¹ç›®æ¨¡å—</h3><ul>\n<li>ç°åœ¨æ¼”ç¤ºçš„<code>v1.0.0</code>çš„ä»£ç </li>\n</ul>\n<figure class=\"highlight xml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">modules</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">module</span>&gt;</span>dubbo-micro-service-consumer<span class=\"tag\">&lt;/<span class=\"name\">module</span>&gt;</span>  // æ¶ˆè´¹è€…</span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">module</span>&gt;</span>dubbo-micro-service-provider<span class=\"tag\">&lt;/<span class=\"name\">module</span>&gt;</span>  // ç”Ÿäº§è€…</span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">module</span>&gt;</span>dubbo-micro-service-zookeeper<span class=\"tag\">&lt;/<span class=\"name\">module</span>&gt;</span> // æ³¨å†Œä¸­å¿ƒ</span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">module</span>&gt;</span>dubbo-micro-service-api<span class=\"tag\">&lt;/<span class=\"name\">module</span>&gt;</span>       // å…¬ç”¨api</span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">modules</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<a id=\"more\"></a>\n\n<ul>\n<li>ç›¸å…³ä¾èµ–å¤„ç†,ä¸»è¦æ˜¯å¤„ç†ä¸€ä¸ªlogè¾“å‡ºçš„é—®é¢˜</li>\n</ul>\n<figure class=\"highlight xml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">&lt;!-- æ’é™¤æ‰ zkclient ã€Zookeeperã€ dubbo log4j ä½¿ç”¨slf4j --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>org.slf4j<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>log4j-over-slf4j<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>1.7.25<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>com.alibaba<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>dubbo<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>2.6.0<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">exclusions</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">exclusion</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>org.springframework<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>spring-context<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">exclusion</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">exclusion</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>org.springframework<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>spring-beans<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">exclusion</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">exclusion</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>org.springframework<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>spring-web<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">exclusion</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">exclusion</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>org.jboss.netty<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>netty<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">exclusion</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">exclusion</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>log4j<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>log4j<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">exclusion</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">exclusions</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>com.101tec<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>zkclient<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>0.2<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">exclusions</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">exclusion</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>log4j<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>log4j<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">exclusion</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">exclusions</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">&lt;!-- Zookeeper --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>org.apache.zookeeper<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>zookeeper<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>3.4.13<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">exclusions</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">exclusion</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>log4j<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>log4j<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">exclusion</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">exclusion</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>org.slf4j<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>slf4j-log4j12<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">exclusion</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">exclusions</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"dubbo-micro-service-api\"><a href=\"#dubbo-micro-service-api\" class=\"headerlink\" title=\"dubbo-micro-service-api\"></a>dubbo-micro-service-api</h3><figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> cn.z201.io.api;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * Demo Service interface</span></span><br><span class=\"line\"><span class=\"comment\"> *</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@author</span> zengqingfeng</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@since</span> 2.7.0</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">interface</span> <span class=\"title\">DefaultDemoServiceI</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * æµ‹è¯•</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> name</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@return</span></span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"function\">String <span class=\"title\">sayHello</span><span class=\"params\">(String name)</span></span>;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"dubbo-micro-service-consumer\"><a href=\"#dubbo-micro-service-consumer\" class=\"headerlink\" title=\"dubbo-micro-service-consumer\"></a>dubbo-micro-service-consumer</h3><figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> cn.z201.io.learning.rpc.micro.consumer;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> cn.z201.io.api.DefaultDemoServiceI;</span><br><span class=\"line\"><span class=\"keyword\">import</span> lombok.extern.slf4j.Slf4j;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.springframework.web.bind.annotation.RequestMapping;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.springframework.web.bind.annotation.RestController;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@author</span> z201.coding@gmail.com</span></span><br><span class=\"line\"><span class=\"comment\"> **/</span></span><br><span class=\"line\"><span class=\"meta\">@RestController</span></span><br><span class=\"line\"><span class=\"meta\">@Slf</span>4j</span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ApiController</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Autowired</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> DefaultDemoServiceI defaultDemoService;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@RequestMapping</span>(value = <span class=\"string\">\"\"</span>)</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> String <span class=\"title\">runner</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> defaultDemoService.sayHello(<span class=\"string\">\"consumer\"</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">package</span> cn.z201.io.learning.rpc.micro.consumer;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> lombok.extern.slf4j.Slf4j;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.springframework.boot.SpringApplication;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.springframework.boot.autoconfigure.SpringBootApplication;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.springframework.context.annotation.ImportResource;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@author</span> z201.coding@gmail.com</span></span><br><span class=\"line\"><span class=\"comment\"> **/</span></span><br><span class=\"line\"><span class=\"meta\">@SpringBootApplication</span></span><br><span class=\"line\"><span class=\"meta\">@Slf</span>4j</span><br><span class=\"line\"><span class=\"meta\">@ImportResource</span>(value = &#123;</span><br><span class=\"line\">        <span class=\"string\">\"classpath:dubbo-consumer.xml\"</span></span><br><span class=\"line\">&#125;)</span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">AppConsumerMain</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String[] args)</span> </span>&#123;</span><br><span class=\"line\">        System.setProperty(<span class=\"string\">\"dubbo.application.logger\"</span>,<span class=\"string\">\"slf4j\"</span>);</span><br><span class=\"line\">        SpringApplication.run(AppConsumerMain<span class=\"class\">.<span class=\"keyword\">class</span>, <span class=\"title\">args</span>)</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>é…ç½®æ–‡ä»¶</li>\n</ul>\n<figure class=\"highlight yaml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">server:</span></span><br><span class=\"line\">  <span class=\"attr\">port:</span> <span class=\"number\">8001</span></span><br><span class=\"line\">  <span class=\"attr\">compression:</span></span><br><span class=\"line\">    <span class=\"attr\">enabled:</span> <span class=\"literal\">true</span></span><br><span class=\"line\">    <span class=\"attr\">min-response-size:</span> <span class=\"number\">1</span></span><br><span class=\"line\"><span class=\"comment\"># undertow</span></span><br><span class=\"line\">  <span class=\"attr\">undertow:</span></span><br><span class=\"line\">    <span class=\"attr\">worker-threads:</span> <span class=\"number\">20</span></span><br><span class=\"line\">    <span class=\"attr\">buffer-size:</span> <span class=\"number\">512</span></span><br><span class=\"line\">    <span class=\"attr\">io-threads:</span> <span class=\"number\">2</span></span><br><span class=\"line\">    <span class=\"attr\">access-log:</span></span><br><span class=\"line\">      <span class=\"attr\">enabled:</span> <span class=\"literal\">true</span></span><br><span class=\"line\">      <span class=\"attr\">dir:</span> <span class=\"string\">target/logs</span></span><br><span class=\"line\">      <span class=\"attr\">pattern:</span> <span class=\"string\">combined</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"attr\">spring:</span></span><br><span class=\"line\">  <span class=\"attr\">name:</span> <span class=\"string\">consumer-spring-boot-starter</span></span><br><span class=\"line\">  <span class=\"attr\">devtools:</span></span><br><span class=\"line\">    <span class=\"attr\">restart:</span></span><br><span class=\"line\">      <span class=\"attr\">enabled:</span> <span class=\"literal\">true</span></span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight xml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">beans</span> <span class=\"attr\">xmlns</span>=<span class=\"string\">\"http://www.springframework.org/schema/beans\"</span></span></span><br><span class=\"line\"><span class=\"tag\">       <span class=\"attr\">xmlns:xsi</span>=<span class=\"string\">\"http://www.w3.org/2001/XMLSchema-instance\"</span> <span class=\"attr\">xmlns:dubbo</span>=<span class=\"string\">\"http://code.alibabatech.com/schema/dubbo\"</span></span></span><br><span class=\"line\"><span class=\"tag\">       <span class=\"attr\">xsi:schemaLocation</span>=<span class=\"string\">\"http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd http://code.alibabatech.com/schema/dubbo http://code.alibabatech.com/schema/dubbo/dubbo.xsd\"</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">dubbo:application</span> <span class=\"attr\">name</span>=<span class=\"string\">\"consumer-spring-boot-starter\"</span>/&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">dubbo:consumer</span> <span class=\"attr\">timeout</span>=<span class=\"string\">\"5000\"</span> /&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">dubbo:registry</span> <span class=\"attr\">address</span>=<span class=\"string\">\"zookeeper://127.0.0.1:2181\"</span> <span class=\"attr\">check</span>=<span class=\"string\">\"false\"</span>/&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">dubbo:reference</span> <span class=\"attr\">id</span>=<span class=\"string\">\"defaultDemoServiceI\"</span> <span class=\"attr\">interface</span>=<span class=\"string\">\"cn.z201.io.api.DefaultDemoServiceI\"</span> <span class=\"attr\">check</span>=<span class=\"string\">\"false\"</span>/&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"dubbo-micro-service-provider\"><a href=\"#dubbo-micro-service-provider\" class=\"headerlink\" title=\"dubbo-micro-service-provider\"></a>dubbo-micro-service-provider</h3><figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">package</span> cn.z201.io.learning.rpc.micro.provider.service;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> cn.z201.io.api.DefaultDemoServiceI;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.springframework.beans.factory.annotation.Value;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * Default &#123;<span class=\"doctag\">@link</span> DefaultDemoServiceImpl&#125;</span></span><br><span class=\"line\"><span class=\"comment\"> *</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@author</span> zengqingfeng</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@see</span> DefaultDemoServiceImpl</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@since</span> 2.7.0</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">DefaultDemoServiceImpl</span> <span class=\"keyword\">implements</span> <span class=\"title\">DefaultDemoServiceI</span></span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * The default value of $&#123;dubbo.application.name&#125; is $&#123;spring.application.name&#125;</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"meta\">@Value</span>(<span class=\"string\">\"$&#123;spring.name&#125;\"</span>)</span><br><span class=\"line\">    <span class=\"keyword\">private</span> String serviceName;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> String <span class=\"title\">sayHello</span><span class=\"params\">(String name)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> String.format(<span class=\"string\">\"[%s] : Hello, %s\"</span>, serviceName, name);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">package</span> cn.z201.io.learning.rpc.micro.provider;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> lombok.extern.slf4j.Slf4j;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.springframework.boot.SpringApplication;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.springframework.boot.autoconfigure.SpringBootApplication;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.springframework.context.annotation.ImportResource;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> java.io.IOException;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@author</span> z201.coding@gmail.com</span></span><br><span class=\"line\"><span class=\"comment\"> **/</span></span><br><span class=\"line\"><span class=\"meta\">@SpringBootApplication</span></span><br><span class=\"line\"><span class=\"meta\">@ImportResource</span>(value = &#123;</span><br><span class=\"line\">        <span class=\"string\">\"classpath:dubbo-provider.xml\"</span></span><br><span class=\"line\">&#125;)</span><br><span class=\"line\"><span class=\"meta\">@Slf</span>4j</span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">AppProviderMain</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String[] args)</span> </span>&#123;</span><br><span class=\"line\">        System.setProperty(<span class=\"string\">\"dubbo.application.logger\"</span>,<span class=\"string\">\"slf4j\"</span>);</span><br><span class=\"line\">        SpringApplication.run(AppProviderMain<span class=\"class\">.<span class=\"keyword\">class</span>, <span class=\"title\">args</span>)</span>;</span><br><span class=\"line\">        <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">            System.in.read(); <span class=\"comment\">// æ²¡æœ‰ä½¿ç”¨httpå®¹å™¨å¯åŠ¨ï¼Œé˜²æ­¢ç¨‹åºç›´æ¥è¿è¡Œç»“æŸã€‚</span></span><br><span class=\"line\">        &#125; <span class=\"keyword\">catch</span> (IOException e) &#123;</span><br><span class=\"line\">            e.printStackTrace();</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>é…ç½®æ–‡ä»¶</li>\n</ul>\n<figure class=\"highlight yaml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">spring:</span></span><br><span class=\"line\">  <span class=\"attr\">name:</span> <span class=\"string\">provider-spring-boot-starter</span></span><br><span class=\"line\">  <span class=\"attr\">devtools:</span></span><br><span class=\"line\">    <span class=\"attr\">restart:</span></span><br><span class=\"line\">      <span class=\"attr\">enabled:</span> <span class=\"literal\">true</span></span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight xml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">beans</span> <span class=\"attr\">xmlns</span>=<span class=\"string\">\"http://www.springframework.org/schema/beans\"</span></span></span><br><span class=\"line\"><span class=\"tag\">       <span class=\"attr\">xmlns:xsi</span>=<span class=\"string\">\"http://www.w3.org/2001/XMLSchema-instance\"</span> <span class=\"attr\">xmlns:dubbo</span>=<span class=\"string\">\"http://code.alibabatech.com/schema/dubbo\"</span></span></span><br><span class=\"line\"><span class=\"tag\">       <span class=\"attr\">xsi:schemaLocation</span>=<span class=\"string\">\"http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd http://code.alibabatech.com/schema/dubbo http://code.alibabatech.com/schema/dubbo/dubbo.xsd\"</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">dubbo:application</span> <span class=\"attr\">name</span>=<span class=\"string\">\"provider-spring-boot-starter\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">dubbo:application</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">dubbo:registry</span> <span class=\"attr\">address</span>=<span class=\"string\">\"zookeeper://127.0.0.1:2181\"</span>/&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">dubbo:protocol</span> <span class=\"attr\">name</span>=<span class=\"string\">\"dubbo\"</span> <span class=\"attr\">port</span>=<span class=\"string\">\"20881\"</span>/&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">dubbo:service</span> <span class=\"attr\">interface</span>=<span class=\"string\">\"cn.z201.io.api.DefaultDemoServiceI\"</span> <span class=\"attr\">ref</span>=<span class=\"string\">\"defaultDemoServiceImpl\"</span>/&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">bean</span> <span class=\"attr\">id</span>=<span class=\"string\">\"defaultDemoServiceImpl\"</span> <span class=\"attr\">class</span>=<span class=\"string\">\"cn.z201.io.learning.rpc.micro.provider.service.DefaultDemoServiceImpl\"</span>/&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"dubbo-micro-service-zookeeper\"><a href=\"#dubbo-micro-service-zookeeper\" class=\"headerlink\" title=\"dubbo-micro-service-zookeeper\"></a>dubbo-micro-service-zookeeper</h3><blockquote>\n<p>è¿™ä¸ªå°±ä¸è´´ä»£ç äº†ï¼Œå•ç‹¬è·‘ä¸ªzkæ˜¯ä¸€æ ·çš„ã€‚åªä¸è¿‡æˆ‘å§dubboå®˜æ–¹çš„demoä»£ç å¤åˆ¶è¿‡æ¥äº†ã€‚</p>\n</blockquote>\n<h3 id=\"æ•ˆæœ\"><a href=\"#æ•ˆæœ\" class=\"headerlink\" title=\"æ•ˆæœ\"></a>æ•ˆæœ</h3><p><img src=\"https://z201.oss-cn-shanghai.aliyuncs.com/JavaNote/Dubbo/dubbo-xml.png\"></p>\n<ul>\n<li><code>è®¿é—® http://127.0.0.1:8001/</code> æ˜¾ç¤º<code>[dubbo-spring-boot-starter] : Hello, consumer</code>ã€‚</li>\n</ul>\n","categories":["å®è·µ"],"tags":["Java","Spring","Dubbo"]},{"title":"Centos7-install-cmake","url":"/posts/2544953906/","content":"<blockquote>\n<p>å‰å¹´çš„ç¬”è®°å†…å®¹ï¼Œè¢«æˆ‘ç¿»å‡ºæ¥äº†ã€‚</p>\n</blockquote>\n<h1 id=\"Centos7-install-cmake\"><a href=\"#Centos7-install-cmake\" class=\"headerlink\" title=\"Centos7-install-cmake\"></a>Centos7-install-cmake</h1><blockquote>\n<p>CMakeæ˜¯ä¸€ä¸ªè·¨å¹³å°çš„å®‰è£…ï¼ˆ<a href=\"https://baike.baidu.com/item/%E7%BC%96%E8%AF%91\" target=\"_blank\" rel=\"noopener\">ç¼–è¯‘</a>ï¼‰å·¥å…·ï¼Œå¯ä»¥ç”¨ç®€å•çš„è¯­å¥æ¥æè¿°æ‰€æœ‰å¹³å°çš„å®‰è£…(ç¼–è¯‘è¿‡ç¨‹)ã€‚ä»–èƒ½å¤Ÿè¾“å‡ºå„ç§å„æ ·çš„makefileæˆ–è€…projectæ–‡ä»¶ï¼Œèƒ½æµ‹è¯•<a href=\"https://baike.baidu.com/item/%E7%BC%96%E8%AF%91%E5%99%A8\" target=\"_blank\" rel=\"noopener\">ç¼–è¯‘å™¨</a>æ‰€æ”¯æŒçš„C++ç‰¹æ€§,ç±»ä¼¼UNIXä¸‹çš„automakeã€‚åªæ˜¯ CMake çš„<a href=\"https://baike.baidu.com/item/%E7%BB%84%E6%80%81%E6%A1%A3\" target=\"_blank\" rel=\"noopener\">ç»„æ€æ¡£</a>å–åä¸º CMakeLists.txtã€‚Cmake å¹¶ä¸ç›´æ¥å»ºæ„å‡ºæœ€ç»ˆçš„è½¯ä»¶ï¼Œè€Œæ˜¯äº§ç”Ÿæ ‡å‡†çš„å»ºæ„æ¡£ï¼ˆå¦‚ Unix çš„ Makefile æˆ– Windows Visual C++ çš„ projects/workspacesï¼‰ï¼Œç„¶åå†ä¾ä¸€èˆ¬çš„å»ºæ„æ–¹å¼ä½¿ç”¨ã€‚è¿™ä½¿å¾—ç†Ÿæ‚‰æŸä¸ª<a href=\"https://baike.baidu.com/item/%E9%9B%86%E6%88%90%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83\" target=\"_blank\" rel=\"noopener\">é›†æˆå¼€å‘ç¯å¢ƒ</a>ï¼ˆIDEï¼‰çš„å¼€å‘è€…å¯ä»¥ç”¨æ ‡å‡†çš„æ–¹å¼å»ºæ„ä»–çš„è½¯ä»¶ï¼Œè¿™ç§å¯ä»¥ä½¿ç”¨å„å¹³å°çš„åŸç”Ÿå»ºæ„ç³»ç»Ÿçš„èƒ½åŠ›æ˜¯ CMake å’Œ SCons ç­‰å…¶ä»–ç±»ä¼¼ç³»ç»Ÿçš„åŒºåˆ«ä¹‹å¤„ã€‚</p>\n</blockquote>\n<h2 id=\"éƒ¨ç½²è¿‡ç¨‹\"><a href=\"#éƒ¨ç½²è¿‡ç¨‹\" class=\"headerlink\" title=\"éƒ¨ç½²è¿‡ç¨‹\"></a>éƒ¨ç½²è¿‡ç¨‹</h2><h3 id=\"1-ä¸‹è½½cmake-Source-Code\"><a href=\"#1-ä¸‹è½½cmake-Source-Code\" class=\"headerlink\" title=\"1.ä¸‹è½½cmake Source Code\"></a>1.ä¸‹è½½cmake Source Code</h3><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">wget https:&#x2F;&#x2F;cmake.org&#x2F;files&#x2F;v3.3&#x2F;cmake-3.3.2.tar.gz</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"2-è§£å‹ç¼©\"><a href=\"#2-è§£å‹ç¼©\" class=\"headerlink\" title=\"2.è§£å‹ç¼©\"></a>2.è§£å‹ç¼©</h3><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">tar xzvf cmake-3.3.2.tar.gz</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"3-æ‰§è¡Œå¼•å¯¼å‘½ä»¤\"><a href=\"#3-æ‰§è¡Œå¼•å¯¼å‘½ä»¤\" class=\"headerlink\" title=\"3.æ‰§è¡Œå¼•å¯¼å‘½ä»¤\"></a>3.æ‰§è¡Œå¼•å¯¼å‘½ä»¤</h3><ul>\n<li>æ³¨æ„ï¼šæ­¤æ—¶ä¼šæ£€æŸ¥gcc ,gcc-c++,æ˜¯å¦å®‰è£…å’Œç‰ˆæœ¬ï¼Œå¦‚æœæ²¡æœ‰è¯·å…ˆå®‰è£…ã€‚</li>\n<li>è¿›å…¥åˆ°cmakeæ–‡ä»¶å¤¹ä¸­æ‰§è¡Œ</li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">yum install gcc</span><br><span class=\"line\">yum install gcc-c++</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">cd cmake-3.3.2  </span><br><span class=\"line\">.&#x2F;bootstrap</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"4-æ‰§è¡Œmake\"><a href=\"#4-æ‰§è¡Œmake\" class=\"headerlink\" title=\"4.æ‰§è¡Œmake\"></a>4.æ‰§è¡Œmake</h3><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">gmake</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"5-æ‰§è¡Œå®‰è£…ï¼ˆrootæƒé™ï¼‰\"><a href=\"#5-æ‰§è¡Œå®‰è£…ï¼ˆrootæƒé™ï¼‰\" class=\"headerlink\" title=\"5.æ‰§è¡Œå®‰è£…ï¼ˆrootæƒé™ï¼‰\"></a>5.æ‰§è¡Œå®‰è£…ï¼ˆrootæƒé™ï¼‰</h3><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">make install</span><br></pre></td></tr></table></figure>\n\n","categories":["Linuxè¿ç»´"],"tags":["Cmake"]},{"title":"åç«¯åº”ç”¨æ€§èƒ½æŒ‡æ ‡","url":"/posts/3066404175/","content":"<h2 id=\"åç«¯åº”ç”¨æ€§èƒ½æŒ‡æ ‡\"><a href=\"#åç«¯åº”ç”¨æ€§èƒ½æŒ‡æ ‡\" class=\"headerlink\" title=\"åç«¯åº”ç”¨æ€§èƒ½æŒ‡æ ‡\"></a>åç«¯åº”ç”¨æ€§èƒ½æŒ‡æ ‡</h2><blockquote>\n<p>å¾ˆä¹…ä»¥å‰çš„ç¬”è®°ï¼Œè¢«ç¿»å‡ºæ¥äº†ã€‚</p>\n</blockquote>\n<h3 id=\"ååé‡ã€PVã€QPSã€TPSã€RPSã€I-Oè´Ÿè½½æ¦‚å¿µã€‚\"><a href=\"#ååé‡ã€PVã€QPSã€TPSã€RPSã€I-Oè´Ÿè½½æ¦‚å¿µã€‚\" class=\"headerlink\" title=\"ååé‡ã€PVã€QPSã€TPSã€RPSã€I/Oè´Ÿè½½æ¦‚å¿µã€‚\"></a>ååé‡ã€PVã€QPSã€TPSã€RPSã€I/Oè´Ÿè½½æ¦‚å¿µã€‚</h3><blockquote>\n<p><strong>ååé‡</strong>:æŒ‡å•ä½æ—¶é—´å†…ç³»ç»Ÿå¤„ç†ç”¨æˆ·çš„è¯·æ±‚æ•°,ä¸åŒçš„è§’åº¦è¯„ä¼°æ–¹å¼ä¹Ÿä¸åŒã€‚</p>\n<p>**PV **  :  æ˜¯Page Viewçš„ç¼©å†™ã€‚æ¥è‡ªæµè§ˆå™¨çš„ä¸€æ¬¡htmlå†…å®¹è¯·æ±‚ä¼šè¢«çœ‹ä½œä¸€ä¸ªPVã€‚</p>\n<p><strong>QPS</strong>ï¼šQueries Per Secondæ„æ€æ˜¯â€œæ¯ç§’æŸ¥è¯¢ç‡â€ï¼Œæ˜¯ä¸€å°æœåŠ¡å™¨æ¯ç§’èƒ½å¤Ÿç›¸åº”çš„æŸ¥è¯¢æ¬¡æ•°ï¼Œæ˜¯å¯¹ä¸€ä¸ªç‰¹å®šçš„æŸ¥è¯¢æœåŠ¡å™¨åœ¨è§„å®šæ—¶é—´å†…æ‰€å¤„ç†æµé‡å¤šå°‘çš„è¡¡é‡æ ‡å‡†ã€‚</p>\n<p><strong>TPSï¼š</strong>æ˜¯Transactions Per Secondçš„ç¼©å†™ï¼Œä¹Ÿå°±æ˜¯äº‹åŠ¡æ•°/ç§’ã€‚å®ƒæ˜¯è½¯ä»¶æµ‹è¯•ç»“æœçš„æµ‹é‡å•ä½ã€‚ä¸€ä¸ªäº‹åŠ¡æ˜¯æŒ‡ä¸€ä¸ªå®¢æˆ·æœºå‘æœåŠ¡å™¨å‘é€è¯·æ±‚ç„¶åæœåŠ¡å™¨åšå‡ºååº”çš„è¿‡ç¨‹ã€‚å®¢æˆ·æœºåœ¨å‘é€è¯·æ±‚æ—¶å¼€å§‹è®¡æ—¶ï¼Œæ”¶åˆ°æœåŠ¡å™¨å“åº”åç»“æŸè®¡æ—¶ï¼Œä»¥æ­¤æ¥è®¡ç®—ä½¿ç”¨çš„æ—¶é—´å’Œå®Œæˆçš„äº‹åŠ¡ä¸ªæ•°ï¼Œ</p>\n<p><strong>RPS</strong> : æ˜¯Requests Per Secondçš„ç¼©å†™,æŒ‡å¹¶å‘æ•°/å¹³å‡å“åº”æ—¶é—´ã€‚</p>\n<p><strong>I/0</strong> è´Ÿè½½: I/O æ˜¯ input/outputçš„ç¼©å†™ï¼Œå³è¾“å…¥è¾“å‡ºç«¯å£ã€‚æ¯ä¸ªè®¾å¤‡éƒ½ä¼šæœ‰ä¸€ä¸ªä¸“ç”¨çš„I/Oåœ°å€ï¼Œç”¨æ¥å¤„ç†è‡ªå·±çš„è¾“å…¥è¾“å‡ºä¿¡æ¯ã€‚ä¸€ä¸ªç³»ç»Ÿè¦èƒ½æ­£ç¡®å·¥ä½œï¼Œå¿…é¡»è¦æœ‰æ•°æ®é€šé“ï¼ˆdata pathsï¼‰çš„æœºåˆ¶ï¼Œè½¯ä»¶å’Œç¡¬ä»¶ç³»ç»Ÿéƒ½æ¦‚è«èƒ½å¤–ã€‚å¯¹äºè®¡ç®—æœºç³»ç»Ÿè€Œè¨€ï¼Œå¿…é¡»è¦æœ‰data pathsçš„æœºåˆ¶æ¥ç¡®ä¿CPU, RAMå’ŒI/Oè®¾å¤‡ä¹‹é—´çš„ä¿¡æ¯æ•°æ®èƒ½æ­£ç¡®çš„æµåŠ¨ã€‚è¿™äº›data paths,é€šå¸¸è¢«ç§°ä¸ºæ€»çº¿(BUS)ï¼Œæ˜¯è®¡ç®—æœºå†…éƒ¨ä¸»è¦çš„é€šä¿¡é€šé“ã€‚è‹¥æƒ³æ·±å…¥å¯ä»¥å‚è€ƒ  <a href=\"https://book.douban.com/subject/1776614/\" target=\"_blank\" rel=\"noopener\">Understanding the Linux Kernel</a>ã€‚</p>\n</blockquote>\n<ul>\n<li>åœ¨æŠ€æœ¯äººå‘˜çš„èŒä¸šç”Ÿæ¶¯ä¸­ï¼Œæ€»æ˜¯ä¸æ–­å¼€å‘æ–°çš„ç³»ç»Ÿã€‚åœ¨è®¾è®¡ç³»ç»Ÿçš„æ—¶å€™ï¼Œå› åœºæ™¯ã€æ—¶é—´è€Œå¼‚ã€‚ä¸€ä¸ªç³»ç»Ÿå¹¶ä¸æ˜¯å¼€å§‹å°±èƒ½è®¾è®¡çš„éå¸¸å®Œç¾ï¼Œç»å¯¹å¤šæ•°çš„æƒ…å†µæ˜¯åœ¨æœ‰é™çš„èµ„æºï¼Œä¼˜å…ˆè§£å†³æ ¸å¿ƒé—®é¢˜ã€‚å¹¶é¢„æµ‹å¯èƒ½å‘ç”Ÿçš„é—®é¢˜ï¼Œé€šè¿‡åå¤è¿­ä»£çš„é€æ­¥æ¶ˆé™¤ç—›ç‚¹ã€‚è¿™æœ¬èº«æ˜¯ä¸€ä¸ªæŒä¹…æ€§çš„è¿‡ç¨‹ã€‚ä½†æ˜¯æ—©æœŸä¼˜è‰¯çš„æ¶æ„è®¾è®¡èƒ½ä¸ºæœªæ¥çš„å·¥ä½œå¸¦æ¥éå¸¸å¤§çš„å¸®åŠ©ï¼Œå¦‚ä½•å»è¯„åˆ¤è®¾è®¡æ˜¯å¦åˆç†éœ€è¦æ•°æ®ä½è¯ã€‚ååé‡ã€PVã€QPSã€TPSã€RPSã€I/Oè¿™äº›æŒ‡æ ‡æ—©è®¾è®¡åˆæœŸèƒ½ä¸ºå¼€å‘äººå‘˜æä¾›éå¸¸å¤§çš„å¸®åŠ©ã€‚</li>\n</ul>\n<h2 id=\"å‚è€ƒå®šå¾‹\"><a href=\"#å‚è€ƒå®šå¾‹\" class=\"headerlink\" title=\"å‚è€ƒå®šå¾‹\"></a>å‚è€ƒå®šå¾‹</h2><blockquote>\n<p>åœ¨è®¾è®¡ç³»ç»Ÿæ—¶ï¼Œåº”è¯¥å¤šæ€è€ƒ**<a href=\"http://wiki.mbalib.com/wiki/%E5%A2%A8%E8%8F%B2%E5%AE%9A%E5%BE%8B\" target=\"_blank\" rel=\"noopener\">å¢¨è²å®šå¾‹</a>**</p>\n<ul>\n<li>ä»»ä½•äº‹æƒ…éƒ½æ²¡è¡¨é¢çœ‹èµ·æ¥é‚£ä¹ˆç®€å•ã€‚</li>\n<li>æ‰€ä»¥äº‹æƒ…éƒ½ä¼šæ¯”ä½ é¢„æœŸçš„æ—¶é—´é•¿ã€‚</li>\n<li>å¯èƒ½å‡ºé”™çš„äº‹æƒ…æ€»ä¼šå‡ºé”™ã€‚</li>\n<li>å¦‚æœä½ æ‹…å¿ƒæŸä¸€ä»¶å‘ç”Ÿï¼Œé‚£ä¹ˆå®ƒå°±æ›´æœ‰å¯èƒ½å‘ç”Ÿã€‚</li>\n</ul>\n<p>åœ¨ç³»ç»Ÿåˆ’åˆ†çš„æ—¶ï¼Œä¹Ÿè¦æ€è€ƒ**<a href=\"http://www.melconway.com/Home/Conways_Law.html?spm=5176.100239.blogcont8611.8.e7792abC1tP3C\" target=\"_blank\" rel=\"noopener\">åº·å¨å®šå¾‹ </a>** </p>\n<ul>\n<li>ç³»ç»Ÿæ¶æ„æ˜¯å…¬å¸ç»„ç»‡æ¶æ„çš„åæ˜ ã€‚</li>\n<li>åº”è¯¥æŒ‰ç…§ä¸šåŠ¡é—­ç¯è¿›è¡Œç³»ç»Ÿæ‹†åˆ†/ç»„ç»‡æ¶æ„æ‹†åˆ†,å®ç°é—­ç¯/é«˜å†…èš/ä½è€¦åˆ,å‡å°‘æ²Ÿé€šæˆæœ¬ã€‚</li>\n<li>åœ¨åˆé€‚çš„æ—¶é—´è¿›è¡Œç³»ç»Ÿæ‹†åˆ†,ä¸è¦ä¸€å¼€å§‹å°±å§ç³»ç»Ÿ/æœåŠ¡æ‹†åˆ†éå¸¸ç»†ã€‚è™½ç„¶é—­ç¯ï¼Œä½†æ˜¯æ¯ä¸ªäººç»´æŠ¤çš„ç³»ç»Ÿå¤š,ç»´æŠ¤æˆæœ¬é«˜ã€‚</li>\n</ul>\n<p>â€‹                                                            â€”äº¿çº§æµé‡ç½‘ç«™æ¶æ„æ ¸å¿ƒæŠ€æœ¯ </p>\n</blockquote>\n<a id=\"more\"></a>\n\n<h3 id=\"TPS-ååé‡\"><a href=\"#TPS-ååé‡\" class=\"headerlink\" title=\"TPS(ååé‡)\"></a>TPS(ååé‡)</h3><blockquote>\n<p>ä¸€ä¸ªç³»ç»Ÿçš„æ‰¿å‹èƒ½åŠ›ã€‚å•ä½æ—¶é—´å†…å®Œæˆçš„å·¥ä½œé‡çš„é‡åº¦ã€‚é€šå¸¸ï¼Œå¹³å‡å“åº”æ—¶é—´è¶ŠçŸ­ï¼Œç³»ç»Ÿååé‡è¶Šå¤§ï¼›å¹³å‡å“åº”æ—¶é—´è¶Šé•¿ï¼Œç³»ç»Ÿååé‡è¶Šå°ã€‚ä½†æ˜¯ï¼Œç³»ç»Ÿååé‡è¶Šå¤§ï¼Œæœªå¿…å¹³å‡å“åº”æ—¶é—´è¶ŠçŸ­ã€‚å› ä¸ºåœ¨æŸäº›æƒ…å†µï¼ˆä¾‹å¦‚ï¼Œä¸å¢åŠ ä»»ä½•ç¡¬ä»¶é…ç½®ï¼‰ååé‡çš„å¢å¤§ï¼Œæœ‰æ—¶ä¼šæŠŠå¹³å‡å“åº”æ—¶é—´ä½œä¸ºç‰ºç‰²ï¼Œæ¥æ¢å–ä¸€æ®µæ—¶é—´å¤„ç†æ›´å¤šçš„è¯·æ±‚ã€‚</p>\n</blockquote>\n<ul>\n<li>å½±å“ååé‡çš„å‡ ä¸ªé‡è¦å‚æ•°æŒ‡æ ‡<ul>\n<li>QPSã€TPSã€å¹¶å‘æ•°ã€å“åº”ã€‚</li>\n</ul>\n</li>\n<li>åè¯æ¦‚è¿°<ul>\n<li><strong>å¹¶å‘æ•°</strong> ï¼š ç³»ç»ŸåŒæ—¶å¤„ç†çš„ reqeust / äº‹ç‰©æ•°ã€‚</li>\n<li><strong>å“åº”æ—¶é—´</strong> :  ä¸€èˆ¬å–reqeustçš„å¹³å‡å“åº”æ—¶é—´ï¼Œå¾ˆå¤§ç¨‹åº¦ä¸Šå—å®¢æˆ·ç«¯ç¯å¢ƒå› ç´ å½±å“ã€‚</li>\n<li><strong>TPS</strong> ï¼ˆ<strong>QPS</strong> ï¼‰: å¹¶å‘æ•° / å“åº”æ—¶é—´ã€‚</li>\n</ul>\n</li>\n</ul>\n<h4 id=\"ç³»ç»Ÿå“åº”æ—¶é—´è®¡ç®—\"><a href=\"#ç³»ç»Ÿå“åº”æ—¶é—´è®¡ç®—\" class=\"headerlink\" title=\"ç³»ç»Ÿå“åº”æ—¶é—´è®¡ç®—\"></a><strong>ç³»ç»Ÿå“åº”æ—¶é—´è®¡ç®—</strong></h4><ul>\n<li><p>ç”¨äºæµ‹é‡å®Œæˆä¸€ä¸ªç‰¹å®šè¯·æ±‚éœ€è¦èŠ±è´¹å¤šå°‘æ—¶é—´ã€‚å®ƒæ˜¯ä¸€ä¸ªéå¸¸é‡è¦çš„åº¦é‡å€¼å› ä¸ºå®ƒæ˜¯ç”¨æˆ·ä½“éªŒçš„ä¸€ä¸ªæŒ‡æ•°ã€‚å°½ç®¡è¿™æ ·ï¼Œä½ å¿…é¡»ç¡®ä¿ä½ ç†è§£ä½ æµ‹é‡çš„æ˜¯ä»€ä¹ˆï¼š</p>\n<ul>\n<li>ç³»ç»Ÿçº§çš„ååº”æ—¶é—´ã€‚</li>\n<li>ç»„ä»¶çº§çš„ååº”æ—¶é—´ã€‚</li>\n</ul>\n</li>\n<li><p>å®ƒä»¬æ˜¯å®Œå…¨ä¸åŒçš„ï¼Œå› ä¸ºç³»ç»Ÿçº§åŒ…æ‹¬åƒé˜Ÿåˆ—æ—¶é—´è¿™æ ·çš„å˜é‡æ˜¯å·®åˆ«å¾ˆå¤§çš„ã€‚</p>\n</li>\n<li><p>å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œå“åº”æ—¶é—´åŒæ—¶ä¹Ÿæ˜¯ä¸å®¹æ˜“æµ‹é‡çš„åº¦é‡å€¼ï¼Œå› ä¸ºå®ƒæ¯”å…¶å®ƒçš„åº¦é‡å€¼æ›´å®¹æ˜“å˜åŒ–ã€‚å› æ­¤ä½ å¿…éœ€äº†è§£ååº”æ—¶é—´çš„åˆ†å¸ƒã€‚å¦‚æœåº”ç”¨å¯¹ä½ å¤§éƒ¨åˆ†ç”¨æˆ·çš„ååº”æ—¶é—´æ˜¯2ç§’é’Ÿï¼Œè€Œå¯¹10ï¼…ç”¨æˆ·çš„ååº”æ—¶é—´å´æ˜¯10ç§’é’Ÿï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œä½ å¿…é¡»çŸ¥é“è¿™ä¸ªååº”æ—¶é—´çš„åˆ†å¸ƒï¼Œæ‰èƒ½ç²¾ç¡®åœ°è¯„ä¼°è¯¥é—®é¢˜å’Œè§£å†³å®ƒã€‚è¿™å°±è¦æµ‹é‡å®ƒä»¬çš„ååº”æ—¶é—´å¹¶ä¸”å¾—åˆ°å®ƒä»¬çš„æ ‡å‡†åå·®ï¼Œç†æƒ³çš„æƒ…å†µæ˜¯ç”¨ä¸€ä¸ªæŸ±çŠ¶å›¾æŠŠååº”æ—¶é—´çš„åˆ†å¸ƒæ˜¾ç¤ºå‡ºæ¥ã€‚</p>\n</li>\n<li><p>ä¸¾ä¸ªğŸŒ° åœºæ™¯ï¼š</p>\n<ul>\n<li>ä¸€ä½ç”¨æˆ·é€šè¿‡æµè§ˆå™¨è®¿é—®ç½‘ç«™æŸ¥çœ‹æ–°é—»ã€‚<strong>æ —å­ä¸­æ¯ä¸ªæ“ä½œç”¨åˆ«åä»£æ›¿ï¼Œæ¯”å¦‚å®¢æˆ·è¯·æ±‚æœåŠ¡å™¨è¿‡ç¨‹ã€æ—¶é—´åŒç§°N1ã€‚</strong></li>\n</ul>\n</li>\n<li><p><img src=\"https://z201.oss-cn-shanghai.aliyuncs.com/JavaNote/web/%E5%90%9E%E5%90%90%E9%87%8F%E6%A0%97%E5%AD%90.svg\"></p>\n</li>\n<li><p>å®çº¿ï¼ˆè¯·æ±‚ï¼‰ï¼Œè™šçº¿ï¼ˆå“åº”ï¼‰ã€‚</p>\n</li>\n<li><p>ç½‘ç»œä¼ è¾“æ—¶é—´: N1+N2 ã€‚</p>\n</li>\n<li><p>åº”ç”¨æœåŠ¡å™¨å¤„ç†æ—¶é—´: A1 + A11 <strong>OR</strong> A2 + A22ã€‚</p>\n</li>\n<li><p>æ•°æ®åº“æœåŠ¡å™¨å¤„ç†æ—¶é—´: D1 + D11 <strong>OR</strong> D2 + D22ã€‚</p>\n</li>\n<li><p>å“åº”æ—¶é—´  N1+N2+A1+A11+D1+D11 <strong>OR</strong> N1 + N2 + A2 + A22 + D2 + D22ã€‚</p>\n</li>\n<li><p>å‡è®¾å‚æ•°è€—æ—¶ : </p>\n<ul>\n<li>N1 = 150ms ; N2 = 200msã€‚</li>\n<li>A1 = 10ms ; A11 = 10ms ; A2 = 10ms ï¼›A22 = 10ms ã€‚</li>\n<li>D1 = 10ms ; D11 = 20ms ; D2 = 20ms  ; D22 = 30ã€‚</li>\n</ul>\n</li>\n<li><p><strong>å•æ¬¡reqeust</strong> ã€‚</p>\n<ul>\n<li>æµç¨‹ï¼š<strong>P1</strong> = N1â€“&gt; A1 â€“ &gt; D1 â€“&gt; D11 â€“ &gt; A11 â€“&gt; N2ã€‚<ul>\n<li>è€—æ—¶ï¼š<strong>T1</strong> = N1 + A1 + D1 + D11 + A11 + N2ã€‚</li>\n</ul>\n</li>\n<li>è¯·æ±‚ä¸€æ¬¡ç½‘ç«™é¦–é¡µå“åº”æ—¶é—´ï¼š 150 + 200 +  10 + 10 + 10 + 20 = 400ï¼Œä¹Ÿå°±æ˜¯å®¢æˆ·è¯·æ±‚ç½‘ç«™åœ°å€çš„é‚£ä¸€åˆ»åˆ°çœ‹åˆ°ç½‘ç«™è‡³å°‘éœ€è¦400msï¼ˆåŠç§’ï¼‰ã€‚</li>\n</ul>\n</li>\n</ul>\n<h4 id=\"å¹¶å‘ç”¨æˆ·æ•°çš„è®¡ç®—å…¬å¼\"><a href=\"#å¹¶å‘ç”¨æˆ·æ•°çš„è®¡ç®—å…¬å¼\" class=\"headerlink\" title=\"å¹¶å‘ç”¨æˆ·æ•°çš„è®¡ç®—å…¬å¼\"></a>å¹¶å‘ç”¨æˆ·æ•°çš„è®¡ç®—å…¬å¼</h4><ul>\n<li>ç³»ç»Ÿç”¨æˆ·æ•°: ç³»ç»Ÿé¢å®šçš„ç”¨æˆ·æ•°é‡ï¼Œå¦‚ä¸€ä¸ªOAç³»ç»Ÿï¼Œå¯èƒ½ä½¿ç”¨è¯¥ç³»ç»Ÿçš„ç”¨æˆ·æ€»æ•°æ˜¯4000ä¸ªï¼Œé‚£ä¹ˆè¿™ä¸ªæ•°é‡ï¼Œå°±æ˜¯ç³»ç»Ÿç”¨æˆ·æ•°ã€‚</li>\n<li>åŒæ—¶åœ¨çº¿ç”¨æˆ·æ•°: åœ¨ä¸€å®šçš„æ—¶é—´èŒƒå›´å†…ï¼Œæœ€å¤§çš„åŒæ—¶åœ¨çº¿ç”¨æˆ·æ•°é‡ã€‚</li>\n<li>åŒæ—¶åœ¨çº¿ç”¨æˆ·æ•° = æ¯ç§’è¯·æ±‚æ•°RPS(ååé‡) + å¹¶å‘è¿æ¥æ•° + å¹³å‡ç”¨æˆ·æ€è€ƒæ—¶é—´ã€‚</li>\n<li>å¹³å‡å¹¶å‘ç”¨æˆ·æ•°çš„è®¡ç®—: C = nL / T<ul>\n<li>Cæ˜¯å¹³å‡çš„å¹¶å‘ç”¨æˆ·æ•°ã€‚</li>\n<li>næ˜¯å¹³å‡æ¯å¤©è®¿é—®ç”¨æˆ·æ•°(login session)ã€‚</li>\n<li>Læ˜¯ä¸€å¤©å†…ç”¨æˆ·ä»ç™»å½•åˆ°é€€å‡ºçš„å¹³å‡æ—¶é—´(login sessionçš„å¹³å‡æ—¶é—´)ã€‚</li>\n<li>Tæ˜¯è€ƒå¯Ÿæ—¶é—´é•¿åº¦(ä¸€å¤©å†…å¤šé•¿æ—¶é—´æœ‰ç”¨æˆ·ä½¿ç”¨ç³»ç»Ÿ)ã€‚</li>\n</ul>\n</li>\n<li>å¹¶å‘ç”¨æˆ·æ•°å³°å€¼è®¡ç®—: C^çº¦ç­‰äºC + 3* æ ¹å·C å…¶ä¸­ C^ æ˜¯å¹¶å‘ç”¨æˆ·å³°å€¼ï¼ŒC æ˜¯å¹³å‡å¹¶å‘ç”¨æˆ·æ•°ï¼Œè¯¥å…¬å¼éµå¾ªæ³Šæ¾åˆ†å¸ƒç†è®ºã€‚</li>\n</ul>\n<h4 id=\"ååé‡çš„è®¡ç®—å…¬å¼\"><a href=\"#ååé‡çš„è®¡ç®—å…¬å¼\" class=\"headerlink\" title=\"ååé‡çš„è®¡ç®—å…¬å¼\"></a>ååé‡çš„è®¡ç®—å…¬å¼</h4><ul>\n<li>ä»ä¸šåŠ¡è§’åº¦çœ‹<ul>\n<li>ååé‡å¯ä»¥ç”¨<ul>\n<li>è¯·æ±‚æ•°/ç§’ã€‚</li>\n<li>é¡µé¢æ•°/ç§’ã€‚</li>\n<li>äººæ•°/å¤©æˆ–å¤„ç†ä¸šåŠ¡æ•°/å°æ—¶ç­‰å•ä½æ¥è¡¡é‡ã€‚</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>ä»ç½‘ç»œè§’åº¦çœ‹ï¼Œååé‡å¯ä»¥ç”¨:<ul>\n<li>å­—èŠ‚/ç§’æ¥è¡¡é‡</li>\n</ul>\n</li>\n<li>å¯¹äºäº¤äº’å¼åº”ç”¨æ¥è¯´ï¼Œååé‡æŒ‡æ ‡åæ˜ çš„æ˜¯æœåŠ¡å™¨æ‰¿å—çš„å‹åŠ›ï¼Œä»–èƒ½å¤Ÿè¯´æ˜ç³»ç»Ÿçš„è´Ÿè½½èƒ½åŠ›ã€‚</li>\n<li>ä»¥ä¸åŒæ–¹å¼è¡¨è¾¾çš„ååé‡å¯ä»¥è¯´æ˜ä¸åŒå±‚æ¬¡çš„é—®é¢˜ï¼Œä¾‹å¦‚ï¼š<ul>\n<li>ä»¥å­—èŠ‚æ•°/ç§’æ–¹å¼å¯ä»¥è¡¨ç¤ºæ•°è¦å—ç½‘ç»œåŸºç¡€è®¾æ–½ã€æœåŠ¡å™¨æ¶æ„ã€åº”ç”¨æœåŠ¡å™¨åˆ¶çº¦ç­‰æ–¹é¢çš„ç“¶é¢ˆã€‚</li>\n<li>å·²è¯·æ±‚æ•°/ç§’çš„æ–¹å¼è¡¨ç¤ºä¸»è¦æ˜¯å—åº”ç”¨æœåŠ¡å™¨å’Œåº”ç”¨ä»£ç çš„åˆ¶çº¦ä½“ç°å‡ºçš„ç“¶é¢ˆã€‚</li>\n</ul>\n</li>\n</ul>\n<h4 id=\"æ€è€ƒæ—¶é—´çš„è®¡ç®—å…¬å¼\"><a href=\"#æ€è€ƒæ—¶é—´çš„è®¡ç®—å…¬å¼\" class=\"headerlink\" title=\"æ€è€ƒæ—¶é—´çš„è®¡ç®—å…¬å¼\"></a><strong>æ€è€ƒæ—¶é—´çš„è®¡ç®—å…¬å¼</strong></h4><ul>\n<li><p>Think Timeï¼Œä»ä¸šåŠ¡è§’åº¦æ¥çœ‹ï¼Œè¿™ä¸ªæ—¶é—´æŒ‡ç”¨æˆ·è¿›è¡Œæ“ä½œæ—¶æ¯ä¸ªè¯·æ±‚ä¹‹é—´çš„æ—¶é—´é—´éš”ï¼Œä¸ºäº†æ¨¡æ‹Ÿè¿™æ ·çš„æ—¶é—´é—´éš”ï¼Œå¼•å…¥äº†æ€è€ƒæ—¶é—´è¿™ä¸ªæ¦‚å¿µï¼Œæ¥æ›´åŠ çœŸå®çš„æ¨¡æ‹Ÿç”¨æˆ·çš„æ“ä½œã€‚<br>åœ¨ååé‡è¿™ä¸ªå…¬å¼ä¸­ F = VU * R / Tè¯´æ˜ååé‡ F æ˜¯ VU æ•°é‡ã€æ¯ä¸ªç”¨æˆ·å‘å‡ºçš„è¯·æ±‚æ•° R å’Œæ—¶é—´ T çš„å‡½æ•°ï¼Œè€Œå…¶ä¸­çš„ R åˆå¯ä»¥ç”¨æ—¶é—´Tå’Œç”¨æˆ·æ€è€ƒæ—¶é—´ TS æ¥è®¡ç®—ï¼šR = T / TS<br>ä¸‹é¢ç»™å‡ºä¸€ä¸ªè®¡ç®—æ€è€ƒæ—¶é—´çš„ä¸€èˆ¬æ­¥éª¤ï¼š</p>\n<ul>\n<li><p>é¦–å…ˆè®¡ç®—å‡ºç³»ç»Ÿçš„å¹¶å‘ç”¨æˆ·æ•°</p>\n<p>C = nL / TF = R Ã— C</p>\n</li>\n<li><p>ç»Ÿè®¡å‡ºç³»ç»Ÿå¹³å‡çš„ååé‡</p>\n<p>F= VU * R / T R Ã— C = VU * R / T</p>\n</li>\n<li><p>ç»Ÿè®¡å‡ºå¹³å‡æ¯ä¸ªç”¨æˆ·å‘å‡ºçš„è¯·æ±‚æ•°é‡</p>\n<p>R= u<em>C</em>T / VU</p>\n</li>\n<li><p>æ ¹æ®å…¬å¼è®¡ç®—å‡ºæ€è€ƒæ—¶é—´</p>\n<p>TS= T / R</p>\n</li>\n</ul>\n</li>\n</ul>\n<h4 id=\"å› ç´ ï¼ˆæŒ‡æ ‡ï¼‰\"><a href=\"#å› ç´ ï¼ˆæŒ‡æ ‡ï¼‰\" class=\"headerlink\" title=\"å› ç´ ï¼ˆæŒ‡æ ‡ï¼‰\"></a>å› ç´ ï¼ˆæŒ‡æ ‡ï¼‰</h4><ul>\n<li><p><strong>èµ„æºåˆ©ç”¨ç‡</strong></p>\n<blockquote>\n<p>è¿™é‡Œæ‰€è°“çš„èµ„æºæ˜¯å¯¹äºç³»ç»Ÿä¸­çš„ä¸€ä¸ªæŠ½è±¡çš„æ¦‚å¿µï¼Œå®ƒåŒ…æ‹¬å¾ˆå¤šæ–¹é¢</p>\n</blockquote>\n<ol>\n<li>reqeust  å¯¹ cpu çš„æ¶ˆè€—ï¼šå•ä¸ªreqeustå¯¹CPUæ¶ˆè€—è¶Šé«˜ï¼Œå¤–éƒ¨ç³»ç»Ÿæ¥å£ã€IOå½±å“é€Ÿåº¦è¶Šæ…¢ï¼Œç³»ç»Ÿååèƒ½åŠ›è¶Šä½ï¼Œåä¹‹è¶Šé«˜ã€‚</li>\n<li>å†…å­˜è´Ÿè½½ï¼š ç³»ç»Ÿå¯¹ç³»ç»Ÿå†…å­˜ã€vmè™šæ‹Ÿå†…å­˜ã€swapäº¤æ¢åŒºçš„ä½¿ç”¨æƒ…å†µã€‚</li>\n<li>iOè´Ÿè½½æ¶ˆè€— (<strong>è¿™é‡Œçš„IOè´Ÿè½½æ˜¯æŒ‡ç¡¬ç›˜IO ï¼Œå¹¶ä¸æ˜¯ç½‘ç»œIO</strong>): ç³»ç»Ÿåœ¨è¿è¡Œä¸­å¸¸å¸¸ä¼šæ¶‰åŠåˆ°å¤§é‡çš„ç£ç›˜è¯»å†™æ“ä½œã€‚ç£ç›˜æœ‰ä¸¤ä¸ªé‡è¦çš„å‚æ•°: Seek timeã€ Rotational latencyã€‚æ­£å¸¸çš„I/Oè®¡æ•°ä¸ºï¼š1000/(Seek time+Rotational latency)*0.75    åœ¨æ­¤èŒƒå›´å†…å±æ­£å¸¸ã€‚å½“è¾¾åˆ°85ï¼…çš„I/Oè®¡æ•°ä»¥ä¸Šæ—¶åˆ™åŸºæœ¬è®¤ä¸ºå·²ç»å­˜åœ¨I/Oç“¶åŠ²ã€‚ç†è®ºæƒ…å†µä¸‹ï¼Œç£ç›˜çš„éšæœºè¯»è®¡æ•°ä¸º125ã€é¡ºåºè¯»è®¡æ•°ä¸º225ã€‚å¯¹äºæ•°æ®æ–‡ä»¶è€Œè¨€æ˜¯éšæœºè¯»å†™ï¼Œæ—¥å¿—æ–‡ä»¶æ˜¯é¡ºåºè¯»å†™ã€‚</li>\n</ol>\n</li>\n<li><p><strong>å¤–éƒ¨æ¥å£</strong></p>\n<ol>\n<li>ä¸€ä¸ªç³»ç»Ÿä¼šå°†ç³»ç»Ÿå†…çš„åŠŸèƒ½å°è£…æˆæ¥å£(RESTFULã€SOAP)çš„å½¢å¼å‘å¤–éƒ¨æä¾›ï¼Œè¿™äº›å¤–éƒ¨æ¥å£å’Œå†…éƒ¨çš„ä»£ç å¤„ç†é€»è¾‘æ˜¯å¼ºå…³è”çš„ã€‚æ¯”å¦‚ä½¿ç”¨åˆ°æ”¯ä»˜åŒ…ï¼Œåœ¨ä¸€ä¸ªæ”¯ä»˜reqeustä¸­éœ€è¦å‘èµ·å¯¹æ”¯ä»˜æ¥å£çš„è¯·æ±‚å®Œæˆæ•´ä¸ªä¸šåŠ¡æµç¨‹ã€‚</li>\n</ol>\n</li>\n</ul>\n<h3 id=\"2ã€PV\"><a href=\"#2ã€PV\" class=\"headerlink\" title=\"2ã€PV\"></a>2ã€PV</h3><ul>\n<li>PVï¼ˆpage viewï¼‰å³é¡µé¢æµè§ˆé‡ï¼Œé€šå¸¸æ˜¯è¡¡é‡ä¸€ä¸ªç½‘ç»œæ–°é—»é¢‘é“æˆ–ç½‘ç«™ç”šè‡³ä¸€æ¡ç½‘ç»œæ–°é—»çš„ä¸»è¦æŒ‡æ ‡ã€‚ç½‘é¡µæµè§ˆæ•°ï¼ˆpage viewï¼‰æ˜¯è¯„ä»·ç½‘ç«™æµé‡æœ€å¸¸ç”¨çš„æŒ‡æ ‡ä¹‹ä¸€ï¼Œç®€ç§°ä¸ºPVã€‚æœç´¢å¼•æ“ä¼šæ ¹æ®ç½‘ç«™çš„PVæ¥åˆ¤æ–­ç½‘ç«™çš„å¥½ä¸åï¼Œæ˜¯å½±å“ç½‘ç«™æ’åçš„é‡è¦å› ç´ ä¹‹ä¸€ã€‚</li>\n<li>ä¸€èˆ¬çœ‹æ–°é—»ä¹Ÿå°±é›†ä¸­åœ¨æ—©ä¸Šã€ä¸­åˆã€æ™šä¸Šã€‚å‡è®¾æ—©ä¸Š7:30 - 8:30ç½‘ç«™æœ‰ä¼šå¾ˆå¤§è®¿é—®é‡å¤§æ¦‚3500å·¦å³ã€‚</li>\n<li><img src=\"https://z201.oss-cn-shanghai.aliyuncs.com/JavaNote/web/%E7%BD%91%E7%AB%99PV.png\"></li>\n</ul>\n<h3 id=\"3ã€QPSã€TPS\"><a href=\"#3ã€QPSã€TPS\" class=\"headerlink\" title=\"3ã€QPSã€TPS\"></a>3ã€QPSã€TPS</h3><blockquote>\n<p>æ¯ç§’é’Ÿrequest/äº‹åŠ¡æ•°é‡ï¼Œä¸€ä¸ªäº‹åŠ¡æ˜¯æŒ‡ä¸€ä¸ªå®¢æˆ·æœºå‘æœåŠ¡å™¨å‘é€è¯·æ±‚ç„¶åæœåŠ¡å™¨åšå‡ºååº”çš„è¿‡ç¨‹ã€‚</p>\n</blockquote>\n<ol>\n<li><p>äº‹åŠ¡å¯ä»¥ä»å®¢æˆ·ç«¯è§’åº¦è¿›è¡Œå®šä¹‰ã€‚å¦‚ï¼š</p>\n<ol>\n<li>ä¸€ä¸ªç™»å½•çš„POSTè¯·æ±‚å¯å®šä¹‰ä¸ºä¸€ä¸ªäº‹åŠ¡ã€‚</li>\n<li>ä¸€ä¸ªæ–‡ä»¶ä¸Šä¼ ä¸‹è½½çš„åŠ¨ä½œä¹Ÿå¯å®šä¹‰ä¸ºä¸€ä¸ªäº‹åŠ¡ã€‚</li>\n<li>ä¸€ç»„è¿ç»­çš„è¯·æ±‚æ“ä½œä¹Ÿå¯å®šä¹‰ä¸€ä¸ªäº‹åŠ¡ã€‚</li>\n</ol>\n</li>\n<li><p>äº‹åŠ¡ä¹Ÿå¯ä»æœåŠ¡å™¨ç«¯å®šä¹‰ï¼Œå¦‚ï¼š</p>\n<ol>\n<li>æ‰§è¡Œä¸€ä¸ªæ•°æ®åº“äº‹åŠ¡ã€‚</li>\n<li>æ‰§è¡Œä¸€æ®µå­˜å‚¨è¿‡ç¨‹ã€‚</li>\n<li>æ‰§è¡Œä¸€ä¸ªæœåŠ¡å™¨è¯·æ±‚ç­‰ã€‚</li>\n</ol>\n<p>ç†è§£äº†äº‹åŠ¡ï¼Œå†ç†è§£TPSï¼ŒTPSéœ€è¦ç»“åˆæ€§èƒ½æµ‹è¯•åœºæ™¯æ¥è¯´æ˜ï¼š</p>\n<ol>\n<li>å•ä½“<ol>\n<li>æœ¬æ¬¡æµ‹è¯•åªæµ‹ç™»å½•è¿™ä¸€åŠŸèƒ½ï¼Œä¾¿äºåˆ†æå’Œå¯»æ‰¾ç“¶é¢ˆã€‚</li>\n<li>ä¹Ÿå¯åšå¹¶å‘æµ‹è¯•ã€‚</li>\n<li>TPS = æ€»äº‹åŠ¡æ•° / æ€»æ—¶é—´(ç§’)ã€‚</li>\n</ol>\n</li>\n<li>æ··åˆ<ol>\n<li>å¤šç§æ¨¡å—ä¸€èµ·è¿›è¡Œæµ‹è¯•ï¼Œæ›´ç¬¦åˆçœŸå®åœºæ™¯ï¼Œä¾¿äºå¯¹æœåŠ¡å™¨çš„æ•´ä½“å¤„ç†èƒ½åŠ›è¿›è¡Œè¯„ä¼°ã€‚</li>\n<li>TPS=å•ä¸ªäº‹åŠ¡çš„TPSæ€»å’Œã€‚</li>\n</ol>\n</li>\n</ol>\n</li>\n<li><p>å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬ä½¿ç”¨åŠ æƒåå‡½æ•°å¹³å‡æ–¹æ³•æ¥è®¡ç®—å®¢æˆ·æœºçš„å¾—åˆ†ï¼Œåˆ©ç”¨å®¢æˆ·æœºçš„è¿™äº›ä¿¡æ¯ä½¿ç”¨åŠ æƒåå‡½æ•°å¹³å‡æ–¹æ³•æ¥è®¡ç®—æœåŠ¡å™¨ç«¯çš„æ•´ä½“TPSå¾—åˆ†ã€‚</p>\n</li>\n</ol>\n<h3 id=\"5ã€RPS\"><a href=\"#5ã€RPS\" class=\"headerlink\" title=\"5ã€RPS\"></a>5ã€RPS</h3><blockquote>\n<p>æ¯ç§’è¯·æ±‚æ•°ï¼Œè¿™é‡Œè¿˜æœ‰ä¸¤ä¸ªæˆ‘ä»¬é€šå¸¸è®¤ä¸ºå’ŒRPSç›¸ç­‰çš„åè¯ï¼Œarrival rateã€TPSã€‚</p>\n</blockquote>\n<h3 id=\"6ã€IO\"><a href=\"#6ã€IO\" class=\"headerlink\" title=\"6ã€IO\"></a>6ã€IO</h3>","categories":["åŸºç¡€ç†è®º"],"tags":["ååé‡","PV","QPS","TPS","RPS","I/O"]},{"title":"é¢è¯•é¢˜-é€’å½’","url":"/posts/2136713508/","content":"<blockquote>\n<p>ä¸Šå‘¨çš„ä¸€é“ç¬”è¯•é¢˜</p>\n</blockquote>\n<h3 id=\"é€’å½’è®¡ç®—\"><a href=\"#é€’å½’è®¡ç®—\" class=\"headerlink\" title=\"é€’å½’è®¡ç®—\"></a>é€’å½’è®¡ç®—</h3><blockquote>\n<p>æ ¹æ®ä¸¤ç»„å‚æ•°ï¼Œä½¿ç”¨é€’å½’å®Œæˆç¼–ç¨‹ã€‚</p>\n<p>é€’å½’æ–¹æ³• </p>\n<p>â€‹    å‚æ•°1 [1,3]</p>\n<p>â€‹    å‚æ•°2 n</p>\n<p>å½“å‚æ•°2 &lt; å°äºå‚æ•°1ä¸­å…ƒç´ ä¸ªæ•°çš„æ—¶å€™ï¼Œä¸è¾“å‡ºã€‚</p>\n<p>å½“n = 3 æ—¶ è¾“å‡º [1,3,4]</p>\n<p>å½“n = 4 æ—¶ è¾“å‡º [1,3,4,7]</p>\n<p>å½“ n = 11 ä½¿ç”¨é€’å½’ç¨‹åºè¾“å‡º</p>\n</blockquote>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">test</span><span class=\"params\">(List&lt;Integer&gt; list , Integer end)</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span>(list.isEmpty() || list.size() &lt; <span class=\"number\">1</span> || end == <span class=\"keyword\">null</span> || end &lt; <span class=\"number\">0</span>)&#123;</span><br><span class=\"line\">        <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> RuntimeException(<span class=\"string\">\"åˆå§‹åŒ–å‚æ•°å¼‚å¸¸\"</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (list.size() &lt; end) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">int</span> length = list.size();</span><br><span class=\"line\">        list.add(list.get(length - <span class=\"number\">1</span>) + list.get(length - <span class=\"number\">2</span>));</span><br><span class=\"line\">        test(list , end);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String[] args)</span> </span>&#123;</span><br><span class=\"line\">    Integer[] arr = <span class=\"keyword\">new</span> Integer[]&#123;<span class=\"number\">1</span>,<span class=\"number\">3</span>&#125;;</span><br><span class=\"line\">    List&lt;Integer&gt; list = <span class=\"keyword\">new</span> ArrayList(Arrays.asList(arr));</span><br><span class=\"line\">    test(list , <span class=\"number\">11</span>);</span><br><span class=\"line\">    System.out.println(list.toString());</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">&gt;&gt; </span><br><span class=\"line\">[<span class=\"number\">1</span>, <span class=\"number\">3</span>, <span class=\"number\">4</span>, <span class=\"number\">7</span>, <span class=\"number\">11</span>, <span class=\"number\">18</span>, <span class=\"number\">29</span>, <span class=\"number\">47</span>, <span class=\"number\">76</span>, <span class=\"number\">123</span>, <span class=\"number\">199</span>]</span><br></pre></td></tr></table></figure>\n\n<p>ä¸è¿‡å½“æ—¶å†™çš„æ—¶å€™å¹¶æ²¡æœ‰åˆ¤æ–­å¼‚å¸¸ã€‚å½“æ—¶ç´§å¼ ç¡¬ç¼–ç ã€‚</p>\n<h3 id=\"å¤å…¸é—®é¢˜ï¼šâ¼€å¯¹å…”â¼¦\"><a href=\"#å¤å…¸é—®é¢˜ï¼šâ¼€å¯¹å…”â¼¦\" class=\"headerlink\" title=\"å¤å…¸é—®é¢˜ï¼šâ¼€å¯¹å…”â¼¦\"></a>å¤å…¸é—®é¢˜ï¼šâ¼€å¯¹å…”â¼¦</h3><blockquote>\n<p>æœ‰â¼€å¯¹å…”â¼¦ï¼Œä»å‡ºâ½£åç¬¬ 3 ä¸ªâ½‰èµ·æ¯ä¸ªâ½‰éƒ½â½£â¼€å¯¹å…”â¼¦ï¼Œâ¼©å…”â¼¦â»“åˆ°ç¬¬ä¸‰ä¸ªâ½‰åæ¯ä¸ªâ½‰â¼œâ½£â¼€å¯¹å…”â¼¦ï¼Œ</p>\n<p>å‡å¦‚å…”â¼¦éƒ½ä¸æ­»ï¼Œé—®æ¯ä¸ªâ½‰çš„å…”â¼¦å¯¹æ•°ä¸ºå¤šå°‘ï¼Ÿ</p>\n<p>æ€è·¯ï¼šæ–æ³¢é‚£å¥‘æ•°åˆ—ï¼ˆFibonacci sequenceï¼‰</p>\n<p>ç¨‹åºåˆ†æï¼š å…”â¼¦çš„è§„å¾‹ä¸ºæ•°åˆ— 1,1,2,3,5,8,13,21â€¦ï¼Œå½“ n=1 æˆ– n=2æ—¶ï¼Œåˆ†åˆ«ä¸º 1ã€‚ </p>\n<p>ä» n=3 å¼€å§‹ f(n) = f(n-1) + f(n-2)ã€‚æ‰€ä»¥è½¬åŒ–ä¸ºç¨‹åºåˆ™å¦‚ä¸‹ï¼š</p>\n</blockquote>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String[] args)</span> </span>&#123;</span><br><span class=\"line\">\t<span class=\"keyword\">int</span> n = <span class=\"number\">10</span>;</span><br><span class=\"line\">\tSystem.out.println(<span class=\"string\">\"ç¬¬\"</span> + n + <span class=\"string\">\"ä¸ªâ½‰å…”â¼¦æ€»æ•°ä¸º\"</span> + fun(n));</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">int</span> <span class=\"title\">fun</span><span class=\"params\">(<span class=\"keyword\">int</span> n)</span> </span>&#123;</span><br><span class=\"line\">\t<span class=\"keyword\">if</span> (n == <span class=\"number\">1</span> || n == <span class=\"number\">2</span>)</span><br><span class=\"line\">\t\t<span class=\"keyword\">return</span> <span class=\"number\">1</span>;</span><br><span class=\"line\">\t<span class=\"keyword\">else</span></span><br><span class=\"line\">\t<span class=\"keyword\">return</span> fun(n - <span class=\"number\">1</span>) + fun(n - <span class=\"number\">2</span>);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"ä½¿â½¤é€’å½’å®ç°-n-çš„é˜¶ä¹˜\"><a href=\"#ä½¿â½¤é€’å½’å®ç°-n-çš„é˜¶ä¹˜\" class=\"headerlink\" title=\"ä½¿â½¤é€’å½’å®ç° n! çš„é˜¶ä¹˜\"></a>ä½¿â½¤é€’å½’å®ç° <strong>n!</strong> çš„é˜¶ä¹˜</h3><blockquote>\n<p>æ€è·¯ï¼šæ±‚â¼€ä¸ªæ•°çš„é˜¶ä¹˜ï¼Œæ—¢å¯ä»¥ä½¿â½¤å¾ªç¯ï¼Œä¹Ÿå¯ä»¥ä½¿â½¤é€’å½’ã€‚æœ¬åœ°è¦æ±‚ä½¿â½¤é€’å½’ã€‚</p>\n<p>æŠŠå…¬å¼åˆ†è§£å n! = n*(n-1)! ï¼›ä½†æ˜¯ 1çš„é˜¶ä¹˜ä¸º 1ã€‚æ‰€ä»¥æˆ‘ä»¬å¯ä»¥å®šä¹‰â¼€ä¸ªâ½…æ³• jie(int n)ï¼Œå‡å®šâ½…æ³•å°±æ˜¯</p>\n<p>æ±‚é˜¶ä¹˜çš„â½…æ³•ï¼Œåˆ™æ¯æ¬¡ n! = n * jie(n-1)ã€‚è¿™æ ·å°±å®ç°äº†â½…æ³•é€»è¾‘äº†ã€‚</p>\n</blockquote>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String[] args)</span> </span>&#123;</span><br><span class=\"line\">\t<span class=\"keyword\">int</span> n = <span class=\"number\">10</span>;</span><br><span class=\"line\">\tSystem.out.println(n+<span class=\"string\">\"é˜¶ä¹˜ä¸ºï¼š\"</span> + jie(n));</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">int</span> <span class=\"title\">jie</span><span class=\"params\">(<span class=\"keyword\">int</span> n)</span> </span>&#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">if</span>(n==<span class=\"number\">1</span>) &#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">return</span> <span class=\"number\">1</span>;</span><br><span class=\"line\"> \t&#125;<span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">return</span> n*jie(n-<span class=\"number\">1</span>);</span><br><span class=\"line\"> \t&#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"â½¤é€’å½’å®ç°å­—ç¬¦ä¸²å€’è½¬\"><a href=\"#â½¤é€’å½’å®ç°å­—ç¬¦ä¸²å€’è½¬\" class=\"headerlink\" title=\"â½¤é€’å½’å®ç°å­—ç¬¦ä¸²å€’è½¬\"></a>â½¤é€’å½’å®ç°å­—ç¬¦ä¸²å€’è½¬</h3><blockquote>\n<p>æ€è·¯ï¼šå­—ç¬¦ä¸²å€’åºå¯ä»¥æœ‰å¤šç§å®ç°â½…æ³•ï¼Œä½†æ˜¯æœ¬åœ°è¦æ±‚é€’å½’ã€‚æ‰€ä»¥æˆ‘ä»¬éœ€è¦æ‰¾å‡ºç›¸åŒçš„å¯ä»¥é‡å¤çš„â½…æ³•æ¥é€’å½’å®Œæˆã€‚</p>\n<p>ä¾‹å¦‚ï¼šâ€œhelloâ€</p>\n<ul>\n<li><p>ç¬¬â¼€æ¬¡ï¼šæˆªå–ç¬¬â¼€ä¸ªå­—ç¬¦â€œhâ€ï¼Œæˆªå–å‰©ä¸‹â€œelloâ€ï¼Œä½¿â½¤â€œelloâ€+â€œhâ€ï¼›</p>\n</li>\n<li><p>ç¬¬â¼†æ¬¡ï¼šé‚£ä¹ˆâ€œelloâ€å­—ç¬¦ä¸²ï¼Œå¯ä»¥ä½¿â½¤ç›¸åŒçš„â½…æ³•ï¼Œâ€œlloâ€+â€œeâ€ï¼›</p>\n</li>\n<li><p>ç¬¬ä¸‰æ¬¡ï¼šâ€œloâ€+â€œlâ€ï¼›</p>\n</li>\n<li><p>ç¬¬å››æ¬¡ï¼šâ€œoâ€+â€œlâ€ï¼›</p>\n</li>\n<li><p>ç¬¬äº”æ¬¡ï¼šâ€œoâ€â»“åº¦å·²ç»æ˜¯â¼€ä¸ªäº†ï¼Œæ‰€ä»¥ä¾æ¬¡è¿”å›ç»™ä¸Šâ¼€æ­¥â€œollehâ€ã€‚</p>\n</li>\n</ul>\n</blockquote>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">StringReverse</span> </span>&#123;</span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> String <span class=\"title\">reverse</span><span class=\"params\">(String originStr)</span> </span>&#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">if</span>(originStr == <span class=\"keyword\">null</span> || originStr.length()== <span class=\"number\">1</span>) &#123;</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">return</span> originStr;</span><br><span class=\"line\"> \t\t&#125;</span><br><span class=\"line\">\t<span class=\"keyword\">return</span> reverse(originStr.substring(<span class=\"number\">1</span>))+ originStr.charAt(<span class=\"number\">0</span>);</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"> <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String[] args)</span> </span>&#123;</span><br><span class=\"line\">\tSystem.out.println(reverse(<span class=\"string\">\"hello\"</span>));</span><br><span class=\"line\"> &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n\n\n","categories":["é¢è¯•"],"tags":["é€’å½’"]},{"title":"å…³äºåšå®¢","url":"/posts/1244016237/","content":"<h2 id=\"å…³äºæœ¬äºº\"><a href=\"#å…³äºæœ¬äºº\" class=\"headerlink\" title=\"å…³äºæœ¬äºº\"></a>å…³äºæœ¬äºº</h2><ul>\n<li>ç›®å‰åæ ‡æ­å·ã€‚</li>\n<li>ä¸ªäººé‚®ç®±<ul>\n<li><a href=\"mailto:&#105;&#110;&#x74;&#x5f;&#106;&#x61;&#x76;&#97;&#x5f;&#x73;&#101;&#x40;&#49;&#x36;&#x33;&#46;&#99;&#111;&#109;\">&#105;&#110;&#x74;&#x5f;&#106;&#x61;&#x76;&#97;&#x5f;&#x73;&#101;&#x40;&#49;&#x36;&#x33;&#46;&#99;&#111;&#109;</a> </li>\n<li><a href=\"mailto:&#122;&#x32;&#x30;&#49;&#x2e;&#x63;&#111;&#x64;&#x69;&#110;&#x67;&#x40;&#103;&#x6d;&#x61;&#x69;&#108;&#46;&#x63;&#x6f;&#x6d;\">&#122;&#x32;&#x30;&#49;&#x2e;&#x63;&#111;&#x64;&#x69;&#110;&#x67;&#x40;&#103;&#x6d;&#x61;&#x69;&#108;&#46;&#x63;&#x6f;&#x6d;</a></li>\n</ul>\n</li>\n</ul>\n<h2 id=\"å…³äºåšå®¢\"><a href=\"#å…³äºåšå®¢\" class=\"headerlink\" title=\"å…³äºåšå®¢\"></a>å…³äºåšå®¢</h2><ul>\n<li><p><strong>why-how-whatï¼Œç†å¿µ-é€»è¾‘-çŸ¥è¯†ï¼Œè¿™å°±æ˜¯çŸ¥è¯†çš„é»„é‡‘åœ†ç¯ã€‚</strong></p>\n</li>\n<li><p>åšå®¢å»ºç«‹åªæ˜¯ä¸ºäº†ç›‘ç£ä¸ªäººå­¦ä¹ ï¼Œè®°å½•ç”Ÿæ´»ç‚¹æ»´ï¼Œä¸ªäººæ°´å¹³æœ‰é™æ¬¢è¿æ–§æ­£ã€‚</p>\n</li>\n<li><p>åšå®¢ç« èŠ‚åœ°å€å¯èƒ½ä¼šå‘ç”Ÿå˜åŒ–ï¼Œå› ä¸ºæˆ‘ä¹Ÿæ˜¯åœ¨ä¸æ–­çš„å½’çº³æ•´ç†çŸ¥è¯†å†…å®¹ã€‚</p>\n</li>\n<li><p>2018å¹´4æœˆå¼€å§‹æ–­æ–­ç»­ç»­å†™å†…å®¹ï¼ŒåŠ æ²¹ã€‚</p>\n</li>\n</ul>\n<a id=\"more\"></a>\n\n<h2 id=\"å‹‡æ°”\"><a href=\"#å‹‡æ°”\" class=\"headerlink\" title=\"å‹‡æ°”\"></a>å‹‡æ°”</h2><ul>\n<li>çˆ±æƒ…æ²¡äº†å¯ä»¥å†å¤„ã€‚</li>\n<li>æœ‹å‹æ²¡äº†å¯ä»¥å†äº¤ã€‚</li>\n<li>å·¥ä½œæ²¡äº†å¯ä»¥åœ¨æ‰¾ã€‚</li>\n<li>é’±æ²¡äº†å¯ä»¥å†èµšã€‚</li>\n<li>ä½ è¦è®°ä½å…¶å®ä½ ä»€ä¹ˆéƒ½ä¸ç¼ºï¼Œäººç”Ÿéšæ—¶å¯æœ‰å¯æ— ã€‚</li>\n<li>åªæ˜¯ç¼ºä¸€ä»½é‡æ–°å¼€å§‹çš„å‹‡æ°”ã€‚</li>\n</ul>\n<h3 id=\"é¢å¯¹ç„¦è™‘\"><a href=\"#é¢å¯¹ç„¦è™‘\" class=\"headerlink\" title=\"é¢å¯¹ç„¦è™‘\"></a>é¢å¯¹ç„¦è™‘</h3><blockquote>\n<p>éšç€å¹´é¾„ä¸æ–­æå‡,ç”Ÿæ´»å’Œæœªæ¥å¸¦æ¥çš„ç„¦è™‘ã€‚è®©è‡ªå·±éš¾ä»¥æ‹›æ¶ï¼Œè¿™ä¸ªå¹´é¾„åœ¨æ¥æ”¹å˜è‡ªå·±æ™šå—ï¼Ÿå…¶å®ä¸æ™šã€‚</p>\n</blockquote>\n<ul>\n<li><p>é¢å¯¹ç„¦è™‘æœ€å¥½çš„åŠæ³•å°±æ˜¯æ”¹å˜è‡ªå·±ï¼Œä¸æ–­æå‡è‡ªå·±ã€‚è®©è‡ªå·±è¿‡çš„å……å®ã€‚</p>\n</li>\n<li><p>å·¥ä¸šåŒ–çš„ç¤¾ä¼šï¼Œæ‹¥æœ‰çš„è‡ªç”±æ—¶é—´åº”è¯¥æ˜¯ç”¨æ¥æå‡è‡ªå·±çš„ã€‚è€Œä¸æ˜¯ä¸€å‘³çš„å¨±ä¹ã€‚</p>\n</li>\n<li><p>æ”¹å˜è‡ªå·±ã€æå‡è‡ªå·±ã€‚è®©è‡ªå·±çš„ç”Ÿæ´»å˜å¾—å……å®å¥åº·ã€‚ä¸åŠªåŠ›åªä¼šå’Œé‚£äº›æ­£åœ¨åŠªåŠ›çš„äººå·®è·åªä¼šåªä¼šè¶Šæ¥è¶Šå¤§ã€‚æœ€ç»ˆå¯èƒ½å®Œå…¨ä¸§å¤±ç«äº‰åŠ›ã€‚</p>\n</li>\n</ul>\n<h3 id=\"å°è¯•è®¡åˆ’\"><a href=\"#å°è¯•è®¡åˆ’\" class=\"headerlink\" title=\"å°è¯•è®¡åˆ’\"></a>å°è¯•è®¡åˆ’</h3><blockquote>\n<p>å°è¯•å’Œè‡ªå·±æ–—æ™ºæ–—å‹‡ï¼Œå¦‚æœæƒ³è¦æ”¹å˜è‡ªå·±é¦–å…ˆè¦èƒ½çº¦æŸè‡ªå·±ã€‚è®©è‡ªå·±çš„è¡Œä¸ºæŒ‰ç…§è‡ªå·±é¢„æœŸçš„æ–¹å‘å‰è¿›ã€‚</p>\n</blockquote>\n<ul>\n<li><p>å°è¯•å¯¹æ¯å¤©çš„äº‹æƒ…ï¼Œè¿›è¡Œä¸€ä¸ªå®‰æ’ã€‚</p>\n</li>\n<li><p>å°è¯•å¯¹æ¯å¤©å®‰æ’çš„äº‹æƒ…ï¼Œé€ä¸ªå®Œæˆã€‚</p>\n</li>\n<li><p>æ ¹æ®è‡ªå·±å½“å‰çš„æƒ…å†µè°ƒæ•´å®‰æ’çš„è®¡åˆ’ï¼Œè®©è®¡åˆ’å’Œç”Ÿæ´»æ›´åŠ åè°ƒã€‚</p>\n</li>\n<li><p>ç»†åŒ–è®¡åˆ’å†…å®¹ï¼Œè®©å¤§è„‘ä¹ æƒ¯è¿™ç§æ–¹å¼ã€‚</p>\n</li>\n</ul>\n<h3 id=\"é«˜æ•ˆä¹ æƒ¯\"><a href=\"#é«˜æ•ˆä¹ æƒ¯\" class=\"headerlink\" title=\"é«˜æ•ˆä¹ æƒ¯\"></a>é«˜æ•ˆä¹ æƒ¯</h3><blockquote>\n<p>å°è¯•æ›´åŠ é«˜æ•ˆçš„ç”Ÿæ´»ï¼Œè€Œä¸æ˜¯è®©è‡ªå·±çš„ç”Ÿæ´»ä¸€å‘³çš„éšå¿ƒæ‰€æ¬²ã€‚å»æ€è€ƒå»å®è·µï¼Œè®©ç”Ÿæ´»æ›´åŠ é«˜æ•ˆæœ‰è¶£ã€‚</p>\n</blockquote>\n<ul>\n<li>ç”Ÿæ´»çš„çäº‹ä¸Šï¼Œä¼šæ¶ˆè€—çš„å¤§é‡çš„æ—¶é—´ã€‚é«˜æ•ˆç®€æ´çš„å¤„ç†ï¼Œè®©è‡ªå·±çš„å¯ä»¥æŒæ§æ—¶é—´å¢åŠ ã€‚</li>\n<li>ç§‘å­¦ã€å¥åº·ã€åˆç†çš„å®‰æ’çš„è‡ªå·±çš„æ—¶é—´ã€‚è®¡åˆ’æ°¸è¿œèµ¶ä¸ä¸Šå˜åŒ–ï¼Œé€‚å½“è°ƒæ•´è®¡åˆ’ï¼Œä¿æŒä½ä¸€ä¸ªåˆç†çš„æ—¶é—´å®‰æ’ã€‚</li>\n</ul>\n<h3 id=\"å…³äºå­¦ä¹ \"><a href=\"#å…³äºå­¦ä¹ \" class=\"headerlink\" title=\"å…³äºå­¦ä¹ \"></a>å…³äºå­¦ä¹ </h3><blockquote>\n<p>æ¯ä¸ªäººçš„å­¦ä¹ æ–¹å¼éƒ½ä¸ä¸€æ ·ï¼Œä¸æ–­çš„å»å¯»æ‰¾é€‚åˆè‡ªå·±çš„æ–¹å¼ã€æ–¹æ³•ã€‚</p>\n</blockquote>\n<ul>\n<li>ä¸€æµçš„ä¼ä¸šåšæ ‡å‡†ï¼ŒäºŒæµçš„ä¼ä¸šåšå“ç‰Œï¼Œä¸‰æµçš„ä¼ä¸šåšäº§å“ã€‚</li>\n<li>ä¼˜ç§€çš„å­¦ç”Ÿç»ƒæ€ç»´ï¼Œè‰¯å¥½çš„å­¦ç”Ÿæ‰¾æ–¹æ³•ï¼Œä¸€èˆ¬çš„å­¦ç”Ÿå­¦çŸ¥è¯†ã€‚</li>\n</ul>\n<h3 id=\"å…»æˆä¹ æƒ¯\"><a href=\"#å…»æˆä¹ æƒ¯\" class=\"headerlink\" title=\"å…»æˆä¹ æƒ¯\"></a>å…»æˆä¹ æƒ¯</h3><blockquote>\n<p>å…»æˆå¥½çš„ä¹ æƒ¯ç»ˆç”Ÿé€‚ç”¨ã€‚</p>\n</blockquote>\n<ul>\n<li>æˆ‘ä»¬çš„å¤§è„‘æ˜¯æœ‰éå¸¸å¼ºçš„å¯å¡‘æ€§ï¼Œé€šè¿‡åˆ»æ„çš„ç»ƒä¹ é”»ç‚¼å¤§è„‘ã€‚</li>\n</ul>\n<h3 id=\"äº†è§£çœŸå®çš„è‡ªå·±\"><a href=\"#äº†è§£çœŸå®çš„è‡ªå·±\" class=\"headerlink\" title=\"äº†è§£çœŸå®çš„è‡ªå·±\"></a>äº†è§£çœŸå®çš„è‡ªå·±</h3><blockquote>\n<p>è‡ªå·±ä»å°åˆ°å¤§éƒ½ä¸æ˜¯ä¸€ä¸ªå­¦ä¹ å¥½çš„å­©å­ï¼Œä½†æ˜¯ä»æ¥ä¸è§‰å¾—è‡ªå·±çš„æ™ºå•†å·®ã€‚ä½†æ˜¯è‡ªå·±çš„å­¦ä¹ æ–¹å¼æˆ–è€…è¯´å­¦ä¹ æ€ç»´ç¡®å®ä¸€ç‚¹éƒ½æ²¡å…»æˆã€‚</p>\n</blockquote>\n<ul>\n<li><p>é€æ­¥æ”¹å˜è‡ªå·±ä¹‹å‰ï¼Œéœ€è¦å¯¹è‡ªå·±çš„æƒ…å†µè¿›è¡Œä¸€ä¸ªäº†è§£ã€‚è¿‘å‡ å¤©éƒ½åœ¨çœ‹å…³äºå­¦ä¹ ç›¸å…³çš„èµ„æ–™å’Œè§†é¢‘ã€‚ä»Šå¤©çªç„¶å‘ç°ä¸€ä¸ªç‰¹åˆ«æœ‰è¶£çš„è¯<code>é—´æ­‡æ€§è¸Œèº‡æ»¡å¿—ï¼ŒæŒç»­æ€§æ··åƒç­‰æ­»</code>ï¼Œæ„Ÿè§‰è¿™å°±æ˜¯æˆ‘åå¤šå¹´æ¥å¯¹å­¦ä¹ è¿™ä¼šäº‹æ€åº¦çš„å®Œç¾è¯ é‡Šã€‚æ›´å¯æ€•çš„æ˜¯è¿™å¤§æ¦‚æ˜¯æˆ‘æ—©æœŸåº”å¯¹ç„¦è™‘çš„æ‰‹æ®µä¹‹ä¸€ã€‚</p>\n</li>\n<li><p>æ ¹æ®è‡ªå·±å½“å‰çš„å®é™…æƒ…å†µï¼Œåˆ†ææ•´ç†ä¸“ä¸šçŸ¥è¯†ã€‚æ•´ç†è‡ªå·±çš„æ—¶é—´ï¼Œå¯¹äºæ—¶é—´è¿™ä¸ªäº‹æƒ…ã€‚è¿™æ˜¯ä¸–ä¸Šå¯¹æ‰€æœ‰äººéƒ½å…¬å¹³çš„äº‹æƒ…ï¼Œæ‰€ä»¥å¦‚ä½•æ ¹æ®è‡ªå·±çš„æƒ…å†µåˆç†åˆ†é…æ—¶é—´è‡³å…³é‡è¦ã€‚</p>\n</li>\n<li><p>æ•´ç†éœ€è¦æŒæ¡çš„çŸ¥è¯†æ–¹å‘ï¼Œå½’çº³éœ€è¦æŒæ¡çš„çŸ¥è¯†ç‚¹ã€‚ä¼˜å…ˆæ”¹å–„è‡ªå·±çš„å­¦ä¹ æ€ç»´ï¼Œåˆ»æ„æœ‰ç›®æ ‡çš„å»å­¦ä¹ ã€‚</p>\n</li>\n<li><p>å†²åŠ¨æ€§å­¦ä¹ å¾ˆéš¾é•¿ä¹…ï¼Œæ‰€ä»¥éœ€è¦å¯¹è‡ªå·±æ›´ä¸ºäº†è§£æ‰è¡Œã€‚</p>\n</li>\n</ul>\n<h3 id=\"é€šè¿‡å„ç§é€”å¾„å»äº†è§£è‡ªå·±\"><a href=\"#é€šè¿‡å„ç§é€”å¾„å»äº†è§£è‡ªå·±\" class=\"headerlink\" title=\"é€šè¿‡å„ç§é€”å¾„å»äº†è§£è‡ªå·±\"></a>é€šè¿‡å„ç§é€”å¾„å»äº†è§£è‡ªå·±</h3><blockquote>\n<p>äº†è§£è‡ªå·±æ˜¯ä¸€ä¸ªæ¼«é•¿çš„è¿‡ç¨‹ï¼Œè‡ªå¾‹æ˜¯æ¼«é•¿çš„ã€‚æ¯ä¸ªäººçš„åšæŒçš„æ–¹æ³•éƒ½ä¸ä¸€æ ·ï¼Œè‡ªå¾‹å°±æ˜¯å¯¹è‡ªå·±ä¸æ»¡æ„ã€‚å¯¹ç°å®ä¸æ»¡æ„ï¼Œæ‰ä¼šè®©è‡ªå·±åŠªåŠ›å»æ”¹å˜è‡ªå·±ã€‚</p>\n</blockquote>\n<ul>\n<li><a href=\"https://www.apesk.com/mbti/dati.asp\" target=\"_blank\" rel=\"noopener\">mbtiæµ‹è¯•</a> è¿™æ˜¯éå¸¸æƒå¨çš„å¿ƒç†æµ‹è¯•ã€‚</li>\n<li>æ¯ä¸ªäººåšæŒçš„æ–¹æ³•éƒ½ä¸ä¸€æ ·ï¼Œæ¯”å¦‚èƒŒå•è¯çš„appæ¯å¤©æ‰“å¡ï¼Œæˆ–è€…ç•ªèŒ„å·¥ä½œæ³•ã€‚å¯»æ‰¾è‡ªå·±çš„åšæŒç‚¹éå¸¸é‡è¦ï¼Œå¦‚æœä¸èƒ½æ‰¾åˆ°è‡ªå·±çš„åšæŒç‚¹ï¼Œå¤§å¤šæƒ…å†µä¸‹éƒ½ä¼šæ‰€è°“çš„åšæŒéƒ½åªä¼šä»“ä¿ƒç»“æŸã€‚</li>\n</ul>\n<h3 id=\"è®©è‡ªå·±æ›´åŠ ä¼˜ç§€\"><a href=\"#è®©è‡ªå·±æ›´åŠ ä¼˜ç§€\" class=\"headerlink\" title=\"è®©è‡ªå·±æ›´åŠ ä¼˜ç§€\"></a>è®©è‡ªå·±æ›´åŠ ä¼˜ç§€</h3><ol>\n<li><strong>ç†è§£å’Œæ¥å—è‡ªå·±ä¼šçŠ¯é”™è¯¯ã€‚</strong>å…³é”®æ˜¯è¦å°½æ—©å‘ç°ï¼Œåœ¨é”™è¯¯è¿›å…¥åˆ°æœ€ç»ˆäº§å“å‰å‘ç°å®ƒä»¬ã€‚å¹¸è¿çš„æ˜¯ï¼Œé™¤äº†æˆ‘ä»¬å°‘æ•°å‡ ä¸ªåœ¨å–·æ°”æ¨è¿›å®éªŒæ‰€å¼€å‘ç«ç®­å¯¼èˆªç³»ç»Ÿçš„äººå¤–ï¼Œåœ¨è½¯ä»¶è¡Œä¸šä¸­çŠ¯é”™è¯¯é€šå¸¸ä¸ä¼šå¯¼è‡´ç¾éš¾æ€§äº‹æ•…ã€‚æˆ‘ä»¬å¯ä»¥ï¼Œä¹Ÿåº”è¯¥ä»é”™è¯¯ä¸­å¸å–æ•™è®­ï¼Œå¾®ç¬‘ï¼Œå¹¶ç»§ç»­å‰è¿›ã€‚</li>\n<li><strong>ä½ ä¸æ˜¯ä½ çš„ä»£ç ã€‚</strong>è®°ä½ä»£ç å®¡æŸ¥çš„å…¨éƒ¨ç›®çš„å°±æ˜¯å»å‘ç°é—®é¢˜ï¼Œç›¸ä¿¡é—®é¢˜ä¼šè¢«æˆ‘ä»¬å‘ç°ã€‚å½“æœ‰é—®é¢˜ç–æ¼æ—¶ä¸è¦è‡ªè´£ã€‚</li>\n<li><strong>ä¸ç®¡ä½ å¯¹â€œç©ºæ‰‹é“â€æœ‰å¤šäº†è§£ï¼Œä¸€å®šä¼šæœ‰äººçŸ¥é“çš„æ›´å¤šã€‚</strong>å¦‚æœä½ å»é—®ï¼Œè¿™æ ·çš„äººå¯ä»¥å‘Šè¯‰ä½ ä¸€äº›æ–°çš„æ‹›æ•°ã€‚ä»åˆ«äººé‚£é‡Œå¯»æ‰¾å’Œæ¥å—æ–°çš„çŸ¥è¯†ï¼Œç‰¹åˆ«æ˜¯é‚£äº›ä½ è®¤ä¸ºä¸éœ€è¦çš„çŸ¥è¯†ã€‚</li>\n<li><strong>ä¸è¦åœ¨æ²¡æœ‰è®¨è®ºçš„æƒ…å†µä¸‹é‡å†™ä»£ç ã€‚</strong>åœ¨â€œè°ƒæ•´ä»£ç â€å’Œâ€œé‡å†™ä»£ç â€ä¹‹é—´æœ‰ä¸€æ¡å¾ˆç»†è‡´çš„ç•Œé™ï¼Œä½ åº”è¯¥åœ¨ä»£ç å®¡æŸ¥çš„åˆ¶åº¦ä¸‹åšé£æ ¼ä¸Šçš„è°ƒæ•´ï¼Œä¸è¦ç‹¬æ–­ä¸“è¡Œã€‚</li>\n<li><strong>å¯¹é‚£äº›ä¸å¦‚ä½ çš„äººè¦å°Šæ•¬ï¼Œç¤¼é‡ï¼Œæœ‰è€å¿ƒã€‚</strong>ç»å¸¸è·Ÿå¼€å‘äººå‘˜æ‰“äº¤é“çš„éæŠ€æœ¯äººå£«é€šå¸¸æŒæœ‰è¿™æ ·çš„è§‚ç‚¹ï¼šç¨‹åºå‘˜å‡­å€Ÿä¸€æŠ€ä¹‹é•¿ç‹‚æ”¾ä¸ç¾ã€‚ä¸è¦è®©ä½ çš„å‘æ€’å’Œç¼ºä¹è€æ€§è®©ä»–ä»¬å¿ƒä¸­çš„è¿™ç§å½¢è±¡åŠ æ·±ã€‚</li>\n<li><strong>è¿™ä¸–ç•Œä¸Šå”¯ä¸€ä¸å˜çš„å°±æ˜¯å˜åŒ–ã€‚</strong>å¼€æ”¾æ€è€ƒï¼Œé¢å¸¦å¾®ç¬‘çš„æ¥å—å®ƒã€‚æŠŠéœ€æ±‚ä¸Šã€å¹³å°æˆ–å·¥å…·é‡Œçš„æ¯ä¸ªæ”¹å˜éƒ½è§†ä½œä¸€ç§æ–°çš„æŒ‘æˆ˜ï¼Œè€Œä¸æ˜¯æŠŠå®ƒä»¬å½“ä½œå¤§éº»çƒ¦æ¥æŠµåˆ¶ã€‚</li>\n<li><strong>çœŸæ­£çš„æƒå¨æ¥è‡ªçŸ¥è¯†ï¼Œè€Œä¸æ˜¯èŒä½ã€‚</strong>çŸ¥è¯†é€ å°±æƒå¨ï¼Œæƒå¨å¸¦æ¥å°Šæ•¬â€”â€”æ‰€ä»¥ï¼Œå¦‚æœä½ æƒ³åœ¨ä¸€ä¸ªæ— ç§çš„ç¯å¢ƒä¸­è·å¾—å°Šæ•¬ï¼Œå»åŸ¹å…»è‡ªå·±çš„çŸ¥è¯†å§ã€‚</li>\n<li><strong>ä¸ºä¿¡ä»°å¥‹æ–—ï¼Œä½†æˆ‘æ–‡é›…çš„æ¥å—å¤±è´¥ã€‚</strong>è¦ç†è§£ï¼Œæœ‰æ—¶å€™ä½ çš„æƒ³æ³•ä¼šè¢«æ‹’ç»ã€‚å³ä½¿ä½ æ˜¯å¯¹çš„ï¼Œä½ ä¹Ÿä¸è¦æŠ¥å¤æˆ–è¯´â€œI told you so.â€åƒä¸‡ä¸è¦è®©ä½ å¿ƒçˆ±çš„è¢«æŠ›å¼ƒçš„æƒ³æ³•å˜æˆæ®‰é“è€…æˆ–æŠ±æ€¨ç´ æã€‚</li>\n<li><strong>ä¸è¦æˆä¸ºâ€œè§’è½é‡Œçš„ç¨‹åºå‘˜ã€‚â€</strong>ä¸è¦æˆä¸ºéšè—åœ¨é»‘æš—åŠå…¬å®¤é‡Œã€åªå› ä¸ºå£æ¸´æ‰å‡ºç°çš„äººã€‚è—åœ¨è§’è½çš„é‡Œç¨‹åºå‘˜çŸ­è§†ã€ä¸ä¸–éš”ç»ã€ä¸å—æ§åˆ¶ã€‚è¿™æ ·çš„äººåœ¨å…¬å¼€çš„ã€åˆä½œçš„å·¥ä½œç¯å¢ƒä¸­å‘ä¸å‡ºå£°éŸ³ã€‚å‚ä¸åˆ°äº¤æµä¸­ï¼Œæˆä¸ºä½ çš„åŠå…¬å®¤å›¢ä½“ä¸­çš„ä¸€å‘˜ã€‚</li>\n<li><strong>æ‰¹è¯„ä»£ç è€Œä¸æ˜¯äººâ€”â€”å¯¹ç¼–ç äººå‹å–„ï¼Œä½†ä¸è¦å¯¹ä»£ç å‹å–„ã€‚</strong>å°½å¯èƒ½çš„è®©ä½ çš„æ‰¹è¯„å…·æœ‰ç§¯ææ€§ï¼Œä»¥æ”¹è¿›ä»£ç ä¸ºç›®æ ‡ã€‚æ‰¹è¯„è¦è”ç³»æœ¬åœ°æ ‡å‡†ï¼Œç¼–ç¨‹è§„æ ¼æ–‡æ¡£å’Œæé«˜åçš„æ€§èƒ½ç­‰ã€‚</li>\n</ol>\n","categories":["éšè®°"],"tags":["éšè®°"]},{"title":"Centos7-Install-ELK","url":"/posts/1715256040/","content":"<blockquote>\n<p>18å¹´å¹´åˆçš„ç¬”è®°ï¼Œè¢«æˆ‘ç¿»å‡ºæ¥äº†ã€‚</p>\n</blockquote>\n<h1 id=\"EL-B-Kå¹³å°\"><a href=\"#EL-B-Kå¹³å°\" class=\"headerlink\" title=\"EL(B)Kå¹³å°\"></a>EL(B)Kå¹³å°</h1><blockquote>\n<p>Elastic Stackï¼ˆæ—§ç§°ELK Stackï¼‰ï¼Œæ˜¯ä¸€ç§èƒ½å¤Ÿä»ä»»æ„æ•°æ®æºæŠ½å–æ•°æ®ï¼Œå¹¶å®æ—¶å¯¹æ•°æ®è¿›è¡Œæœç´¢ã€åˆ†æå’Œå¯è§†åŒ–å±•ç°çš„æ•°æ®åˆ†ææ¡†æ¶ã€‚ï¼ˆhadoopåŒä¸€ä¸ªå¼€å‘äººå‘˜ï¼‰</p>\n<p><a href=\"https://www.elastic.co/cn/products\" target=\"_blank\" rel=\"noopener\">elastic å®˜ç½‘</a></p>\n</blockquote>\n<h2 id=\"EL-B-Kæ˜¯å•¥æŠ€æœ¯\"><a href=\"#EL-B-Kæ˜¯å•¥æŠ€æœ¯\" class=\"headerlink\" title=\"EL(B)Kæ˜¯å•¥æŠ€æœ¯\"></a>EL(B)Kæ˜¯å•¥æŠ€æœ¯</h2><ul>\n<li>java å¼€å‘çš„å¼€æºçš„å…¨æ–‡æœç´¢å¼•æ“å·¥å…·ã€‚</li>\n<li>åŸºäºlucenceæœç´¢å¼•æ“çš„ã€‚</li>\n<li>é‡‡ç”¨ restful - api æ ‡å‡†çš„ã€‚</li>\n<li>é«˜å¯ç”¨ã€é«˜æ‰©å±•çš„åˆ†å¸ƒå¼æ¡†æ¶ã€‚</li>\n<li>å®æ—¶æ•°æ®åˆ†æçš„ã€‚</li>\n</ul>\n<h3 id=\"E\"><a href=\"#E\" class=\"headerlink\" title=\"E\"></a>E</h3><blockquote>\n<p>Elasticsearch æ˜¯åŸºäº JSON çš„åˆ†å¸ƒå¼æœç´¢å’Œåˆ†æå¼•æ“ï¼Œä¸“ä¸ºå®ç°æ°´å¹³æ‰©å±•ã€é«˜å¯ç”¨å’Œç®¡ç†ä¾¿æ·æ€§è€Œè®¾è®¡ã€‚</p>\n</blockquote>\n<h3 id=\"L\"><a href=\"#L\" class=\"headerlink\" title=\"L\"></a>L</h3><blockquote>\n<p>Logstash æ˜¯åŠ¨æ€æ•°æ®æ”¶é›†ç®¡é“ï¼Œæ‹¥æœ‰å¯æ‰©å±•çš„æ’ä»¶ç”Ÿæ€ç³»ç»Ÿï¼Œèƒ½å¤Ÿä¸ Elasticsearch äº§ç”Ÿå¼ºå¤§çš„ååŒä½œç”¨ã€‚</p>\n</blockquote>\n<h3 id=\"B\"><a href=\"#B\" class=\"headerlink\" title=\"B\"></a>B</h3><blockquote>\n<p>Beats æ˜¯è½»é‡å‹é‡‡é›†å™¨çš„å¹³å°ï¼Œä»è¾¹ç¼˜æœºå™¨å‘ Logstash å’Œ Elasticsearch å‘é€æ•°æ®ã€‚</p>\n</blockquote>\n<h3 id=\"K\"><a href=\"#K\" class=\"headerlink\" title=\"K\"></a>K</h3><blockquote>\n<p>Kibana èƒ½å¤Ÿä»¥å›¾è¡¨çš„å½¢å¼å‘ˆç°æ•°æ®ï¼Œå¹¶ä¸”å…·æœ‰å¯æ‰©å±•çš„ç”¨æˆ·ç•Œé¢ï¼Œä¾›æ‚¨å…¨æ–¹ä½é…ç½®å’Œç®¡ç† Elastic Stackã€‚</p>\n</blockquote>\n<h2 id=\"ä¸‹è½½ç¨‹åº\"><a href=\"#ä¸‹è½½ç¨‹åº\" class=\"headerlink\" title=\"ä¸‹è½½ç¨‹åº\"></a>ä¸‹è½½ç¨‹åº</h2><a id=\"more\"></a>\n\n<h3 id=\"ä¸‹è½½Logstash\"><a href=\"#ä¸‹è½½Logstash\" class=\"headerlink\" title=\"ä¸‹è½½Logstash\"></a>ä¸‹è½½Logstash</h3><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">wget https:&#x2F;&#x2F;artifacts.elastic.co&#x2F;downloads&#x2F;logstash&#x2F;logstash-5.6.3.tar.gz</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"ä¸‹è½½Elasticsearch\"><a href=\"#ä¸‹è½½Elasticsearch\" class=\"headerlink\" title=\"ä¸‹è½½Elasticsearch\"></a>ä¸‹è½½Elasticsearch</h3><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">wget https:&#x2F;&#x2F;artifacts.elastic.co&#x2F;downloads&#x2F;elasticsearch&#x2F;elasticsearch-5.6.3.tar.gz</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"ä¸‹è½½Kibana\"><a href=\"#ä¸‹è½½Kibana\" class=\"headerlink\" title=\"ä¸‹è½½Kibana\"></a>ä¸‹è½½Kibana</h3><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">wget https:&#x2F;&#x2F;artifacts.elastic.co&#x2F;downloads&#x2F;kibana&#x2F;kibana-5.6.3-linux-x86_64.tar.gz</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"æµ‹è¯•è¿è¡Œ\"><a href=\"#æµ‹è¯•è¿è¡Œ\" class=\"headerlink\" title=\"æµ‹è¯•è¿è¡Œ\"></a>æµ‹è¯•è¿è¡Œ</h2><h3 id=\"Logstash\"><a href=\"#Logstash\" class=\"headerlink\" title=\"Logstash\"></a>Logstash</h3><ul>\n<li>è§£å‹</li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">tar -zxvf logstash-5.6.3.tar.gz</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>é»˜è®¤è§£å‹åæ˜¯æ²¡æœ‰é…ç½®æ–‡ä»¶çš„,éœ€è¦æ‰‹åŠ¨åˆ›å»ºä¸€ä¸ªã€‚æ–‡ä»¶å<code>logstarsh.conf</code>è¿™é‡Œåªæ˜¯è®©å®ƒæ­£å¸¸å¯åŠ¨ã€‚å¡«å†™åŸºæœ¬é…ç½®ã€‚</li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">input&#123;</span><br><span class=\"line\">        stdin&#123;  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br><span class=\"line\">output&#123;</span><br><span class=\"line\">        stdout&#123;</span><br><span class=\"line\">                codec &#x3D;&gt; rubydebug</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>å°è¯•å¯åŠ¨logstashå¹¶éªŒè¯æ˜¯å¦é…ç½®æˆåŠŸï¼Œåœ¨logstashçš„è§£å‹ç›®å½•ä¸‹æ‰§è¡Œå‘½ä»¤ï¼š./bin/logstash -f logstash.conf,å‡ºç°å¦‚ä¸‹æˆªå›¾è¡¨æ˜é…ç½®æˆåŠŸ,ä»å¯åŠ¨ä¿¡æ¯ä¸­ä¹Ÿèƒ½çœ‹å‡ºæ—¥å¿—è·¯å¾„ï¼Œç«¯å£ç­‰ä¿¡æ¯</li>\n</ul>\n<p><img src=\"https://z201.oss-cn-shanghai.aliyuncs.com/JavaNote/elk/logstash.png\" alt=\"img\"></p>\n<ul>\n<li>æ¼”ç¤ºå¯åŠ¨æˆåŠŸã€‚åœ¨äº¤äº’å‘½ä»¤ä¸­è¾“å…¥ hello world ä¼šè¢«è¾“å‡ºæˆæ¶ˆæ¯ã€‚</li>\n</ul>\n<h3 id=\"Elasticsearch\"><a href=\"#Elasticsearch\" class=\"headerlink\" title=\"Elasticsearch\"></a>Elasticsearch</h3><ul>\n<li>è§£å‹</li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">tar -zxvf elasticsearch-5.6.3.tar.gz</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>é»˜è®¤è‡ªå¸¦ä¸€ä¸ªé…ç½®æ–‡ä»¶,éœ€è¦ä¿®æ”¹å†…å®¹ã€‚elasticsearchç›®å½•ä¸‹/config/elasticsearch.ymlã€‚<ul>\n<li>path.dataä¿®æ”¹ä¸ºè‡ªå·±æœ¬æœºçš„dataè·¯å¾„ï¼Œè‡ªå®šä¹‰(è¿™ä¸ªè·¯å¾„å¦‚æœä¸å­˜åœ¨çš„è¯éœ€è¦æ‰‹åŠ¨å»åˆ›å»º)</li>\n<li>path,logsä¿®æ”¹ä¸ºè‡ªå·±æœ¬æœºçš„logsè·¯å¾„ï¼Œä¹Ÿæ˜¯è‡ªå®šä¹‰å§ï¼ˆè¿™ä¸ªè·¯å¾„å¦‚æœä¸å­˜åœ¨çš„è¯ï¼Œå¯åŠ¨elasticsearchä¼šè‡ªåŠ¨åˆ›å»ºï¼‰</li>\n<li>network.hostä¿®æ”¹ä¸ºå®‰è£…æœåŠ¡å™¨åœ°å€</li>\n<li>http.portä¸ºhttpè®¿é—®ç«¯å£ï¼Œé»˜è®¤æ˜¯9200ã€‚</li>\n</ul>\n</li>\n</ul>\n<p><img src=\"https://z201.oss-cn-shanghai.aliyuncs.com/JavaNote/elk/es.png\" alt=\"img\"></p>\n<ul>\n<li>æµ‹è¯•è¿è¡Œ./bin/elasticsearch.</li>\n</ul>\n<p><img src=\"https://z201.oss-cn-shanghai.aliyuncs.com/JavaNote/elk/es_WARNING.png\" alt=\"img\"></p>\n<ul>\n<li>å¦‚æœä½¿ç”¨rootè¿è¡Œä¼šæŠ¥é”™ï¼Œelasticsearchå‡ºäºå®‰å…¨è€ƒè™‘é»˜è®¤æ˜¯ä¸èƒ½ç”¨rootå»å¯åŠ¨çš„,è¿™æ˜¯å‡ºäºç³»ç»Ÿå®‰å…¨è€ƒè™‘è®¾ç½®çš„æ¡ä»¶,æ‰€ä»¥ä¸ºelasticsearchåˆ›å»ºä¸€ä¸ªç”¨æˆ·ç»„å’Œç”¨æˆ·å§ã€‚</li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">&#x2F;&#x2F;åˆ›å»ºelastic ç”¨æˆ·ç»„åŠç”¨æˆ·ï¼š</span><br><span class=\"line\">groupadd elastic</span><br><span class=\"line\">&#x2F;&#x2F;å¸å· elastic å¯†ç  eone</span><br><span class=\"line\">useradd elastic -g elastic -p eone</span><br><span class=\"line\">&#x2F;&#x2F;æ›´æ”¹elasticsearchæ–‡ä»¶å¤¹åŠå†…éƒ¨æ–‡ä»¶çš„æ‰€å±ç”¨æˆ·åŠç»„ä¸ºelastic:elasticï¼š</span><br><span class=\"line\">chown -R elastic:elastic elasticsearch-5.6.3</span><br><span class=\"line\">&#x2F;&#x2F;åˆ‡æ¢ç”¨æˆ· </span><br><span class=\"line\">su elastic</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>å†å¯åŠ¨ã€‚</li>\n</ul>\n<p><img src=\"https://z201.oss-cn-shanghai.aliyuncs.com/JavaNote/elk/es_WARNING1.png\" alt=\"img\"></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">åˆ‡æ¢åˆ°rootç”¨æˆ·ç¼–è¾‘limit.confæ–‡ä»¶</span><br><span class=\"line\">vi &#x2F;etc&#x2F;security&#x2F;limits.conf</span><br><span class=\"line\">åœ¨æ–‡ä»¶æœ«å°¾æ·»åŠ </span><br><span class=\"line\">elastic soft nofile 65536</span><br><span class=\"line\">elastic hard nofile 65536</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>å†å¯åŠ¨</li>\n</ul>\n<p><img src=\"https://z201.oss-cn-shanghai.aliyuncs.com/JavaNote/elk/es_WARNING2.png\" alt=\"img\"></p>\n<ul>\n<li>é‡‡ç”¨äº†è™šæ‹Ÿæœºï¼Œæ‰€ä¸´æ—¶ä¿®æ”¹ä¸‹ã€‚</li>\n</ul>\n<p>*<strong>æ­¤æ“ä½œéœ€è¦rootæƒé™</strong></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">[root@localhost ~]# sysctl -w vm.max_map_count&#x3D;2621441</span><br></pre></td></tr></table></figure>\n\n<p>æŸ¥çœ‹ä¿®æ”¹ç»“æœ</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">[root@localhost ~]# sysctl -a|grep vm.max_map_count</span><br><span class=\"line\">vm.max_map_count &#x3D; 262144</span><br></pre></td></tr></table></figure>\n\n<p>è®¿é—®Elasticsearch </p>\n<ul>\n<li>æ³¨æ„é»˜è®¤çš„é˜²ç«å¢™ï¼Œæµ‹è¯•ç¯å¢ƒå»ºè®®å…³æ‰ã€‚</li>\n</ul>\n<p><img src=\"https://z201.oss-cn-shanghai.aliyuncs.com/JavaNote/elk/es1.png\" alt=\"img\"></p>\n<ul>\n<li>å¦‚æœä¸­æ–­æ‰çª—å£æˆ–è€…æ„å¤–é€€å‡ºå°±å¯¼è‡´elasticsearch stopç¨‹åºã€‚</li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">&#x2F;&#x2F; å¯åŠ¨çš„æ—¶å€™æ·»åŠ -d å‚æ•°åå°è¿è¡Œ</span><br><span class=\"line\">.&#x2F;bin&#x2F;elasticsearch -d</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"Kibana\"><a href=\"#Kibana\" class=\"headerlink\" title=\"Kibana\"></a>Kibana</h3><ul>\n<li>è§£å‹</li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">tar -zxvf kibana-5.6.3.tar.gz</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>ä¿®æ”¹é…ç½®æ–‡ä»¶è¿›å…¥kibanaçš„è§£å‹ç›®å½•çš„configç›®å½•ä¸‹ï¼Œç¼–è¾‘kibana.ymlï¼Œserver.portï¼š5601æ”¾å¼€ï¼Œserver.hostä¿®æ”¹ä¸ºkibanaçš„å®‰è£…æœåŠ¡å™¨ï¼Œé…ç½®elasticsearchçš„è·¯å¾„ç«¯å£</li>\n</ul>\n<p><img src=\"https://z201.oss-cn-shanghai.aliyuncs.com/JavaNote/elk/kibana.png\" alt=\"img\"></p>\n","categories":["Linuxè¿ç»´"],"tags":["Centos7","Linux","Elasticsearch","Logstash","Kibana"]},{"title":"Centos7-Install-Sonarqube","url":"/posts/2041777895/","content":"<blockquote>\n<p>18å¹´å¹´åˆçš„ç¬”è®°ï¼Œè¢«æˆ‘ç¿»å‡ºæ¥äº†ã€‚</p>\n</blockquote>\n<h1 id=\"Sonarqube\"><a href=\"#Sonarqube\" class=\"headerlink\" title=\"Sonarqube\"></a>Sonarqube</h1><blockquote>\n<p>ä»£ç è´¨é‡ç¼ºé™·æ£€æµ‹</p>\n</blockquote>\n<p><a href=\"https://www.sonarqube.org/\" target=\"_blank\" rel=\"noopener\">sonarqubeå®˜ç½‘</a></p>\n<h2 id=\"å®‰è£…å®ä¾‹\"><a href=\"#å®‰è£…å®ä¾‹\" class=\"headerlink\" title=\"å®‰è£…å®ä¾‹\"></a>å®‰è£…å®ä¾‹</h2><ul>\n<li>sonarqube6.7.1</li>\n<li>sonar-scanner-cli-3.0.2.768</li>\n</ul>\n<blockquote>\n<p>sonarqubeæ˜¯æœåŠ¡ç«¯åŒ…å«esã€ecã€webã€‚</p>\n<p>sonar-scanner å®¢æˆ·ç«¯ä¸»è¦å°†ä»£ç ç­›é€‰å¹¶ä¸Šä¼ è‡³sonarqubeã€‚</p>\n</blockquote>\n<a id=\"more\"></a>\n\n<h3 id=\"ä¸‹è½½\"><a href=\"#ä¸‹è½½\" class=\"headerlink\" title=\"ä¸‹è½½\"></a>ä¸‹è½½</h3><figure class=\"highlight sh\"><table><tr><td class=\"code\"><pre><span class=\"line\">wget -c https://sonarsource.bintray.com/Distribution/sonarqube/sonarqube-6.7.1.zip</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"è§£å‹\"><a href=\"#è§£å‹\" class=\"headerlink\" title=\"è§£å‹\"></a>è§£å‹</h3><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">unzip sonarqube-6.7.1.zip</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"ç§»åŠ¨\"><a href=\"#ç§»åŠ¨\" class=\"headerlink\" title=\"ç§»åŠ¨\"></a>ç§»åŠ¨</h3><figure class=\"highlight sh\"><table><tr><td class=\"code\"><pre><span class=\"line\">mkdir -p /opt/sonarqube</span><br><span class=\"line\">mv ./sonarqube-6.7.1  /opt/sonarqube</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"ä¿®æ”¹é…ç½®\"><a href=\"#ä¿®æ”¹é…ç½®\" class=\"headerlink\" title=\"ä¿®æ”¹é…ç½®\"></a>ä¿®æ”¹é…ç½®</h2><figure class=\"highlight sh\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">cd</span> /opt/sonarqube/sonarqube-6.7.1/conf</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>æŸ¥çœ‹é…ç½®æ–‡ä»¶</li>\n</ul>\n<figure class=\"highlight sh\"><table><tr><td class=\"code\"><pre><span class=\"line\">[root@localhost conf]<span class=\"comment\"># ls</span></span><br><span class=\"line\">sonar.properties  wrapper.conf</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><p>æœ‰ä¸¤ä¸ªé…ç½®æ–‡ä»¶</p>\n<ul>\n<li><p>sonar.properties </p>\n</li>\n<li><p>wrapper.conf </p>\n<p>â€‹    é…ç½®æ–‡ä»¶å†…å®¹è¾ƒå¤šï¼Œç®€å•æµ‹è¯•è¿è¡Œåªéœ€è¦ä¿®æ”¹</p>\n</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"é…ç½®sonar-properties\"><a href=\"#é…ç½®sonar-properties\" class=\"headerlink\" title=\"é…ç½®sonar.properties\"></a>é…ç½®sonar.properties</h3><p><img src=\"https://z201.oss-cn-shanghai.aliyuncs.com/JavaNote/sonarqube/sonar.png\"></p>\n<ul>\n<li>é…ç½®webè®¿é—®æƒé™0.0.0.0 å°±æ˜¯å¤§å®¶éƒ½å¯ä»¥è®¿é—®ã€‚</li>\n<li>é…ç½®portå°±æ˜¯webç«¯å£å·ã€‚</li>\n</ul>\n<p><img src=\"https://z201.oss-cn-shanghai.aliyuncs.com/JavaNote/sonarqube/mysql.png\"></p>\n<ul>\n<li>mysqlè¿æ¥ï¼Œwebæ˜¯éœ€è¦è¿æ¥mysqlçš„ã€‚ä¸»è¦æå‰è£…ä¸€ä¸ªmysqlã€‚ç›´æ¥è¿æ¥è¿›å…¥ç¬¬ä¸€æ¬¡ä¼šè‡ªåŠ¨åˆ›å»ºè¡¨ç»“æ„ã€‚^_^</li>\n</ul>\n<h3 id=\"é…ç½®wrapper-conf\"><a href=\"#é…ç½®wrapper-conf\" class=\"headerlink\" title=\"é…ç½®wrapper.conf\"></a>é…ç½®wrapper.conf</h3><p><img src=\"https://z201.oss-cn-shanghai.aliyuncs.com/JavaNote/sonarqube/wrapper.png\"></p>\n<ul>\n<li>emmç®€å•é…ç½®ï¼›æŒ‡å‘æœ¬åœ°javaã€‚ä¸æŒ‡å®šä¼šå‡ºç°å¯åŠ¨å¤±è´¥çš„é—®é¢˜ã€‚</li>\n</ul>\n<h2 id=\"æµ‹è¯•å¯åŠ¨\"><a href=\"#æµ‹è¯•å¯åŠ¨\" class=\"headerlink\" title=\"æµ‹è¯•å¯åŠ¨\"></a>æµ‹è¯•å¯åŠ¨</h2><ul>\n<li>ä¸è¦ä½¿ç”¨rootæƒé™å¯åŠ¨ï¼Œå› ä¸ºelasticsearchä½œä¸ºç»„ä»¶ä¹Ÿåœ¨é‡Œé¢ï¼Œ</li>\n</ul>\n<blockquote>\n<ul>\n<li>å¦‚æœä½¿ç”¨rootè¿è¡Œä¼šæŠ¥é”™ï¼Œelasticsearchå‡ºäºå®‰å…¨è€ƒè™‘é»˜è®¤æ˜¯ä¸èƒ½ç”¨rootå»å¯åŠ¨çš„,è¿™æ˜¯å‡ºäºç³»ç»Ÿå®‰å…¨è€ƒè™‘è®¾ç½®çš„æ¡ä»¶,æ‰€ä»¥ä¸ºelasticsearchåˆ›å»ºä¸€ä¸ªç”¨æˆ·ç»„å’Œç”¨æˆ·å§ã€‚</li>\n</ul>\n</blockquote>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">&#x2F;&#x2F;sonarqube ç”¨æˆ·ç»„åŠç”¨æˆ·ï¼š</span><br><span class=\"line\">groupadd sonarqube</span><br><span class=\"line\">&#x2F;&#x2F;å¸å· sonarqube å¯†ç  eone</span><br><span class=\"line\">useradd sonarqube -g sonarqube -p eone</span><br><span class=\"line\">&#x2F;&#x2F;æ›´æ”¹elasticsearchæ–‡ä»¶å¤¹åŠå†…éƒ¨æ–‡ä»¶çš„æ‰€å±ç”¨æˆ·åŠç»„ä¸ºelastic:elasticï¼š</span><br><span class=\"line\">chown -R sonarqube:sonarqube sonarqube</span><br><span class=\"line\">&#x2F;&#x2F;åˆ‡æ¢ç”¨æˆ· </span><br><span class=\"line\">su sonarqube</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"æ‰¾åˆ°å¯åŠ¨é…ç½®æ–‡ä»¶ã€‚\"><a href=\"#æ‰¾åˆ°å¯åŠ¨é…ç½®æ–‡ä»¶ã€‚\" class=\"headerlink\" title=\"æ‰¾åˆ°å¯åŠ¨é…ç½®æ–‡ä»¶ã€‚\"></a>æ‰¾åˆ°å¯åŠ¨é…ç½®æ–‡ä»¶ã€‚</h3><figure class=\"highlight sh\"><table><tr><td class=\"code\"><pre><span class=\"line\">sonarqube/sonarqube-6.7.1/bin/linux-x86-64</span><br></pre></td></tr></table></figure>\n\n<p>é…ç½®æ–‡ä»¶å°±åœ¨bin/***/é‡Œé¢ã€‚çœ‹ä½ ç³»ç»Ÿæ˜¯å•¥å°±è¿›å•¥ç›®å½•ã€‚</p>\n<p>æˆ‘æ˜¯linux-x86-64æ‰€ä»¥ã€‚</p>\n<p><img src=\"https://z201.oss-cn-shanghai.aliyuncs.com/JavaNote/sonarqube/command.png\"></p>\n<p>ä¸è¦ç”¨rootå¯åŠ¨ä¸ç„¶elasticsearchä¼šå¯åŠ¨å¤±è´¥ã€‚</p>\n<p>å¯åŠ¨å®Œè®°å¾—æ£€æŸ¥logså’Œè¿›ç¨‹ã€‚</p>\n","categories":["Linuxè¿ç»´"],"tags":["Centos7","Linux","Sonarqube"]},{"title":"çˆ¬è™«å…¥é—¨selenium","url":"/posts/1476484702/","content":"<h2 id=\"Selenium\"><a href=\"#Selenium\" class=\"headerlink\" title=\"Selenium\"></a>Selenium</h2><blockquote>\n<p>Seleniumæ˜¯æœ€å¹¿æ³›ä½¿ç”¨çš„å¼€æºWeb UIï¼ˆç”¨æˆ·ç•Œé¢ï¼‰è‡ªåŠ¨åŒ–æµ‹è¯•å¥—ä»¶ä¹‹ä¸€ã€‚å®ƒæœ€åˆç”±Jason Hugginsäº2004å¹´å¼€å‘ï¼Œä½œä¸ºThought Worksçš„å†…éƒ¨å·¥å…·ã€‚Seleniumæ”¯æŒè·¨ä¸åŒæµè§ˆå™¨ï¼Œå¹³å°å’Œç¼–ç¨‹è¯­è¨€çš„è‡ªåŠ¨åŒ–ã€‚</p>\n</blockquote>\n<ul>\n<li><p>Seleniumå¯ä»¥è½»æ¾éƒ¨ç½²åœ¨Windowsï¼ŒLinuxï¼ŒSolariså’ŒMacintoshç­‰å¹³å°ä¸Šã€‚æ­¤å¤–ï¼Œå®ƒæ”¯æŒiOSï¼ˆiOSï¼ŒWindows Mobileå’ŒAndroidï¼‰ç­‰ç§»åŠ¨åº”ç”¨ç¨‹åºçš„OSï¼ˆæ“ä½œç³»ç»Ÿï¼‰ã€‚</p>\n</li>\n<li><p>Seleniumé€šè¿‡ä½¿ç”¨ç‰¹å®šäºæ¯ç§è¯­è¨€çš„é©±åŠ¨ç¨‹åºæ”¯æŒå„ç§ç¼–ç¨‹è¯­è¨€.Seleniumæ”¯æŒçš„è¯­è¨€åŒ…æ‹¬Cï¼ƒï¼ŒJavaï¼ŒPerlï¼ŒPHPï¼ŒPythonå’ŒRubyã€‚ç›®å‰ï¼ŒSelenium Webé©±åŠ¨ç¨‹åºæœ€å—Javaå’ŒCï¼ƒæ¬¢è¿ã€‚Seleniumæµ‹è¯•è„šæœ¬å¯ä»¥ä½¿ç”¨ä»»ä½•æ”¯æŒçš„ç¼–ç¨‹è¯­è¨€è¿›è¡Œç¼–ç ï¼Œå¹¶ä¸”å¯ä»¥ç›´æ¥åœ¨å¤§å¤šæ•°ç°ä»£Webæµè§ˆå™¨ä¸­è¿è¡Œã€‚Seleniumæ”¯æŒçš„æµè§ˆå™¨åŒ…æ‹¬Internet Explorerï¼ŒMozilla Firefoxï¼ŒGoogle Chromeå’ŒSafariã€‚</p>\n</li>\n</ul>\n<h3 id=\"Selenium-WebDriver\"><a href=\"#Selenium-WebDriver\" class=\"headerlink\" title=\"Selenium WebDriver\"></a>Selenium WebDriver</h3><blockquote>\n<p>Selenium WebDriveræ˜¯Selenium RCçš„ç»§æ‰¿è€…ã€‚Selenium WebDriveræ¥å—å‘½ä»¤ï¼ˆåœ¨Seleneseä¸­å‘é€ï¼Œæˆ–é€šè¿‡å®¢æˆ·ç«¯APIï¼‰å¹¶å°†å®ƒä»¬å‘é€åˆ°æµè§ˆå™¨ã€‚è¿™æ˜¯é€šè¿‡ç‰¹å®šäºæµè§ˆå™¨çš„æµè§ˆå™¨é©±åŠ¨ç¨‹åºå®ç°çš„ï¼Œè¯¥é©±åŠ¨ç¨‹åºå°†å‘½ä»¤å‘é€åˆ°æµè§ˆå™¨å¹¶æ£€ç´¢ç»“æœã€‚å¤§å¤šæ•°æµè§ˆå™¨é©±åŠ¨ç¨‹åºå®é™…ä¸Šå¯åŠ¨å¹¶è®¿é—®æµè§ˆå™¨åº”ç”¨ç¨‹åºã€‚</p>\n</blockquote>\n<ul>\n<li>Selenium WebDriveræ˜¯Selenium Toolå¥—ä»¶ä¸­æœ€é‡è¦çš„ç»„ä»¶ã€‚æœ€æ–°ç‰ˆæœ¬â€œSelenium 2.0â€ä¸WebDriver APIé›†æˆï¼Œæä¾›æ›´ç®€å•ï¼Œæ›´ç®€æ´çš„ç¼–ç¨‹æ¥å£ã€‚</li>\n</ul>\n<p><img src=\"https://z201.oss-cn-shanghai.aliyuncs.com/JavaNote/Selenium/selenium-webdriver.png\"></p>\n<h3 id=\"ç¯å¢ƒé…ç½®\"><a href=\"#ç¯å¢ƒé…ç½®\" class=\"headerlink\" title=\"ç¯å¢ƒé…ç½®\"></a>ç¯å¢ƒé…ç½®</h3><blockquote>\n<p>è¿™é‡Œé€‰ç”¨çš„æ˜¯Google Chromeæµ‹è¯•å¥—ä»¶ã€‚</p>\n</blockquote>\n<ul>\n<li><p>æ³¨æ„ï¼Œä½¿ç”¨jdk8ã€‚</p>\n</li>\n<li><p>ä¸‹è½½ChromeDriver</p>\n<ul>\n<li>ç”±ä¸‰ä¸ªç‹¬ç«‹çš„éƒ¨åˆ†ç»„æˆã€‚æœ‰æµè§ˆå™¨æœ¬èº«ï¼ˆâ€œchromeâ€ï¼‰ï¼ŒSeleniumé¡¹ç›®æä¾›çš„è¯­è¨€ç»‘å®šï¼ˆâ€œé©±åŠ¨ç¨‹åºâ€ï¼‰å’Œä»Chromiumé¡¹ç›®ä¸‹è½½çš„å¯æ‰§è¡Œæ–‡ä»¶ï¼Œå®ƒå……å½“â€œchromeâ€å’Œâ€œdriverâ€ä¹‹é—´çš„æ¡¥æ¢ã€‚æ­¤å¯æ‰§è¡Œæ–‡ä»¶ç§°ä¸ºâ€œchromedriverâ€ï¼Œä½†æˆ‘ä»¬å°†å°è¯•å°†å…¶ç§°ä¸ºæ­¤é¡µé¢ä¸­çš„â€œæœåŠ¡å™¨â€ä»¥å‡å°‘æ··æ·†ã€‚</li>\n<li>æ ¹æ®ç”µè„‘å®‰è£…çš„chromeç‰ˆæœ¬é€‰æ‹©åˆé€‚çš„ç‰ˆæœ¬<a href=\"https://sites.google.com/a/chromium.org/chromedriver/downloads\" target=\"_blank\" rel=\"noopener\">ä¸‹è½½åœ°å€</a></li>\n</ul>\n</li>\n</ul>\n<h4 id=\"å¿«é€Ÿå®‰è£…\"><a href=\"#å¿«é€Ÿå®‰è£…\" class=\"headerlink\" title=\"å¿«é€Ÿå®‰è£…\"></a>å¿«é€Ÿå®‰è£…</h4><figure class=\"highlight sh\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># Mac users with Homebrew installed: </span></span><br><span class=\"line\">brew tap homebrew/cask &amp;&amp; brew cask install chromedriver</span><br><span class=\"line\"><span class=\"comment\"># Debian based Linux distros: </span></span><br><span class=\"line\">sudo apt-get install chromium-chromedriver</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"å¿«é€Ÿæ›´æ–°\"><a href=\"#å¿«é€Ÿæ›´æ–°\" class=\"headerlink\" title=\"å¿«é€Ÿæ›´æ–°\"></a>å¿«é€Ÿæ›´æ–°</h4><figure class=\"highlight sh\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># Mac users with Homebrew reInstall </span></span><br><span class=\"line\">brew cask reinstall chromedriver</span><br></pre></td></tr></table></figure>\n\n<a id=\"more\"></a>\n\n<h3 id=\"æµ‹è¯•ä»£ç \"><a href=\"#æµ‹è¯•ä»£ç \" class=\"headerlink\" title=\"æµ‹è¯•ä»£ç \"></a>æµ‹è¯•ä»£ç </h3><ul>\n<li>Pom.xml</li>\n</ul>\n<figure class=\"highlight xml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">properties</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">junit.version</span>&gt;</span>4.12<span class=\"tag\">&lt;/<span class=\"name\">junit.version</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">lmbok.version</span>&gt;</span>1.18.4<span class=\"tag\">&lt;/<span class=\"name\">lmbok.version</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">slf4j.version</span>&gt;</span>1.7.25<span class=\"tag\">&lt;/<span class=\"name\">slf4j.version</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">logback.version</span>&gt;</span>1.2.3<span class=\"tag\">&lt;/<span class=\"name\">logback.version</span>&gt;</span></span><br><span class=\"line\">        <span class=\"comment\">&lt;!-- pomæ–‡ä»¶éœ€è¦æŒ‡å®šæ‰“åŒ…ç¼–ç é›†ï¼Œ[WARNING] File encoding has not been set, using platform encoding GBK, i.e. build is platform dependent!  --&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">project.build.sourceEncoding</span>&gt;</span>UTF-8<span class=\"tag\">&lt;/<span class=\"name\">project.build.sourceEncoding</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">properties</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">dependencies</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>org.projectlombok<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>lombok<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>$&#123;lmbok.version&#125;<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>com.google.code.gson<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>gson<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>2.8.5<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">&lt;!-- Jsoup å·¥å…·åŒ… --&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>org.jsoup<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>jsoup<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>1.10.2<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">&lt;!-- https://mvnrepository.com/artifact/org.seleniumhq.selenium/selenium-java --&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>org.seleniumhq.selenium<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>selenium-java<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>3.14.0<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>junit<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>junit<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>$&#123;junit.version&#125;<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">scope</span>&gt;</span>test<span class=\"tag\">&lt;/<span class=\"name\">scope</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>org.slf4j<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>slf4j-api<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>$&#123;slf4j.version&#125;<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>ch.qos.logback<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>logback-classic<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>$&#123;logback.version&#125;<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>æ¼”ç¤ºä»£ç ç”¨ä¾‹</li>\n</ul>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> cn.z201.selenium.test;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> lombok.extern.slf4j.Slf4j;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.junit.Test;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.openqa.selenium.By;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.openqa.selenium.WebDriver;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.openqa.selenium.WebElement;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.openqa.selenium.chrome.ChromeDriver;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@author</span> z201.coding@gmail.com</span></span><br><span class=\"line\"><span class=\"comment\"> **/</span></span><br><span class=\"line\"><span class=\"meta\">@Slf</span>4j</span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">SeleniumTest</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Test</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">test</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">        <span class=\"comment\">// è¿™é‡Œæ¼”ç¤ºçš„æ˜¯mac brewå®‰è£…åå°±æ˜¯åœ¨/usr/local/bin/chromedriverè¿™ä¸ªä½ç½®</span></span><br><span class=\"line\">        System.setProperty(<span class=\"string\">\"webdriver.chrome.chromedriver\"</span>, <span class=\"string\">\"/usr/local/bin/chromedriver\"</span>);</span><br><span class=\"line\">        WebDriver driver =  <span class=\"keyword\">new</span> ChromeDriver();</span><br><span class=\"line\">        <span class=\"comment\">// è®¿é—®ç™¾åº¦</span></span><br><span class=\"line\">        driver.get(<span class=\"string\">\"https://www.baidu.com/\"</span>);</span><br><span class=\"line\">        <span class=\"comment\">// è·å–æœç´¢è¾“å…¥èŠ‚ç‚¹</span></span><br><span class=\"line\">        WebElement key = driver.findElement(By.cssSelector(<span class=\"string\">\"#kw\"</span>));</span><br><span class=\"line\">        <span class=\"comment\">// æœç´¢æ è¾“å…¥å€¼</span></span><br><span class=\"line\">        key.sendKeys(<span class=\"string\">\"chromedriver\"</span>);</span><br><span class=\"line\">        <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">            Thread.sleep(<span class=\"number\">3000</span>);</span><br><span class=\"line\">        &#125; <span class=\"keyword\">catch</span> (InterruptedException e) &#123;</span><br><span class=\"line\">            e.printStackTrace();</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"comment\">// è·å–è¡¨å•æäº¤èŠ‚ç‚¹</span></span><br><span class=\"line\">        WebElement submit = driver.findElement(By.cssSelector(<span class=\"string\">\"#su\"</span>));</span><br><span class=\"line\">        <span class=\"comment\">// ç‚¹å‡»æäº¤</span></span><br><span class=\"line\">        submit.click();</span><br><span class=\"line\">        <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">            Thread.sleep(<span class=\"number\">3000</span>);</span><br><span class=\"line\">        &#125; <span class=\"keyword\">catch</span> (InterruptedException e) &#123;</span><br><span class=\"line\">            e.printStackTrace();</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        driver.quit();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>è¿è¡Œå®Œä¸Šé¢çš„ä»£ç å°±å®Œæˆäº†æœ€ç®€å•çš„demoã€‚</li>\n</ul>\n","categories":["çˆ¬è™«"],"tags":["å®è·µ","Selenium"]},{"title":"å®è·µ-jjwtå•å…ƒæµ‹è¯•","url":"/posts/3535935197/","content":"<h2 id=\"JJWT\"><a href=\"#JJWT\" class=\"headerlink\" title=\"JJWT\"></a>JJWT</h2><blockquote>\n<p>ä¹‹å‰æœ‰ä»‹ç»è¿‡<a href=\"https://z201.cn/2019/03/09/%E5%88%9D%E6%8E%A2Jwk/\">JWT</a>çš„åŸºæœ¬äº†è§£ï¼Œæœ¬ç« å†…å®¹ä¸»è¦æ˜¯ç”¨æ¥å®é™…è¿è¡Œä¸‹jjwtçš„apiï¼Œå®Œæˆç›¸åº”çš„å•å…ƒæµ‹è¯•ã€‚</p>\n</blockquote>\n<figure class=\"highlight xml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">properties</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">junit.version</span>&gt;</span>4.12<span class=\"tag\">&lt;/<span class=\"name\">junit.version</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">jjwt.version</span>&gt;</span>0.10.5<span class=\"tag\">&lt;/<span class=\"name\">jjwt.version</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">lmbok.version</span>&gt;</span>1.18.4<span class=\"tag\">&lt;/<span class=\"name\">lmbok.version</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">h2.version</span>&gt;</span>1.4.197<span class=\"tag\">&lt;/<span class=\"name\">h2.version</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">slf4j.version</span>&gt;</span>1.7.25<span class=\"tag\">&lt;/<span class=\"name\">slf4j.version</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">logback.version</span>&gt;</span>1.2.3<span class=\"tag\">&lt;/<span class=\"name\">logback.version</span>&gt;</span></span><br><span class=\"line\">        <span class=\"comment\">&lt;!-- pomæ–‡ä»¶éœ€è¦æŒ‡å®šæ‰“åŒ…ç¼–ç é›†ï¼Œ[WARNING] File encoding has not been set, using platform encoding GBK, i.e. build is platform dependent!  --&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">project.build.sourceEncoding</span>&gt;</span>UTF-8<span class=\"tag\">&lt;/<span class=\"name\">project.build.sourceEncoding</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">properties</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>io.jsonwebtoken<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>jjwt-api<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>$&#123;jjwt.version&#125;<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>io.jsonwebtoken<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>jjwt-impl<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>$&#123;jjwt.version&#125;<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">scope</span>&gt;</span>runtime<span class=\"tag\">&lt;/<span class=\"name\">scope</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>io.jsonwebtoken<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>jjwt-jackson<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>$&#123;jjwt.version&#125;<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">scope</span>&gt;</span>runtime<span class=\"tag\">&lt;/<span class=\"name\">scope</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\"><span class=\"comment\">&lt;!--log --&gt;</span></span><br><span class=\"line\"> <span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>org.slf4j<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>slf4j-api<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>$&#123;slf4j.version&#125;<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\"> <span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>ch.qos.logback<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>logback-classic<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>$&#123;logback.version&#125;<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\"><span class=\"comment\">&lt;!-- æµ‹è¯•æ¡†æ¶ --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>junit<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>junit<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>$&#123;junit.version&#125;<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">scope</span>&gt;</span>test<span class=\"tag\">&lt;/<span class=\"name\">scope</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">  \t<span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>org.projectlombok<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">  \t<span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>lombok<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">  \t<span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>1.18.6<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"æµ‹è¯•ä»£ç \"><a href=\"#æµ‹è¯•ä»£ç \" class=\"headerlink\" title=\"æµ‹è¯•ä»£ç \"></a>æµ‹è¯•ä»£ç </h2><figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> cn.z201.java.test.jjwt;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> io.jsonwebtoken.Claims;</span><br><span class=\"line\"><span class=\"keyword\">import</span> io.jsonwebtoken.JwtBuilder;</span><br><span class=\"line\"><span class=\"keyword\">import</span> io.jsonwebtoken.Jwts;</span><br><span class=\"line\"><span class=\"keyword\">import</span> io.jsonwebtoken.SignatureAlgorithm;</span><br><span class=\"line\"><span class=\"keyword\">import</span> io.jsonwebtoken.security.Keys;</span><br><span class=\"line\"><span class=\"keyword\">import</span> lombok.extern.slf4j.Slf4j;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.junit.Test;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> javax.crypto.SecretKey;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.time.Clock;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.util.Date;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.util.UUID;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@author</span> z201.coding@gmail.com</span></span><br><span class=\"line\"><span class=\"comment\"> **/</span></span><br><span class=\"line\"><span class=\"meta\">@Slf</span>4j</span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">JwtExampleTest</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">private</span> String <span class=\"title\">createJWT</span><span class=\"params\">(String id, String issuer, String subject, <span class=\"keyword\">long</span> ttlMillis, SecretKey key)</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">        Clock clock = Clock.systemDefaultZone();</span><br><span class=\"line\">        Date now = <span class=\"keyword\">new</span> Date(clock.millis());</span><br><span class=\"line\">        <span class=\"comment\">//Let's set the JWT Claims</span></span><br><span class=\"line\">        JwtBuilder builder = Jwts.builder()</span><br><span class=\"line\">                .setId(id)</span><br><span class=\"line\">                .setIssuedAt(now)</span><br><span class=\"line\">                .setSubject(subject)</span><br><span class=\"line\">                .setIssuer(issuer)</span><br><span class=\"line\">                .signWith(key);</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// è®¾ç½®è¿‡æœŸæ—¶é—´</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (ttlMillis &gt;= <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">long</span> expMillis = clock.millis() + ttlMillis;</span><br><span class=\"line\">            Date exp = <span class=\"keyword\">new</span> Date(expMillis);</span><br><span class=\"line\">            builder.setExpiration(exp);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// è¿”å›ç¼–ç ä¹‹åçš„å­—ç¬¦ä¸²</span></span><br><span class=\"line\">        <span class=\"keyword\">return</span> builder.compact();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title\">parseJWT</span><span class=\"params\">(String jwt, SecretKey key)</span> </span>&#123;</span><br><span class=\"line\">        Claims claims = Jwts.parser()</span><br><span class=\"line\">                .setSigningKey(key)</span><br><span class=\"line\">                .parseClaimsJws(jwt).getBody();</span><br><span class=\"line\">        log.info(<span class=\"string\">\"ID: \"</span> + claims.getId());</span><br><span class=\"line\">        log.info(<span class=\"string\">\"Subject: \"</span> + claims.getSubject());</span><br><span class=\"line\">        log.info(<span class=\"string\">\"Issuer: \"</span> + claims.getIssuer());</span><br><span class=\"line\">        log.info(<span class=\"string\">\"Expiration: \"</span> + claims.getExpiration());</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Test</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">testJwt</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"comment\">//The JWT signature algorithm we will be using to sign the token</span></span><br><span class=\"line\">        SecretKey key = Keys.secretKeyFor(SignatureAlgorithm.HS256);</span><br><span class=\"line\">        String jwt = createJWT(UUID.randomUUID().toString() ,  <span class=\"string\">\"issuer\"</span>  , <span class=\"string\">\"subject\"</span> , <span class=\"number\">10000</span> ,key);</span><br><span class=\"line\">        log.info(<span class=\"string\">\"createJWT &#123;&#125; \"</span> , jwt );</span><br><span class=\"line\">        parseJWT(jwt,key);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">è¾“å‡º</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"number\">22</span>:<span class=\"number\">18</span>:<span class=\"number\">48.641</span> [main] INFO cn.z201.java.test.jjwt.JwtExampleTest - createJWT eyJhbGciOiJIUzI1NiJ9.eyJqdGkiOiJjNjFmNzNmZi02OTM4LTQ2MDItYTNkNC1hY2FlZmI3N2Q2YTEiLCJpYXQiOjE1NTI3NDU5MjgsInN1YiI6InN1YmplY3QiLCJpc3MiOiJpc3N1ZXIiLCJleHAiOjE1NTI3NDU5Mzh9.t_ra42L21PMVzto1r2x1fSxCRZFkuk0hSzl2k-b-VWA </span><br><span class=\"line\"><span class=\"number\">22</span>:<span class=\"number\">18</span>:<span class=\"number\">48.694</span> [main] INFO cn.z201.java.test.jjwt.JwtExampleTest - ID: c61f73ff-<span class=\"number\">6938</span>-<span class=\"number\">4602</span>-a3d4-acaefb77d6a1</span><br><span class=\"line\"><span class=\"number\">22</span>:<span class=\"number\">18</span>:<span class=\"number\">48.694</span> [main] INFO cn.z201.java.test.jjwt.JwtExampleTest - Subject: subject</span><br><span class=\"line\"><span class=\"number\">22</span>:<span class=\"number\">18</span>:<span class=\"number\">48.694</span> [main] INFO cn.z201.java.test.jjwt.JwtExampleTest - Issuer: issuer</span><br><span class=\"line\"><span class=\"number\">22</span>:<span class=\"number\">18</span>:<span class=\"number\">48.696</span> [main] INFO cn.z201.java.test.jjwt.JwtExampleTest - Expiration: Sat Mar <span class=\"number\">16</span> <span class=\"number\">22</span>:<span class=\"number\">18</span>:<span class=\"number\">58</span> CST <span class=\"number\">2019</span></span><br></pre></td></tr></table></figure>\n\n","categories":["å®è·µ"],"tags":["Java","JJWT","Junit4"]},{"title":"æºç åˆ†æ-springæºç ç¯å¢ƒæ­å»º","url":"/posts/1025319372/","content":"<h2 id=\"0x00-é˜…è¯»æºä»£ç \"><a href=\"#0x00-é˜…è¯»æºä»£ç \" class=\"headerlink\" title=\"0x00 é˜…è¯»æºä»£ç \"></a>0x00 é˜…è¯»æºä»£ç </h2><h3 id=\"ä¸‹è½½æºä»£ç \"><a href=\"#ä¸‹è½½æºä»£ç \" class=\"headerlink\" title=\"ä¸‹è½½æºä»£ç \"></a>ä¸‹è½½æºä»£ç </h3><ul>\n<li>ä»£ç ä»“åº“åœ°å€ <a href=\"https://gitee.com/Z201/spring-framework.git\" target=\"_blank\" rel=\"noopener\">https://gitee.com/Z201/spring-framework.git</a></li>\n<li>é˜…è¯»ç‰ˆæœ¬å· <code>v5.1.5.RELEASE</code></li>\n<li>ä¸‹è½½ç‰ˆæœ¬<code>git clone -b v5.1.5.RELEASE https://github.com/spring-projects/spring-framework.git</code><ul>\n<li>ç”±äºgithubä¸‹è½½é€Ÿåº¦æ˜¯åœ¨å¤ªæ…¢äº†ï¼Œè¿™é‡Œç”¨giteeå…‹éš†ä¸€ä¸ªé•œåƒã€‚</li>\n<li>ä¸‹è½½ç‰ˆæœ¬<code>git clone -b v5.1.5.RELEASE https://gitee.com/Z201/spring-framework.git</code></li>\n</ul>\n</li>\n<li>å®˜æ–¹æä¾›çš„æ–‡æ¡£<a href=\"https://github.com/spring-projects/spring-framework/blob/master/import-into-idea.md\" target=\"_blank\" rel=\"noopener\"><strong>import-into-idea</strong></a></li>\n</ul>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">âœ  spring-framework git:(master) ./gradlew :spring-oxm:compileTestJava</span><br><span class=\"line\"></span><br><span class=\"line\">Downloading https://services.gradle.org/distributions/gradle-4.10.3-bin.zip</span><br><span class=\"line\">..........................................................................</span><br><span class=\"line\"></span><br><span class=\"line\">Welcome to Gradle 4.10.3!</span><br><span class=\"line\"></span><br><span class=\"line\">Here are the highlights of this release:</span><br><span class=\"line\"> - Incremental Java compilation by default</span><br><span class=\"line\"> - Periodic Gradle caches cleanup</span><br><span class=\"line\"> - Gradle Kotlin DSL 1.0-RC6</span><br><span class=\"line\"> - Nested included builds</span><br><span class=\"line\"> - SNAPSHOT plugin versions <span class=\"keyword\">in</span> the `plugins &#123;&#125;` block</span><br><span class=\"line\"></span><br><span class=\"line\">For more details see https://docs.gradle.org/4.10.3/release-notes.html</span><br><span class=\"line\"></span><br><span class=\"line\">Starting a Gradle Daemon (subsequent builds will be faster)</span><br><span class=\"line\"></span><br><span class=\"line\">&gt; Task :spring-beans:compileTestJava</span><br><span class=\"line\">æ³¨: æŸäº›è¾“å…¥æ–‡ä»¶ä½¿ç”¨æˆ–è¦†ç›–äº†å·²è¿‡æ—¶çš„ APIã€‚</span><br><span class=\"line\">æ³¨: æœ‰å…³è¯¦ç»†ä¿¡æ¯, è¯·ä½¿ç”¨ -Xlint:deprecation é‡æ–°ç¼–è¯‘ã€‚</span><br><span class=\"line\">æ³¨: æŸäº›è¾“å…¥æ–‡ä»¶ä½¿ç”¨äº†æœªç»æ£€æŸ¥æˆ–ä¸å®‰å…¨çš„æ“ä½œã€‚</span><br><span class=\"line\">æ³¨: æœ‰å…³è¯¦ç»†ä¿¡æ¯, è¯·ä½¿ç”¨ -Xlint:unchecked é‡æ–°ç¼–è¯‘ã€‚</span><br><span class=\"line\"></span><br><span class=\"line\">&gt; Task :spring-context:compileTestJava</span><br><span class=\"line\">æ³¨: æŸäº›è¾“å…¥æ–‡ä»¶ä½¿ç”¨æˆ–è¦†ç›–äº†å·²è¿‡æ—¶çš„ APIã€‚</span><br><span class=\"line\">æ³¨: æœ‰å…³è¯¦ç»†ä¿¡æ¯, è¯·ä½¿ç”¨ -Xlint:deprecation é‡æ–°ç¼–è¯‘ã€‚</span><br><span class=\"line\">æ³¨: æŸäº›è¾“å…¥æ–‡ä»¶ä½¿ç”¨äº†æœªç»æ£€æŸ¥æˆ–ä¸å®‰å…¨çš„æ“ä½œã€‚</span><br><span class=\"line\">æ³¨: æœ‰å…³è¯¦ç»†ä¿¡æ¯, è¯·ä½¿ç”¨ -Xlint:unchecked é‡æ–°ç¼–è¯‘ã€‚</span><br><span class=\"line\"></span><br><span class=\"line\">&gt; Task :spring-oxm:genJaxb</span><br><span class=\"line\">[ant:javac] : warning: <span class=\"string\">'includeantruntime'</span> was not <span class=\"built_in\">set</span>, defaulting to build.sysclasspath=last; <span class=\"built_in\">set</span> to <span class=\"literal\">false</span> <span class=\"keyword\">for</span> repeatable builds</span><br><span class=\"line\"></span><br><span class=\"line\">BUILD SUCCESSFUL <span class=\"keyword\">in</span> 9m 18s</span><br><span class=\"line\">58 actionable tasks: 58 executed</span><br><span class=\"line\">âœ  spring-framework git:(master)</span><br></pre></td></tr></table></figure>\n\n<p>å¦‚æœæ˜¾ç¤ºBUILD SUCCESSFUL è¯´æ˜æ„å»ºæˆåŠŸäº†ï¼Œä½†æ˜¯ç”±äºé¡¹ç›®å¤ªå¤§äº†ï¼Œæ‰€ä»¥ä¸‹é¢å°±ä¸ä»‹ç»æ¨¡å—äº†ã€‚</p>\n","categories":["æºç åˆ†æ"],"tags":["Spring"]},{"title":"å®è·µ-Junitå•å…ƒæµ‹è¯•æ¡†æ¶","url":"/posts/1499492201/","content":"<blockquote>\n<p>æœ¬æ–‡ä¸»è¦æ˜¯ä¸ºäº†è®°å½•å¾ˆä¹…ä»¥å‰å¯¹Junitçš„å›é¡¾ã€‚</p>\n</blockquote>\n<h2 id=\"Junit\"><a href=\"#Junit\" class=\"headerlink\" title=\"Junit\"></a>Junit</h2><blockquote>\n<p>Javaå¼€å‘ä¸­ä½¿ç”¨çš„æœ€å¤šçš„æµ‹è¯•æ¡†æ¶ï¼Œå·¥ä½œä¸­ç»å¸¸ä¼šå¤§é‡ä½¿ç”¨ã€‚</p>\n</blockquote>\n<h3 id=\"å»ºè®®éµå®ˆçº¦å®š\"><a href=\"#å»ºè®®éµå®ˆçº¦å®š\" class=\"headerlink\" title=\"å»ºè®®éµå®ˆçº¦å®š\"></a>å»ºè®®éµå®ˆçº¦å®š</h3><ul>\n<li>æµ‹è¯•ç±»åœ¨teståŒ…ä¸‹ï¼ˆå¦‚æœæ˜¯mavenç»“æ„çš„é¡¹ç›®å»ºè®®å»ºè®®ä¸è¦æ–¹åœ¨æºç ä¸­ï¼Œæ—©æœŸçš„é¡¹ç›®å¾ˆå¤šæ˜¯æ²¡æœ‰åŒºåˆ†å¼€çš„ï¼‰</li>\n<li>æµ‹è¯•ç±»å‘½åxxxTestç»“å°¾ã€‚</li>\n<li>æ–¹æ³•å‘½åtestxxxxå‘½åã€‚</li>\n<li>æµ‹è¯•æ–¹æ³•ä¸Šå¿…é¡»ä½¿ç”¨@Testè¿›è¡Œä¿®é¥°ã€‚</li>\n<li>æµ‹è¯•æ–¹æ³•å¿…é¡»ä½¿ç”¨public void è¿›è¡Œä¿®é¥°ï¼Œä¸èƒ½å¸¦ä»»ä½•çš„å‚æ•°ã€‚</li>\n<li>æµ‹è¯•ç±»çš„åŒ…åº”è¯¥å’Œè¢«æµ‹è¯•ç±»ä¿æŒä¸€è‡´ã€‚</li>\n<li>æµ‹è¯•å•å…ƒä¸­çš„æ¯ä¸ªæ–¹æ³•å¿…é¡»ç‹¬ç«‹æµ‹è¯•ï¼Œæµ‹è¯•æ–¹æ³•é—´ä¸èƒ½æœ‰ä»»ä½•çš„ä¾èµ–ã€‚</li>\n</ul>\n<h3 id=\"å¸¸ç”¨æ³¨è§£\"><a href=\"#å¸¸ç”¨æ³¨è§£\" class=\"headerlink\" title=\"å¸¸ç”¨æ³¨è§£\"></a>å¸¸ç”¨æ³¨è§£</h3><ul>\n<li>@Test(expected = ArithmeticException.class) é¢„æœŸå°†æŠ›å‡ºä¸€ä¸ªç®—æœ¯å¼‚å¸¸ã€‚</li>\n<li>@Test(timeout = 10) æ”¹æ–¹æ³•è°ƒç”¨é¢„æœŸçš„æ—¶é—´èŒƒå›´ 10æ¯«ç§’ï¼Œè‹¥è¶…æ—¶ç®—å¤±è´¥ã€‚</li>\n<li>@Ignore è¢«æ”¹æ³¨è§£ä¿®é¥°çš„æ–¹æ³•ä¸ä¼šè¢«æ‰§è¡Œã€‚</li>\n<li>@RunWith å¯ä»¥æ›´æ”¹æµ‹è¯•è¿è¡Œå™¨ï¼Œåˆ¶å®šçš„æµ‹è¯•è¿è¡Œå™¨éœ€è¦ç»§æ‰¿ org.junit.runner.Runnerã€‚</li>\n</ul>\n<a id=\"more\"></a>\n\n<h4 id=\"æ–­è¨€æµ‹è¯•\"><a href=\"#æ–­è¨€æµ‹è¯•\" class=\"headerlink\" title=\"æ–­è¨€æµ‹è¯•\"></a>æ–­è¨€æµ‹è¯•</h4><figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> cn.z201.learn.java.junit.main;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> <span class=\"keyword\">static</span> org.hamcrest.CoreMatchers.is;</span><br><span class=\"line\"><span class=\"keyword\">import</span> <span class=\"keyword\">static</span> org.junit.Assert.assertArrayEquals;</span><br><span class=\"line\"><span class=\"keyword\">import</span> <span class=\"keyword\">static</span> org.junit.Assert.assertEquals;</span><br><span class=\"line\"><span class=\"keyword\">import</span> <span class=\"keyword\">static</span> org.junit.Assert.assertFalse;</span><br><span class=\"line\"><span class=\"keyword\">import</span> <span class=\"keyword\">static</span> org.junit.Assert.assertNotNull;</span><br><span class=\"line\"><span class=\"keyword\">import</span> <span class=\"keyword\">static</span> org.junit.Assert.assertNotSame;</span><br><span class=\"line\"><span class=\"keyword\">import</span> <span class=\"keyword\">static</span> org.junit.Assert.assertNull;</span><br><span class=\"line\"><span class=\"keyword\">import</span> <span class=\"keyword\">static</span> org.junit.Assert.assertSame;</span><br><span class=\"line\"><span class=\"keyword\">import</span> <span class=\"keyword\">static</span> org.junit.Assert.assertThat;</span><br><span class=\"line\"><span class=\"keyword\">import</span> <span class=\"keyword\">static</span> org.junit.Assert.assertTrue;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> org.junit.After;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.junit.AfterClass;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.junit.Before;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.junit.BeforeClass;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.junit.Test;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> cn.z201.learn.java.junit.util.Calculate;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ExampleTset</span> </span>&#123;</span><br><span class=\"line\">   </span><br><span class=\"line\">   <span class=\"meta\">@Test</span></span><br><span class=\"line\">   <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">testSimpleExample</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">      System.out.println(<span class=\"string\">\"this is testSimpleExample\"</span>);</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\">   </span><br><span class=\"line\">   <span class=\"comment\">/*</span></span><br><span class=\"line\"><span class=\"comment\">    * @BeforeClass ä¿®é¥°çš„æ–¹æ³•ä¼šåœ¨æ‰€æœ‰æ–¹æ³•è¢«è¢«è°ƒç”¨é’±æ‰§è¡Œ,è¯¥æ–¹æ³•å¿…é¡»æ˜¯é™æ€çš„ã€‚</span></span><br><span class=\"line\"><span class=\"comment\">    * åœ¨æµ‹è¯•ç±»åŠ è½½å°±ä¼šè¿è¡Œï¼Œè€Œä¸”åœ¨å†…å­˜ä¸­åªä¼šå­˜åœ¨ä¸€ä¸ªå®ä¾‹ã€‚å®ƒæ¯”è¾ƒé€‚åˆåŠ è½½é…ç½®æ–‡ä»¶ã€‚</span></span><br><span class=\"line\"><span class=\"comment\">    */</span></span><br><span class=\"line\">   <span class=\"meta\">@BeforeClass</span></span><br><span class=\"line\">   <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">setUpBeforeClass</span><span class=\"params\">()</span> <span class=\"keyword\">throws</span> Exception</span>&#123;</span><br><span class=\"line\">      System.out.println(<span class=\"string\">\"this is @BeforeClass\"</span>);</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\">   </span><br><span class=\"line\">   <span class=\"comment\">/*</span></span><br><span class=\"line\"><span class=\"comment\">    * @AfterClass æ‰€ä¿®é¥°çš„æ–¹æ³•é€šå¸¸ç”¨æ¥å¯¹èµ„æºçš„æ¸…ç†ï¼Œä¿®é¥°æ–¹æ³•å¿…é¡»æ˜¯é™æ€çš„ã€‚</span></span><br><span class=\"line\"><span class=\"comment\">    */</span></span><br><span class=\"line\">   <span class=\"meta\">@AfterClass</span></span><br><span class=\"line\">   <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">tearDownAfterClass</span><span class=\"params\">()</span>  <span class=\"keyword\">throws</span> Exception</span>&#123;</span><br><span class=\"line\">      System.out.println(<span class=\"string\">\"this is @AfterClass\"</span>);</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\">   </span><br><span class=\"line\">   <span class=\"comment\">/*</span></span><br><span class=\"line\"><span class=\"comment\">    * @Before ä¿®é¥°çš„æ–¹æ³•ä¼šåœ¨æ¯ä¸ªè¢«@Testä¿®é¥°çš„æ–¹æ³•è°ƒç”¨å‰æ‰§è¡Œã€‚</span></span><br><span class=\"line\"><span class=\"comment\">    */</span></span><br><span class=\"line\">   <span class=\"meta\">@Before</span></span><br><span class=\"line\">   <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setUp</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">      System.out.println(<span class=\"string\">\"this is @setUp\"</span>);</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\">   </span><br><span class=\"line\">   <span class=\"comment\">/*</span></span><br><span class=\"line\"><span class=\"comment\">    * @After ä¿®é¥°çš„æ–¹æ³•ä¼šåœ¨æ¯ä¸ªè¢«@Testä¿®é¥°çš„æ–¹æ³•è°ƒç”¨åæ‰§è¡Œã€‚</span></span><br><span class=\"line\"><span class=\"comment\">    */</span></span><br><span class=\"line\">   <span class=\"meta\">@After</span></span><br><span class=\"line\">   <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">tearDown</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">      System.out.println(<span class=\"string\">\"this is @tearDown\"</span>);</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">   <span class=\"meta\">@Test</span></span><br><span class=\"line\">   <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">testSimple</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">      String str_1 = <span class=\"string\">\"this is testSimple\"</span>;</span><br><span class=\"line\">      assertEquals(<span class=\"string\">\"this is testSimple\"</span>, str_1); <span class=\"comment\">//æ£€æŸ¥ä¸¤ä¸ªå˜é‡æˆ–è€…ç­‰å¼æ˜¯å¦å¹³è¡¡</span></span><br><span class=\"line\">      <span class=\"keyword\">int</span> int_1 = <span class=\"number\">2</span>;</span><br><span class=\"line\">      assertFalse(int_1 ==  <span class=\"keyword\">new</span> Calculate().add(<span class=\"number\">2</span>, <span class=\"number\">1</span>)); <span class=\"comment\">//æ£€æŸ¥æ¡ä»¶æ˜¯å‡çš„</span></span><br><span class=\"line\">      <span class=\"keyword\">int</span> int_2 = <span class=\"number\">3</span>;</span><br><span class=\"line\">      assertTrue(int_2 ==  <span class=\"keyword\">new</span> Calculate().add(<span class=\"number\">2</span>, <span class=\"number\">1</span>)); <span class=\"comment\">//æ£€æŸ¥æ¡ä»¶æ˜¯çœŸçš„</span></span><br><span class=\"line\"></span><br><span class=\"line\">      assertNotNull(int_2); <span class=\"comment\">//æ£€æŸ¥å¯¹è±¡ä¸æ˜¯ç©ºçš„</span></span><br><span class=\"line\"></span><br><span class=\"line\">      assertNull(<span class=\"keyword\">null</span>); <span class=\"comment\">//æ£€æŸ¥å¯¹è±¡æ˜¯ç©ºçš„</span></span><br><span class=\"line\"></span><br><span class=\"line\">      assertThat(<span class=\"number\">2</span>, is(<span class=\"number\">2</span>)); <span class=\"comment\">//åˆ¤æ–­2 æ˜¯ä¸æ˜¯ 2</span></span><br><span class=\"line\"></span><br><span class=\"line\">      String str3 = <span class=\"keyword\">null</span>;</span><br><span class=\"line\">      String str4 = <span class=\"string\">\"abc\"</span>;</span><br><span class=\"line\">      String str5 = <span class=\"string\">\"abc\"</span>;</span><br><span class=\"line\">      String[] expectedArray = &#123;<span class=\"string\">\"one\"</span>, <span class=\"string\">\"two\"</span>, <span class=\"string\">\"three\"</span>&#125;;</span><br><span class=\"line\">      String[] resultArray =  &#123;<span class=\"string\">\"one\"</span>, <span class=\"string\">\"two\"</span>, <span class=\"string\">\"three\"</span>&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">      <span class=\"comment\">//æ£€æŸ¥ä¸¤ä¸ªå¯¹è±¡å¼•ç”¨æ˜¯å¦æŒ‡å‘åŒä¸€ä¸ªå¯¹è±¡</span></span><br><span class=\"line\">      assertSame(str4,str5);</span><br><span class=\"line\"></span><br><span class=\"line\">      <span class=\"comment\">//æ£€æŸ¥ä¸¤ä¸ªå¯¹è±¡å¼•ç”¨æ˜¯å¦ä¸æŒ‡å‘åŒä¸€ä¸ªå¯¹è±¡</span></span><br><span class=\"line\">      assertNotSame(str3,str4);</span><br><span class=\"line\"></span><br><span class=\"line\">      <span class=\"comment\">//æ£€æŸ¥ä¸¤ä¸ªæ•°ç»„æ˜¯å¦ç›¸ç­‰ã€‚</span></span><br><span class=\"line\">      assertArrayEquals(expectedArray, resultArray);</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\">   </span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>æµ‹è¯•ç±»</li>\n</ul>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> cn.z201.learn.java.junit.util;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Calculate</span> </span>&#123;</span><br><span class=\"line\">   </span><br><span class=\"line\">   <span class=\"comment\">//ç›¸åŠ </span></span><br><span class=\"line\">   <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">int</span> <span class=\"title\">add</span><span class=\"params\">(<span class=\"keyword\">int</span> a , <span class=\"keyword\">int</span> b)</span></span>&#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> a + b;</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\">   </span><br><span class=\"line\">   <span class=\"comment\">//ç›¸å‡</span></span><br><span class=\"line\">   <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">int</span> <span class=\"title\">subtract</span><span class=\"params\">(<span class=\"keyword\">int</span> a , <span class=\"keyword\">int</span> b)</span></span>&#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> a - b;</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\">   </span><br><span class=\"line\">   <span class=\"comment\">//ç›¸ä¹˜</span></span><br><span class=\"line\">   <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">int</span> <span class=\"title\">multipy</span><span class=\"params\">(<span class=\"keyword\">int</span> a , <span class=\"keyword\">int</span> b)</span></span>&#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> a * b;</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\">   </span><br><span class=\"line\">   <span class=\"comment\">//ç›¸é™¤</span></span><br><span class=\"line\">   <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">int</span> <span class=\"title\">divide</span><span class=\"params\">(<span class=\"keyword\">int</span> a , <span class=\"keyword\">int</span> b)</span></span>&#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> a / b;</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>æµ‹è¯•ç”¨ä¾‹</li>\n</ul>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> cn.z201.learn.java.junit.main;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> <span class=\"keyword\">static</span> org.junit.Assert.*;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> org.junit.Test;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> cn.z201.learn.java.junit.util.Calculate;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">CalculateTest</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">   <span class=\"meta\">@Test</span>(timeout = <span class=\"number\">10</span>)</span><br><span class=\"line\">   <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">testAdd</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">      assertEquals(<span class=\"number\">6</span>, <span class=\"keyword\">new</span> Calculate().add(<span class=\"number\">3</span>, <span class=\"number\">3</span>));</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\">   </span><br><span class=\"line\">   <span class=\"meta\">@Test</span></span><br><span class=\"line\">   <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">testSubtract</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">      assertEquals(<span class=\"number\">0</span>, <span class=\"keyword\">new</span> Calculate().subtract(<span class=\"number\">3</span>, <span class=\"number\">3</span>));</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\">   </span><br><span class=\"line\">   <span class=\"meta\">@Test</span></span><br><span class=\"line\">   <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">testMultipy</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">      assertEquals(<span class=\"number\">9</span>, <span class=\"keyword\">new</span> Calculate().multipy(<span class=\"number\">3</span>, <span class=\"number\">3</span>));</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\">   </span><br><span class=\"line\">   <span class=\"meta\">@Test</span></span><br><span class=\"line\">   <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">testDivide</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">      assertEquals(<span class=\"number\">1</span>, <span class=\"keyword\">new</span> Calculate().divide(<span class=\"number\">3</span>, <span class=\"number\">3</span>));</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\">   </span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"å‚æ•°åŒ–æµ‹è¯•\"><a href=\"#å‚æ•°åŒ–æµ‹è¯•\" class=\"headerlink\" title=\"å‚æ•°åŒ–æµ‹è¯•\"></a>å‚æ•°åŒ–æµ‹è¯•</h4><figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> cn.z201.learn.java.junit.main;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> <span class=\"keyword\">static</span> org.junit.Assert.assertEquals;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> java.util.Arrays;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.util.Collection;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> org.junit.Test;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.junit.runner.RunWith;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.junit.runners.Parameterized;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.junit.runners.Parameterized.Parameters;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> cn.z201.learn.java.junit.util.Calculate;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * å‚æ•°åŒ–æµ‹è¯•</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@author</span> z201</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"meta\">@RunWith</span>(Parameterized<span class=\"class\">.<span class=\"keyword\">class</span>)</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"title\">public</span> <span class=\"title\">class</span> <span class=\"title\">ParameterTest</span> </span>&#123;</span><br><span class=\"line\">   </span><br><span class=\"line\">   <span class=\"keyword\">int</span> expected = <span class=\"number\">0</span>;</span><br><span class=\"line\">   <span class=\"keyword\">int</span> intput_1 = <span class=\"number\">0</span>;</span><br><span class=\"line\">   <span class=\"keyword\">int</span> intput_2 = <span class=\"number\">0</span>;</span><br><span class=\"line\">   </span><br><span class=\"line\">   <span class=\"meta\">@Parameters</span></span><br><span class=\"line\">   <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> Collection&lt;Object[]&gt; collection()&#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> Arrays.asList(<span class=\"keyword\">new</span> Object[][]&#123;</span><br><span class=\"line\">         &#123;<span class=\"number\">3</span>,<span class=\"number\">1</span>,<span class=\"number\">2</span>&#125;,&#123;<span class=\"number\">4</span>,<span class=\"number\">2</span>,<span class=\"number\">2</span>&#125;    </span><br><span class=\"line\">      &#125;);</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">   <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">ParameterTest</span><span class=\"params\">(<span class=\"keyword\">int</span> expected , <span class=\"keyword\">int</span> intput_1 ,<span class=\"keyword\">int</span> intput_2)</span></span>&#123;</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.expected = expected;</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.intput_1  = intput_1;</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.intput_2 = intput_2;</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\">   </span><br><span class=\"line\">   <span class=\"comment\">/*</span></span><br><span class=\"line\"><span class=\"comment\">    * æ‰§è¡Œçš„æ—¶å€™ä¼šè¢«è°ƒç”¨ä¸¤æ¬¡</span></span><br><span class=\"line\"><span class=\"comment\">    */</span></span><br><span class=\"line\">   <span class=\"meta\">@Test</span></span><br><span class=\"line\">   <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">testAdd</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">      assertEquals(expected, <span class=\"keyword\">new</span> Calculate().add(intput_1, intput_2));</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\">   </span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"å¥—ä»¶ä¸­èšåˆæµ‹è¯•\"><a href=\"#å¥—ä»¶ä¸­èšåˆæµ‹è¯•\" class=\"headerlink\" title=\"å¥—ä»¶ä¸­èšåˆæµ‹è¯•\"></a>å¥—ä»¶ä¸­èšåˆæµ‹è¯•</h4><figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> cn.z201.learn.java.junit.main;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> org.junit.runner.RunWith;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.junit.runners.Suite;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * æµ‹è¯•å¥—ä»¶</span></span><br><span class=\"line\"><span class=\"comment\"> * æµ‹è¯•å¥—ä»¶ç±»,å¿…é¡»ä¿è¯æ˜¯ä¸€ä¸ªç©ºç±»ï¼Œå¹¶ä¸”æ˜¯æœ‰public ä¿®é¥°çš„ç±»</span></span><br><span class=\"line\"><span class=\"comment\"> * æµ‹è¯•å¥—ä»¶å¯ä»¥æ‰§è¡Œå…¶ä»–æµ‹è¯•å¥—ä»¶</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"meta\">@RunWith</span>(Suite<span class=\"class\">.<span class=\"keyword\">class</span>)</span></span><br><span class=\"line\"><span class=\"class\">@<span class=\"title\">Suite</span>.<span class=\"title\">SuiteClasses</span>(</span>&#123;ExampleTset<span class=\"class\">.<span class=\"keyword\">class</span>,</span></span><br><span class=\"line\"><span class=\"class\">                <span class=\"title\">CalculateTest</span>.<span class=\"title\">class</span>&#125;)</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"title\">public</span> <span class=\"title\">class</span> <span class=\"title\">SuiteTest</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>","categories":["å®è·µ"],"tags":["Java","Junit4"]},{"title":"åˆæ¢Jwt","url":"/posts/4225444985/","content":"<blockquote>\n<p>Json web token (JWT), æ˜¯ä¸ºäº†åœ¨ç½‘ç»œåº”ç”¨ç¯å¢ƒé—´ä¼ é€’å£°æ˜è€Œæ‰§è¡Œçš„ä¸€ç§åŸºäºJSONçš„å¼€æ”¾æ ‡å‡†ã€‚è¯¥tokenè¢«è®¾è®¡ä¸ºç´§å‡‘ä¸”å®‰å…¨çš„ï¼Œç‰¹åˆ«é€‚ç”¨äºåˆ†å¸ƒå¼ç«™ç‚¹çš„å•ç‚¹ç™»å½•ï¼ˆSSOï¼‰åœºæ™¯ã€‚JWTçš„å£°æ˜ä¸€èˆ¬è¢«ç”¨æ¥åœ¨èº«ä»½æä¾›è€…å’ŒæœåŠ¡æä¾›è€…é—´ä¼ é€’è¢«è®¤è¯çš„ç”¨æˆ·èº«ä»½ä¿¡æ¯ï¼Œä»¥ä¾¿äºä»èµ„æºæœåŠ¡å™¨è·å–èµ„æºï¼Œä¹Ÿå¯ä»¥å¢åŠ ä¸€äº›é¢å¤–çš„å…¶å®ƒä¸šåŠ¡é€»è¾‘æ‰€å¿…é¡»çš„å£°æ˜ä¿¡æ¯ï¼Œè¯¥tokenä¹Ÿå¯ç›´æ¥è¢«ç”¨äºè®¤è¯ï¼Œä¹Ÿå¯è¢«åŠ å¯†ã€‚ä¹Ÿå°±æ˜¯è¯´JWTæ˜¯Tokençš„ä¸€ç§è¡¨è¿°æ€§å£°æ˜è§„èŒƒã€‚</p>\n</blockquote>\n<h2 id=\"JWT-Json-Web-Token\"><a href=\"#JWT-Json-Web-Token\" class=\"headerlink\" title=\"JWT(Json Web Token)\"></a>JWT(Json Web Token)</h2><ul>\n<li>å®˜ç½‘åœ°å€ï¼š<strong><a href=\"https://jwt.io/\" target=\"_blank\" rel=\"noopener\">https://jwt.io/</a></strong></li>\n<li>jwt githubï¼š<strong><a href=\"https://github.com/jwtk/jjwt\" target=\"_blank\" rel=\"noopener\">https://github.com/jwtk/jjwt</a></strong></li>\n</ul>\n<h2 id=\"JWTç”Ÿæˆç¼–ç åçš„æ ·å­\"><a href=\"#JWTç”Ÿæˆç¼–ç åçš„æ ·å­\" class=\"headerlink\" title=\"JWTç”Ÿæˆç¼–ç åçš„æ ·å­\"></a>JWTç”Ÿæˆç¼–ç åçš„æ ·å­</h2><ul>\n<li>ç»“æ„ç±»ä¼¼ xxx.yyy.zzz</li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhZG1pbiIsImF1ZCI6IuWkqeihjOWBpeeuoeeQhueUqOaItyIsImF1ZGllbmNlIjoid2ViIiwibmJmIjoxNTA3Njg0OTQyLCJpc3MiOiJ3d3cuMW9uZS5jbiIsImV4cCI6MTUwNzY4Njc0MiwiaWF0IjoxNTA3Njg0OTQyLCJqdGkiOjEwMDB9.GGF0kFbxNk2ezzuXEJVBZyyL4e4BYMdpse73cSDrUut7cbVyYuLG1CNr8RI7eI3VHz9sdCB14Kesi8rP-v3VJA</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>base64è§£æä¹‹å</li>\n</ul>\n<figure class=\"highlight json\"><table><tr><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">\t<span class=\"attr\">\"body\"</span>:&#123;</span><br><span class=\"line\">\t\t<span class=\"attr\">\"sub\"</span>:<span class=\"string\">\"admin\"</span>,</span><br><span class=\"line\">\t\t<span class=\"attr\">\"aud\"</span>:<span class=\"string\">\"XXXç”¨æˆ·\"</span>,</span><br><span class=\"line\">\t\t<span class=\"attr\">\"audience\"</span>:<span class=\"string\">\"web\"</span>,</span><br><span class=\"line\">\t\t<span class=\"attr\">\"nbf\"</span>:<span class=\"number\">1507684942</span>,</span><br><span class=\"line\">\t\t<span class=\"attr\">\"iss\"</span>:<span class=\"string\">\"www.xxx.cn\"</span>,</span><br><span class=\"line\">\t\t<span class=\"attr\">\"exp\"</span>:<span class=\"number\">1507686742</span>,</span><br><span class=\"line\">\t\t<span class=\"attr\">\"iat\"</span>:<span class=\"number\">1507684942</span>,</span><br><span class=\"line\">\t\t<span class=\"attr\">\"jti\"</span>:<span class=\"number\">1000</span></span><br><span class=\"line\">\t&#125;,</span><br><span class=\"line\">\t<span class=\"attr\">\"header\"</span>:&#123;</span><br><span class=\"line\">\t\t<span class=\"attr\">\"typ\"</span>:<span class=\"string\">\"JWT\"</span>,</span><br><span class=\"line\">\t\t<span class=\"attr\">\"alg\"</span>:<span class=\"string\">\"HS512\"</span></span><br><span class=\"line\">\t&#125;,</span><br><span class=\"line\">\t<span class=\"attr\">\"signature\"</span>:<span class=\"string\">\"GGF0kFbxNk2ezzuXEJVBZyyL4e4BYMdpse73cSDrUut7cbVyYuLG1CNr8RI7eI3VHz9sdCB14Kesi8rP-v3VJA\"</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<a id=\"more\"></a>\n\n<h2 id=\"JWTçš„æ„æˆ\"><a href=\"#JWTçš„æ„æˆ\" class=\"headerlink\" title=\"JWTçš„æ„æˆ\"></a>JWTçš„æ„æˆ</h2><ul>\n<li>ç¬¬ä¸€éƒ¨åˆ†æˆ‘ä»¬ç§°å®ƒä¸ºå¤´éƒ¨ï¼ˆheader),ç¬¬äºŒéƒ¨åˆ†æˆ‘ä»¬ç§°å…¶ä¸ºè½½è·ï¼ˆbody)ï¼Œç¬¬ä¸‰éƒ¨åˆ†æ˜¯ç­¾è¯ï¼ˆsignature)ã€‚</li>\n</ul>\n<h3 id=\"header\"><a href=\"#header\" class=\"headerlink\" title=\"header\"></a>header</h3><ul>\n<li>jwtçš„å¤´éƒ¨æ‰¿è½½ä¸¤éƒ¨åˆ†ä¿¡æ¯ï¼š</li>\n<li>å£°æ˜ç±»å‹ï¼Œè¿™é‡Œæ˜¯jwt</li>\n<li>å£°æ˜åŠ å¯†çš„ç®—æ³• é€šå¸¸ç›´æ¥ä½¿ç”¨ HMAC HS512</li>\n<li>å®Œæ•´çš„å¤´éƒ¨å°±åƒä¸‹é¢è¿™æ ·çš„JSONï¼š</li>\n</ul>\n<figure class=\"highlight\"><table><tr><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">  'typ': 'JWT', //</span><br><span class=\"line\">  'alg': 'HS512'</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>ç„¶åå°†å¤´éƒ¨è¿›è¡Œbase64åŠ å¯†ï¼ˆè¯¥åŠ å¯†æ˜¯å¯ä»¥å¯¹ç§°è§£å¯†çš„),æ„æˆäº†ç¬¬ä¸€éƒ¨åˆ†.</li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"body\"><a href=\"#body\" class=\"headerlink\" title=\"body\"></a>body</h3><ul>\n<li><p>è½½è·å°±æ˜¯å­˜æ”¾æœ‰æ•ˆä¿¡æ¯çš„åœ°æ–¹ã€‚è¿™ä¸ªåå­—åƒæ˜¯ç‰¹æŒ‡é£æœºä¸Šæ‰¿è½½çš„è´§å“ï¼Œè¿™äº›æœ‰æ•ˆä¿¡æ¯åŒ…å«ä¸‰ä¸ªéƒ¨åˆ†</p>\n</li>\n<li><p>æ ‡å‡†ä¸­æ³¨å†Œçš„å£°æ˜</p>\n<ul>\n<li>å…¬å…±çš„å£°æ˜</li>\n<li>ç§æœ‰çš„å£°æ˜</li>\n<li>æ ‡å‡†ä¸­æ³¨å†Œçš„å£°æ˜ (å»ºè®®ä½†ä¸å¼ºåˆ¶ä½¿ç”¨) ï¼š</li>\n</ul>\n</li>\n<li><p>iss: jwtç­¾å‘è€…</p>\n</li>\n<li><p>sub: jwtæ‰€é¢å‘çš„ç”¨æˆ·</p>\n</li>\n<li><p>aud: æ¥æ”¶jwtçš„ä¸€æ–¹</p>\n</li>\n<li><p>exp: jwtçš„è¿‡æœŸæ—¶é—´ï¼Œè¿™ä¸ªè¿‡æœŸæ—¶é—´å¿…é¡»è¦å¤§äºç­¾å‘æ—¶é—´</p>\n</li>\n<li><p>nbf: å®šä¹‰åœ¨ä»€ä¹ˆæ—¶é—´ä¹‹å‰ï¼Œè¯¥jwtéƒ½æ˜¯ä¸å¯ç”¨çš„.</p>\n</li>\n<li><p>iat: jwtçš„ç­¾å‘æ—¶é—´</p>\n</li>\n<li><p>jti: jwtçš„å”¯ä¸€èº«ä»½æ ‡è¯†ï¼Œä¸»è¦ç”¨æ¥ä½œä¸ºä¸€æ¬¡æ€§token,ä»è€Œå›é¿é‡æ”¾æ”»å‡»ã€‚</p>\n</li>\n<li><pre><code>eyJzdWIiOiJhZG1pbiIsImF1ZCI6IuWkqeihjOWBpeeuoeeQhueUqOaItyIsImF1ZGllbmNlIjoid2ViIiwibmJmIjoxNTA3Njg0OTQyLCJpc3MiOiJ3d3cuMW9uZS5jbiIsImV4cCI6MTUwNzY4Njc0MiwiaWF0IjoxNTA3Njg0OTQyLCJqdGkiOjEwMDB9\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">&#96;&#96;&#96;json</span><br><span class=\"line\">&quot;body&quot;:&#123;</span><br><span class=\"line\">\t\t&quot;sub&quot;:&quot;admin&quot;,</span><br><span class=\"line\">\t\t&quot;aud&quot;:&quot;xxç”¨æˆ·&quot;,</span><br><span class=\"line\">\t\t&quot;audience&quot;:&quot;web&quot;,</span><br><span class=\"line\">\t\t&quot;nbf&quot;:1507684942,</span><br><span class=\"line\">\t\t&quot;iss&quot;:&quot;www.xxx.cn&quot;,</span><br><span class=\"line\">\t\t&quot;exp&quot;:1507686742,</span><br><span class=\"line\">\t\t&quot;iat&quot;:1507684942,</span><br><span class=\"line\">\t\t&quot;jti&quot;:1000</span><br><span class=\"line\">\t&#125;</span><br></pre></td></tr></table></figure>\n</code></pre>\n</li>\n</ul>\n<h3 id=\"signature\"><a href=\"#signature\" class=\"headerlink\" title=\"signature\"></a>signature</h3><ul>\n<li>jwtçš„ç¬¬ä¸‰éƒ¨åˆ†æ˜¯ä¸€ä¸ªç­¾è¯ä¿¡æ¯ï¼Œè¿™ä¸ªç­¾è¯ä¿¡æ¯ç”±ä¸‰éƒ¨åˆ†ç»„æˆï¼š</li>\n<li>header (base64åçš„)</li>\n<li>body(base64åçš„)</li>\n<li>secret<ul>\n<li>è¿™ä¸ªéƒ¨åˆ†éœ€è¦base64åŠ å¯†åçš„headerå’Œbase64åŠ å¯†åçš„bodyä½¿ç”¨.è¿æ¥ç»„æˆçš„å­—ç¬¦ä¸²ï¼Œç„¶åé€šè¿‡headerä¸­å£°æ˜çš„åŠ å¯†æ–¹å¼è¿›è¡ŒåŠ ç›secretç»„åˆåŠ å¯†ï¼Œç„¶åå°±æ„æˆäº†jwtçš„ç¬¬ä¸‰éƒ¨åˆ†ã€‚</li>\n</ul>\n</li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">GGF0kFbxNk2ezzuXEJVBZyyL4e4BYMdpse73cSDrUut7cbVyYuLG1CNr8RI7eI3VHz9sdCB14Kesi8rP-v3VJA</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>å¯†é’¥secretæ˜¯ä¿å­˜åœ¨æœåŠ¡ç«¯çš„ï¼ŒæœåŠ¡ç«¯ä¼šæ ¹æ®è¿™ä¸ªå¯†é’¥è¿›è¡Œç”Ÿæˆtokenå’ŒéªŒè¯ï¼Œæ‰€ä»¥éœ€è¦ä¿æŠ¤å¥½ã€‚</li>\n</ul>\n<h2 id=\"JWTæ³¨æ„äº‹é¡¹\"><a href=\"#JWTæ³¨æ„äº‹é¡¹\" class=\"headerlink\" title=\"JWTæ³¨æ„äº‹é¡¹\"></a>JWTæ³¨æ„äº‹é¡¹</h2><ul>\n<li>bodyä¸è¦å­˜æ”¾æ•æ„Ÿä¿¡æ¯ï¼Œå› ä¸ºè¯¥éƒ¨åˆ†ç”¨base64ç¼–ç ï¼Œåœ¨å®¢æˆ·ç«¯æ˜¯å¯è§£çš„ï¼›</li>\n<li>æœåŠ¡ç«¯ä¿æŠ¤å¥½secretç§é’¥ï¼Œä¸€æ—¦å®¢æˆ·ç«¯å¾—å¸¦ç§åŒ™å°±å¯ä»¥è‡ªå·±ç­¾å‘ JWT äº†ï¼›</li>\n</ul>\n<h2 id=\"jwtæ‰©å±•\"><a href=\"#jwtæ‰©å±•\" class=\"headerlink\" title=\"jwtæ‰©å±•\"></a>jwtæ‰©å±•</h2><ul>\n<li>å› ä¸ºtokenæ˜¯ä¿ç•™åˆ°å®¢æˆ·ç«¯ï¼Œæ‰€ä»¥æœåŠ¡ç«¯secretä¿æŠ¤å˜å¾—é¢å¤–é‡è¦ï¼Œå»ºè®®å°†é…ç½®ä¿¡æ¯ä¸­secretåŠ å¯†åä½¿ç”¨ã€‚ä¸å»ºè®®å…¨å±€ä½¿ç”¨åŒä¸€secretåŠ å¯†ã€‚</li>\n<li>RESTé£æ ¼æ¨èä½¿ç”¨jsonä¼ è¾“æ•°æ®,æ‰€ä»¥å¯ä»¥é‡‡ç”¨signatureè¿›è¡Œæ•°æ®åŠ å¯†åæäº¤ã€‚signatureæ¯æ¬¡åˆ·æ–°éƒ½ä¼šæ›´æ–°æ‰€ä»¥å®‰å…¨çº§åˆ«å°†æé«˜å¾ˆå¤šã€‚</li>\n</ul>\n","categories":["åŸºç¡€ç†è®º"],"tags":["JJWT"]},{"title":"åˆæ¢FastDFS","url":"/posts/688330038/","content":"<h2 id=\"FastDfsä»‹ç»\"><a href=\"#FastDfsä»‹ç»\" class=\"headerlink\" title=\"FastDfsä»‹ç»\"></a>FastDfsä»‹ç»</h2><ul>\n<li><p>FastDFSæ˜¯ç”±å›½äººä½™åº†æ‰€å¼€å‘ï¼Œå…¶é¡¹ç›®åœ°å€ï¼š<a href=\"https://github.com/happyfish100\" target=\"_blank\" rel=\"noopener\">FastDFS</a>ã€‚FastDfsæ˜¯ä¸€ä¸ªè½»é‡çº§çš„å¼€æºåˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»Ÿï¼Œä¸»è¦è§£å†³äº†å¤§å®¹é‡çš„æ–‡ä»¶å­˜å‚¨å’Œé«˜å¹¶å‘è®¿é—®çš„é—®é¢˜ï¼Œæ–‡ä»¶å­˜å–æ—¶å®ç°äº†è´Ÿè½½å‡è¡¡ã€‚æ–‡ä»¶å­˜å–æ—¶å®ç°äº†è´Ÿè½½å‡è¡¡FastDFSå®ç°äº†è½¯ä»¶æ–¹å¼çš„RAIDï¼Œå¯ä»¥ä½¿ç”¨å»‰ä»·çš„IDEç¡¬ç›˜è¿›è¡Œå­˜å‚¨æ”¯æŒå­˜å‚¨æœåŠ¡å™¨åœ¨çº¿æ‰©å®¹æ”¯æŒç›¸åŒå†…å®¹çš„æ–‡ä»¶åªä¿å­˜ä¸€ä»½ï¼ŒèŠ‚çº¦ç£ç›˜ç©ºé—´ã€‚</p>\n</li>\n<li><p>FastDFSåªèƒ½é€šè¿‡Client APIè®¿é—®ï¼Œä¸æ”¯æŒPOSIXè®¿é—®æ–¹å¼ã€‚</p>\n</li>\n<li><p>FastDFSç‰¹åˆ«é€‚åˆå¤§ä¸­å‹ç½‘ç«™ä½¿ç”¨ï¼Œç”¨æ¥å­˜å‚¨èµ„æºæ–‡ä»¶ï¼ˆå¦‚ï¼šå›¾ç‰‡ã€æ–‡æ¡£ã€éŸ³é¢‘ã€è§†é¢‘ç­‰ç­‰ï¼‰ã€‚</p>\n</li>\n<li><p>å®ƒç”¨çº¯Cè¯­è¨€å®ç°ï¼Œæ”¯æŒLinuxã€FreeBSDã€AIXç­‰UNIXç³»ç»Ÿã€‚å®ƒåªèƒ½é€šè¿‡ä¸“æœ‰APIå¯¹æ–‡ä»¶è¿›è¡Œå­˜å–è®¿é—®ï¼Œä¸æ”¯æŒPOSIXæ¥å£æ–¹å¼ï¼Œä¸èƒ½mountä½¿ç”¨ã€‚å‡†ç¡®åœ°è®²ï¼ŒGoogle FSã€HDFSã€TFSï¼ˆè¿™ä¸‰ä¸ªéƒ½æ˜¯åº•å±‚ä¸Šçš„å®ç°ï¼Œåœ¨æ–‡ä»¶ç³»ç»Ÿä¸Šå¤„ç†çš„æ˜¯æ•°æ®å—ï¼‰ä»¥åŠFastDFSã€mogileFSï¼ˆè¿™ä¸¤ä¸ªæ˜¯æ–‡ä»¶çº§ä¸Šçš„å®ç°ï¼Œå¤„ç†çš„æ˜¯æ–‡ä»¶ï¼‰ç­‰ç±»Google FSéƒ½ä¸æ˜¯ç³»ç»Ÿçº§çš„åˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»Ÿï¼Œè€Œæ˜¯åº”ç”¨çº§çš„åˆ†å¸ƒå¼æ–‡ä»¶å­˜å‚¨æœåŠ¡ã€‚</p>\n</li>\n<li><p>ç‰¹æ€§</p>\n<ul>\n<li><pre><code>1ã€åˆ†ç»„å­˜å‚¨ï¼Œçµæ´»ç®€æ´ã€å¯¹ç­‰ç»“æ„ï¼Œä¸å­˜åœ¨å•ç‚¹ã€‚\n2ã€æ–‡ä»¶IDç”±FastDFSç”Ÿæˆï¼Œä½œä¸ºæ–‡ä»¶è®¿é—®å‡­è¯ã€‚FastDFSä¸éœ€è¦ä¼ ç»Ÿçš„name serverï¼ˆå»é‡æœºåˆ¶åœ¨æœåŠ¡ç«¯ï¼Œå¯¼è‡´ä¸èƒ½è¾¾åˆ°ç§’ä¼ ã€‚ï¼‰ã€‚\n3ã€å’Œæµè¡Œçš„web serveræ— ç¼è¡”æ¥ï¼ŒFastDFSå·²æä¾›apacheå’Œnginxæ‰©å±•æ¨¡å—ã€‚\n4ã€å¤§ã€ä¸­ã€å°æ–‡ä»¶å‡å¯ä»¥å¾ˆå¥½æ”¯æŒï¼Œæ”¯æŒæµ·é‡å°æ–‡ä»¶å­˜å‚¨ï¼ˆå®é™…ä¸Šä¸å»ºè®®å­˜å‚¨è¶…å¤§æ–‡ä»¶ï¼ˆå¤§äº500Mï¼‰ï¼‰ã€‚\n5ã€æ”¯æŒå¤šå—ç£ç›˜ï¼Œæ”¯æŒå•ç›˜æ•°æ®æ¢å¤ï¼ˆç†è®ºä¸Šï¼Œå®é™…å‡ºç°Storageåˆå¹¶ä¸¢æ“ä½œå¤±æ•°æ®ï¼‰ã€‚\n6ã€æ”¯æŒç›¸åŒæ–‡ä»¶å†…å®¹åªä¿å­˜ä¸€ä»½ï¼ŒèŠ‚çœå­˜å‚¨ç©ºé—´ã€‚\n7ã€å­˜å‚¨æœåŠ¡å™¨ä¸Šå¯ä»¥ä¿å­˜æ–‡ä»¶é™„åŠ å±æ€§ã€‚\n8ã€ä¸‹è½½æ–‡ä»¶æ”¯æŒå¤šçº¿ç¨‹æ–¹å¼ï¼Œæ”¯æŒæ–­ç‚¹ç»­ä¼ ã€‚</code></pre>\n</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"ç³»ç»Ÿæ¶æ„\"><a href=\"#ç³»ç»Ÿæ¶æ„\" class=\"headerlink\" title=\"ç³»ç»Ÿæ¶æ„\"></a>ç³»ç»Ÿæ¶æ„</h2><a id=\"more\"></a>\n\n<h3 id=\"æ¶æ„ç¤ºæ„å›¾\"><a href=\"#æ¶æ„ç¤ºæ„å›¾\" class=\"headerlink\" title=\"æ¶æ„ç¤ºæ„å›¾\"></a>æ¶æ„ç¤ºæ„å›¾</h3><ul>\n<li><img src=\"https://z201.oss-cn-shanghai.aliyuncs.com/JavaNote/FastDFS/fastdfs.png\" alt=\"fastdfsæ¶æ„å›¾\"></li>\n</ul>\n<h4 id=\"æ¶æ„è§’è‰²\"><a href=\"#æ¶æ„è§’è‰²\" class=\"headerlink\" title=\"æ¶æ„è§’è‰²\"></a>æ¶æ„è§’è‰²</h4><ul>\n<li>Trackerå’ŒStorageä¸¤ä¸ªè§’è‰²ï¼Œå…¶ä¸­ç»å¤§å¤šæ•°åŠŸèƒ½éƒ½æ˜¯åœ¨Storageä¸­å®ç°ï¼ŒåŒ…æ‹¬ç½‘ç»œå¤„ç†ã€æ–‡ä»¶ä¸Šä¼ ã€ä¸‹è½½ã€åŒæ­¥ã€ç£ç›˜æ¢å¤ç­‰ä¼—å¤šåŠŸèƒ½</li>\n<li>Tracker clusterä¸­å„ä¸ªtracker serverç›¸äº’ç‹¬ç«‹ï¼Œä¸è¿›è¡Œç›¸äº’é€šä¿¡ã€‚</li>\n<li>Storage clusterä¸­å„ä¸ªstorageç»„ï¼ˆVolume1,Volume2â€¦ï¼‰ç›¸äº’ç‹¬ç«‹ï¼Œä¸è¿›è¡Œç›¸äº’é€šä¿¡ï¼Œä¹Ÿå°±æ˜¯è¯´å„ä¸ªç»„ä¹‹é—´ä¿å­˜çš„æ•°æ®æ˜¯ä¸ç›¸åŒçš„ã€‚ä½†æ˜¯å„ä¸ªç»„ä¸­çš„storage serverä¹‹é—´æ˜¯å±äºäº’ç›¸å¤‡ä»½çš„å…³ç³»ï¼Œä¹Ÿå°±æ˜¯è¯´storage serverä¹‹é—´ä¿å­˜ç›¸åŒçš„æ•°æ®ã€‚</li>\n<li>æ¯ä¸ªstorage serverä¼šå¯åŠ¨ä¸€ä¸ªå•ç‹¬çš„çº¿ç¨‹ä¸»åŠ¨å‘Tracker clusterä¸­æ¯ä¸ªtracker serveræŠ¥å‘Šå…¶çŠ¶æ€ä¿¡æ¯ï¼ŒåŒ…æ‹¬ç£ç›˜ä½¿ç”¨æƒ…å†µï¼Œæ–‡ä»¶åŒæ­¥æƒ…å†µåŠæ–‡ä»¶ä¸Šä¼ ä¸‹è½½æ¬¡æ•°ç»Ÿè®¡ç­‰ä¿¡æ¯ã€‚</li>\n</ul>\n<h4 id=\"ä¸Šä¼ æ–‡ä»¶æµç¨‹å›¾\"><a href=\"#ä¸Šä¼ æ–‡ä»¶æµç¨‹å›¾\" class=\"headerlink\" title=\"ä¸Šä¼ æ–‡ä»¶æµç¨‹å›¾\"></a>ä¸Šä¼ æ–‡ä»¶æµç¨‹å›¾</h4><p><img src=\"https://z201.oss-cn-shanghai.aliyuncs.com/JavaNote/FastDFS/fastdfs1.png\"></p>\n<ul>\n<li>ä¸Šä¼ æµç¨‹æè¿°</li>\n<li><ol>\n<li>clientè¯¢é—®trackerä¸Šä¼ åˆ°çš„storageï¼Œä¸éœ€è¦é™„åŠ å‚æ•°ã€‚</li>\n<li>trackerè¿”å›ä¸€å°å¯ç”¨çš„storageã€‚</li>\n<li>clientç›´æ¥å’Œstorageé€šè®¯å®Œæˆæ–‡ä»¶ä¸Šä¼ ã€‚</li>\n<li>ä¸Šä¼ å®Œæˆï¼ŒStorage serverè¿”å›Clientä¸€ä¸ªæ–‡ä»¶IDï¼Œæ–‡ä»¶ä¸Šä¼ ç»“æŸã€‚</li>\n</ol>\n</li>\n</ul>\n<h4 id=\"ä¸‹è½½æ–‡ä»¶æµç¨‹å›¾\"><a href=\"#ä¸‹è½½æ–‡ä»¶æµç¨‹å›¾\" class=\"headerlink\" title=\"ä¸‹è½½æ–‡ä»¶æµç¨‹å›¾\"></a>ä¸‹è½½æ–‡ä»¶æµç¨‹å›¾</h4><p><img src=\"https://z201.oss-cn-shanghai.aliyuncs.com/JavaNote/FastDFS/fastdfs2.png\"></p>\n<ul>\n<li>ä¸‹è½½æµç¨‹æè¿°</li>\n<li><ol>\n<li>clientè¯¢é—®trackerä¸‹è½½æ–‡ä»¶çš„storageï¼Œå‚æ•°ä¸ºæ–‡ä»¶æ ‡è¯†ï¼ˆç»„åå’Œæ–‡ä»¶åï¼‰ã€‚</li>\n<li>trackerè¿”å›ä¸€å°å¯ç”¨çš„storageã€‚</li>\n<li>clientç›´æ¥å’Œstorageé€šè®¯å®Œæˆæ–‡ä»¶ä¸‹è½½ã€‚</li>\n</ol>\n</li>\n</ul>\n<h2 id=\"ç›¸å…³æœ¯è¯­\"><a href=\"#ç›¸å…³æœ¯è¯­\" class=\"headerlink\" title=\"ç›¸å…³æœ¯è¯­\"></a>ç›¸å…³æœ¯è¯­</h2><ul>\n<li>Tracker Serverï¼šè·Ÿè¸ªæœåŠ¡å™¨ï¼Œä¸»è¦åšè°ƒåº¦å·¥ä½œï¼Œåœ¨è®¿é—®ä¸Šèµ·è´Ÿè½½å‡è¡¡çš„ä½œç”¨ã€‚è®°å½•storage serverçš„çŠ¶æ€ï¼Œæ˜¯è¿æ¥Clientå’ŒStorage serverçš„æ¢çº½ã€‚ </li>\n<li>Storage Serverï¼šå­˜å‚¨æœåŠ¡å™¨ï¼Œæ–‡ä»¶å’Œmeta dataéƒ½ä¿å­˜åˆ°å­˜å‚¨æœåŠ¡å™¨ä¸Šã€‚</li>\n<li>client å®¢æˆ·ç«¯ï¼šä¸šåŠ¡è¯·æ±‚å‘èµ·æ–¹ï¼Œé€šè¿‡ä¸“ç”¨æ¥å£åŸºäºTCPåè®®ä¸<code>tracker</code>ä»¥åŠ<code>storage server</code>è¿›è¡Œäº¤äº’  ã€‚</li>\n<li>groupï¼šç»„ï¼Œä¹Ÿå¯ç§°ä¸ºå·ã€‚åŒç»„å†…æœåŠ¡å™¨ä¸Šçš„æ–‡ä»¶æ˜¯å®Œå…¨ç›¸åŒçš„ æ–‡ä»¶æ ‡è¯†ï¼šåŒ…æ‹¬ä¸¤éƒ¨åˆ†ï¼šç»„åå’Œæ–‡ä»¶åï¼ˆåŒ…å«è·¯å¾„ï¼‰ ã€‚</li>\n<li>meta dataï¼šæ–‡ä»¶ç›¸å…³å±æ€§ï¼Œé”®å€¼å¯¹ï¼ˆKey Value Pairï¼‰æ–¹å¼ï¼Œå¦‚ï¼šwidth=1024,heigth=768ã€‚</li>\n<li>fidï¼šæ–‡ä»¶æ ‡è¯†ã€‚</li>\n</ul>\n<h2 id=\"åŒæ­¥æœºåˆ¶\"><a href=\"#åŒæ­¥æœºåˆ¶\" class=\"headerlink\" title=\"åŒæ­¥æœºåˆ¶\"></a>åŒæ­¥æœºåˆ¶</h2><ul>\n<li>åŒä¸€ç»„å†…çš„storage serverä¹‹é—´æ˜¯å¯¹ç­‰çš„ï¼Œæ–‡ä»¶ä¸Šä¼ ã€åˆ é™¤ç­‰æ“ä½œå¯ä»¥åœ¨ä»»æ„ä¸€å°storage serverä¸Šè¿›è¡Œã€‚</li>\n<li>æ–‡ä»¶åŒæ­¥åªåœ¨åŒç»„å†…çš„storage serverä¹‹é—´è¿›è¡Œï¼Œé‡‡ç”¨pushæ–¹å¼ï¼Œå³æºæœåŠ¡å™¨åŒæ­¥ç»™ç›®æ ‡æœåŠ¡å™¨ã€‚</li>\n<li>æºå¤´æ•°æ®æ‰éœ€è¦åŒæ­¥ï¼Œå¤‡ä»½æ•°æ®ä¸éœ€è¦å†æ¬¡åŒæ­¥ï¼Œå¦åˆ™å°±æ„æˆç¯è·¯äº†ã€‚</li>\n<li>ä¸Šè¿°ç¬¬äºŒæ¡è§„åˆ™æœ‰ä¸ªä¾‹å¤–ï¼Œå°±æ˜¯æ–°å¢åŠ ä¸€å°storage serveræ—¶ï¼Œç”±å·²æœ‰çš„ä¸€å°storage serverå°†å·²æœ‰çš„æ‰€æœ‰æ•°æ®ï¼ˆåŒ…æ‹¬æºå¤´æ•°æ®å’Œå¤‡ä»½æ•°æ®ï¼‰åŒæ­¥ç»™è¯¥æ–°å¢æœåŠ¡å™¨ã€‚</li>\n</ul>\n<h2 id=\"å»é‡æœºåˆ¶\"><a href=\"#å»é‡æœºåˆ¶\" class=\"headerlink\" title=\"å»é‡æœºåˆ¶\"></a>å»é‡æœºåˆ¶</h2><ul>\n<li>Hash<ul>\n<li>å»é‡æœºåˆ¶ä¹Ÿå°±æ˜¯hashäº†ï¼Œä¸€ä¸ªæ˜¯è‡ªå·±å®ç°çš„hashï¼Œå¦å¤–ä¸€ä¸ªæ˜¯MD5ã€‚</li>\n</ul>\n</li>\n<li>MD5<ul>\n<li>éœ€å®‰è£…FastDHT(åˆ†å¸ƒå¼å“ˆå¸Œç³»ç»Ÿ ):ä½¿ç”¨ Berkeley DB åšæ•°æ®å­˜å‚¨ï¼Œä½¿ç”¨ libevent åšç½‘ç»œIOå¤„ç†ï¼Œæä¾› Java ç‰ˆçš„å®¢æˆ·ç«¯æ¥å£åŒ…ã€‚é€‚åˆç”¨æ¥å­˜å‚¨ç”¨æˆ·åœ¨çº¿ã€ä¼šè¯ç­‰å°æ•°æ®é‡ä¿¡æ¯ã€‚<br>é€šè¿‡hash-&gt;æ–‡ä»¶è·¯å¾„æ¥æ ‡è¯†æ–‡ä»¶ï¼Œåé¢ä¸Šä¼ çš„æ–‡ä»¶ï¼Œå¦‚æœå·²ç»å­˜åœ¨ç›¸åŒå†…å®¹çš„æ–‡ä»¶ï¼Œåˆ™é‡‡ç”¨ç¬¦å·è¿æ¥çš„æ–¹å¼ï¼ŒæŒ‡å‘åŸå§‹æ–‡ä»¶ã€‚</li>\n</ul>\n</li>\n<li>ç¼ºé™·<ul>\n<li>FastDFSé‡‡ç”¨æœåŠ¡ç«¯å»é‡çš„æœºåˆ¶ï¼Œç›¸æ¯”ç½‘ç›˜çš„ç§’ä¼ æœºåˆ¶æ•ˆç‡ä½ã€‚</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"é€šä¿¡åè®®\"><a href=\"#é€šä¿¡åè®®\" class=\"headerlink\" title=\"é€šä¿¡åè®®\"></a>é€šä¿¡åè®®</h2><ul>\n<li><p>åè®®åŒ…ç”±ä¸¤éƒ¨åˆ†ç»„æˆï¼šheaderå’Œbody</p>\n</li>\n<li><p>headerå…±10å­—èŠ‚ï¼Œæ ¼å¼å¦‚ä¸‹ï¼š  </p>\n<ul>\n<li>8 byte body length  </li>\n<li>1 byte command </li>\n<li>1 byte status</li>\n</ul>\n</li>\n<li><p>bodyæ•°æ®åŒ…æ ¼å¼ç”±å–å†³äºå…·ä½“çš„å‘½ä»¤ï¼Œbodyå¯ä»¥ä¸ºç©º</p>\n</li>\n<li><p>FDFSåè®®å¤´</p>\n<ul>\n<li><table>\n<thead>\n<tr>\n<th>æè¿°</th>\n<th>åç§°</th>\n<th>é•¿åº¦</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>æŠ¥æ–‡å†…å®¹</td>\n<td>contentLength</td>\n<td>1-7ä½</td>\n</tr>\n<tr>\n<td>æŠ¥æ–‡ç±»å‹</td>\n<td>cmd</td>\n<td>8ä½</td>\n</tr>\n<tr>\n<td>å¤„ç†çŠ¶æ€</td>\n<td>status</td>\n<td>9ä½</td>\n</tr>\n</tbody></table>\n</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"æŠ¥æ–‡cmdï¼ˆç±»å‹ï¼‰å‚ç…§è¡¨\"><a href=\"#æŠ¥æ–‡cmdï¼ˆç±»å‹ï¼‰å‚ç…§è¡¨\" class=\"headerlink\" title=\"æŠ¥æ–‡cmdï¼ˆç±»å‹ï¼‰å‚ç…§è¡¨\"></a>æŠ¥æ–‡cmdï¼ˆç±»å‹ï¼‰å‚ç…§è¡¨</h2><table>\n<thead>\n<tr>\n<th>å¸¸é‡</th>\n<th>æè¿°</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>82</td>\n<td>å®¢æˆ·ç«¯å…³é—­è¿æ¥å‘½ä»¤</td>\n</tr>\n<tr>\n<td>111</td>\n<td>è¿æ¥çŠ¶æ€æ£€æŸ¥å‘½ä»¤</td>\n</tr>\n<tr>\n<td>100</td>\n<td>æœåŠ¡ç«¯æ­£ç¡®è¿”å›æŠ¥æ–‡çŠ¶æ€</td>\n</tr>\n<tr>\n<td>91</td>\n<td></td>\n</tr>\n<tr>\n<td>92</td>\n<td></td>\n</tr>\n<tr>\n<td>93</td>\n<td>è·å–æ–‡ä»¶æºæœåŠ¡å™¨</td>\n</tr>\n<tr>\n<td>101</td>\n<td></td>\n</tr>\n<tr>\n<td>102</td>\n<td></td>\n</tr>\n<tr>\n<td>103</td>\n<td></td>\n</tr>\n<tr>\n<td>104</td>\n<td></td>\n</tr>\n<tr>\n<td>105</td>\n<td></td>\n</tr>\n<tr>\n<td>106</td>\n<td></td>\n</tr>\n<tr>\n<td>107</td>\n<td></td>\n</tr>\n<tr>\n<td>11</td>\n<td>ä¸Šä¼ æ–‡ä»¶</td>\n</tr>\n<tr>\n<td>12</td>\n<td>åˆ é™¤æ–‡ä»¶</td>\n</tr>\n<tr>\n<td>13</td>\n<td>è®¾ç½®æ–‡ä»¶å…ƒæ•°æ®</td>\n</tr>\n<tr>\n<td>14</td>\n<td>ä¸‹è½½æ–‡ä»¶</td>\n</tr>\n<tr>\n<td>15</td>\n<td>è·å–æ–‡ä»¶å…ƒæ•°æ®</td>\n</tr>\n<tr>\n<td>21</td>\n<td></td>\n</tr>\n<tr>\n<td>22</td>\n<td>è·å–æ–‡ä»¶ä¿¡æ¯</td>\n</tr>\n<tr>\n<td>23</td>\n<td>åˆ›å»ºä¸€ä¸ªæ”¯æŒæ–­ç‚¹ç»­ä¼ çš„æ–‡ä»¶</td>\n</tr>\n<tr>\n<td>24</td>\n<td>å¯¹æ–‡ä»¶æ–­ç‚¹ç»­ä¼ (é™„åŠ åœ¨åŸæ¥ä¸ºä¸Šä¼ å®Œå…¨çš„æ–‡ä»¶åé¢)</td>\n</tr>\n<tr>\n<td>34</td>\n<td>ä¿®æ”¹æ”¯æŒæ–­ç‚¹ç»­ä¼ çš„æ–‡ä»¶</td>\n</tr>\n<tr>\n<td>36</td>\n<td>æ¸…ç©ºæ”¯æŒæ–­ç‚¹çš„æ–‡ä»¶</td>\n</tr>\n</tbody></table>\n<h2 id=\"åè®®å¼‚å¸¸ï¼ˆçŠ¶æ€ç ï¼‰å‚ç…§è¡¨\"><a href=\"#åè®®å¼‚å¸¸ï¼ˆçŠ¶æ€ç ï¼‰å‚ç…§è¡¨\" class=\"headerlink\" title=\"åè®®å¼‚å¸¸ï¼ˆçŠ¶æ€ç ï¼‰å‚ç…§è¡¨\"></a>åè®®å¼‚å¸¸ï¼ˆçŠ¶æ€ç ï¼‰å‚ç…§è¡¨</h2><table>\n<thead>\n<tr>\n<th>å¸¸é‡</th>\n<th>æè¿°</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>0</td>\n<td>æˆåŠŸ</td>\n</tr>\n<tr>\n<td>2</td>\n<td>æ‰¾ä¸åˆ°èŠ‚ç‚¹æˆ–æ–‡ä»¶</td>\n</tr>\n<tr>\n<td>5</td>\n<td>æœåŠ¡ç«¯å‘ç”Ÿioå¼‚å¸¸</td>\n</tr>\n<tr>\n<td>16</td>\n<td>æœåŠ¡ç«¯å¿™</td>\n</tr>\n<tr>\n<td>22</td>\n<td>æ— æ•ˆçš„å‚æ•°</td>\n</tr>\n<tr>\n<td>28</td>\n<td>æ²¡æœ‰è¶³å¤Ÿçš„å­˜å‚¨ç©ºé—´</td>\n</tr>\n<tr>\n<td>61</td>\n<td>æœåŠ¡ç«¯æ‹’ç»è¿æ¥</td>\n</tr>\n<tr>\n<td>114</td>\n<td>æ–‡ä»¶å·²ç»å­˜åœ¨ï¼Ÿ</td>\n</tr>\n</tbody></table>\n<h2 id=\"çŠ¶æ€ç å¾…ç»­ã€‚ã€‚ã€‚\"><a href=\"#çŠ¶æ€ç å¾…ç»­ã€‚ã€‚ã€‚\" class=\"headerlink\" title=\"çŠ¶æ€ç å¾…ç»­ã€‚ã€‚ã€‚\"></a>çŠ¶æ€ç å¾…ç»­ã€‚ã€‚ã€‚</h2>","categories":["åŸºç¡€ç†è®º"],"tags":["FastDFS"]},{"title":"çˆ¬è™«å…¥é—¨xpath","url":"/posts/1918301121/","content":"<blockquote>\n<p>â€‹     è¡”æ¥ä¸Šä¸€ç¯‡<a href=\"https://z201.cn/2019/03/02/%E7%88%AC%E8%99%AB%E5%85%A5%E9%97%A8/\">çˆ¬è™«å…¥é—¨</a>ã€‚ä¸ºäº†æ›´å¥½çˆ¬è¾“å‡ºï¼Œæœ‰å¿…è¦Xpathç”¨æ³•æœ‰ä¸€å®šäº†è§£ã€‚</p>\n<p>â€‹    äº†è§£Xpathä¹‹å‰å…ˆäº†è§£ä¸‹XMLã€HTMLã€‚å¦‚æœå®Œå…¨ä¸çŸ¥é“æ˜¯ä»€ä¹ˆï¼Œå»ºè®®ç³»ç»Ÿå­¦ä¹ HTMLã€XMLä¸‹é˜…è¯»ä¸‹æ–‡ã€‚</p>\n</blockquote>\n<h2 id=\"XML\"><a href=\"#XML\" class=\"headerlink\" title=\"XML\"></a>XML</h2><blockquote>\n<p><strong>å¯æ‰©å±•æ ‡è®°è¯­è¨€</strong>ï¼ˆè‹±è¯­ï¼šE<strong>x</strong>tensible <strong>M</strong>arkup <strong>L</strong>anguageï¼Œç®€ç§°ï¼š<strong>XML</strong>ï¼‰ï¼Œæ˜¯ä¸€ç§æ ‡è®°è¯­è¨€ã€‚æ ‡è®°æŒ‡è®¡ç®—æœºæ‰€èƒ½ç†è§£çš„ä¿¡æ¯ç¬¦å·ï¼Œé€šè¿‡æ­¤ç§æ ‡è®°ï¼Œè®¡ç®—æœºä¹‹é—´å¯ä»¥å¤„ç†åŒ…å«å„ç§ä¿¡æ¯çš„æ–‡ç« ç­‰ã€‚å¦‚ä½•å®šä¹‰è¿™äº›æ ‡è®°ï¼Œæ—¢å¯ä»¥é€‰æ‹©å›½é™…é€šç”¨çš„æ ‡è®°è¯­è¨€ï¼Œæ¯”å¦‚HTMLï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨åƒXMLè¿™æ ·ç”±ç›¸å…³äººå£«è‡ªç”±å†³å®šçš„æ ‡è®°è¯­è¨€ï¼Œè¿™å°±æ˜¯è¯­è¨€çš„å¯æ‰©å±•æ€§ã€‚XMLæ˜¯ä»æ ‡å‡†é€šç”¨æ ‡è®°è¯­è¨€ï¼ˆSGMLï¼‰ä¸­ç®€åŒ–ä¿®æ”¹å‡ºæ¥çš„ã€‚å®ƒä¸»è¦ç”¨åˆ°çš„æœ‰å¯æ‰©å±•æ ‡è®°è¯­è¨€ã€å¯æ‰©å±•æ ·å¼è¯­è¨€ï¼ˆXSLï¼‰ã€XBRLå’ŒXPathç­‰ã€‚ </p>\n</blockquote>\n<p>ç¤ºä¾‹-0</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">note</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">to</span>&gt;</span>George<span class=\"tag\">&lt;/<span class=\"name\">to</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">from</span>&gt;</span>John<span class=\"tag\">&lt;/<span class=\"name\">from</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">heading</span>&gt;</span>Reminder<span class=\"tag\">&lt;/<span class=\"name\">heading</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span>Don't forget the meeting!<span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">note</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"HTML\"><a href=\"#HTML\" class=\"headerlink\" title=\"HTML\"></a>HTML</h2><blockquote>\n<p><strong>è¶…æ–‡æœ¬æ ‡è®°è¯­è¨€</strong>ï¼ˆè‹±è¯­ï¼š<strong>H</strong>yper<strong>T</strong>ext <strong>M</strong>arkup <strong>L</strong>anguageï¼Œç®€ç§°ï¼š<strong>HTML</strong>ï¼‰æ˜¯ä¸€ç§ç”¨äºåˆ›å»ºç½‘é¡µçš„æ ‡å‡†æ ‡è®°è¯­è¨€ã€‚HTMLæ˜¯ä¸€ç§åŸºç¡€æŠ€æœ¯ï¼Œå¸¸ä¸CSSã€JavaScriptä¸€èµ·è¢«ä¼—å¤šç½‘ç«™ç”¨äºè®¾è®¡ä»¤äººèµå¿ƒæ‚¦ç›®çš„ç½‘é¡µã€ç½‘é¡µåº”ç”¨ç¨‹åºä»¥åŠç§»åŠ¨åº”ç”¨ç¨‹åºçš„ç”¨æˆ·ç•Œé¢ã€‚ç½‘é¡µæµè§ˆå™¨å¯ä»¥è¯»å–HTMLæ–‡ä»¶ï¼Œå¹¶å°†å…¶æ¸²æŸ“æˆå¯è§†åŒ–ç½‘é¡µã€‚HTMLæè¿°äº†ä¸€ä¸ªç½‘ç«™çš„ç»“æ„è¯­ä¹‰éšç€çº¿ç´¢çš„å‘ˆç°ï¼Œä½¿ä¹‹æˆä¸ºä¸€ç§æ ‡è®°è¯­è¨€è€Œéç¼–ç¨‹è¯­è¨€ã€‚</p>\n<p>HTMLå…ƒç´ æ˜¯æ„å»ºç½‘ç«™çš„åŸºçŸ³ã€‚HTMLå…è®¸åµŒå…¥å›¾åƒä¸å¯¹è±¡ï¼Œå¹¶ä¸”å¯ä»¥ç”¨äºåˆ›å»ºäº¤äº’å¼è¡¨å•ï¼Œå®ƒè¢«ç”¨æ¥ç»“æ„åŒ–ä¿¡æ¯â€”â€”ä¾‹å¦‚æ ‡é¢˜ã€æ®µè½å’Œåˆ—è¡¨ç­‰ç­‰ï¼Œä¹Ÿå¯ç”¨æ¥åœ¨ä¸€å®šç¨‹åº¦ä¸Šæè¿°æ–‡æ¡£çš„å¤–è§‚å’Œè¯­ä¹‰ã€‚HTMLçš„è¯­è¨€å½¢å¼ä¸ºå°–æ‹¬å·åŒ…å›´çš„HTMLå…ƒç´ ï¼ˆå¦‚<code>&lt;html&gt;</code>ï¼‰ï¼Œæµè§ˆå™¨ä½¿ç”¨HTMLæ ‡ç­¾å’Œè„šæœ¬æ¥è¯ é‡Šç½‘é¡µå†…å®¹ï¼Œä½†ä¸ä¼šå°†å®ƒä»¬æ˜¾ç¤ºåœ¨é¡µé¢ä¸Šã€‚</p>\n<p>HTMLå¯ä»¥åµŒå…¥å¦‚JavaScriptçš„è„šæœ¬è¯­è¨€ï¼Œå®ƒä»¬ä¼šå½±å“HTMLç½‘é¡µçš„è¡Œä¸ºã€‚ç½‘é¡µæµè§ˆå™¨ä¹Ÿå¯ä»¥å¼•ç”¨å±‚å æ ·å¼è¡¨ï¼ˆCSSï¼‰æ¥å®šä¹‰æ–‡æœ¬å’Œå…¶å®ƒå…ƒç´ çš„å¤–è§‚ä¸å¸ƒå±€ã€‚ç»´æŠ¤HTMLå’ŒCSSæ ‡å‡†çš„ç»„ç»‡ä¸‡ç»´ç½‘è”ç›Ÿï¼ˆW3Cï¼‰é¼“åŠ±äººä»¬ä½¿ç”¨CSSæ›¿ä»£ä¸€äº›ç”¨äºè¡¨ç°çš„HTMLå…ƒç´ ã€‚</p>\n</blockquote>\n<a id=\"more\"></a>\n\n<p>ç¤ºä¾‹-1</p>\n<figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">h1</span>&gt;</span>æˆ‘çš„ç¬¬ä¸€ä¸ªæ ‡é¢˜<span class=\"tag\">&lt;/<span class=\"name\">h1</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span>æˆ‘çš„ç¬¬ä¸€ä¸ªæ®µè½ã€‚<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"XMLå’ŒHTMLæœ‰å•¥å…³ç³»å‘¢ï¼Ÿ\"><a href=\"#XMLå’ŒHTMLæœ‰å•¥å…³ç³»å‘¢ï¼Ÿ\" class=\"headerlink\" title=\"XMLå’ŒHTMLæœ‰å•¥å…³ç³»å‘¢ï¼Ÿ\"></a>XMLå’ŒHTMLæœ‰å•¥å…³ç³»å‘¢ï¼Ÿ</h2><ul>\n<li><strong>XMLæ˜¯è¢«è®¾è®¡ç”¨æ¥æè¿°æ•°æ®çš„ï¼Œé‡ç‚¹æ˜¯:ä»€ä¹ˆæ˜¯æ•°æ®ï¼Œå¦‚ä½•å­˜æ”¾æ•°æ®</strong>ã€‚</li>\n<li><strong>HTMLæ˜¯è¢«è®¾è®¡ç”¨æ¥æ˜¾ç¤ºæ•°æ®çš„ï¼Œé‡ç‚¹æ˜¯:æ˜¾ç¤ºæ•°æ®ä»¥åŠå¦‚ä½•æ˜¾ç¤ºæ•°æ®æ›´å¥½ä¸Šé¢ã€‚</strong></li>\n</ul>\n<h2 id=\"Xpath\"><a href=\"#Xpath\" class=\"headerlink\" title=\"Xpath\"></a>Xpath</h2><blockquote>\n<p><strong>XPath</strong>å³ä¸ºXMLè·¯å¾„è¯­è¨€ï¼ˆXML Path Languageï¼‰ï¼Œå®ƒæ˜¯ä¸€ç§ç”¨æ¥ç¡®å®šXMLæ–‡æ¡£ä¸­æŸéƒ¨åˆ†ä½ç½®çš„è¯­è¨€ã€‚</p>\n<p>XPathåŸºäºXMLçš„æ ‘çŠ¶ç»“æ„ï¼Œæä¾›åœ¨æ•°æ®ç»“æ„æ ‘ä¸­æ‰¾å¯»èŠ‚ç‚¹çš„èƒ½åŠ›ã€‚èµ·åˆXPathçš„æå‡ºçš„åˆè¡·æ˜¯å°†å…¶ä½œä¸ºä¸€ä¸ªé€šç”¨çš„ã€ä»‹äºXPointeré—´çš„è¯­æ³•æ¨¡å‹ã€‚ä½†æ˜¯XPathå¾ˆå¿«çš„è¢«å¼€å‘è€…é‡‡ç”¨æ¥å½“ä½œå°å‹æŸ¥è¯¢è¯­è¨€ã€‚XPath ç”¨äºåœ¨ XML æ–‡æ¡£ä¸­é€šè¿‡å…ƒç´ å’Œå±æ€§è¿›è¡Œå¯¼èˆªã€‚</p>\n</blockquote>\n<h2 id=\"æ ‡è¯†æ³•\"><a href=\"#æ ‡è¯†æ³•\" class=\"headerlink\" title=\"æ ‡è¯†æ³•\"></a>æ ‡è¯†æ³•</h2><p>æœ€å¸¸è§çš„XPathè¡¨è¾¾å¼æ˜¯è·¯å¾„è¡¨è¾¾å¼ï¼ˆXPathè¿™ä¸€åç§°çš„å¦ä¸€æ¥æºï¼‰ã€‚è·¯å¾„è¡¨è¾¾å¼æ˜¯ä»ä¸€ä¸ªXMLèŠ‚ç‚¹ï¼ˆå½“å‰çš„ä¸Šä¸‹æ–‡èŠ‚ç‚¹ï¼‰åˆ°å¦ä¸€ä¸ªèŠ‚ç‚¹ã€æˆ–ä¸€ç»„èŠ‚ç‚¹çš„ä¹¦é¢æ­¥éª¤é¡ºåºã€‚è¿™äº›æ­¥éª¤ä»¥â€œ/â€å­—ç¬¦åˆ†å¼€ï¼Œæ¯ä¸€æ­¥æœ‰ä¸‰ä¸ªæ„æˆæˆåˆ†ï¼š</p>\n<ul>\n<li>è½´æè¿°ï¼ˆç”¨æœ€ç›´æ¥çš„æ–¹å¼æ¥è¿‘ç›®æ ‡èŠ‚ç‚¹ï¼‰</li>\n<li>èŠ‚ç‚¹æµ‹è¯•ï¼ˆç”¨äºç­›é€‰èŠ‚ç‚¹ä½ç½®å’Œåç§°ï¼‰</li>\n<li>èŠ‚ç‚¹æè¿°ï¼ˆç”¨äºç­›é€‰èŠ‚ç‚¹çš„å±æ€§å’Œå­èŠ‚ç‚¹ç‰¹å¾ï¼‰</li>\n</ul>\n<p>ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬ä½¿ç”¨ç®€å†™åçš„è¯­æ³•ã€‚è™½ç„¶å®Œæ•´çš„è½´æè¿°æ˜¯ä¸€ç§æ›´åŠ è´´è¿‘äººç±»è¯­è¨€ï¼Œåˆ©ç”¨è‡ªç„¶è¯­è¨€çš„å•è¯å’Œè¯­æ³•æ¥ä¹¦å†™çš„æè¿°æ–¹å¼ï¼Œä½†æ˜¯ç›¸æ¯”ä¹‹ä¸‹ä¹Ÿæ›´åŠ ç½—å—¦ã€‚</p>\n<h3 id=\"ç®€å†™åçš„è¯­æ³•\"><a href=\"#ç®€å†™åçš„è¯­æ³•\" class=\"headerlink\" title=\"ç®€å†™åçš„è¯­æ³•\"></a>ç®€å†™åçš„è¯­æ³•</h3><p>æœ€ç®€å•çš„XPathå¦‚ä¸‹ï¼š</p>\n<ul>\n<li><code>/A/B/C</code></li>\n</ul>\n<p>åœ¨è¿™é‡Œé€‰æ‹©æ‰€æœ‰ç¬¦åˆè§„çŸ©çš„CèŠ‚ç‚¹ï¼šCèŠ‚ç‚¹å¿…é¡»æ˜¯Bçš„å­èŠ‚ç‚¹ï¼ˆ<code>B/C</code>ï¼‰ï¼ŒåŒæ—¶BèŠ‚ç‚¹å¿…é¡»æ˜¯Açš„å­èŠ‚ç‚¹ï¼ˆ<code>A/B</code>ï¼‰ï¼Œè€ŒAæ˜¯è¿™ä¸ªXMLæ–‡æ¡£çš„æ ¹èŠ‚ç‚¹ï¼ˆ<code>/A</code>ï¼‰ã€‚æ­¤æ—¶çš„è¿™ç§æè¿°æ³•ç±»ä¼¼äºç£ç›˜ä¸­æ–‡ä»¶çš„è·¯å¾„ï¼Œä»ç›˜ç¬¦å¼€å§‹é¡ºç€ä¸€çº§ä¸€çº§çš„ç›®å½•æœ€ç»ˆæ‰¾åˆ°æ–‡ä»¶ã€‚</p>\n<p>è¿™é‡Œè¿˜æœ‰ä¸€ä¸ªå¤æ‚ä¸€äº›çš„ä¾‹å­ï¼ŒåŒ…å«äº†å…¨éƒ¨æ„æˆæˆåˆ†ï¼ˆè¯·è¯¦ç»†çš„çœ‹ï¼‰ï¼š</p>\n<ul>\n<li><code>A//B/*[1]</code></li>\n</ul>\n<p>æ­¤æ—¶é€‰æ‹©çš„å…ƒç´ æ˜¯ï¼šåœ¨BèŠ‚ç‚¹ä¸‹çš„ç¬¬ä¸€ä¸ªèŠ‚ç‚¹ï¼ˆ<code>B/*[1]</code>ï¼‰ï¼Œä¸è®ºèŠ‚ç‚¹çš„åç§°å¦‚ä½•ï¼ˆ<code>*</code>ï¼‰ï¼›è€ŒBèŠ‚ç‚¹å¿…é¡»å‡ºç°åœ¨AèŠ‚ç‚¹å†…ï¼Œä¸è®ºå’ŒAèŠ‚ç‚¹ä¹‹é—´ç›¸éš”å‡ å±‚èŠ‚ç‚¹ï¼ˆ<code>//B</code>ï¼‰ï¼›ä¸æ­¤åŒæ—¶AèŠ‚ç‚¹è¿˜å¿…é¡»æ˜¯å½“å‰èŠ‚ç‚¹çš„å­èŠ‚ç‚¹ï¼ˆ<code>A</code>ï¼Œå‰è¾¹æ²¡æœ‰<code>/</code>ï¼‰ã€‚</p>\n<h2 id=\"è½´æè¿°è¯­æ³•\"><a href=\"#è½´æè¿°è¯­æ³•\" class=\"headerlink\" title=\"è½´æè¿°è¯­æ³•\"></a>è½´æè¿°è¯­æ³•</h2><table>\n<thead>\n<tr>\n<th>åæ ‡</th>\n<th>åç§°</th>\n<th>è¯´æ˜</th>\n<th>ç¼©å†™è¯­æ³•</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>child</td>\n<td>å­èŠ‚ç‚¹</td>\n<td>æ¯”è‡ªèº«èŠ‚ç‚¹æ·±åº¦å¤§çš„ä¸€å±‚çš„èŠ‚ç‚¹ï¼Œä¸”è¢«åŒ…å«åœ¨è‡ªèº«ä¹‹å†…</td>\n<td>é»˜è®¤ï¼Œä¸éœ€è¦</td>\n</tr>\n<tr>\n<td>attribute</td>\n<td>å±æ€§</td>\n<td></td>\n<td><code>@</code></td>\n</tr>\n<tr>\n<td>descendant</td>\n<td>å­å­™èŠ‚ç‚¹</td>\n<td>æ¯”è‡ªèº«èŠ‚ç‚¹æ·±åº¦å¤§çš„èŠ‚ç‚¹ï¼Œä¸”è¢«åŒ…å«åœ¨è‡ªèº«ä¹‹å†…</td>\n<td>ä¸æä¾›</td>\n</tr>\n<tr>\n<td>descendant-or-self</td>\n<td>è‡ªèº«å¼•ç”¨åŠå­å­™èŠ‚ç‚¹</td>\n<td></td>\n<td><code>//</code></td>\n</tr>\n<tr>\n<td>parent</td>\n<td>çˆ¶èŠ‚ç‚¹</td>\n<td>æ¯”è‡ªèº«èŠ‚ç‚¹æ·±åº¦å°ä¸€å±‚çš„èŠ‚ç‚¹ï¼Œä¸”åŒ…å«è‡ªèº«</td>\n<td><code>..</code></td>\n</tr>\n<tr>\n<td>ancestor</td>\n<td>ç¥–å…ˆèŠ‚ç‚¹</td>\n<td>æ¯”è‡ªèº«èŠ‚ç‚¹æ·±åº¦å°çš„èŠ‚ç‚¹ï¼Œä¸”åŒ…å«è‡ªèº«</td>\n<td>ä¸æä¾›</td>\n</tr>\n<tr>\n<td>ancestor-or-self</td>\n<td>è‡ªèº«å¼•ç”¨åŠç¥–å…ˆèŠ‚ç‚¹</td>\n<td></td>\n<td>ä¸æä¾›</td>\n</tr>\n<tr>\n<td>following</td>\n<td>ä¸‹æ–‡èŠ‚ç‚¹</td>\n<td>æŒ‰çºµè½´è§†å›¾ï¼Œåœ¨æ­¤èŠ‚ç‚¹åçš„æ‰€æœ‰å®Œæ•´èŠ‚ç‚¹ï¼Œå³ä¸åŒ…å«å…¶ç¥–å…ˆèŠ‚ç‚¹</td>\n<td>ä¸æä¾›</td>\n</tr>\n<tr>\n<td>preceding</td>\n<td>å‰æ–‡èŠ‚ç‚¹</td>\n<td>æŒ‰çºµè½´è§†å›¾ï¼Œåœ¨æ­¤èŠ‚ç‚¹å‰çš„æ‰€æœ‰å®Œæ•´èŠ‚ç‚¹ï¼Œå³ä¸åŒ…å«å…¶å­å­™èŠ‚ç‚¹</td>\n<td>ä¸æä¾›</td>\n</tr>\n<tr>\n<td>following-sibling</td>\n<td>ä¸‹ä¸€ä¸ªåŒçº§èŠ‚ç‚¹</td>\n<td></td>\n<td>ä¸æä¾›</td>\n</tr>\n<tr>\n<td>preceding-sibling</td>\n<td>ä¸Šä¸€ä¸ªåŒçº§èŠ‚ç‚¹</td>\n<td></td>\n<td>ä¸æä¾›</td>\n</tr>\n<tr>\n<td>self</td>\n<td>è‡ªå·±</td>\n<td></td>\n<td><code>.</code></td>\n</tr>\n<tr>\n<td>namespace</td>\n<td>åç§°ç©ºé—´</td>\n<td></td>\n<td>ä¸æä¾›</td>\n</tr>\n</tbody></table>\n<h2 id=\"é€‰å–èŠ‚ç‚¹\"><a href=\"#é€‰å–èŠ‚ç‚¹\" class=\"headerlink\" title=\"é€‰å–èŠ‚ç‚¹\"></a>é€‰å–èŠ‚ç‚¹</h2><table>\n<thead>\n<tr>\n<th>è¡¨è¾¾å¼</th>\n<th>æè¿°</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>nodename</td>\n<td>é€‰å–æ­¤èŠ‚ç‚¹çš„æ‰€æœ‰å­èŠ‚ç‚¹ã€‚</td>\n</tr>\n<tr>\n<td>/</td>\n<td>ä»æ ¹èŠ‚ç‚¹é€‰å–ã€‚</td>\n</tr>\n<tr>\n<td>//</td>\n<td>ä»åŒ¹é…é€‰æ‹©çš„å½“å‰èŠ‚ç‚¹é€‰æ‹©æ–‡æ¡£ä¸­çš„èŠ‚ç‚¹ï¼Œè€Œä¸è€ƒè™‘å®ƒä»¬çš„ä½ç½®ã€‚</td>\n</tr>\n<tr>\n<td>.</td>\n<td>é€‰å–å½“å‰èŠ‚ç‚¹ã€‚</td>\n</tr>\n<tr>\n<td>..</td>\n<td>é€‰å–å½“å‰èŠ‚ç‚¹çš„çˆ¶èŠ‚ç‚¹ã€‚</td>\n</tr>\n<tr>\n<td>@</td>\n<td>é€‰å–å±æ€§ã€‚</td>\n</tr>\n</tbody></table>\n<h2 id=\"èŠ‚ç‚¹æµ‹è¯•\"><a href=\"#èŠ‚ç‚¹æµ‹è¯•\" class=\"headerlink\" title=\"èŠ‚ç‚¹æµ‹è¯•\"></a>èŠ‚ç‚¹æµ‹è¯•</h2><p>èŠ‚ç‚¹æµ‹è¯•åŒ…æ‹¬ç‰¹å®šèŠ‚ç‚¹åæˆ–è€…æ›´ä¸€èˆ¬çš„è¡¨è¾¾å¼ã€‚è‡³äºXMLé‡Œå‘½åç©ºé—´å‰ç¼€<code>gs</code>å·²å®šä¹‰çš„æ–‡ä»¶ï¼Œ<code>//gs:enquiry</code>å°†æ‰¾åˆ°æ‰€æœ‰åœ¨é‚£å‘½åç©ºé—´é‡Œ<code>enquiry</code>çš„èŠ‚ç‚¹ã€‚</p>\n<p>å…¶ä»–èŠ‚ç‚¹æ ¼å¼ï¼š</p>\n<ul>\n<li><p>comment() </p>\n<p>å¯»æ‰¾XMLæ³¨é‡ŠèŠ‚ç‚¹ï¼Œä¾‹å¦‚<code>&lt;!-- æ³¨é‡Š --&gt;</code></p>\n</li>\n<li><p>text() </p>\n<p>å¯»æ‰¾æŸç‚¹çš„æ–‡å­—å‹åˆ«ï¼Œä¾‹å¦‚<code>hello</code>äº<code>&lt;k&gt;hello&lt;/k&gt;</code></p>\n</li>\n<li><p>node() </p>\n<p>å¯»æ‰¾æ‰€æœ‰ç‚¹</p>\n</li>\n</ul>\n<h2 id=\"èŠ‚ç‚¹æè¿°\"><a href=\"#èŠ‚ç‚¹æè¿°\" class=\"headerlink\" title=\"èŠ‚ç‚¹æè¿°\"></a>èŠ‚ç‚¹æè¿°</h2><p>èŠ‚ç‚¹æè¿°ä¸ºä¸€ä¸ªé€»è¾‘çœŸå‡è¡¨è¾¾å¼ï¼Œä»»ä½•çœŸå‡åˆ¤æ–­è¡¨è¾¾å¼éƒ½å¯åœ¨èŠ‚ç‚¹åæ–¹æ‹¬å·é‡Œè¡¨ç¤ºï¼Œè¿™æ¡ä»¶å¿…é¡»åœ¨XPathå¤„ç†è¿™ä¸ªèŠ‚ç‚¹å‰å…ˆè¢«æ»¡è¶³ã€‚åœ¨æŸä¸€æ­¥éª¤å¯æœ‰å¤šå°‘ä¸ªæè¿°å¹¶æ²¡æœ‰é™åˆ¶ã€‚</p>\n<p>èŒƒä¾‹å¦‚ä¸‹ï¼š <code>//a[@href=&#39;index.html&#39;]</code>ï¼Œè¿™å°†æ£€æŸ¥å…ƒç´ <code>a</code>æœ‰æ²¡æœ‰<code>href</code>å±æ€§ï¼Œå¹¶ä¸”è¯¥å®ƒçš„å€¼æ˜¯<code>index.html</code>ã€‚</p>\n<p>å¤æ‚ä¸€äº›çš„èŒƒä¾‹å¦‚ä¸‹ï¼š</p>\n<ul>\n<li><code>//a[@href=&#39;index.html&#39;][../div/@class=&#39;header&#39;]/@target</code></li>\n</ul>\n<p>æˆ–</p>\n<ul>\n<li><code>//a[@href=&#39;index.html&#39;][name(..)=&#39;div&#39;][../@class=&#39;header&#39;]/@target</code></li>\n</ul>\n<p>æ­¤ä¾‹å°†ä¼šé€‰æ‹©ç¬¦åˆæ¡ä»¶çš„å…ƒç´ <code>a</code>çš„<code>target</code>å±æ€§ã€‚ è¦æ±‚å…ƒç´ <code>a</code>ï¼š</p>\n<ul>\n<li>å…·æœ‰å±æ€§<code>href</code>ä¸”å€¼ä¸º<code>index.html</code>ï¼›</li>\n<li>å¹¶ä¸”å…ƒç´ <code>a</code>å…·æœ‰çˆ¶å…ƒç´ <code>div</code>ï¼›</li>\n<li>å¹¶ä¸”çˆ¶å…ƒç´ ï¼ˆ<code>div</code>ï¼‰å…¶è‡ªèº«å…·å¤‡<code>class</code>å±æ€§ï¼Œå€¼ä¸º<code>header</code>ã€‚</li>\n</ul>\n<h2 id=\"å°è¯•ç‰›åˆ€\"><a href=\"#å°è¯•ç‰›åˆ€\" class=\"headerlink\" title=\"å°è¯•ç‰›åˆ€\"></a>å°è¯•ç‰›åˆ€</h2><blockquote>\n<p>ä½¿ç”¨text() è·å– h1ã€pæ ‡ç­¾ä¸­çš„æ–‡æœ¬å†…å®¹ã€‚</p>\n</blockquote>\n<figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE <span class=\"meta-keyword\">html</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span> <span class=\"attr\">lang</span>=<span class=\"string\">\"en\"</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">charset</span>=<span class=\"string\">\"UTF-8\"</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>Title<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">h1</span>&gt;</span>æˆ‘çš„ç¬¬ä¸€ä¸ªæ ‡é¢˜<span class=\"tag\">&lt;/<span class=\"name\">h1</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span>æˆ‘çš„ç¬¬ä¸€ä¸ªæ®µè½ã€‚<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<p>è·å–h1ã€pæ ‡ç­¾é‡Œé¢çš„å†…å®¹</p>\n<blockquote>\n<p>//h1/text()  &gt;&gt;  æˆ‘çš„ç¬¬ä¸€ä¸ªæ ‡é¢˜</p>\n<p>//p/text() &gt;&gt; æˆ‘çš„ç¬¬ä¸€ä¸ªæ®µè½ã€‚</p>\n</blockquote>\n<hr>\n<blockquote>\n<p>ä½¿ç”¨text() è·å– div id = main h1ã€pæ ‡ç­¾ä¸­çš„æ–‡æœ¬å†…å®¹ã€‚</p>\n</blockquote>\n<figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE <span class=\"meta-keyword\">html</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span> <span class=\"attr\">lang</span>=<span class=\"string\">\"en\"</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">charset</span>=<span class=\"string\">\"UTF-8\"</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>Title<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">h1</span>&gt;</span>æˆ‘çš„ç¬¬ä¸€ä¸ªæ ‡é¢˜<span class=\"tag\">&lt;/<span class=\"name\">h1</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span>æˆ‘çš„ç¬¬ä¸€ä¸ªæ®µè½ã€‚<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">id</span>=<span class=\"string\">\"main\"</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">h1</span>&gt;</span>æˆ‘çš„ç¬¬äºŒä¸ªæ ‡é¢˜<span class=\"tag\">&lt;/<span class=\"name\">h1</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span>æˆ‘çš„ç¬¬äºŒä¸ªæ®µè½ã€‚<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">id</span>=<span class=\"string\">\"king\"</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">h1</span>&gt;</span>æˆ‘çš„ç¬¬ä¸‰ä¸ªæ ‡é¢˜<span class=\"tag\">&lt;/<span class=\"name\">h1</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span>æˆ‘çš„ç¬¬ä¸‰ä¸ªæ®µè½ã€‚<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<p>è·å–ä¸åŒèŠ‚ç‚¹h1ã€pæ ‡ç­¾é‡Œé¢çš„å†…å®¹</p>\n<blockquote>\n<p>//div[@id=â€™mainâ€™]/h1/text()  &gt;&gt;  æˆ‘çš„ç¬¬äºŒä¸ªæ ‡é¢˜</p>\n<p>//div[@id=â€™mainâ€™]/p/text() &gt;&gt; æˆ‘çš„ç¬¬äºŒä¸ªæ®µè½ã€‚</p>\n<p>//div[@id=â€™mainâ€™]/h1/text() &gt;&gt; æˆ‘çš„ç¬¬äºŒä¸ªæ ‡é¢˜</p>\n<p>//div[@id=â€™mainâ€™]/p/text() &gt;&gt; æˆ‘çš„ç¬¬äºŒä¸ªæ®µè½ã€‚</p>\n<p>//div[@id=â€™kingâ€™]/div/h1/text() &gt;&gt; æˆ‘çš„ç¬¬ä¸‰ä¸ªæ ‡é¢˜</p>\n<p>//div[@id=â€™kingâ€™]/div/p/text() &gt;&gt; æˆ‘çš„ç¬¬ä¸‰ä¸ªæ®µè½ã€‚</p>\n</blockquote>\n<hr>\n<p>è·å–ç¬¬ä¸€ä¸ªdivå†…h1ã€pæ ‡ç­¾é‡Œé¢çš„å†…å®¹ï¼Œå’Œç¬¬äºŒä¸ªdivå†…h1ã€pæ ‡ç­¾é‡Œé¢çš„å†…å®¹ã€‚</p>\n<figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE <span class=\"meta-keyword\">html</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span> <span class=\"attr\">lang</span>=<span class=\"string\">\"en\"</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">charset</span>=<span class=\"string\">\"UTF-8\"</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>Title<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">h1</span>&gt;</span>æˆ‘çš„ç¬¬äºŒä¸ªæ ‡é¢˜<span class=\"tag\">&lt;/<span class=\"name\">h1</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span>æˆ‘çš„ç¬¬äºŒä¸ªæ®µè½ã€‚<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">h1</span>&gt;</span>æˆ‘çš„ç¬¬ä¸‰ä¸ªæ ‡é¢˜<span class=\"tag\">&lt;/<span class=\"name\">h1</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span>æˆ‘çš„ç¬¬ä¸‰ä¸ªæ®µè½ã€‚<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<p>è·å–ç›¸åŒèŠ‚ç‚¹h1ã€pæ ‡ç­¾é‡Œé¢çš„å†…å®¹ã€‚</p>\n<blockquote>\n<p>//div[1]/h1/text() &gt;&gt; æˆ‘çš„ç¬¬äºŒä¸ªæ ‡é¢˜</p>\n<p>//div[1]/p/text()  &gt;&gt; æˆ‘çš„ç¬¬äºŒä¸ªæ®µè½ã€‚</p>\n<p>//div[2]/h1/text()  &gt;&gt;æˆ‘çš„ç¬¬ä¸‰ä¸ªæ ‡é¢˜</p>\n<p>//div[2]/p/text()  &gt;&gt; æˆ‘çš„ç¬¬ä¸‰ä¸ªæ®µè½ã€‚</p>\n</blockquote>\n<hr>\n<p>è·å–ulä¸­li title = 4çš„å†…å®¹ã€‚</p>\n<figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE <span class=\"meta-keyword\">html</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span> <span class=\"attr\">lang</span>=<span class=\"string\">\"en\"</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">charset</span>=<span class=\"string\">\"UTF-8\"</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>Title<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">h1</span>&gt;</span>æˆ‘çš„ç¬¬äºŒä¸ªæ ‡é¢˜<span class=\"tag\">&lt;/<span class=\"name\">h1</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span>æˆ‘çš„ç¬¬äºŒä¸ªæ®µè½ã€‚<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">h1</span>&gt;</span>æˆ‘çš„ç¬¬ä¸‰ä¸ªæ ‡é¢˜<span class=\"tag\">&lt;/<span class=\"name\">h1</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span>æˆ‘çš„ç¬¬ä¸‰ä¸ªæ®µè½ã€‚<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">ul</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">li</span> <span class=\"attr\">class</span>=<span class=\"string\">\"item-0\"</span>&gt;</span>1<span class=\"tag\">&lt;/<span class=\"name\">li</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">li</span> <span class=\"attr\">class</span>=<span class=\"string\">\"item-1\"</span>&gt;</span>2<span class=\"tag\">&lt;/<span class=\"name\">li</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">li</span> <span class=\"attr\">class</span>=<span class=\"string\">\"item-2\"</span>&gt;</span>3<span class=\"tag\">&lt;/<span class=\"name\">li</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">li</span> <span class=\"attr\">class</span>=<span class=\"string\">\"item-3\"</span> <span class=\"attr\">title</span>=<span class=\"string\">\"4\"</span>&gt;</span>4<span class=\"tag\">&lt;/<span class=\"name\">li</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">ul</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>//ul/li[@title=â€™4â€™]/text() &gt;&gt; 4</p>\n</blockquote>\n<p>END</p>\n","categories":["çˆ¬è™«"],"tags":["å®è·µ","Xpath"]},{"title":"çˆ¬è™«å…¥é—¨","url":"/posts/3356989948/","content":"<blockquote>\n<p>æ—¢ç„¶sakilaçš„æ•°æ®ä¸æ˜¯å¾ˆå¥½ç”¨ï¼Œå¹²è„†è‡ªå·±çˆ¬ç‚¹æ•°æ®å§ã€‚</p>\n</blockquote>\n<ul>\n<li>åœ¨ <a href=\"https://z201.cn/2019/02/28/%E5%AE%9E%E6%88%98-sakila%E6%95%B0%E6%8D%AE%E5%BA%93%E9%A1%B9%E7%9B%AE/\">å®æˆ˜-sakilaæ•°æ®åº“é¡¹ç›®</a> ä»‹ç»äº†sakilaæ•°æ®å¼€å‘åº”ç”¨ï¼Œç»“æœå‘ç°åªæœ‰æ–‡å­—æ•°æ®ï¼Œè€Œä¸”å½±ç‰‡æ•°æ®ä¹Ÿä¸ç†æƒ³ï¼Œæ‰€ä»¥è¿™é‡Œéœ€è¦ä½¿ç”¨çˆ¬è™«ä»ä¸‡èƒ½çš„äº’è”ç½‘ä¸ŠæŠ“ç‚¹æ•°æ®ã€‚</li>\n</ul>\n<h3 id=\"ç›®æ ‡é€‰æ‹©\"><a href=\"#ç›®æ ‡é€‰æ‹©\" class=\"headerlink\" title=\"ç›®æ ‡é€‰æ‹©\"></a>ç›®æ ‡é€‰æ‹©</h3><ul>\n<li>è…¾è®¯è§†é¢‘</li>\n</ul>\n<h3 id=\"æŠ“å–ç±»å‹\"><a href=\"#æŠ“å–ç±»å‹\" class=\"headerlink\" title=\"æŠ“å–ç±»å‹\"></a>æŠ“å–ç±»å‹</h3><ul>\n<li>ç”µå½±</li>\n</ul>\n<h3 id=\"æŠ€æœ¯é€‰å‹\"><a href=\"#æŠ€æœ¯é€‰å‹\" class=\"headerlink\" title=\"æŠ€æœ¯é€‰å‹\"></a>æŠ€æœ¯é€‰å‹</h3><ul>\n<li><code> jsoup</code></li>\n</ul>\n<h3 id=\"ä»£ç å®ç°\"><a href=\"#ä»£ç å®ç°\" class=\"headerlink\" title=\"ä»£ç å®ç°\"></a>ä»£ç å®ç°</h3><blockquote>\n<p>ç®€å•çš„å•å…ƒæµ‹è¯•å…¥é—¨ã€‚jsoupçš„ç”¨æ³•å¯ä»¥ç›´æ¥æŸ¥çœ‹å®˜æ–¹æ–‡æ¡£ã€‚</p>\n</blockquote>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> String UA_PHONE = <span class=\"string\">\"Mozilla/5.0 (Linux; Android 4.3; Nexus 10 Build/JSS15Q) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/48.0.2564.23 Safari/537.36\"</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> String UA_PC = <span class=\"string\">\"Mozilla/5.0 (Windows NT 10.0; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/50.0.2661.102 Safari/537.36\"</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> String QQ_PAGE_MOVIE = <span class=\"string\">\"http://v.qq.com/x/list/movie?itype=-1&amp;offset=1\"</span>;</span><br><span class=\"line\">\t</span><br><span class=\"line\">\t<span class=\"meta\">@Test</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">test</span><span class=\"params\">()</span> <span class=\"keyword\">throws</span> IOException </span>&#123;</span><br><span class=\"line\">\tDocument document = Jsoup.connect(QQ_PAGE_MOVIE)</span><br><span class=\"line\">            .userAgent(UA_PC)</span><br><span class=\"line\">            .timeout(TIME_OUT)</span><br><span class=\"line\">            .ignoreContentType(<span class=\"keyword\">true</span>).get();</span><br><span class=\"line\">      Elements elements = document.select(<span class=\"string\">\"li.list_item a.figure\"</span>);</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (Element element : elements) &#123;</span><br><span class=\"line\">            String url = element.attr(<span class=\"string\">\"href\"</span>);</span><br><span class=\"line\">            String title = element.select(<span class=\"string\">\"img\"</span>).attr(<span class=\"string\">\"alt\"</span>);</span><br><span class=\"line\">            String image = element.select(<span class=\"string\">\"img\"</span>).attr(<span class=\"string\">\"r-lazyload\"</span>);</span><br><span class=\"line\">            System.out.println(<span class=\"string\">\"href  \"</span> + url + <span class=\"string\">\"   title  \"</span> + title + <span class=\"string\">\"  image  \"</span> + image);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br></pre></td></tr></table></figure>\n\n<a id=\"more\"></a>\n\n<h4 id=\"è¾“å‡ºç»“æœ\"><a href=\"#è¾“å‡ºç»“æœ\" class=\"headerlink\" title=\"è¾“å‡ºç»“æœ\"></a>è¾“å‡ºç»“æœ</h4><figure class=\"highlight verilog\"><table><tr><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">href  https:<span class=\"comment\">//v.qq.com/x/cover/5lmuabxmb5jf1fl.html   title  äº‘å—è™«è°·  image  //puui.qpic.cn/vcover_vt_pic/0/5lmuabxmb5jf1fl1550480109/220</span></span><br><span class=\"line\"></span><br><span class=\"line\">href  https:<span class=\"comment\">//v.qq.com/x/cover/3oe086g3e8pvmm1.html   title  ç¥è°•é€šå¤©  image  //puui.qpic.cn/vcover_vt_pic/0/3oe086g3e8pvmm11526636789/220</span></span><br><span class=\"line\"></span><br><span class=\"line\">href  https:<span class=\"comment\">//v.qq.com/x/cover/nvy9lp6e061ecu2.html   title  æ¹®ç­  image  //puui.qpic.cn/vcover_vt_pic/0/nvy9lp6e061ecu21522377505/220</span></span><br><span class=\"line\"></span><br><span class=\"line\">href  https:<span class=\"comment\">//v.qq.com/x/cover/vq6l5tg1blwcquk.html   title  å°æ‚Ÿç©º  image  //puui.qpic.cn/vcover_vt_pic/0/vq6l5tg1blwcquk1528942630/220</span></span><br><span class=\"line\"></span><br><span class=\"line\">href  https:<span class=\"comment\">//v.qq.com/x/cover/xuy45yvwdgajywr.html   title  å°å·å®¶æ—  image  //puui.qpic.cn/vcover_vt_pic/0/xuy45yvwdgajywr1534475242/220</span></span><br><span class=\"line\"></span><br><span class=\"line\">href  https:<span class=\"comment\">//v.qq.com/x/cover/v097i2zl7bekihf.html   title  é‡è§ä½ çœŸå¥½  image  //puui.qpic.cn/vcover_vt_pic/0/v097i2zl7bekihf1520840657/220</span></span><br><span class=\"line\"></span><br><span class=\"line\">href  https:<span class=\"comment\">//v.qq.com/x/cover/5crb4lhjxu5irm0.html   title  æ‘˜é‡‘å¥‡ç¼˜  image  //puui.qpic.cn/vcover_vt_pic/0/5crb4lhjxu5irm01540260494/220</span></span><br><span class=\"line\"></span><br><span class=\"line\">href  https:<span class=\"comment\">//v.qq.com/x/cover/70y5f38tjcmtw2t.html   title  åƒè´§å®‡å®™  image  //puui.qpic.cn/vcover_vt_pic/0/70y5f38tjcmtw2t1530070491/220</span></span><br><span class=\"line\"></span><br><span class=\"line\">href  https:<span class=\"comment\">//v.qq.com/x/cover/og0eputlxwet1cn.html   title  æˆ‘ä¸æ˜¯è¯ç¥  image  //puui.qpic.cn/vcover_vt_pic/0/og0eputlxwet1cn1524011116/220</span></span><br><span class=\"line\"></span><br><span class=\"line\">href  https:<span class=\"comment\">//v.qq.com/x/cover/c32gmogdsrjwi5t.html   title  æ±‚æ±‚ä½ çˆ±ä¸Šæˆ‘  image  //puui.qpic.cn/vcover_vt_pic/0/c32gmogdsrjwi5t1527907276/220</span></span><br><span class=\"line\"></span><br><span class=\"line\">href  https:<span class=\"comment\">//v.qq.com/x/cover/m871wzl4wsan735.html   title  åœ°çƒæœ€åçš„å¤œæ™š  image  //puui.qpic.cn/vcover_vt_pic/0/m871wzl4wsan7351548821409/220</span></span><br><span class=\"line\"></span><br><span class=\"line\">href  https:<span class=\"comment\">//v.qq.com/x/cover/5i3ppwn4q8ykk2v.html   title  åˆå¤œåäºŒç‚¹  image  //puui.qpic.cn/vcover_vt_pic/0/5i3ppwn4q8ykk2v1527728549/220</span></span><br><span class=\"line\"></span><br><span class=\"line\">href  https:<span class=\"comment\">//v.qq.com/x/cover/wagzbx91asjomnu.html   title  æ— é—®è¥¿ä¸œ  image  //puui.qpic.cn/vcover_vt_pic/0/wagzbx91asjomnu1527151117/220</span></span><br><span class=\"line\"></span><br><span class=\"line\">href  https:<span class=\"comment\">//v.qq.com/x/cover/fhz98sq3ecwh2bm.html   title  ææ€–æµ´å®¤  image  //puui.qpic.cn/vcover_vt_pic/0/fhz98sq3ecwh2bm1531122381/220</span></span><br><span class=\"line\"></span><br><span class=\"line\">href  https:<span class=\"comment\">//v.qq.com/x/cover/tpa0c309erq2p7t.html   title  æ— åä¹‹è¾ˆ  image  //puui.qpic.cn/vcover_vt_pic/0/tpa0c309erq2p7t1545014750/220</span></span><br><span class=\"line\"></span><br><span class=\"line\">href  https:<span class=\"comment\">//v.qq.com/x/cover/h8lp8zokyi0y960.html   title  ç–¯ç‹‚çš„å…¬ç‰›  image  //puui.qpic.cn/vcover_vt_pic/0/h8lp8zokyi0y9601548833946/220</span></span><br><span class=\"line\"></span><br><span class=\"line\">href  https:<span class=\"comment\">//v.qq.com/x/cover/7fjv56lqblm6jhd.html   title  ç†Šå‡ºæ²¡Â·å˜å½¢è®°  image  //puui.qpic.cn/vcover_vt_pic/0/7fjv56lqblm6jhd1518058675/220</span></span><br><span class=\"line\"></span><br><span class=\"line\">href  https:<span class=\"comment\">//v.qq.com/x/cover/5y95zy4idzqf6hc.html   title  æ‰å¦–è®°2  image  //puui.qpic.cn/vcover_vt_pic/0/5y95zy4idzqf6hc1515143734/220</span></span><br><span class=\"line\"></span><br><span class=\"line\">href  https:<span class=\"comment\">//v.qq.com/x/cover/xyaud3hk6mmi6ss.html   title  è¿½é¾™  image  //puui.qpic.cn/vcover_vt_pic/0/xyaud3hk6mmi6ss1513156112/220</span></span><br><span class=\"line\"></span><br><span class=\"line\">href  https:<span class=\"comment\">//v.qq.com/x/cover/s4fnybn8ttiqerl.html   title  ç¥å¥‡åŠ¨ç‰©ï¼šæ ¼æ—å¾·æ²ƒä¹‹ç½ª  image  //puui.qpic.cn/vcover_vt_pic/0/s4fnybn8ttiqerl1541656334/220</span></span><br><span class=\"line\"></span><br><span class=\"line\">href  https:<span class=\"comment\">//v.qq.com/x/cover/sdmcdbqecsgbqpq.html   title  å—æä¹‹æ‹  image  //puui.qpic.cn/vcover_vt_pic/0/sdmcdbqecsgbqpq1514943903/220</span></span><br><span class=\"line\"></span><br><span class=\"line\">href  https:<span class=\"comment\">//v.qq.com/x/cover/fl98wya3y3vit90.html   title  é—ºèœœçš„æˆ˜äº‰  image  //puui.qpic.cn/vcover_vt_pic/0/fl98wya3y3vit901548665650/220</span></span><br><span class=\"line\"></span><br><span class=\"line\">href  https:<span class=\"comment\">//v.qq.com/x/cover/ewh18dn62hvddln.html   title  æ˜¼é¢œ  image  //puui.qpic.cn/vcover_vt_pic/0/ewh18dn62hvddln1490692208/220</span></span><br><span class=\"line\"></span><br><span class=\"line\">href  https:<span class=\"comment\">//v.qq.com/x/cover/frs5qyzh8aeo7mj.html   title  æ¥ç”µç‹‚å“  image  //puui.qpic.cn/vcover_vt_pic/0/frs5qyzh8aeo7mj1547171319/220</span></span><br><span class=\"line\"></span><br><span class=\"line\">href  https:<span class=\"comment\">//v.qq.com/x/cover/cp8jhn5o7r5j0aa.html   title  è‹±é›„æœ¬è‰²2018  image  //puui.qpic.cn/vcover_vt_pic/0/cp8jhn5o7r5j0aa1519977118/220</span></span><br><span class=\"line\"></span><br><span class=\"line\">href  https:<span class=\"comment\">//v.qq.com/x/cover/ia95960ibzdqly9.html   title  ç»†æ€ææ  image  //puui.qpic.cn/vcover_vt_pic/0/ia95960ibzdqly91530059937/220</span></span><br><span class=\"line\"></span><br><span class=\"line\">href  https:<span class=\"comment\">//v.qq.com/x/cover/8taoglu73bcpz3u.html   title  çŒ«ä¸æ¡ƒèŠ±æº  image  //puui.qpic.cn/vcover_vt_pic/0/8taoglu73bcpz3u1524019282/220</span></span><br><span class=\"line\"></span><br><span class=\"line\">href  https:<span class=\"comment\">//v.qq.com/x/cover/zxsr2hae16abq7v.html   title  å¦ˆå¦ˆå’ªé¸­  image  //puui.qpic.cn/vcover_vt_pic/0/zxsr2hae16abq7v1515552446/220</span></span><br><span class=\"line\"></span><br><span class=\"line\">href  https:<span class=\"comment\">//v.qq.com/x/cover/hhp6u9obgnkvpqh.html   title  åœ°ä¸‹å‡¶çŒ›  image  //puui.qpic.cn/vcover_vt_pic/0/hhp6u9obgnkvpqht1463720650.jpg/220</span></span><br><span class=\"line\"></span><br><span class=\"line\">href  https:<span class=\"comment\">//v.qq.com/x/cover/begymcfom3fw25j.html   title  è°œå·¢  image  //puui.qpic.cn/vcover_vt_pic/0/begymcfom3fw25j1521084275/220</span></span><br></pre></td></tr></table></figure>\n\n\n\n\n\n","categories":["çˆ¬è™«"],"tags":["å®è·µ"]},{"title":"RedisåŸºç¡€ï¼ˆäºŒï¼‰","url":"/posts/1741249225/","content":"<blockquote>\n<p>æœ¬ç« æ˜¯æ•´ç†çŸ¥è¯†å†…å®¹ï¼Œä¸ºå¼ºåŒ–çŸ¥è¯†é•¿æœŸæ›´æ–°ã€‚ </p>\n</blockquote>\n<h3 id=\"Redisåˆ†å¸ƒå¼é”\"><a href=\"#Redisåˆ†å¸ƒå¼é”\" class=\"headerlink\" title=\"Redisåˆ†å¸ƒå¼é”\"></a>Redisåˆ†å¸ƒå¼é”</h3><ul>\n<li>åœ¨æ—¥å¸¸å¼€å‘ä¸­,redisä¸»è¦ç”¨åœ¨ç¼“å­˜å¤„ç†ã€‚ä¸ºä¿è¯ç¼“å­˜æ‰€ä»¥ä¼šä½¿ç”¨é›†ç¾¤çš„æ–¹å¼ï¼Œé¿å…ç¼“å­˜é›ªå´©ã€‚éƒ½ä½¿ç”¨é›†ç¾¤äº†åº”ç”¨å±‚ä¹Ÿä¸å¤ªå¯èƒ½æ˜¯å•åº”ç”¨ã€‚åœ¨åˆ†å¸ƒå¼çš„æƒ…å†µä¸‹å°±ä¼šæ¶‰åŠåˆ†å¸ƒå¼é”ã€‚aåº”ç”¨å’Œbåº”ç”¨ä¸€èµ·å¯¹æŸæ¡ç¼“å­˜è®°å½•æ“ä½œï¼ŒaæŸ¥å®Œæ•°æ®åœ¨å†…å­˜ä¿®æ”¹ï¼Œåœ¨æ”¾å›å»ã€‚å¦‚æœè¿™ä¸ªæ“ä½œä¸¤ä¸ªåº”ç”¨åŒæ—¶è¿›è¡Œå°±ä¼šå‡ºç°å¹¶å‘é—®é¢˜ã€‚ä¸ºäº†ä¿è¯æ“ä½œçš„åŸå­æ€§ï¼Œæ‰€ä»¥å°±è¦ä½¿ç”¨é”æ¥ä¿è¯æ“ä½œæ‰§è¡Œçš„é¡ºåºã€‚</li>\n</ul>\n<h3 id=\"setæ‰©å±•\"><a href=\"#setæ‰©å±•\" class=\"headerlink\" title=\"setæ‰©å±•\"></a>setæ‰©å±•</h3><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># ä½¿ç”¨setçš„æ‰©å±•å‘½ä»¤ ä¸€æ¬¡æŠŠexpireå’Œ setnxçš„ç‰¹æ€§å¸¦ä¸Šã€‚ä¸‹é¢è¿™æ¡å‘½ä»¤å°±æ˜¯ è¿‡æœŸæ—¶é—´5s å¹¶ä¸”ä¸å¯ä»¥é‡å¤æ·»åŠ ã€‚åªèƒ½åˆ é™¤æˆ–è€…åˆ°æœŸã€‚</span></span><br><span class=\"line\">192.168.31.7:6379&gt; <span class=\"built_in\">set</span> lock:redis <span class=\"literal\">true</span> ex 5 nx</span><br><span class=\"line\">OK</span><br><span class=\"line\">192.168.31.7:6379&gt; <span class=\"built_in\">set</span> lock:redis <span class=\"literal\">true</span> ex 5 nx  <span class=\"comment\"># ç¬¬äºŒæ¬¡åœ¨è®¾ç½®å°±å¤±è´¥äº†ã€‚</span></span><br><span class=\"line\">(nil)</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>ä½†æ˜¯è¿™ç§åˆ†å¸ƒå¼é”å¹¶ä¸èƒ½å®Œç¾è§£å†³é—®é¢˜ï¼Œå› ä¸ºé”æœ‰è¿‡æœŸæ—¶é—´ï¼Œå¦‚æœæ—¶é—´è¿‡æœŸäº†ä½†æ˜¯æ“ä½œä¾ç„¶æœªæ‰§è¡Œå®Œæˆï¼Œåé¢çš„æ“ä½œè¿›æ¥å°±å¯èƒ½ä¼šé€ æˆä¸å¯æ§å½±å“ã€‚</li>\n</ul>\n<h3 id=\"å¼‚æ­¥æ¶ˆæ¯åˆ—é˜Ÿ\"><a href=\"#å¼‚æ­¥æ¶ˆæ¯åˆ—é˜Ÿ\" class=\"headerlink\" title=\"å¼‚æ­¥æ¶ˆæ¯åˆ—é˜Ÿ\"></a>å¼‚æ­¥æ¶ˆæ¯åˆ—é˜Ÿ</h3><blockquote>\n<p>Redis listè¿™ä¸ªæ•°æ®ç±»å‹ï¼Œéå¸¸é€‚åˆåšåˆ—é˜Ÿã€‚ä½¿ç”¨rpush / lpush æ“ä½œå…¥åˆ—ï¼Œä½¿ç”¨ lpop å’Œ rpopæ¥å‡ºåˆ—é˜Ÿã€‚</p>\n</blockquote>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">192.168.31.7:6379&gt; rpush queue a b c d </span><br><span class=\"line\">(<span class=\"built_in\">integer</span>) 4</span><br><span class=\"line\">192.168.31.7:6379&gt; llen queue</span><br><span class=\"line\">(<span class=\"built_in\">integer</span>) 4</span><br><span class=\"line\"><span class=\"comment\"># rpop å‹æ ˆ</span></span><br><span class=\"line\">192.168.31.7:6379&gt; lpop queue</span><br><span class=\"line\"><span class=\"string\">\"a\"</span></span><br><span class=\"line\">192.168.31.7:6379&gt; lpop queue</span><br><span class=\"line\"><span class=\"string\">\"b\"</span></span><br><span class=\"line\">192.168.31.7:6379&gt; lpop queue</span><br><span class=\"line\"><span class=\"string\">\"c\"</span></span><br><span class=\"line\">192.168.31.7:6379&gt; lpop queue</span><br><span class=\"line\"><span class=\"string\">\"d\"</span></span><br><span class=\"line\"><span class=\"comment\"># lpop åˆ—é˜Ÿ</span></span><br><span class=\"line\">192.168.31.7:6379&gt; lpop queue</span><br><span class=\"line\"><span class=\"string\">\"a\"</span></span><br><span class=\"line\">192.168.31.7:6379&gt; lpop queue</span><br><span class=\"line\"><span class=\"string\">\"b\"</span></span><br><span class=\"line\">192.168.31.7:6379&gt; lpop queue</span><br><span class=\"line\"><span class=\"string\">\"c\"</span></span><br><span class=\"line\">192.168.31.7:6379&gt; lpop queue</span><br><span class=\"line\"><span class=\"string\">\"d\"</span></span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>ä½†æ˜¯ï¼Œredisçš„listä¸€æ—¦è¢«æ¶ˆè´¹å®Œå°±ä¼šè¢«åˆ é™¤ï¼Œä¸ºäº†é¿å…å®¢æˆ·ç«¯ä¸€ç›´è¯»å–ã€‚å»ºè®®ä½¿ç”¨é˜»å¡åˆ—é˜Ÿ<code>blpop\\brpop</code>çš„æ–¹å¼</li>\n</ul>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># ä½¿ç”¨blocking é˜»å¡è¯»ï¼Œ1å°±æ˜¯é˜»å¡æ—¶é—´ã€‚è¿™æ ·å¯ä»¥é¿å…ä¸æ–­çš„è¯»ã€‚</span></span><br><span class=\"line\">192.168.31.7:6379&gt; rpush queue a b c d </span><br><span class=\"line\">(<span class=\"built_in\">integer</span>) 4</span><br><span class=\"line\">192.168.31.7:6379&gt; blpop queue 1</span><br><span class=\"line\">1) <span class=\"string\">\"queue\"</span></span><br><span class=\"line\">2) <span class=\"string\">\"a\"</span></span><br><span class=\"line\">192.168.31.7:6379&gt; blpop queue 1</span><br><span class=\"line\">1) <span class=\"string\">\"queue\"</span></span><br><span class=\"line\">2) <span class=\"string\">\"b\"</span></span><br><span class=\"line\">192.168.31.7:6379&gt; blpop queue 1</span><br><span class=\"line\">1) <span class=\"string\">\"queue\"</span></span><br><span class=\"line\">2) <span class=\"string\">\"c\"</span></span><br><span class=\"line\">192.168.31.7:6379&gt; blpop queue 1</span><br><span class=\"line\">1) <span class=\"string\">\"queue\"</span></span><br><span class=\"line\">2) <span class=\"string\">\"d\"</span></span><br><span class=\"line\">192.168.31.7:6379&gt; blpop queue 1 <span class=\"comment\"># æœ€åä¸€æ¬¡ listå·²ç»ç©ºäº†ã€‚</span></span><br><span class=\"line\">(nil)</span><br><span class=\"line\">(1.08s)  <span class=\"comment\"># é˜»å¡äº†ä¸€ç§’</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"keyæŸ¥è¯¢\"><a href=\"#keyæŸ¥è¯¢\" class=\"headerlink\" title=\"keyæŸ¥è¯¢\"></a>keyæŸ¥è¯¢</h3><ul>\n<li>è™½ç„¶rediså·²ç»æœ‰keysï¼Œå¹¶ä¸èƒ½åƒmysqlä¸€ä¸ªæä¾›limitè¿™ç§ï¼Œå¯¼è‡´è¯»å–çš„å¤ªå¤šäº†ã€‚Redisæ˜¯ä¸€ä¸ªå•çº¿ç¨‹ï¼Œæ•°æ®å¤ªå¤šä¼šé˜»å¡ã€‚<code>scan</code>æä¾›äº†ä¸‰ä¸ªå‚æ•° <code>cursor key limit </code>åˆ†åˆ«æ˜¯ </li>\n</ul>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">192.168.31.7:6379&gt; <span class=\"built_in\">set</span> key1 1</span><br><span class=\"line\">OK</span><br><span class=\"line\">192.168.31.7:6379&gt; <span class=\"built_in\">set</span> key2 1</span><br><span class=\"line\">OK</span><br><span class=\"line\">192.168.31.7:6379&gt; <span class=\"built_in\">set</span> key3 1</span><br><span class=\"line\">OK</span><br><span class=\"line\">192.168.31.7:6379&gt; <span class=\"built_in\">set</span> key4 1</span><br><span class=\"line\">OK</span><br><span class=\"line\">192.168.31.7:6379&gt; <span class=\"built_in\">set</span> key5 1</span><br><span class=\"line\">OK</span><br><span class=\"line\">192.168.31.7:6379&gt; scan 0 match key* count 10</span><br><span class=\"line\">1) <span class=\"string\">\"0\"</span></span><br><span class=\"line\">2) 1) <span class=\"string\">\"key4\"</span></span><br><span class=\"line\">   2) <span class=\"string\">\"key3\"</span></span><br><span class=\"line\">   3) <span class=\"string\">\"key2\"</span></span><br><span class=\"line\">   4) <span class=\"string\">\"key5\"</span></span><br><span class=\"line\">   5) <span class=\"string\">\"key1\"</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"Redisäº‹åŠ¡\"><a href=\"#Redisäº‹åŠ¡\" class=\"headerlink\" title=\"Redisäº‹åŠ¡\"></a>Redisäº‹åŠ¡</h3><blockquote>\n<p>Redisäº‹ç‰©åˆ†åˆ«æ˜¯multi/exec/discard å¯¹åº”çš„å°±æ˜¯begin/commit/rollbackã€‚Redisåœ¨æ”¶åˆ°execçš„æŒ‡ä»¤æ‰ä¼šæ‰§è¡Œäº‹åŠ¡åˆ—é˜Ÿï¼Œæ‰§è¡Œå®Œæ¯•åä¸€æ¬¡è¿”å›æŒ‡ä»¤è¿è¡Œç»“æœã€‚ä½†æ˜¯Redisä»…ä»…æ˜¯ä¿è¯äº†ä¸ªéš”ç¦»æ€§ã€‚åœ¨ä½¿ç”¨äº‹ç‰©çš„æ—¶å€™å»ºè®®ä½¿ç”¨ç®¡é“pipeï¼Œè¿™æ ·å¯ä»¥å‡å°‘ç½‘ç»œè¯·æ±‚ã€‚</p>\n</blockquote>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># ç®€å•çš„æ¼”ç¤ºäº‹åŠ¡</span></span><br><span class=\"line\">192.168.31.7:6379&gt; multi</span><br><span class=\"line\">OK</span><br><span class=\"line\">192.168.31.7:6379&gt; <span class=\"built_in\">set</span> name wang</span><br><span class=\"line\">QUEUED</span><br><span class=\"line\">192.168.31.7:6379&gt; <span class=\"built_in\">set</span> name zhang</span><br><span class=\"line\">QUEUED</span><br><span class=\"line\">192.168.31.7:6379&gt; <span class=\"built_in\">exec</span></span><br><span class=\"line\">1) OK</span><br><span class=\"line\">2) OK</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>äº‹åŠ¡ä¸¢å¼ƒ discard</li>\n</ul>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># åˆ›å»ºä¸€ä¸ªå­—ç¬¦ä¸²å¹¶å¯¹valueè¿›è¡Œç´¯åŠ ã€‚</span></span><br><span class=\"line\">192.168.31.7:6379&gt; <span class=\"built_in\">set</span> count 1</span><br><span class=\"line\">OK</span><br><span class=\"line\">192.168.31.7:6379&gt; get count</span><br><span class=\"line\"><span class=\"string\">\"1\"</span></span><br><span class=\"line\">192.168.31.7:6379&gt; multi <span class=\"comment\"># å¼€å¯äº‹ç‰©</span></span><br><span class=\"line\">OK</span><br><span class=\"line\">192.168.31.7:6379&gt; incr count</span><br><span class=\"line\">QUEUED</span><br><span class=\"line\">192.168.31.7:6379&gt; incr count</span><br><span class=\"line\">QUEUED</span><br><span class=\"line\">192.168.31.7:6379&gt; discard <span class=\"comment\"># ä¸¢å¼ƒäº‹ç‰©</span></span><br><span class=\"line\">OK</span><br><span class=\"line\">192.168.31.7:6379&gt; get count <span class=\"comment\">#æ£€æŸ¥æ•°æ®ã€‚</span></span><br><span class=\"line\"><span class=\"string\">\"1\"</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"Watch\"><a href=\"#Watch\" class=\"headerlink\" title=\"Watch\"></a>Watch</h3><blockquote>\n<p>ä¸Šé¢çš„åˆ†å¸ƒå¼é”å…¶å®æ˜¯ä¸€ä¸ªæ‚²è§‚é”ï¼Œå®é™…ä¸Šå¯ä»¥ä½¿ç”¨watchå®ç°ä¹è§‚é”ã€‚watchä¼šåœ¨äº‹åŠ¡å¼€å§‹ä¹‹å‰ï¼Œç›‘å¬ä¸€ä¸ªæˆ–è€…å¤šä¸ªå‚æ•°ï¼Œå½“æ‰§è¡Œexecçš„æ—¶å€™redisä¼šæ£€æŸ¥è¢«ç›‘å¬çš„å‚æ•°æ˜¯å¦æ”¹å˜ï¼Œå¦‚æœæ”¹å˜äº†äº‹åŠ¡æ‰§è¡Œå¤±è´¥ã€‚è¿™é‡Œéœ€è¦æ³¨æ„çš„æ˜¯watchå¿…é¡»åœ¨äº‹åŠ¡ä¹‹å‰å¼€å¯ã€‚</p>\n</blockquote>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># ç›‘å¬count</span></span><br><span class=\"line\">192.168.31.7:6379&gt; watch count </span><br><span class=\"line\">OK</span><br><span class=\"line\">192.168.31.7:6379&gt; incr count <span class=\"comment\"># è‡ªå¢countçš„valueã€‚</span></span><br><span class=\"line\">(<span class=\"built_in\">integer</span>) 2</span><br><span class=\"line\">192.168.31.7:6379&gt; multi <span class=\"comment\">#å¼€å¯äº‹ç‰©</span></span><br><span class=\"line\">OK</span><br><span class=\"line\">192.168.31.7:6379&gt; incr count </span><br><span class=\"line\">QUEUED</span><br><span class=\"line\">192.168.31.7:6379&gt; <span class=\"built_in\">exec</span>  </span><br><span class=\"line\">(nil) <span class=\"comment\">#äº‹åŠ¡æ‰§è¡Œå¤±è´¥ã€‚</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"END\"><a href=\"#END\" class=\"headerlink\" title=\"END\"></a>END</h3>","categories":["åŸºç¡€ç†è®º"],"tags":["Redis"]},{"title":"RedisåŸºç¡€ï¼ˆä¸€ï¼‰","url":"/posts/1474278929/","content":"<blockquote>\n<p>æœ¬ç« æ˜¯æ•´ç†çŸ¥è¯†å†…å®¹ï¼Œä¸ºå¼ºåŒ–çŸ¥è¯†é•¿æœŸæ›´æ–°ã€‚ </p>\n</blockquote>\n<h2 id=\"ä¸€ã€åˆè®¤Redis\"><a href=\"#ä¸€ã€åˆè®¤Redis\" class=\"headerlink\" title=\"ä¸€ã€åˆè®¤Redis\"></a>ä¸€ã€åˆè®¤Redis</h2><ul>\n<li>Redisæ˜¯ä¸€ä¸ªé€Ÿåº¦éå¸¸å¿«çš„<code>éå…³ç³»å‹æ•°æ®åº“(non-relationl databases)</code>,å®ƒå¯ä»¥æ˜¯å­˜å‚¨é”®å¯¹å€¼ï¼ˆkey-vakueï¼‰æ–¹å¼å­˜å‚¨æ•°æ®ã€‚å®ƒæ‹¥æœ‰5ä¸­æ•°æ®ç±»å‹ã€‚åŒæ—¶å¯ä»¥å°†å­˜å‚¨åœ¨å†…å­˜ä¸­çš„æ•°æ®æŒä¹…åŒ–åˆ°å› ç¡¬ç›˜ä¸­ã€‚</li>\n<li>Redisæ‰€æœ‰çš„æ•°æ®éƒ½æ˜¯ä»¥å”¯ä¸€çš„keyå­—ç¬¦ä¸²ä¸ºåç§°ï¼Œç„¶åå¯ä»¥é€šè¿‡è¿™ä¸ªkeyæ¥è·å–å¯¹åº”çš„valueã€‚</li>\n</ul>\n<table>\n<thead>\n<tr>\n<th>ç»“æ„ç±»å‹</th>\n<th>ç»“æ„å­˜å‚¨çš„å€¼</th>\n<th>ç»“æ„çš„è¯»å†™èƒ½åŠ›</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>STRING</td>\n<td>å¯ä»¥æ˜¯å­—ç¬¦ä¸²ã€æ•´æ•°æˆ–è€…æµ®ç‚¹ç±»å‹</td>\n<td>å¯¹æ•´ä¸ªå­—ç¬¦ä¸²æˆ–è€…å­—ç¬¦ä¸²çš„å…¶ä¸­ä¸€éƒ¨åˆ†æ‰§è¡Œæ“ä½œï¼›å¯¹æ•´æ•°å’Œæµ®ç‚¹æ•°æ®æ‰§è¡Œ<code>è‡ªåŠ¨</code>æˆ–è€…<code>è‡ªå‡</code>æ“ä½œ</td>\n</tr>\n<tr>\n<td>LIST</td>\n<td>ä¸€ä¸ªé“¾è¡¨ã€é“¾è¡¨æ¯ä¸ªèŠ‚ç‚¹ä¸Šéƒ½åŒ…å«äº†ä¸€ä¸ªå­—ç¬¦ä¸²</td>\n<td>ä»é“¾è¡¨çš„ä¸¤ç«¯æ¨å…¥æˆ–è€…å¼¹å‡ºå…ƒç´ ï¼›æ ¹æ®åç§»é‡å¯¹é“¾è¡¨è®°æ€§ä¿®å‰ª<code>trim</code>ï¼›è¯»å–å•ä¸ªæˆ–è€…å¤šä¸ªå…ƒç´ ï¼›æ ¹æ®å€¼æŸ¥è¯¢æˆ–è€…ç§»é™¤å…ƒç´ ã€‚</td>\n</tr>\n<tr>\n<td>SET</td>\n<td>åŒ…å«å­—ç¬¦ä¸²çš„æ— åºé›†åˆï¼Œå¹¶ä¸”æ¯ä¸ªè¢«åŒ…å«çš„å­—ç¬¦ä¸²éƒ½æ˜¯å”¯ä¸€çº¦æŸ</td>\n<td>æ·»åŠ ã€æŸ¥è¯¢ã€ç§»é™¤å•ä¸ªå…ƒç´ ï¼›æ£€æŸ¥ä¸€ä¸ªå…ƒç´ æ˜¯å¦å­˜åœ¨äºé›†åˆä¸­ï¼›è®¡ç®—äº¤é›†ã€å¹¶é›†ã€å·®é›†ï¼›ä»é›†åˆé‡Œé¢éšæœºè·å–å…ƒç´ ã€‚</td>\n</tr>\n<tr>\n<td>HASH</td>\n<td>åŒ…å«é”®å€¼å¯¹çš„æ— åºæ•£åˆ—è¡¨</td>\n<td>æ·»åŠ ã€æŸ¥è¯¢ã€ç§»é™¤å•ä¸ªé”®å€¼å¯¹ï¼›è·å–å…¨éƒ¨é”®å¯¹å€¼ã€‚</td>\n</tr>\n<tr>\n<td>ZSETï¼ˆæœ‰åºé›†åˆï¼‰</td>\n<td>å­—ç¬¦ä¸²ä¸æµ®ç‚¹åˆ†æ•°ä¹‹é—´çš„æœ‰åºæ˜ å°„ï¼Œå…ƒç´ çš„æ’åˆ—é¡ºåºç”±åˆ†å€¼å¤§å†³å®šã€‚</td>\n<td>æ·»åŠ ã€æŸ¥è¯¢ã€ç§»é™¤å•ä¸ªå…ƒç´ ï¼›æ ¹æ®åˆ†å€¼èŒƒå›´æˆ–è€…æˆå‘˜æ¥è·å–å…ƒç´ ã€‚</td>\n</tr>\n</tbody></table>\n<h3 id=\"String\"><a href=\"#String\" class=\"headerlink\" title=\"String\"></a>String</h3><ul>\n<li>å­—ç¬¦ä¸²æ˜¯Rediså½“ä¸­æœ€ç®€å•çš„æ•°æ®ç»“æ„ã€‚Redisçš„å­—ç¬¦ä¸²æ˜¯åŠ¨æ€çš„å­—ç¬¦ä¸²ï¼Œå¯ä»¥è¢«åå¤ä¿®æ”¹ã€‚å†…éƒ¨å®ç°ç±»ä¼¼Javaçš„ArrayListï¼Œé‡‡ç”¨é¢„åˆ†é…ç©ºé—´çš„æ–¹å¼æ¥å‡å°‘å†…å­˜é¢‘ç¹åˆ†é…ã€‚é¢„åˆ†é…å¤§å°æ–¹å¼æ ¹æ®å­—ç¬¦ä¸²çš„å¤§å°å†³å®šï¼Œå­—ç¬¦ä¸²å°äº1måˆ™æ‰©å®¹ç©ºé—´æ˜¯åŠ å€ã€‚è‹¥å­—ç¬¦ä¸²è¶…è¿‡1mï¼Œæ‰©å®¹ä¸€æ¬¡åªä¼šå¤šæ‰©1mçš„ç©ºé—´ã€‚å­—ç¬¦ä¸²æœ€å¤§é•¿åº¦æ˜¯512mã€‚</li>\n</ul>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">192.168.31.7:6379&gt; keys * <span class=\"comment\"># æ£€æŸ¥å½“å‰ç©ºé—´key</span></span><br><span class=\"line\">(empty list or <span class=\"built_in\">set</span>) <span class=\"comment\"># ç©ºçš„</span></span><br><span class=\"line\"><span class=\"comment\"># å½“ä¸ªå­—ç¬¦ä¸²è¯»å†™</span></span><br><span class=\"line\">192.168.31.7:6379&gt; <span class=\"built_in\">set</span> redis-name redis:latest</span><br><span class=\"line\">OK</span><br><span class=\"line\">192.168.31.7:6379&gt; keys *</span><br><span class=\"line\">1) <span class=\"string\">\"redis-name\"</span></span><br><span class=\"line\">192.168.31.7:6379&gt; get redis-name</span><br><span class=\"line\"><span class=\"string\">\"redis:latest\"</span></span><br><span class=\"line\">192.168.31.7:6379&gt; <span class=\"built_in\">set</span> redis-version 5.0.3</span><br><span class=\"line\">OK</span><br><span class=\"line\"><span class=\"comment\"># æ‰¹é‡è·å–å­—ç¬¦ä¸²</span></span><br><span class=\"line\">192.168.31.7:6379&gt; mget redis-name redis-version</span><br><span class=\"line\">1) <span class=\"string\">\"redis:latest\"</span></span><br><span class=\"line\">2) <span class=\"string\">\"5.0.3\"</span></span><br><span class=\"line\"><span class=\"comment\"># æ‰¹é‡å†™å…¥å­—ç¬¦ä¸²</span></span><br><span class=\"line\">192.168.31.7:6379&gt; mset os mac language Chinese</span><br><span class=\"line\">OK</span><br><span class=\"line\">192.168.31.7:6379&gt; keys *</span><br><span class=\"line\">1) <span class=\"string\">\"redis-version\"</span></span><br><span class=\"line\">2) <span class=\"string\">\"language\"</span></span><br><span class=\"line\">3) <span class=\"string\">\"os\"</span></span><br><span class=\"line\">4) <span class=\"string\">\"redis-name\"</span></span><br><span class=\"line\">192.168.31.7:6379&gt; mget redis-name redis-version os language </span><br><span class=\"line\">1) <span class=\"string\">\"redis:latest\"</span></span><br><span class=\"line\">2) <span class=\"string\">\"5.0.3\"</span></span><br><span class=\"line\">3) <span class=\"string\">\"mac\"</span></span><br><span class=\"line\">4) <span class=\"string\">\"Chinese\"</span></span><br><span class=\"line\">192.168.31.7:6379&gt;</span><br></pre></td></tr></table></figure>\n\n<a id=\"more\"></a>\n\n<h3 id=\"è¿‡æœŸæ—¶é—´\"><a href=\"#è¿‡æœŸæ—¶é—´\" class=\"headerlink\" title=\"è¿‡æœŸæ—¶é—´\"></a>è¿‡æœŸæ—¶é—´</h3><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># ç»™keyæ·»åŠ è¿‡æœŸæ—¶é—´</span></span><br><span class=\"line\">192.168.31.7:6379&gt; <span class=\"built_in\">set</span> ex time </span><br><span class=\"line\">OK</span><br><span class=\"line\">192.168.31.7:6379&gt; expire ex 10 <span class=\"comment\"># è¿‡æœŸæ—¶é—´10ç§’</span></span><br><span class=\"line\">(<span class=\"built_in\">integer</span>) 1</span><br><span class=\"line\">192.168.31.7:6379&gt; get ex</span><br><span class=\"line\"><span class=\"string\">\"time\"</span></span><br><span class=\"line\">192.168.31.7:6379&gt; get ex</span><br><span class=\"line\">(nil)</span><br><span class=\"line\"><span class=\"comment\"># åˆ›å»ºçš„æ—¶å€™å°±ç»™keyè®¾ç½®è¿‡æœŸæ—¶é—´</span></span><br><span class=\"line\">192.168.31.7:6379&gt; setex ex 10 time <span class=\"comment\"># è¿™é‡Œçš„è¿‡æœŸæ—¶é—´è¦å†™åœ¨key å’Œvalue çš„ä¸­é—´</span></span><br><span class=\"line\">OK</span><br><span class=\"line\">192.168.31.7:6379&gt; get ex</span><br><span class=\"line\">(nil)</span><br></pre></td></tr></table></figure>\n\n<!--more-->\n\n<h3 id=\"åˆ›å»ºæ—¶æ˜¯å¦å­˜åœ¨åˆ¤æ–­\"><a href=\"#åˆ›å»ºæ—¶æ˜¯å¦å­˜åœ¨åˆ¤æ–­\" class=\"headerlink\" title=\"åˆ›å»ºæ—¶æ˜¯å¦å­˜åœ¨åˆ¤æ–­\"></a>åˆ›å»ºæ—¶æ˜¯å¦å­˜åœ¨åˆ¤æ–­</h3><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># åˆ›å»ºæ—¶å€™æ¡ä»¶åˆ¤æ–­</span></span><br><span class=\"line\">192.168.31.7:6379&gt; setnx ex time</span><br><span class=\"line\">(<span class=\"built_in\">integer</span>) 1</span><br><span class=\"line\">192.168.31.7:6379&gt; get ex</span><br><span class=\"line\"><span class=\"string\">\"time\"</span></span><br><span class=\"line\">192.168.31.7:6379&gt; setnx ex z <span class=\"comment\"># å†æ¬¡æ’å…¥</span></span><br><span class=\"line\">(<span class=\"built_in\">integer</span>) 0  <span class=\"comment\"># å¤±è´¥ï¼Œå› ä¸ºkey ex å·²ç»å­˜åœ¨ã€‚</span></span><br></pre></td></tr></table></figure>\n\n<h4 id=\"è®¡æ•°\"><a href=\"#è®¡æ•°\" class=\"headerlink\" title=\"è®¡æ•°\"></a>è®¡æ•°</h4><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># å¦‚æœvalue å°±æ˜¯ä¸€ä¸ªæ•´æ•°ï¼Œå¯ä»¥ä½¿ç”¨inrcå¯¹valueè¿›è¡Œç´¯åŠ ã€‚è¿™é‡Œäº†è§£ä¸‹è‡ªå¢èŒƒå›´ å°±æ˜¯signed longçš„å–å€¼èŒƒå›´ã€‚</span></span><br><span class=\"line\">192.168.31.7:6379&gt; <span class=\"built_in\">set</span> count 1</span><br><span class=\"line\">OK</span><br><span class=\"line\">192.168.31.7:6379&gt; incr count </span><br><span class=\"line\">(<span class=\"built_in\">integer</span>) 2</span><br><span class=\"line\">192.168.31.7:6379&gt; incr count </span><br><span class=\"line\">(<span class=\"built_in\">integer</span>) 3</span><br><span class=\"line\">192.168.31.7:6379&gt; incr count </span><br><span class=\"line\">(<span class=\"built_in\">integer</span>) 4</span><br><span class=\"line\">192.168.31.7:6379&gt; incr count </span><br><span class=\"line\">(<span class=\"built_in\">integer</span>) 5</span><br><span class=\"line\">192.168.31.7:6379&gt; get count</span><br><span class=\"line\"><span class=\"string\">\"5\"</span></span><br><span class=\"line\">192.168.31.7:6379&gt; incrby count 5 <span class=\"comment\"># æŒ‡å®šç´¯åŠ æ•°å­—</span></span><br><span class=\"line\">(<span class=\"built_in\">integer</span>) 10</span><br><span class=\"line\">192.168.31.7:6379&gt; get count</span><br><span class=\"line\"><span class=\"string\">\"10\"</span></span><br><span class=\"line\">192.168.31.7:6379&gt; decr count  <span class=\"comment\"># è‡ªå‡</span></span><br><span class=\"line\">(<span class=\"built_in\">integer</span>) 9 </span><br><span class=\"line\">192.168.31.7:6379&gt; decrby count 4 <span class=\"comment\"># æŒ‡å®šå‡æ•°å­—</span></span><br><span class=\"line\">(<span class=\"built_in\">integer</span>) 5</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"List\"><a href=\"#List\" class=\"headerlink\" title=\"List\"></a>List</h3><ul>\n<li>Redisä¸­çš„Listæœ‰ç‚¹ç±»ä¼¼Javaä¸­çš„LinkedListçš„ç»“æ„,ä¹Ÿæ˜¯ä¸€ä¸ªé“¾è¡¨ï¼Œæ‰€ä»¥æ’å…¥å’Œåˆ é™¤é€Ÿåº¦å¾ˆå¿«O(1)ã€‚ç´¢å¼•å¾ˆæ…¢O(n)ã€‚è¿™ä¸€ç‰¹æ€§å¯¼è‡´Redisä¸­çš„åˆ—è¡¨ç»å¸¸ç”¨æ¥åšåˆ—é˜Ÿã€‚</li>\n</ul>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># å‹æ ˆçš„æ•ˆæœï¼Œåè¿›å…ˆå‡ºã€‚</span></span><br><span class=\"line\">192.168.31.7:6379&gt; rpush coding java pyhon c php</span><br><span class=\"line\">(<span class=\"built_in\">integer</span>) 4</span><br><span class=\"line\">192.168.31.7:6379&gt; rpop coding</span><br><span class=\"line\"><span class=\"string\">\"php\"</span></span><br><span class=\"line\">192.168.31.7:6379&gt; rpop coding</span><br><span class=\"line\"><span class=\"string\">\"c\"</span></span><br><span class=\"line\">192.168.31.7:6379&gt; rpop coding</span><br><span class=\"line\"><span class=\"string\">\"pyhon\"</span></span><br><span class=\"line\">192.168.31.7:6379&gt; rpop coding</span><br><span class=\"line\"><span class=\"string\">\"java\"</span></span><br><span class=\"line\"><span class=\"comment\"># åˆ—é˜Ÿï¼Œå…ˆè¿›å…ˆå‡º</span></span><br><span class=\"line\">192.168.31.7:6379&gt; rpush coding java pyhon c php</span><br><span class=\"line\">(<span class=\"built_in\">integer</span>) 4</span><br><span class=\"line\">192.168.31.7:6379&gt; lpop coding</span><br><span class=\"line\"><span class=\"string\">\"java\"</span></span><br><span class=\"line\">192.168.31.7:6379&gt; lpop coding</span><br><span class=\"line\"><span class=\"string\">\"pyhon\"</span></span><br><span class=\"line\">192.168.31.7:6379&gt; lpop coding</span><br><span class=\"line\"><span class=\"string\">\"c\"</span></span><br><span class=\"line\">192.168.31.7:6379&gt; lpop coding</span><br><span class=\"line\"><span class=\"string\">\"php\"</span></span><br><span class=\"line\"><span class=\"comment\"># è·å–åˆ—é˜Ÿé•¿åº¦</span></span><br><span class=\"line\">192.168.31.7:6379&gt; llen coding</span><br><span class=\"line\">(<span class=\"built_in\">integer</span>) 4</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"è·å–Listå…ƒç´ \"><a href=\"#è·å–Listå…ƒç´ \" class=\"headerlink\" title=\"è·å–Listå…ƒç´ \"></a>è·å–Listå…ƒç´ </h4><ul>\n<li>è¿™ä¸ªæ“ä½œéå¸¸æ…¢ï¼Œç±»ä¼¼LinkedListçš„getçš„æ“ä½œã€‚</li>\n</ul>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">192.168.31.7:6379&gt; lindex coding 1</span><br><span class=\"line\"><span class=\"string\">\"pyhon\"</span></span><br><span class=\"line\">192.168.31.7:6379&gt; lrange coding 1 -1 <span class=\"comment\">#éå†</span></span><br><span class=\"line\">1) <span class=\"string\">\"pyhon\"</span></span><br><span class=\"line\">2) <span class=\"string\">\"c\"</span></span><br><span class=\"line\">3) <span class=\"string\">\"php\"</span></span><br><span class=\"line\">192.168.31.7:6379&gt; ltrim coding 1 0  <span class=\"comment\"># æ¸…ç©ºåˆ—è¡¨</span></span><br><span class=\"line\">OK</span><br><span class=\"line\">192.168.31.7:6379&gt; llen coding</span><br><span class=\"line\">(<span class=\"built_in\">integer</span>) 0</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"Hash\"><a href=\"#Hash\" class=\"headerlink\" title=\"Hash\"></a>Hash</h3><ul>\n<li>Redisçš„hashå’ŒJavaä¸­çš„Hashmapç±»ä¼¼çš„ç»“æ„ï¼Œæ•°ç»„+é“¾è¡¨ï¼Œç¢°æ’hashå°±è¿›æ¡¶ã€‚ä½†æ˜¯rediså­—å…¸å€¼åªèƒ½æ˜¯å­—ç¬¦ä¸²ã€‚</li>\n</ul>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># ä»è¿›å»ä¸‰æ¡</span></span><br><span class=\"line\">192.168.31.7:6379&gt; hset books java <span class=\"string\">\"think in java\"</span></span><br><span class=\"line\">(<span class=\"built_in\">integer</span>) 1</span><br><span class=\"line\">192.168.31.7:6379&gt; hset books python <span class=\"string\">\"think in python\"</span></span><br><span class=\"line\">(<span class=\"built_in\">integer</span>) 1</span><br><span class=\"line\">192.168.31.7:6379&gt; hset books c <span class=\"string\">\"think in c\"</span></span><br><span class=\"line\">(<span class=\"built_in\">integer</span>) 1</span><br><span class=\"line\">192.168.31.7:6379&gt; hlen books</span><br><span class=\"line\">(<span class=\"built_in\">integer</span>) 3</span><br><span class=\"line\"><span class=\"comment\"># æ ¹æ® keyè·å–value</span></span><br><span class=\"line\">192.168.31.7:6379&gt; hget books java</span><br><span class=\"line\"><span class=\"string\">\"think in java\"</span></span><br><span class=\"line\">192.168.31.7:6379&gt; hget books python</span><br><span class=\"line\"><span class=\"string\">\"think in python\"</span></span><br><span class=\"line\">192.168.31.7:6379&gt; hget books c</span><br><span class=\"line\"><span class=\"string\">\"think in c\"</span></span><br><span class=\"line\"><span class=\"comment\"># æ›´æ–°</span></span><br><span class=\"line\">192.168.31.7:6379&gt; hset books java <span class=\"string\">\"learning in java\"</span></span><br><span class=\"line\">(<span class=\"built_in\">integer</span>) 0 <span class=\"comment\"># æ›´æ–°æ“ä½œè¿”å›æ˜¯0ã€‚ã€‚ã€‚</span></span><br></pre></td></tr></table></figure>\n\n<h4 id=\"è®¡æ•°-1\"><a href=\"#è®¡æ•°-1\" class=\"headerlink\" title=\"è®¡æ•°\"></a>è®¡æ•°</h4><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">192.168.31.7:6379&gt; hset books count 1</span><br><span class=\"line\">(<span class=\"built_in\">integer</span>) 1</span><br><span class=\"line\">192.168.31.7:6379&gt; hincrby books count 1</span><br><span class=\"line\">(<span class=\"built_in\">integer</span>) 2</span><br><span class=\"line\">192.168.31.7:6379&gt; hincrby books count 1</span><br><span class=\"line\">(<span class=\"built_in\">integer</span>) 3</span><br><span class=\"line\">192.168.31.7:6379&gt; hincrby books count 1</span><br><span class=\"line\">(<span class=\"built_in\">integer</span>) 4</span><br><span class=\"line\">192.168.31.7:6379&gt; hincrby books count 1</span><br><span class=\"line\">(<span class=\"built_in\">integer</span>) 5</span><br><span class=\"line\">192.168.31.7:6379&gt; hget books count</span><br><span class=\"line\"><span class=\"string\">\"5\"</span></span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>å’Œå­—ç¬¦ä¸²ä¸€æ ·valueæ˜¯æ•°å­—çš„æ—¶å€™ä¹Ÿå¯ä»¥è®¡æ•°ã€‚åœ¨å¾ˆå¤šå¸¸è§éƒ½å¯ä»¥ç”¨çš„å“ˆã€‚</li>\n</ul>\n<h3 id=\"set\"><a href=\"#set\" class=\"headerlink\" title=\"set\"></a>set</h3><ul>\n<li>Redisä¸­çš„setç±»ä¼¼Javaä¸­HashSetçš„æ•°æ®ç»“æ„ï¼Œkeyæ˜¯å”¯ä¸€æ— åºçš„ï¼Œä½†æ˜¯å®ƒçš„valueéƒ½nullã€‚å½“é›†åˆä¸­æœ€åä¸€ä¸ªå…ƒç´ è¢«åˆ é™¤çš„æ—¶å€™ï¼Œé›†åˆä¹Ÿå°±è‡ªåŠ¨åˆ é™¤äº†ã€‚</li>\n</ul>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># ä¸€æ¬¡å†™å…¥å¤šä¸ªkey</span></span><br><span class=\"line\">192.168.31.7:6379&gt; sadd name zhangsan lisi wangwu</span><br><span class=\"line\">(<span class=\"built_in\">integer</span>) 3</span><br><span class=\"line\">192.168.31.7:6379&gt; sadd name zhangsan</span><br><span class=\"line\">(<span class=\"built_in\">integer</span>) 0 <span class=\"comment\"># zhangsan å·²ç»å­˜åœ¨æ’å…¥å¤±è´¥</span></span><br><span class=\"line\">192.168.31.7:6379&gt; smembers name <span class=\"comment\"># æ— åºçš„ç»“æœ</span></span><br><span class=\"line\">1) <span class=\"string\">\"wangwu\"</span></span><br><span class=\"line\">2) <span class=\"string\">\"zhangsan\"</span></span><br><span class=\"line\">3) <span class=\"string\">\"lisi\"</span></span><br><span class=\"line\"><span class=\"comment\"># å¼¹å‡ºæ¥</span></span><br><span class=\"line\">192.168.31.7:6379&gt; spop name </span><br><span class=\"line\"><span class=\"string\">\"lisi\"</span></span><br><span class=\"line\">192.168.31.7:6379&gt; spop name</span><br><span class=\"line\"><span class=\"string\">\"zhangsan\"</span></span><br><span class=\"line\">192.168.31.7:6379&gt; spop name</span><br><span class=\"line\"><span class=\"string\">\"wangwu\"</span></span><br><span class=\"line\">192.168.31.7:6379&gt; smembers name </span><br><span class=\"line\">(empty list or <span class=\"built_in\">set</span>) <span class=\"comment\"># å¼¹å®Œäº†é›†åˆå°±è‡ªå·±åˆ é™¤äº†ã€‚</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"zset\"><a href=\"#zset\" class=\"headerlink\" title=\"zset\"></a>zset</h3><ul>\n<li>åˆ’é‡ç‚¹ï¼Œè¿™ä¸ªæ¯”è¾ƒç‰¹æ®Šã€‚ç±»ä¼¼Javaä¸­çš„SortSetå’ŒHashMapçš„ç»“åˆä½“,å®ç°æœ‰ç‚¹å¤æ‚ã€‚å®ƒæ˜¯ä¸€ä¸ªsetï¼Œå†…éƒ¨çš„valueéƒ½æ˜¯å”¯ä¸€çš„ï¼Œå®ƒåˆå¯ä»¥ç»™æ¯ä¸ªvalue èµ‹äºˆscoreï¼Œä»£è¡¨è¿™ä¸ªvalueçš„æƒé‡ã€‚å†…éƒ¨æ˜¯ä¸€ä¸ª<code>è·³è¡¨åˆ—è¡¨</code>çš„æ•°æ®ç»“æ„ã€‚</li>\n</ul>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># æ’å…¥ä¸‰ä¸ªæ•°æ®</span></span><br><span class=\"line\">192.168.31.7:6379&gt; zadd grade 5.0 <span class=\"string\">\"java\"</span></span><br><span class=\"line\">(<span class=\"built_in\">integer</span>) 1</span><br><span class=\"line\">192.168.31.7:6379&gt; zadd grade 4.9 <span class=\"string\">\"php\"</span></span><br><span class=\"line\">(<span class=\"built_in\">integer</span>) 1</span><br><span class=\"line\">192.168.31.7:6379&gt; zadd grade 5.0 <span class=\"string\">\"c\"</span></span><br><span class=\"line\">(<span class=\"built_in\">integer</span>) 1</span><br><span class=\"line\">192.168.31.7:6379&gt; zadd grade 4.9 <span class=\"string\">\"c\"</span></span><br><span class=\"line\">(<span class=\"built_in\">integer</span>) 0 <span class=\"comment\">#  valueæ˜¯å”¯ä¸€çš„ï¼Œæ‰€ä»¥æ’å…¥å¤±è´¥ã€‚</span></span><br><span class=\"line\"><span class=\"comment\"># ç»Ÿè®¡ä¸‹æ•°é‡ ç±»ä¼¼count()</span></span><br><span class=\"line\">192.168.31.7:6379&gt; zcard grade</span><br><span class=\"line\">(<span class=\"built_in\">integer</span>) 3</span><br><span class=\"line\"><span class=\"comment\"># è·å–valueçš„score</span></span><br><span class=\"line\">192.168.31.7:6379&gt; zscore grade <span class=\"string\">\"java\"</span></span><br><span class=\"line\"><span class=\"string\">\"5\"</span></span><br><span class=\"line\"><span class=\"comment\"># åˆ é™¤ value</span></span><br><span class=\"line\">192.168.31.7:6379&gt; zrem grade <span class=\"string\">\"java\"</span></span><br><span class=\"line\">(<span class=\"built_in\">integer</span>) 1 <span class=\"comment\"># åˆ é™¤æˆåŠŸ</span></span><br><span class=\"line\">192.168.31.7:6379&gt; zcard grade</span><br><span class=\"line\">(<span class=\"built_in\">integer</span>) 2 <span class=\"comment\"># å†æ¬¡ç»Ÿè®¡å°±æ˜¯ä¸¤ä¸ªäº†</span></span><br><span class=\"line\"><span class=\"comment\"># æ ¹æ® score æ’åº æ­£åº</span></span><br><span class=\"line\">192.168.31.7:6379&gt; zrange grade 0 -1</span><br><span class=\"line\">1) <span class=\"string\">\"c\"</span></span><br><span class=\"line\">2) <span class=\"string\">\"php\"</span></span><br><span class=\"line\"><span class=\"comment\"># æ ¹æ® score æ’åº å€’åº</span></span><br><span class=\"line\">192.168.31.7:6379&gt; zrevrange grade 0 -1</span><br><span class=\"line\">1) <span class=\"string\">\"php\"</span></span><br><span class=\"line\">2) <span class=\"string\">\"c\"</span></span><br><span class=\"line\"><span class=\"comment\"># è·å–æ’å</span></span><br><span class=\"line\">192.168.31.7:6379&gt; zrank grade <span class=\"string\">\"c\"</span></span><br><span class=\"line\">(<span class=\"built_in\">integer</span>) 0 <span class=\"comment\"># è¿™é‡Œçš„0æ˜¯ç¬¬0ä½</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"END\"><a href=\"#END\" class=\"headerlink\" title=\"END\"></a>END</h3>","categories":["åŸºç¡€ç†è®º"],"tags":["Redis"]},{"title":"å®è·µ-mybatis+h2+logbackå•å…ƒæµ‹è¯•","url":"/posts/899510692/","content":"<blockquote>\n<p><a href=\"https://z201.cn/2019/02/26/mybatis%E5%B0%8F%E8%AF%95%E7%89%9B%E5%88%80/\">mybatiså°è¯•ç‰›åˆ€</a> åœ¨æ­¤åŸºç¡€ä¸Šæ·»åŠ logæ—¥å¿—ã€‚</p>\n</blockquote>\n<ul>\n<li><p>å®˜æ–¹æ–‡æ¡£ ï¼š <a href=\"http://www.mybatis.org/mybatis-3/zh/logging.html\" target=\"_blank\" rel=\"noopener\">http://www.mybatis.org/mybatis-3/zh/logging.html</a></p>\n</li>\n<li><p>é¡¹ç›®åœ°å€ ï¼š <a href=\"https://github.com/z201/z201.github.io.code/tree/master/mybatis-learning/mybatis-learning-02\" target=\"_blank\" rel=\"noopener\">mybatis-learning-02</a></p>\n</li>\n</ul>\n<h3 id=\"0x01-æµ‹è¯•æ§åˆ¶å°çš„æ˜¾ç¤ºå†…å®¹\"><a href=\"#0x01-æµ‹è¯•æ§åˆ¶å°çš„æ˜¾ç¤ºå†…å®¹\" class=\"headerlink\" title=\"0x01 æµ‹è¯•æ§åˆ¶å°çš„æ˜¾ç¤ºå†…å®¹\"></a>0x01 æµ‹è¯•æ§åˆ¶å°çš„æ˜¾ç¤ºå†…å®¹</h3><figure class=\"highlight sql\"><table><tr><td class=\"code\"><pre><span class=\"line\">User(id=1, name=TOM, age=12, gender=0)</span><br><span class=\"line\">User(id=2, name=JON, age=13, gender=1)</span><br><span class=\"line\">User(id=3, name=King, age=11, gender=0)</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"0x02-å¢åŠ æ—¥å¿—è¾“å‡º\"><a href=\"#0x02-å¢åŠ æ—¥å¿—è¾“å‡º\" class=\"headerlink\" title=\"0x02 å¢åŠ æ—¥å¿—è¾“å‡º\"></a>0x02 å¢åŠ æ—¥å¿—è¾“å‡º</h3><blockquote>\n<p>æ ¹æ®å®˜æ–¹æ–‡æ¡£æ˜¾ç¤ºï¼Œæ”¯æŒçš„logæœ‰å¾ˆå¤šå®ç°ï¼Œè¿™é‡Œä½¿ç”¨Slf4j + Logback å¤šç»„åˆã€‚</p>\n</blockquote>\n<ul>\n<li>æ ¹æ®ä¹‹å‰çš„é¡¹ç›®ï¼Œè¿™é‡Œå·æ‡’é‡æ–°åˆ›å»ºä¸€ä¸ªé¡¹ç›®å¹¶æŠŠä¹‹å‰çš„ä»£ç éƒ½å¤åˆ¶è¿‡æ¥ã€‚</li>\n<li>æ·»åŠ mavenä¾èµ–ã€‚</li>\n</ul>\n<figure class=\"highlight xml\"><table><tr><td class=\"code\"><pre><span class=\"line\"> <span class=\"tag\">&lt;<span class=\"name\">properties</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">mybatis.version</span>&gt;</span>3.5.0<span class=\"tag\">&lt;/<span class=\"name\">mybatis.version</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">junit.version</span>&gt;</span>4.12<span class=\"tag\">&lt;/<span class=\"name\">junit.version</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">lmbok.version</span>&gt;</span>1.18.4<span class=\"tag\">&lt;/<span class=\"name\">lmbok.version</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">mysql.version</span>&gt;</span>5.1.47<span class=\"tag\">&lt;/<span class=\"name\">mysql.version</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">h2.version</span>&gt;</span>1.4.197<span class=\"tag\">&lt;/<span class=\"name\">h2.version</span>&gt;</span></span><br><span class=\"line\">        <span class=\"comment\">&lt;!-- æ–°å¢å†…å®¹ --&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">slf4j.version</span>&gt;</span>1.7.25<span class=\"tag\">&lt;/<span class=\"name\">slf4j.version</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">logback.version</span>&gt;</span>1.2.3<span class=\"tag\">&lt;/<span class=\"name\">logback.version</span>&gt;</span></span><br><span class=\"line\">        <span class=\"comment\">&lt;!-- pomæ–‡ä»¶éœ€è¦æŒ‡å®šæ‰“åŒ…ç¼–ç é›†ï¼Œ[WARNING] File encoding has not been set, using platform encoding GBK, i.e. build is platform dependent!  --&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">project.build.sourceEncoding</span>&gt;</span>UTF-8<span class=\"tag\">&lt;/<span class=\"name\">project.build.sourceEncoding</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">properties</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>org.slf4j<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>slf4j-api<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>$&#123;slf4j.version&#125;<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>ch.qos.logback<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>logback-classic<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>$&#123;logback.version&#125;<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>æ·»åŠ logbacké…ç½®æ–‡ä»¶</li>\n</ul>\n<figure class=\"highlight xml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">configuration</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">appender</span> <span class=\"attr\">name</span>=<span class=\"string\">\"STDOUT\"</span> <span class=\"attr\">class</span>=<span class=\"string\">\"ch.qos.logback.core.ConsoleAppender\"</span>&gt;</span></span><br><span class=\"line\">        <span class=\"comment\">&lt;!-- encoders are assigned the type</span></span><br><span class=\"line\"><span class=\"comment\">             ch.qos.logback.classic.encoder.PatternLayoutEncoder by default --&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">encoder</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">pattern</span>&gt;</span>z201.github.cn %d&#123;HH:mm:ss.SSS&#125; [%thread] %-5level %logger&#123;36&#125; - %msg%n<span class=\"tag\">&lt;/<span class=\"name\">pattern</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">encoder</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">appender</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">root</span> <span class=\"attr\">level</span>=<span class=\"string\">\"debug\"</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">appender-ref</span> <span class=\"attr\">ref</span>=<span class=\"string\">\"STDOUT\"</span> /&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">root</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>å†æ¬¡è¿è¡Œå•å…ƒæµ‹è¯•ã€‚</li>\n</ul>\n<figure class=\"highlight verilog\"><table><tr><td class=\"code\"><pre><span class=\"line\">z201<span class=\"variable\">.github</span><span class=\"variable\">.cn</span> <span class=\"number\">15</span>:<span class=\"number\">08</span>:<span class=\"number\">30</span><span class=\"variable\">.046</span> [main] DEBUG org<span class=\"variable\">.apache</span><span class=\"variable\">.ibatis</span><span class=\"variable\">.logging</span><span class=\"variable\">.LogFactory</span> - Logging initialized using '<span class=\"keyword\">class</span> org<span class=\"variable\">.apache</span><span class=\"variable\">.ibatis</span><span class=\"variable\">.logging</span><span class=\"variable\">.slf4j</span><span class=\"variable\">.Slf4jImpl</span>' adapter.</span><br><span class=\"line\">z201<span class=\"variable\">.github</span><span class=\"variable\">.cn</span> <span class=\"number\">15</span>:<span class=\"number\">08</span>:<span class=\"number\">30</span><span class=\"variable\">.049</span> [main] DEBUG org<span class=\"variable\">.apache</span><span class=\"variable\">.ibatis</span><span class=\"variable\">.logging</span><span class=\"variable\">.LogFactory</span> - Logging initialized using '<span class=\"keyword\">class</span> org<span class=\"variable\">.apache</span><span class=\"variable\">.ibatis</span><span class=\"variable\">.logging</span><span class=\"variable\">.slf4j</span><span class=\"variable\">.Slf4jImpl</span>' adapter.</span><br><span class=\"line\">z201<span class=\"variable\">.github</span><span class=\"variable\">.cn</span> <span class=\"number\">15</span>:<span class=\"number\">08</span>:<span class=\"number\">30</span><span class=\"variable\">.076</span> [main] DEBUG o<span class=\"variable\">.a</span><span class=\"variable\">.i</span><span class=\"variable\">.d</span><span class=\"variable\">.pooled</span><span class=\"variable\">.PooledDataSource</span> - PooledDataSource forcefully closed/removed all connections.</span><br><span class=\"line\">z201<span class=\"variable\">.github</span><span class=\"variable\">.cn</span> <span class=\"number\">15</span>:<span class=\"number\">08</span>:<span class=\"number\">30</span><span class=\"variable\">.076</span> [main] DEBUG o<span class=\"variable\">.a</span><span class=\"variable\">.i</span><span class=\"variable\">.d</span><span class=\"variable\">.pooled</span><span class=\"variable\">.PooledDataSource</span> - PooledDataSource forcefully closed/removed all connections.</span><br><span class=\"line\">z201<span class=\"variable\">.github</span><span class=\"variable\">.cn</span> <span class=\"number\">15</span>:<span class=\"number\">08</span>:<span class=\"number\">30</span><span class=\"variable\">.076</span> [main] DEBUG o<span class=\"variable\">.a</span><span class=\"variable\">.i</span><span class=\"variable\">.d</span><span class=\"variable\">.pooled</span><span class=\"variable\">.PooledDataSource</span> - PooledDataSource forcefully closed/removed all connections.</span><br><span class=\"line\">z201<span class=\"variable\">.github</span><span class=\"variable\">.cn</span> <span class=\"number\">15</span>:<span class=\"number\">08</span>:<span class=\"number\">30</span><span class=\"variable\">.076</span> [main] DEBUG o<span class=\"variable\">.a</span><span class=\"variable\">.i</span><span class=\"variable\">.d</span><span class=\"variable\">.pooled</span><span class=\"variable\">.PooledDataSource</span> - PooledDataSource forcefully closed/removed all connections.</span><br><span class=\"line\">z201<span class=\"variable\">.github</span><span class=\"variable\">.cn</span> <span class=\"number\">15</span>:<span class=\"number\">08</span>:<span class=\"number\">30</span><span class=\"variable\">.155</span> [main] DEBUG o<span class=\"variable\">.a</span><span class=\"variable\">.i</span><span class=\"variable\">.t</span><span class=\"variable\">.jdbc</span><span class=\"variable\">.JdbcTransaction</span> - Opening JDBC Connection</span><br><span class=\"line\">z201<span class=\"variable\">.github</span><span class=\"variable\">.cn</span> <span class=\"number\">15</span>:<span class=\"number\">08</span>:<span class=\"number\">30</span><span class=\"variable\">.356</span> [main] DEBUG o<span class=\"variable\">.a</span><span class=\"variable\">.i</span><span class=\"variable\">.d</span><span class=\"variable\">.pooled</span><span class=\"variable\">.PooledDataSource</span> - Created connection <span class=\"number\">1839168128</span>.</span><br><span class=\"line\">z201<span class=\"variable\">.github</span><span class=\"variable\">.cn</span> <span class=\"number\">15</span>:<span class=\"number\">08</span>:<span class=\"number\">30</span><span class=\"variable\">.356</span> [main] DEBUG o<span class=\"variable\">.a</span><span class=\"variable\">.i</span><span class=\"variable\">.t</span><span class=\"variable\">.jdbc</span><span class=\"variable\">.JdbcTransaction</span> - Setting autocommit to false on JDBC Connection [conn0: url=jdbc:h2:mem:mybatis_learning_01_db user=ROOT]</span><br><span class=\"line\">z201<span class=\"variable\">.github</span><span class=\"variable\">.cn</span> <span class=\"number\">15</span>:<span class=\"number\">08</span>:<span class=\"number\">30</span><span class=\"variable\">.358</span> [main] DEBUG c<span class=\"variable\">.z201</span><span class=\"variable\">.mybatis</span><span class=\"variable\">.learning</span><span class=\"variable\">.UserDao</span><span class=\"variable\">.list</span> - ==&gt;  Preparing: SELECT * FROM <span class=\"meta\">`user` </span></span><br><span class=\"line\">z201<span class=\"variable\">.github</span><span class=\"variable\">.cn</span> <span class=\"number\">15</span>:<span class=\"number\">08</span>:<span class=\"number\">30</span><span class=\"variable\">.384</span> [main] DEBUG c<span class=\"variable\">.z201</span><span class=\"variable\">.mybatis</span><span class=\"variable\">.learning</span><span class=\"variable\">.UserDao</span><span class=\"variable\">.list</span> - ==&gt; Parameters: </span><br><span class=\"line\">z201<span class=\"variable\">.github</span><span class=\"variable\">.cn</span> <span class=\"number\">15</span>:<span class=\"number\">08</span>:<span class=\"number\">30</span><span class=\"variable\">.411</span> [main] DEBUG c<span class=\"variable\">.z201</span><span class=\"variable\">.mybatis</span><span class=\"variable\">.learning</span><span class=\"variable\">.UserDao</span><span class=\"variable\">.list</span> - &lt;==      Total: <span class=\"number\">3</span></span><br><span class=\"line\">z201<span class=\"variable\">.github</span><span class=\"variable\">.cn</span> <span class=\"number\">15</span>:<span class=\"number\">08</span>:<span class=\"number\">30</span><span class=\"variable\">.414</span> [main] DEBUG o<span class=\"variable\">.a</span><span class=\"variable\">.i</span><span class=\"variable\">.t</span><span class=\"variable\">.jdbc</span><span class=\"variable\">.JdbcTransaction</span> - Resetting autocommit to true on JDBC Connection [conn0: url=jdbc:h2:mem:mybatis_learning_01_db user=ROOT]</span><br><span class=\"line\">z201<span class=\"variable\">.github</span><span class=\"variable\">.cn</span> <span class=\"number\">15</span>:<span class=\"number\">08</span>:<span class=\"number\">30</span><span class=\"variable\">.415</span> [main] DEBUG o<span class=\"variable\">.a</span><span class=\"variable\">.i</span><span class=\"variable\">.t</span><span class=\"variable\">.jdbc</span><span class=\"variable\">.JdbcTransaction</span> - Closing JDBC Connection [conn0: url=jdbc:h2:mem:mybatis_learning_01_db user=ROOT]</span><br><span class=\"line\">z201<span class=\"variable\">.github</span><span class=\"variable\">.cn</span> <span class=\"number\">15</span>:<span class=\"number\">08</span>:<span class=\"number\">30</span><span class=\"variable\">.415</span> [main] DEBUG o<span class=\"variable\">.a</span><span class=\"variable\">.i</span><span class=\"variable\">.d</span><span class=\"variable\">.pooled</span><span class=\"variable\">.PooledDataSource</span> - Returned connection <span class=\"number\">1839168128</span> to pool.</span><br><span class=\"line\">User(id=<span class=\"number\">1</span>, name=TOM, age=<span class=\"number\">12</span>, gender=<span class=\"number\">0</span>)</span><br><span class=\"line\">User(id=<span class=\"number\">2</span>, name=JON, age=<span class=\"number\">13</span>, gender=<span class=\"number\">1</span>)</span><br><span class=\"line\">User(id=<span class=\"number\">3</span>, name=King, age=<span class=\"number\">11</span>, gender=<span class=\"number\">0</span>)</span><br><span class=\"line\">z201<span class=\"variable\">.github</span><span class=\"variable\">.cn</span> <span class=\"number\">15</span>:<span class=\"number\">08</span>:<span class=\"number\">30</span><span class=\"variable\">.416</span> [main] DEBUG cn<span class=\"variable\">.z201</span><span class=\"variable\">.mybatis</span><span class=\"variable\">.test</span><span class=\"variable\">.MybatisTest01</span> - <span class=\"keyword\">end</span>...</span><br></pre></td></tr></table></figure>\n\n","categories":["å®è·µ"],"tags":["Mybatis","å®æˆ˜","Logback"]},{"title":"å®è·µ-mybatis+h2å•å…ƒæµ‹è¯•","url":"/posts/887797189/","content":"<blockquote>\n<p>æ¥ç€ä¸Šç« å†…å®¹<a href=\"https://z201.cn/2019/02/26/mybatis%E6%BA%90%E7%A0%81%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/\">mybatisæºç ç¯å¢ƒæ­å»º</a>,æ ¹æ®å®˜æ–¹æ–‡æ¡£ï¼Œè¿è¡Œä¸€ä¸ªdemoé¡¹ç›®ã€‚</p>\n</blockquote>\n<h3 id=\"é¡¹ç›®ç»“æ„\"><a href=\"#é¡¹ç›®ç»“æ„\" class=\"headerlink\" title=\"é¡¹ç›®ç»“æ„\"></a>é¡¹ç›®ç»“æ„</h3><ul>\n<li>é¡¹ç›®æºä»£ç :<a href=\"https://github.com/z201/z201.github.io.code/tree/master/mybatis-learning/mybatis-learning-01\" target=\"_blank\" rel=\"noopener\">mybatis-learning-01</a></li>\n</ul>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">mybatis-learning/mybatis-learning-01</span><br><span class=\"line\">â”œâ”€â”€ mybatis-learning-01.iml</span><br><span class=\"line\">â”œâ”€â”€ pom.xml  <span class=\"comment\">#é¡¹ç›®ä¾èµ–ç®¡ç† 1</span></span><br><span class=\"line\">â””â”€â”€ src</span><br><span class=\"line\">    â”œâ”€â”€ main</span><br><span class=\"line\">    â”‚Â Â  â”œâ”€â”€ java</span><br><span class=\"line\">    â”‚Â Â  â”‚Â Â  â”œâ”€â”€ cn</span><br><span class=\"line\">    â”‚Â Â  â”‚Â Â  â”‚Â Â  â””â”€â”€ z201</span><br><span class=\"line\">    â”‚Â Â  â”‚Â Â  â”‚Â Â      â””â”€â”€ mybatis</span><br><span class=\"line\">    â”‚Â Â  â”‚Â Â  â”‚Â Â          â””â”€â”€ learning</span><br><span class=\"line\">    â”‚Â Â  â”‚Â Â  â”‚Â Â              â”œâ”€â”€ SetUpSessionFactory.java <span class=\"comment\"># mybatis åˆå§‹åŒ–  3</span></span><br><span class=\"line\">    â”‚Â Â  â”‚Â Â  â”‚Â Â              â”œâ”€â”€ User.java <span class=\"comment\"># å®ä½“ 5</span></span><br><span class=\"line\">    â”‚Â Â  â”‚Â Â  â”‚Â Â              â””â”€â”€ UserDao.java <span class=\"comment\"># å®ä½“dao 6</span></span><br><span class=\"line\">    â”‚Â Â  â”‚Â Â  â””â”€â”€ package-info.java</span><br><span class=\"line\">    â”‚Â Â  â””â”€â”€ resources</span><br><span class=\"line\">    â”‚Â Â      â”œâ”€â”€ init_table.sql <span class=\"comment\"># h2æ•°æ®åº“åˆå§‹åŒ–sql 4</span></span><br><span class=\"line\">    â”‚Â Â      â”œâ”€â”€ mybatis</span><br><span class=\"line\">    â”‚Â Â      â”‚Â Â  â””â”€â”€ UserDao.xml <span class=\"comment\"># dao å¯¹åº”çš„mapper 7</span></span><br><span class=\"line\">    â”‚Â Â      â””â”€â”€ mybatis-config.xml <span class=\"comment\"># mybatis é…ç½®æ–‡ä»¶ 2</span></span><br><span class=\"line\">    â””â”€â”€ <span class=\"built_in\">test</span></span><br><span class=\"line\">        â””â”€â”€ java</span><br><span class=\"line\">            â””â”€â”€ cn</span><br><span class=\"line\">                â””â”€â”€ z201</span><br><span class=\"line\">                    â””â”€â”€ mybatis</span><br><span class=\"line\">                        â””â”€â”€ <span class=\"built_in\">test</span></span><br><span class=\"line\">                            â”œâ”€â”€ MybatisTest01.java <span class=\"comment\"># å•å…ƒæµ‹è¯• 8</span></span><br><span class=\"line\">                            â””â”€â”€ package-info.java</span><br><span class=\"line\"></span><br><span class=\"line\">15 directories, 11 files</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>æ ¹æ®ä¸Šé¢æ³¨é‡Šçš„é¡ºåºï¼Œæˆ‘ä»¬ä¾æ¬¡ä»‹ç»é¡¹ç›®ä»£ç ã€‚</p>\n</blockquote>\n<a id=\"more\"></a>\n\n<h4 id=\"0x01-é¡¹ç›®ä¾èµ–ç®¡ç†\"><a href=\"#0x01-é¡¹ç›®ä¾èµ–ç®¡ç†\" class=\"headerlink\" title=\"0x01 é¡¹ç›®ä¾èµ–ç®¡ç†\"></a>0x01 é¡¹ç›®ä¾èµ–ç®¡ç†</h4><figure class=\"highlight xml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">project</span> <span class=\"attr\">xmlns</span>=<span class=\"string\">\"http://maven.apache.org/POM/4.0.0\"</span></span></span><br><span class=\"line\"><span class=\"tag\">         <span class=\"attr\">xmlns:xsi</span>=<span class=\"string\">\"http://www.w3.org/2001/XMLSchema-instance\"</span></span></span><br><span class=\"line\"><span class=\"tag\">         <span class=\"attr\">xsi:schemaLocation</span>=<span class=\"string\">\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\"</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">modelVersion</span>&gt;</span>4.0.0<span class=\"tag\">&lt;/<span class=\"name\">modelVersion</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>cn.z201<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>mybatis-learning-01<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>1.0-SNAPSHOT<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">build</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">plugins</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">plugin</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>org.apache.maven.plugins<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>maven-compiler-plugin<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">configuration</span>&gt;</span></span><br><span class=\"line\">                    <span class=\"tag\">&lt;<span class=\"name\">source</span>&gt;</span>8<span class=\"tag\">&lt;/<span class=\"name\">source</span>&gt;</span></span><br><span class=\"line\">                    <span class=\"tag\">&lt;<span class=\"name\">target</span>&gt;</span>8<span class=\"tag\">&lt;/<span class=\"name\">target</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;/<span class=\"name\">configuration</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;/<span class=\"name\">plugin</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">plugins</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">build</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">properties</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">mybatis.version</span>&gt;</span>3.5.0<span class=\"tag\">&lt;/<span class=\"name\">mybatis.version</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">junit.version</span>&gt;</span>4.12<span class=\"tag\">&lt;/<span class=\"name\">junit.version</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">lmbok.version</span>&gt;</span>1.18.4<span class=\"tag\">&lt;/<span class=\"name\">lmbok.version</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">mysql.version</span>&gt;</span>5.1.47<span class=\"tag\">&lt;/<span class=\"name\">mysql.version</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">h2.version</span>&gt;</span>1.4.197<span class=\"tag\">&lt;/<span class=\"name\">h2.version</span>&gt;</span></span><br><span class=\"line\">        <span class=\"comment\">&lt;!-- pomæ–‡ä»¶éœ€è¦æŒ‡å®šæ‰“åŒ…ç¼–ç é›†ï¼Œ[WARNING] File encoding has not been set, using platform encoding GBK, i.e. build is platform dependent!  --&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">project.build.sourceEncoding</span>&gt;</span>UTF-8<span class=\"tag\">&lt;/<span class=\"name\">project.build.sourceEncoding</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">properties</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">dependencies</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>org.mybatis<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>mybatis<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>$&#123;mybatis.version&#125;<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>org.projectlombok<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>lombok<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>$&#123;lmbok.version&#125;<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>mysql<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>mysql-connector-java<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>$&#123;mysql.version&#125;<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>com.h2database<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>h2<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>$&#123;h2.version&#125;<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">scope</span>&gt;</span>test<span class=\"tag\">&lt;/<span class=\"name\">scope</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">\t\t</span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>junit<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>junit<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>$&#123;junit.version&#125;<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">scope</span>&gt;</span>test<span class=\"tag\">&lt;/<span class=\"name\">scope</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">dependencies</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">project</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<h4 id=\"0x02-mybatis-é…ç½®æ–‡ä»¶\"><a href=\"#0x02-mybatis-é…ç½®æ–‡ä»¶\" class=\"headerlink\" title=\"0x02 mybatis é…ç½®æ–‡ä»¶\"></a>0x02 mybatis é…ç½®æ–‡ä»¶</h4><figure class=\"highlight xml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?xml version=\"1.0\" encoding=\"UTF-8\" ?&gt;</span></span><br><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE <span class=\"meta-keyword\">configuration</span></span></span><br><span class=\"line\"><span class=\"meta\">        <span class=\"meta-keyword\">PUBLIC</span> <span class=\"meta-string\">\"-//mybatis.org//DTD Config 3.0//EN\"</span></span></span><br><span class=\"line\"><span class=\"meta\">        <span class=\"meta-string\">\"http://mybatis.org/dtd/mybatis-3-config.dtd\"</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">configuration</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">environments</span> <span class=\"attr\">default</span>=<span class=\"string\">\"development\"</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">environment</span> <span class=\"attr\">id</span>=<span class=\"string\">\"development\"</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">transactionManager</span> <span class=\"attr\">type</span>=<span class=\"string\">\"JDBC\"</span>/&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">dataSource</span> <span class=\"attr\">type</span>=<span class=\"string\">\"POOLED\"</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">\"driver\"</span> <span class=\"attr\">value</span>=<span class=\"string\">\"org.h2.Driver\"</span>/&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">\"url\"</span> <span class=\"attr\">value</span>=<span class=\"string\">\"jdbc:h2:mem:mybatis_learning_01_db;MODE=MYSQL;INIT=RUNSCRIPT FROM './src/main/resources/init_table.sql'\"</span>/&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">\"username\"</span> <span class=\"attr\">value</span>=<span class=\"string\">\"root\"</span>/&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">\"password\"</span> <span class=\"attr\">value</span>=<span class=\"string\">\"\"</span>/&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;/<span class=\"name\">dataSource</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">environment</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">environments</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">mappers</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">mapper</span> <span class=\"attr\">resource</span>=<span class=\"string\">\"mybatis/UserDao.xml\"</span>/&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">mappers</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<h4 id=\"0x03-mybatis-åˆå§‹åŒ–\"><a href=\"#0x03-mybatis-åˆå§‹åŒ–\" class=\"headerlink\" title=\"0x03 mybatis åˆå§‹åŒ–\"></a>0x03 mybatis åˆå§‹åŒ–</h4><figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> cn.z201.mybatis.learning;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> org.apache.ibatis.io.Resources;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.apache.ibatis.session.SqlSession;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.apache.ibatis.session.SqlSessionFactory;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.apache.ibatis.session.SqlSessionFactoryBuilder;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> java.io.IOException;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.io.InputStream;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">SetUpSessionFactory</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> SqlSession <span class=\"title\">initSessionFactory</span><span class=\"params\">()</span> <span class=\"keyword\">throws</span> IOException </span>&#123;</span><br><span class=\"line\">        String resource = <span class=\"string\">\"mybatis-config.xml\"</span>;</span><br><span class=\"line\">        InputStream inputStream = Resources.getResourceAsStream(resource);</span><br><span class=\"line\">        SqlSessionFactory sqlSessionFactory = <span class=\"keyword\">new</span> SqlSessionFactoryBuilder().build(inputStream);</span><br><span class=\"line\">        <span class=\"keyword\">return</span> sqlSessionFactory.openSession();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"0x04-h2æ•°æ®åº“åˆå§‹åŒ–sql\"><a href=\"#0x04-h2æ•°æ®åº“åˆå§‹åŒ–sql\" class=\"headerlink\" title=\"0x04 h2æ•°æ®åº“åˆå§‹åŒ–sql\"></a>0x04 h2æ•°æ®åº“åˆå§‹åŒ–sql</h4><figure class=\"highlight sql\"><table><tr><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">CREATE</span> <span class=\"keyword\">TABLE</span> <span class=\"string\">`user`</span>(</span><br><span class=\"line\">  <span class=\"keyword\">id</span> <span class=\"built_in\">SMALLINT</span> PRIMARY <span class=\"keyword\">KEY</span> AUTO_INCREMENT ,</span><br><span class=\"line\">  <span class=\"keyword\">name</span> <span class=\"built_in\">VARCHAR</span>(<span class=\"number\">50</span>),</span><br><span class=\"line\">  age <span class=\"built_in\">SMALLINT</span>,</span><br><span class=\"line\">  gender <span class=\"built_in\">SMALLINT</span></span><br><span class=\"line\">);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">INSERT</span> <span class=\"keyword\">INTO</span> <span class=\"string\">`user`</span>(<span class=\"keyword\">name</span> , age , gender) <span class=\"keyword\">VALUES</span>(<span class=\"string\">'TOM'</span> , <span class=\"number\">12</span> , <span class=\"number\">0</span> );</span><br><span class=\"line\"><span class=\"keyword\">INSERT</span> <span class=\"keyword\">INTO</span> <span class=\"string\">`user`</span>(<span class=\"keyword\">name</span> , age , gender) <span class=\"keyword\">VALUES</span>(<span class=\"string\">'JON'</span> , <span class=\"number\">13</span> , <span class=\"number\">1</span> );</span><br><span class=\"line\"><span class=\"keyword\">INSERT</span> <span class=\"keyword\">INTO</span> <span class=\"string\">`user`</span>(<span class=\"keyword\">name</span> , age , gender) <span class=\"keyword\">VALUES</span>(<span class=\"string\">'King'</span> , <span class=\"number\">11</span> , <span class=\"number\">0</span> );</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"0x05-å®ä½“bean\"><a href=\"#0x05-å®ä½“bean\" class=\"headerlink\" title=\"0x05  å®ä½“bean\"></a>0x05  å®ä½“bean</h4><figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> cn.z201.mybatis.learning;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> lombok.AllArgsConstructor;</span><br><span class=\"line\"><span class=\"keyword\">import</span> lombok.Data;</span><br><span class=\"line\"><span class=\"keyword\">import</span> lombok.ToString;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">@Data</span></span><br><span class=\"line\"><span class=\"meta\">@AllArgsConstructor</span></span><br><span class=\"line\"><span class=\"meta\">@ToString</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">User</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> Integer id;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> String name;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> Integer age;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> Integer gender;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"0x06-å®ä½“dao\"><a href=\"#0x06-å®ä½“dao\" class=\"headerlink\" title=\"0x06 å®ä½“dao\"></a>0x06 å®ä½“dao</h4><figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> cn.z201.mybatis.learning;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> java.util.List;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">interface</span> <span class=\"title\">UserDao</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\">List&lt;User&gt; <span class=\"title\">list</span><span class=\"params\">()</span></span>;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"0x07-å®ä½“daoå¯¹åº”çš„mapper-xml\"><a href=\"#0x07-å®ä½“daoå¯¹åº”çš„mapper-xml\" class=\"headerlink\" title=\"0x07 å®ä½“daoå¯¹åº”çš„mapper.xml\"></a>0x07 å®ä½“daoå¯¹åº”çš„mapper.xml</h4><figure class=\"highlight xml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?xml version=\"1.0\" encoding=\"UTF-8\" ?&gt;</span></span><br><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE <span class=\"meta-keyword\">mapper</span> <span class=\"meta-keyword\">PUBLIC</span> <span class=\"meta-string\">\"-//mybatis.org//DTD Mapper 3.0//EN\"</span> <span class=\"meta-string\">\"http://mybatis.org/dtd/mybatis-3-mapper.dtd\"</span> &gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">mapper</span> <span class=\"attr\">namespace</span>=<span class=\"string\">\"cn.z201.mybatis.learning.UserDao\"</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">select</span> <span class=\"attr\">id</span>=<span class=\"string\">\"list\"</span> <span class=\"attr\">resultType</span>=<span class=\"string\">\"cn.z201.mybatis.learning.User\"</span>&gt;</span></span><br><span class=\"line\">      SELECT * FROM `user`</span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">select</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<h4 id=\"0x08-å•å…ƒæµ‹è¯•\"><a href=\"#0x08-å•å…ƒæµ‹è¯•\" class=\"headerlink\" title=\"0x08 å•å…ƒæµ‹è¯•\"></a>0x08 å•å…ƒæµ‹è¯•</h4><figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> cn.z201.mybatis.test;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> cn.z201.mybatis.learning.SetUpSessionFactory;</span><br><span class=\"line\"><span class=\"keyword\">import</span> cn.z201.mybatis.learning.User;</span><br><span class=\"line\"><span class=\"keyword\">import</span> cn.z201.mybatis.learning.UserDao;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.apache.ibatis.session.SqlSession;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.junit.Assert;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.junit.Test;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> java.io.IOException;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.util.List;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">MybatisTest01</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Test</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">test01</span><span class=\"params\">()</span> <span class=\"keyword\">throws</span> IOException </span>&#123;</span><br><span class=\"line\">        SetUpSessionFactory setUpSessionFactory = <span class=\"keyword\">new</span> SetUpSessionFactory();</span><br><span class=\"line\">        SqlSession sqlSession = setUpSessionFactory.initSessionFactory();</span><br><span class=\"line\">        UserDao userDao = sqlSession.getMapper(UserDao<span class=\"class\">.<span class=\"keyword\">class</span>)</span>;</span><br><span class=\"line\">        List&lt;User&gt; userList = userDao.list();</span><br><span class=\"line\">        sqlSession.close();</span><br><span class=\"line\">        Assert.assertNotNull(userList);</span><br><span class=\"line\">        userList.forEach(System.out::println);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>ç»“æœ</li>\n</ul>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">User(id=1, name=TOM, age=12, gender=0)</span><br><span class=\"line\">User(id=2, name=JON, age=13, gender=1)</span><br><span class=\"line\">User(id=3, name=King, age=11, gender=0)</span><br></pre></td></tr></table></figure>\n\n","categories":["å®è·µ"],"tags":["Mybatis","H2","å®æˆ˜"]},{"title":"æºç åˆ†æ-mybatisæºç ç¯å¢ƒæ­å»º","url":"/posts/716639737/","content":"<blockquote>\n<p>mybatiså­¦ä¹ ç¬”è®°ã€‚</p>\n</blockquote>\n<h2 id=\"0x00-é˜…è¯»æºä»£ç \"><a href=\"#0x00-é˜…è¯»æºä»£ç \" class=\"headerlink\" title=\"0x00 é˜…è¯»æºä»£ç \"></a>0x00 é˜…è¯»æºä»£ç </h2><h3 id=\"ä¸‹è½½æºä»£ç \"><a href=\"#ä¸‹è½½æºä»£ç \" class=\"headerlink\" title=\"ä¸‹è½½æºä»£ç \"></a>ä¸‹è½½æºä»£ç </h3><ul>\n<li>ä»£ç ä»“åº“åœ°å€ <a href=\"https://github.com/mybatis/mybatis-3.git\" target=\"_blank\" rel=\"noopener\">https://github.com/mybatis/mybatis-3.git</a></li>\n<li>é˜…è¯»ç‰ˆæœ¬å· <code>myabtis-3.5.0</code></li>\n<li>ä¸‹è½½ç‰ˆæœ¬<code>git clone -b mybatis-3.5.0 https://github.com/mybatis/mybatis-3.git</code><ul>\n<li>ç”±äºgithubä¸‹è½½é€Ÿåº¦æ˜¯åœ¨å¤ªæ…¢äº†ï¼Œè¿™é‡Œç”¨giteeå…‹éš†ä¸€ä¸ªé•œåƒã€‚</li>\n<li>ä¸‹è½½ç‰ˆæœ¬<code>git clone -b mybatis-3.5.0 https://gitee.com/Z201/mybatis-3.git</code></li>\n</ul>\n</li>\n</ul>\n<h3 id=\"æŸ¥çœ‹æºä»£ç ç»“æ„\"><a href=\"#æŸ¥çœ‹æºä»£ç ç»“æ„\" class=\"headerlink\" title=\"æŸ¥çœ‹æºä»£ç ç»“æ„\"></a>æŸ¥çœ‹æºä»£ç ç»“æ„</h3><ul>\n<li>æŸ¥çœ‹é¡¹ç›®ä¸»è¦æ–‡ä»¶å¤¹</li>\n</ul>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">tree -d L 2</span><br><span class=\"line\">.</span><br><span class=\"line\">â”œâ”€â”€ src  </span><br><span class=\"line\">â”‚Â Â  â”œâ”€â”€ main <span class=\"comment\"># æºä»£ç </span></span><br><span class=\"line\">â”‚Â Â  â”œâ”€â”€ site <span class=\"comment\"># ç«™ç‚¹ç¨³å½“</span></span><br><span class=\"line\">â”‚Â Â  â””â”€â”€ <span class=\"built_in\">test</span> <span class=\"comment\"># å•å…ƒæµ‹è¯•</span></span><br><span class=\"line\">â””â”€â”€ travis   <span class=\"comment\"># å®˜æ–¹çš„cié›†æˆ</span></span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>æŸ¥çœ‹é¡¹ç›®æºç ä¸»ç›®å½•</li>\n</ul>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">tree -d src/main -L 5</span><br><span class=\"line\">src/main</span><br><span class=\"line\">â””â”€â”€ java</span><br><span class=\"line\">    â””â”€â”€ org</span><br><span class=\"line\">        â””â”€â”€ apache</span><br><span class=\"line\">            â””â”€â”€ ibatis</span><br><span class=\"line\">                â”œâ”€â”€ annotations <span class=\"comment\"># æ³¨è§£</span></span><br><span class=\"line\">                â”œâ”€â”€ binding     <span class=\"comment\"># ä»£ç†</span></span><br><span class=\"line\">                â”œâ”€â”€ builder     <span class=\"comment\"># æ„é€ </span></span><br><span class=\"line\">                â”œâ”€â”€ cache       <span class=\"comment\"># ç¼“å­˜</span></span><br><span class=\"line\">                â”œâ”€â”€ cursor      <span class=\"comment\"># è¿”å›å€¼ç±»å‹ä¸ºæ¸¸æ ‡çš„æ–¹æ³•</span></span><br><span class=\"line\">                â”œâ”€â”€ datasource  <span class=\"comment\"># æ•°æ®æº</span></span><br><span class=\"line\">                â”œâ”€â”€ exceptions  <span class=\"comment\"># å¼‚å¸¸</span></span><br><span class=\"line\">                â”œâ”€â”€ executor    <span class=\"comment\"># æ•°æ®æ“ä½œå…·ä½“æ‰§è¡Œ</span></span><br><span class=\"line\">                â”œâ”€â”€ io          <span class=\"comment\"># æ–‡ä»¶æµ</span></span><br><span class=\"line\">                â”œâ”€â”€ jdbc        <span class=\"comment\"># jdbcæ¨¡å—</span></span><br><span class=\"line\">                â”œâ”€â”€ lang        <span class=\"comment\"># å·¥å…·</span></span><br><span class=\"line\">                â”œâ”€â”€ logging     <span class=\"comment\"># æ—¥å¿—</span></span><br><span class=\"line\">                â”œâ”€â”€ mapping     <span class=\"comment\"># æ˜ å°„ã€å‚æ•°ã€ç»“æœé›†ã€‚</span></span><br><span class=\"line\">                â”œâ”€â”€ parsing     <span class=\"comment\"># è§£æå™¨</span></span><br><span class=\"line\">                â”œâ”€â”€ plugin      <span class=\"comment\"># æ’ä»¶</span></span><br><span class=\"line\">                â”œâ”€â”€ reflection  <span class=\"comment\"># åå°„</span></span><br><span class=\"line\">                â”œâ”€â”€ scripting   <span class=\"comment\"># sqlè§£æ</span></span><br><span class=\"line\">                â”œâ”€â”€ session     <span class=\"comment\"># æ¥å£å±‚ä¼šè¯</span></span><br><span class=\"line\">                â”œâ”€â”€ transaction <span class=\"comment\"># äº‹ç‰©</span></span><br><span class=\"line\">                â””â”€â”€ <span class=\"built_in\">type</span>        <span class=\"comment\"># ç±»å‹</span></span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>å°†é¡¹ç›®å¯¼å…¥ideaä¸­ï¼Œå°±å¯ä»¥çœ‹åˆ°å®Œæ•´çš„æºä»£ç äº†ã€‚</li>\n</ul>\n<h2 id=\"0x01-æ ¹æ®å®˜æ–¹æ–‡æ¡£å¿«é€Ÿå…¥é—¨\"><a href=\"#0x01-æ ¹æ®å®˜æ–¹æ–‡æ¡£å¿«é€Ÿå…¥é—¨\" class=\"headerlink\" title=\"0x01 æ ¹æ®å®˜æ–¹æ–‡æ¡£å¿«é€Ÿå…¥é—¨\"></a>0x01 æ ¹æ®å®˜æ–¹æ–‡æ¡£å¿«é€Ÿå…¥é—¨</h2><blockquote>\n<p>å¼ºçƒˆæ¨èè®¤çœŸé˜…è¯»mybatisçš„å®˜æ–¹æ–‡æ¡£ã€‚</p>\n</blockquote>\n<ul>\n<li>å®˜æ–¹æ–‡æ¡£åœ°å€ ï¼š <a href=\"http://www.mybatis.org/mybatis-3/zh/getting-started.html\" target=\"_blank\" rel=\"noopener\">http://www.mybatis.org/mybatis-3/zh/getting-started.html</a></li>\n</ul>\n","categories":["æºç åˆ†æ"],"tags":["Mybatis"]},{"title":"å®è·µ-Maven","url":"/posts/2184043232/","content":"<blockquote>\n<p>æœ¬ç« æ˜¯æ•´ç†çŸ¥è¯†å†…å®¹ï¼Œä¸ºå¼ºåŒ–çŸ¥è¯†é•¿æœŸæ›´æ–°ã€‚</p>\n</blockquote>\n<h3 id=\"Mavanå¸¸ç”¨å‘½ä»¤ä»¥åŠç”¨æ³•\"><a href=\"#Mavanå¸¸ç”¨å‘½ä»¤ä»¥åŠç”¨æ³•\" class=\"headerlink\" title=\"Mavanå¸¸ç”¨å‘½ä»¤ä»¥åŠç”¨æ³•\"></a>Mavanå¸¸ç”¨å‘½ä»¤ä»¥åŠç”¨æ³•</h3><ul>\n<li>å¸¸ç”¨å‘½ä»¤å°±è¦å…ˆäº†è§£Mavençš„ç”Ÿå‘½å‘¨æœŸ<ul>\n<li>Mavençš„ç”Ÿå‘½å‘¨æœŸå°±æ˜¯å¯¹æ‰€æœ‰çš„æ„å»ºè¿‡ç¨‹è¿›è¡ŒæŠ½è±¡å’Œç»Ÿä¸€ã€‚åŒ…å«äº†é¡¹ç›®çš„æ¸…ç†ã€åˆå§‹åŒ–ã€ç¼–è¯‘ã€æµ‹è¯•ã€æ‰“åŒ…ã€é›†æˆæµ‹è¯•ã€éªŒè¯ã€éƒ¨ç½²å’Œç«™ç‚¹ç”Ÿæˆç­‰å‡ ä¹æ‰€æœ‰çš„æ„å»ºæ­¥éª¤ã€‚</li>\n<li>Mavençš„ç”Ÿå‘½å‘¨æœŸæ˜¯æŠ½è±¡çš„ï¼Œå³ç”Ÿå‘½å‘¨æœŸä¸åšä»»ä½•å®é™…çš„å·¥ä½œï¼Œå®é™…ä»»åŠ¡ç”±æ’ä»¶å®Œæˆï¼Œç±»ä¼¼äºè®¾è®¡æ¨¡å¼ä¸­çš„æ¨¡æ¿æ–¹æ³•ã€‚æ‰€ä»¥å¿…é¡»æœ‰å¯¹åº”çš„æ’ä»¶æ‰èƒ½æ‰§è¡Œå¯¹äºçš„æ­¥éª¤ã€‚</li>\n<li>Mavenæœ‰ä¸‰å¥—ç›¸äº’ç‹¬ç«‹çš„ç”Ÿå‘½å‘¨æœŸï¼Œåˆ†åˆ«æ˜¯cleanã€defaultå’Œsiteã€‚æ¯ä¸ªç”Ÿå‘½å‘¨æœŸåŒ…å«ä¸€äº›é˜¶æ®µï¼ˆphaseï¼‰ï¼Œé˜¶æ®µæ˜¯æœ‰é¡ºåºçš„ï¼Œåé¢çš„é˜¶æ®µä¾èµ–äºå‰é¢çš„é˜¶æ®µã€‚<ul>\n<li><strong>cleanç”Ÿå‘½å‘¨æœŸ</strong>ï¼šæ¸…ç†é¡¹ç›®ï¼ŒåŒ…å«ä¸‰ä¸ªphaseã€‚<ul>\n<li>1.ï¼‰pre-cleanï¼šæ‰§è¡Œæ¸…ç†å‰éœ€è¦å®Œæˆçš„å·¥ä½œã€‚</li>\n<li>2ï¼‰cleanï¼šæ¸…ç†ä¸Šä¸€æ¬¡æ„å»ºç”Ÿæˆçš„æ–‡ä»¶ã€‚</li>\n<li>3ï¼‰post-cleanï¼šæ‰§è¡Œæ¸…ç†åéœ€è¦å®Œæˆçš„å·¥ä½œã€‚</li>\n</ul>\n</li>\n<li><strong>defaultç”Ÿå‘½å‘¨æœŸ</strong>ï¼šæ„å»ºé¡¹ç›®ï¼Œé‡è¦çš„phaseå¦‚ä¸‹ã€‚<ul>\n<li>1ï¼‰validateï¼šéªŒè¯å·¥ç¨‹æ˜¯å¦æ­£ç¡®ï¼Œæ‰€æœ‰éœ€è¦çš„èµ„æºæ˜¯å¦å¯ç”¨ã€‚</li>\n<li>2ï¼‰compileï¼šç¼–è¯‘é¡¹ç›®çš„æºä»£ç ã€‚  </li>\n<li>3ï¼‰testï¼šä½¿ç”¨åˆé€‚çš„å•å…ƒæµ‹è¯•æ¡†æ¶æ¥æµ‹è¯•å·²ç¼–è¯‘çš„æºä»£ç ã€‚è¿™äº›æµ‹è¯•ä¸éœ€è¦å·²æ‰“åŒ…å’Œå¸ƒç½²ã€‚</li>\n<li>4ï¼‰Packageï¼šæŠŠå·²ç¼–è¯‘çš„ä»£ç æ‰“åŒ…æˆå¯å‘å¸ƒçš„æ ¼å¼ï¼Œæ¯”å¦‚jarã€‚</li>\n<li>5ï¼‰integration-testï¼šå¦‚æœ‰éœ€è¦ï¼Œå°†åŒ…å¤„ç†å’Œå‘å¸ƒåˆ°ä¸€ä¸ªèƒ½å¤Ÿè¿›è¡Œé›†æˆæµ‹è¯•çš„ç¯å¢ƒã€‚</li>\n<li>6ï¼‰verifyï¼šè¿è¡Œæ‰€æœ‰æ£€æŸ¥ï¼ŒéªŒè¯åŒ…æ˜¯å¦æœ‰æ•ˆä¸”è¾¾åˆ°è´¨é‡æ ‡å‡†ã€‚</li>\n<li>7ï¼‰installï¼šæŠŠåŒ…å®‰è£…åˆ°mavenæœ¬åœ°ä»“åº“ï¼Œå¯ä»¥è¢«å…¶ä»–å·¥ç¨‹ä½œä¸ºä¾èµ–æ¥ä½¿ç”¨ã€‚</li>\n<li>8ï¼‰Deployï¼šåœ¨é›†æˆæˆ–è€…å‘å¸ƒç¯å¢ƒä¸‹æ‰§è¡Œï¼Œå°†æœ€ç»ˆç‰ˆæœ¬çš„åŒ…æ‹·è´åˆ°è¿œç¨‹çš„repositoryï¼Œä½¿å¾—å…¶ä»–çš„å¼€å‘è€…æˆ–è€…å·¥ç¨‹å¯ä»¥å…±äº«ã€‚</li>\n</ul>\n</li>\n<li><strong>siteç”Ÿå‘½å‘¨æœŸ</strong>ï¼šå»ºç«‹å’Œå‘å¸ƒé¡¹ç›®ç«™ç‚¹ï¼Œphaseå¦‚ä¸‹ã€‚<ul>\n<li>1ï¼‰pre-siteï¼šç”Ÿæˆé¡¹ç›®ç«™ç‚¹ä¹‹å‰éœ€è¦å®Œæˆçš„å·¥ä½œã€‚</li>\n<li>2ï¼‰siteï¼šç”Ÿæˆé¡¹ç›®ç«™ç‚¹æ–‡æ¡£ã€‚</li>\n<li>3ï¼‰post-siteï¼šç”Ÿæˆé¡¹ç›®ç«™ç‚¹ä¹‹åéœ€è¦å®Œæˆçš„å·¥ä½œã€‚</li>\n<li>4ï¼‰site-deployï¼šå°†é¡¹ç›®ç«™ç‚¹å‘å¸ƒåˆ°æœåŠ¡å™¨</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<a id=\"more\"></a>\n\n<ul>\n<li><p>mvn clean </p>\n<ul>\n<li>æ¸…ç†é¡¹ç›®æ„å»ºæ–‡ä»¶ã€‚è°ƒç”¨cleanç”Ÿå‘½å‘¨æœŸçš„cleané˜¶æ®µï¼Œå®é™…æ‰§è¡Œpre-cleanå’Œcleané˜¶æ®µã€‚</li>\n</ul>\n</li>\n<li><p>mvn install</p>\n<ul>\n<li>æ„å»ºé¡¹ç›®æ–‡ä»¶ã€‚å®é™…æ‰§è¡Œpre-cleanå’Œcleanï¼Œinstallä»¥åŠä¹‹å‰æ‰€æœ‰é˜¶æ®µã€‚</li>\n</ul>\n</li>\n<li><p>mvn install -Dmaven.test.skip=true</p>\n<ul>\n<li><p>æ„å»ºé¡¹ç›®çš„æ—¶å€™ä¸æ‰§è¡Œæµ‹è¯•ã€‚ä¹Ÿå¯ä»¥ä½¿ç”¨æ’ä»¶æ¥é…ç½®ã€‚</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">&lt;!-- surefire æ’ä»¶ç”¨æ¥åœ¨mavenæ„å»ºç”Ÿå‘½å‘¨æœŸçš„test phaseæ‰§è¡Œä¸€ä¸ªåº”ç”¨çš„å•å…ƒæµ‹è¯• --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">plugin</span>&gt;</span></span><br><span class=\"line\">   <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>org.apache.maven.plugins<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>maven-surefire-plugin<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>2.19.1<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\">         <span class=\"tag\">&lt;<span class=\"name\">configuration</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">skipTests</span>&gt;</span>true<span class=\"tag\">&lt;/<span class=\"name\">skipTests</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">forkMode</span>&gt;</span>once<span class=\"tag\">&lt;/<span class=\"name\">forkMode</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">argLine</span>&gt;</span>-Dfile.encoding=UTF-8<span class=\"tag\">&lt;/<span class=\"name\">argLine</span>&gt;</span></span><br><span class=\"line\">         <span class=\"tag\">&lt;/<span class=\"name\">configuration</span>&gt;</span></span><br><span class=\"line\">         <span class=\"comment\">&lt;!-- æ’ä»¶æ‰‹åŠ¨åŒ¹é…JUnit ç›®å‰æ˜¯ä½¿ç”¨4.10çš„ç‰ˆæœ¬--&gt;</span></span><br><span class=\"line\">         <span class=\"tag\">&lt;<span class=\"name\">dependencies</span>&gt;</span></span><br><span class=\"line\">              <span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">                  <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>org.apache.maven.surefire<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">                  <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>surefire-junit47<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">                  <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>2.19.1<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\">              <span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">          <span class=\"tag\">&lt;/<span class=\"name\">dependencies</span>&gt;</span></span><br><span class=\"line\">   <span class=\"tag\">&lt;/<span class=\"name\">plugin</span>&gt;</span></span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n</li>\n<li><p>mvn eclipse:eclipse</p>\n<ul>\n<li>å°†pomé¡¹ç›®è½¬æ¢æˆeclipseæ ¼å¼é¡¹ç›®ã€‚</li>\n</ul>\n</li>\n<li><p>mvn jetty:run -war </p>\n<ul>\n<li><p>ä½¿ç”¨å†…ç½®jettyå¯åŠ¨é¡¹ç›®,éœ€è¦é…ç½®jettyæ‰©å±•æ’ä»¶ã€‚ä¹Ÿå¯ä»¥ä½¿ç”¨tomcatæ¥ä½œä¸ºæ’ä»¶ã€‚</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">&lt;!-- é…ç½®Mavenæ’ä»¶(mvn jetty:run -warå¯ä»¥è¿è¡Œé¡¹ç›®) --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">plugin</span>&gt;</span></span><br><span class=\"line\">   <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>org.eclipse.jetty<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">         <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>jetty-maven-plugin<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">         <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>9.3.0.M1<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\">         <span class=\"tag\">&lt;<span class=\"name\">configuration</span>&gt;</span></span><br><span class=\"line\">            <span class=\"comment\">&lt;!-- æŒ‡å®šè®¿é—®ç«¯å£ --&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">httpConnector</span>&gt;</span></span><br><span class=\"line\">               <span class=\"tag\">&lt;<span class=\"name\">port</span>&gt;</span>80<span class=\"tag\">&lt;/<span class=\"name\">port</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;/<span class=\"name\">httpConnector</span>&gt;</span></span><br><span class=\"line\">            <span class=\"comment\">&lt;!-- é—´éš”xæ‰«æä¸€æ¬¡,å®ç°çƒ­éƒ¨ç½² </span></span><br><span class=\"line\"><span class=\"comment\">            &lt;scanIntervalSeconds&gt;0&lt;/scanIntervalSeconds&gt;</span></span><br><span class=\"line\"><span class=\"comment\">            --&gt;</span></span><br><span class=\"line\">            <span class=\"comment\">&lt;!-- ç¼–å†™ç±»æ–‡ä»¶ä¹‹åï¼Œæ˜¯å¦è‡ªåŠ¨é‡å¯jettyï¼›å¯é€‰åé¢ä¸¤ä¸ªå€¼[manual|automatic] </span></span><br><span class=\"line\"><span class=\"comment\">            &lt;reload&gt;manual&lt;/reload&gt;</span></span><br><span class=\"line\"><span class=\"comment\">            --&gt;</span></span><br><span class=\"line\">            <span class=\"comment\">&lt;!-- æŒ‡å®šå…³é—­ç«¯å£ --&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">stopPort</span>&gt;</span>9998<span class=\"tag\">&lt;/<span class=\"name\">stopPort</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">stopKey</span>&gt;</span>stop-jetty<span class=\"tag\">&lt;/<span class=\"name\">stopKey</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">webApp</span>&gt;</span></span><br><span class=\"line\">               <span class=\"comment\">&lt;!-- é…ç½®&lt;contextPath&gt;/&lt;/contextPath&gt;ï¼Œåˆ™è®¿é—®è·¯å¾„ä¸ºhttp://localhost:80 --&gt;</span></span><br><span class=\"line\">               <span class=\"tag\">&lt;<span class=\"name\">contextPath</span>&gt;</span>/<span class=\"tag\">&lt;/<span class=\"name\">contextPath</span>&gt;</span></span><br><span class=\"line\">               <span class=\"comment\">&lt;!-- æ›´æ”¹jettyé»˜è®¤webdefault.xmlæ–‡ä»¶ï¼Œä¸»è¦ä¿®æ”¹äº†useFileMappedBufferå±æ€§ä¸ºfalseï¼Œä½¿å…¶ä¸é”å®šé™æ€æ–‡ä»¶ --&gt;</span></span><br><span class=\"line\">               <span class=\"comment\">&lt;!-- æ­¤æ–‡ä»¶åœ¨Cç›˜\\ç”¨æˆ·ç›®å½•\\.m2\\repository\\org\\eclipse\\jetty\\jetty-webapp\\9.1.0.RC1\\æ‰¾åˆ°jaråŒ…ï¼Œæ‰“å¼€jaråŒ…ç›®å½•org\\eclipse\\jetty\\webapp\\ç›®å½•ä¸­ --&gt;</span></span><br><span class=\"line\">               <span class=\"comment\">&lt;!-- &lt;defaultsDescriptor&gt;webdefault.xml&lt;/defaultsDescriptor&gt; --&gt;</span></span><br><span class=\"line\">               <span class=\"tag\">&lt;<span class=\"name\">defaultsDescriptor</span>&gt;</span>src/main/resources/webdefault.xml<span class=\"tag\">&lt;/<span class=\"name\">defaultsDescriptor</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;/<span class=\"name\">webApp</span>&gt;</span></span><br><span class=\"line\">         <span class=\"tag\">&lt;/<span class=\"name\">configuration</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">plugin</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"æ’ä»¶Git-Version\"><a href=\"#æ’ä»¶Git-Version\" class=\"headerlink\" title=\"æ’ä»¶Git Version\"></a>æ’ä»¶Git Version</h3><figure class=\"highlight xml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">&lt;!-- Git Versionæ’ä»¶ --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">plugin</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>pl.project13.maven<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>git-commit-id-plugin<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>4.0.0<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">executions</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">execution</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">id</span>&gt;</span>get-the-git-infos<span class=\"tag\">&lt;/<span class=\"name\">id</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">phase</span>&gt;</span>initialize<span class=\"tag\">&lt;/<span class=\"name\">phase</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">goals</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">goal</span>&gt;</span>revision<span class=\"tag\">&lt;/<span class=\"name\">goal</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;/<span class=\"name\">goals</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">execution</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">executions</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">configuration</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">dotGitDirectory</span>&gt;</span>$&#123;project.basedir&#125;/.git<span class=\"tag\">&lt;/<span class=\"name\">dotGitDirectory</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">verbose</span>&gt;</span>false<span class=\"tag\">&lt;/<span class=\"name\">verbose</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">dateFormat</span>&gt;</span>yyyy-MM-dd HH:mm:ss<span class=\"tag\">&lt;/<span class=\"name\">dateFormat</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">prefix</span>&gt;</span>git<span class=\"tag\">&lt;/<span class=\"name\">prefix</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">generateGitPropertiesFile</span>&gt;</span>true<span class=\"tag\">&lt;/<span class=\"name\">generateGitPropertiesFile</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">generateGitPropertiesFilename</span>&gt;</span>$&#123;project.build.outputDirectory&#125;/$&#123;project.name&#125;.build.json<span class=\"tag\">&lt;/<span class=\"name\">generateGitPropertiesFilename</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">format</span>&gt;</span>json<span class=\"tag\">&lt;/<span class=\"name\">format</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">gitDescribe</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">skip</span>&gt;</span>false<span class=\"tag\">&lt;/<span class=\"name\">skip</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">always</span>&gt;</span>false<span class=\"tag\">&lt;/<span class=\"name\">always</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">dirty</span>&gt;</span>-dirty<span class=\"tag\">&lt;/<span class=\"name\">dirty</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">gitDescribe</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">configuration</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">plugin</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>æ’ä»¶å°†ä¼šåœ¨æ¯æ¬¡æ„å»ºæ—¶ç”Ÿæˆä¸€ä¸ªç‰ˆæœ¬ç›¸å…³æ–‡ä»¶</li>\n</ul>\n","categories":["å®è·µ"],"tags":["Maven"]},{"title":"æŸ¥ç¼ºè¡¥æ¼-Dubbo","url":"/posts/2124610325/","content":"<blockquote>\n<p>æœ¬ç« æ˜¯æ•´ç†çŸ¥è¯†å†…å®¹ï¼Œä¸ºå¼ºåŒ–çŸ¥è¯†é•¿æœŸæ›´æ–°ã€‚</p>\n</blockquote>\n<h3 id=\"Dubboæ¦‚è¿°\"><a href=\"#Dubboæ¦‚è¿°\" class=\"headerlink\" title=\"Dubboæ¦‚è¿°\"></a>Dubboæ¦‚è¿°</h3><ul>\n<li>æœåŠ¡æ²»ç†ï¼ˆSOAï¼‰æ²»ç†æ¡†æ¶</li>\n<li>Dubooæ˜¯ä¸€ä¸ªåˆ†å¸ƒå¼æœåŠ¡æ¡†æ¶<ul>\n<li>è¿œç¨‹é€šè®¯ï¼šæä¾›å¤šç§åŸºäºé•¿é“¾æ¥çš„NIOæ¡†æ¶æŠ½è±¡å°è£…,åŒ…æ‹¬å¤šç§çº¿ç¨‹æ¨¡å‹ã€åºåˆ—åŒ–â€œè¯·æ±‚-å“åº”â€çš„ä¿¡æ¯äº¤æ¢æ–¹æ¡ˆã€‚</li>\n<li>é›†ç¾¤å®¹é”™ï¼šæä¾›åŸºäºæ¥å£æ–¹æ³•çš„é€æ˜è¿œç¨‹è°ƒç”¨è¿‡ç¨‹ï¼ŒåŒ…æ‹¬å¤šåè®®æ”¯æŒã€è½¯è´Ÿè½½å‡è¡¡ã€å¤±è´¥å®¹é”™ã€åœ°å€è·¯ç”±ã€åŠ¨æ€é…ç½®ç­‰é›†ç¾¤æ”¯æŒã€‚</li>\n<li>è‡ªåŠ¨å‘ç°ï¼šåŸºäºæ³¨å†Œä¸­å¿ƒç›®å½•æœåŠ¡ï¼Œä½¿æœåŠ¡æ¶ˆè´¹æ–¹èƒ½åŠ¨æ€åœ°æŸ¥æ‰¾æä¾›æ–¹ï¼Œä½¿åœ°å€é€æ˜ï¼Œä½¿æœåŠ¡æä¾›æ–¹å¯ä»¥å¹³æ»‘å¢æˆ–å‡å°‘æœºå™¨ã€‚</li>\n<li>ä»‹ç»ï¼š</li>\n<li>è‡´åŠ›äºæä¾›é«˜æ€§èƒ½å’Œé€æ˜åŒ–çš„RPCè¿œç¨‹æœåŠ¡è°ƒç”¨æ–¹æ¡ˆï¼Œä»¥åŠSOAæœåŠ¡æ²»ç†æ–¹æ¡ˆã€‚</li>\n<li>Dubboçš„å‘½åï¼šæ¾³å¤§åˆ©äºšè¾¾åšå¸‚</li>\n<li>åŒç±»å‹æ¡†æ¶ï¼š<ul>\n<li>Apache Thriftã€Hessianã€RMIã€WebServiceï¼ˆåŸç”Ÿï¼‰ã€HSFï¼ˆæ·˜å®ï¼Œä¸å¼€æºï¼‰ã€JSFï¼ˆäº¬ä¸œï¼Œä¸å¼€æºï¼‰ã€‚</li>\n</ul>\n</li>\n<li>Dubboæ¶‰åŠçš„åŸºç¡€çŸ¥è¯†<ul>\n<li>è¿œç¨‹è°ƒç”¨æ–¹é¢ï¼šRMIã€Hassionã€WebServiceã€Thriftè¿›è¡Œåº•å±‚è°ƒç”¨ã€‚</li>\n<li>é€šè®¯äº¤äº’ï¼šHTTPã€Mianã€nettyã€‚</li>\n<li>åºåˆ—åŒ–ï¼šHession2ã€Javaã€Jsonã€‚</li>\n<li>å®¹å™¨ï¼šJettyã€Springã€‚</li>\n<li>è´Ÿè½½å‡è¡¡ï¼šzookeeperã€Redisã€‚ï¼ˆå¤§éƒ¨åˆ†éƒ½æ˜¯zookeeperï¼‰</li>\n</ul>\n</li>\n<li>ç®€å•çš„ä½¿ç”¨åœºæ™¯<ul>\n<li>ä½œä¸ºå¯¹å†…æä¾›æœåŠ¡åº”ç”¨çš„å®¹å™¨ã€‚</li>\n<li>æ‹†åˆ†è´Ÿè½½Webåº”ç”¨åˆ°æœåŠ¡å®¹å™¨ã€‚</li>\n<li>åº”ç”¨è´Ÿè½½å‡å’Œåè°ƒã€‚</li>\n<li>å¼•ç”¨æœåŠ¡å¤„ç†ã€‚</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"æ¶æ„èŠ‚ç‚¹ï¼ˆæŠ½è±¡æ¦‚å¿µï¼‰\"><a href=\"#æ¶æ„èŠ‚ç‚¹ï¼ˆæŠ½è±¡æ¦‚å¿µï¼‰\" class=\"headerlink\" title=\"æ¶æ„èŠ‚ç‚¹ï¼ˆæŠ½è±¡æ¦‚å¿µï¼‰\"></a>æ¶æ„èŠ‚ç‚¹ï¼ˆæŠ½è±¡æ¦‚å¿µï¼‰</h3><ul>\n<li>Provider:æš´éœ²æœåŠ¡çš„æœåŠ¡æä¾›æ–¹ã€‚</li>\n<li>Consumerï¼šè°ƒç”¨è¿œç¨‹æœåŠ¡çš„æœåŠ¡æ¶ˆè´¹æ–¹ã€‚</li>\n<li>Registryï¼šæœåŠ¡æ³¨å†Œäºå‘ç°æœåŠ¡</li>\n<li>Monitor:ç»Ÿè®¡æœåŠ¡çš„è°ƒç”¨æ¬¡è°ƒç”¨æ—¶é—´ç›‘æ§ä¸­å¿ƒ</li>\n<li>Container:æœåŠ¡è¿è¡Œå®¹å™¨<ul>\n<li>èŠ‚ç‚¹è°ƒç”¨å…³ç³»</li>\n<li>æœåŠ¡æä¾›-æœåŠ¡æä¾›è€…åœ¨å¯åŠ¨çš„æ—¶å€™,å‘æ³¨å†Œä¸­å¿ƒæä¾›è‡ªå·±æä¾›çš„æœåŠ¡ã€‚</li>\n<li>æœåŠ¡æ¶ˆè´¹-æœåŠ¡æ¶ˆè´¹è€…åœ¨å¯åŠ¨çš„æ—¶å€™,å‘æ³¨å†Œä¸­å¿ƒè®¢é˜…è‡ªå·±æ‰€éœ€è¦çš„æœåŠ¡ã€‚<ul>\n<li>æ³¨å†Œä¸­å¿ƒå¼‚æ­¥è¿”å›æœåŠ¡æä¾›è€…åœ°å€åˆ—è¡¨ç»™æ¶ˆè´¹è€…,å¦‚æœæœ‰å˜åŠ¨,æ³¨å†Œä¸­å¿ƒå°†ç»™äºˆé•¿è¿æ¥æ¨é€å˜æ›´æ•°æ®ç»™æ¶ˆè´¹è€…ã€‚</li>\n</ul>\n</li>\n<li>æœåŠ¡ç»Ÿè®¡-æœåŠ¡è€…å’Œæ¶ˆè´¹è€…,åœ¨å†…å­˜ä¸­ç´¯è®¡è°ƒç”¨æ¬¡æ•°å’Œè°ƒç”¨æ—¶é—´,å®šæ—¶æ¯åˆ†é’Ÿå‘é€ä¸€æ¬¡ç»Ÿè®¡æ•°æ®åˆ°ç›‘æ§ä¸­å¿ƒã€‚<ul>\n<li>å¼‚æ­¥æ–¹å¼</li>\n</ul>\n</li>\n<li>æœåŠ¡è°ƒç”¨å…³ç³»<ul>\n<li>æœåŠ¡æ¶ˆè´¹è€…,ä»æä¾›è€…åœ°å€åˆ—è¡¨ä¸­,åŸºäº[è½¯è´Ÿè½½å‡è¡¡ç®—æ³•],é€‰ä¸€å°æä¾›è€…è¿›è¡Œè°ƒç”¨,å¦‚æœè°ƒç”¨å¤±è´¥,åœ¨é€‰å¦ä¸€å°è°ƒç”¨ã€‚</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"Dubboæºç ç›¸å…³\"><a href=\"#Dubboæºç ç›¸å…³\" class=\"headerlink\" title=\"Dubboæºç ç›¸å…³\"></a>Dubboæºç ç›¸å…³</h3><ul>\n<li>æºç åœ°å€<code>git clone https://github.com/alibaba/dubbo</code></li>\n<li>åˆæ¬¡ç¼–ç ä¸æ‰§è¡ŒTest <code>mvn clean install -Dmaven.test.skip=true</code></li>\n<li>JSé”™è¯¯ä¸ä¿®æ”¹,è¯·è‡ªè¡Œå¿½è§†ã€‚</li>\n<li>ä¿®å¤mavançš„è­¦å‘Š<br>* åœ°å€ï¼š<code>dubbo-parent pom.xml</code><br>* maven-jar-plugin version:2.4<br>* maven-surefire-plugin Version 2.19.1<br>* maven-deploy-plugin Version 3.3.9</li>\n<li>é¡¹ç›®å¯¼å…¥åä¿®å¤Dubbo XMLæ ¡éªŒé”™è¯¯æç¤º</li>\n<li>éœ€è¦å¯¼å…¥dubbo.xsdæ–‡ä»¶</li>\n<li>ä¸‹è½½dubbo-2.5.3.jar ç‰ˆæœ¬å°½é‡ä¿æŒæºç åŒæ­¥,è§£å‹dtåå¯¼å…¥eclipseä¸­ã€‚<ul>\n<li>Preferences-XML-XML Catalog æ·»åŠ ä¸€ä¸ªè‡ªå®šä¹‰çš„ï¼š<ul>\n<li>Location: D:\\xsd\\dubbo.xsd</li>\n<li>Key: <a href=\"http://code.alibabatech.com/schema/dubbo/dubbo.xsd\" target=\"_blank\" rel=\"noopener\">http://code.alibabatech.com/schema/dubbo/dubbo.xsd</a> ï¼ˆé»˜è®¤ç”Ÿæˆçš„ä¸è¡Œè‡ªè¡Œä¿®æ”¹ï¼‰ã€‚</li>\n<li>åœ¨æ ¡éªŒé”™è¯¯çš„XMLå¤´éƒ¨æ·»åŠ ï¼š</li>\n<li><?xml version=\"1.0\" encoding=\"UTF-8\"?> <!DOCTYPE dubbo SYSTEM\"http://code.alibabatech.com/schema/dubbo\"></li>\n</ul>\n</li>\n</ul>\n</li>\n<li>å…³äºmaven-dependency-pluginé”™è¯¯ å¯èƒ½æ˜¯IDEé”™è¯¯æç¤ºï¼Œç©ºç™½å¤„æ·»åŠ ç©ºæ ¼ä¿å­˜è‡ªåŠ¨æ¶ˆå¤±ã€‚<ul>\n<li>é”™è¯¯ä¿¡æ¯å¦‚ä¸‹ï¼šArtifact has not been packaged yet. When used on reactor artifact, unpack should be executed after packaging: see MDEP-98. (org.apache.maven.plugins:maven-dependency-plugin:2.8:unpack:unpack:package)<ul>\n<li>ä¿®å¤æ–¹æ¡ˆæ›´æ”¹æ’ä»¶é…ç½®:</li>\n<li><groupId>org.apache.maven.plugins</groupId><br><artifactId>maven-dependency-plugin</artifactId><br><version>2.10&lt;/version<executions>\n<execution>\n<id>unpack</id>\n<phase>packaged</phase>\n<goals>\n<goal>unpack</goal>\n</goals>\n</execution>\n</executions>\n</plugin></li>\n</ul>\n</li>\n</ul>\n</li>\n<li>Dubboæºç æ¨¡å—<ul>\n<li>Configé…ç½®å±‚(Dubbo-config)</li>\n<li>ProxyæœåŠ¡ä»£ç†å±‚(Dubbo-rpc)</li>\n<li>Registryæ³¨å†Œä¸­å¿ƒå±‚(Dubbo-registry)</li>\n<li>Clusterè·¯ç”±å±‚(Dubbo-cluster)</li>\n<li>Monitorç›‘æ§å±‚(Dubbo-monitor)</li>\n<li>Protocolè¿œç¨‹è°ƒç”¨å±‚(Dubbo-rpc)</li>\n<li>Exchangeä¿¡æ¯äº¤æ¢å±‚(Dubbo-remoting)</li>\n<li>Transportç½‘ç»œä¼ è¾“å±‚(Dubbo-remoting)</li>\n<li>Serializeæ•°æ®åºåˆ—åŒ–å±‚(Dubbo-common)</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"Zookeeper\"><a href=\"#Zookeeper\" class=\"headerlink\" title=\"Zookeeper\"></a>Zookeeper</h3><blockquote>\n<p>ï¼ˆæµ‹è¯•æ–¹æ¡ˆé‡‡ç”¨zookeeperåšå‡è¡¡è´Ÿè½½ï¼Œç®€å•ä»‹ç»ä¸‹é…ç½®ä¿¡æ¯ï¼‰</p>\n</blockquote>\n<ul>\n<li>ä¸‹è½½åœ°å€ <a href=\"http://apache.fayea.com/zookeeper/zookeeper-3.4.8/zookeeper-3.4.8.tar.gz\" target=\"_blank\" rel=\"noopener\">http://apache.fayea.com/zookeeper/zookeeper-3.4.8/zookeeper-3.4.8.tar.gz</a></li>\n<li>åŸºæœ¬é…ç½®ï¼š<ul>\n<li>å•æœºæ¨¡å¼ï¼šä¿®æ”¹zookeeper-3.4.8/conf zoo.cfg(åŸå§‹æ–‡ä»¶åzoo_sanple.cfgå¤åˆ¶ä¸€ä»½é‡å‘½å)<ul>\n<li>ç¼–è¾‘å†…å®¹ï¼ˆä»…ä¾›å‚è€ƒ,å…·ä½“ç¯å¢ƒè‡ªè¡Œä¿®æ”¹ï¼‰</li>\n<li>tickTime = 2000<ul>\n<li>tickTimeï¼šåŸºæœ¬äº‹ä»¶å•å…ƒï¼Œä»¥æ¯«ç§’ä¸ºå•ä½ã€‚è¿™ä¸ªæ—¶é—´æ˜¯ä½œä¸º Zookeeper æœåŠ¡å™¨ä¹‹é—´æˆ–å®¢æˆ·ç«¯ä¸æœåŠ¡å™¨ä¹‹é—´ç»´æŒå¿ƒè·³çš„æ—¶é—´é—´éš”ï¼Œä¹Ÿå°±æ˜¯æ¯ä¸ª tickTime æ—¶é—´å°±ä¼šå‘é€ä¸€ä¸ªå¿ƒè·³ã€‚</li>\n</ul>\n</li>\n<li>initLimit= 5<ul>\n<li>initLimit:è¿™ä¸ªé…ç½®é¡¹ç”¨æ¥é…ç½®Zookeeperæ¥å—å®¢æˆ·ç«¯åˆå§‹åŒ–è¿æ¥æ—¶æœ€é•¿èƒ½å¿å—å¤šå°‘ä¸ªå¿ƒè·³æ—¶é—´é—´éš”æ•°ï¼Œå½“å·²è¶…è¿‡5ä¸ªå¿ƒè·³çš„æ—¶é—´ï¼ˆä¹Ÿå°±æ˜¯tickTimeï¼‰é•¿åº¦åZookeeperæœåŠ¡å™¨è¿˜æ²¡æœ‰æ”¶åˆ°å®¢æˆ·ç«¯çš„è¿”å›ä¿¡æ¯ï¼Œé‚£ä¹ˆè¡¨æ˜è¿™ä¸ªå®¢æˆ·ç«¯è¿æ¥å¤±è´¥ã€‚æ€»çš„æ—¶é—´é•¿åº¦æ˜¯5 * 2000=4sã€‚</li>\n</ul>\n</li>\n<li>dataDir = D:\\zookeeper\\data<ul>\n<li>é¡¾åæ€ä¹‰å°±æ˜¯ Zookeeper ä¿å­˜æ•°æ®å¿«ç…§çš„ç›®å½•ï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼ŒZookeeper å°†å†™æ•°æ®çš„æ—¥å¿—æ–‡ä»¶ä¹Ÿä¿å­˜åœ¨è¿™ä¸ªç›®å½•é‡Œï¼‰ã€‚</li>\n</ul>\n</li>\n<li>dataLogDir= D:\\zookeeper\\log<ul>\n<li>é¡¾åæ€ä¹‰å°±æ˜¯ Zookeeper ä¿å­˜æ—¥å¿—çš„ç›®å½•ã€‚</li>\n</ul>\n</li>\n<li>synclimit = 5<ul>\n<li>è¿™ä¸ªé…ç½®é¡¹è¡¨ç¤ºLeaderä¸Followerä¹‹é—´å‘é€æ¶ˆæ¯ï¼Œè¯·æ±‚å’Œåº”ç­”æ—¶é—´é•¿é•¿åº¦ï¼Œæœ€é•¿ä¸èƒ½è¶…è¿‡å¤šå°‘ä¸ªtickTimeçš„æ—¶é—´é•¿åº¦,æ€»çš„æ—¶é—´é•¿åº¦æ˜¯2 * 2000 = 4sã€‚</li>\n</ul>\n</li>\n<li>clientPort = 2181<ul>\n<li>è¿™ä¸ªç«¯å£å°±æ˜¯å®¢æˆ·ç«¯è¿æ¥ Zookeeper æœåŠ¡å™¨çš„ç«¯å£ï¼ŒZookeeper ä¼šç›‘å¬è¿™ä¸ªç«¯å£ï¼Œæ¥å—å®¢æˆ·ç«¯çš„è®¿é—®è¯·æ±‚ã€‚</li>\n</ul>\n</li>\n<li>Serverï¼ˆå¾…ç»­ï¼‰<ul>\n<li>æ ¼å¼ï¼šserver.id=host:port:portï¼ˆä¸¤ä¸ªportä¿è¯å¯ä»¥æ­£å¸¸ä½¿ç”¨å°±è¡Œï¼‰<ul>\n<li>idï¼šé€šå¸¸ä¸ºæ•´æ•°ï¼Œå»ºè®®ä½¿ç”¨æ•´æ•°ã€‚</li>\n<li>hostï¼šæœåŠ¡å™¨çš„IPåœ°å€ã€‚</li>\n<li>port: Followerç«¯å£</li>\n<li>port: Leaderé€‰ä¸¾æŠ•ç¥¨ã€‚</li>\n</ul>\n</li>\n<li>ZooKeeperå»ºè®®ä½¿ç”¨hostnameï¼Œè€Œéipã€‚è¿™éœ€è¦å¯¹ä¸»æœºçš„/etc/hostnameå’Œ/etc/hostsåšhostç»‘å®š(ä¸ç”¨çš„OSä¸åŒä¿®æ”¹æ–¹å¼)ã€‚</li>\n</ul>\n</li>\n<li>åˆ›å»ºä¸€ä¸ªmyidæ–‡ä»¶ï¼ˆæ”¾åœ¨ dataDiræ–‡ä»¶ä¸‹é¢ï¼‰<ul>\n<li>å†™å…¥ä¸€è¡Œæ•°æ®ï¼ˆè¯·æŸ¥é˜…zoo.cfgæ–‡ä»¶ï¼‰<ul>\n<li>å†™å…¥å½“å‰Zookeeper idä½ç½®çš„æ•°æ®å³å¯ã€‚è¡¨ç¤ºå½“å‰ç³»ç»Ÿç¯å¢ƒZookeeperæ˜¯å“ªä¸€ä¸ªServerï¼ˆé€šè®¯ç”¨çš„ï¼‰ã€‚</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"Dubboç¨‹åºè¿è¡Œ\"><a href=\"#Dubboç¨‹åºè¿è¡Œ\" class=\"headerlink\" title=\"Dubboç¨‹åºè¿è¡Œ\"></a>Dubboç¨‹åºè¿è¡Œ</h3><ul>\n<li>æµ‹è¯•è¿è¡Œ,é»˜è®¤é…ç½®å³å¯ã€‚æ³¨æ„ä¸zookeeperä¸€å°æœºå™¨ã€‚</li>\n<li>è¿è¡ŒDubbo-adminæœ¬æœºtomcatå¯åŠ¨å¯åŠ¨æˆåŠŸå127.0.0.1:8080/dubbo-adminï¼ˆæ³¨æ„é»˜è®¤è¯·è®¾ç½®è·Ÿç›®å½•,å¦åˆ™éƒ¨åˆ†åŠŸèƒ½ä¸å‘æ­£å¸¸æ˜¾ç¤ºï¼‰<ul>\n<li>é»˜è®¤ç”¨æˆ·åå¯†ç (root/root,guest/guest)</li>\n</ul>\n</li>\n</ul>\n","categories":["çŸ¥è¯†ç‚¹"],"tags":["Java","Dubbo"]},{"title":"æŸ¥ç¼ºè¡¥æ¼-Git","url":"/posts/2654339136/","content":"<blockquote>\n<p>æœ¬ç« æ˜¯æ•´ç†çŸ¥è¯†å†…å®¹ï¼Œä¸ºå¼ºåŒ–çŸ¥è¯†é•¿æœŸæ›´æ–°ã€‚</p>\n</blockquote>\n<h2 id=\"Gité€Ÿåº¦æŸ¥è¯¢è¡¨\"><a href=\"#Gité€Ÿåº¦æŸ¥è¯¢è¡¨\" class=\"headerlink\" title=\"Gité€Ÿåº¦æŸ¥è¯¢è¡¨\"></a>Gité€Ÿåº¦æŸ¥è¯¢è¡¨</h2><p><img src=\"https://z201.oss-cn-shanghai.aliyuncs.com/JavaNote/Git/Git.jpg\"></p>\n<blockquote>\n<p> ä¸‹é¢æ˜¯å¸¸ç”¨ çš„Git å‘½ä»¤æ¸…å•ã€‚å‡ ä¸ªä¸“ç”¨åè¯çš„è¯‘åå¦‚ä¸‹ï¼š</p>\n</blockquote>\n<ul>\n<li>Workspaceï¼šå·¥ä½œåŒº</li>\n<li>Index / Stageï¼šæš‚å­˜åŒº</li>\n<li>Repositoryï¼šä»“åº“åŒºï¼ˆæˆ–æœ¬åœ°ä»“åº“ï¼‰</li>\n<li>Remoteï¼šè¿œç¨‹ä»“åº“</li>\n</ul>\n<h3 id=\"æœ€å°é…ç½®\"><a href=\"#æœ€å°é…ç½®\" class=\"headerlink\" title=\"æœ€å°é…ç½®\"></a>æœ€å°é…ç½®</h3><blockquote>\n<p>ä¸ºä»€ä¹ˆè¦æœ€å°é…ç½®,æ¯æ¬¡æäº¤ä»£ç éœ€è¦å‘Šè¯‰gitã€‚æ‰€ä»¥éœ€è¦ç®€å•è®¾ç½®ä¸‹userä¿¡æ¯ã€‚</p>\n</blockquote>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">git config --global user.name <span class=\"string\">'your name'</span></span><br><span class=\"line\">git config --global user.email <span class=\"string\">'your email'</span></span><br></pre></td></tr></table></figure>\n\n<p>è¿™é‡Œéœ€è¦æ³¨æ„configçš„ä¸‰ä¸ªä½œç”¨åŸŸ</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">git config --<span class=\"built_in\">local</span>  <span class=\"comment\">#æŸä¸ªgitæœ¬åœ°ä»“åº“æœ‰æ•ˆ</span></span><br><span class=\"line\">git config --global <span class=\"comment\">#å½“å‰ç”¨æˆ·æ‰€æœ‰ä»“åº“æœ‰æ•ˆï¼Œå°±æ˜¯ä½ ç³»ç»Ÿçš„ç™»é™†ç”¨æˆ·ã€‚</span></span><br><span class=\"line\">git config --system <span class=\"comment\">#å¯¹ç³»ç»Ÿæ‰€æœ‰çš„ä»“åº“éƒ½æœ‰æ•ˆæœã€‚</span></span><br></pre></td></tr></table></figure>\n\n<p>æˆ‘ä»¬ä¸€èˆ¬åªä¼šä½¿ç”¨local å’Œ globalè¿™ä¸¤ä¸ªé…ç½®ã€‚å½“æˆ‘ä»¬é…ç½®å¥½user.name user.emailä¹‹åï¼Œæˆ‘ä»¬å¯ä»¥æ£€æŸ¥ä¸‹é…ç½®ä¿¡æ¯ã€‚</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">git config --list --<span class=\"built_in\">local</span> <span class=\"comment\"># æ³¨æ„ï¼Œå¿…é¡»åœ¨æŸä¸ªä»“åº“é‡Œé¢æ‰èƒ½çœ‹åˆ°ã€‚</span></span><br><span class=\"line\">git config --list --global</span><br><span class=\"line\">git config --list --system</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"åˆ›å»ºä¸€ä¸ªæœ¬åœ°ä»“åº“\"><a href=\"#åˆ›å»ºä¸€ä¸ªæœ¬åœ°ä»“åº“\" class=\"headerlink\" title=\"åˆ›å»ºä¸€ä¸ªæœ¬åœ°ä»“åº“\"></a>åˆ›å»ºä¸€ä¸ªæœ¬åœ°ä»“åº“</h3><blockquote>\n<p>ä¸€èˆ¬æ¥è¯´gitä»“åº“æœ‰ä¸¤ç§æƒ…å†µï¼Œä¸€ç§æ˜¯æ²¡æœ‰ä»“åº“ï¼Œå¦å¤–ä¸€ç§å°±æ˜¯å·²ç»æœ‰ä»“åº“äº†ã€‚è¿™é‡Œå¯¹ç¬¬ä¸€ç§æƒ…å†µæ¼”ç¤ºï¼Œå› ä¸ºå·¥ä½œä¸­ä¹ æƒ¯åœ¨webä¸Šåˆ›å»ºä»“åº“ã€‚è¿™é‡Œè¿˜æ˜¯äº†è§£ä¸‹ã€‚</p>\n</blockquote>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">git init git_learning</span><br></pre></td></tr></table></figure>\n\n<p>åˆ›å»ºä¸€ä¸ªREADMEæ–‡ä»¶ã€‚</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">touch README.md</span><br></pre></td></tr></table></figure>\n\n<p>è¿™é‡Œéœ€è¦è¯´æ˜ä¸‹ï¼Œæœ¬åœ°ä»“åº“åˆ›å»ºå®Œæˆåéœ€è¦ä¸è¿œç¨‹ä»“åº“è¿›è¡Œç®¡ç†ã€‚</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">git remote add origin github.com:yourname&#x2F;git_learning.git # è¿™é‡Œçš„yourname æ˜¯ä½ çš„gitè´¦å·</span><br></pre></td></tr></table></figure>\n\n<p>å»ºè®®æ‰‹åŠ¨å»githubä¸Šé¢åˆ›å»ºä¸€ä¸ªå«git_learningçš„ä»“åº“ã€‚ä¸Šé¢çš„å‘½ä»¤å°±æ˜¯åšä¸‹å…³è”ã€‚</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">git add . <span class=\"comment\"># å°†å½“å‰æ–‡ä»¶æ·»åŠ è‡³æš‚å­˜åŒº</span></span><br><span class=\"line\">git commit -m <span class=\"string\">\"upload file\"</span> <span class=\"comment\"># å°†æš‚å­˜åŒºçš„æ–‡ä»¶æäº¤åˆ°æœ¬åœ°ä»“åº“</span></span><br><span class=\"line\">git push origin mastet <span class=\"comment\"># å°†æœ¬åœ°ä»“åº“çš„æ”¹åŠ¨ä¿¡æ¯æ¨é€åˆ°è¿œç¨‹ä»“åº“ä¸­</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"å¯æ§ä¸€ä¸ªè¿œç¨‹ä»“åº“\"><a href=\"#å¯æ§ä¸€ä¸ªè¿œç¨‹ä»“åº“\" class=\"headerlink\" title=\"å¯æ§ä¸€ä¸ªè¿œç¨‹ä»“åº“\"></a>å¯æ§ä¸€ä¸ªè¿œç¨‹ä»“åº“</h3><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># å…‹éš†ä¸€ä¸ªä»“åº“</span></span><br><span class=\"line\">git <span class=\"built_in\">clone</span> www.**/**.git</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"æ–‡ä»¶è¿½è¸ª\"><a href=\"#æ–‡ä»¶è¿½è¸ª\" class=\"headerlink\" title=\"æ–‡ä»¶è¿½è¸ª\"></a>æ–‡ä»¶è¿½è¸ª</h3><blockquote>\n<p>æœ‰äº›æ—¶å€™ä¸æƒ³æäº¤éƒ¨åˆ†æ–‡ä»¶ï¼Œä½†æ˜¯git add .çš„æ—¶å€™æ·»åŠ è¿›å»äº†ã€‚</p>\n</blockquote>\n<figure class=\"highlight shell\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"><span class=\"comment\"># æ·»åŠ æ–‡ä»¶åˆ°æš‚å­˜åŒº</span></span></span><br><span class=\"line\">git add [file] [file] </span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"><span class=\"comment\"># æ·»åŠ æ–‡ä»¶å¤¹æš‚å­˜åŒº</span></span></span><br><span class=\"line\">git add [dir]</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"><span class=\"comment\"># æ·»åŠ å½“å‰ç›®å½•æ‰€æœ‰æ–‡ä»¶æš‚å­˜åŒº</span></span></span><br><span class=\"line\">git add .</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"><span class=\"comment\"># å¦‚æœæ˜¯å¯¹æ‰€æœ‰æ–‡ä»¶éƒ½å–æ¶ˆè·Ÿè¸ªçš„è¯ï¼Œå°±æ˜¯</span></span></span><br><span class=\"line\">git rm -r --cached . ã€€ã€€       ## ä¸åˆ é™¤æœ¬åœ°æ–‡ä»¶</span><br><span class=\"line\">git rm -r --f . ã€€ã€€            ## åˆ é™¤æœ¬åœ°æ–‡ä»¶</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"><span class=\"comment\">#å¯¹æŸä¸ªæ–‡ä»¶å–æ¶ˆè·Ÿè¸ª</span></span></span><br><span class=\"line\">git rm --cached readme1.txt    ## åˆ é™¤readme1.txtçš„è·Ÿè¸ªï¼Œå¹¶ä¿ç•™åœ¨æœ¬åœ°ã€‚</span><br><span class=\"line\">git rm --f readme1.txt         ## åˆ é™¤readme1.txtçš„è·Ÿè¸ªï¼Œå¹¶ä¸”åˆ é™¤æœ¬åœ°æ–‡ä»¶s</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"æäº¤ä»“åº“\"><a href=\"#æäº¤ä»“åº“\" class=\"headerlink\" title=\"æäº¤ä»“åº“\"></a>æäº¤ä»“åº“</h3><blockquote>\n<p>å¦‚æœå‘ç°messageå†™é”™äº†ï¼Œå¯ä»¥ä¿®æ”¹ä¸‹ã€‚</p>\n</blockquote>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># ä¿®æ”¹æœ€æ–°ä¸€æ¬¡commitæäº¤messageã€‚</span></span><br><span class=\"line\">git commit --amend  </span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># æäº¤æš‚å­˜åŒºçš„æŒ‡å®šæ–‡ä»¶åˆ°ä»“åº“åŒº</span></span><br><span class=\"line\">git commit [file1] [file2] ... -m [message]</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># å°†æœ¬åœ°æš‚å­˜åŒºçš„æ–‡ä»¶æ¨é€åˆ°æœ¬åœ°ä»“åº“ã€‚ å½“ä¿®æ”¹å·²ç»é€šè¿‡`git add &lt;change file&gt;`å°†å…¶æ·»åŠ åˆ°`stage`ï¼Œå¯ä»¥é€šè¿‡`git commit -m \"&lt;message&gt;\"`ä¸ºè¿™æ‰€æœ‰å·²ç»è¿›å…¥`stage`çš„æ”¹å˜æ·»åŠ ä¸€ä¸ª`commit`ä¿¡æ¯ã€‚</span></span><br><span class=\"line\">git commit -m</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#å¯ä»¥ç›´æ¥ä½¿ç”¨`git commit -am \"&lt;message&gt;\"`ï¼Œå°†æ‰€æœ‰ä¿®æ”¹ï¼Œä½†æœªè¿›`stage`çš„æ”¹åŠ¨åŠ å…¥`stage`ï¼Œå¹¶è®°å½•`commit`ä¿¡æ¯ã€‚(æŸç§ç¨‹åº¦ä¸Šç›¸å½“äº`git add`å’Œ`git commit -m`çš„ç»„åˆæŠ€ï¼Œå‰ææ˜¯è¢«æ”¹åŠ¨æ–‡ä»¶å·²ç»æ˜¯`tracked`)</span></span><br><span class=\"line\">git commit -am</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#è¿™ä¸ªå‘½ä»¤ç»å¸¸ä¼šå‡ºç°åœ¨æœ¬åœ°ä»“åº“ä¸è¿œç¨‹ä»“åº“å‘ç”Ÿå†²çªçš„æ—¶å€™ï¼Œéœ€è¦å¼ºåˆ¶æ¨é€æ›´æ–°ã€‚</span></span><br><span class=\"line\">git push -f origin master</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># æ¨é€åˆ é™¤è¿œç¨‹åˆ†æ”¯æ“ä½œ</span></span><br><span class=\"line\">git push origin : xxxx</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># æ¨é€åˆ é™¤è¿œç¨‹åˆ†æ”¯æ“ä½œ</span></span><br><span class=\"line\">git push origin --delete xxxx</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>å¦‚æœæƒ³ä¿®æ”¹ä»¥å¾€çš„commitçš„messageã€‚æ³¨æ„æ˜¯ä¸è¿ç»­çš„commitã€‚<ul>\n<li>é¦–å…ˆæŸ¥çœ‹log é‡Œé¢çš„ä¿¡æ¯,ç„¶åè·å–commitidè¿›è¡Œåˆå¹¶</li>\n</ul>\n</li>\n</ul>\n<a id=\"more\"></a>\n\n<h3 id=\"ä¿¡æ¯æŸ¥çœ‹\"><a href=\"#ä¿¡æ¯æŸ¥çœ‹\" class=\"headerlink\" title=\"ä¿¡æ¯æŸ¥çœ‹\"></a>ä¿¡æ¯æŸ¥çœ‹</h3><blockquote>\n<p>å¦‚æœæˆ‘ä»¬éœ€è¦æŸ¥çœ‹commit æäº¤æ—¥å¿—å¯ä»¥ä½¿ç”¨logå‘½ä»¤ï¼Œè¿™é‡Œç®€å•ä»‹ç»ä¸‹logã€‚</p>\n</blockquote>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># æŸ¥çœ‹æŸ¥çœ‹æœ¬åœ°ä»“åº“çŠ¶æ€ä¿¡æ¯ã€‚</span></span><br><span class=\"line\">git status</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#logä¿¡æ¯ä¸€è¡Œæ˜¾ç¤º</span></span><br><span class=\"line\">git <span class=\"built_in\">log</span> --oneline </span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#å¯¹æ¯”æäº¤ä¿¡æ¯</span></span><br><span class=\"line\">git diff</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># æ˜¾ç¤ºæš‚å­˜åŒºå’Œä¸Šä¸€ä¸ªcommitçš„å·®å¼‚</span></span><br><span class=\"line\">git diff --cached [file]</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># æ˜¾ç¤ºå·¥ä½œåŒºä¸å½“å‰åˆ†æ”¯æœ€æ–°commitä¹‹é—´çš„å·®å¼‚</span></span><br><span class=\"line\">git diff HEAD</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># æ˜¾ç¤ºä¸¤æ¬¡æäº¤ä¹‹é—´çš„å·®å¼‚</span></span><br><span class=\"line\">git diff [first-branch]...[second-branch]</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># æ˜¾ç¤ºä»Šå¤©ä½ å†™äº†å¤šå°‘è¡Œä»£ç </span></span><br><span class=\"line\">git diff --shortstat <span class=\"string\">\"@&#123;0 day ago&#125;\"</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># æ˜¾ç¤ºæŸæ¬¡æäº¤çš„å…ƒæ•°æ®å’Œå†…å®¹å˜åŒ–</span></span><br><span class=\"line\">git show [commit]</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># æ˜¾ç¤ºæŸæ¬¡æäº¤å‘ç”Ÿå˜åŒ–çš„æ–‡ä»¶</span></span><br><span class=\"line\">git show --name-only [commit]</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># æ˜¾ç¤ºæŸæ¬¡æäº¤æ—¶ï¼ŒæŸä¸ªæ–‡ä»¶çš„å†…å®¹</span></span><br><span class=\"line\">git show [commit]:[filename]</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># æ˜¾ç¤ºå½“å‰åˆ†æ”¯çš„æœ€è¿‘å‡ æ¬¡æäº¤</span></span><br><span class=\"line\">git reflog</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># è‡ªå¸¦çš„å›¾å½¢åŒ–å‘½ä»¤çœ‹æäº¤è®°å½•ã€‚</span></span><br><span class=\"line\">git <span class=\"built_in\">log</span> --oneline --graph</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#logä¿¡æ¯ä¸€è¡Œæ˜¾ç¤ºã€‚ä¸”æ˜¾ç¤º2æ¡è®°å½•ã€‚</span></span><br><span class=\"line\">git <span class=\"built_in\">log</span> --oneline -n2</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"æ’¤é”€\"><a href=\"#æ’¤é”€\" class=\"headerlink\" title=\"æ’¤é”€\"></a>æ’¤é”€</h3><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># ä¿®æ”¹æ–‡ä»¶åç§°ã€‚</span></span><br><span class=\"line\">git mv -f xxx xxx</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># æœ‰çš„æ—¶å€™è¯¯å°†æ–‡ä»¶æäº¤åˆ°__æš‚å­˜åŒº__,ç”¨è¿™ä¸ªå‘½ä»¤å¯ä»¥åˆ é™¤æ‰ã€‚é¿å…æäº¤åˆ°è¿œç¨‹ä»“åº“ä¸­ã€‚</span></span><br><span class=\"line\">git rm --cache xxxx</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># å› ä¸ºé¡¹ç›®åˆå§‹åŒ–çš„æ—¶å€™æœªæ­£ç¡®é…ç½®æ’é™¤æ–‡ä»¶å¯¼è‡´éƒ¨åˆ†æ–‡ä»¶ä¸€ç›´ä¿å­˜åœ¨æœåŠ¡å™¨ä¸­ã€‚æ‰€ä»¥éœ€è¦è¿œç¨‹åˆ é™¤ä¸‹ã€‚</span></span><br><span class=\"line\"><span class=\"comment\"># åŠ ä¸Š -n è¿™ä¸ªå‚æ•°ï¼Œæ‰§è¡Œå‘½ä»¤æ—¶ï¼Œæ˜¯ä¸ä¼šåˆ é™¤ä»»ä½•æ–‡ä»¶ï¼Œè€Œæ˜¯å±•ç¤ºæ­¤å‘½ä»¤è¦åˆ é™¤çš„æ–‡ä»¶åˆ—è¡¨é¢„è§ˆã€‚</span></span><br><span class=\"line\">git rm -r -n â€”cached xxx</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># è¿œç¨‹åˆ é™¤æ–‡ä»¶</span></span><br><span class=\"line\">git rm -r --cached xxx</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># åˆ é™¤é”™è¯¯ç‰ˆæœ¬æäº¤ï¼Œä¸€èˆ¬æ˜¯å°±è¿‘çš„ä¸€ä¸ªè¿œç¨‹ä»“åº“ç‰ˆæœ¬ã€‚</span></span><br><span class=\"line\">git reset --soft xxx(ç‰ˆæœ¬å·)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># ä»…ä»…åªæ˜¯æ’¤é”€å·²ç»æäº¤çš„ç‰ˆæœ¬åº“å’Œæš‚å­˜åŒºï¼Œå·¥ä½œå»ä¸å—å½±å“ã€‚è¿™ä¸ªæ“ä½œé€šå¸¸æ˜¯ç”¨æ¥åæ‚”æäº¤çš„ã€‚å·¥ä½œå»çš„ä»£ç ä¾ç„¶æœ‰ä»·å€¼ã€‚</span></span><br><span class=\"line\">git reset --mixed xxx(ç‰ˆæœ¬å·)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># å°†å·¥ä½œå»ã€æš‚å­˜åŒºã€ä»“åº“ç‰ˆè®°å½•å›å¤åˆ°æŸä¸€ä¸ªç‰ˆæœ¬ã€‚è¿™ä¸ªæ“ä½œéå¸¸çŠ€åˆ©ï¼Œå°½é‡å°‘ç”¨ã€‚</span></span><br><span class=\"line\">git reset --hard xxx(ç‰ˆæœ¬å·)</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"åˆ†æ”¯\"><a href=\"#åˆ†æ”¯\" class=\"headerlink\" title=\"åˆ†æ”¯\"></a>åˆ†æ”¯</h3><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># åˆ‡æ¢åˆ†æ”¯ï¼Œè‹¥åˆ†æ”¯ä¸å­˜åœ¨åˆ™åˆ›å»ºä¸€ä¸ªxxxåˆ†æ”¯ã€‚</span></span><br><span class=\"line\">git checkout xxx</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># æŸ¥è¯¢å½“å‰å·¥ä½œåˆ†æ”¯</span></span><br><span class=\"line\">git branch --v</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#æŸ¥çœ‹è¿œç¨‹åˆ†æ”¯</span></span><br><span class=\"line\">git branch -r</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># åˆ é™¤æœ¬åœ°æ²¡æœ‰æ‰“å¼€çš„åˆ†æ”¯ã€‚</span></span><br><span class=\"line\">git branch -d  xxx</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># åˆ é™¤æœ¬åœ°æ‰“å¼€çš„åˆ†æ”¯</span></span><br><span class=\"line\">git branch -D xxx</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># åˆ é™¤è¿œç¨‹ä»“åº“åˆ†æ”¯</span></span><br><span class=\"line\">git branch -r -d origin/xxxx</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"å…³é—­å¤§å°å†™å¿½ç•¥\"><a href=\"#å…³é—­å¤§å°å†™å¿½ç•¥\" class=\"headerlink\" title=\"å…³é—­å¤§å°å†™å¿½ç•¥\"></a>å…³é—­å¤§å°å†™å¿½ç•¥</h3><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">git config core.ignorecase <span class=\"literal\">false</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"é‡ä¿®æ”¹å†å²è®°å½•ä¸­çš„ä¿¡æ¯\"><a href=\"#é‡ä¿®æ”¹å†å²è®°å½•ä¸­çš„ä¿¡æ¯\" class=\"headerlink\" title=\"é‡ä¿®æ”¹å†å²è®°å½•ä¸­çš„ä¿¡æ¯\"></a>é‡ä¿®æ”¹å†å²è®°å½•ä¸­çš„ä¿¡æ¯</h3><blockquote>\n<p>è¿›å…¥è¯¥ä»“åº“ç›®å½•ï¼Œæ‰“å¼€ git bash ç•Œé¢ï¼Œæ‰§è¡Œ <code>git log</code> å‘½ä»¤æŸ¥çœ‹å†å²æäº¤ä¿¡æ¯ï¼ˆé‡ç‚¹å…³æ³¨ Authorï¼‰ã€‚</p>\n</blockquote>\n<ul>\n<li>æ‰“å¼€ä¸€ä¸ªæ–‡æœ¬ç¼–è¾‘å™¨ï¼Œç²˜è´´ä¸‹é¢ä»£ç ã€‚<br>ç„¶åæŠŠ OLD_EMAILï¼ŒCORRECT_NAMEï¼ŒCORRECT_EMAIL æ”¹æˆè‡ªå·±çš„æ–°æ—§é‚®ç®±ç”¨æˆ·åã€‚</li>\n</ul>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#!/bin/sh</span></span><br><span class=\"line\"></span><br><span class=\"line\">git filter-branch --env-filter <span class=\"string\">'</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">OLD_EMAIL=\"åŸæ¥çš„é‚®ç®±\"</span></span><br><span class=\"line\"><span class=\"string\">CORRECT_NAME=\"ç°åœ¨çš„åå­—\"</span></span><br><span class=\"line\"><span class=\"string\">CORRECT_EMAIL=\"ç°åœ¨çš„é‚®ç®±\"</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">if [ \"$GIT_COMMITTER_EMAIL\" = \"$OLD_EMAIL\" ]</span></span><br><span class=\"line\"><span class=\"string\">then</span></span><br><span class=\"line\"><span class=\"string\">    export GIT_COMMITTER_NAME=\"$CORRECT_NAME\"</span></span><br><span class=\"line\"><span class=\"string\">    export GIT_COMMITTER_EMAIL=\"$CORRECT_EMAIL\"</span></span><br><span class=\"line\"><span class=\"string\">fi</span></span><br><span class=\"line\"><span class=\"string\">if [ \"$GIT_AUTHOR_EMAIL\" = \"$OLD_EMAIL\" ]</span></span><br><span class=\"line\"><span class=\"string\">then</span></span><br><span class=\"line\"><span class=\"string\">    export GIT_AUTHOR_NAME=\"$CORRECT_NAME\"</span></span><br><span class=\"line\"><span class=\"string\">    export GIT_AUTHOR_EMAIL=\"$CORRECT_EMAIL\"</span></span><br><span class=\"line\"><span class=\"string\">fi</span></span><br><span class=\"line\"><span class=\"string\">'</span> --tag-name-filter cat -- --branches --tags</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>ç‰¹æ®Šæƒ…å†µ-å¦‚æœä¸Šé¢çš„æ‰¹é‡ä¿®æ”¹å‘½ä»¤æ‰§è¡Œå¤±è´¥çš„è¯ï¼Œæ‰§è¡Œä¸€ä¸‹è¿™æ®µå‘½ä»¤ï¼š</li>\n</ul>\n<p><code>bashgit filter-branch -f --index-filter &#39;git rm --cached --ignore-unmatch Rakefile&#39; HEAD</code></p>\n<h3 id=\"gitæ¸…ç†åˆ†æ”¯æäº¤è®°å½•\"><a href=\"#gitæ¸…ç†åˆ†æ”¯æäº¤è®°å½•\" class=\"headerlink\" title=\"gitæ¸…ç†åˆ†æ”¯æäº¤è®°å½•\"></a>gitæ¸…ç†åˆ†æ”¯æäº¤è®°å½•</h3><figure class=\"highlight shell\"><table><tr><td class=\"code\"><pre><span class=\"line\">1.Checkout </span><br><span class=\"line\">   git checkout --orphan latest_branch</span><br><span class=\"line\">2. Add all the files</span><br><span class=\"line\">   git add -A</span><br><span class=\"line\">3. Commit the changes</span><br><span class=\"line\">   git commit -am \"commit message\"</span><br><span class=\"line\">4. Delete the branch</span><br><span class=\"line\">   git branch -D master</span><br><span class=\"line\">5.Rename the current branch to master</span><br><span class=\"line\">   git branch -m master</span><br><span class=\"line\">6.Finally, force update your repository</span><br><span class=\"line\">   git push -f origin master</span><br></pre></td></tr></table></figure>\n\n","categories":["çŸ¥è¯†ç‚¹"],"tags":["Git"]},{"title":"æŸ¥ç¼ºè¡¥æ¼-JavaCollecionsFramework","url":"/posts/347882303/","content":"<blockquote>\n<p>æœ¬ç« æ˜¯æ•´ç†çŸ¥è¯†å†…å®¹ï¼Œä¸ºå¼ºåŒ–çŸ¥è¯†é•¿æœŸæ›´æ–°ã€‚</p>\n</blockquote>\n<h3 id=\"Javaé›†åˆ\"><a href=\"#Javaé›†åˆ\" class=\"headerlink\" title=\"Javaé›†åˆ\"></a>Javaé›†åˆ</h3><p>â€‹    é›†åˆæ˜¯Javaæä¾›çš„å·¥å…·åŒ…ã€åŒ…å«å¸¸ç”¨çš„æ•°æ®ç»“æ„ï¼šé›†åˆã€é“¾è¡¨ã€é˜Ÿåˆ—ã€æ ˆã€æ•°ç»„ã€æ˜ å°„ç­‰ã€‚Collectionçš„åŒ…æ˜¯java.util.*ã€‚</p>\n<h4 id=\"Collection\"><a href=\"#Collection\" class=\"headerlink\" title=\"Collection\"></a>Collection</h4><p><img src=\"https://z201.oss-cn-shanghai.aliyuncs.com/JavaNote/Collection/Java-Collection-Framework.svg\"></p>\n<h4 id=\"Map\"><a href=\"#Map\" class=\"headerlink\" title=\"Map\"></a>Map</h4><p><img src=\"https://z201.oss-cn-shanghai.aliyuncs.com/JavaNote/Collection/Java-Map-Framework.svg\">  </p>\n<p><code>å®é™…ä¸Šè¿˜æœ‰Cloneableã€Serializableæ¥å£æ˜¯éƒ½é›†åˆç±»éœ€è¦å®ç°çš„ï¼Œé€šç”¨æ‰€ä»¥ä¸ä¸ç”»ä¸Šå»äº†ã€‚ </code> </p>\n<h4 id=\"Javaé›†åˆä¸»è¦åˆ’åˆ†4ä¸ªéƒ¨åˆ†ï¼š\"><a href=\"#Javaé›†åˆä¸»è¦åˆ’åˆ†4ä¸ªéƒ¨åˆ†ï¼š\" class=\"headerlink\" title=\"Javaé›†åˆä¸»è¦åˆ’åˆ†4ä¸ªéƒ¨åˆ†ï¼š\"></a>Javaé›†åˆä¸»è¦åˆ’åˆ†4ä¸ªéƒ¨åˆ†ï¼š</h4><ul>\n<li>List(åˆ—é˜Ÿ)</li>\n<li>Set(é›†åˆ)</li>\n<li>Map(æ˜ å°„)</li>\n<li>å·¥å…·ç±»(Iteratorè¿­ä»£å™¨ã€Enumerationæšä¸¾ç±»ã€Arraysã€Collections)</li>\n</ul>\n<h4 id=\"åˆ’é‡ç‚¹\"><a href=\"#åˆ’é‡ç‚¹\" class=\"headerlink\" title=\"åˆ’é‡ç‚¹\"></a>åˆ’é‡ç‚¹</h4><ul>\n<li>Conllection<ul>\n<li>List<ul>\n<li><code>ArrayList</code></li>\n<li><code>Vector</code><ul>\n<li>Stack</li>\n</ul>\n</li>\n<li><code>LinkedList</code></li>\n</ul>\n</li>\n<li>Set<ul>\n<li><code>HashSet</code></li>\n<li><code>TreeSet</code></li>\n<li><code>LinkedHashSet</code></li>\n</ul>\n</li>\n<li>Queue</li>\n</ul>\n</li>\n<li>Map<ul>\n<li><code>HashMap</code></li>\n<li><code>HashTable</code></li>\n<li><code>TreeMap</code></li>\n</ul>\n</li>\n<li>å·¥å…·<ul>\n<li>Arrays</li>\n<li>Collections</li>\n<li>Enumeration</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"Javaç±»åº“ä¸­å…·ä½“é›†åˆ\"><a href=\"#Javaç±»åº“ä¸­å…·ä½“é›†åˆ\" class=\"headerlink\" title=\"Javaç±»åº“ä¸­å…·ä½“é›†åˆ\"></a>Javaç±»åº“ä¸­å…·ä½“é›†åˆ</h3><table>\n<thead>\n<tr>\n<th>é›†åˆç±»å‹</th>\n<th>æ¦‚æ‹¬</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>ArrayList<E></td>\n<td>ä¸€ç§å¯ä»¥åŠ¨æ€å¢é•¿å’Œç¼©å‡çš„ç´¢å¼•åºåˆ—ï¼Œè®¿é—®é€Ÿåº¦å¾ˆå¿«ä½†æ˜¯æ’å…¥å’Œåˆ é™¤æ¯”ArrayListæ…¢ã€‚</td>\n</tr>\n<tr>\n<td>LinkedList<E></td>\n<td>ä¸€ç§å¯ä»¥åœ¨ä»»ä½•ä½ç½®è¿›è¡Œé«˜æ•ˆåœ°æ’å…¥å’Œåˆ é™¤æ“ä½œçš„æœ‰åºåºåˆ—ï¼Œä½†æ˜¯è®¿é—®æ¯”è¾ƒArrayListæ…¢ã€‚</td>\n</tr>\n<tr>\n<td>CopyOnWriteArrayList<E></td>\n<td>CopyOnWriteArrayListç›¸å½“äºçº¿ç¨‹å®‰å…¨çš„ArrayListï¼Œå®ƒå®ç°äº†Listæ¥å£ï¼Œæ”¯æŒé«˜å¹¶å‘ã€‚</td>\n</tr>\n<tr>\n<td>ArrayDeque<E></td>\n<td>ä¸€ç§å¾ªç¯æ•°ç»„å®ç°çš„åŒç«¯åºåˆ—ã€‚</td>\n</tr>\n<tr>\n<td>HashSet<E></td>\n<td>ä¸€ç§æ²¡æœ‰é‡å¤å…ƒç´ çš„æ— åºé›†åˆã€‚</td>\n</tr>\n<tr>\n<td>TreeSet<E></td>\n<td>ä¸€ç§æœ‰åºé›†åˆã€‚</td>\n</tr>\n<tr>\n<td>EnumSet&lt;E extends Enum<E>&gt;</td>\n<td>ä¸€ç§åŒ…å«æšä¸¾ç±»å‹çš„é›†åˆã€‚</td>\n</tr>\n<tr>\n<td>LinkedHashSet<E></td>\n<td>ä¸€ç§å¯ä»¥è®°ä½å…ƒç´ æ’å…¥é¡ºåºçš„é›†åˆã€‚</td>\n</tr>\n<tr>\n<td>PriorityQueue<E></td>\n<td>ä¸€ç§å…è®¸é«˜æ•ˆåˆ é™¤æœ€å°å…ƒç´ çš„é›†åˆã€‚</td>\n</tr>\n<tr>\n<td>HashMap&lt;K , V&gt;</td>\n<td>ä¸€ä¸ªå­˜å‚¨ é”® / å€¼ å…³è”çš„æ•°æ®ç»“æ„ã€‚</td>\n</tr>\n<tr>\n<td>TreeMap&lt;K , V&gt;</td>\n<td>ä¸€ç§é”®å€¼æœ‰åºæ’åˆ—çš„æ˜ å°„è¡¨ã€‚</td>\n</tr>\n<tr>\n<td>EnumMap&lt;K extends Enum<K>, V&gt;</td>\n<td>ä¸€ç§é”®å±äºæšä¸¾ç±»å‹çš„æ˜ å°„è¡¨ã€‚</td>\n</tr>\n<tr>\n<td>LinkedHashMap&lt;K ,V &gt;</td>\n<td>ä¸€ç§å¯ä»¥è®°ä½é”® / å€¼ é¡¹æ·»åŠ é¡ºåºçš„æ˜ å°„è¡¨ã€‚</td>\n</tr>\n<tr>\n<td>WeakHashMap&lt;K , V &gt;</td>\n<td>ä¸€ç§å…¶å€¼æ— ç”¨æ­¦ä¹‹åœ°åå¯ä»¥è¢«åƒåœ¾å›æ”¶å›æ”¶çš„æ˜ å°„è¡¨ã€‚</td>\n</tr>\n<tr>\n<td>IdentityHashMap&lt;K , V&gt;</td>\n<td>ä¸€ç§ç”¨ == è€Œä¸æ˜¯ç”¨ç”¨ equals æ¯”è¾ƒçš„æ˜ å°„è¡¨ã€‚</td>\n</tr>\n</tbody></table>\n<a id=\"more\"></a>\n\n<h3 id=\"Java-Collection-Interface\"><a href=\"#Java-Collection-Interface\" class=\"headerlink\" title=\"Java Collection Interface\"></a>Java Collection Interface</h3><h4 id=\"Set\"><a href=\"#Set\" class=\"headerlink\" title=\"Set\"></a>Set</h4><ul>\n<li>TreeSetï¼šåŸºäºçº¢é»‘æ ‘å®ç°ï¼Œæ”¯æŒæœ‰åºæ€§æ“ä½œï¼Œä¾‹å¦‚æ ¹æ®ä¸€ä¸ªèŒƒå›´æŸ¥æ‰¾å…ƒç´ çš„æ“ä½œã€‚ä½†æ˜¯æŸ¥æ‰¾æ•ˆç‡ä¸å¦‚ HashSetï¼ŒHashSet æŸ¥æ‰¾çš„æ—¶é—´å¤æ‚åº¦ä¸º O(1)ï¼ŒTreeSet åˆ™ä¸º O(logN)ã€‚</li>\n<li>HashSetï¼šåŸºäºå“ˆå¸Œè¡¨å®ç°ï¼Œæ”¯æŒå¿«é€ŸæŸ¥æ‰¾ï¼Œä½†ä¸æ”¯æŒæœ‰åºæ€§æ“ä½œã€‚å¹¶ä¸”å¤±å»äº†å…ƒç´ çš„æ’å…¥é¡ºåºä¿¡æ¯ï¼Œä¹Ÿå°±æ˜¯è¯´ä½¿ç”¨ Iterator éå† HashSet å¾—åˆ°çš„ç»“æœæ˜¯ä¸ç¡®å®šçš„ã€‚</li>\n<li>LinkedHashSetï¼šå…·æœ‰ HashSet çš„æŸ¥æ‰¾æ•ˆç‡ï¼Œå¹¶ä¸”å†…éƒ¨ä½¿ç”¨åŒå‘é“¾è¡¨ç»´æŠ¤å…ƒç´ çš„æ’å…¥é¡ºåºã€‚</li>\n</ul>\n<h4 id=\"List\"><a href=\"#List\" class=\"headerlink\" title=\"List\"></a>List</h4><ul>\n<li>ArrayListï¼šåŸºäºåŠ¨æ€æ•°ç»„å®ç°ï¼Œæ”¯æŒéšæœºè®¿é—®ã€‚</li>\n<li>Vectorï¼šå’Œ ArrayList ç±»ä¼¼ï¼Œä½†å®ƒæ˜¯çº¿ç¨‹å®‰å…¨çš„ã€‚</li>\n<li>LinkedListï¼šåŸºäºåŒå‘é“¾è¡¨å®ç°ï¼Œåªèƒ½é¡ºåºè®¿é—®ï¼Œä½†æ˜¯å¯ä»¥å¿«é€Ÿåœ°åœ¨é“¾è¡¨ä¸­é—´æ’å…¥å’Œåˆ é™¤å…ƒç´ ã€‚ä¸ä»…å¦‚æ­¤ï¼ŒLinkedList è¿˜å¯ä»¥ç”¨ä½œæ ˆã€é˜Ÿåˆ—å’ŒåŒå‘é˜Ÿåˆ—ã€‚</li>\n</ul>\n<h4 id=\"Queue\"><a href=\"#Queue\" class=\"headerlink\" title=\"Queue\"></a>Queue</h4><ul>\n<li>LinkedListï¼šå¯ä»¥ç”¨å®ƒæ¥å®ç°åŒå‘é˜Ÿåˆ—ã€‚</li>\n<li>PriorityQueueï¼šåŸºäºå †ç»“æ„å®ç°ï¼Œå¯ä»¥ç”¨å®ƒæ¥å®ç°ä¼˜å…ˆé˜Ÿåˆ—ã€‚</li>\n</ul>\n<h4 id=\"Map-1\"><a href=\"#Map-1\" class=\"headerlink\" title=\"Map\"></a>Map</h4><ul>\n<li>TreeMapï¼šåŸºäºçº¢é»‘æ ‘å®ç°ã€‚</li>\n<li>HashMapï¼šåŸºäºå“ˆå¸Œè¡¨å®ç°ã€‚</li>\n<li>HashTableï¼šå’Œ HashMap ç±»ä¼¼ï¼Œä½†å®ƒæ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œè¿™æ„å‘³ç€åŒä¸€æ—¶åˆ»å¤šä¸ªçº¿ç¨‹åŒæ—¶å†™å…¥ HashTable ä¸ä¼šå¯¼è‡´æ•°æ®ä¸ä¸€è‡´ã€‚å®ƒæ˜¯é—ç•™ç±»ï¼Œä¸åº”è¯¥å»ä½¿ç”¨å®ƒï¼Œè€Œæ˜¯ä½¿ç”¨ ConcurrentHashMap æ¥æ”¯æŒçº¿ç¨‹å®‰å…¨ï¼ŒConcurrentHashMap çš„æ•ˆç‡ä¼šæ›´é«˜ï¼Œå› ä¸º ConcurrentHashMap å¼•å…¥äº†åˆ†æ®µé”ã€‚</li>\n<li>LinkedHashMapï¼šä½¿ç”¨åŒå‘é“¾è¡¨æ¥ç»´æŠ¤å…ƒç´ çš„é¡ºåºï¼Œé¡ºåºä¸ºæ’å…¥é¡ºåºæˆ–è€…æœ€è¿‘æœ€å°‘ä½¿ç”¨ï¼ˆLRUï¼‰é¡ºåºã€‚</li>\n<li>ConcurrentHashMapï¼šå¹¶å‘çº¿ç¨‹å®‰å…¨çš„hashMapã€‚</li>\n</ul>\n<h4 id=\"æ³›å‹E\"><a href=\"#æ³›å‹E\" class=\"headerlink\" title=\"æ³›å‹E\"></a>æ³›å‹E</h4><p>â€‹    è¯¥æ¥å£å°è£…äº†ä¸åŒç±»å‹çš„ç»“åˆï¼Œä½¿å¾—å¼€å‘äººå‘˜æ“ä½œé›†åˆçš„æ—¶å€™ä¸å¿…å…³å¿ƒä»–ä»¬å…·ä½“çš„å®ç°ï¼Œæ ¸å¿ƒçš„é›†åˆæ¥å£æ˜¯Javaé›†åˆæ¡†æ¶çš„åŸºç¡€ã€‚è¯å¦‚ä¸Šå›¾çœ‹åˆ°çš„æ ¸å¿ƒé›†åˆæ¥å£çš„å±‚æ¬¡å…³ç³»ã€‚</p>\n<p>â€‹    <E>è¯­æ³•å‘Šè¯‰æˆ‘ä»¬è¿™ä¸ªæ¥å£æ˜¯æ³›åŒ–çš„ï¼Œåœ¨ä½¿ç”¨é›†åˆçš„æ—¶å€™éœ€è¦å£°æ˜é›†åˆçš„å®ä¾‹ã€æŒ‡å®šé›†åˆä¸­å¯¹è±¡çš„ç±»å‹ã€‚æŒ‡å®šç±»å‹ä¹‹åç¼–è¯‘å™¨èƒ½åœ¨ç¼–è¯‘æœŸé—´éªŒè¯é›†åˆä¸­çš„å…ƒç´ ç±»å‹æ˜¯æ­£ç¡®çš„ã€‚ä»è€Œå‡å°‘é”™è¯¯ã€‚</p>\n<h3 id=\"Interface\"><a href=\"#Interface\" class=\"headerlink\" title=\"Interface\"></a>Interface</h3><blockquote>\n<p>é¦–å…ˆç®€å•çš„ä»‹ç»ä¸‹æ¥å£ä»¥åŠæ¥å£çš„æ–¹æ³•ï¼Œä¾¿äºåé¢çš„æ·±å…¥å­¦ä¹ ã€‚</p>\n</blockquote>\n<ul>\n<li><p>Iterator<E></p>\n</li>\n<li><p>Iterable<T></p>\n</li>\n<li><p>Collection<E></p>\n<ul>\n<li><p>Queue</p>\n<ul>\n<li>LinkedList åŒå‘åˆ—é˜Ÿç»“æ„ã€‚</li>\n<li>PriorityQueue  åŸºäºå †æœºæ„å®ç°ï¼Œå¯ä»¥ç”¨æ¥åšä¼˜å…ˆçº§åˆ—é˜Ÿã€‚</li>\n</ul>\n</li>\n<li><p>Set</p>\n<ul>\n<li>HashSet  åŸºäºå“ˆå¸Œå®ç°ï¼Œæ”¯æŒå¿«é€ŸæŸ¥æ‰¾ï¼Œä½†ä¸æ”¯æŒæœ‰åºæ€§æ“ä½œï¼Œä¾‹å¦‚æ ¹æ®ä¸€ä¸ªèŒƒå›´æŸ¥æ‰¾å…ƒç´ çš„æ“ä½œã€‚å¹¶ä¸”å¤±å»äº†å…ƒç´ çš„æ’å…¥é¡ºåºä¿¡æ¯ï¼Œä¹Ÿå°±æ˜¯è¯´ä½¿ç”¨ Iterator éå† HashSet å¾—åˆ°çš„ç»“æœæ˜¯ä¸ç¡®å®šçš„ã€‚</li>\n<li>TreeSet  åŸºäºçº¢é»‘æ ‘å®ç°ï¼Œæ”¯æŒæœ‰åºæ€§æ“ä½œï¼Œä½†æ˜¯æŸ¥æ‰¾æ•ˆç‡ä¸å¦‚ HashSetï¼ŒHashSet æŸ¥æ‰¾æ—¶é—´å¤æ‚åº¦ä¸º O(1)ï¼ŒTreeSet åˆ™ä¸º O(logN)ï¼›</li>\n</ul>\n</li>\n<li><p>LinkedHashSet  å…·æœ‰ HashSet çš„æŸ¥æ‰¾æ•ˆç‡ï¼Œä¸”å†…éƒ¨ä½¿ç”¨é“¾è¡¨ç»´æŠ¤å…ƒç´ çš„æ’å…¥é¡ºåºã€‚</p>\n</li>\n<li><p>List</p>\n<ul>\n<li>ArrayList åŸºäºåŠ¨æ€æ•°ç»„å®ç°ï¼Œæ”¯æŒéšæœºè®¿é—®å…ƒç´ ã€‚</li>\n<li>Vector å’ŒArrayListç±»ä¼¼ï¼Œä½†æ˜¯å®ƒæ˜¯çº¿ç¨‹å®‰å…¨çš„ã€‚</li>\n<li>Stack æ˜¯Vectorçš„å­ç±»ï¼Œå®ƒå®ç°äº†ä¸€ä¸ªæ ‡å‡†çš„åè¿›å…ˆå‡ºçš„æ ˆã€‚</li>\n<li>LinkedList åŸºäºåŒå‘å¾ªç¯åˆ—è¡¨ï¼Œåªèƒ½é¡ºåºè®¿é—®ï¼›å¯ä»¥å¿«é€Ÿçš„æ’å…¥å’Œåˆ é™¤å…ƒç´ ã€‚è€Œä¸”ï¼ŒLinkedListè¿˜å¯ä»¥ç”¨ä½œæ ˆã€åˆ—é˜Ÿå’ŒåŒç«¯åˆ—é˜Ÿã€‚</li>\n</ul>\n</li>\n</ul>\n</li>\n<li><p>Map&lt;K , V &gt;</p>\n</li>\n</ul>\n<p><code>éœ€è¦ç‰¹åˆ«è¯´æ˜ä¸‹Irertor&lt;E&gt; å’ŒIterable&lt;T&gt;è¿™ä¸¤ä¸ªæ¥å£ï¼ŒIteratoræ¨¡å¼æ˜¯ç”¨äºéå†é›†åˆç±»çš„æ ‡å‡†æ–¹æ³•ã€‚å®ƒä¸»è¦ç”¨äºå°† è®¿é—®é€»è¾‘ä»ä¸åŒçš„ç±»å‹é›†åˆç±»ä¸­æŠ½è±¡å‡ºæ¥ã€æ‰€ä»¥åœ¨å¾ˆå¤šå®ç°äº†Iterbleé›†åˆç±»ä¸­å®ç°è¿™ä¸ªå¤šä¸ªIteratoræ¥å£ã€‚è¿™æ ·é¿å…å‘å®¢ç”¨æˆ·åŒ…æ’¸é›†åˆå†…éƒ¨çš„ç»“æ„ï¼Œè¿™å°±æ˜¯ä¸ºä»€ä¹ˆæˆ‘ä»¬ç”¨çš„è¿™ä¹ˆçˆ½çš„åŸå› ä¹‹ä¸€ã€‚</code></p>\n<h4 id=\"å®ç°ç±»ä¸€è§ˆè¡¨\"><a href=\"#å®ç°ç±»ä¸€è§ˆè¡¨\" class=\"headerlink\" title=\"å®ç°ç±»ä¸€è§ˆè¡¨\"></a>å®ç°ç±»ä¸€è§ˆè¡¨</h4><table>\n<thead>\n<tr>\n<th>Collction</th>\n<th>æ’åº</th>\n<th>éšæœºè®¿é—®</th>\n<th>Key-Value</th>\n<th>å¯é‡å¤å…ƒç´ </th>\n<th>ç©ºå…ƒç´ </th>\n<th>çº¿ç¨‹å®‰å…¨</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>ArrayList</td>\n<td>Y</td>\n<td>Y</td>\n<td>N</td>\n<td>Y</td>\n<td>Y</td>\n<td>N</td>\n</tr>\n<tr>\n<td>LinkedList</td>\n<td>Y</td>\n<td>N</td>\n<td>N</td>\n<td>Y</td>\n<td>Y</td>\n<td>N</td>\n</tr>\n<tr>\n<td>HashSet</td>\n<td>N</td>\n<td>N</td>\n<td>N</td>\n<td>N</td>\n<td>Y</td>\n<td>N</td>\n</tr>\n<tr>\n<td>TreeSet</td>\n<td>Y</td>\n<td>N</td>\n<td>N</td>\n<td>N</td>\n<td>N</td>\n<td>N</td>\n</tr>\n<tr>\n<td>HashMap</td>\n<td>N</td>\n<td>Y</td>\n<td>Y</td>\n<td>N</td>\n<td>Y</td>\n<td>N</td>\n</tr>\n<tr>\n<td>TreeMap</td>\n<td>Y</td>\n<td>Y</td>\n<td>Y</td>\n<td>N</td>\n<td>N</td>\n<td>N</td>\n</tr>\n<tr>\n<td>Vector</td>\n<td>Y</td>\n<td>Y</td>\n<td>N</td>\n<td>Y</td>\n<td>Y</td>\n<td>Y</td>\n</tr>\n<tr>\n<td>Stack</td>\n<td>Y</td>\n<td>N</td>\n<td>N</td>\n<td>Y</td>\n<td>Y</td>\n<td>Y</td>\n</tr>\n<tr>\n<td>Hashtable</td>\n<td>N</td>\n<td>Y</td>\n<td>Y</td>\n<td>N</td>\n<td>N</td>\n<td>Y</td>\n</tr>\n<tr>\n<td>Properties</td>\n<td>Y</td>\n<td>N</td>\n<td>N</td>\n<td>Y</td>\n<td>Y</td>\n<td>Y</td>\n</tr>\n<tr>\n<td>CopyOnWriteArrayList</td>\n<td>Y</td>\n<td>Y</td>\n<td>Y</td>\n<td>N</td>\n<td>N</td>\n<td>Y</td>\n</tr>\n<tr>\n<td>ConcurrentHashMap</td>\n<td>N</td>\n<td>Y</td>\n<td>Y</td>\n<td>N</td>\n<td>N</td>\n<td>Y</td>\n</tr>\n<tr>\n<td>CopyOnWriteArrayList</td>\n<td>N</td>\n<td>N</td>\n<td>N</td>\n<td>N</td>\n<td>Y</td>\n<td>Y</td>\n</tr>\n</tbody></table>\n<h4 id=\"Iterator-æ¥å£\"><a href=\"#Iterator-æ¥å£\" class=\"headerlink\" title=\"Iterator æ¥å£\"></a>Iterator æ¥å£</h4><ul>\n<li>è¿­ä»£å™¨å¿…é¡»ä»å±å®¹å™¨ã€å…¶ä½œç”¨å°±æ˜¯è¿­ä»£æ‰€å±å®¹å™¨ä¸­çš„å…ƒç´ ã€‚æºä»£ç çœ‹å‡ºè¿™æ˜¯ä¸€ä¸ªæ³›å‹æ¥å£ã€‚å°±æ˜¯è¿­ä»£æ³›å‹ç±»å…ƒç´ ã€‚</li>\n</ul>\n<p><img src=\"https://z201.oss-cn-shanghai.aliyuncs.com/JavaNote/Collection/Interface-Iterator.jpg\">         </p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">interface</span> <span class=\"title\">Iterator</span>&lt;<span class=\"title\">E</span>&gt; </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// å¦‚æœå­˜åœ¨å¯ä»¥è¿”å›çš„å…ƒç´ å°±è¿”å›true</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">boolean</span> <span class=\"title\">hasNext</span><span class=\"params\">()</span></span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// è¿”å›å°†è¦è®¿é—®çš„ä¸‹ä¸€ä¸ªå…ƒç´ ã€å¦‚æœå·²ç»è¾¾åˆ°é›†åˆçš„å°¾éƒ¨ï¼Œåˆ™æŠ›å‡ºä¸€ä¸ªNoSuchElementExceptionå¼‚å¸¸ã€‚</span></span><br><span class=\"line\">    <span class=\"function\">E <span class=\"title\">next</span><span class=\"params\">()</span></span>;</span><br><span class=\"line\"></span><br><span class=\"line\"> \t<span class=\"comment\">// åˆ é™¤ä¸Šæ¬¡è®¿é—®çš„å¯¹è±¡ã€‚å¦‚æœå·²ç»æ˜¯å°¾éƒ¨ï¼›åˆ™æŠ›å‡ºä¸€ä¸ªIllegalStateExceptionå¼‚å¸¸ã€‚</span></span><br><span class=\"line\">    <span class=\"comment\">// å¦‚æœæ²¡æœ‰é‡å†™è¿™ä¸ªæ–¹æ³•å°±ä¼šæ’é™¤è¿™ä¸ªå¼‚å¸¸UnsupportedOperationException  </span></span><br><span class=\"line\">    <span class=\"comment\">// æ¯”å¦‚ï¼šArrays$ArrayListä¸­add ã€ removeæ–¹æ³•å°±æ²¡æœ‰é‡å†™ï¼Œç›´æ¥ä½¿ç”¨Arrays.toListçš„é›†åˆå°±ä¼šæŠ›å‡ºè¿™ä¸ªå¼‚å¸¸</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">default</span> <span class=\"keyword\">void</span> <span class=\"title\">remove</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> UnsupportedOperationException(<span class=\"string\">\"remove\"</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// Itreatorä¸“é—¨æä¾›çš„ä¸€ä¸ªæ–¹æ³•ï¼Œå¯ä»¥ä½¿ç”¨Lambdaè¡¨è¾¾å¼éå†ã€‚</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">default</span> <span class=\"keyword\">void</span> <span class=\"title\">forEachRemaining</span><span class=\"params\">(Consumer&lt;? <span class=\"keyword\">super</span> E&gt; action)</span> </span>&#123;</span><br><span class=\"line\">        Objects.requireNonNull(action);</span><br><span class=\"line\">        <span class=\"keyword\">while</span> (hasNext())</span><br><span class=\"line\">            action.accept(next());</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"Iterable-æ¥å£\"><a href=\"#Iterable-æ¥å£\" class=\"headerlink\" title=\"Iterable æ¥å£\"></a>Iterable æ¥å£</h4><ul>\n<li>è¿™ä¸ªæ¥å£è¢«Collectionç»§æ‰¿ã€‚</li>\n</ul>\n<p><img src=\"https://z201.oss-cn-shanghai.aliyuncs.com/JavaNote/Collection/Interface-Iterable.jpg\">  </p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">interface</span> <span class=\"title\">Iterable</span>&lt;<span class=\"title\">T</span>&gt; </span>&#123;</span><br><span class=\"line\">   </span><br><span class=\"line\">    <span class=\"comment\">// å®šä¹‰äº†Iteratorï¼Œè¿”å›Iteratorå®ä¾‹ã€‚</span></span><br><span class=\"line\">    <span class=\"function\">Iterator&lt;T&gt; <span class=\"title\">iterator</span><span class=\"params\">()</span></span>;</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"comment\">// å¢å¼ºforå¾ªç¯ï¼Œä¸“é—¨ç»™Lambdaè¡¨è¾¾å¼éå†ã€‚</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">default</span> <span class=\"keyword\">void</span> <span class=\"title\">forEach</span><span class=\"params\">(Consumer&lt;? <span class=\"keyword\">super</span> T&gt; action)</span> </span>&#123;</span><br><span class=\"line\">        Objects.requireNonNull(action);</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (T t : <span class=\"keyword\">this</span>) &#123;</span><br><span class=\"line\">            action.accept(t);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">   </span><br><span class=\"line\">    <span class=\"comment\">// æ ¹æ®æ­¤Iterableæè¿°çš„å…ƒç´ åˆ›å»ºSpliteratorã€‚</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">default</span> Spliterator&lt;T&gt; <span class=\"title\">spliterator</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> Spliterators.spliteratorUnknownSize(iterator(), <span class=\"number\">0</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"Collection-æ¥å£\"><a href=\"#Collection-æ¥å£\" class=\"headerlink\" title=\"Collection æ¥å£\"></a>Collection æ¥å£</h4><ul>\n<li>è¿™ä¸ªæ¥å£é›†åˆæ¥å£ã€‚</li>\n</ul>\n<p><img src=\"https://z201.oss-cn-shanghai.aliyuncs.com/JavaNote/Collection/Interface-Collection.jpg\">  </p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">interface</span> <span class=\"title\">Collection</span>&lt;<span class=\"title\">E</span>&gt; <span class=\"keyword\">extends</span> <span class=\"title\">Iterable</span>&lt;<span class=\"title\">E</span>&gt; </span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">// Query Operations</span></span><br><span class=\"line\"></span><br><span class=\"line\">   \t<span class=\"comment\">// è¿”å›å½“å‰å­˜å‚¨åœ¨é›†åˆä¸­çš„å…ƒç´ ä¸ªæ•°ã€‚</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">size</span><span class=\"params\">()</span></span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// å¦‚æœé›†åˆä¸­æ²¡æœ‰å…ƒç´ ,åˆ™è¿”å›trueã€‚</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">boolean</span> <span class=\"title\">isEmpty</span><span class=\"params\">()</span></span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// å¦‚æœé›†åˆä¸­åŒ…å«ä¸€ä¸ªå…ƒç´ ä¸å‚æ•°oç›¸åŒ,è¿™è¿”å›trueã€‚</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">boolean</span> <span class=\"title\">contains</span><span class=\"params\">(Object o)</span></span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// è¿”å›å½“å‰ç”¨äºè®¿é—®é›†åˆçš„è¿­ä»£å™¨ã€‚</span></span><br><span class=\"line\">    <span class=\"function\">Iterator&lt;E&gt; <span class=\"title\">iterator</span><span class=\"params\">()</span></span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// è¿”å›è¿™ä¸ªé›†åˆçš„æ•°ç»„å¯¹è±¡ã€‚</span></span><br><span class=\"line\">    Object[] toArray();</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"comment\">// è¿”å›è¿™ä¸ªé›†åˆçš„æ•°ç»„å¯¹è±¡ï¼Œå¦‚æœtè¿™ä¸ªæ•°ç»„è¶³å¤Ÿå¤§ï¼Œå°±å°†é›†åˆä¸­çš„å…ƒç´ å¡«å…¥è¿™ä¸ªæ•°ç»„ä¸­ã€‚å‰©ä½™çš„ç©ºé—´å¡«å…¥Nullï¼›å¦åˆ™ï¼Œåˆ†é…ä¸€ä¸ªæ–°æ•°ç»„ï¼Œå…¶æˆå‘˜ç±»å‹ä¸tçš„æˆå‘˜ç±»å‹ç›¸åŒï¼Œå…¶é•¿åº¦ç­‰äºé›†åˆçš„å¤§å°ï¼Œå¹¶æ·»åŠ é›†åˆå…ƒç´ ã€‚</span></span><br><span class=\"line\">    &lt;T&gt; T[] toArray(T[] a);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// Modification Operations</span></span><br><span class=\"line\"> \t<span class=\"comment\">// å°†ä¸€ä¸ªå…ƒç´ æ·»åŠ åˆ°é›†åˆä¸­ï¼Œå¦‚æœè¿™ä¸ªè°ƒç”¨æ”¹å˜äº†é›†åˆï¼Œåˆ™è¿”å›trueã€‚</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">boolean</span> <span class=\"title\">add</span><span class=\"params\">(E e)</span></span>;</span><br><span class=\"line\"></span><br><span class=\"line\"> \t<span class=\"comment\">// ä»è¿™ä¸ªé›†åˆä¸­åˆ é™¤ç­‰äºoçš„å¯¹è±¡ï¼Œå¦‚æœåŒ¹é…å¯¹è±¡è¢«åˆ é™¤ã€‚å°±è¿”å›trueã€‚</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">boolean</span> <span class=\"title\">remove</span><span class=\"params\">(Object o)</span></span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// Bulk Operations</span></span><br><span class=\"line\">    <span class=\"comment\">// å¦‚æœæ­¤é›†åˆåŒ…å«æŒ‡å®šé›†åˆcä¸­çš„æ‰€æœ‰å…ƒç´ ï¼Œåˆ™è¿”å›trueã€‚</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">boolean</span> <span class=\"title\">containsAll</span><span class=\"params\">(Collection&lt;?&gt; c)</span></span>;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"comment\">// å°†cé›†åˆä¸­æ‰€æœ‰å…ƒç´ æ·»åŠ åˆ°è¿™ä¸ªé›†åˆä¸­ï¼Œå¦‚æœç”±äºè¿™ä¸ªè°ƒç”¨æ”¹å˜äº†é›†åˆï¼Œè¿”å›trueã€‚</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">boolean</span> <span class=\"title\">addAll</span><span class=\"params\">(Collection&lt;? extends E&gt; c)</span></span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">//  ä»é›†åˆä¸­åˆ é™¤é›†åˆcä¸­çš„æ‰€æœ‰å…ƒç´ ï¼Œå¦‚æœç”±äºè¿™ä¸ªå…ƒç´ æ”¹å˜äº†é›†åˆï¼Œè¿”å›trueã€‚</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">boolean</span> <span class=\"title\">removeAll</span><span class=\"params\">(Collection&lt;?&gt; c)</span></span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// åˆ é™¤æ­¤é›†åˆä¸­æ»¡è¶³ç»™å®šè°“è¯çš„æ‰€æœ‰å…ƒç´ ã€‚</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">default</span> <span class=\"keyword\">boolean</span> <span class=\"title\">removeIf</span><span class=\"params\">(Predicate&lt;? <span class=\"keyword\">super</span> E&gt; filter)</span> </span>&#123;</span><br><span class=\"line\">        Objects.requireNonNull(filter);</span><br><span class=\"line\">        <span class=\"keyword\">boolean</span> removed = <span class=\"keyword\">false</span>;</span><br><span class=\"line\">        <span class=\"keyword\">final</span> Iterator&lt;E&gt; each = iterator();</span><br><span class=\"line\">        <span class=\"keyword\">while</span> (each.hasNext()) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (filter.test(each.next())) &#123;</span><br><span class=\"line\">                each.remove();</span><br><span class=\"line\">                removed = <span class=\"keyword\">true</span>;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> removed;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"comment\">// ä»…ä¿ç•™åŒ…å«åœ¨æŒ‡å®šé›†åˆä¸­çš„æ­¤cé›†åˆä¸­çš„å…ƒç´ </span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">boolean</span> <span class=\"title\">retainAll</span><span class=\"params\">(Collection&lt;?&gt; c)</span></span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// ä»è¿™ä¸ªé›†åˆä¸­åˆ é™¤æ‰€æœ‰å…ƒç´ ã€‚</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">clear</span><span class=\"params\">()</span></span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// Comparison and hashing</span></span><br><span class=\"line\">    <span class=\"comment\">// ä»è¿™ä¸ªé›†åˆä¸­åˆ é™¤æ‰€æœ‰å…ƒç´ ã€‚</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">boolean</span> <span class=\"title\">equals</span><span class=\"params\">(Object o)</span></span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// è¿”å›æ­¤é›†åˆçš„å“ˆå¸Œç å€¼</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">hashCode</span><span class=\"params\">()</span></span>;</span><br><span class=\"line\"></span><br><span class=\"line\"> \t<span class=\"comment\">// åœ¨æ­¤é›†åˆä¸­çš„å…ƒç´ ä¸Šåˆ›å»ºSpliterator</span></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">default</span> Spliterator&lt;E&gt; <span class=\"title\">spliterator</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> Spliterators.spliterator(<span class=\"keyword\">this</span>, <span class=\"number\">0</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">   \t<span class=\"comment\">// ä»¥æ­¤é›†åˆä½œä¸ºæºè¿”å›é¡ºåºæµã€‚</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">default</span> Stream&lt;E&gt; <span class=\"title\">stream</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> StreamSupport.stream(spliterator(), <span class=\"keyword\">false</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// ä»¥æ­¤é›†åˆä½œä¸ºæºè¿”å›å¯èƒ½å¹¶è¡Œçš„Streamã€‚</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">default</span> Stream&lt;E&gt; <span class=\"title\">parallelStream</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> StreamSupport.stream(spliterator(), <span class=\"keyword\">true</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"Map-æ¥å£\"><a href=\"#Map-æ¥å£\" class=\"headerlink\" title=\"Map æ¥å£\"></a>Map æ¥å£</h4><blockquote>\n<p>ç¿»è¯‘æˆä¸­æ–‡å°±æ˜¯åœ°å›¾ï¼Œx y åæ ‡ä»£è¡¨åœ°å›¾ä¸Šçš„ä¸€ä¸ªä½ç½®ã€‚Mapå°±æ˜¯ä¸€ç§ é”®\\å€¼çš„å­˜åœ¨ã€‚é”®å¥½æ¯”åœ°å›¾ä¸­çš„x y ï¼Œå€¼å¥½æ¯”åœ°å›¾ä¸­çš„ä½ç½®ã€‚</p>\n</blockquote>\n<p><img src=\"https://z201.oss-cn-shanghai.aliyuncs.com/JavaNote/Collection/Interface-Map.jpg\">  </p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">interface</span> <span class=\"title\">Map</span>&lt;<span class=\"title\">K</span>,<span class=\"title\">V</span>&gt; </span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">// Query Operations</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// è¿”å›æ­¤æ˜ å°„ä¸­çš„é”®-å€¼æ˜ å°„å…³ç³»æ•°ã€‚</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">size</span><span class=\"params\">()</span></span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * Returns &lt;tt&gt;true&lt;/tt&gt; if this map contains no key-value mappings.</span></span><br><span class=\"line\"><span class=\"comment\">     *</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@return</span> &lt;tt&gt;true&lt;/tt&gt; if this map contains no key-value mappings</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"comment\">// å¦‚æœä¸å­˜åœ¨æ˜ å°„å…ƒç´ ï¼Œåˆ™è¿”å›trueå¦åˆ™è¿”å›falseã€‚</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">boolean</span> <span class=\"title\">isEmpty</span><span class=\"params\">()</span></span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// å¦‚æœè¿™ä¸ªæ˜ å°„è¡¨å·²ç»å­˜æœ‰è¿™ä¸ªé”®å°±è¿”å›trueã€‚</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">boolean</span> <span class=\"title\">containsKey</span><span class=\"params\">(Object key)</span></span>;</span><br><span class=\"line\"></span><br><span class=\"line\"> \t<span class=\"comment\">// å¦‚æœè¿™ä¸ªæ˜ å°„è¡¨å·²ç»å­˜åœ¨è¿™ä¸ªå€¼å°±è¿”å›trueã€‚</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">boolean</span> <span class=\"title\">containsValue</span><span class=\"params\">(Object value)</span></span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// è·å–ä¸é”®å¯¹åº”çš„å€¼ï¼›è¿”å›ä¸é”®å¯¹åº”çš„å¯¹è±¡ï¼Œå¦‚æœæ˜ å°„è¡¨ä¸­æ²¡æœ‰è¿™ä¸ªå¯¹è±¡åˆ™è¿”å›NULLï¼Œé”®å¯ä»¥æ˜¯NULLã€‚</span></span><br><span class=\"line\">    <span class=\"function\">V <span class=\"title\">get</span><span class=\"params\">(Object key)</span></span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// Modification Operations</span></span><br><span class=\"line\"></span><br><span class=\"line\"> \t<span class=\"comment\">// å°†é”®å€¼å¯¹å…³ç³»æ’å…¥æ˜ å°„è¡¨ä¸­ï¼Œå¦‚æœè¿™ä¸ªé”®å·²ç»å­˜åœ¨ï¼Œæ–°çš„å¯¹è±¡ä¼šå–ä»£è¿™ä¸ªé”®å¯¹åº”æ—§çš„å¯¹è±¡ã€‚è¿™ä¸ªæ–¹æ³•å°†è¿”å›é”®çš„æ—§å€¼ï¼Œå¦‚æœè¿™ä¸ªé”®ä»¥å‰æ²¡æœ‰å‡ºç°è¿‡åˆ™è¿”å›NULLï¼Œé”®å¯ä»¥æ˜¯NULL,ä½†æ˜¯å€¼ä¸èƒ½æ˜¯NULLã€‚</span></span><br><span class=\"line\">    <span class=\"function\">V <span class=\"title\">put</span><span class=\"params\">(K key, V value)</span></span>;</span><br><span class=\"line\">\t</span><br><span class=\"line\">    <span class=\"comment\">// å¦‚æœè¯¥é”® key çš„æ˜ å°„å­˜åœ¨ï¼Œåˆ™ä»æ˜ å°„é›†åˆä¸­åˆ é™¤è¯¥æ˜ å°„ï¼Œå¹¶è¿”å›è¯¥é”®å¯¹åº”çš„å€¼ã€‚å¦‚æœè¯¥é”®æ²¡æœ‰æ˜ å°„å…³ç³»ï¼Œåˆ™è¿”å›ä¸€ä¸ªNULLã€‚</span></span><br><span class=\"line\">    <span class=\"function\">V <span class=\"title\">remove</span><span class=\"params\">(Object key)</span></span>;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// Bulk Operations</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// å°†mæ˜ å°„è¡¨ä¸­æ‰€æœ‰çš„æ¡ç›®éƒ½æ·»åŠ åˆ°å½“å‰çš„æ˜ å°„è¡¨ä¸­ã€‚</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">putAll</span><span class=\"params\">(Map&lt;? extends K, ? extends V&gt; m)</span></span>;</span><br><span class=\"line\"></span><br><span class=\"line\">  \t<span class=\"comment\">// æ¸…ç©ºå½“å‰æ˜ å°„ä¸­é”®å¯¹å€¼</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">clear</span><span class=\"params\">()</span></span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// Views</span></span><br><span class=\"line\">    <span class=\"comment\">// è¿”å›æ˜ å°„è¡¨ä¸­æ‰€æœ‰é”®çš„é›†åˆï¼Œå¯ä»¥ä»è¿™ä¸ªé›†ä¸­åˆ é™¤å…ƒç´ ï¼ŒåŒæ—¶ä¹Ÿå¯ä»¥æ˜ å°„è¡¨ä¸­åˆ é™¤å®ƒä»¬ï¼Œä½†æ˜¯ä¸èƒ½æ·»åŠ å…ƒç´ ã€‚</span></span><br><span class=\"line\">    <span class=\"function\">Set&lt;K&gt; <span class=\"title\">keySet</span><span class=\"params\">()</span></span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// è¿”å›æ˜ å°„è¡¨ä¸­æ‰€æœ‰å€¼çš„é›†åˆï¼Œå¯ä»¥ä»è¿™ä¸ªé›†ä¸­åˆ é™¤å…ƒç´ ï¼ŒåŒæ—¶ä¹Ÿå¯ä»¥ä»æ˜ å°„è¡¨ä¸­åˆ é™¤å®ƒä»¬ï¼Œä½†æ˜¯ä¸èƒ½æ·»åŠ å…ƒç´ ã€‚</span></span><br><span class=\"line\">    <span class=\"function\">Collection&lt;V&gt; <span class=\"title\">values</span><span class=\"params\">()</span></span>;</span><br><span class=\"line\"></span><br><span class=\"line\"> \t<span class=\"comment\">// è¿”å›Map.Entryå¯¹è±¡çš„é›†ï¼Œå³æ˜ å°„è¡¨ä¸­çš„é”®\\ å€¼å¯¹ã€‚åŒæ—¶ä¹Ÿå¯ä»¥ä»æ˜ å°„è¡¨ä¸­åˆ é™¤å…ƒç´ ï¼ŒåŒæ—¶å¯ä»¥åˆ é™¤è¯¥é”®\\å€¼å¯¹ã€‚ä½†æ˜¯ä¸èƒ½æ·»åŠ ä»»ä½•å…ƒç´ ã€‚</span></span><br><span class=\"line\">    Set&lt;Map.Entry&lt;K, V&gt;&gt; entrySet();</span><br><span class=\"line\"></span><br><span class=\"line\">   \t</span><br><span class=\"line\">    <span class=\"class\"><span class=\"keyword\">interface</span> <span class=\"title\">Entry</span>&lt;<span class=\"title\">K</span>,<span class=\"title\">V</span>&gt; </span>&#123;</span><br><span class=\"line\">      </span><br><span class=\"line\">        <span class=\"function\">K <span class=\"title\">getKey</span><span class=\"params\">()</span></span>;</span><br><span class=\"line\"></span><br><span class=\"line\">       </span><br><span class=\"line\">        <span class=\"function\">V <span class=\"title\">getValue</span><span class=\"params\">()</span></span>;</span><br><span class=\"line\"></span><br><span class=\"line\">       </span><br><span class=\"line\">        <span class=\"function\">V <span class=\"title\">setValue</span><span class=\"params\">(V value)</span></span>;</span><br><span class=\"line\"></span><br><span class=\"line\">       </span><br><span class=\"line\">        <span class=\"function\"><span class=\"keyword\">boolean</span> <span class=\"title\">equals</span><span class=\"params\">(Object o)</span></span>;</span><br><span class=\"line\"></span><br><span class=\"line\">      </span><br><span class=\"line\">        <span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">hashCode</span><span class=\"params\">()</span></span>;</span><br><span class=\"line\"></span><br><span class=\"line\">      </span><br><span class=\"line\">        <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> &lt;K extends Comparable&lt;? <span class=\"keyword\">super</span> K&gt;, V&gt; Comparator&lt;Map.Entry&lt;K,V&gt;&gt; comparingByKey() &#123;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> (Comparator&lt;Map.Entry&lt;K, V&gt;&gt; &amp; Serializable)</span><br><span class=\"line\">                (c1, c2) -&gt; c1.getKey().compareTo(c2.getKey());</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">       </span><br><span class=\"line\">        <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> &lt;K, V extends Comparable&lt;? <span class=\"keyword\">super</span> V&gt;&gt; Comparator&lt;Map.Entry&lt;K,V&gt;&gt; comparingByValue() &#123;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> (Comparator&lt;Map.Entry&lt;K, V&gt;&gt; &amp; Serializable)</span><br><span class=\"line\">                (c1, c2) -&gt; c1.getValue().compareTo(c2.getValue());</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">     </span><br><span class=\"line\">        <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> &lt;K, V&gt; Comparator&lt;Map.Entry&lt;K, V&gt;&gt; comparingByKey(Comparator&lt;? <span class=\"keyword\">super</span> K&gt; cmp) &#123;</span><br><span class=\"line\">            Objects.requireNonNull(cmp);</span><br><span class=\"line\">            <span class=\"keyword\">return</span> (Comparator&lt;Map.Entry&lt;K, V&gt;&gt; &amp; Serializable)</span><br><span class=\"line\">                (c1, c2) -&gt; cmp.compare(c1.getKey(), c2.getKey());</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">       </span><br><span class=\"line\">        <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> &lt;K, V&gt; Comparator&lt;Map.Entry&lt;K, V&gt;&gt; comparingByValue(Comparator&lt;? <span class=\"keyword\">super</span> V&gt; cmp) &#123;</span><br><span class=\"line\">            Objects.requireNonNull(cmp);</span><br><span class=\"line\">            <span class=\"keyword\">return</span> (Comparator&lt;Map.Entry&lt;K, V&gt;&gt; &amp; Serializable)</span><br><span class=\"line\">                (c1, c2) -&gt; cmp.compare(c1.getValue(), c2.getValue());</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// Comparison and hashing</span></span><br><span class=\"line\"></span><br><span class=\"line\">   </span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">boolean</span> <span class=\"title\">equals</span><span class=\"params\">(Object o)</span></span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">hashCode</span><span class=\"params\">()</span></span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// Defaultable methods</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// è¿”å›æŒ‡å®šå»ºæ˜ å°„åˆ°çš„å€¼ï¼Œå¦‚æœè¯¥é”®ä¸å­˜åœ¨å€¼ï¼Œå°±è¿”å›ä¸€ä¸ªé»˜è®¤çš„ã€‚</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">default</span> V <span class=\"title\">getOrDefault</span><span class=\"params\">(Object key, V defaultValue)</span> </span>&#123;</span><br><span class=\"line\">        V v;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> (((v = get(key)) != <span class=\"keyword\">null</span>) || containsKey(key))</span><br><span class=\"line\">            ? v</span><br><span class=\"line\">            : defaultValue;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// ä¸ºæ­¤æ˜ å°„ä¸­æ¯ä¸€å…ƒç´ è¿›è¡Œæ“ä½œã€‚</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">default</span> <span class=\"keyword\">void</span> <span class=\"title\">forEach</span><span class=\"params\">(BiConsumer&lt;? <span class=\"keyword\">super</span> K, ? <span class=\"keyword\">super</span> V&gt; action)</span> </span>&#123;</span><br><span class=\"line\">        Objects.requireNonNull(action);</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (Map.Entry&lt;K, V&gt; entry : entrySet()) &#123;</span><br><span class=\"line\">            K k;</span><br><span class=\"line\">            V v;</span><br><span class=\"line\">            <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">                k = entry.getKey();</span><br><span class=\"line\">                v = entry.getValue();</span><br><span class=\"line\">            &#125; <span class=\"keyword\">catch</span>(IllegalStateException ise) &#123;</span><br><span class=\"line\">                <span class=\"comment\">// this usually means the entry is no longer in the map.</span></span><br><span class=\"line\">                <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> ConcurrentModificationException(ise);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            action.accept(k, v);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">   </span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">default</span> <span class=\"keyword\">void</span> <span class=\"title\">replaceAll</span><span class=\"params\">(BiFunction&lt;? <span class=\"keyword\">super</span> K, ? <span class=\"keyword\">super</span> V, ? extends V&gt; function)</span> </span>&#123;</span><br><span class=\"line\">        Objects.requireNonNull(function);</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (Map.Entry&lt;K, V&gt; entry : entrySet()) &#123;</span><br><span class=\"line\">            K k;</span><br><span class=\"line\">            V v;</span><br><span class=\"line\">            <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">                k = entry.getKey();</span><br><span class=\"line\">                v = entry.getValue();</span><br><span class=\"line\">            &#125; <span class=\"keyword\">catch</span>(IllegalStateException ise) &#123;</span><br><span class=\"line\">                <span class=\"comment\">// this usually means the entry is no longer in the map.</span></span><br><span class=\"line\">                <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> ConcurrentModificationException(ise);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"comment\">// ise thrown from function is not a cme.</span></span><br><span class=\"line\">            v = function.apply(k, v);</span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">                entry.setValue(v);</span><br><span class=\"line\">            &#125; <span class=\"keyword\">catch</span>(IllegalStateException ise) &#123;</span><br><span class=\"line\">                <span class=\"comment\">// this usually means the entry is no longer in the map.</span></span><br><span class=\"line\">                <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> ConcurrentModificationException(ise);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">   </span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">default</span> V <span class=\"title\">putIfAbsent</span><span class=\"params\">(K key, V value)</span> </span>&#123;</span><br><span class=\"line\">        V v = get(key);</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (v == <span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">            v = put(key, value);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">return</span> v;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">   </span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">default</span> <span class=\"keyword\">boolean</span> <span class=\"title\">remove</span><span class=\"params\">(Object key, Object value)</span> </span>&#123;</span><br><span class=\"line\">        Object curValue = get(key);</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (!Objects.equals(curValue, value) ||</span><br><span class=\"line\">            (curValue == <span class=\"keyword\">null</span> &amp;&amp; !containsKey(key))) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"keyword\">false</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        remove(key);</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">true</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">   </span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">default</span> <span class=\"keyword\">boolean</span> <span class=\"title\">replace</span><span class=\"params\">(K key, V oldValue, V newValue)</span> </span>&#123;</span><br><span class=\"line\">        Object curValue = get(key);</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (!Objects.equals(curValue, oldValue) ||</span><br><span class=\"line\">            (curValue == <span class=\"keyword\">null</span> &amp;&amp; !containsKey(key))) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"keyword\">false</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        put(key, newValue);</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">true</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">   </span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">default</span> V <span class=\"title\">replace</span><span class=\"params\">(K key, V value)</span> </span>&#123;</span><br><span class=\"line\">        V curValue;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (((curValue = get(key)) != <span class=\"keyword\">null</span>) || containsKey(key)) &#123;</span><br><span class=\"line\">            curValue = put(key, value);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> curValue;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">   </span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">default</span> V <span class=\"title\">computeIfAbsent</span><span class=\"params\">(K key,</span></span></span><br><span class=\"line\"><span class=\"function\"><span class=\"params\">            Function&lt;? <span class=\"keyword\">super</span> K, ? extends V&gt; mappingFunction)</span> </span>&#123;</span><br><span class=\"line\">        Objects.requireNonNull(mappingFunction);</span><br><span class=\"line\">        V v;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> ((v = get(key)) == <span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">            V newValue;</span><br><span class=\"line\">            <span class=\"keyword\">if</span> ((newValue = mappingFunction.apply(key)) != <span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">                put(key, newValue);</span><br><span class=\"line\">                <span class=\"keyword\">return</span> newValue;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">return</span> v;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  </span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">default</span> V <span class=\"title\">computeIfPresent</span><span class=\"params\">(K key,</span></span></span><br><span class=\"line\"><span class=\"function\"><span class=\"params\">            BiFunction&lt;? <span class=\"keyword\">super</span> K, ? <span class=\"keyword\">super</span> V, ? extends V&gt; remappingFunction)</span> </span>&#123;</span><br><span class=\"line\">        Objects.requireNonNull(remappingFunction);</span><br><span class=\"line\">        V oldValue;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> ((oldValue = get(key)) != <span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">            V newValue = remappingFunction.apply(key, oldValue);</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (newValue != <span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">                put(key, newValue);</span><br><span class=\"line\">                <span class=\"keyword\">return</span> newValue;</span><br><span class=\"line\">            &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">                remove(key);</span><br><span class=\"line\">                <span class=\"keyword\">return</span> <span class=\"keyword\">null</span>;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"keyword\">null</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">default</span> V <span class=\"title\">compute</span><span class=\"params\">(K key,</span></span></span><br><span class=\"line\"><span class=\"function\"><span class=\"params\">            BiFunction&lt;? <span class=\"keyword\">super</span> K, ? <span class=\"keyword\">super</span> V, ? extends V&gt; remappingFunction)</span> </span>&#123;</span><br><span class=\"line\">        Objects.requireNonNull(remappingFunction);</span><br><span class=\"line\">        V oldValue = get(key);</span><br><span class=\"line\"></span><br><span class=\"line\">        V newValue = remappingFunction.apply(key, oldValue);</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (newValue == <span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">            <span class=\"comment\">// delete mapping</span></span><br><span class=\"line\">            <span class=\"keyword\">if</span> (oldValue != <span class=\"keyword\">null</span> || containsKey(key)) &#123;</span><br><span class=\"line\">                <span class=\"comment\">// something to remove</span></span><br><span class=\"line\">                remove(key);</span><br><span class=\"line\">                <span class=\"keyword\">return</span> <span class=\"keyword\">null</span>;</span><br><span class=\"line\">            &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">                <span class=\"comment\">// nothing to do. Leave things as they were.</span></span><br><span class=\"line\">                <span class=\"keyword\">return</span> <span class=\"keyword\">null</span>;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">            <span class=\"comment\">// add or replace old mapping</span></span><br><span class=\"line\">            put(key, newValue);</span><br><span class=\"line\">            <span class=\"keyword\">return</span> newValue;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">   </span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">default</span> V <span class=\"title\">merge</span><span class=\"params\">(K key, V value,</span></span></span><br><span class=\"line\"><span class=\"function\"><span class=\"params\">            BiFunction&lt;? <span class=\"keyword\">super</span> V, ? <span class=\"keyword\">super</span> V, ? extends V&gt; remappingFunction)</span> </span>&#123;</span><br><span class=\"line\">        Objects.requireNonNull(remappingFunction);</span><br><span class=\"line\">        Objects.requireNonNull(value);</span><br><span class=\"line\">        V oldValue = get(key);</span><br><span class=\"line\">        V newValue = (oldValue == <span class=\"keyword\">null</span>) ? value :</span><br><span class=\"line\">                   remappingFunction.apply(oldValue, value);</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(newValue == <span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">            remove(key);</span><br><span class=\"line\">        &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">            put(key, newValue);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> newValue;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"å¯¹æ¯”ä¸‹Vectorã€ArrayListã€LinkedListä¹‹å‰æœ‰ä½•åŒºåˆ«ã€‚\"><a href=\"#å¯¹æ¯”ä¸‹Vectorã€ArrayListã€LinkedListä¹‹å‰æœ‰ä½•åŒºåˆ«ã€‚\" class=\"headerlink\" title=\"å¯¹æ¯”ä¸‹Vectorã€ArrayListã€LinkedListä¹‹å‰æœ‰ä½•åŒºåˆ«ã€‚\"></a>å¯¹æ¯”ä¸‹Vectorã€ArrayListã€LinkedListä¹‹å‰æœ‰ä½•åŒºåˆ«ã€‚</h3><p><strong>Vector</strong></p>\n<p><img src=\"https://z201.oss-cn-shanghai.aliyuncs.com/JavaNote/JavaConcurrent/Vector.png\"></p>\n<ul>\n<li>Vectoræ˜¯Javaæ—©æœŸæä¾›çš„çº¿ç¨‹å®‰å…¨åŠ¨æ€æ•°ç»„ï¼Œå’ŒArrayListä¹‹é—´åœ¨æ‰©å®¹æ–¹é¢æœ‰å¾ˆå¤šçš„åŒºåˆ«ï¼ŒVectoræ˜¯æ‰©å®¹2å€ï¼Œè€ŒArrayListæ‰©å®¹1.5å€ã€‚</li>\n</ul>\n<p><strong>ArrayList</strong></p>\n<p><img src=\"https://z201.oss-cn-shanghai.aliyuncs.com/JavaNote/JavaConcurrent/ArrayList.png\"></p>\n<ul>\n<li>ArrayListå¹³æ—¶å¼€å‘è¿‡ç¨‹ä¸­ä½¿ç”¨æœ€å¤šçš„ï¼Œæ˜¯ä¸€ä¸ªçº¿ç¨‹ä¸å®‰å…¨çš„åŠ¨æ€æ•°ç»„ã€‚æ‰€ä»¥æ€§èƒ½ä¸Šç›¸å¯¹Vectorå¥½å¾ˆå¤šã€‚</li>\n</ul>\n<p><strong>LinkedList</strong></p>\n<p><img src=\"https://z201.oss-cn-shanghai.aliyuncs.com/JavaNote/JavaConcurrent/LinkedList.png\"></p>\n<ul>\n<li>å®ƒæ˜¯ä¸€ä¸ªé“¾è¡¨ï¼Œå¯¹æ¯”ArrayListå’ŒVectorä¸éœ€è¦æ‰©å®¹ã€‚ä½†æ²¡æœ‰å®ç°<code>RandomAccessÂ </code>æ¥å£ã€‚RandomAccessçš„å®ç°ï¼Œåˆ™å°½é‡ç”¨for(int i = 0; i &lt; size; i++) æ¥éå†è€Œä¸è¦ç”¨Iteratorè¿­ä»£å™¨æ¥éå†ã€‚</li>\n</ul>\n<h4 id=\"ArrayList-VS-linkedList\"><a href=\"#ArrayList-VS-linkedList\" class=\"headerlink\" title=\"ArrayList VS linkedList\"></a>ArrayList VS linkedList</h4><ul>\n<li><p><strong>Array</strong> ï¼ˆæ•°ç»„ï¼‰æ˜¯åŸºäºç´¢å¼•(index)çš„æ•°æ®ç»“æ„ï¼Œå®ƒä½¿ç”¨ç´¢å¼•åœ¨æ•°ç»„ä¸­æœç´¢å’Œè¯»å–æ•°æ®æ˜¯å¾ˆå¿«çš„ã€‚</p>\n</li>\n<li><p>Arrayè·å–æ•°æ®çš„æ—¶é—´å¤æ‚åº¦æ˜¯O(1),ä½†æ˜¯è¦åˆ é™¤æ•°æ®å´æ˜¯å¼€é”€å¾ˆå¤§ï¼Œå› ä¸ºè¿™éœ€è¦é‡æ’æ•°ç»„ä¸­çš„æ‰€æœ‰æ•°æ®, (å› ä¸ºåˆ é™¤æ•°æ®ä»¥å, éœ€è¦æŠŠåé¢æ‰€æœ‰çš„æ•°æ®å‰ç§»)</p>\n</li>\n</ul>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// æ•°ç»„åˆå§‹åŒ–å¿…é¡»æŒ‡å®šåˆå§‹åŒ–çš„é•¿åº¦, å¦åˆ™æŠ¥é”™</span></span><br><span class=\"line\"><span class=\"keyword\">int</span>[] a = <span class=\"keyword\">new</span> <span class=\"keyword\">int</span>[<span class=\"number\">4</span>];<span class=\"comment\">//æ¨ä»‹ä½¿ç”¨int[] è¿™ç§æ–¹å¼åˆå§‹åŒ– </span></span><br><span class=\"line\"><span class=\"keyword\">int</span> c[] = &#123;<span class=\"number\">23</span>,<span class=\"number\">43</span>,<span class=\"number\">56</span>,<span class=\"number\">78</span>&#125;;<span class=\"comment\">//é•¿åº¦ï¼š4ï¼Œç´¢å¼•èŒƒå›´ï¼š[0,3]</span></span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><p><code>ArrayList</code> æ˜¯ç”¨ä¸€ä¸ªå¯æ‰©å®¹çš„æ•°ç»„æ¥å®ç°çš„ (re-sizing array)ï¼›</p>\n</li>\n<li><p><code>LinkedList</code> æ˜¯ç”¨ <code>doubly-linked list</code> æ¥å®ç°çš„ã€‚</p>\n</li>\n<li><p><strong>æ•°ç»„å’Œé“¾è¡¨ä¹‹é—´æœ€å¤§çš„åŒºåˆ«</strong>å°±æ˜¯æ•°ç»„æ˜¯å¯ä»¥éšæœºè®¿é—®çš„ï¼ˆrandom accessï¼‰ã€‚</p>\n<ul>\n<li>è¿™ä¸ªç‰¹ç‚¹é€ æˆäº†åœ¨æ•°ç»„é‡Œå¯ä»¥é€šè¿‡ä¸‹æ ‡ç”¨ O(1) çš„æ—¶é—´æ‹¿åˆ°ä»»ä½•ä½ç½®çš„æ•°ï¼Œè€Œé“¾è¡¨åˆ™åšä¸åˆ°ï¼Œåªèƒ½ä»å¤´å¼€å§‹é€ä¸ªéå†ã€‚</li>\n</ul>\n</li>\n</ul>\n<h4 id=\"ArrayList-vs-Vector\"><a href=\"#ArrayList-vs-Vector\" class=\"headerlink\" title=\"ArrayList vs Vector\"></a>ArrayList vs Vector</h4><ul>\n<li><p><code>Vector</code> æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œè€Œ <code>ArrayList</code> æ˜¯çº¿ç¨‹ä¸å®‰å…¨çš„ï¼›</p>\n</li>\n<li><p>æ‰©å®¹æ—¶æ‰©å¤šå°‘çš„åŒºåˆ«ï¼Œæ–‡é‚¹é‚¹çš„è¯´æ³•å°±æ˜¯ <code>data growth methods</code>ä¸åŒï¼Œ</p>\n</li>\n</ul>\n<ol>\n<li><ul>\n<li><code>Vector</code> é»˜è®¤æ˜¯æ‰©å¤§è‡³ 2 å€ï¼›</li>\n<li><code>ArrayList</code> é»˜è®¤æ˜¯æ‰©å¤§è‡³ 1.5 å€ã€‚</li>\n</ul>\n</li>\n</ol>\n<ul>\n<li>Vector å’Œ ArrayList ä¸€æ ·ï¼Œä¹Ÿæ˜¯ç»§æ‰¿è‡ª java.util.AbstractListï¼Œåº•å±‚ä¹Ÿæ˜¯ç”¨æ•°ç»„æ¥å®ç°çš„ã€‚</li>\n</ul>\n<h3 id=\"HashMapåŠ è½½å› å­ä¸ºä»€ä¹ˆæ˜¯-0-75ï¼Ÿ\"><a href=\"#HashMapåŠ è½½å› å­ä¸ºä»€ä¹ˆæ˜¯-0-75ï¼Ÿ\" class=\"headerlink\" title=\"HashMapåŠ è½½å› å­ä¸ºä»€ä¹ˆæ˜¯ 0.75ï¼Ÿ\"></a>HashMapåŠ è½½å› å­ä¸ºä»€ä¹ˆæ˜¯ 0.75ï¼Ÿ</h3><ul>\n<li><p>åŠ è½½å› å­ä¹Ÿå«æ‰©å®¹å› å­æˆ–è´Ÿè½½å› å­ï¼Œç”¨æ¥åˆ¤æ–­ä»€ä¹ˆæ—¶å€™è¿›è¡Œæ‰©å®¹çš„ï¼Œå‡å¦‚åŠ è½½å› å­æ˜¯ 0.5ï¼ŒHashMap çš„åˆå§‹åŒ–å®¹é‡æ˜¯ 16ï¼Œé‚£ä¹ˆå½“ HashMap ä¸­æœ‰ 16*0.5=8 ä¸ªå…ƒç´ æ—¶ï¼ŒHashMap å°±ä¼šè¿›è¡Œæ‰©å®¹ã€‚</p>\n</li>\n<li><p>é‚£åŠ è½½å› å­ä¸ºä»€ä¹ˆæ˜¯ 0.75 è€Œä¸æ˜¯ 0.5 æˆ–è€… 1.0 å‘¢ï¼Ÿ</p>\n<ul>\n<li><p>è¿™å…¶å®æ˜¯å‡ºäºå®¹é‡å’Œæ€§èƒ½ä¹‹é—´å¹³è¡¡çš„ç»“æœï¼š</p>\n</li>\n<li><p>å½“åŠ è½½å› å­è®¾ç½®æ¯”è¾ƒå¤§çš„æ—¶å€™ï¼Œæ‰©å®¹çš„é—¨æ§›å°±è¢«æé«˜äº†ï¼Œæ‰©å®¹å‘ç”Ÿçš„é¢‘ç‡æ¯”è¾ƒä½ï¼Œå ç”¨çš„ç©ºé—´ä¼šæ¯”è¾ƒå°ï¼Œä½†æ­¤æ—¶å‘ç”Ÿ Hash å†²çªçš„å‡ ç‡å°±ä¼šæå‡ï¼Œå› æ­¤éœ€è¦æ›´å¤æ‚çš„æ•°æ®ç»“æ„æ¥å­˜å‚¨å…ƒç´ ï¼Œè¿™æ ·å¯¹å…ƒç´ çš„æ“ä½œæ—¶é—´å°±ä¼šå¢åŠ ï¼Œè¿è¡Œæ•ˆç‡ä¹Ÿä¼šå› æ­¤é™ä½ï¼›</p>\n</li>\n<li><p>è€Œå½“åŠ è½½å› å­å€¼æ¯”è¾ƒå°çš„æ—¶å€™ï¼Œæ‰©å®¹çš„é—¨æ§›ä¼šæ¯”è¾ƒä½ï¼Œå› æ­¤ä¼šå ç”¨æ›´å¤šçš„ç©ºé—´ï¼Œæ­¤æ—¶å…ƒç´ çš„å­˜å‚¨å°±æ¯”è¾ƒç¨€ç–ï¼Œå‘ç”Ÿå“ˆå¸Œå†²çªçš„å¯èƒ½æ€§å°±æ¯”è¾ƒå°ï¼Œå› æ­¤æ“ä½œæ€§èƒ½ä¼šæ¯”è¾ƒé«˜ã€‚</p>\n</li>\n</ul>\n</li>\n<li><p>æ‰€ä»¥ç»¼åˆäº†ä»¥ä¸Šæƒ…å†µå°±å–äº†ä¸€ä¸ª 0.5 åˆ° 1.0 çš„å¹³å‡æ•° 0.75 ä½œä¸ºåŠ è½½å› å­ã€‚</p>\n</li>\n</ul>\n<h3 id=\"å½“æœ‰å“ˆå¸Œå†²çªæ—¶ï¼ŒHashMap-æ˜¯å¦‚ä½•æŸ¥æ‰¾å¹¶ç¡®è®¤å…ƒç´ çš„ï¼Ÿ\"><a href=\"#å½“æœ‰å“ˆå¸Œå†²çªæ—¶ï¼ŒHashMap-æ˜¯å¦‚ä½•æŸ¥æ‰¾å¹¶ç¡®è®¤å…ƒç´ çš„ï¼Ÿ\" class=\"headerlink\" title=\"å½“æœ‰å“ˆå¸Œå†²çªæ—¶ï¼ŒHashMap æ˜¯å¦‚ä½•æŸ¥æ‰¾å¹¶ç¡®è®¤å…ƒç´ çš„ï¼Ÿ\"></a>å½“æœ‰å“ˆå¸Œå†²çªæ—¶ï¼ŒHashMap æ˜¯å¦‚ä½•æŸ¥æ‰¾å¹¶ç¡®è®¤å…ƒç´ çš„ï¼Ÿ</h3><ul>\n<li>å½“å“ˆå¸Œå†²çªæ—¶æˆ‘ä»¬éœ€è¦é€šè¿‡åˆ¤æ–­ key å€¼æ˜¯å¦ç›¸ç­‰ï¼Œæ‰ç¡®è®¤æ­¤å…ƒç´ æ˜¯ä¸æ˜¯æˆ‘ä»¬æƒ³è¦çš„å…ƒç´ ã€‚</li>\n</ul>\n<h4 id=\"ä¸ºä»€ä¹ˆæ”¹-equals-ä¸€å®šè¦æ”¹-hashCode-ï¼Ÿ\"><a href=\"#ä¸ºä»€ä¹ˆæ”¹-equals-ä¸€å®šè¦æ”¹-hashCode-ï¼Ÿ\" class=\"headerlink\" title=\"ä¸ºä»€ä¹ˆæ”¹ equals() ä¸€å®šè¦æ”¹ hashCode()ï¼Ÿ\"></a>ä¸ºä»€ä¹ˆæ”¹ equals() ä¸€å®šè¦æ”¹ hashCode()ï¼Ÿ</h4><blockquote>\n<p>é¦–å…ˆåŸºäºä¸€ä¸ªå‡è®¾ï¼šä»»ä½•ä¸¤ä¸ª <code>object</code> çš„ <code>hashCode</code> éƒ½æ˜¯ä¸åŒçš„ã€‚ä¹Ÿå°±æ˜¯ <code>hash function</code> æ˜¯æœ‰æ•ˆçš„ã€‚</p>\n</blockquote>\n<ul>\n<li>é‚£ä¹ˆåœ¨è¿™ä¸ªæ¡ä»¶ä¸‹ï¼Œæœ‰ä¸¤ä¸ª <code>object</code> æ˜¯ç›¸ç­‰çš„ï¼Œé‚£å¦‚æœä¸é‡å†™ <code>hashCode()</code>ï¼Œç®—å‡ºæ¥çš„å“ˆå¸Œå€¼éƒ½ä¸ä¸€æ ·ï¼Œå°±ä¼šå»åˆ°ä¸åŒçš„ <code>buckets</code> äº†ï¼Œå°±è¿·å¤±åœ¨èŒ«èŒ«äººæµ·ä¸­äº†ï¼Œå†ä¹Ÿæ— æ³•ç›¸è®¤ï¼Œå°±å’Œ <code>equals()</code> æ¡ä»¶çŸ›ç›¾äº†ï¼Œè¯æ¯•ã€‚<ul>\n<li><code>hashCode()</code> å†³å®šäº† <code>key</code> æ”¾åœ¨è¿™ä¸ªæ¡¶é‡Œçš„ç¼–å·ï¼Œä¹Ÿå°±æ˜¯åœ¨æ•°ç»„é‡Œçš„ <code>index</code>ï¼›</li>\n<li><code>equals()</code> æ˜¯ç”¨æ¥æ¯”è¾ƒä¸¤ä¸ª <code>object</code> æ˜¯å¦ç›¸åŒçš„ã€‚</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"HashMapå’ŒHashTableçš„åŒºåˆ«\"><a href=\"#HashMapå’ŒHashTableçš„åŒºåˆ«\" class=\"headerlink\" title=\"HashMapå’ŒHashTableçš„åŒºåˆ«?\"></a>HashMapå’ŒHashTableçš„åŒºåˆ«?</h3><ul>\n<li><p>ä¸¤è€…çˆ¶ç±»ä¸åŒ</p>\n</li>\n<li><p>HashMapæ˜¯ç»§æ‰¿è‡ªAbstractMapç±»ï¼Œè€ŒHashtableæ˜¯ç»§æ‰¿è‡ªDictionaryç±»ã€‚ä¸è¿‡å®ƒä»¬éƒ½å®ç°äº†åŒæ—¶å®ç°äº†mapã€Cloneableï¼ˆå¯å¤åˆ¶ï¼‰ã€Serializableï¼ˆå¯åºåˆ—åŒ–ï¼‰è¿™ä¸‰ä¸ªæ¥å£ã€‚</p>\n</li>\n<li><p>å¯¹å¤–æä¾›çš„æ¥å£ä¸åŒ</p>\n<ul>\n<li>Hashtableæ¯”HashMapå¤šæä¾›äº†elments() å’Œcontains() ä¸¤ä¸ªæ–¹æ³•ã€‚elments() æ–¹æ³•ç»§æ‰¿è‡ªHashtableçš„çˆ¶ç±»Dictionnaryã€‚elements() æ–¹æ³•ç”¨äºè¿”å›æ­¤Hashtableä¸­çš„valueçš„æšä¸¾ã€‚contains()æ–¹æ³•åˆ¤æ–­è¯¥Hashtableæ˜¯å¦åŒ…å«ä¼ å…¥çš„valueã€‚å®ƒçš„ä½œç”¨ä¸containsValue()ä¸€è‡´ã€‚äº‹å®ä¸Šï¼ŒcontansValue() å°±åªæ˜¯è°ƒç”¨äº†ä¸€ä¸‹contains() æ–¹æ³•ã€‚</li>\n</ul>\n</li>\n<li><p>nullæ”¯æŒä¸åŒ</p>\n<ul>\n<li><p>Hashtableï¼škeyå’Œvalueéƒ½ä¸èƒ½ä¸ºnullã€‚</p>\n</li>\n<li><p>HashMapï¼škeyå¯ä»¥ä¸ºnullï¼Œä½†æ˜¯è¿™æ ·çš„keyåªèƒ½æœ‰ä¸€ä¸ªï¼Œå› ä¸ºå¿…é¡»ä¿è¯keyçš„å”¯ä¸€æ€§ï¼›å¯ä»¥æœ‰å¤šä¸ªkey</p>\n<p>å€¼å¯¹åº”çš„valueä¸ºnullã€‚ </p>\n</li>\n</ul>\n</li>\n<li><p>çº¿ç¨‹å®‰å…¨ä¸åŒ</p>\n<ul>\n<li><p>HashMapæ˜¯çº¿ç¨‹ä¸å®‰å…¨çš„ï¼Œåœ¨å¤šçº¿ç¨‹å¹¶å‘çš„ç¯å¢ƒä¸‹ï¼Œå¯èƒ½ä¼šäº§ç”Ÿæ­»é”ç­‰é—®é¢˜ï¼Œå› æ­¤éœ€è¦å¼€å‘äººå‘˜è‡ªå·±å¤„ç†å¤šçº¿ç¨‹çš„å®‰å…¨é—®é¢˜ã€‚</p>\n</li>\n<li><p>Hashtableæ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œå®ƒçš„æ¯ä¸ªæ–¹æ³•ä¸Šéƒ½æœ‰synchronized å…³é”®å­—ï¼Œå› æ­¤å¯ç›´æ¥ç”¨äºå¤šçº¿ç¨‹ä¸­ã€‚</p>\n</li>\n<li><p>è™½ç„¶HashMapæ˜¯çº¿ç¨‹ä¸å®‰å…¨çš„ï¼Œä½†æ˜¯å®ƒçš„æ•ˆç‡è¿œè¿œé«˜äºHashtableï¼Œè¿™æ ·è®¾è®¡æ˜¯åˆç†çš„ï¼Œå› ä¸ºå¤§éƒ¨åˆ†çš„ä½¿ç”¨åœºæ™¯éƒ½æ˜¯å•çº¿ç¨‹ã€‚å½“éœ€è¦å¤šçº¿ç¨‹æ“ä½œçš„æ—¶å€™å¯ä»¥ä½¿ç”¨çº¿ç¨‹å®‰å…¨çš„ConcurrentHashMapã€‚</p>\n</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"å¦‚ä½•è§£å†³å“ˆå¸Œå†²çªï¼Ÿ\"><a href=\"#å¦‚ä½•è§£å†³å“ˆå¸Œå†²çªï¼Ÿ\" class=\"headerlink\" title=\"å¦‚ä½•è§£å†³å“ˆå¸Œå†²çªï¼Ÿ\"></a>å¦‚ä½•è§£å†³å“ˆå¸Œå†²çªï¼Ÿ</h3><blockquote>\n<p>ä¸€èˆ¬æ¥è¯´å“ˆå¸Œå†²çªæœ‰ä¸¤å¤§ç±»è§£å†³æ–¹å¼ï¼š</p>\n</blockquote>\n<ul>\n<li><p>Separate chaining</p>\n</li>\n<li><p>Open addressing</p>\n</li>\n<li><p>Java ä¸­é‡‡ç”¨çš„æ˜¯ç¬¬ä¸€ç§ <code>Separate chaining</code>ï¼Œå³åœ¨å‘ç”Ÿç¢°æ’çš„é‚£ä¸ªæ¡¶åé¢å†åŠ ä¸€æ¡â€œé“¾â€æ¥å­˜å‚¨ã€‚</p>\n<ul>\n<li>JDK1.6 å’Œ 1.7 æ˜¯ç”¨é“¾è¡¨å­˜å‚¨çš„ï¼Œè¿™æ ·å¦‚æœç¢°æ’å¾ˆå¤šçš„è¯ï¼Œå°±å˜æˆäº†åœ¨<strong>é“¾è¡¨</strong>ä¸Šçš„æŸ¥æ‰¾ï¼Œworst case å°±æ˜¯ O(n)ï¼›</li>\n<li>JDK 1.8 è¿›è¡Œäº†ä¼˜åŒ–ï¼Œå½“é“¾è¡¨é•¿åº¦è¾ƒå¤§æ—¶ï¼ˆè¶…è¿‡ 8ï¼‰ï¼Œä¼šé‡‡ç”¨<strong>çº¢é»‘æ ‘</strong>æ¥å­˜å‚¨ï¼Œè¿™æ ·å¤§å¤§æé«˜äº†æŸ¥æ‰¾æ•ˆç‡ã€‚</li>\n</ul>\n</li>\n<li><p>ç¬¬äºŒç§æ–¹æ³• <code>open addressing</code> ä¹Ÿæ˜¯éå¸¸é‡è¦çš„æ€æƒ³ï¼Œå› ä¸ºåœ¨çœŸå®çš„åˆ†å¸ƒå¼ç³»ç»Ÿé‡Œï¼Œæœ‰å¾ˆå¤šåœ°æ–¹ä¼šç”¨åˆ° <code>hash</code> çš„æ€æƒ³ä½†åˆä¸é€‚åˆç”¨ <code>seprate chaining</code>ã€‚</p>\n<ul>\n<li>è¿™ç§æ–¹æ³•æ˜¯é¡ºåºæŸ¥æ‰¾ï¼Œå¦‚æœè¿™ä¸ªæ¡¶é‡Œå·²ç»è¢«å äº†ï¼Œé‚£å°±æŒ‰ç…§â€œæŸç§æ–¹å¼â€ç»§ç»­æ‰¾ä¸‹ä¸€ä¸ªæ²¡æœ‰è¢«å çš„æ¡¶ï¼Œç›´åˆ°æ‰¾åˆ°ç¬¬ä¸€ä¸ªç©ºçš„ã€‚</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"Collection-vs-Collections\"><a href=\"#Collection-vs-Collections\" class=\"headerlink\" title=\"Collection vs Collections\"></a>Collection vs Collections</h3><ul>\n<li>Collectioné›†åˆæ¥å£</li>\n<li>Collectionsæ˜¯å·¥å…·ç±»,æä¾›äº†ä¸€äº›é™æ€æ–¹æ³•ã€‚</li>\n</ul>\n","categories":["æŸ¥ç¼ºè¡¥æ¼"],"tags":["Java","Java-Collecions-Framework","List","Set","Queue","Map"]},{"title":"æŸ¥ç¼ºè¡¥æ¼-Mybatis","url":"/posts/3249289058/","content":"<blockquote>\n<p>æœ¬ç« æ˜¯æ•´ç†çŸ¥è¯†å†…å®¹ï¼Œä¸ºå¼ºåŒ–çŸ¥è¯†é•¿æœŸæ›´æ–°ã€‚</p>\n</blockquote>\n<h2 id=\"æ•´ä½“æ¶æ„\"><a href=\"#æ•´ä½“æ¶æ„\" class=\"headerlink\" title=\"æ•´ä½“æ¶æ„\"></a>æ•´ä½“æ¶æ„</h2><img src=\"https://z201.oss-cn-shanghai.aliyuncs.com/JavaNote/20211013113522.png\"/>\n\n\n\n<h3 id=\"åŸºç¡€å±‚\"><a href=\"#åŸºç¡€å±‚\" class=\"headerlink\" title=\"åŸºç¡€å±‚\"></a>åŸºç¡€å±‚</h3><h3 id=\"å¤„ç†å±‚\"><a href=\"#å¤„ç†å±‚\" class=\"headerlink\" title=\"å¤„ç†å±‚\"></a>å¤„ç†å±‚</h3><h3 id=\"æ¥å£å±‚\"><a href=\"#æ¥å£å±‚\" class=\"headerlink\" title=\"æ¥å£å±‚\"></a>æ¥å£å±‚</h3><h2 id=\"Mybatisæ‰§è¡Œæµç¨‹\"><a href=\"#Mybatisæ‰§è¡Œæµç¨‹\" class=\"headerlink\" title=\"Mybatisæ‰§è¡Œæµç¨‹\"></a>Mybatisæ‰§è¡Œæµç¨‹</h2><ul>\n<li>è·å–sqlSessionFactoryå¯¹è±¡:è§£ææ–‡ä»¶çš„æ¯ä¸€ä¸ªä¿¡æ¯ä¿å­˜åœ¨Configurationä¸­ï¼Œè¿”å›åŒ…å«Configurationçš„DefaultSqlSessionï¼›æ³¨æ„ï¼šMappedStatementï¼šä»£è¡¨ä¸€ä¸ªå¢åˆ æ”¹æŸ¥çš„è¯¦ç»†ä¿¡æ¯ã€‚</li>\n<li>è·å–sqlSessionå¯¹è±¡,è¿”å›ä¸€ä¸ªDefaultSQlSessionå¯¹è±¡ï¼ŒåŒ…å«Executorå’ŒConfiguration;è¿™ä¸€æ­¥ä¼šåˆ›å»ºExecutorå¯¹è±¡ï¼›</li>\n<li>è·å–æ¥å£çš„ä»£ç†å¯¹è±¡ï¼ˆMapperProxyï¼‰,getMapperï¼Œä½¿ç”¨MapperProxyFactoryåˆ›å»ºä¸€ä¸ªMapperProxyçš„ä»£ç†å¯¹è±¡ã€‚</li>\n</ul>\n<h2 id=\"Mybatisæ‹¦æˆªå™¨\"><a href=\"#Mybatisæ‹¦æˆªå™¨\" class=\"headerlink\" title=\"Mybatisæ‹¦æˆªå™¨\"></a>Mybatisæ‹¦æˆªå™¨</h2><blockquote>\n<p>ä»£ç†å¯¹è±¡é‡Œé¢åŒ…å«äº†ï¼ŒDefaultSqlSessionï¼ˆExecutorï¼‰</p>\n</blockquote>\n<ul>\n<li>æ‰§è¡Œå¢åˆ æ”¹æŸ¥æ–¹æ³•ã€‚<ul>\n<li>è°ƒç”¨DefaultSqlSessionçš„å¢åˆ æ”¹æŸ¥ï¼ˆExecutorï¼‰</li>\n<li>åˆ›å»ºä¸€ä¸ªStatementHandlerå¯¹è±¡ã€ä¸”åŒæ—¶åˆ›å»ºå‡ºParameterHandlerå’ŒResultSetHandlerã€‚</li>\n<li>è°ƒç”¨StatementHandleré¢„ç¼–è¯‘å‚æ•°ä»¥åŠè®¾ç½®å‚æ•°å€¼;ä½¿ç”¨ParameterHandleræ¥ç»™sqlè®¾ç½®å‚æ•°</li>\n<li>è°ƒç”¨StatementHandlerçš„å¢åˆ æ”¹æŸ¥æ–¹æ³•ï¼›</li>\n<li>ResultSetHandlerå°è£…ç»“æœ</li>\n</ul>\n</li>\n<li>MyBatis æ‹¦æˆªç­¾å  æ‹¦æˆªå™¨ç­¾åæ˜¯ä¸€ä¸ªåä¸º @Intercepts çš„æ³¨è§£ï¼Œè¯¥æ³¨è§£ä¸­å¯ä»¥é€šè¿‡ @Signature é…ç½®å¤šä¸ªç­¾åã€‚@Signature æ³¨è§£ä¸­åˆ™åŒ…å«ä¸‰ä¸ªå±æ€§<ul>\n<li>type: æ‹¦æˆªå™¨éœ€è¦æ‹¦æˆªçš„æ¥å£ï¼Œæœ‰ 4 ä¸ªå¯é€‰é¡¹ï¼Œåˆ†åˆ«æ˜¯ï¼šExecutorã€ParameterHandlerã€ResultSetHandler ä»¥åŠ StatementHandlerã€‚</li>\n<li>method: æ‹¦æˆªå™¨æ‰€æ‹¦æˆªæ¥å£ä¸­çš„æ–¹æ³•åï¼Œä¹Ÿå°±æ˜¯å‰é¢å››ä¸ªæ¥å£ä¸­çš„æ–¹æ³•åï¼Œæ¥å£å’Œæ–¹æ³•è¦å¯¹åº”ä¸Šã€‚</li>\n<li>args: æ‹¦æˆªå™¨æ‰€æ‹¦æˆªæ–¹æ³•çš„å‚æ•°ç±»å‹ï¼Œé€šè¿‡æ–¹æ³•åå’Œå‚æ•°ç±»å‹å¯ä»¥é”å®šå”¯ä¸€ä¸€ä¸ªæ–¹æ³•ã€‚</li>\n</ul>\n</li>\n<li>è¢«æ‹¦æˆªçš„å¯¹è±¡<ul>\n<li>org.apache.ibatis.executor.Executor</li>\n<li>org.apache.ibatis.executor.statement.StatementHandler</li>\n<li>org.apache.ibatis.executor.statement.ParameterHandler</li>\n<li>org.apache.ibatis.executor.resultset.ResultSetHandler</li>\n</ul>\n</li>\n<li>Executor<ul>\n<li>updateï¼šè¯¥æ–¹æ³•ä¼šåœ¨æ‰€æœ‰çš„ INSERTã€ UPDATEã€ DELETE æ‰§è¡Œæ—¶è¢«è°ƒç”¨ï¼Œå¦‚æœæƒ³è¦æ‹¦æˆªè¿™äº›æ“ä½œï¼Œå¯ä»¥é€šè¿‡è¯¥æ–¹æ³•å®ç°ã€‚</li>\n<li>queryï¼šè¯¥æ–¹æ³•ä¼šåœ¨ SELECT æŸ¥è¯¢æ–¹æ³•æ‰§è¡Œæ—¶è¢«è°ƒç”¨ï¼Œæ–¹æ³•å‚æ•°æºå¸¦äº†å¾ˆå¤šæœ‰ç”¨çš„ä¿¡æ¯ï¼Œå¦‚æœéœ€è¦è·å–ï¼Œå¯ä»¥é€šè¿‡è¯¥æ–¹æ³•å®ç°ã€‚</li>\n<li>queryCursorï¼šå½“ SELECT çš„è¿”å›ç±»å‹æ˜¯ Cursor æ—¶ï¼Œè¯¥æ–¹æ³•ä¼šè¢«è°ƒç”¨ã€‚</li>\n<li>flushStatementsï¼šå½“ SqlSession æ–¹æ³•è°ƒç”¨ flushStatements æ–¹æ³•æˆ–æ‰§è¡Œçš„æ¥å£æ–¹æ³•ä¸­å¸¦æœ‰ @Flush æ³¨è§£æ—¶è¯¥æ–¹æ³•ä¼šè¢«è§¦å‘ã€‚</li>\n<li>commitï¼šå½“ SqlSession æ–¹æ³•è°ƒç”¨ commit æ–¹æ³•æ—¶è¯¥æ–¹æ³•ä¼šè¢«è§¦å‘ã€‚</li>\n<li>rollbackï¼šå½“ SqlSession æ–¹æ³•è°ƒç”¨ rollback æ–¹æ³•æ—¶è¯¥æ–¹æ³•ä¼šè¢«è§¦å‘ã€‚</li>\n<li>getTransactionï¼šå½“ SqlSession æ–¹æ³•è·å–æ•°æ®åº“è¿æ¥æ—¶è¯¥æ–¹æ³•ä¼šè¢«è§¦å‘ã€‚</li>\n<li>closeï¼šè¯¥æ–¹æ³•åœ¨æ‡’åŠ è½½è·å–æ–°çš„ Executor åä¼šè¢«è§¦å‘ã€‚</li>\n<li>isClosedï¼šè¯¥æ–¹æ³•åœ¨æ‡’åŠ è½½æ‰§è¡ŒæŸ¥è¯¢å‰ä¼šè¢«è§¦å‘ã€‚</li>\n</ul>\n</li>\n<li>StatementHandler<ul>\n<li>prepareï¼šè¯¥æ–¹æ³•åœ¨æ•°æ®åº“æ‰§è¡Œå‰è¢«è§¦å‘ã€‚</li>\n<li>parameterizeï¼šè¯¥æ–¹æ³•åœ¨ prepare æ–¹æ³•ä¹‹åæ‰§è¡Œï¼Œç”¨æ¥å¤„ç†å‚æ•°ä¿¡æ¯ã€‚</li>\n<li>batchï¼šå¦‚æœ MyBatis çš„å…¨å‰§é…ç½®ä¸­é…ç½®äº† defaultExecutorType=â€BATCHâ€ï¼Œæ‰§è¡Œæ•°æ®æ“ä½œæ—¶è¯¥æ–¹æ³•ä¼šè¢«è°ƒç”¨ã€‚</li>\n<li>updateï¼šæ›´æ–°æ“ä½œæ—¶è¯¥æ–¹æ³•ä¼šè¢«è§¦å‘ã€‚</li>\n<li>queryï¼šè¯¥æ–¹æ³•åœ¨ SELECT æ–¹æ³•æ‰§è¡Œæ—¶ä¼šè¢«è§¦å‘ã€‚</li>\n<li>queryCursorï¼šè¯¥æ–¹æ³•åœ¨ SELECT æ–¹æ³•æ‰§è¡Œæ—¶ï¼Œå¹¶ä¸”è¿”å›å€¼ä¸º Cursor æ—¶ä¼šè¢«è§¦å‘ã€‚</li>\n</ul>\n</li>\n<li>ParameterHandler<ul>\n<li>getParameterObjectï¼šåœ¨æ‰§è¡Œå­˜å‚¨è¿‡ç¨‹å¤„ç†å‡ºå‚çš„æ—¶å€™è¯¥æ–¹æ³•ä¼šè¢«è§¦å‘ã€‚</li>\n<li>setParametersï¼šè®¾ç½® SQL å‚æ•°æ—¶è¯¥æ–¹æ³•ä¼šè¢«è§¦å‘ã€‚</li>\n</ul>\n</li>\n<li>ResultSetHandler<ul>\n<li>handleResultSetsï¼šè¯¥æ–¹æ³•ä¼šåœ¨æ‰€æœ‰çš„æŸ¥è¯¢æ–¹æ³•ä¸­è¢«è§¦å‘ï¼ˆé™¤å»è¿”å›å€¼ç±»å‹ä¸º Cursor<E> çš„æŸ¥è¯¢æ–¹æ³•ï¼‰ï¼Œä¸€èˆ¬æ¥è¯´ï¼Œå¦‚æœæˆ‘ä»¬æƒ³å¯¹æŸ¥è¯¢ç»“æœè¿›è¡ŒäºŒæ¬¡å¤„ç†ï¼Œå¯ä»¥é€šè¿‡æ‹¦æˆªè¯¥æ–¹æ³•å®ç°ã€‚</li>\n<li>handleCursorResultSetsï¼šå½“æŸ¥è¯¢æ–¹æ³•çš„è¿”å›å€¼ç±»å‹ä¸º Cursor<E> æ—¶ï¼Œè¯¥æ–¹æ³•ä¼šè¢«è§¦å‘ã€‚</li>\n<li>handleOutputParametersï¼šä½¿ç”¨å­˜å‚¨è¿‡ç¨‹å¤„ç†å‡ºå‚çš„æ—¶å€™è¯¥æ–¹æ³•ä¼šè¢«è°ƒç”¨ã€‚</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"MyBatisæ’ä»¶\"><a href=\"#MyBatisæ’ä»¶\" class=\"headerlink\" title=\"MyBatisæ’ä»¶\"></a>MyBatisæ’ä»¶</h2><blockquote>\n<p>MyBatis å°†æ’ä»¶å•ç‹¬åˆ†ç¦»å‡ºä¸€ä¸ªæ¨¡å—ï¼Œä½äº org.apache.ibatis.plugin åŒ…ä¸­ï¼Œåœ¨è¯¥æ¨¡å—ä¸­ä¸»è¦ä½¿ç”¨äº†ä¸¤ç§è®¾è®¡æ¨¡å¼ï¼šä»£ç†æ¨¡å¼å’Œè´£ä»»é“¾æ¨¡å¼ã€‚</p>\n</blockquote>\n<ul>\n<li><p>æ’ä»¶æ¥å£</p>\n<ul>\n<li><p>org.apache.ibatis.plugin.Interceptor </p>\n</li>\n<li><p>interceptï¼šå®ƒå°†ç›´æ¥è¦†ç›–ä½ æ‰€æ‹¦æˆªçš„å¯¹è±¡ï¼Œæœ‰ä¸ªå‚æ•°Invocationå¯¹è±¡ï¼Œé€šè¿‡è¯¥å¯¹è±¡ï¼Œå¯ä»¥åå°„è°ƒåº¦åŸæ¥å¯¹è±¡çš„æ–¹æ³•ï¼› </p>\n</li>\n<li><p>pluginï¼štargetæ˜¯è¢«æ‹¦æˆªçš„å¯¹è±¡ï¼Œå®ƒçš„ä½œç”¨æ˜¯ç»™è¢«æ‹¦æˆªå¯¹è±¡ç”Ÿæˆä¸€ä¸ªä»£ç†å¯¹è±¡ï¼› </p>\n</li>\n<li><p>setPropertiesï¼šå…è®¸åœ¨pluginå…ƒç´ ä¸­é…ç½®æ‰€éœ€å‚æ•°ï¼Œè¯¥æ–¹æ³•åœ¨æ’ä»¶åˆå§‹åŒ–çš„æ—¶å€™ä¼šè¢«è°ƒç”¨ä¸€æ¬¡ï¼› </p>\n</li>\n</ul>\n</li>\n<li><p>MyBatiså…è®¸æˆ‘ä»¬è‡ªå®šä¹‰ Interceptor æ‹¦æˆª SQL è¯­å¥æ‰§è¡Œè¿‡ç¨‹ä¸­çš„æŸäº›å…³é”®é€»è¾‘ï¼Œå…è®¸æ‹¦æˆªçš„æ–¹æ³•æœ‰ï¼šExecutor ç±»ä¸­çš„ update()ã€query()ã€flushStatements()ã€commit()ã€rollback()ã€getTransaction()ã€close()ã€isClosed()æ–¹æ³•ï¼ŒParameterHandler ä¸­çš„ setParameters()ã€getParameterObject() æ–¹æ³•ï¼ŒResultSetHandlerä¸­çš„ handleOutputParameters()ã€handleResultSets()æ–¹æ³•ï¼Œä»¥åŠStatementHandler ä¸­çš„parameterize()ã€prepare()ã€batch()ã€update()ã€query()æ–¹æ³•ã€‚</p>\n</li>\n</ul>\n<h2 id=\"MyBatisä¸­çš„è®¾è®¡æ¨¡å¼\"><a href=\"#MyBatisä¸­çš„è®¾è®¡æ¨¡å¼\" class=\"headerlink\" title=\"MyBatisä¸­çš„è®¾è®¡æ¨¡å¼\"></a>MyBatisä¸­çš„è®¾è®¡æ¨¡å¼</h2><ul>\n<li>å·¥å‚æ¨¡å¼<ul>\n<li>å·¥å‚æ¨¡å¼åœ¨ MyBatis ä¸­çš„å…¸å‹ä»£è¡¨æ˜¯ SqlSessionFactoryã€‚</li>\n<li>SqlSession æ˜¯ MyBatis ä¸­çš„é‡è¦ Java æ¥å£ï¼Œå¯ä»¥é€šè¿‡è¯¥æ¥å£æ¥æ‰§è¡Œ SQL å‘½ä»¤ã€è·å–æ˜ å°„å™¨ç¤ºä¾‹å’Œç®¡ç†äº‹åŠ¡ï¼Œè€Œ SqlSessionFactory æ­£æ˜¯ç”¨æ¥äº§ç”Ÿ SqlSession å¯¹è±¡çš„ï¼Œæ‰€ä»¥å®ƒåœ¨ MyBatis ä¸­æ˜¯æ¯”è¾ƒæ ¸å¿ƒçš„æ¥å£ä¹‹ä¸€ã€‚</li>\n<li>å·¥å‚æ¨¡å¼åº”ç”¨è§£æï¼šSqlSessionFactory æ˜¯ä¸€ä¸ªæ¥å£ç±»ï¼Œå®ƒçš„å­ç±» DefaultSqlSessionFactory æœ‰ä¸€ä¸ª openSession(ExecutorType execType) çš„æ–¹æ³•ï¼Œå…¶ä¸­ä½¿ç”¨äº†å·¥å‚æ¨¡å¼ã€‚</li>\n</ul>\n</li>\n<li>å»ºé€ è€…æ¨¡å¼<ul>\n<li>MyBatis ä¸­çš„å…¸å‹ä»£è¡¨æ˜¯ SqlSessionFactoryBuilderã€‚</li>\n<li>æ™®é€šçš„å¯¹è±¡éƒ½æ˜¯é€šè¿‡ new å…³é”®å­—ç›´æ¥åˆ›å»ºçš„ï¼Œä½†æ˜¯å¦‚æœåˆ›å»ºå¯¹è±¡éœ€è¦çš„æ„é€ å‚æ•°å¾ˆå¤šï¼Œä¸”ä¸èƒ½ä¿è¯æ¯ä¸ªå‚æ•°éƒ½æ˜¯æ­£ç¡®çš„æˆ–è€…ä¸èƒ½ä¸€æ¬¡æ€§å¾—åˆ°æ„å»ºæ‰€éœ€çš„æ‰€æœ‰å‚æ•°ï¼Œé‚£ä¹ˆå°±éœ€è¦å°†æ„å»ºé€»è¾‘ä»å¯¹è±¡æœ¬èº«æŠ½ç¦»å‡ºæ¥ï¼Œè®©å¯¹è±¡åªå…³æ³¨åŠŸèƒ½ï¼ŒæŠŠæ„å»ºäº¤ç»™æ„å»ºç±»ï¼Œè¿™æ ·å¯ä»¥ç®€åŒ–å¯¹è±¡çš„æ„å»ºï¼Œä¹Ÿå¯ä»¥è¾¾åˆ°åˆ†æ­¥æ„å»ºå¯¹è±¡çš„ç›®çš„ï¼Œè€Œ SqlSessionFactoryBuilder çš„æ„å»ºè¿‡ç¨‹æ­£æ˜¯å¦‚æ­¤ã€‚</li>\n<li>åœ¨ SqlSessionFactoryBuilder ä¸­æ„å»º SqlSessionFactory å¯¹è±¡çš„è¿‡ç¨‹æ˜¯è¿™æ ·çš„ï¼Œé¦–å…ˆéœ€è¦é€šè¿‡ XMLConfigBuilder å¯¹è±¡è¯»å–å¹¶è§£æ XML çš„é…ç½®æ–‡ä»¶ï¼Œç„¶åå†å°†è¯»å–åˆ°çš„é…ç½®ä¿¡æ¯å­˜å…¥åˆ° Configuration ç±»ä¸­ï¼Œç„¶åå†é€šè¿‡ build æ–¹æ³•ç”Ÿæˆæˆ‘ä»¬éœ€è¦çš„ DefaultSqlSessionFactory å¯¹è±¡ã€‚</li>\n</ul>\n</li>\n</ul>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> SqlSessionFactory <span class=\"title\">build</span><span class=\"params\">(InputStream inputStream, String environment, Properties properties)</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">        XMLConfigBuilder parser = <span class=\"keyword\">new</span> XMLConfigBuilder(inputStream, environment, properties);</span><br><span class=\"line\">        <span class=\"keyword\">return</span> build(parser.parse());</span><br><span class=\"line\">    &#125; <span class=\"keyword\">catch</span> (Exception e) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">throw</span> ExceptionFactory.wrapException(<span class=\"string\">\"Error building SqlSession.\"</span>, e);</span><br><span class=\"line\">    &#125; <span class=\"keyword\">finally</span> &#123;</span><br><span class=\"line\">        ErrorContext.instance().reset();</span><br><span class=\"line\">        <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">        inputStream.close();</span><br><span class=\"line\">        &#125; <span class=\"keyword\">catch</span> (IOException e) &#123;</span><br><span class=\"line\">        <span class=\"comment\">// Intentionally ignore. Prefer previous error.</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> SqlSessionFactory <span class=\"title\">build</span><span class=\"params\">(Configuration config)</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> DefaultSqlSessionFactory(config);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>å•ä¾‹æ¨¡å¼<ul>\n<li>å•ä¾‹æ¨¡å¼åœ¨ MyBatis ä¸­çš„å…¸å‹ä»£è¡¨æ˜¯ ErrorContextã€‚</li>\n<li>ä½¿ç”¨ private ä¿®é¥°çš„ ThreadLocal æ¥ä¿è¯æ¯ä¸ªçº¿ç¨‹æ‹¥æœ‰ä¸€ä¸ª ErrorContext å¯¹è±¡ï¼Œåœ¨è°ƒç”¨ instance() æ–¹æ³•æ—¶å†ä» ThreadLocal ä¸­è·å–æ­¤å•ä¾‹å¯¹è±¡ã€‚</li>\n</ul>\n</li>\n</ul>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ErrorContext</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> String LINE_SEPARATOR = System.lineSeparator();</span><br><span class=\"line\">  <span class=\"comment\">// æ¯ä¸ªçº¿ç¨‹å­˜å‚¨çš„å®¹å™¨</span></span><br><span class=\"line\">  <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> ThreadLocal&lt;ErrorContext&gt; LOCAL = ThreadLocal.withInitial(ErrorContext::<span class=\"keyword\">new</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> ErrorContext <span class=\"title\">instance</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> LOCAL.get();</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><p>é€‚é…å™¨æ¨¡å¼</p>\n<ul>\n<li>MyBatis ä¸­çš„å…¸å‹ä»£è¡¨æ˜¯ Logã€‚<ul>\n<li>SLF4J</li>\n<li>Apache Commons Logging</li>\n<li>Log4j 2</li>\n<li>Log4j</li>\n<li>JDK logging</li>\n</ul>\n</li>\n</ul>\n</li>\n<li><p>ä»£ç†æ¨¡å¼</p>\n<ul>\n<li>ä»£ç†æ¨¡å¼åœ¨ MyBatis ä¸­çš„å…¸å‹ä»£è¡¨æ˜¯ MapperProxyFactoryã€‚</li>\n</ul>\n</li>\n<li><p>æ¨¡ç‰ˆæ–¹æ³•æ¨¡å¼</p>\n<ul>\n<li>æ¨¡æ¿æ–¹æ³•åœ¨ MyBatis ä¸­çš„å…¸å‹ä»£è¡¨æ˜¯ BaseExecutorã€‚</li>\n</ul>\n</li>\n<li><p>è£…é¥°å™¨æ¨¡å¼</p>\n<ul>\n<li>è£…é¥°å™¨æ¨¡å¼åœ¨ MyBatis ä¸­çš„å…¸å‹ä»£è¡¨æ˜¯ Cacheã€‚</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"Mybatisä¸€äº›ç–‘é—®\"><a href=\"#Mybatisä¸€äº›ç–‘é—®\" class=\"headerlink\" title=\"Mybatisä¸€äº›ç–‘é—®\"></a>Mybatisä¸€äº›ç–‘é—®</h2><h3 id=\"äº\"><a href=\"#äº\" class=\"headerlink\" title=\"#{} äº ${}\"></a>#{} äº ${}</h3><blockquote>\n<p>ä½¿ç”¨#{}å¯ä»¥æœ‰æ•ˆçš„é˜²æ­¢SQLæ³¨å…¥ï¼Œæé«˜ç³»ç»Ÿå®‰å…¨æ€§ã€‚</p>\n</blockquote>\n<ul>\n<li>#{}æ˜¯é¢„ç¼–è¯‘,${}æ˜¯å­—ç¬¦ä¸²æ›¿æ¢ã€‚<ul>\n<li>Mybatisåœ¨å¤„ç†#{}æ—¶ï¼Œä¼šå°†sqlä¸­çš„#{}æ›¿æ¢ä¸º?å·ï¼Œè°ƒç”¨PreparedStatementçš„setæ–¹æ³•æ¥èµ‹å€¼ï¼›</li>\n<li>Mybatisåœ¨å¤„ç†${}æ—¶ï¼Œå°±æ˜¯æŠŠ${}æ›¿æ¢æˆå˜é‡çš„å€¼ã€‚</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"MyBatis-Dao-æ¥å£çš„å·¥ä½œåŸç†\"><a href=\"#MyBatis-Dao-æ¥å£çš„å·¥ä½œåŸç†\" class=\"headerlink\" title=\"MyBatis Dao æ¥å£çš„å·¥ä½œåŸç†\"></a>MyBatis Dao æ¥å£çš„å·¥ä½œåŸç†</h3><ul>\n<li>Dao æ¥å£çš„å…¨é™å®šåï¼Œå°±æ˜¯æ˜ å°„æ–‡ä»¶ä¸­çš„ namespace çš„å€¼ï¼Œæ¥å£çš„æ–¹æ³•åï¼Œå°±æ˜¯æ˜ å°„æ–‡ä»¶ä¸­ Mapper çš„ Statement çš„ id å€¼ï¼Œæ¥å£æ–¹æ³•å†…çš„å‚æ•°ï¼Œå°±æ˜¯ä¼ é€’ç»™ SQL çš„å‚æ•°ã€‚Mapper æ¥å£æ˜¯æ²¡æœ‰å®ç°ç±»çš„ï¼Œå½“è°ƒç”¨æ¥å£æ–¹æ³•æ—¶ï¼Œæ¥å£å…¨é™å®šå + æ–¹æ³•åæ‹¼æ¥å­—ç¬¦ä¸²ä½œä¸º key å€¼ï¼Œå¯å”¯ä¸€å®šä½ä¸€ä¸ª MapperStatementã€‚åœ¨ MyBatis ä¸­ï¼Œæ¯ä¸€ä¸ª selectã€insertã€updateã€delete æ ‡ç­¾ï¼Œéƒ½ä¼šè¢«è§£æä¸ºä¸€ä¸ª MapperStatement å¯¹è±¡ã€‚</li>\n</ul>\n<h3 id=\"Dao-æ¥å£é‡Œçš„æ–¹æ³•å¯ä»¥é‡è½½å—\"><a href=\"#Dao-æ¥å£é‡Œçš„æ–¹æ³•å¯ä»¥é‡è½½å—\" class=\"headerlink\" title=\"Dao æ¥å£é‡Œçš„æ–¹æ³•å¯ä»¥é‡è½½å—\"></a>Dao æ¥å£é‡Œçš„æ–¹æ³•å¯ä»¥é‡è½½å—</h3><ul>\n<li>Mapper æ¥å£çš„å·¥ä½œåŸç†æ˜¯ JDK åŠ¨æ€ä»£ç†ï¼ŒMyBatis è¿è¡Œæ—¶ä¼šä½¿ç”¨ JDK åŠ¨æ€ä»£ç†ä¸º Mapper æ¥å£ç”Ÿæˆä»£ç†å¯¹è±¡ proxyï¼Œä»£ç†å¯¹è±¡ä¼šæ‹¦æˆªæ¥å£æ–¹æ³•ï¼Œè½¬è€Œæ‰§è¡Œ MapperStatement æ‰€ä»£è¡¨çš„ SQLï¼Œç„¶åå°† SQL æ‰§è¡Œç»“æœè¿”å›ã€‚æ‰€ä»¥æ˜¯ä¸èƒ½é‡è½½çš„</li>\n</ul>\n","categories":["æŸ¥ç¼ºè¡¥æ¼"],"tags":["Mybatis"]},{"title":"æŸ¥ç¼ºè¡¥æ¼-Redis","url":"/posts/845363102/","content":"<blockquote>\n<p>æœ¬ç« æ˜¯æ•´ç†çŸ¥è¯†å†…å®¹ï¼Œä¸ºå¼ºåŒ–çŸ¥è¯†é•¿æœŸæ›´æ–°ã€‚</p>\n</blockquote>\n<h2 id=\"Redis-ç®€ä»‹\"><a href=\"#Redis-ç®€ä»‹\" class=\"headerlink\" title=\"Redis ç®€ä»‹\"></a>Redis ç®€ä»‹</h2><blockquote>\n<p>Redis æ˜¯å®Œå…¨å¼€æºå…è´¹çš„ï¼Œéµå®ˆ BSD åè®®ï¼Œè‹±æ–‡å…¨ç§°æ˜¯<strong>Remote Dictionary Server</strong>ï¼ˆè¿œç¨‹å­—å…¸æœåŠ¡ï¼‰ï¼Œæ˜¯ä¸€ä¸ªå¼€æºçš„ä½¿ç”¨ANSI Cè¯­è¨€ç¼–å†™ã€æ”¯æŒç½‘ç»œã€å¯åŸºäºå†…å­˜äº¦å¯æŒä¹…åŒ–çš„æ—¥å¿—å‹ã€Key-Valueæ•°æ®åº“ï¼Œå¹¶æä¾›å¤šç§è¯­è¨€çš„APIã€‚</p>\n</blockquote>\n<ul>\n<li>Redis ä¸ å…¶ä»– key - value ç¼“å­˜äº§å“æœ‰ä»¥ä¸‹ä¸‰ä¸ªç‰¹ç‚¹ï¼š<ul>\n<li>Redis æ”¯æŒæ•°æ®æŒä¹…åŒ–ï¼Œå¯ä»¥å°†å†…å­˜ä¸­çš„æ•°æ®ä¿å­˜åœ¨ç£ç›˜ä¸­ï¼Œé‡å¯çš„æ—¶å€™å¯ä»¥å†æ¬¡åŠ è½½è¿›è¡Œä½¿ç”¨ã€‚</li>\n<li>Redis ä¸ä»…ä»…æ”¯æŒç®€å•çš„ key - value ç±»å‹çš„æ•°æ®ï¼ŒåŒæ—¶è¿˜æä¾› listï¼Œsetï¼Œzsetï¼Œhash ç­‰æ•°æ®ç»“æ„çš„å­˜å‚¨</li>\n<li>Redis æ”¯æŒæ•°æ®çš„å¤‡ä»½ï¼Œå³ master - slave æ¨¡å¼çš„æ•°æ®å¤‡ä»½ã€‚</li>\n</ul>\n</li>\n<li>Redisæ˜¯å†…å­˜æ•°æ®åº“ï¼Œæ‰€æœ‰æ“ä½œéƒ½åœ¨å†…å­˜ä¸Šå®Œæˆï¼Œå†…å­˜çš„è®¿é—®é€Ÿåº¦æœ¬èº«å°±å¾ˆå¿«ï¼Œè¯»çš„é€Ÿåº¦æ˜¯ 110000 æ¬¡ /s, å†™çš„é€Ÿåº¦æ˜¯ 81000 æ¬¡ /sã€‚å¦ä¸€æ–¹é¢æ˜¯å› ä¸ºå®ƒçš„æ•°æ®ç»“æ„ã€‚é”®å€¼å¯¹æ˜¯æŒ‰ä¸€å®šçš„æ•°æ®ç»“æ„æ¥ç»„ç»‡çš„ï¼Œæ“ä½œé”®å€¼å¯¹æœ€ç»ˆå°±æ˜¯å¯¹æ•°æ®ç»“æ„è¿›è¡Œå¢åˆ æ”¹æŸ¥æ“ä½œï¼Œæ‰€ä»¥é«˜æ•ˆçš„æ•°æ®ç»“æ„æ˜¯ Redis å¿«é€Ÿå¤„ç†æ•°æ®çš„åŸºç¡€ã€‚</li>\n<li>Redisä½¿ç”¨åŸºäºå“ˆè¥¿æ§½(slot)çš„æ•°æ®åˆ’åˆ†æ–¹å¼ã€‚</li>\n</ul>\n<h3 id=\"Redisæ•°æ®ç±»å‹ä¸æ•°æ®ç»“æ„\"><a href=\"#Redisæ•°æ®ç±»å‹ä¸æ•°æ®ç»“æ„\" class=\"headerlink\" title=\"Redisæ•°æ®ç±»å‹ä¸æ•°æ®ç»“æ„\"></a>Redisæ•°æ®ç±»å‹ä¸æ•°æ®ç»“æ„</h3><p><img src=\"https://z201.oss-cn-shanghai.aliyuncs.com/JavaNote/20211013163550.png\"></p>\n<h4 id=\"æ•°æ®ç»“æ„æ—¶é—´å¤æ‚åº¦\"><a href=\"#æ•°æ®ç»“æ„æ—¶é—´å¤æ‚åº¦\" class=\"headerlink\" title=\"æ•°æ®ç»“æ„æ—¶é—´å¤æ‚åº¦\"></a>æ•°æ®ç»“æ„æ—¶é—´å¤æ‚åº¦</h4><table>\n<thead>\n<tr>\n<th>åç§°</th>\n<th>æ—¶é—´å¤æ‚åº¦</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>å“ˆå¸Œè¡¨</td>\n<td>O(1)</td>\n</tr>\n<tr>\n<td>è·³è¡¨</td>\n<td>O(logN)</td>\n</tr>\n<tr>\n<td>åŒå‘é“¾è¡¨</td>\n<td>O(N)</td>\n</tr>\n<tr>\n<td>å‹ç¼©åˆ—è¡¨</td>\n<td>O(N)</td>\n</tr>\n<tr>\n<td>æ•´æ•°æ•°ç»„</td>\n<td>O(N)</td>\n</tr>\n</tbody></table>\n<h3 id=\"Rediså•çº¿ç¨‹\"><a href=\"#Rediså•çº¿ç¨‹\" class=\"headerlink\" title=\"Rediså•çº¿ç¨‹\"></a>Rediså•çº¿ç¨‹</h3><ul>\n<li>æˆ‘ä»¬é€šå¸¸è¯´ï¼ŒRedis æ˜¯å•çº¿ç¨‹ï¼Œä¸»è¦æ˜¯æŒ‡ Redis çš„ç½‘ç»œ IO å’Œé”®å€¼å¯¹è¯»å†™æ˜¯ç”±ä¸€ä¸ªçº¿ç¨‹æ¥å®Œæˆçš„ï¼Œè¿™ä¹Ÿæ˜¯ Redis å¯¹å¤–æä¾›é”®å€¼å­˜å‚¨æœåŠ¡çš„ä¸»è¦æµç¨‹ã€‚ä½† Redis çš„å…¶ä»–åŠŸèƒ½ï¼Œæ¯”å¦‚æŒä¹…åŒ–ã€å¼‚æ­¥åˆ é™¤ã€é›†ç¾¤æ•°æ®åŒæ­¥ç­‰ï¼Œå…¶å®æ˜¯ç”±é¢å¤–çš„çº¿ç¨‹æ‰§è¡Œçš„ã€‚Redis çš„å•çº¿ç¨‹è®¾è®¡æœºåˆ¶ä»¥åŠå¤šè·¯å¤ç”¨æœºåˆ¶</li>\n<li>Linux ä¸­çš„ IO å¤šè·¯å¤ç”¨æœºåˆ¶<ul>\n<li>Linux ä¸­çš„ IO å¤šè·¯å¤ç”¨æœºåˆ¶æ˜¯æŒ‡ä¸€ä¸ªçº¿ç¨‹å¤„ç†å¤šä¸ª IO æµï¼Œå°±æ˜¯æˆ‘ä»¬ç»å¸¸å¬åˆ°çš„ select/epoll æœºåˆ¶ã€‚ç®€å•æ¥è¯´ï¼Œåœ¨ Redis åªè¿è¡Œå•çº¿ç¨‹çš„æƒ…å†µä¸‹ï¼Œè¯¥æœºåˆ¶å…è®¸å†…æ ¸ä¸­ï¼ŒåŒæ—¶å­˜åœ¨å¤šä¸ªç›‘å¬å¥—æ¥å­—å’Œå·²è¿æ¥å¥—æ¥å­—ã€‚å†…æ ¸ä¼šä¸€ç›´ç›‘å¬è¿™äº›å¥—æ¥å­—ä¸Šçš„è¿æ¥è¯·æ±‚æˆ–æ•°æ®è¯·æ±‚ã€‚ä¸€æ—¦æœ‰è¯·æ±‚åˆ°è¾¾ï¼Œå°±ä¼šäº¤ç»™ Redis çº¿ç¨‹å¤„ç†ï¼Œè¿™å°±å®ç°äº†ä¸€ä¸ª Redis çº¿ç¨‹å¤„ç†å¤šä¸ª IO æµçš„æ•ˆæœã€‚</li>\n</ul>\n</li>\n</ul>\n<h4 id=\"Rediså•çº¿ç¨‹å¤„ç†IOè¯·æ±‚æ€§èƒ½ç“¶é¢ˆ\"><a href=\"#Rediså•çº¿ç¨‹å¤„ç†IOè¯·æ±‚æ€§èƒ½ç“¶é¢ˆ\" class=\"headerlink\" title=\"Rediså•çº¿ç¨‹å¤„ç†IOè¯·æ±‚æ€§èƒ½ç“¶é¢ˆ\"></a>Rediså•çº¿ç¨‹å¤„ç†IOè¯·æ±‚æ€§èƒ½ç“¶é¢ˆ</h4><ul>\n<li>ä»»æ„ä¸€ä¸ªè¯·æ±‚åœ¨serverä¸­ä¸€æ—¦å‘ç”Ÿè€—æ—¶ï¼Œéƒ½ä¼šå½±å“æ•´ä¸ªserverçš„æ€§èƒ½ï¼Œä¹Ÿå°±æ˜¯è¯´åé¢çš„è¯·æ±‚éƒ½è¦ç­‰å‰é¢è¿™ä¸ªè€—æ—¶è¯·æ±‚å¤„ç†å®Œæˆï¼Œè‡ªå·±æ‰èƒ½è¢«å¤„ç†åˆ°ã€‚è€—æ—¶çš„æ“ä½œåŒ…æ‹¬ä»¥ä¸‹å‡ ç§ï¼š<ul>\n<li>æ“ä½œbigkeyï¼šå†™å…¥ä¸€ä¸ªbigkeyåœ¨åˆ†é…å†…å­˜æ—¶éœ€è¦æ¶ˆè€—æ›´å¤šçš„æ—¶é—´ï¼ŒåŒæ ·ï¼Œåˆ é™¤bigkeyé‡Šæ”¾å†…å­˜åŒæ ·ä¼šäº§ç”Ÿè€—æ—¶ï¼›</li>\n<li>ä½¿ç”¨å¤æ‚åº¦è¿‡é«˜çš„å‘½ä»¤ï¼šä¾‹å¦‚SORT/SUNION/ZUNIONSTOREï¼Œæˆ–è€…O(N)å‘½ä»¤ï¼Œä½†æ˜¯Nå¾ˆå¤§ï¼Œä¾‹å¦‚lrange key 0 -1ä¸€æ¬¡æŸ¥è¯¢å…¨é‡æ•°æ®ï¼›</li>\n<li>å¤§é‡keyé›†ä¸­è¿‡æœŸï¼šRedisçš„è¿‡æœŸæœºåˆ¶ä¹Ÿæ˜¯åœ¨ä¸»çº¿ç¨‹ä¸­æ‰§è¡Œçš„ï¼Œå¤§é‡keyé›†ä¸­è¿‡æœŸä¼šå¯¼è‡´å¤„ç†ä¸€ä¸ªè¯·æ±‚æ—¶ï¼Œè€—æ—¶éƒ½åœ¨åˆ é™¤è¿‡æœŸkeyï¼Œè€—æ—¶å˜é•¿ï¼›</li>\n<li>æ·˜æ±°ç­–ç•¥ï¼šæ·˜æ±°ç­–ç•¥ä¹Ÿæ˜¯åœ¨ä¸»çº¿ç¨‹æ‰§è¡Œçš„ï¼Œå½“å†…å­˜è¶…è¿‡Rediså†…å­˜ä¸Šé™åï¼Œæ¯æ¬¡å†™å…¥éƒ½éœ€è¦æ·˜æ±°ä¸€äº›keyï¼Œä¹Ÿä¼šé€ æˆè€—æ—¶å˜é•¿ï¼›</li>\n<li>AOFåˆ·ç›˜å¼€å¯alwaysæœºåˆ¶ï¼šæ¯æ¬¡å†™å…¥éƒ½éœ€è¦æŠŠè¿™ä¸ªæ“ä½œåˆ·åˆ°ç£ç›˜ï¼Œå†™ç£ç›˜çš„é€Ÿåº¦è¿œæ¯”å†™å†…å­˜æ…¢ï¼Œä¼šæ‹–æ…¢Redisçš„æ€§èƒ½ï¼›</li>\n<li>ä¸»ä»å…¨é‡åŒæ­¥ç”ŸæˆRDBï¼šè™½ç„¶é‡‡ç”¨forkå­è¿›ç¨‹ç”Ÿæˆæ•°æ®å¿«ç…§ï¼Œä½†forkè¿™ä¸€ç¬é—´ä¹Ÿæ˜¯ä¼šé˜»å¡æ•´ä¸ªçº¿ç¨‹çš„ï¼Œå®ä¾‹è¶Šå¤§ï¼Œé˜»å¡æ—¶é—´è¶Šä¹…ï¼›</li>\n</ul>\n</li>\n<li>å¹¶å‘é‡éå¸¸å¤§æ—¶ï¼Œå•çº¿ç¨‹è¯»å†™å®¢æˆ·ç«¯IOæ•°æ®å­˜åœ¨æ€§èƒ½ç“¶é¢ˆï¼Œè™½ç„¶é‡‡ç”¨IOå¤šè·¯å¤ç”¨æœºåˆ¶ï¼Œä½†æ˜¯è¯»å†™å®¢æˆ·ç«¯æ•°æ®ä¾æ—§æ˜¯åŒæ­¥IOï¼Œåªèƒ½å•çº¿ç¨‹ä¾æ¬¡è¯»å–å®¢æˆ·ç«¯çš„æ•°æ®ï¼Œæ— æ³•åˆ©ç”¨åˆ°CPUå¤šæ ¸ã€‚</li>\n<li>Redisåœ¨4.0æ¨å‡ºäº†lazy-freeæœºåˆ¶ï¼ŒæŠŠbigkeyé‡Šæ”¾å†…å­˜çš„è€—æ—¶æ“ä½œæ”¾åœ¨äº†å¼‚æ­¥çº¿ç¨‹ä¸­æ‰§è¡Œï¼Œé™ä½å¯¹ä¸»çº¿ç¨‹çš„å½±å“ã€‚</li>\n<li>Redisåœ¨6.0æ¨å‡ºäº†å¤šçº¿ç¨‹ï¼Œå¯ä»¥åœ¨é«˜å¹¶å‘åœºæ™¯ä¸‹åˆ©ç”¨CPUå¤šæ ¸å¤šçº¿ç¨‹è¯»å†™å®¢æˆ·ç«¯æ•°æ®ï¼Œè¿›ä¸€æ­¥æå‡serveræ€§èƒ½ï¼Œå½“ç„¶ï¼Œåªæ˜¯é’ˆå¯¹å®¢æˆ·ç«¯çš„è¯»å†™æ˜¯å¹¶è¡Œçš„ï¼Œæ¯ä¸ªå‘½ä»¤çš„çœŸæ­£æ“ä½œä¾æ—§æ˜¯å•çº¿ç¨‹çš„ã€‚</li>\n</ul>\n<h3 id=\"RedisæŒä¹…åŒ–æœºåˆ¶\"><a href=\"#RedisæŒä¹…åŒ–æœºåˆ¶\" class=\"headerlink\" title=\"RedisæŒä¹…åŒ–æœºåˆ¶\"></a>RedisæŒä¹…åŒ–æœºåˆ¶</h3><blockquote>\n<p>Redisæ˜¯ä¸€ä¸ªæ”¯æŒæŒä¹…åŒ–çš„å†…å­˜æ•°æ®åº“ï¼Œé€šè¿‡æŒä¹…åŒ–æœºåˆ¶æŠŠå†…å­˜ä¸­çš„æ•°æ®åŒæ­¥åˆ°ç¡¬ç›˜æ–‡ä»¶æ¥ä¿è¯æ•°æ®æŒä¹…åŒ–ã€‚å½“Redisé‡å¯åé€šè¿‡æŠŠç¡¬ç›˜æ–‡ä»¶é‡æ–°åŠ è½½åˆ°å†…å­˜ï¼Œå°±èƒ½è¾¾åˆ°æ¢å¤æ•°æ®çš„ç›®çš„ã€‚</p>\n</blockquote>\n<ul>\n<li><p>Redis 4.0 ä¹‹å‰æ•°æ®æŒä¹…åŒ–æ–¹å¼æœ‰ä¸¤ç§ï¼šAOF æ–¹å¼å’Œ RDB æ–¹å¼ã€‚</p>\n<ul>\n<li>RDBï¼ˆRedis DataBaseï¼Œå¿«ç…§æ–¹å¼ï¼‰æ˜¯å°†æŸä¸€ä¸ªæ—¶åˆ»çš„å†…å­˜æ•°æ®ï¼Œä»¥äºŒè¿›åˆ¶çš„æ–¹å¼å†™å…¥ç£ç›˜ã€‚RDB é»˜è®¤çš„ä¿å­˜æ–‡ä»¶ä¸º dump.rdbï¼Œä¼˜ç‚¹æ˜¯ä»¥äºŒè¿›åˆ¶å­˜å‚¨çš„ï¼Œå› æ­¤å ç”¨çš„ç©ºé—´æ›´å°ã€æ•°æ®å­˜å‚¨æ›´ç´§å‡‘ï¼Œå¹¶ä¸”ä¸ AOF ç›¸æ¯”ï¼ŒRDB å…·å¤‡æ›´å¿«çš„é‡å¯æ¢å¤èƒ½åŠ›ã€‚</li>\n<li>AOFï¼ˆAppend Only Fileï¼Œæ–‡ä»¶è¿½åŠ æ–¹å¼ï¼‰æ˜¯æŒ‡å°†æ‰€æœ‰çš„æ“ä½œå‘½ä»¤ï¼Œä»¥æ–‡æœ¬çš„å½¢å¼è¿½åŠ åˆ°æ–‡ä»¶ä¸­ã€‚AOF é»˜è®¤çš„ä¿å­˜æ–‡ä»¶ä¸º appendonly.aofï¼Œå®ƒçš„ä¼˜ç‚¹æ˜¯å­˜å‚¨é¢‘ç‡æ›´é«˜ï¼Œå› æ­¤ä¸¢å¤±æ•°æ®çš„é£é™©å°±è¶Šä½ï¼Œå¹¶ä¸” AOF å¹¶ä¸æ˜¯ä»¥äºŒè¿›åˆ¶å­˜å‚¨çš„ï¼Œæ‰€ä»¥å®ƒçš„å­˜å‚¨ä¿¡æ¯æ›´æ˜“æ‡‚ã€‚ç¼ºç‚¹æ˜¯å ç”¨ç©ºé—´å¤§ï¼Œé‡å¯ä¹‹åçš„æ•°æ®æ¢å¤é€Ÿåº¦æ¯”è¾ƒæ…¢ã€‚</li>\n</ul>\n</li>\n<li><p>å°†RDBåšé•œåƒå…¨é‡æŒä¹…åŒ–ï¼ŒAOFåšå¢é‡æŒä¹…åŒ–ã€‚RDBä¼šè€—è´¹è¾ƒé•¿æ—¶é—´ï¼Œä¸å¤Ÿå®æ—¶ï¼Œåœ¨åœæœºçš„æ—¶å€™ä¼šå¯¼è‡´å¤§é‡ä¸¢å¤±æ•°æ®ï¼Œæ‰€ä»¥éœ€è¦AOFæ¥é…åˆä½¿ç”¨ã€‚åœ¨rediså®ä¾‹é‡å¯æ—¶ï¼Œä¼šä½¿ç”¨RDBæŒä¹…åŒ–æ–‡ä»¶é‡æ–°æ„å»ºå†…å­˜ï¼Œå†ä½¿ç”¨AOFé‡æ”¾è¿‘æœŸçš„æ“ä½œæŒ‡ä»¤æ¥å®ç°å®Œæ•´æ¢å¤é‡å¯ä¹‹å‰çš„çŠ¶æ€ã€‚</p>\n<ul>\n<li>å®ç°ï¼šå•ç‹¬åˆ›å»ºfork()ä¸€ä¸ªå­è¿›ç¨‹ï¼Œå°†å½“å‰çˆ¶è¿›ç¨‹çš„æ•°æ®åº“æ•°æ®å¤åˆ¶åˆ°å­è¿›ç¨‹çš„å†…å­˜ä¸­ï¼Œç„¶åç”±å­è¿›ç¨‹å†…å­˜é‡Šæ”¾ã€‚</li>\n<li>RDBæ˜¯Redisé»˜è®¤çš„æŒä¹…åŒ–æ–¹å¼ã€‚æŒ‰ç…§ä¸€å®šçš„æ—¶é—´å‘¨æœŸç­–ç•¥æŠŠå†…å­˜çš„æ•°æ®ä»¥å¿«ç…§çš„å½¢å¼ä¿å­˜åˆ°ç¡¬ç›˜çš„äºŒè¿›åˆ¶æ–‡ä»¶ã€‚å³Snapshotå¿«ç…§å­˜å‚¨ï¼Œå¯¹åº”äº§ç”Ÿçš„æ•°æ®æ–‡ä»¶ä¸ºdump.rdbï¼Œé€šè¿‡é…ç½®æ–‡ä»¶ä¸­çš„saveå‚æ•°æ¥å®šä¹‰å¿«ç…§çš„å‘¨æœŸã€‚ï¼ˆ å¿«ç…§å¯ä»¥æ˜¯å…¶æ‰€è¡¨ç¤ºçš„æ•°æ®çš„ä¸€ä¸ªå‰¯æœ¬ï¼Œä¹Ÿå¯ä»¥æ˜¯æ•°æ®çš„ä¸€ä¸ªå¤åˆ¶å“ã€‚ï¼‰</li>\n</ul>\n</li>\n<li><p>AOFï¼šRedisä¼šå°†æ¯ä¸€ä¸ªæ”¶åˆ°çš„å†™å‘½ä»¤éƒ½é€šè¿‡Writeå‡½æ•°è¿½åŠ åˆ°æ–‡ä»¶æœ€åï¼Œç±»ä¼¼äºMySQLçš„binlogã€‚å½“Redisé‡å¯æ˜¯ä¼šé€šè¿‡é‡æ–°æ‰§è¡Œæ–‡ä»¶ä¸­ä¿å­˜çš„å†™å‘½ä»¤æ¥åœ¨å†…å­˜ä¸­é‡å»ºæ•´ä¸ªæ•°æ®åº“çš„å†…å®¹ã€‚å½“ä¸¤ç§æ–¹å¼åŒæ—¶å¼€å¯æ—¶ï¼Œæ•°æ®æ¢å¤Redisä¼šä¼˜å…ˆé€‰æ‹©AOFæ¢å¤ã€‚</p>\n</li>\n</ul>\n<h4 id=\"AOFæ—¥å¿—\"><a href=\"#AOFæ—¥å¿—\" class=\"headerlink\" title=\"AOFæ—¥å¿—\"></a>AOFæ—¥å¿—</h4><blockquote>\n<p>AOFæŒä¹…åŒ–æœºåˆ¶æ˜¯ä»¥æ—¥å¿—çš„å½¢å¼è®°å½•Redisä¸­çš„æ¯ä¸€æ¬¡çš„å¢åˆ æ”¹æ“ä½œï¼Œä¸ä¼šè®°å½•æŸ¥è¯¢æ“ä½œï¼Œä»¥æ–‡æœ¬çš„å½¢å¼è®°å½•ï¼Œæ‰“å¼€è®°å½•çš„æ—¥å¿—æ–‡ä»¶å°±å¯ä»¥æŸ¥çœ‹æ“ä½œè®°å½•ã€‚</p>\n</blockquote>\n<ul>\n<li><h5 id=\"AOFæ›´å¥½ä¿è¯æ•°æ®ä¸ä¼šè¢«ä¸¢å¤±ï¼Œæœ€å¤šåªä¸¢å¤±ä¸€ç§’å†…çš„æ•°æ®ï¼Œé€šè¿‡foekä¸€ä¸ªå­è¿›ç¨‹å¤„ç†æŒä¹…åŒ–æ“ä½œï¼Œä¿è¯äº†ä¸»è¿›ç¨‹ä¸ä¼šè¿›ç¨‹ioæ“ä½œï¼Œèƒ½é«˜æ•ˆçš„å¤„ç†å®¢æˆ·ç«¯çš„è¯·æ±‚ã€‚\"><a href=\"#AOFæ›´å¥½ä¿è¯æ•°æ®ä¸ä¼šè¢«ä¸¢å¤±ï¼Œæœ€å¤šåªä¸¢å¤±ä¸€ç§’å†…çš„æ•°æ®ï¼Œé€šè¿‡foekä¸€ä¸ªå­è¿›ç¨‹å¤„ç†æŒä¹…åŒ–æ“ä½œï¼Œä¿è¯äº†ä¸»è¿›ç¨‹ä¸ä¼šè¿›ç¨‹ioæ“ä½œï¼Œèƒ½é«˜æ•ˆçš„å¤„ç†å®¢æˆ·ç«¯çš„è¯·æ±‚ã€‚\" class=\"headerlink\" title=\"AOFæ›´å¥½ä¿è¯æ•°æ®ä¸ä¼šè¢«ä¸¢å¤±ï¼Œæœ€å¤šåªä¸¢å¤±ä¸€ç§’å†…çš„æ•°æ®ï¼Œé€šè¿‡foekä¸€ä¸ªå­è¿›ç¨‹å¤„ç†æŒä¹…åŒ–æ“ä½œï¼Œä¿è¯äº†ä¸»è¿›ç¨‹ä¸ä¼šè¿›ç¨‹ioæ“ä½œï¼Œèƒ½é«˜æ•ˆçš„å¤„ç†å®¢æˆ·ç«¯çš„è¯·æ±‚ã€‚\"></a>AOFæ›´å¥½ä¿è¯æ•°æ®ä¸ä¼šè¢«ä¸¢å¤±ï¼Œæœ€å¤šåªä¸¢å¤±ä¸€ç§’å†…çš„æ•°æ®ï¼Œé€šè¿‡foekä¸€ä¸ªå­è¿›ç¨‹å¤„ç†æŒä¹…åŒ–æ“ä½œï¼Œä¿è¯äº†ä¸»è¿›ç¨‹ä¸ä¼šè¿›ç¨‹ioæ“ä½œï¼Œèƒ½é«˜æ•ˆçš„å¤„ç†å®¢æˆ·ç«¯çš„è¯·æ±‚ã€‚</h5></li>\n<li><p>AOFçš„æ—¥å¿—æ–‡ä»¶çš„è®°å½•å¯è¯»æ€§éå¸¸çš„é«˜ï¼Œå³ä½¿æŸä¸€æ—¶åˆ»æœ‰äººæ‰§è¡Œ<code>flushall</code>æ¸…ç©ºäº†æ‰€æœ‰æ•°æ®ï¼Œåªéœ€è¦æ‹¿åˆ°aofçš„æ—¥å¿—æ–‡ä»¶ï¼Œç„¶åæŠŠæœ€åä¸€æ¡çš„flushallç»™åˆ é™¤æ‰ï¼Œå°±å¯ä»¥æ¢å¤æ•°æ®ã€‚</p>\n</li>\n</ul>\n<h5 id=\"AOFé‡å†™æœºåˆ¶\"><a href=\"#AOFé‡å†™æœºåˆ¶\" class=\"headerlink\" title=\"AOFé‡å†™æœºåˆ¶\"></a>AOFé‡å†™æœºåˆ¶</h5><blockquote>\n<p>åœ¨å†™å…¥æ‰€æœ‰çš„æ“ä½œåˆ°æ—¥å¿—æ–‡ä»¶ä¸­æ—¶ï¼Œå°±ä¼šå‡ºç°æ—¥å¿—æ–‡ä»¶å¾ˆå¤šé‡å¤çš„æ“ä½œï¼Œç”šè‡³æ˜¯æ— æ•ˆçš„æ“ä½œï¼Œå¯¼è‡´æ—¥å¿—æ–‡ä»¶è¶Šæ¥è¶Šå¤§ã€‚å°±æµªè´¹äº†èµ„æºç©ºé—´ï¼Œæ‰€ä»¥åœ¨Redisä¸­å‡ºç°äº†<code>rewrite</code>æœºåˆ¶ã€‚redisæä¾›äº†bgrewriteaofå‘½ä»¤ã€‚å°†å†…å­˜ä¸­çš„æ•°æ®ä»¥å‘½ä»¤çš„æ–¹å¼ä¿å­˜åˆ°ä¸´æ—¶æ–‡ä»¶ä¸­ï¼ŒåŒæ—¶ä¼šforkå‡ºä¸€æ¡æ–°è¿›ç¨‹æ¥å°†æ–‡ä»¶é‡å†™ã€‚</p>\n</blockquote>\n<ul>\n<li><p>é‡å†™AOFçš„æ—¥å¿—æ–‡ä»¶ä¸æ˜¯è¯»å–æ—§çš„æ—¥å¿—æ–‡ä»¶ç˜¦èº«ï¼Œè€Œæ˜¯å°†å†…å­˜ä¸­çš„æ•°æ®ç”¨å‘½ä»¤çš„æ–¹å¼é‡å†™ä¸€ä¸ªAOFæ–‡ä»¶ï¼Œé‡æ–°ä¿å­˜æ›¿æ¢åŸæ¥æ—§çš„æ—¥å¿—æ–‡ä»¶ï¼Œå› æ­¤å†…å­˜ä¸­çš„æ•°æ®æ‰æ˜¯æœ€æ–°çš„ã€‚</p>\n</li>\n<li><p>é‡å†™æ“ä½œä¹Ÿä¼š<code>fork</code>ä¸€ä¸ªå­è¿›ç¨‹æ¥å¤„ç†é‡å†™æ“ä½œï¼Œé‡å†™ä»¥å†…å­˜ä¸­çš„æ•°æ®ä½œä¸ºé‡å†™çš„æºï¼Œé¿å…äº†æ“ä½œçš„å†—ä½™æ€§ï¼Œä¿è¯äº†æ•°æ®çš„æœ€æ–°ã€‚</p>\n</li>\n<li><p>å†™åæ—¥å¿—ï¼Œâ€œå†™åâ€çš„æ„æ€æ˜¯ Redis æ˜¯å…ˆæ‰§è¡Œå‘½ä»¤ï¼ŒæŠŠæ•°æ®å†™å…¥å†…å­˜ï¼Œç„¶åæ‰è®°å½•æ—¥å¿—ã€‚</p>\n</li>\n</ul>\n<h5 id=\"AOF-æ½œåœ¨çš„é£é™©\"><a href=\"#AOF-æ½œåœ¨çš„é£é™©\" class=\"headerlink\" title=\"AOF æ½œåœ¨çš„é£é™©\"></a>AOF æ½œåœ¨çš„é£é™©</h5><ul>\n<li>å¦‚æœåˆšæ‰§è¡Œå®Œä¸€ä¸ªå‘½ä»¤ï¼Œè¿˜æ²¡æœ‰æ¥å¾—åŠè®°æ—¥å¿—å°±å®•æœºäº†ï¼Œé‚£ä¹ˆè¿™ä¸ªå‘½ä»¤å’Œç›¸åº”çš„æ•°æ®å°±æœ‰ä¸¢å¤±çš„é£é™©ã€‚å¦‚æœæ­¤æ—¶ Redis æ˜¯ç”¨ä½œç¼“å­˜ï¼Œè¿˜å¯ä»¥ä»åç«¯æ•°æ®åº“é‡æ–°è¯»å…¥æ•°æ®è¿›è¡Œæ¢å¤ï¼Œä½†æ˜¯ï¼Œå¦‚æœ Redis æ˜¯ç›´æ¥ç”¨ä½œæ•°æ®åº“çš„è¯ï¼Œæ­¤æ—¶ï¼Œå› ä¸ºå‘½ä»¤æ²¡æœ‰è®°å…¥æ—¥å¿—ï¼Œæ‰€ä»¥å°±æ— æ³•ç”¨æ—¥å¿—è¿›è¡Œæ¢å¤äº†ã€‚</li>\n<li>AOF è™½ç„¶é¿å…äº†å¯¹å½“å‰å‘½ä»¤çš„é˜»å¡ï¼Œä½†å¯èƒ½ä¼šç»™ä¸‹ä¸€ä¸ªæ“ä½œå¸¦æ¥é˜»å¡é£é™©ã€‚è¿™æ˜¯å› ä¸ºï¼ŒAOF æ—¥å¿—ä¹Ÿæ˜¯åœ¨ä¸»çº¿ç¨‹ä¸­æ‰§è¡Œçš„ï¼Œå¦‚æœåœ¨æŠŠæ—¥å¿—æ–‡ä»¶å†™å…¥ç£ç›˜æ—¶ï¼Œç£ç›˜å†™å‹åŠ›å¤§ï¼Œå°±ä¼šå¯¼è‡´å†™ç›˜å¾ˆæ…¢ï¼Œè¿›è€Œå¯¼è‡´åç»­çš„æ“ä½œä¹Ÿæ— æ³•æ‰§è¡Œäº†ã€‚</li>\n</ul>\n<h5 id=\"AOFä¸‰ç§å†™å›ç­–ç•¥\"><a href=\"#AOFä¸‰ç§å†™å›ç­–ç•¥\" class=\"headerlink\" title=\"AOFä¸‰ç§å†™å›ç­–ç•¥\"></a>AOFä¸‰ç§å†™å›ç­–ç•¥</h5><ul>\n<li>Alwaysï¼ŒåŒæ­¥å†™å›ï¼šæ¯ä¸ªå†™å‘½ä»¤æ‰§è¡Œå®Œï¼Œç«‹é©¬åŒæ­¥åœ°å°†æ—¥å¿—å†™å›ç£ç›˜ï¼›<ul>\n<li>åŒæ­¥å†™å›å¯ä»¥åšåˆ°åŸºæœ¬ä¸ä¸¢æ•°æ®ï¼Œä½†æ˜¯å®ƒåœ¨æ¯ä¸€ä¸ªå†™å‘½ä»¤åéƒ½æœ‰ä¸€ä¸ªæ…¢é€Ÿçš„è½ç›˜æ“ä½œï¼Œä¸å¯é¿å…åœ°ä¼šå½±å“ä¸»çº¿ç¨‹æ€§èƒ½ã€‚</li>\n</ul>\n</li>\n<li>Everysecï¼Œæ¯ç§’å†™å›ï¼šæ¯ä¸ªå†™å‘½ä»¤æ‰§è¡Œå®Œï¼Œåªæ˜¯å…ˆæŠŠæ—¥å¿—å†™åˆ° AOF æ–‡ä»¶çš„å†…å­˜ç¼“å†²åŒºï¼Œæ¯éš”ä¸€ç§’æŠŠç¼“å†²åŒºä¸­çš„å†…å®¹å†™å…¥ç£ç›˜ï¼›<ul>\n<li>æ¯ç§’å†™å›é‡‡ç”¨ä¸€ç§’å†™å›ä¸€æ¬¡çš„é¢‘ç‡ï¼Œé¿å…äº†â€œåŒæ­¥å†™å›â€çš„æ€§èƒ½å¼€é”€ï¼Œè™½ç„¶å‡å°‘äº†å¯¹ç³»ç»Ÿæ€§èƒ½çš„å½±å“ï¼Œä½†æ˜¯å¦‚æœå‘ç”Ÿå®•æœºï¼Œä¸Šä¸€ç§’å†…æœªè½ç›˜çš„å‘½ä»¤æ“ä½œä»ç„¶ä¼šä¸¢å¤±ã€‚æ‰€ä»¥ï¼Œè¿™åªèƒ½ç®—æ˜¯ï¼Œåœ¨é¿å…å½±å“ä¸»çº¿ç¨‹æ€§èƒ½å’Œé¿å…æ•°æ®ä¸¢å¤±ä¸¤è€…é—´å–äº†ä¸ªæŠ˜ä¸­ã€‚</li>\n</ul>\n</li>\n<li>Noï¼Œæ“ä½œç³»ç»Ÿæ§åˆ¶çš„å†™å›ï¼šæ¯ä¸ªå†™å‘½ä»¤æ‰§è¡Œå®Œï¼Œåªæ˜¯å…ˆæŠŠæ—¥å¿—å†™åˆ° AOF æ–‡ä»¶çš„å†…å­˜ç¼“å†²åŒºï¼Œç”±æ“ä½œç³»ç»Ÿå†³å®šä½•æ—¶å°†ç¼“å†²åŒºå†…å®¹å†™å›ç£ç›˜ã€‚<ul>\n<li>æ“ä½œç³»ç»Ÿæ§åˆ¶çš„å†™å›åœ¨å†™å®Œç¼“å†²åŒºåï¼Œå°±å¯ä»¥ç»§ç»­æ‰§è¡Œåç»­çš„å‘½ä»¤ï¼Œä½†æ˜¯è½ç›˜çš„æ—¶æœºå·²ç»ä¸åœ¨ Redis æ‰‹ä¸­äº†ï¼Œåªè¦ AOF è®°å½•æ²¡æœ‰å†™å›ç£ç›˜ï¼Œä¸€æ—¦å®•æœºå¯¹åº”çš„æ•°æ®å°±ä¸¢å¤±äº†ã€‚</li>\n</ul>\n</li>\n</ul>\n<h4 id=\"RDBå¿«ç…§\"><a href=\"#RDBå¿«ç…§\" class=\"headerlink\" title=\"RDBå¿«ç…§\"></a>RDBå¿«ç…§</h4><blockquote>\n<p>RDBæŒä¹…åŒ–å°±æ˜¯å°†å½“å‰è¿›ç¨‹çš„æ•°æ®ä»¥ç”Ÿæˆå¿«ç…§çš„å½¢å¼æŒä¹…åŒ–åˆ°ç£ç›˜ä¸­ã€‚å¯¹äºå¿«ç…§çš„ç†è§£ï¼Œæˆ‘ä»¬å¯ä»¥ç†è§£ä¸ºå°†å½“å‰çº¿ç¨‹çš„æ•°æ®ä»¥æ‹ç…§çš„å½¢å¼ä¿å­˜ä¸‹æ¥ã€‚</p>\n</blockquote>\n<ul>\n<li>æ¢å¤æ•°æ®é€Ÿåº¦å¿«</li>\n<li>å†™å…¥æŒä¹…åŒ–æ–‡ä»¶å¿«</li>\n<li>RDBæŒä¹…åŒ–åçš„æ–‡ä»¶æ˜¯ç´§å‡‘çš„äºŒè¿›åˆ¶æ–‡ä»¶ï¼Œé€‚åˆäºå¤‡ä»½ã€å…¨é‡å¤åˆ¶ã€å¤§è§„æ¨¡æ•°æ®æ¢å¤çš„åœºæ™¯ï¼Œå¯¹æ•°æ®å®Œæ•´æ€§å’Œä¸€è‡´æ€§è¦æ±‚ä¸é«˜ï¼ŒRDBä¼šä¸¢å¤±æœ€åä¸€æ¬¡å¿«ç…§çš„æ•°æ®ã€‚</li>\n</ul>\n<h5 id=\"RDBåŸç†\"><a href=\"#RDBåŸç†\" class=\"headerlink\" title=\"RDBåŸç†\"></a>RDBåŸç†</h5><ul>\n<li><p>forkå’Œcowã€‚forkæ˜¯æŒ‡redisé€šè¿‡åˆ›å»ºå­è¿›ç¨‹æ¥è¿›è¡ŒRDBæ“ä½œï¼ŒcowæŒ‡çš„æ˜¯<strong>copy on write</strong>ï¼Œå­è¿›ç¨‹åˆ›å»ºåï¼Œçˆ¶å­è¿›ç¨‹å…±äº«æ•°æ®æ®µï¼Œçˆ¶è¿›ç¨‹ç»§ç»­æä¾›è¯»å†™æœåŠ¡ï¼Œå†™è„çš„é¡µé¢æ•°æ®ä¼šé€æ¸å’Œå­è¿›ç¨‹åˆ†ç¦»å¼€æ¥ã€‚</p>\n</li>\n<li><p>Redis çš„æ•°æ®éƒ½åœ¨å†…å­˜ä¸­ï¼Œä¸ºäº†æä¾›æ‰€æœ‰æ•°æ®çš„å¯é æ€§ä¿è¯ï¼Œå®ƒæ‰§è¡Œçš„æ˜¯å…¨é‡å¿«ç…§ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼ŒæŠŠå†…å­˜ä¸­çš„æ‰€æœ‰æ•°æ®éƒ½è®°å½•åˆ°ç£ç›˜ä¸­ã€‚å…¨é‡æ•°æ®è¶Šå¤šï¼ŒRDB æ–‡ä»¶å°±è¶Šå¤§ï¼Œå¾€ç£ç›˜ä¸Šå†™æ•°æ®çš„æ—¶é—´å¼€é”€å°±è¶Šå¤§ã€‚</p>\n</li>\n<li><p>å¯¹äº Redis è€Œè¨€ï¼Œå®ƒçš„å•çº¿ç¨‹æ¨¡å‹å°±å†³å®šäº†ï¼Œæˆ‘ä»¬è¦å°½é‡é¿å…æ‰€æœ‰ä¼šé˜»å¡ä¸»çº¿ç¨‹çš„æ“ä½œï¼Œæ‰€ä»¥ï¼Œé’ˆå¯¹ä»»ä½•æ“ä½œï¼Œæˆ‘ä»¬éƒ½ä¼šæä¸€ä¸ªçµé­‚ä¹‹é—®ï¼šâ€œå®ƒä¼šé˜»å¡ä¸»çº¿ç¨‹å—?â€RDB æ–‡ä»¶çš„ç”Ÿæˆæ˜¯å¦ä¼šé˜»å¡ä¸»çº¿ç¨‹ï¼Œè¿™å°±å…³ç³»åˆ°æ˜¯å¦ä¼šé™ä½ Redis çš„æ€§èƒ½ã€‚</p>\n</li>\n<li><p>Redis æä¾›äº†ä¸¤ä¸ªå‘½ä»¤æ¥ç”Ÿæˆ RDB æ–‡ä»¶ï¼Œåˆ†åˆ«æ˜¯ save å’Œ bgsaveã€‚</p>\n<ul>\n<li>saveï¼šåœ¨ä¸»çº¿ç¨‹ä¸­æ‰§è¡Œï¼Œä¼šå¯¼è‡´é˜»å¡ï¼›</li>\n<li>bgsaveï¼šåˆ›å»ºä¸€ä¸ªå­è¿›ç¨‹ï¼Œä¸“é—¨ç”¨äºå†™å…¥ RDB æ–‡ä»¶ï¼Œé¿å…äº†ä¸»çº¿ç¨‹çš„é˜»å¡ï¼Œè¿™ä¹Ÿæ˜¯ Redis RDB æ–‡ä»¶ç”Ÿæˆçš„é»˜è®¤é…ç½®ã€‚</li>\n</ul>\n</li>\n</ul>\n<h4 id=\"Rediså¯åŠ¨æŒä¹…åŒ–æ–‡ä»¶åŠ è½½æœºåˆ¶\"><a href=\"#Rediså¯åŠ¨æŒä¹…åŒ–æ–‡ä»¶åŠ è½½æœºåˆ¶\" class=\"headerlink\" title=\"Rediså¯åŠ¨æŒä¹…åŒ–æ–‡ä»¶åŠ è½½æœºåˆ¶\"></a>Rediså¯åŠ¨æŒä¹…åŒ–æ–‡ä»¶åŠ è½½æœºåˆ¶</h4><blockquote>\n<p>Redisæ˜¯åŸºäºå†…å­˜çš„éå…³ç³»å‹K-Væ•°æ®åº“ï¼Œå®ƒæ˜¯åŸºäºå†…å­˜çš„ï¼Œå¦‚æœRedisæœåŠ¡å™¨æŒ‚äº†ï¼Œæ•°æ®å°±ä¼šä¸¢å¤±ã€‚ä¸ºäº†é¿å…æ•°æ®ä¸¢å¤±äº†ï¼ŒRedisæä¾›äº†<strong>æŒä¹…åŒ–</strong>ï¼Œå³æŠŠæ•°æ®ä¿å­˜åˆ°ç£ç›˜ã€‚</p>\n</blockquote>\n<p><img src=\"https://z201.oss-cn-shanghai.aliyuncs.com/JavaNote/20211018123529.png\"></p>\n<h3 id=\"ç¼“å­˜å¸¦æ¥çš„é—®é¢˜\"><a href=\"#ç¼“å­˜å¸¦æ¥çš„é—®é¢˜\" class=\"headerlink\" title=\"ç¼“å­˜å¸¦æ¥çš„é—®é¢˜\"></a>ç¼“å­˜å¸¦æ¥çš„é—®é¢˜</h3><h4 id=\"ç¼“å­˜é›ªå´©\"><a href=\"#ç¼“å­˜é›ªå´©\" class=\"headerlink\" title=\"ç¼“å­˜é›ªå´©\"></a>ç¼“å­˜é›ªå´©</h4><ul>\n<li>æˆ‘ä»¬å¯ä»¥ç®€å•çš„ç†è§£ä¸ºï¼šç”±äºåŸæœ‰ç¼“å­˜å¤±æ•ˆï¼Œæ–°ç¼“å­˜æœªåˆ°æœŸé—´(ä¾‹å¦‚ï¼šæˆ‘ä»¬è®¾ç½®ç¼“å­˜æ—¶é‡‡ç”¨äº†ç›¸åŒçš„è¿‡æœŸæ—¶é—´ï¼Œåœ¨åŒä¸€æ—¶åˆ»å‡ºç°å¤§é¢ç§¯çš„ç¼“å­˜è¿‡æœŸ)ï¼Œæ‰€æœ‰åŸæœ¬åº”è¯¥è®¿é—®ç¼“å­˜çš„è¯·æ±‚éƒ½å»æŸ¥è¯¢æ•°æ®åº“äº†ï¼Œè€Œå¯¹æ•°æ®åº“CPUå’Œå†…å­˜é€ æˆå·¨å¤§å‹åŠ›ï¼Œä¸¥é‡çš„ä¼šé€ æˆæ•°æ®åº“å®•æœºã€‚ä»è€Œå½¢æˆä¸€ç³»åˆ—è¿é”ååº”ï¼Œé€ æˆæ•´ä¸ªç³»ç»Ÿå´©æºƒã€‚</li>\n<li><strong>è§£å†³åŠæ³•ï¼š</strong><ul>\n<li>å¤§å¤šæ•°ç³»ç»Ÿè®¾è®¡è€…è€ƒè™‘ç”¨åŠ é”ï¼ˆ æœ€å¤šçš„è§£å†³æ–¹æ¡ˆï¼‰æˆ–è€…é˜Ÿåˆ—çš„æ–¹å¼ä¿è¯æ¥ä¿è¯ä¸ä¼šæœ‰å¤§é‡çš„çº¿ç¨‹å¯¹æ•°æ®åº“ä¸€æ¬¡æ€§è¿›è¡Œè¯»å†™ï¼Œä»è€Œé¿å…å¤±æ•ˆæ—¶å¤§é‡çš„å¹¶å‘è¯·æ±‚è½åˆ°åº•å±‚å­˜å‚¨ç³»ç»Ÿä¸Šã€‚è¿˜æœ‰ä¸€ä¸ªç®€å•æ–¹æ¡ˆå°±æ˜¯å°†ç¼“å­˜å¤±æ•ˆæ—¶é—´åˆ†æ•£å¼€ã€‚</li>\n<li>æœåŠ¡å±‚å¢åŠ ç†”æ–­ã€é™çº§ã€é™æµç­‰æ“ä½œï¼Œé˜²æ­¢ç³»ç»Ÿè¢«æµé‡æ”»æºƒã€‚</li>\n<li>å¢åŠ redisçš„ç›‘æ§æªæ–½ï¼Œå¹¶é‡‡ç”¨é«˜å¯ç”¨æ¶æ„å¤„ç†ã€‚</li>\n</ul>\n</li>\n</ul>\n<h4 id=\"ç¼“å­˜ç©¿é€\"><a href=\"#ç¼“å­˜ç©¿é€\" class=\"headerlink\" title=\"ç¼“å­˜ç©¿é€\"></a>ç¼“å­˜ç©¿é€</h4><ul>\n<li>ç¼“å­˜ç©¿é€æ˜¯æŒ‡ç”¨æˆ·æŸ¥è¯¢æ•°æ®ï¼Œåœ¨æ•°æ®åº“æ²¡æœ‰ï¼Œè‡ªç„¶åœ¨ç¼“å­˜ä¸­ä¹Ÿä¸ä¼šæœ‰ã€‚è¿™æ ·å°±å¯¼è‡´ç”¨æˆ·æŸ¥è¯¢çš„æ—¶å€™ï¼Œåœ¨ç¼“å­˜ä¸­æ‰¾ä¸åˆ°ï¼Œæ¯æ¬¡éƒ½è¦å»æ•°æ®åº“å†æŸ¥è¯¢ä¸€éï¼Œç„¶åè¿”å›ç©ºï¼ˆç›¸å½“äºè¿›è¡Œäº†ä¸¤æ¬¡æ— ç”¨çš„æŸ¥è¯¢ï¼‰ã€‚è¿™æ ·è¯·æ±‚å°±ç»•è¿‡ç¼“å­˜ç›´æ¥æŸ¥æ•°æ®åº“ï¼Œè¿™ä¹Ÿæ˜¯ç»å¸¸æçš„ç¼“å­˜å‘½ä¸­ç‡é—®é¢˜ã€‚</li>\n<li>è§£å†³åŠæ³•</li>\n</ul>\n<blockquote>\n<ol>\n<li><strong>ç¼“å­˜ç©ºå¯¹è±¡</strong>ï¼šä»£ç ç»´æŠ¤è¾ƒç®€å•ï¼Œä½†æ˜¯æ•ˆæœä¸å¥½ã€‚</li>\n<li><strong>å¸ƒéš†è¿‡æ»¤å™¨</strong>ï¼šä»£ç ç»´æŠ¤å¤æ‚ï¼Œç©ºé—´æ•ˆç‡å’ŒæŸ¥è¯¢æ—¶é—´éƒ½è¿œè¿œè¶…è¿‡ä¸€èˆ¬çš„ç®—æ³•ï¼Œæ•ˆæœå¾ˆå¥½ã€‚æœ‰ä¸€å®šçš„è¯¯è¯†åˆ«ç‡ï¼Œåˆ é™¤å›°éš¾ã€‚</li>\n<li><strong>è¯·æ±‚å‚æ•°æ£€éªŒ</strong>ï¼šé˜²æ­¢æ¶æ„è¯·æ±‚è¿›å…¥ä¸šåŠ¡ç³»ç»Ÿï¼Œå°†éƒ¨åˆ†æ¶æ„è¯·æ±‚æ‹¦æˆªæ‰ã€‚</li>\n</ol>\n</blockquote>\n<ul>\n<li><strong>å¸ƒéš†è¿‡æ»¤å™¨</strong>ï¼Œå°†æ‰€æœ‰å¯èƒ½å­˜åœ¨çš„æ•°æ®å“ˆå¸Œåˆ°ä¸€ä¸ªè¶³å¤Ÿå¤§çš„bitmapä¸­ï¼Œä¸€ä¸ªä¸€å®šä¸å­˜åœ¨çš„æ•°æ®ä¼šè¢«è¿™ä¸ªbitmapæ‹¦æˆªæ‰ï¼Œä»è€Œé¿å…äº†å¯¹åº•å±‚å­˜å‚¨ç³»ç»Ÿçš„æŸ¥è¯¢å‹åŠ›ã€‚</li>\n<li><strong>ç¼“å­˜ç©ºå¯¹è±¡</strong>,ä¸€ä¸ªæŸ¥è¯¢è¿”å›çš„æ•°æ®ä¸ºç©ºï¼ˆä¸ç®¡æ˜¯æ•°æ®ä¸å­˜åœ¨ï¼Œè¿˜æ˜¯ç³»ç»Ÿæ•…éšœï¼‰ï¼Œæˆ‘ä»¬ä»ç„¶æŠŠè¿™ä¸ªç©ºç»“æœè¿›è¡Œç¼“å­˜ï¼Œä½†å®ƒçš„è¿‡æœŸæ—¶é—´ä¼šå¾ˆçŸ­ï¼Œæœ€é•¿ä¸è¶…è¿‡äº”åˆ†é’Ÿã€‚é€šè¿‡è¿™ä¸ªç›´æ¥è®¾ç½®çš„é»˜è®¤å€¼å­˜æ”¾åˆ°ç¼“å­˜ï¼Œè¿™æ ·ç¬¬äºŒæ¬¡åˆ°ç¼“å†²ä¸­è·å–å°±æœ‰å€¼äº†ï¼Œè€Œä¸ä¼šç»§ç»­è®¿é—®æ•°æ®åº“ï¼Œè¿™ç§åŠæ³•æœ€ç®€å•ç²—æš´ã€‚</li>\n<li><strong>å¸ƒéš†è¿‡æ»¤å™¨ï¼ˆæ¨èï¼‰</strong><ul>\n<li>å°±æ˜¯å¼•å…¥äº†k(k&gt;1)k(k&gt;1)ä¸ªç›¸äº’ç‹¬ç«‹çš„å“ˆå¸Œå‡½æ•°ï¼Œä¿è¯åœ¨ç»™å®šçš„ç©ºé—´ã€è¯¯åˆ¤ç‡ä¸‹ï¼Œå®Œæˆå…ƒç´ åˆ¤é‡çš„è¿‡ç¨‹ã€‚å®ƒçš„ä¼˜ç‚¹æ˜¯ç©ºé—´æ•ˆç‡å’ŒæŸ¥è¯¢æ—¶é—´éƒ½è¿œè¿œè¶…è¿‡ä¸€èˆ¬çš„ç®—æ³•ï¼Œç¼ºç‚¹æ˜¯æœ‰ä¸€å®šçš„è¯¯è¯†åˆ«ç‡å’Œåˆ é™¤å›°éš¾ã€‚Hashå­˜åœ¨ä¸€ä¸ªå†²çªï¼ˆç¢°æ’ï¼‰çš„é—®é¢˜ï¼Œç”¨åŒä¸€ä¸ªHashå¾—åˆ°çš„ä¸¤ä¸ªURLçš„å€¼æœ‰å¯èƒ½ç›¸åŒã€‚ä¸ºäº†å‡å°‘å†²çªï¼Œæˆ‘ä»¬å¯ä»¥å¤šå¼•å…¥å‡ ä¸ªHashï¼Œå¦‚æœé€šè¿‡å…¶ä¸­çš„ä¸€ä¸ªHashå€¼æˆ‘ä»¬å¾—å‡ºæŸå…ƒç´ ä¸åœ¨é›†åˆä¸­ï¼Œé‚£ä¹ˆè¯¥å…ƒç´ è‚¯å®šä¸åœ¨é›†åˆä¸­ã€‚åªæœ‰åœ¨æ‰€æœ‰çš„Hashå‡½æ•°å‘Šè¯‰æˆ‘ä»¬è¯¥å…ƒç´ åœ¨é›†åˆä¸­æ—¶ï¼Œæ‰èƒ½ç¡®å®šè¯¥å…ƒç´ å­˜åœ¨äºé›†åˆä¸­ã€‚è¿™ä¾¿æ˜¯Bloom-Filterçš„åŸºæœ¬æ€æƒ³ã€‚Bloom-Filterä¸€èˆ¬ç”¨äºåœ¨å¤§æ•°æ®é‡çš„é›†åˆä¸­åˆ¤å®šæŸå…ƒç´ æ˜¯å¦å­˜åœ¨ã€‚</li>\n</ul>\n</li>\n</ul>\n<h5 id=\"å¸ƒéš†è¿‡æ»¤å™¨\"><a href=\"#å¸ƒéš†è¿‡æ»¤å™¨\" class=\"headerlink\" title=\"å¸ƒéš†è¿‡æ»¤å™¨\"></a>å¸ƒéš†è¿‡æ»¤å™¨</h5><blockquote>\n<p>å¸ƒéš†è¿‡æ»¤å™¨æ˜¯ä¸€ç§åŸºäº<strong>æ¦‚ç‡</strong>çš„<strong>æ•°æ®ç»“æ„</strong>ï¼Œä¸»è¦ç”¨æ¥åˆ¤æ–­æŸä¸ªå…ƒç´ æ˜¯å¦åœ¨é›†åˆå†…ï¼Œå®ƒå…·æœ‰<strong>è¿è¡Œé€Ÿåº¦å¿«</strong>ï¼ˆæ—¶é—´æ•ˆç‡ï¼‰ï¼Œ<strong>å ç”¨å†…å­˜å°</strong>çš„ä¼˜ç‚¹ï¼ˆç©ºé—´æ•ˆç‡ï¼‰ï¼Œä½†æ˜¯æœ‰ä¸€å®šçš„<strong>è¯¯è¯†åˆ«ç‡</strong>å’Œ<strong>åˆ é™¤å›°éš¾</strong>çš„é—®é¢˜ã€‚å®ƒåªèƒ½å‘Šè¯‰ä½ æŸä¸ªå…ƒç´ ä¸€å®šä¸åœ¨é›†åˆå†…æˆ–å¯èƒ½åœ¨é›†åˆå†…ã€‚</p>\n</blockquote>\n<ol>\n<li>ä¸€ä¸ªéå¸¸å¤§<strong>çš„äºŒè¿›åˆ¶ä½æ•°ç»„</strong> ï¼ˆæ•°ç»„é‡Œåªæœ‰0å’Œ1ï¼‰</li>\n<li>è‹¥å¹²ä¸ª<strong>å“ˆå¸Œå‡½æ•°</strong></li>\n<li><strong>ç©ºé—´æ•ˆç‡</strong>å’Œ<strong>æŸ¥è¯¢æ•ˆç‡é«˜</strong></li>\n<li>ä¸å­˜åœ¨<strong>æ¼æŠ¥</strong>ï¼ˆFalse Negativeï¼‰ï¼šæŸä¸ªå…ƒç´ åœ¨æŸä¸ªé›†åˆä¸­ï¼Œè‚¯å®šèƒ½æŠ¥å‡ºæ¥ã€‚</li>\n<li>å¯èƒ½å­˜åœ¨<strong>è¯¯æŠ¥</strong>ï¼ˆFalse Positiveï¼‰ï¼šæŸä¸ªå…ƒç´ ä¸åœ¨æŸä¸ªé›†åˆä¸­ï¼Œå¯èƒ½ä¹Ÿè¢«çˆ†å‡ºæ¥ã€‚</li>\n<li>ä¸æä¾›åˆ é™¤æ–¹æ³•ï¼Œä»£ç ç»´æŠ¤å›°éš¾ã€‚</li>\n<li>ä½æ•°ç»„åˆå§‹åŒ–éƒ½ä¸º0ï¼Œå®ƒä¸å­˜å…ƒç´ çš„å…·ä½“å€¼ï¼Œå½“å…ƒç´ ç»è¿‡å“ˆå¸Œå‡½æ•°å“ˆå¸Œåçš„å€¼ï¼ˆä¹Ÿå°±æ˜¯æ•°ç»„ä¸‹æ ‡ï¼‰å¯¹åº”çš„æ•°ç»„ä½ç½®å€¼æ”¹ä¸º1ã€‚</li>\n</ol>\n<h5 id=\"å¸ƒéš†è¿‡æ»¤å™¨æ¡ˆä¾‹\"><a href=\"#å¸ƒéš†è¿‡æ»¤å™¨æ¡ˆä¾‹\" class=\"headerlink\" title=\"å¸ƒéš†è¿‡æ»¤å™¨æ¡ˆä¾‹\"></a>å¸ƒéš†è¿‡æ»¤å™¨æ¡ˆä¾‹</h5><blockquote>\n<p>å½“æŸ¥è¯¢ä¸€ä»¶å•†å“çš„ç¼“å­˜ä¿¡æ¯ï¼Œå¸ƒéš†è¿‡æ»¤å™¨åªèƒ½ç²¾ç¡®åˆ¤æ–­æ•°æ®ä¸å­˜åœ¨æƒ…å†µï¼Œå¯¹äºå­˜åœ¨æˆ‘ä»¬åªèƒ½è¯´æ˜¯å¯èƒ½ï¼Œå› ä¸ºå­˜åœ¨Hashå†²çªæƒ…å†µï¼Œå½“ç„¶è¿™ä¸ªæ¦‚ç‡éå¸¸ä½ã€‚</p>\n</blockquote>\n<ol>\n<li>å½“æŸ¥è¯¢ä¸€ä»¶å•†å“çš„ç¼“å­˜ä¿¡æ¯</li>\n<li>ç„¶åï¼Œåœ¨å¸ƒéš†æ•°ç»„ä¸­æŸ¥æ‰¾è®¿é—®å¯¹åº”çš„ä½å€¼ï¼Œ0æˆ–1</li>\n<li>åˆ¤æ–­ï¼Œä¸‰ä¸ªå€¼ä¸­ï¼Œåªè¦æœ‰ä¸€ä¸ªä¸æ˜¯1ï¼Œé‚£ä¹ˆæˆ‘ä»¬è®¤ä¸ºæ•°æ®æ˜¯ä¸å­˜åœ¨çš„ã€‚</li>\n</ol>\n<h5 id=\"å¸ƒéš†è¿‡æ»¤å™¨åˆ é™¤é—®é¢˜\"><a href=\"#å¸ƒéš†è¿‡æ»¤å™¨åˆ é™¤é—®é¢˜\" class=\"headerlink\" title=\"å¸ƒéš†è¿‡æ»¤å™¨åˆ é™¤é—®é¢˜\"></a>å¸ƒéš†è¿‡æ»¤å™¨åˆ é™¤é—®é¢˜</h5><blockquote>\n<p>ç›´æ¥åˆ é™¤è‚¯å®šä¸è¡Œï¼Œå­˜åœ¨hashå†²çªï¼Œå­˜åœ¨è¯¯åˆ ã€‚</p>\n</blockquote>\n<ul>\n<li>å®šæ—¶ä»»åŠ¡ï¼Œå®šæœŸåˆ›å»ºä¸€ä¸ªæ–°çš„å¸ƒéš†è¿‡æ»¤å™¨ã€‚</li>\n</ul>\n<h5 id=\"å¦‚ä½•å‡å°‘å¸ƒéš†è¿‡æ»¤å™¨çš„è¯¯åˆ¤\"><a href=\"#å¦‚ä½•å‡å°‘å¸ƒéš†è¿‡æ»¤å™¨çš„è¯¯åˆ¤\" class=\"headerlink\" title=\"å¦‚ä½•å‡å°‘å¸ƒéš†è¿‡æ»¤å™¨çš„è¯¯åˆ¤\"></a>å¦‚ä½•å‡å°‘å¸ƒéš†è¿‡æ»¤å™¨çš„è¯¯åˆ¤</h5><ul>\n<li>å¢åŠ äºŒè¿›åˆ¶ä½æ•°ç»„çš„é•¿åº¦ã€‚è¿™æ ·ç»è¿‡hashåæ•°æ®ä¼šæ›´åŠ çš„ç¦»æ•£åŒ–ï¼Œå‡ºç°å†²çªçš„æ¦‚ç‡ä¼šå¤§å¤§é™ä½ã€‚</li>\n<li>å¢åŠ Hashçš„æ¬¡æ•°ï¼Œå˜ç›¸çš„å¢åŠ æ•°æ®ç‰¹å¾ã€‚ç‰¹å¾æ•°æ®è¶Šå¤šï¼Œå†²çªçš„æ¦‚ç‡è¶Šå°ã€‚</li>\n</ul>\n<h4 id=\"ç¼“å­˜å‡»ç©¿\"><a href=\"#ç¼“å­˜å‡»ç©¿\" class=\"headerlink\" title=\"ç¼“å­˜å‡»ç©¿\"></a>ç¼“å­˜å‡»ç©¿</h4><blockquote>\n<p><strong>ç¼“å­˜å‡»ç©¿</strong>æ˜¯æŒ‡ä¸€ä¸ª<code>key</code>éå¸¸çƒ­ç‚¹ï¼Œåœ¨ä¸åœçš„æ‰›ç€å¤§å¹¶å‘ï¼Œ<strong>å¤§å¹¶å‘</strong>é›†ä¸­å¯¹è¿™ä¸€ä¸ªç‚¹è¿›è¡Œè®¿é—®ï¼Œå½“è¿™ä¸ªkeyåœ¨å¤±æ•ˆçš„ç¬é—´ï¼ŒæŒç»­çš„<strong>å¤§å¹¶å‘</strong>å°±ç©¿ç ´ç¼“å­˜ï¼Œç›´æ¥è¯·æ±‚æ•°æ®åº“ï¼Œç¬é—´å¯¹æ•°æ®åº“çš„è®¿é—®å‹åŠ›å¢å¤§ã€‚</p>\n</blockquote>\n<ul>\n<li>å½“ç”¨æˆ·å‡ºç°<strong>å¤§å¹¶å‘</strong>è®¿é—®çš„æ—¶å€™ï¼Œåœ¨æŸ¥è¯¢ç¼“å­˜çš„æ—¶å€™å’ŒæŸ¥è¯¢æ•°æ®åº“çš„è¿‡ç¨‹åŠ é”ï¼Œåªèƒ½ç¬¬ä¸€ä¸ªè¿›æ¥çš„è¯·æ±‚è¿›è¡Œæ‰§è¡Œï¼Œå½“ç¬¬ä¸€ä¸ªè¯·æ±‚æŠŠè¯¥æ•°æ®æ”¾è¿›ç¼“å­˜ä¸­ï¼Œæ¥ä¸‹æ¥çš„è®¿é—®å°±ä¼šç›´æ¥é›†ä¸­ç¼“å­˜ï¼Œé˜²æ­¢äº†<strong>ç¼“å­˜å‡»ç©¿</strong>ã€‚å³æ ¹æ®keyè·å–valueå€¼ä¸ºç©ºæ—¶ï¼Œé”ä¸Šï¼Œä»æ•°æ®åº“ä¸­<code>load</code>æ•°æ®åå†é‡Šæ”¾é”ã€‚è‹¥å…¶å®ƒçº¿ç¨‹è·å–é”å¤±è´¥ï¼Œåˆ™ç­‰å¾…ä¸€æ®µæ—¶é—´åé‡è¯•ã€‚è¿™é‡Œè¦æ³¨æ„ï¼Œåˆ†å¸ƒå¼ç¯å¢ƒä¸­è¦ä½¿ç”¨<strong>åˆ†å¸ƒå¼é”</strong>ï¼Œ<strong>å•æœº</strong>çš„è¯ç”¨æ™®é€šçš„é”ï¼ˆ<code>synchronized</code>ã€<code>Lock</code>ï¼‰å°±å¤Ÿäº†ã€‚<ul>\n<li><strong>ä½¿ç”¨äº’æ–¥é”æ–¹æ¡ˆ</strong>ç¼“å­˜å¤±æ•ˆæ—¶ï¼Œä¸æ˜¯ç«‹å³å»åŠ è½½dbæ•°æ®ï¼Œè€Œæ˜¯å…ˆä½¿ç”¨æŸäº›å¸¦æˆåŠŸè¿”å›çš„åŸå­æ“ä½œå‘½ä»¤ï¼Œå¦‚(Redisçš„setnxï¼‰å»æ“ä½œï¼ŒæˆåŠŸçš„æ—¶å€™ï¼Œå†å»åŠ è½½dbæ•°æ®åº“æ•°æ®å’Œè®¾ç½®ç¼“å­˜ã€‚å¦åˆ™å°±å»é‡è¯•è·å–ç¼“å­˜ã€‚</li>\n<li><strong>æŒç»­ä¸è¿‡æœŸ</strong>,é€šè¿‡å®šæ—¶ä»»åŠ¡çš„æ–¹å¼åŒæ­¥æ•°æ®åˆ°ç¼“å­˜ä¸­ã€‚é˜²æ­¢çƒ­keyæ•°æ®è¿‡æœŸã€‚</li>\n</ul>\n</li>\n</ul>\n<h4 id=\"ç¼“å­˜é¢„çƒ­\"><a href=\"#ç¼“å­˜é¢„çƒ­\" class=\"headerlink\" title=\"ç¼“å­˜é¢„çƒ­\"></a>ç¼“å­˜é¢„çƒ­</h4><ul>\n<li>ç¼“å­˜é¢„çƒ­è¿™ä¸ªåº”è¯¥æ˜¯ä¸€ä¸ªæ¯”è¾ƒå¸¸è§çš„æ¦‚å¿µï¼Œç¼“å­˜é¢„çƒ­å°±æ˜¯ç³»ç»Ÿä¸Šçº¿åï¼Œå°†ç›¸å…³çš„ç¼“å­˜æ•°æ®ç›´æ¥åŠ è½½åˆ°ç¼“å­˜ç³»ç»Ÿã€‚è¿™æ ·å°±å¯ä»¥é¿å…åœ¨ç”¨æˆ·è¯·æ±‚çš„æ—¶å€™ï¼Œå…ˆæŸ¥è¯¢æ•°æ®åº“ï¼Œç„¶åå†å°†æ•°æ®ç¼“å­˜çš„é—®é¢˜ï¼ç”¨æˆ·ç›´æ¥æŸ¥è¯¢äº‹å…ˆè¢«é¢„çƒ­çš„ç¼“å­˜æ•°æ®ï¼</li>\n</ul>\n<h4 id=\"ç¼“å­˜æ›´æ–°\"><a href=\"#ç¼“å­˜æ›´æ–°\" class=\"headerlink\" title=\"ç¼“å­˜æ›´æ–°\"></a>ç¼“å­˜æ›´æ–°</h4><ul>\n<li>é™¤äº†ç¼“å­˜æœåŠ¡å™¨è‡ªå¸¦çš„ç¼“å­˜å¤±æ•ˆç­–ç•¥ä¹‹å¤–ï¼ˆRedisé»˜è®¤çš„æœ‰6ä¸­ç­–ç•¥å¯ä¾›é€‰æ‹©ï¼‰ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥æ ¹æ®å…·ä½“çš„ä¸šåŠ¡éœ€æ±‚è¿›è¡Œè‡ªå®šä¹‰çš„ç¼“å­˜æ·˜æ±°ï¼Œå¸¸è§çš„ç­–ç•¥æœ‰ä¸¤ç§ï¼š<ul>\n<li>å®šæ—¶å»æ¸…ç†è¿‡æœŸçš„ç¼“å­˜ï¼›</li>\n<li>å½“æœ‰ç”¨æˆ·è¯·æ±‚è¿‡æ¥æ—¶ï¼Œå†åˆ¤æ–­è¿™ä¸ªè¯·æ±‚æ‰€ç”¨åˆ°çš„ç¼“å­˜æ˜¯å¦è¿‡æœŸï¼Œè¿‡æœŸçš„è¯å°±å»åº•å±‚ç³»ç»Ÿå¾—åˆ°æ–°æ•°æ®å¹¶æ›´æ–°ç¼“å­˜ã€‚</li>\n</ul>\n</li>\n<li>ä¸¤è€…å„æœ‰ä¼˜åŠ£ï¼Œç¬¬ä¸€ç§çš„ç¼ºç‚¹æ˜¯ç»´æŠ¤å¤§é‡ç¼“å­˜çš„keyæ˜¯æ¯”è¾ƒéº»çƒ¦çš„ï¼Œç¬¬äºŒç§çš„ç¼ºç‚¹å°±æ˜¯æ¯æ¬¡ç”¨æˆ·è¯·æ±‚è¿‡æ¥éƒ½è¦åˆ¤æ–­ç¼“å­˜å¤±æ•ˆï¼Œé€»è¾‘ç›¸å¯¹æ¯”è¾ƒå¤æ‚ï¼å…·ä½“ç”¨å“ªç§æ–¹æ¡ˆï¼Œå¤§å®¶å¯ä»¥æ ¹æ®è‡ªå·±çš„åº”ç”¨åœºæ™¯æ¥æƒè¡¡ã€‚</li>\n</ul>\n<h4 id=\"ç¼“å­˜é™çº§\"><a href=\"#ç¼“å­˜é™çº§\" class=\"headerlink\" title=\"ç¼“å­˜é™çº§\"></a>ç¼“å­˜é™çº§</h4><ul>\n<li>å½“è®¿é—®é‡å‰§å¢ã€æœåŠ¡å‡ºç°é—®é¢˜ï¼ˆå¦‚å“åº”æ—¶é—´æ…¢æˆ–ä¸å“åº”ï¼‰æˆ–éæ ¸å¿ƒæœåŠ¡å½±å“åˆ°æ ¸å¿ƒæµç¨‹çš„æ€§èƒ½æ—¶ï¼Œä»ç„¶éœ€è¦ä¿è¯æœåŠ¡è¿˜æ˜¯å¯ç”¨çš„ï¼Œå³ä½¿æ˜¯æœ‰æŸæœåŠ¡ã€‚ç³»ç»Ÿå¯ä»¥æ ¹æ®ä¸€äº›å…³é”®æ•°æ®è¿›è¡Œè‡ªåŠ¨é™çº§ï¼Œä¹Ÿå¯ä»¥é…ç½®å¼€å…³å®ç°äººå·¥é™çº§ã€‚<ul>\n<li>ä»¥å‚è€ƒæ—¥å¿—çº§åˆ«è®¾ç½®é¢„æ¡ˆï¼š<ul>\n<li>ä¸€èˆ¬ï¼šæ¯”å¦‚æœ‰äº›æœåŠ¡å¶å°”å› ä¸ºç½‘ç»œæŠ–åŠ¨æˆ–è€…æœåŠ¡æ­£åœ¨ä¸Šçº¿è€Œè¶…æ—¶ï¼Œå¯ä»¥è‡ªåŠ¨é™çº§ï¼›</li>\n<li>è­¦å‘Šï¼šæœ‰äº›æœåŠ¡åœ¨ä¸€æ®µæ—¶é—´å†…æˆåŠŸç‡æœ‰æ³¢åŠ¨ï¼ˆå¦‚åœ¨95~100%ä¹‹é—´ï¼‰ï¼Œå¯ä»¥è‡ªåŠ¨é™çº§æˆ–äººå·¥é™çº§ï¼Œå¹¶å‘é€å‘Šè­¦ï¼›</li>\n<li>é”™è¯¯ï¼šæ¯”å¦‚å¯ç”¨ç‡ä½äº90%ï¼Œæˆ–è€…æ•°æ®åº“è¿æ¥æ± è¢«æ‰“çˆ†äº†ï¼Œæˆ–è€…è®¿é—®é‡çªç„¶çŒ›å¢åˆ°ç³»ç»Ÿèƒ½æ‰¿å—çš„æœ€å¤§é˜€å€¼ï¼Œæ­¤æ—¶å¯ä»¥æ ¹æ®æƒ…å†µè‡ªåŠ¨é™çº§æˆ–è€…äººå·¥é™çº§ï¼›</li>\n<li>ä¸¥é‡é”™è¯¯ï¼šæ¯”å¦‚å› ä¸ºç‰¹æ®ŠåŸå› æ•°æ®é”™è¯¯äº†ï¼Œæ­¤æ—¶éœ€è¦ç´§æ€¥äººå·¥é™çº§ã€‚</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>æœåŠ¡é™çº§çš„ç›®çš„ï¼Œæ˜¯ä¸ºäº†é˜²æ­¢RedisæœåŠ¡æ•…éšœï¼Œå¯¼è‡´æ•°æ®åº“è·Ÿç€ä¸€èµ·å‘ç”Ÿé›ªå´©é—®é¢˜ã€‚å› æ­¤ï¼Œå¯¹äºä¸é‡è¦çš„ç¼“å­˜æ•°æ®ï¼Œå¯ä»¥é‡‡å–æœåŠ¡é™çº§ç­–ç•¥ï¼Œä¾‹å¦‚ä¸€ä¸ªæ¯”è¾ƒå¸¸è§çš„åšæ³•å°±æ˜¯ï¼ŒRediså‡ºç°é—®é¢˜ï¼Œä¸å»æ•°æ®åº“æŸ¥è¯¢ï¼Œè€Œæ˜¯ç›´æ¥è¿”å›é»˜è®¤å€¼ç»™ç”¨æˆ·ã€‚</li>\n</ul>\n<h4 id=\"æ•°æ®ä¸€è‡´æ€§\"><a href=\"#æ•°æ®ä¸€è‡´æ€§\" class=\"headerlink\" title=\"æ•°æ®ä¸€è‡´æ€§\"></a>æ•°æ®ä¸€è‡´æ€§</h4><blockquote>\n<p>ç¼“å­˜ä¸€è‡´æ€§é—®é¢˜ä½œä¸ºæ—¥å¸¸å¼€å‘é•¿æœŸå­˜åœ¨çš„é—®é¢˜ã€‚</p>\n</blockquote>\n<h5 id=\"ç¼“å­˜å¸¸è§çš„æ“ä½œ\"><a href=\"#ç¼“å­˜å¸¸è§çš„æ“ä½œ\" class=\"headerlink\" title=\"ç¼“å­˜å¸¸è§çš„æ“ä½œ\"></a>ç¼“å­˜å¸¸è§çš„æ“ä½œ</h5><ul>\n<li><p>å†™å…¥ï¼šç¼“å­˜å’Œæ•°æ®åº“æ˜¯ä¸¤ä¸ªä¸åŒçš„ç»„ä»¶ï¼Œåªè¦æ¶‰åŠåŒå†™ï¼Œå°±å­˜åœ¨åªæœ‰ä¸€ä¸ªå†™æˆåŠŸçš„å¯èƒ½æ€§ï¼Œé€ æˆæ•°æ®ä¸ä¸€è‡´ã€‚</p>\n</li>\n<li><p>æ›´æ–°ï¼šæ›´æ–°çš„æƒ…å†µç±»ä¼¼ï¼Œéœ€è¦æ›´æ–°ä¸¤ä¸ªä¸åŒçš„ç»„ä»¶ã€‚</p>\n</li>\n<li><p>è¯»å–ï¼šè¯»å–è¦ä¿è¯ä»ç¼“å­˜ä¸­è¯»åˆ°çš„ä¿¡æ¯æ˜¯æœ€æ–°çš„ï¼Œæ˜¯å’Œæ•°æ®åº“ä¸­çš„æ˜¯ä¸€è‡´çš„ã€‚</p>\n</li>\n<li><p>åˆ é™¤ï¼šå½“åˆ é™¤æ•°æ®åº“è®°å½•çš„æ—¶å€™ï¼Œå¦‚ä½•æŠŠç¼“å­˜ä¸­çš„æ•°æ®ä¹Ÿåˆ æ‰ï¼Ÿ</p>\n</li>\n</ul>\n<h5 id=\"åŒæ­¥ç›´å†™\"><a href=\"#åŒæ­¥ç›´å†™\" class=\"headerlink\" title=\"åŒæ­¥ç›´å†™\"></a>åŒæ­¥ç›´å†™</h5><ul>\n<li>å†™æ•°æ®åº“çš„æ—¶å€™ä¹Ÿå†™å…¥ç¼“å­˜ï¼Œé€šè¿‡ä»£ç æ£€æŸ¥æœºåˆ¶ä½¿æ•°æ®åº“å’Œç¼“å­˜æ•°æ®ç»Ÿä¸€ã€‚é€šå¸¸ä¼šé‡‡ç”¨äº‹åŠ¡ã€é‡è¯•æœºåˆ¶æ¥ä¿è¯æ•°æ®ã€‚</li>\n</ul>\n<h5 id=\"å»¶æ—¶åŒåˆ \"><a href=\"#å»¶æ—¶åŒåˆ \" class=\"headerlink\" title=\"å»¶æ—¶åŒåˆ \"></a>å»¶æ—¶åŒåˆ </h5><ul>\n<li>å…ˆæ›´æ–°å†åˆ é™¤ï¼Œä½†æ˜¯æ‰§è¡Œåˆ é™¤åŠ¨ä½œï¼Œåœ¨ä¸ä¹…ä¹‹åå†æ‰§è¡Œä¸€æ¬¡ï¼Œæ¯”å¦‚ 1-5 ç§’ä¹‹åã€‚</li>\n</ul>\n<h5 id=\"é›†ä¸­æ›´æ–°\"><a href=\"#é›†ä¸­æ›´æ–°\" class=\"headerlink\" title=\"é›†ä¸­æ›´æ–°\"></a>é›†ä¸­æ›´æ–°</h5><ul>\n<li>å¼±åŒ–æ•°æ®åº“ï¼Œå°†æ•°æ®ä¼˜å…ˆå­˜æ”¾åˆ°redisæ€»ï¼Œåœ¨é€šè¿‡å®šæ—¶å™¨æˆ–æ‰«æé€»è¾‘ä»£ç å°†æ•°æ®åŒæ­¥åˆ°mysqlä¸­ã€‚</li>\n</ul>\n<h5 id=\"è§¦å‘å¼åŠ è½½\"><a href=\"#è§¦å‘å¼åŠ è½½\" class=\"headerlink\" title=\"è§¦å‘å¼åŠ è½½\"></a>è§¦å‘å¼åŠ è½½</h5><blockquote>\n<p>ä½¿ç”¨æ‡’åŠ è½½çš„æ–¹å¼ï¼Œå¯ä»¥è®©ç¼“å­˜çš„åŒæ­¥å˜å¾—éå¸¸ç®€å•</p>\n</blockquote>\n<ul>\n<li><p>å½“è¯»å–ç¼“å­˜çš„æ—¶å€™ï¼Œå¦‚æœç¼“å­˜é‡Œæ²¡æœ‰ç›¸å…³æ•°æ®ï¼Œåˆ™æ‰§è¡Œç›¸å…³çš„ä¸šåŠ¡é€»è¾‘ï¼Œæ„é€ ç¼“å­˜æ•°æ®å­˜å…¥åˆ°ç¼“å­˜ç³»ç»Ÿï¼›</p>\n</li>\n<li><p>å½“ä¸ç¼“å­˜é¡¹ç›¸å…³çš„èµ„æºæœ‰å˜åŠ¨ï¼Œåˆ™å…ˆåˆ é™¤ç›¸åº”çš„ç¼“å­˜é¡¹ï¼Œç„¶åå†å¯¹èµ„æºè¿›è¡Œæ›´æ–°ï¼Œè¿™ä¸ªæ—¶å€™ï¼Œå³ä½¿æ˜¯èµ„æºæ›´æ–°å¤±è´¥ï¼Œä¹Ÿæ˜¯æ²¡æœ‰é—®é¢˜çš„ã€‚</p>\n</li>\n</ul>\n<h4 id=\"ç¼“å­˜çƒ­key\"><a href=\"#ç¼“å­˜çƒ­key\" class=\"headerlink\" title=\"ç¼“å­˜çƒ­key\"></a>ç¼“å­˜çƒ­key</h4><blockquote>\n<p><strong>ä»€ä¹ˆæ˜¯çƒ­Keyå‘¢</strong>ï¼Ÿåœ¨Redisä¸­ï¼Œæˆ‘ä»¬æŠŠè®¿é—®é¢‘ç‡é«˜çš„keyï¼Œç§°ä¸ºçƒ­ç‚¹keyã€‚</p>\n</blockquote>\n<ul>\n<li>å¦‚æœæŸä¸€çƒ­ç‚¹keyçš„è¯·æ±‚åˆ°æœåŠ¡å™¨ä¸»æœºæ—¶ï¼Œç”±äºè¯·æ±‚é‡ç‰¹åˆ«å¤§ï¼Œå¯èƒ½ä¼šå¯¼è‡´ä¸»æœºèµ„æºä¸è¶³ï¼Œç”šè‡³å®•æœºï¼Œä»è€Œå½±å“æ­£å¸¸çš„æœåŠ¡ã€‚<ul>\n<li>Redisé›†ç¾¤æ‰©å®¹ï¼šå¢åŠ åˆ†ç‰‡å‰¯æœ¬ï¼Œå‡è¡¡è¯»æµé‡ï¼›</li>\n<li>ä½¿ç”¨äºŒçº§ç¼“å­˜ï¼Œå³JVMæœ¬åœ°ç¼“å­˜,å‡å°‘Redisçš„è¯»è¯·æ±‚ã€‚</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"Redis-çš„çº¿ç¨‹æ¨¡å‹\"><a href=\"#Redis-çš„çº¿ç¨‹æ¨¡å‹\" class=\"headerlink\" title=\"Redis çš„çº¿ç¨‹æ¨¡å‹\"></a>Redis çš„çº¿ç¨‹æ¨¡å‹</h3><ul>\n<li>redis å†…éƒ¨ä½¿â½¤â½‚ä»¶äº‹ä»¶å¤„ç†å™¨<code>file event handler</code>ï¼Œè¿™ä¸ªâ½‚ä»¶äº‹ä»¶å¤„ç†å™¨æ˜¯å•çº¿ç¨‹çš„ï¼Œæ‰€ä»¥redis æ‰å«åšå•çº¿ç¨‹çš„æ¨¡å‹ã€‚å®ƒé‡‡â½¤ IO å¤šè·¯å¤â½¤æœºåˆ¶åŒæ—¶ç›‘å¬å¤šä¸ª socketï¼Œæ ¹æ® socket ä¸Šçš„äº‹ä»¶æ¥é€‰æ‹©å¯¹åº”çš„äº‹ä»¶å¤„ç†å™¨è¿›â¾å¤„ç†ã€‚</li>\n</ul>\n<h4 id=\"å•çº¿ç¨‹çš„Redisä¸ºä»€ä¹ˆè¿™ä¹ˆå¿«\"><a href=\"#å•çº¿ç¨‹çš„Redisä¸ºä»€ä¹ˆè¿™ä¹ˆå¿«\" class=\"headerlink\" title=\"å•çº¿ç¨‹çš„Redisä¸ºä»€ä¹ˆè¿™ä¹ˆå¿«\"></a>å•çº¿ç¨‹çš„Redisä¸ºä»€ä¹ˆè¿™ä¹ˆå¿«</h4><ul>\n<li>å­˜å†…å­˜æ“ä½œã€‚</li>\n<li>å•çº¿ç¨‹æ“ä½œï¼Œé¿å…å¹³å‡¡çš„ä¸Šä¸‹æ–‡åˆ‡æ¢ã€‚</li>\n<li>é‡‡ç”¨äº†éé˜»å¡I/Oå¤šè·¯å¤ç”¨æ“ä½œã€‚ï¼ˆè¿™é‡Œçš„I/Oæ˜¯æŒ‡ç½‘ç»œI/Oï¼‰</li>\n</ul>\n<h3 id=\"Redisçš„è¿‡æœŸç­–ç•¥ä»¥åŠå†…å­˜æ·˜æ±°æœºåˆ¶\"><a href=\"#Redisçš„è¿‡æœŸç­–ç•¥ä»¥åŠå†…å­˜æ·˜æ±°æœºåˆ¶\" class=\"headerlink\" title=\"Redisçš„è¿‡æœŸç­–ç•¥ä»¥åŠå†…å­˜æ·˜æ±°æœºåˆ¶\"></a>Redisçš„è¿‡æœŸç­–ç•¥ä»¥åŠå†…å­˜æ·˜æ±°æœºåˆ¶</h3><ul>\n<li><p>redisé‡‡ç”¨çš„æ˜¯å®šæœŸåˆ é™¤+æƒ°æ€§åˆ é™¤ç­–ç•¥ã€‚</p>\n<ul>\n<li>å®šæœŸåˆ é™¤ï¼Œredisé»˜è®¤æ¯ä¸ª100msæ£€æŸ¥ï¼Œæ˜¯å¦æœ‰è¿‡æœŸçš„key,æœ‰è¿‡æœŸkeyåˆ™åˆ é™¤ã€‚éœ€è¦è¯´æ˜çš„æ˜¯ï¼Œredisä¸æ˜¯æ¯ä¸ª100mså°†æ‰€æœ‰çš„keyæ£€æŸ¥ä¸€æ¬¡ï¼Œè€Œæ˜¯éšæœºæŠ½å–è¿›è¡Œæ£€æŸ¥(å¦‚æœæ¯éš”100ms,å…¨éƒ¨keyè¿›è¡Œæ£€æŸ¥ï¼Œrediså²‚ä¸æ˜¯å¡æ­»)ã€‚å› æ­¤ï¼Œå¦‚æœåªé‡‡ç”¨å®šæœŸåˆ é™¤ç­–ç•¥ï¼Œä¼šå¯¼è‡´å¾ˆå¤škeyåˆ°æ—¶é—´æ²¡æœ‰åˆ é™¤ã€‚æƒ°æ€§åˆ é™¤æ´¾ä¸Šç”¨åœºã€‚ä¹Ÿå°±æ˜¯è¯´åœ¨ä½ è·å–æŸä¸ªkeyçš„æ—¶å€™ï¼Œredisä¼šæ£€æŸ¥ä¸€ä¸‹ï¼Œè¿™ä¸ªkeyå¦‚æœè®¾ç½®äº†è¿‡æœŸæ—¶é—´é‚£ä¹ˆæ˜¯å¦è¿‡æœŸäº†ï¼Ÿå¦‚æœè¿‡æœŸäº†æ­¤æ—¶å°±ä¼šåˆ é™¤ã€‚</li>\n</ul>\n</li>\n<li><p>å®šæ—¶åˆ é™¤</p>\n<ul>\n<li>æ¯ä¸ªè®¾ç½®è¿‡æœŸæ—¶é—´çš„keyéƒ½éœ€è¦åˆ›å»ºä¸€ä¸ªå®šæ—¶å™¨ï¼Œåˆ°è¿‡æœŸæ—¶é—´å°±ä¼šç«‹å³å¯¹keyè¿›è¡Œæ¸…é™¤ã€‚è¯¥ç­–ç•¥å¯ä»¥ç«‹å³æ¸…é™¤è¿‡æœŸçš„æ•°æ®ï¼Œå¯¹å†…å­˜å¾ˆå‹å¥½ï¼›ä½†æ˜¯<strong>ä¼šå ç”¨å¤§é‡çš„CPUèµ„æºå»å¤„ç†è¿‡æœŸçš„æ•°æ®</strong>ï¼Œä»è€Œå½±å“ç¼“å­˜çš„å“åº”æ—¶é—´å’Œååé‡ã€‚</li>\n</ul>\n</li>\n<li><p>å†…å­˜æ·˜æ±°ç­–ç•¥</p>\n</li>\n</ul>\n<blockquote>\n<p>å½“Rediså†…å­˜å¿«è€—å°½æ—¶ï¼ŒRedisä¼šå¯åŠ¨å†…å­˜æ·˜æ±°æœºåˆ¶ï¼Œå°†éƒ¨åˆ†keyæ¸…æ‰ä»¥è…¾å‡ºå†…å­˜ã€‚</p>\n</blockquote>\n<ul>\n<li>ä¸»è¦æœ‰5ç§å¤„ç†æœºåˆ¶<ul>\n<li>LRU æœ€è¿‘æœ€å°‘ä½¿ç”¨</li>\n<li>LFU æœ€è¿‘ä½¿ç”¨é¢‘ç‡ä½</li>\n<li>Random éšæœºæ·˜æ±°</li>\n<li>TTL è¿‡æœŸæ—¶é—´</li>\n<li>No-Enviction é©±é€ï¼ˆä»€ä¹ˆéƒ½ä¸åšç›´æ¥è¿”å›é”™è¯¯ï¼‰</li>\n</ul>\n</li>\n<li><strong>volatile-lru</strong>ï¼šä»å·²è®¾ç½®è¿‡æœŸæ—¶é—´çš„æ•°æ®é›†ï¼ˆserver.db[i].expiresï¼‰ä¸­æŒ‘é€‰æœ€è¿‘æœ€å°‘ä½¿ç”¨çš„æ•°æ®æ·˜æ±°ã€‚</li>\n<li><strong>volatile-ttl</strong>ï¼šä»å·²è®¾ç½®è¿‡æœŸæ—¶é—´çš„æ•°æ®é›†ï¼ˆserver.db[i].expiresï¼‰ä¸­æŒ‘é€‰å°†è¦è¿‡æœŸçš„æ•°æ®æ·˜æ±°ã€‚</li>\n<li><strong>volatile-random</strong>ï¼šä»å·²è®¾ç½®è¿‡æœŸæ—¶é—´çš„æ•°æ®é›†ï¼ˆserver.db[i].expiresï¼‰ä¸­ä»»æ„é€‰æ‹©æ•°æ®æ·˜æ±°ã€‚</li>\n<li><strong>volatile-lfu</strong>ï¼š4.0ç‰ˆæœ¬æ–°å¢ï¼Œå½“å†…å­˜ä¸è¶³ä»¥å®¹çº³æ–°å†™å…¥æ•°æ®æ—¶ï¼Œåœ¨è¿‡æœŸçš„keyä¸­ï¼Œä½¿ç”¨LFUç®—æ³•è¿›è¡Œåˆ é™¤keyã€‚</li>\n<li><strong>allkeys-lru</strong>ï¼šä»æ•°æ®é›†ï¼ˆserver.db[i].dictï¼‰ä¸­æŒ‘é€‰æœ€è¿‘æœ€å°‘ä½¿ç”¨çš„æ•°æ®æ·˜æ±°ã€‚</li>\n<li><strong>allkeys-lfu</strong>ï¼š4.0ç‰ˆæœ¬æ–°å¢ï¼Œå½“å†…å­˜ä¸è¶³ä»¥å®¹çº³æ–°å†™å…¥æ•°æ®æ—¶ï¼Œä»æ‰€æœ‰keyä¸­ä½¿ç”¨LFUç®—æ³•è¿›è¡Œæ·˜æ±°ã€‚</li>\n<li><strong>allkeys-random</strong>ï¼šä»æ•°æ®é›†ï¼ˆserver.db[i].dictï¼‰ä¸­ä»»æ„é€‰æ‹©æ•°æ®æ·˜æ±°ã€‚</li>\n<li><strong>no-enviction</strong>ï¼ˆé©±é€ï¼‰ï¼šç¦æ­¢é©±é€æ•°æ®ï¼Œæ–°å†™å…¥æ“ä½œä¼šæŠ¥é”™ã€‚</li>\n<li>å¦‚æœæ²¡æœ‰è®¾ç½® expire çš„key, ä¸æ»¡è¶³å…ˆå†³æ¡ä»¶(prerequisites); é‚£ä¹ˆ volatile-lru, volatile-random å’Œvolatile-ttl ç­–ç•¥çš„è¡Œä¸º, å’Œ noeviction(ä¸åˆ é™¤) åŸºæœ¬ä¸Šä¸€è‡´ã€‚</li>\n</ul>\n<h4 id=\"Redis-çš„è¿‡æœŸç­–ç•¥å’Œå†…å­˜æ·˜æ±°æœºåˆ¶æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ\"><a href=\"#Redis-çš„è¿‡æœŸç­–ç•¥å’Œå†…å­˜æ·˜æ±°æœºåˆ¶æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ\" class=\"headerlink\" title=\"Redis çš„è¿‡æœŸç­–ç•¥å’Œå†…å­˜æ·˜æ±°æœºåˆ¶æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ\"></a>Redis çš„è¿‡æœŸç­–ç•¥å’Œå†…å­˜æ·˜æ±°æœºåˆ¶æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</h4><ul>\n<li><p>æ–°å¢ Redis ç¼“å­˜æ—¶å¯ä»¥è®¾ç½®ç¼“å­˜çš„è¿‡æœŸæ—¶é—´ï¼Œè¯¥æ—¶é—´ä¿è¯äº†æ•°æ®åœ¨è§„å®šçš„æ—¶é—´å†…å¤±æ•ˆã€‚é€šè¿‡è¿™ç§æ–¹å¼å¯ä»¥å®ŒæˆæŸäº›åœºæ™¯çš„ä¸šåŠ¡å¼€å‘ã€‚å¯¹å¯¹äºå·²ç»è¿‡æœŸçš„æ•°æ®ï¼ŒRedis å°†ä½¿ç”¨ä¸¤ç§ç­–ç•¥æ¥åˆ é™¤è¿™äº›è¿‡æœŸé”®ï¼Œå®ƒä»¬åˆ†åˆ«æ˜¯æƒ°æ€§åˆ é™¤å’Œå®šæœŸåˆ é™¤ã€‚</p>\n</li>\n<li><p>æƒ°æ€§åˆ é™¤æ˜¯æŒ‡ Redis æœåŠ¡å™¨ä¸ä¸»åŠ¨åˆ é™¤è¿‡æœŸçš„é”®å€¼ï¼Œè€Œæ˜¯å½“è®¿é—®é”®å€¼æ—¶ï¼Œå†æ£€æŸ¥å½“å‰çš„é”®å€¼æ˜¯å¦è¿‡æœŸï¼Œå¦‚æœè¿‡æœŸåˆ™æ‰§è¡Œåˆ é™¤å¹¶è¿”å› null ç»™å®¢æˆ·ç«¯ï¼›å¦‚æœæ²¡è¿‡æœŸåˆ™æ­£å¸¸è¿”å›å€¼ä¿¡æ¯ç»™å®¢æˆ·ç«¯ã€‚</p>\n</li>\n<li><p>å®šæœŸåˆ é™¤æ˜¯æŒ‡ Redis æœåŠ¡å™¨æ¯éš”ä¸€æ®µæ—¶é—´ä¼šæ£€æŸ¥ä¸€ä¸‹æ•°æ®åº“ï¼Œçœ‹çœ‹æ˜¯å¦æœ‰è¿‡æœŸé”®å¯ä»¥è¢«æ¸…é™¤ã€‚é»˜è®¤æƒ…å†µä¸‹ Redis å®šæœŸæ£€æŸ¥çš„é¢‘ç‡æ˜¯æ¯ç§’æ‰«æ 10 æ¬¡ï¼Œç”¨äºå®šæœŸæ¸…é™¤è¿‡æœŸé”®ã€‚å½“ç„¶æ­¤å€¼è¿˜å¯ä»¥é€šè¿‡é…ç½®æ–‡ä»¶è¿›è¡Œè®¾ç½®ï¼Œåœ¨ redis.conf ä¸­ä¿®æ”¹é…ç½®â€œhzâ€å³å¯ï¼Œé»˜è®¤çš„å€¼ä¸ºâ€œhz 10â€ã€‚Redis æœåŠ¡å™¨ä¸ºäº†ä¿è¯è¿‡æœŸåˆ é™¤ç­–ç•¥ä¸ä¼šå¯¼è‡´çº¿ç¨‹å¡æ­»ï¼Œä¼šç»™è¿‡æœŸæ‰«æå¢åŠ äº†æœ€å¤§æ‰§è¡Œæ—¶é—´ä¸º 25msã€‚</p>\n</li>\n<li><p>å½“ Redis çš„å†…å­˜è¶…è¿‡æœ€å¤§å…è®¸çš„å†…å­˜ä¹‹åï¼ŒRedis ä¼šè§¦å‘å†…å­˜æ·˜æ±°ç­–ç•¥ï¼Œè¿™å’Œè¿‡æœŸç­–ç•¥æ˜¯å®Œå…¨ä¸åŒçš„ä¸¤ä¸ªæ¦‚å¿µï¼Œç»å¸¸æœ‰äººæŠŠäºŒè€…ææ··ï¼Œè¿™ä¸¤è€…ä¸€ä¸ªæ˜¯åœ¨æ­£å¸¸æƒ…å†µä¸‹æ¸…é™¤è¿‡æœŸé”®ï¼Œä¸€ä¸ªæ˜¯åœ¨éæ­£å¸¸æƒ…å†µä¸‹ä¸ºäº†ä¿è¯ Redis é¡ºåˆ©è¿è¡Œçš„ä¿æŠ¤ç­–ç•¥ã€‚</p>\n</li>\n</ul>\n<a id=\"more\"></a>\n\n<h3 id=\"Redisäº‹åŠ¡\"><a href=\"#Redisäº‹åŠ¡\" class=\"headerlink\" title=\"Redisäº‹åŠ¡\"></a>Redisäº‹åŠ¡</h3><blockquote>\n<p>ä¸¥æ ¼ä¸Šæ¥è¯´redisæ˜¯ä¼ªäº‹ç‰©ï¼Œ</p>\n</blockquote>\n<ul>\n<li>Redisäº‹åŠ¡åŠŸèƒ½æ˜¯é€šè¿‡MULTIã€EXECã€DISCARDå’ŒWATCH å››ä¸ªåŸè¯­å®ç°çš„ã€‚Redisä¼šå°†ä¸€ä¸ªäº‹åŠ¡ä¸­çš„æ‰€æœ‰å‘½ä»¤åºåˆ—åŒ–ï¼Œç„¶åæŒ‰é¡ºåºæ‰§è¡Œã€‚<ol>\n<li>redis ä¸æ”¯æŒå›æ»šâ€œRedis åœ¨äº‹åŠ¡å¤±è´¥æ—¶ä¸è¿›è¡Œå›æ»šï¼Œè€Œæ˜¯ç»§ç»­æ‰§è¡Œä½™ä¸‹çš„å‘½ä»¤â€ï¼Œ æ‰€ä»¥ Redis çš„å†…éƒ¨å¯ä»¥ä¿æŒç®€å•ä¸”å¿«é€Ÿã€‚</li>\n<li>å¦‚æœåœ¨ä¸€ä¸ªäº‹åŠ¡ä¸­çš„å‘½ä»¤å‡ºç°é”™è¯¯ï¼Œé‚£ä¹ˆæ‰€æœ‰çš„å‘½ä»¤éƒ½ä¸ä¼šæ‰§è¡Œï¼›</li>\n<li>å¦‚æœåœ¨ä¸€ä¸ªäº‹åŠ¡ä¸­å‡ºç°è¿è¡Œé”™è¯¯ï¼Œé‚£ä¹ˆæ­£ç¡®çš„å‘½ä»¤ä¼šè¢«æ‰§è¡Œã€‚</li>\n</ol>\n</li>\n<li>MULTIå‘½ä»¤ç”¨äºå¼€å¯ä¸€ä¸ªäº‹åŠ¡ï¼Œå®ƒæ€»æ˜¯è¿”å›OKã€‚ MULTIæ‰§è¡Œä¹‹åï¼Œå®¢æˆ·ç«¯å¯ä»¥ç»§ç»­å‘æœåŠ¡å™¨å‘é€ä»»æ„å¤šæ¡å‘½ä»¤ï¼Œè¿™äº›å‘½ä»¤ä¸ä¼šç«‹å³è¢«æ‰§è¡Œï¼Œè€Œæ˜¯è¢«æ”¾åˆ°ä¸€ä¸ªé˜Ÿåˆ—ä¸­ï¼Œå½“EXECå‘½ä»¤è¢«è°ƒç”¨æ—¶ï¼Œæ‰€æœ‰é˜Ÿåˆ—ä¸­çš„å‘½ä»¤æ‰ä¼šè¢«æ‰§è¡Œã€‚</li>\n<li>EXECï¼šæ‰§è¡Œæ‰€æœ‰äº‹åŠ¡å—å†…çš„å‘½ä»¤ã€‚è¿”å›äº‹åŠ¡å—å†…æ‰€æœ‰å‘½ä»¤çš„è¿”å›å€¼ï¼ŒæŒ‰å‘½ä»¤æ‰§è¡Œçš„å…ˆåé¡ºåºæ’åˆ—ã€‚å½“æ“ä½œè¢«æ‰“æ–­æ—¶ï¼Œè¿”å›ç©ºå€¼ nil ã€‚</li>\n<li>é€šè¿‡è°ƒç”¨DISCARDï¼Œå®¢æˆ·ç«¯å¯ä»¥æ¸…ç©ºäº‹åŠ¡é˜Ÿåˆ—ï¼Œå¹¶æ”¾å¼ƒæ‰§è¡Œäº‹åŠ¡ï¼Œ å¹¶ä¸”å®¢æˆ·ç«¯ä¼šä»äº‹åŠ¡çŠ¶æ€ä¸­é€€å‡ºã€‚</li>\n<li>WATCH å‘½ä»¤å¯ä»¥ä¸º Redis äº‹åŠ¡æä¾› check-and-set ï¼ˆCASï¼‰è¡Œä¸ºã€‚ å¯ä»¥ç›‘æ§ä¸€ä¸ªæˆ–å¤šä¸ªé”®ï¼Œä¸€æ—¦å…¶ä¸­æœ‰ä¸€ä¸ªé”®è¢«ä¿®æ”¹ï¼ˆæˆ–åˆ é™¤ï¼‰ï¼Œä¹‹åçš„äº‹åŠ¡å°±ä¸ä¼šæ‰§è¡Œï¼Œç›‘æ§ä¸€ç›´æŒç»­åˆ°EXECå‘½ä»¤ã€‚</li>\n</ul>\n<h4 id=\"ä¸ºä»€ä¹ˆRedisçš„æ“ä½œæ˜¯åŸå­æ€§çš„ï¼Œæ€ä¹ˆä¿è¯åŸå­æ€§çš„ï¼Ÿ\"><a href=\"#ä¸ºä»€ä¹ˆRedisçš„æ“ä½œæ˜¯åŸå­æ€§çš„ï¼Œæ€ä¹ˆä¿è¯åŸå­æ€§çš„ï¼Ÿ\" class=\"headerlink\" title=\"ä¸ºä»€ä¹ˆRedisçš„æ“ä½œæ˜¯åŸå­æ€§çš„ï¼Œæ€ä¹ˆä¿è¯åŸå­æ€§çš„ï¼Ÿ\"></a>ä¸ºä»€ä¹ˆRedisçš„æ“ä½œæ˜¯åŸå­æ€§çš„ï¼Œæ€ä¹ˆä¿è¯åŸå­æ€§çš„ï¼Ÿ</h4><ul>\n<li>å¯¹äºRedisè€Œè¨€ï¼Œå‘½ä»¤çš„åŸå­æ€§æŒ‡çš„æ˜¯ï¼šä¸€ä¸ªæ“ä½œçš„ä¸å¯ä»¥å†åˆ†ï¼Œæ“ä½œè¦ä¹ˆæ‰§è¡Œï¼Œè¦ä¹ˆä¸æ‰§è¡Œã€‚Redisçš„æ“ä½œä¹‹æ‰€ä»¥æ˜¯åŸå­æ€§çš„ï¼Œæ˜¯å› ä¸ºRedisæ˜¯å•çº¿ç¨‹çš„ã€‚</li>\n<li>Redisæœ¬èº«æä¾›çš„æ‰€æœ‰APIéƒ½æ˜¯åŸå­æ“ä½œï¼ŒRedisä¸­çš„äº‹åŠ¡å…¶å®æ˜¯è¦ä¿è¯æ‰¹é‡æ“ä½œçš„åŸå­æ€§ã€‚</li>\n<li>ä½¿ç”¨Redisçš„äº‹åŠ¡ï¼Œæˆ–è€…ä½¿ç”¨Redis+Luaçš„æ–¹å¼å®ç°ã€‚</li>\n</ul>\n<figure class=\"highlight lua\"><table><tr><td class=\"code\"><pre><span class=\"line\">// å®¢æˆ·ç«¯é™æµæ“ä½œ</span><br><span class=\"line\">//è·å–ipå¯¹åº”çš„è®¿é—®æ¬¡æ•°</span><br><span class=\"line\">current = GET(ip)</span><br><span class=\"line\">//å¦‚æœè¶…è¿‡è®¿é—®æ¬¡æ•°è¶…è¿‡<span class=\"number\">20</span>æ¬¡ï¼Œåˆ™æŠ¥é”™</span><br><span class=\"line\">IF current != NULL AND current &gt; <span class=\"number\">20</span> THEN</span><br><span class=\"line\">    ERROR <span class=\"string\">\"exceed 20 accesses per second\"</span></span><br><span class=\"line\">ELSE</span><br><span class=\"line\">    //å¦‚æœè®¿é—®æ¬¡æ•°ä¸è¶³<span class=\"number\">20</span>æ¬¡ï¼Œå¢åŠ ä¸€æ¬¡è®¿é—®è®¡æ•°</span><br><span class=\"line\">    value = INCR(ip)</span><br><span class=\"line\">    //å¦‚æœæ˜¯ç¬¬ä¸€æ¬¡è®¿é—®ï¼Œå°†é”®å€¼å¯¹çš„è¿‡æœŸæ—¶é—´è®¾ç½®ä¸º<span class=\"number\">60</span>så</span><br><span class=\"line\">    IF value == <span class=\"number\">1</span> THEN</span><br><span class=\"line\">        EXPIRE(ip,<span class=\"number\">60</span>)</span><br><span class=\"line\">    END</span><br><span class=\"line\">    //æ‰§è¡Œå…¶ä»–æ“ä½œ</span><br><span class=\"line\">    DO THINGS</span><br><span class=\"line\">END</span><br></pre></td></tr></table></figure>\n\n\n\n<h3 id=\"Redis-æ˜¯å¦‚ä½•å®ç°é«˜å¯ç”¨çš„ï¼Ÿ\"><a href=\"#Redis-æ˜¯å¦‚ä½•å®ç°é«˜å¯ç”¨çš„ï¼Ÿ\" class=\"headerlink\" title=\"Redis æ˜¯å¦‚ä½•å®ç°é«˜å¯ç”¨çš„ï¼Ÿ\"></a>Redis æ˜¯å¦‚ä½•å®ç°é«˜å¯ç”¨çš„ï¼Ÿ</h3><ul>\n<li>æ•°æ®æŒä¹…åŒ–ï¼Œä¿è¯äº†ç³»ç»Ÿåœ¨å‘ç”Ÿå®•æœºæˆ–è€…é‡å¯ä¹‹åæ•°æ®ä¸ä¼šä¸¢å¤±ï¼Œå¢åŠ äº†ç³»ç»Ÿçš„å¯é æ€§å’Œå‡å°‘äº†ç³»ç»Ÿä¸å¯ç”¨çš„æ—¶é—´ï¼ˆçœå»äº†æ‰‹åŠ¨æ¢å¤æ•°æ®çš„è¿‡ç¨‹ï¼‰</li>\n<li>ä¸»ä»æ•°æ®åŒæ­¥ï¼ˆä¸»ä»å¤åˆ¶ï¼‰ï¼Œå¯ä»¥å°†æ•°æ®å­˜å‚¨è‡³å¤šå°æœåŠ¡å™¨ï¼Œè¿™æ ·å½“é‡åˆ°ä¸€å°æœåŠ¡å™¨å®•æœºä¹‹åï¼Œå¯ä»¥å¾ˆå¿«åœ°åˆ‡æ¢è‡³å¦ä¸€å°æœåŠ¡å™¨ä»¥ç»§ç»­æä¾›æœåŠ¡</li>\n<li>Redis å“¨å…µæ¨¡å¼ï¼ˆSentinelï¼‰ï¼Œç”¨äºå‘ç”Ÿæ•…éšœä¹‹åè‡ªåŠ¨åˆ‡æ¢æœåŠ¡å™¨</li>\n<li>Redis é›†ç¾¤ï¼ˆClusterï¼‰ï¼Œå¤šä¸»å¤šä»çš„ Redis åˆ†å¸ƒå¼é›†ç¾¤ç¯å¢ƒï¼Œç”¨äºæä¾›æ€§èƒ½æ›´å¥½çš„ Redis æœåŠ¡ï¼Œå¹¶ä¸”å®ƒè‡ªèº«æ‹¥æœ‰æ•…éšœè‡ªåŠ¨åˆ‡æ¢çš„èƒ½åŠ›ã€‚</li>\n</ul>\n<h4 id=\"å•æœºç‰ˆ\"><a href=\"#å•æœºç‰ˆ\" class=\"headerlink\" title=\"å•æœºç‰ˆ\"></a>å•æœºç‰ˆ</h4><blockquote>\n<p>å•æœºç‰ˆçš„Redisä¹Ÿæœ‰å¾ˆå¤šä¼˜ç‚¹ï¼Œæ¯”å¦‚å®ç°å®ç°ç®€å•ã€ç»´æŠ¤ç®€å•ã€éƒ¨ç½²ç®€å•ã€ç»´æŠ¤æˆæœ¬éå¸¸ä½ï¼Œä¸éœ€è¦å…¶å®ƒé¢å¤–çš„å¼€æ”¯ã€‚ä½†æ˜¯ï¼Œå› ä¸ºæ˜¯å•æœºç‰ˆçš„Redisæ‰€ä»¥ä¹Ÿå­˜åœ¨å¾ˆå¤šçš„é—®é¢˜ï¼Œæ¯”å¦‚æœ€æ˜æ˜¾çš„å•ç‚¹æ•…éšœé—®é¢˜ï¼Œä¸€ä¸ªRedisæŒ‚äº†ï¼Œæ‰€æœ‰çš„è¯·æ±‚å°±ä¼šç›´æ¥æ‰“åœ¨äº†DBä¸Šã€‚å¹¶ä¸”ä¸€ä¸ªRedisæŠ—å¹¶å‘æ•°é‡ä¹Ÿæ˜¯æœ‰é™çš„ï¼ŒåŒæ—¶è¦å…¼é¡¾è¯»å†™ä¸¤ç§è¯·æ±‚ï¼Œåªè¦è®¿é—®é‡ä¸€ä¸Šæ¥ï¼ŒRediså°±å—ä¸äº†äº†ï¼Œå¦ä¸€æ–¹é¢å•æœºç‰ˆçš„Redisæ•°æ®é‡å­˜å‚¨ä¹Ÿæ˜¯æœ‰é™çš„ï¼Œæ•°æ®é‡ä¸€å¤§ï¼Œå†é‡å¯Redisçš„æ—¶å€™ï¼Œå°±ä¼šéå¸¸çš„æ…¢ï¼Œæ‰€ä»¥å±€é™æ€§ä¹Ÿæ˜¯æ¯”è¾ƒå¤§çš„ã€‚</p>\n</blockquote>\n<h4 id=\"ä¸»ä»ç‰ˆæœ¬\"><a href=\"#ä¸»ä»ç‰ˆæœ¬\" class=\"headerlink\" title=\"ä¸»ä»ç‰ˆæœ¬\"></a>ä¸»ä»ç‰ˆæœ¬</h4><blockquote>\n<p>ä¸»ä»çš„åŸç†è¿˜ç®—æ˜¯æ¯”è¾ƒç®€å•çš„ï¼Œä¸€ä¸»å¤šä»ï¼Œ<strong>ä¸»æ•°æ®åº“ï¼ˆmasterï¼‰å¯ä»¥è¯»ä¹Ÿå¯ä»¥å†™ï¼ˆread/writeï¼‰ï¼Œä»æ•°æ®åº“ä»…è¯»ï¼ˆonly readï¼‰</strong>ã€‚ä¸»ä»æ¨¡å¼ä¸€èˆ¬å®ç°<strong>è¯»å†™åˆ†ç¦»</strong>ï¼Œ<strong>ä¸»æ•°æ®åº“ä»…å†™ï¼ˆonly writeï¼‰</strong>ï¼Œå‡è½»ä¸»æ•°æ®åº“çš„å‹åŠ›ã€‚ä½†æ˜¯æ•°æ®çš„ä¸€è‡´æ€§é—®é¢˜ï¼Œå‡å¦‚ä¸»æ•°æ®åº“å†™æ“ä½œå®Œæˆï¼Œé‚£ä¹ˆä»–çš„æ•°æ®ä¼šè¢«å¤åˆ¶åˆ°ä»æ•°æ®åº“ï¼Œè‹¥æ˜¯è¿˜æ²¡æœ‰å³ä½¿å¤åˆ¶åˆ°ä»æ•°æ®åº“ï¼Œè¯»è¯·æ±‚åˆæ¥äº†ï¼Œæ­¤æ—¶è¯»å–çš„æ•°æ®å°±ä¸æ˜¯æœ€æ–°çš„æ•°æ®ã€‚ä»ä¸»åŒæ­¥çš„è¿‡ç¨‹ç½‘ç»œå‡ºæ•…éšœäº†ï¼Œå¯¼è‡´ä¸»ä»åŒæ­¥å¤±è´¥ï¼Œä¹Ÿä¼šå‡ºç°é—®é¢˜æ•°æ®ä¸€è‡´æ€§çš„é—®é¢˜ã€‚ä¸»ä»æ¨¡å¼ä¸å…·å¤‡è‡ªåŠ¨å®¹é”™å’Œæ¢å¤çš„åŠŸèƒ½ï¼Œä¸€æ—¦ä¸»æ•°æ®åº“ï¼Œä»èŠ‚ç‚¹æ™‹å‡æœªä¸»æ•°æ®åº“çš„è¿‡ç¨‹éœ€è¦äººä¸ºæ“ä½œï¼Œç»´æŠ¤çš„æˆæœ¬å°±ä¼šå‡é«˜ï¼Œå¹¶ä¸”ä¸»èŠ‚ç‚¹çš„å†™èƒ½åŠ›ã€å­˜å‚¨èƒ½åŠ›éƒ½ä¼šå—åˆ°é™åˆ¶ã€‚</p>\n</blockquote>\n<p><img src=\"https://z201.oss-cn-shanghai.aliyuncs.com/JavaNote/20211007011326.png\"></p>\n<h5 id=\"æ•°æ®åŒæ­¥æ–¹å¼\"><a href=\"#æ•°æ®åŒæ­¥æ–¹å¼\" class=\"headerlink\" title=\"æ•°æ®åŒæ­¥æ–¹å¼\"></a>æ•°æ®åŒæ­¥æ–¹å¼</h5><ol>\n<li>å½“slaveå¯åŠ¨åä¼šå‘masterå‘é€<code>SYNC</code>å‘½ä»¤ï¼ŒmasterèŠ‚ååˆ°ä»æ•°æ®åº“çš„å‘½ä»¤åé€šè¿‡<code>bgsave</code>ä¿å­˜å¿«ç…§ï¼ˆ<strong>RDBæŒä¹…åŒ–</strong>ï¼‰ï¼Œå¹¶ä¸”æœŸé—´çš„æ‰§è¡Œçš„äº›å‘½ä»¤ä¼šè¢«ç¼“å­˜èµ·æ¥ã€‚</li>\n<li>ç„¶åmasterä¼šå°†ä¿å­˜çš„å¿«ç…§å‘é€ç»™slaveï¼Œå¹¶ä¸”ç»§ç»­ç¼“å­˜æœŸé—´çš„å†™å‘½ä»¤ã€‚</li>\n<li>slaveæ”¶åˆ°ä¸»æ•°æ®åº“å‘é€è¿‡æ¥çš„å¿«ç…§å°±ä¼šåŠ è½½åˆ°è‡ªå·±çš„æ•°æ®åº“ä¸­ã€‚</li>\n<li>æœ€åmasterè®²ç¼“å­˜çš„å‘½ä»¤åŒæ­¥ç»™slaveï¼Œslaveæ”¶åˆ°å‘½ä»¤åæ‰§è¡Œä¸€éï¼Œè¿™æ ·masterä¸slaveæ•°æ®å°±ä¿æŒä¸€è‡´äº†ã€‚</li>\n</ol>\n<h4 id=\"å“¨å…µ\"><a href=\"#å“¨å…µ\" class=\"headerlink\" title=\"å“¨å…µ\"></a>å“¨å…µ</h4><blockquote>\n<p>å“¨å…µæ¨¡å¼æ˜¯ Redis å®˜æ–¹æ¨èçš„é«˜å¯ç”¨æ¨¡å¼ã€‚å“¨å…µæ¨¡å¼æ˜¯ä¸»ä»çš„å‡çº§ç‰ˆï¼Œå› ä¸ºä¸»ä»çš„å‡ºç°æ•…éšœåï¼Œä¸ä¼šè‡ªåŠ¨æ¢å¤ï¼Œéœ€è¦äººä¸ºå¹²é¢„ã€‚åœ¨ä¸»ä»çš„åŸºç¡€ä¸Šï¼Œå®ç°å“¨å…µæ¨¡å¼å°±æ˜¯ä¸ºäº†ç›‘æ§ä¸»ä»çš„è¿è¡ŒçŠ¶å†µï¼Œå¯¹ä¸»ä»çš„å¥å£®è¿›è¡Œç›‘æ§ï¼Œå°±å¥½åƒå“¨å…µä¸€æ ·ï¼Œåªè¦æœ‰å¼‚å¸¸å°±å‘å‡ºè­¦å‘Šï¼Œå¯¹å¼‚å¸¸çŠ¶å†µè¿›è¡Œå¤„ç†ã€‚</p>\n</blockquote>\n<p><img src=\"https://z201.oss-cn-shanghai.aliyuncs.com/JavaNote/20211007011355.png\"></p>\n<h5 id=\"ç›‘æ§\"><a href=\"#ç›‘æ§\" class=\"headerlink\" title=\"ç›‘æ§\"></a>ç›‘æ§</h5><blockquote>\n<p>ç›‘æ§masterå’Œslaveæ˜¯å¦æ­£å¸¸è¿è¡Œï¼Œä»¥åŠå“¨å…µä¹‹é—´ä¹Ÿä¼šç›¸äº’ç›‘æ§</p>\n</blockquote>\n<h5 id=\"è‡ªåŠ¨æ•…éšœæ¢å¤\"><a href=\"#è‡ªåŠ¨æ•…éšœæ¢å¤\" class=\"headerlink\" title=\"è‡ªåŠ¨æ•…éšœæ¢å¤\"></a>è‡ªåŠ¨æ•…éšœæ¢å¤</h5><blockquote>\n<p>å½“masterå‡ºç°æ•…éšœçš„æ—¶å€™ï¼Œä¼šè‡ªåŠ¨é€‰ä¸¾ä¸€ä¸ªslaveä½œä¸ºmasteré¡¶ä¸Šå»ã€‚</p>\n</blockquote>\n<h5 id=\"èŠ‚ç‚¹é€šä¿¡\"><a href=\"#èŠ‚ç‚¹é€šä¿¡\" class=\"headerlink\" title=\"èŠ‚ç‚¹é€šä¿¡\"></a>èŠ‚ç‚¹é€šä¿¡</h5><ul>\n<li><strong>å“¨å…µä¸masterå»ºç«‹è¿æ¥åï¼Œå®šæœŸä¼šå‘ï¼ˆ10ç§’ä¸€æ¬¡ï¼‰masterå’Œslaveå‘é€INFOå‘½ä»¤ï¼Œè‹¥æ˜¯masterè¢«æ ‡è®°ä¸ºä¸»è§‚ä¸‹çº¿ï¼Œé¢‘ç‡å°±ä¼šå˜ä¸º1ç§’ä¸€æ¬¡ã€‚</strong></li>\n<li>å‘é€çš„å†…å®¹åŒ…å«<strong>å“¨å…µçš„ipå’Œç«¯å£ã€è¿è¡Œidã€é…ç½®ç‰ˆæœ¬ã€masteråå­—ã€masterçš„ipç«¯å£è¿˜æœ‰masterçš„é…ç½®ç‰ˆæœ¬</strong>ç­‰ä¿¡æ¯ã€‚</li>\n<li><strong>å®šæœŸçš„å‘masterã€slaveå’Œå…¶å®ƒå“¨å…µå‘é€PINGå‘½ä»¤ï¼ˆæ¯ç§’ä¸€æ¬¡ï¼‰ï¼Œä»¥ä¾¿æ£€æµ‹å¯¹è±¡æ˜¯å¦å­˜æ´»</strong>ï¼Œè‹¥æ˜¯å¯¹æ–¹æ¥æ”¶åˆ°äº†PINGå‘½ä»¤ï¼Œæ— æ•…éšœæƒ…å†µä¸‹ï¼Œä¼šå›å¤PONGå‘½ä»¤ã€‚</li>\n</ul>\n<ol>\n<li>INFOï¼šè¯¥å‘½ä»¤å¯ä»¥è·å–ä¸»ä»æ•°æ®åº“çš„æœ€æ–°ä¿¡æ¯ï¼Œå¯ä»¥å®ç°æ–°ç»“ç‚¹çš„å‘ç°</li>\n<li>PINGï¼šè¯¥å‘½ä»¤è¢«ä½¿ç”¨æœ€é¢‘ç¹ï¼Œè¯¥å‘½ä»¤å°è£…äº†è‡ªèº«èŠ‚ç‚¹å’Œå…¶å®ƒèŠ‚ç‚¹çš„çŠ¶æ€æ•°æ®ã€‚</li>\n<li>PONGï¼šå½“èŠ‚ç‚¹æ”¶åˆ°MEETå’ŒPINGï¼Œä¼šå›å¤PONGå‘½ä»¤ï¼Œä¹ŸæŠŠè‡ªå·±çš„çŠ¶æ€å‘é€ç»™å¯¹æ–¹ã€‚</li>\n<li>MEETï¼šè¯¥å‘½ä»¤åœ¨æ–°ç»“ç‚¹åŠ å…¥é›†ç¾¤çš„æ—¶å€™ï¼Œä¼šå‘è€èŠ‚ç‚¹å‘é€è¯¥å‘½ä»¤ï¼Œè¡¨ç¤ºè‡ªå·±æ˜¯ä¸ªæ–°äºº</li>\n<li>FAILï¼šå½“èŠ‚ç‚¹ä¸‹çº¿ï¼Œä¼šå‘é›†ç¾¤ä¸­å¹¿æ’­è¯¥æ¶ˆæ¯ã€‚</li>\n</ol>\n<h5 id=\"ä¸Šçº¿å’Œä¸‹çº¿\"><a href=\"#ä¸Šçº¿å’Œä¸‹çº¿\" class=\"headerlink\" title=\"ä¸Šçº¿å’Œä¸‹çº¿\"></a>ä¸Šçº¿å’Œä¸‹çº¿</h5><blockquote>\n<p>å½“å“¨å…µä¸masterç›¸åŒä¹‹åå°±ä¼šå®šæœŸä¸€ç›´ä¿æŒè”ç³»ï¼Œè‹¥æ˜¯æŸä¸€æ—¶åˆ»å“¨å…µå‘é€çš„PINGåœ¨æŒ‡å®šæ—¶é—´å†…æ²¡æœ‰æ”¶åˆ°å›å¤ï¼ˆ<code>sentinel down-after-milliseconds master-name milliseconds</code> é…ç½®ï¼‰ï¼Œé‚£ä¹ˆå‘é€PINGå‘½ä»¤çš„å“¨å…µå°±ä¼šè®¤ä¸ºè¯¥master<strong>ä¸»è§‚ä¸‹çº¿</strong>ï¼ˆ<code>Subjectively Down</code>ï¼‰ã€‚</p>\n<p>å› ä¸ºæœ‰å¯èƒ½æ˜¯å“¨å…µä¸è¯¥masterä¹‹é—´çš„ç½‘ç»œé—®é¢˜é€ æˆçš„ï¼Œè€Œä¸æ˜¯masteræœ¬èº«çš„åŸå› ï¼Œæ‰€ä»¥å“¨å…µåŒæ—¶ä¼šè¯¢é—®å…¶å®ƒçš„å“¨å…µæ˜¯å¦ä¹Ÿè®¤ä¸ºè¯¥masterä¸‹çº¿ï¼Œè‹¥æ˜¯è®¤ä¸ºè¯¥èŠ‚ç‚¹ä¸‹çº¿çš„å“¨å…µè¾¾åˆ°ä¸€å®šçš„æ•°é‡ï¼ˆ<strong>å‰é¢çš„quorumå­—æ®µé…ç½®</strong>ï¼‰ï¼Œå°±ä¼šè®¤ä¸ºè¯¥èŠ‚ç‚¹<strong>å®¢è§‚ä¸‹çº¿</strong>ï¼ˆ<code>Objectively Down</code>ï¼‰ã€‚</p>\n<p>è‹¥æ˜¯æ²¡æœ‰è¶³å¤Ÿæ•°é‡çš„sentinelåŒæ„è¯¥masterä¸‹çº¿ï¼Œåˆ™è¯¥masterå®¢è§‚ä¸‹çº¿çš„æ ‡è¯†ä¼šè¢«ç§»é™¤ï¼›è‹¥æ˜¯masteré‡æ–°å‘å“¨å…µçš„PINGå‘½ä»¤å›å¤äº†å®¢è§‚ä¸‹çº¿çš„æ ‡è¯†ä¹Ÿä¼šè¢«ç§»é™¤ã€‚</p>\n</blockquote>\n<h5 id=\"é€‰ä¸¾ç®—æ³•\"><a href=\"#é€‰ä¸¾ç®—æ³•\" class=\"headerlink\" title=\"é€‰ä¸¾ç®—æ³•\"></a>é€‰ä¸¾ç®—æ³•</h5><blockquote>\n<p>å½“masterè¢«è®¤ä¸ºå®¢è§‚ä¸‹çº¿åï¼Œåˆæ˜¯æ€ä¹ˆè¿›è¡Œæ•…éšœæ¢å¤çš„å‘¢ï¼ŸåŸæ¥å“¨å…µä¸­é¦–å…ˆé€‰ä¸¾å‡ºä¸€ä¸ªè€å¤§å“¨å…µæ¥è¿›è¡Œæ•…éšœæ¢å¤ï¼Œ</p>\n</blockquote>\n<h5 id=\"é€‰ä¸¾masterå“¨å…µçš„ç®—æ³•å«åšRaftç®—æ³•\"><a href=\"#é€‰ä¸¾masterå“¨å…µçš„ç®—æ³•å«åšRaftç®—æ³•\" class=\"headerlink\" title=\"é€‰ä¸¾masterå“¨å…µçš„ç®—æ³•å«åšRaftç®—æ³•\"></a>é€‰ä¸¾masterå“¨å…µçš„ç®—æ³•å«åš<strong>Raftç®—æ³•</strong></h5><ol>\n<li>å‘ç°masterä¸‹çº¿çš„å“¨å…µï¼ˆsentinelAï¼‰ä¼šå‘å…¶å®ƒçš„å“¨å…µå‘é€å‘½ä»¤è¿›è¡Œæ‹‰ç¥¨ï¼Œè¦æ±‚é€‰æ‹©è‡ªå·±ä¸ºå“¨å…µå¤§ä½¬ã€‚</li>\n<li>è‹¥æ˜¯ç›®æ ‡å“¨å…µæ²¡æœ‰é€‰æ‹©å…¶å®ƒçš„å“¨å…µï¼Œå°±ä¼šé€‰æ‹©è¯¥å“¨å…µï¼ˆsentinelAï¼‰ä¸ºå¤§ä½¬ã€‚</li>\n<li>è‹¥æ˜¯é€‰æ‹©sentinelAçš„å“¨å…µè¶…è¿‡åŠæ•°ï¼ˆåŠæ•°åŸåˆ™ï¼‰ï¼Œè¯¥å¤§ä½¬ésentinelAè«å±ã€‚</li>\n<li>å¦‚æœæœ‰å¤šä¸ªå“¨å…µåŒæ—¶ç«é€‰ï¼Œå¹¶ä¸”å¯èƒ½å­˜åœ¨ç¥¨æ•°ä¸€è‡´çš„æƒ…å†µï¼Œå°±ä¼šç­‰å¾…ä¸‹æ¬¡çš„ä¸€ä¸ªéšæœºæ—¶é—´å†æ¬¡å‘èµ·ç«é€‰è¯·æ±‚ï¼Œè¿›è¡Œæ–°çš„ä¸€è½®æŠ•ç¥¨ï¼Œç›´åˆ°å¤§ä½¬è¢«é€‰å‡ºæ¥ã€‚</li>\n</ol>\n<ul>\n<li>é€‰å‡ºmasterå“¨å…µåï¼Œmasterå“¨å…µå°±ä¼šå¯¹æ•…éšœè¿›è¡Œè‡ªåŠ¨å›å¤ï¼Œä»slaveä¸­é€‰å‡ºä¸€åslaveä½œä¸ºä¸»æ•°æ®åº“</li>\n</ul>\n<ol>\n<li>æ‰€æœ‰çš„slaveä¸­<code>slave-priority</code>ä¼˜å…ˆçº§æœ€é«˜çš„ä¼šè¢«é€‰ä¸­ã€‚</li>\n<li>è‹¥æ˜¯ä¼˜å…ˆçº§ç›¸åŒï¼Œä¼šé€‰æ‹©åç§»é‡æœ€å¤§çš„ï¼Œå› ä¸ºåç§»é‡è®°å½•ç€æ•°æ®çš„å¤åˆ¶çš„å¢é‡ï¼Œè¶Šå¤§è¡¨ç¤ºæ•°æ®è¶Šå®Œæ•´ã€‚</li>\n<li>è‹¥æ˜¯ä»¥ä¸Šä¸¤è€…éƒ½ç›¸åŒï¼Œé€‰æ‹©IDæœ€å°çš„ã€‚</li>\n</ol>\n<h4 id=\"é›†ç¾¤Clusteræ¨¡å¼\"><a href=\"#é›†ç¾¤Clusteræ¨¡å¼\" class=\"headerlink\" title=\"é›†ç¾¤Clusteræ¨¡å¼\"></a>é›†ç¾¤Clusteræ¨¡å¼</h4><blockquote>\n<p>é›†ç¾¤æ¨¡å¼å®ç°äº†Redisæ•°æ®çš„åˆ†å¸ƒå¼å­˜å‚¨ï¼Œå®ç°æ•°æ®çš„åˆ†ç‰‡ï¼Œæ¯ä¸ªredisèŠ‚ç‚¹å­˜å‚¨ä¸åŒçš„å†…å®¹ï¼Œå¹¶ä¸”è§£å†³äº†åœ¨çº¿çš„èŠ‚ç‚¹æ”¶ç¼©ï¼ˆä¸‹çº¿ï¼‰å’Œæ‰©å®¹ï¼ˆä¸Šçº¿ï¼‰é—®é¢˜ã€‚</p>\n</blockquote>\n<p>![image-20211007011524701](/Users/zengqingfeng/Library/Application Support/typora-user-images/image-20211007011524701.png)</p>\n<h5 id=\"è™šæ‹Ÿæ§½åˆ†åŒºç®—æ³•\"><a href=\"#è™šæ‹Ÿæ§½åˆ†åŒºç®—æ³•\" class=\"headerlink\" title=\"è™šæ‹Ÿæ§½åˆ†åŒºç®—æ³•\"></a>è™šæ‹Ÿæ§½åˆ†åŒºç®—æ³•</h5><blockquote>\n<p>åœ¨Redisé›†ç¾¤ä¸­é‡‡ç”¨çš„ä½¿è™šæ‹Ÿæ§½åˆ†åŒºç®—æ³•ï¼Œä¼šæŠŠredisé›†ç¾¤åˆ†æˆ16384 ä¸ªæ§½ï¼ˆ0 -16383ï¼‰ã€‚</p>\n</blockquote>\n<ul>\n<li>å½“å®¢æˆ·ç«¯è¯·æ±‚è¿‡æ¥ï¼Œä¼šé¦–å…ˆé€šè¿‡å¯¹keyè¿›è¡ŒCRC16 æ ¡éªŒå¹¶å¯¹ 16384 å–æ¨¡ï¼ˆCRC16(key)%16383ï¼‰è®¡ç®—å‡ºkeyæ‰€åœ¨çš„æ§½ï¼Œç„¶åå†åˆ°å¯¹åº”çš„æ§½ä¸Šè¿›è¡Œå–æ•°æ®æˆ–è€…å­˜æ•°æ®ï¼Œè¿™æ ·å°±å®ç°äº†æ•°æ®çš„è®¿é—®æ›´æ–°ã€‚</li>\n</ul>\n<h5 id=\"èŠ‚ç‚¹é€šä¿¡-1\"><a href=\"#èŠ‚ç‚¹é€šä¿¡-1\" class=\"headerlink\" title=\"èŠ‚ç‚¹é€šä¿¡\"></a>èŠ‚ç‚¹é€šä¿¡</h5><blockquote>\n<p>èŠ‚ç‚¹ä¹‹é—´å®ç°äº†å°†æ•°æ®è¿›è¡Œåˆ†ç‰‡å­˜å‚¨ï¼Œé‚£ä¹ˆèŠ‚ç‚¹ä¹‹é—´åˆæ˜¯æ€ä¹ˆé€šä¿¡çš„å‘¢ï¼Ÿè¿™ä¸ªå’Œå‰é¢å“¨å…µæ¨¡å¼è®²çš„å‘½ä»¤åŸºæœ¬ä¸€æ ·ã€‚</p>\n</blockquote>\n<ul>\n<li>æ–°ä¸Šçº¿çš„èŠ‚ç‚¹ï¼Œä¼šé€šè¿‡ Gossip åè®®å‘è€æˆå‘˜å‘é€Meetæ¶ˆæ¯ï¼Œè¡¨ç¤ºè‡ªå·±æ˜¯æ–°åŠ å…¥çš„æˆå‘˜ã€‚</li>\n<li>è€æˆå‘˜æ”¶åˆ°Meetæ¶ˆæ¯åï¼Œåœ¨æ²¡æœ‰æ•…éšœçš„æƒ…å†µä¸‹ä¼šæ¢å¤PONGæ¶ˆæ¯ï¼Œè¡¨ç¤ºæ¬¢è¿æ–°ç»“ç‚¹çš„åŠ å…¥ï¼Œé™¤äº†ç¬¬ä¸€æ¬¡å‘é€Meetæ¶ˆæ¯åï¼Œä¹‹åéƒ½ä¼šå‘é€å®šæœŸPINGæ¶ˆæ¯ï¼Œå®ç°èŠ‚ç‚¹ä¹‹é—´çš„é€šä¿¡ã€‚</li>\n</ul>\n<h5 id=\"æ•°æ®è¯·æ±‚\"><a href=\"#æ•°æ®è¯·æ±‚\" class=\"headerlink\" title=\"æ•°æ®è¯·æ±‚\"></a>æ•°æ®è¯·æ±‚</h5><blockquote>\n<p>åœ¨Redisçš„åº•å±‚ç»´æŠ¤äº†<code>unsigned char myslots[CLUSTER_SLOTS/8]</code> ä¸€ä¸ªæ•°ç»„å­˜æ”¾æ¯ä¸ªèŠ‚ç‚¹çš„æ§½ä¿¡æ¯ã€‚è¿™æ ·æ•°ç»„åªè¡¨ç¤ºè‡ªå·±æ˜¯å¦å­˜å‚¨å¯¹åº”çš„æ§½æ•°æ®ï¼Œè‹¥æ˜¯1è¡¨ç¤ºå­˜åœ¨è¯¥æ•°æ®ï¼Œ0è¡¨ç¤ºä¸å­˜åœ¨è¯¥æ•°æ®ï¼Œè¿™æ ·æŸ¥è¯¢çš„æ•ˆç‡å°±ä¼šéå¸¸çš„é«˜ï¼Œç±»ä¼¼äºå¸ƒéš†è¿‡æ»¤å™¨ï¼ŒäºŒè¿›åˆ¶å­˜å‚¨ã€‚å¹¶ä¸”ï¼Œæ¯ä¸ªredisåº•å±‚è¿˜ç»´æŠ¤äº†ä¸€ä¸ªclusterNodeæ•°ç»„ï¼Œå¤§å°ä¹Ÿæ˜¯16384ï¼Œç”¨äºå‚¨å­˜è´Ÿè´£å¯¹åº”æ§½çš„èŠ‚ç‚¹çš„ipã€ç«¯å£ç­‰ä¿¡æ¯ï¼Œè¿™æ ·æ¯ä¸€ä¸ªèŠ‚ç‚¹å°±ç»´æŠ¤äº†å…¶å®ƒèŠ‚ç‚¹çš„å…ƒæ•°æ®ä¿¡æ¯ï¼Œä¾¿äºåŠæ—¶çš„æ‰¾åˆ°å¯¹åº”çš„èŠ‚ç‚¹ã€‚</p>\n</blockquote>\n<h5 id=\"æ‰©å®¹å’Œæ”¶ç¼©\"><a href=\"#æ‰©å®¹å’Œæ”¶ç¼©\" class=\"headerlink\" title=\"æ‰©å®¹å’Œæ”¶ç¼©\"></a>æ‰©å®¹å’Œæ”¶ç¼©</h5><blockquote>\n<p>æ‰©å®¹å’Œæ”¶ç¼©ä¹Ÿå°±æ˜¯èŠ‚ç‚¹çš„ä¸Šçº¿å’Œä¸‹çº¿ï¼Œå¯èƒ½èŠ‚ç‚¹å‘ç”Ÿæ•…éšœäº†ï¼Œæ•…éšœè‡ªåŠ¨å›å¤çš„è¿‡ç¨‹ï¼ˆèŠ‚ç‚¹æ”¶ç¼©ï¼‰ã€‚</p>\n</blockquote>\n<ul>\n<li>èŠ‚ç‚¹çš„æ”¶ç¼©å’Œæ‰©å®¹æ—¶ï¼Œä¼šé‡æ–°è®¡ç®—æ¯ä¸€ä¸ªèŠ‚ç‚¹è´Ÿè´£çš„æ§½èŒƒå›´ï¼Œå¹¶å‘æ ¹æ®è™šæ‹Ÿæ§½ç®—æ³•ï¼Œå°†å¯¹åº”çš„æ•°æ®æ›´æ–°åˆ°å¯¹åº”çš„èŠ‚ç‚¹ã€‚</li>\n<li>å‘ç”Ÿæ•…éšœåï¼Œå“¨å…µè€å¤§èŠ‚ç‚¹çš„é€‰ä¸¾ï¼ŒmasterèŠ‚ç‚¹çš„é‡æ–°é€‰ä¸¾ï¼Œslaveæ€æ ·æ™‹å‡ä¸ºmasterèŠ‚ç‚¹ï¼Œå¯ä»¥æŸ¥çœ‹å‰é¢å“¨å…µæ¨¡å¼é€‰ä¸¾è¿‡ç¨‹ã€‚</li>\n</ul>\n<h5 id=\"è™šæ‹Ÿå“ˆå¸Œæ§½åˆ†åŒº\"><a href=\"#è™šæ‹Ÿå“ˆå¸Œæ§½åˆ†åŒº\" class=\"headerlink\" title=\"è™šæ‹Ÿå“ˆå¸Œæ§½åˆ†åŒº\"></a>è™šæ‹Ÿå“ˆå¸Œæ§½åˆ†åŒº</h5><blockquote>\n<p>Redis Cluster é‡‡ç”¨è™šæ‹Ÿå“ˆå¸Œæ§½åˆ†åŒºï¼Œæ‰€æœ‰çš„é”®æ ¹æ®å“ˆå¸Œå‡½æ•°æ˜ å°„åˆ° 0~16383 æ•´æ•°æ§½å†…ï¼Œæ¯ä¸ª key é€šè¿‡ CRC16 æ ¡éªŒåå¯¹ 16384 å–æ¨¡æ¥å†³å®šæ”¾ç½®å“ªä¸ªæ§½ï¼ˆslotï¼‰ï¼Œæ¯ä¸€ä¸ªèŠ‚ç‚¹è´Ÿè´£ç»´æŠ¤ä¸€éƒ¨åˆ†æ§½ä»¥åŠæ§½æ‰€æ˜ å°„çš„é”®å€¼æ•°æ®ã€‚</p>\n</blockquote>\n<h5 id=\"ä¸€è‡´æ€§å“ˆå¸Œç®—æ³•åŸç†\"><a href=\"#ä¸€è‡´æ€§å“ˆå¸Œç®—æ³•åŸç†\" class=\"headerlink\" title=\"ä¸€è‡´æ€§å“ˆå¸Œç®—æ³•åŸç†\"></a>ä¸€è‡´æ€§å“ˆå¸Œç®—æ³•åŸç†</h5><blockquote>\n<p>ä¸€è‡´æ€§ Hash ç®—æ³•ä½¿ç”¨å–æ¨¡çš„æ–¹æ³•ï¼Œå¯¹ 2 çš„ 32 æ–¹å–æ¨¡ã€‚å³ï¼Œä¸€è‡´æ€§ Hash ç®—æ³•å°†æ•´ä¸ª Hash ç©ºé—´ç»„ç»‡æˆä¸€ä¸ªè™šæ‹Ÿçš„åœ†ç¯ï¼ŒHash å‡½æ•°çš„å€¼ç©ºé—´ä¸º 0~2^32-1ï¼ˆä¸€ä¸ª 32 ä½æ— ç¬¦å·æ•´å‹ï¼‰</p>\n</blockquote>\n<h5 id=\"slot-åŸç†\"><a href=\"#slot-åŸç†\" class=\"headerlink\" title=\"slot åŸç†\"></a>slot åŸç†</h5><blockquote>\n<p>Redis Cluster ä¸­æœ‰ä¸€ä¸ª 16384 é•¿åº¦çš„æ§½çš„æ¦‚å¿µï¼Œå®ƒä»¬çš„ç¼–å·ä¸º 0~16383ã€‚è¿™ä¸ªæ§½æ˜¯ä¸€ä¸ªè™šæ‹Ÿçš„æ§½ï¼Œå¹¶ä¸æ˜¯çœŸæ­£å­˜åœ¨çš„ã€‚æ­£å¸¸å·¥ä½œçš„æ—¶å€™ï¼ŒRedis Cluster ä¸­çš„æ¯ä¸ª master èŠ‚ç‚¹éƒ½ä¼šè´Ÿè´£ä¸€éƒ¨åˆ†çš„æ§½ï¼Œå½“æœ‰æŸä¸ª key è¢«æ˜ å°„åˆ°æŸä¸ª master è´Ÿè´£çš„æ§½ï¼Œé‚£ä¹ˆè¿™ä¸ª master è´Ÿè´£ä¸ºè¿™ä¸ª key æä¾›æœåŠ¡ï¼Œè‡³äºå“ªä¸ª master èŠ‚ç‚¹è´Ÿè´£å“ªä¸ªæ§½ï¼Œè¿™æ˜¯å¯ä»¥ç”±ç”¨æˆ·æŒ‡å®šçš„ï¼Œä¹Ÿå¯ä»¥åœ¨åˆå§‹åŒ–çš„æ—¶å€™è‡ªåŠ¨ç”Ÿæˆã€‚æ¯ä¸ªæ§½æ˜ å°„ä¸€ä¸ªæ•°æ®å­é›†ï¼Œä¸€èˆ¬æ¯”èŠ‚ç‚¹æ•°å¤§ã€‚</p>\n</blockquote>\n<ul>\n<li>Redis Cluster æ˜¯æœåŠ¡ç«¯ç®¡ç†èŠ‚ç‚¹ã€æ§½ã€æ•°æ®ï¼Œå€¼å¾—ä¸€æçš„æ˜¯åªæœ‰ master èŠ‚ç‚¹æ‰èƒ½åˆ†é…æ§½ã€‚é€šè¿‡å“ˆå¸Œç®—æ³•å†åŠ ä¸Šå–æ¨¡è¿ç®—å¯ä»¥å°†ä¸€ä¸ªå€¼å›ºå®šåœ°æ˜ å°„åˆ°æŸä¸ªåŒºé—´ï¼Œåœ¨è¿™é‡Œï¼Œè¿™ä¸ªåŒºé—´å«åš slotsï¼ŒåŒºé—´ç”±è¿ç»­çš„ slot ç»„æˆã€‚åœ¨ Redis Cluster ä¸­ï¼Œæˆ‘ä»¬æ‹¥æœ‰ 16384 ä¸ª slotï¼Œè¿™ä¸ªæ•°æ˜¯å›ºå®šçš„ï¼Œæˆ‘ä»¬å­˜å‚¨åœ¨ Redis Cluster ä¸­çš„æ‰€æœ‰çš„é”®éƒ½ä¼šè¢«æ˜ å°„åˆ°è¿™äº› slot ä¸­ã€‚</li>\n</ul>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\">HASH_SLOT = CRC16(key) mod <span class=\"number\">16384</span></span><br></pre></td></tr></table></figure>\n\n<h5 id=\"ä¸ºä½•æ˜¯-16384\"><a href=\"#ä¸ºä½•æ˜¯-16384\" class=\"headerlink\" title=\"ä¸ºä½•æ˜¯ 16384\"></a>ä¸ºä½•æ˜¯ 16384</h5><blockquote>\n<p>Redis Cluster ä¸ºä»€ä¹ˆæ˜¯ 16384 ä¸ªæ§½ï¼Œ16384 æ˜¯ 2^14 çš„ç»“æœ</p>\n</blockquote>\n<ul>\n<li>ä½œè€…æ€ä¹ˆè¯´</li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">The reason is:</span><br><span class=\"line\"></span><br><span class=\"line\">\t\tNormal heartbeat packets carry the full configuration of a node, that can be replaced in an idempotent way with the old in order to update an old config. This means they contain the slots configuration for a node, in raw form, that uses 2k of space with16k slots, but would use a prohibitive 8k of space using 65k slots.</span><br><span class=\"line\">\t\tAt the same time it is unlikely that Redis Cluster would scale to more than 1000 mater nodes because of other design tradeoffs.</span><br><span class=\"line\">So 16k was in the right range to ensure enough slots per master with a max of 1000 maters, but a small enough number to propagate the slot configuration as a raw bitmap easily. Note that in small clusters the bitmap would be hard to compress because when N is small the bitmap would have slots&#x2F;N bits set that is a large percentage of bits set.</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"å¤§é‡keyçŸ­æ—¶é—´å†…åŒæ—¶è¿‡æœŸ\"><a href=\"#å¤§é‡keyçŸ­æ—¶é—´å†…åŒæ—¶è¿‡æœŸ\" class=\"headerlink\" title=\"å¤§é‡keyçŸ­æ—¶é—´å†…åŒæ—¶è¿‡æœŸ\"></a>å¤§é‡keyçŸ­æ—¶é—´å†…åŒæ—¶è¿‡æœŸ</h3><ul>\n<li>å¦‚æœå¤§é‡çš„keyé›†ä¸­åœ¨æŸä¸€ä¸ªæ—¶é—´è¿‡æœŸï¼Œä¼šå¯¼è‡´rediså¡é¡¿ç°è±¡ï¼Œæ‰€ä»¥åœ¨è®¾ç½®è¿‡æœŸæ—¶é—´çš„æ—¶å€™æœ€å¥½åŠ ä¸Šä¸€ä¸ªéšæœºæ•°ï¼Œè®©çš„keyè¿‡æœŸæ—¶é—´åˆ†æ•£ä¸€ç‚¹ã€‚</li>\n</ul>\n<h3 id=\"Keyså‘½ä»¤\"><a href=\"#Keyså‘½ä»¤\" class=\"headerlink\" title=\"Keyså‘½ä»¤\"></a>Keyså‘½ä»¤</h3><ul>\n<li>keyså‘½ä»¤å¯ä»¥æ‰«å‡ºæŒ‡å®šçš„keyåˆ—è¡¨ï¼Œä½†æ˜¯keyså‘½ä»¤ä¼šå¯¼è‡´çº¿ç¨‹æŸ±å¡ï¼Œçº¿ä¸ŠæœåŠ¡ä¼šåœé¡¿ï¼Œç›´åˆ°æŒ‡ä»¤æ‰§è¡Œå®Œæ¯•ï¼ŒæœåŠ¡æ‰èƒ½æ¢å¤ã€‚å»ºè®®ä½¿ç”¨scanå‘½ä»¤æ¥ä»£æ›¿ä½¿ç”¨ã€‚<strong>scan</strong>æŒ‡ä»¤å¯ä»¥æ— é˜»å¡çš„æå–å‡ºæŒ‡å®šæ¨¡å¼çš„keyåˆ—è¡¨ï¼Œä½†æ˜¯ä¼šæœ‰ä¸€å®šçš„é‡å¤æ¦‚ç‡ï¼Œåœ¨å®¢æˆ·ç«¯åšä¸€æ¬¡å»é‡å°±å¯ä»¥äº†ï¼Œä½†æ˜¯æ•´ä½“æ‰€èŠ±è´¹çš„æ—¶é—´ä¼šæ¯”ç›´æ¥ç”¨keysæŒ‡ä»¤é•¿ã€‚ä½†æ˜¯å¯¹äº SCAN è¿™ç±»å¢é‡å¼è¿­ä»£å‘½ä»¤æ¥è¯´ï¼Œ å› ä¸ºåœ¨å¯¹é”®è¿›è¡Œå¢é‡å¼è¿­ä»£çš„è¿‡ç¨‹ä¸­ï¼Œ é”®å¯èƒ½ä¼šè¢«ä¿®æ”¹ï¼Œ æ‰€ä»¥å¢é‡å¼è¿­ä»£å‘½ä»¤åªèƒ½å¯¹è¢«è¿”å›çš„å…ƒç´ æä¾›æœ‰é™çš„ä¿è¯ ã€‚</li>\n</ul>\n","categories":["æŸ¥ç¼ºè¡¥æ¼"],"tags":["Redis"]},{"title":"æŸ¥ç¼ºè¡¥æ¼-SpringMvc","url":"/posts/399195402/","content":"<blockquote>\n<p>æœ¬ç« æ˜¯æ•´ç†çŸ¥è¯†å†…å®¹ï¼Œä¸ºå¼ºåŒ–çŸ¥è¯†é•¿æœŸæ›´æ–°ã€‚</p>\n</blockquote>\n<h3 id=\"æè¿°ä¸‹Controllerå’ŒRequestMappingæ³¨è§£ã€‚\"><a href=\"#æè¿°ä¸‹Controllerå’ŒRequestMappingæ³¨è§£ã€‚\" class=\"headerlink\" title=\"æè¿°ä¸‹Controllerå’ŒRequestMappingæ³¨è§£ã€‚\"></a>æè¿°ä¸‹Controllerå’ŒRequestMappingæ³¨è§£ã€‚</h3><ul>\n<li><p>Controller</p>\n<ul>\n<li>å£°æ˜åœ¨ç±»ä¸Šï¼Œè¯¥æ³¨è§£è¡¨æ˜è¯¥ç±»æ‰®æ¼”æ§åˆ¶å™¨çš„è§’è‰²ï¼Œç±»ä¼¼Actionã€‚</li>\n</ul>\n</li>\n<li><p>RequestMapping</p>\n<ul>\n<li>è¯¥æ³¨è§£æ˜¯ç”¨æ¥æ˜ å°„ä¸€ä¸ªURLåˆ°ä¸€ä¸ªç±»æˆ–ä¸€ä¸ªç‰¹å®šçš„æ–¹å¤„ç†æ³•ä¸Šã€‚</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"æè¿°ä¸‹Springçš„ä½œç”¨åŸŸä»¥åŠä½¿ç”¨æ–¹æ³•ã€‚\"><a href=\"#æè¿°ä¸‹Springçš„ä½œç”¨åŸŸä»¥åŠä½¿ç”¨æ–¹æ³•ã€‚\" class=\"headerlink\" title=\"æè¿°ä¸‹Springçš„ä½œç”¨åŸŸä»¥åŠä½¿ç”¨æ–¹æ³•ã€‚\"></a>æè¿°ä¸‹Springçš„ä½œç”¨åŸŸä»¥åŠä½¿ç”¨æ–¹æ³•ã€‚</h3><ul>\n<li>å½“å®šä¹‰ä¸€ä¸ªBeanæ—¶ï¼Œå¯ä»¥ç»™è¿™ä¸ªBeanå£°æ˜ä¸€ä¸ªä½œç”¨åŸŸã€‚é€šè¿‡@Scopeæ³¨è§£å£°æ˜åœ¨ç±»ä¸Šã€‚<ul>\n<li>Beané»˜è®¤ä½œç”¨åŸŸæ˜¯singleton å•ä¾‹æ¨¡å¼ï¼Œåœ¨æ¯ä¸ªSpring Iocå®¹å™¨ä¸­çš„ä¸€ä¸ªBeanå®šä¹‰ä¸€ä¸ªå®ä¾‹ï¼Œä¹Ÿå°±æ˜¯æ— çŠ¶æ€Beanï¼Œä¹Ÿå°±æ˜¯çº¿ç¨‹ä¸å®‰å…¨çš„ã€‚è¿™ä¸ªå•ä¸€å®ä¾‹ä¼šè¢«å­˜å‚¨åˆ°å•ä¾‹ç¼“å­˜ï¼ˆsingleton cacheï¼‰ä¸­ï¼Œå¹¶ä¸”æ‰€æœ‰é’ˆå¯¹è¯¥beançš„åç»­è¯·æ±‚ã€è®¿é—®å’Œå¼•ç”¨éƒ½å°†è¿”å›è¢«ç¼“å­˜çš„å¯¹è±¡å®ä¾‹ã€‚ç›¸å½“äºä¸€æ¬¡åˆ›å»ºå¤šæ¬¡ä½¿ç”¨ã€‚</li>\n<li>prototype åŸå‹æ¨¡å¼ï¼Œåœ¨æ¯ä¸ªSpring Iocå®¹å™¨ä¸­çš„ä¸€ä¸ªBeanå®šä¹‰å¤šå®ä¾‹ï¼Œå°±ç›¸å½“ä¸Java ä¸­new æ“ä½œã€‚é€šå¸¸ä½œä¸ºæœ‰çŠ¶æ€çš„Beanã€‚Prototypeä½œç”¨åŸŸçš„beanä¼šå¯¼è‡´åœ¨æ¯æ¬¡å¯¹è¯¥beanè¯·æ±‚ï¼ˆå°†å…¶æ³¨å…¥åˆ°å¦ä¸€ä¸ªbeanä¸­ï¼Œæˆ–è€…ä»¥ç¨‹åºçš„æ–¹å¼è°ƒç”¨å®¹å™¨çš„getBean()æ–¹æ³•ï¼‰æ—¶éƒ½ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„beanå®ä¾‹ã€‚</li>\n</ul>\n</li>\n</ul>\n<ul>\n<li><p>å…¶å®ƒä½œç”¨åŸŸã€‚</p>\n<ul>\n<li>requestã€sessionã€global session ä»…åœ¨åŸºäºwebçš„åº”ç”¨ä¸­ä½¿ç”¨ï¼ˆä¸å¿…å…³å¿ƒä½ æ‰€é‡‡ç”¨çš„æ˜¯ä»€ä¹ˆwebåº”ç”¨æ¡†æ¶ï¼‰ã€‚<ul>\n<li>å¦‚æœä¸æ˜¯åœ¨webä¸‹å®ç°è€Œæ˜¯é€šè¿‡ApplicationContextè¿™ç§å®ç°ï¼Œå°è¯•ä½¿ç”¨è¿™äº›ä½œç”¨åŸŸå°†æŠ›å‡ºå¼‚å¸¸IllegalStateExceptionæœªçŸ¥ä½œç”¨åŸŸã€‚</li>\n<li>request å¯¹æ¯ä¸€æ¬¡HTTPè¯·æ±‚éƒ½ä¼šäº§ç”Ÿä¸€ä¸ªæ–°çš„beanã€‚Springå®¹å™¨ä¼šæ ¹æ®loginAction beanå®šä¹‰åˆ›å»ºä¸€ä¸ªå…¨æ–°çš„LoginAction beanå®ä¾‹ï¼Œä¸”è¯¥loginAction beanå®ä¾‹ä»…åœ¨å½“å‰HTTP requestå†…æœ‰æ•ˆï¼Œå› æ­¤å¯ä»¥æ ¹æ®éœ€è¦æ”¾å¿ƒçš„æ›´æ”¹æ‰€å»ºå®ä¾‹çš„å†…éƒ¨çŠ¶æ€ï¼Œè€Œå…¶ä»–è¯·æ±‚ä¸­æ ¹æ®loginAction beanå®šä¹‰åˆ›å»ºçš„å®ä¾‹ï¼Œå°†ä¸ä¼šçœ‹åˆ°è¿™äº›ç‰¹å®šäºæŸä¸ªè¯·æ±‚çš„çŠ¶æ€å˜åŒ–ã€‚å½“å¤„ç†è¯·æ±‚ç»“æŸï¼Œrequestä½œç”¨åŸŸçš„beanå®ä¾‹å°†è¢«é”€æ¯ã€‚</li>\n<li>session å¯¹æ¯ä¸€æ¬¡HTTPè¯·æ±‚éƒ½ä¼šäº§ç”Ÿä¸€ä¸ªæ–°çš„beanï¼ŒSpringå®¹å™¨ä¼šæ ¹æ®userPreferences beanå®šä¹‰åˆ›å»ºä¸€ä¸ªå…¨æ–°çš„userPreferences beanå®ä¾‹ï¼Œä¸”è¯¥userPreferences beanä»…åœ¨å½“å‰HTTP Sessionå†…æœ‰æ•ˆã€‚ä¸requestä½œç”¨åŸŸä¸€æ ·ï¼Œä½ å¯ä»¥æ ¹æ®éœ€è¦æ”¾å¿ƒçš„æ›´æ”¹æ‰€åˆ›å»ºå®ä¾‹çš„å†…éƒ¨çŠ¶æ€ï¼Œè€Œåˆ«çš„HTTP Sessionä¸­æ ¹æ®userPreferencesåˆ›å»ºçš„å®ä¾‹ï¼Œå°†ä¸ä¼šçœ‹åˆ°è¿™äº›ç‰¹å®šäºæŸä¸ªHTTP Sessionçš„çŠ¶æ€å˜åŒ–ã€‚å½“HTTP Sessionæœ€ç»ˆè¢«åºŸå¼ƒçš„æ—¶å€™ï¼Œåœ¨è¯¥HTTP Sessionä½œç”¨åŸŸå†…çš„beanä¹Ÿä¼šè¢«åºŸå¼ƒæ‰ã€‚</li>\n<li>â€global session ä½œç”¨åŸŸç±»ä¼¼äºæ ‡å‡†çš„HTTP Sessionä½œç”¨åŸŸï¼Œä¸è¿‡å®ƒä»…ä»…åœ¨åŸºäºportletçš„webåº”ç”¨ä¸­æ‰æœ‰æ„ä¹‰ã€‚Portletè§„èŒƒå®šä¹‰äº†å…¨å±€Sessionçš„æ¦‚å¿µï¼Œå®ƒè¢«æ‰€æœ‰æ„æˆæŸä¸ªportlet webåº”ç”¨çš„å„ç§ä¸åŒçš„portletæ‰€å…±äº«ã€‚åœ¨global sessionä½œç”¨åŸŸä¸­å®šä¹‰çš„beanè¢«é™å®šäºå…¨å±€portlet Sessionçš„ç”Ÿå‘½å‘¨æœŸèŒƒå›´å†…ã€‚åœ¨ä¸€ä¸ªæ ‡å‡†çš„åŸºäºServletçš„webåº”ç”¨ï¼Œå¹¶ä¸”å®šä¹‰äº†ä¸€ä¸ªæˆ–å¤šä¸ªå…·æœ‰global sessionä½œç”¨åŸŸçš„beanï¼Œç³»ç»Ÿä¼šä½¿ç”¨æ ‡å‡†çš„HTTP Sessionä½œç”¨åŸŸï¼Œå¹¶ä¸”ä¸ä¼šå¼•èµ·ä»»ä½•é”™è¯¯ã€‚</li>\n</ul>\n</li>\n<li>ä½œç”¨åŸŸä¾èµ–<ul>\n<li>Spring IoCå®¹å™¨é™¤äº†ç®¡ç†å¯¹è±¡ï¼ˆbeanï¼‰çš„å®ä¾‹åŒ–ï¼ŒåŒæ—¶è¿˜è´Ÿè´£åä½œè€…ï¼ˆæˆ–è€…å«ä¾èµ–ï¼‰çš„å®ä¾‹åŒ–ã€‚å¦‚æœå°†ä¸€ä¸ªHttp requestèŒƒå›´çš„beanæ³¨å…¥åˆ°å¦ä¸€ä¸ªbeanä¸­ï¼Œé‚£ä¹ˆéœ€è¦æ³¨å…¥ä¸€ä¸ªAOPä»£ç†æ¥æ›¿ä»£è¢«æ³¨å…¥çš„ä½œç”¨åŸŸbeanã€‚ä¹Ÿå°±æ˜¯è¯´éœ€è¦æ³¨å…¥ä¸€ä¸ªä»£ç†å¯¹è±¡ï¼Œè¯¥å¯¹è±¡å…·æœ‰ä¸è¢«ä»£ç†å¯¹è±¡ä¸€æ ·çš„å…¬å…±æ¥å£ï¼Œè€Œå®¹å™¨åˆ™å¯ä»¥è¶³å¤Ÿæ™ºèƒ½çš„ä»ç›¸å…³ä½œç”¨åŸŸä¸­ï¼ˆæ¯”å¦‚ä¸€ä¸ªHTTP requestï¼‰è·å–åˆ°çœŸå®çš„ç›®æ ‡å¯¹è±¡ï¼Œå¹¶æŠŠæ–¹æ³•è°ƒç”¨å§”æ´¾ç»™å®é™…çš„å¯¹è±¡ã€‚</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"SpringMVcä¸­Restfullé£æ ¼çš„ä½¿ç”¨ã€‚\"><a href=\"#SpringMVcä¸­Restfullé£æ ¼çš„ä½¿ç”¨ã€‚\" class=\"headerlink\" title=\"SpringMVcä¸­Restfullé£æ ¼çš„ä½¿ç”¨ã€‚\"></a>SpringMVcä¸­Restfullé£æ ¼çš„ä½¿ç”¨ã€‚</h3><ul>\n<li>restfull æ”¯æŒçš„è¯·æ±‚å¤´GET, HEAD, POST, PUT, PATCH, DELETE, OPTIONS, TRACE ã€‚</li>\n<li>é€šå¸¸æƒ…å†µä¸‹åªä½¿ç”¨ GET,PUT,POST,DELETEã€‚<ul>\n<li>GET é€šå¸¸ç”¨æ¥è·å–æ•°æ®ã€‚</li>\n<li>PUT é€šå¸¸ç”¨æ¥æ–°å¢æ•°æ®ã€‚</li>\n<li>POST é€šå¸¸ç”¨æ¥æ›´æ–°æ•°æ®ã€‚</li>\n<li>DELETE é€šå¸¸ç”¨æ¥åˆ é™¤æ•°æ®ã€‚</li>\n</ul>\n</li>\n</ul>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@RequestMapping</span>(value = <span class=\"string\">\"/get\"</span>, method = RequestMethod.GET)</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> Object <span class=\"title\">get</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">   <span class=\"keyword\">return</span> <span class=\"string\">\"200\"</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">@RequestMapping</span>(value = <span class=\"string\">\"/post\"</span>, method = RequestMethod.POST)</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> Object <span class=\"title\">post</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">   <span class=\"keyword\">return</span> <span class=\"string\">\"200\"</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">@RequestMapping</span>(value = <span class=\"string\">\"/delete\"</span>, method = RequestMethod.DELETE)</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> Object <span class=\"title\">delete</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">   <span class=\"keyword\">return</span> <span class=\"string\">\"200\"</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">@RequestMapping</span>(value = <span class=\"string\">\"/put\"</span>, method = RequestMethod.PUT)</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> Object <span class=\"title\">put</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">   <span class=\"keyword\">return</span> <span class=\"string\">\"200\"</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"SpringMvcçš„å¤„ç†æµç¨‹\"><a href=\"#SpringMvcçš„å¤„ç†æµç¨‹\" class=\"headerlink\" title=\"SpringMvcçš„å¤„ç†æµç¨‹\"></a>SpringMvcçš„å¤„ç†æµç¨‹</h3><p><img src=\"https://z201.oss-cn-shanghai.aliyuncs.com/JavaNote/SpringMvc%E8%AF%B7%E6%B1%82%E5%A4%84%E7%90%86%E6%B5%81%E7%A8%8B.png\"></p>\n<a id=\"more\"></a>\n\n<ul>\n<li>æºç åˆ†æ</li>\n</ul>\n<p><img src=\"https://z201.oss-cn-shanghai.aliyuncs.com/JavaNote/DispatcherServletUML.png\"></p>\n<ul>\n<li>DispatcherServletæ˜¯ç»§æ‰¿äº†FrameworkServletï¼Œè€ŒFrameworkServletåˆç»§æ‰¿äº†HttpServletBeanã€‚è¿½æº¯åˆ°æœ€ä¸Šå±‚å…¶å®å°±æ˜¯Servletã€‚é€šè¿‡æºç å¯ä»¥å‘ç°æœ€æ ¸å¿ƒçš„ä¸€ä¸ªæ–¹æ³•<code>doService()</code>ã€‚</li>\n</ul>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">\t * Exposes the DispatcherServlet-specific request attributes and delegates to &#123;<span class=\"doctag\">@link</span> #doDispatch&#125;</span></span><br><span class=\"line\"><span class=\"comment\">\t * for the actual dispatching.</span></span><br><span class=\"line\"><span class=\"comment\">\t */</span></span><br><span class=\"line\">\t<span class=\"meta\">@Override</span></span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">protected</span> <span class=\"keyword\">void</span> <span class=\"title\">doService</span><span class=\"params\">(HttpServletRequest request, HttpServletResponse response)</span> <span class=\"keyword\">throws</span> Exception </span>&#123;</span><br><span class=\"line\">\t\tlogRequest(request);</span><br><span class=\"line\"></span><br><span class=\"line\">\t\t<span class=\"comment\">// Keep a snapshot of the request attributes in case of an include,</span></span><br><span class=\"line\">\t\t<span class=\"comment\">// to be able to restore the original attributes after the include.</span></span><br><span class=\"line\">\t\tMap&lt;String, Object&gt; attributesSnapshot = <span class=\"keyword\">null</span>;</span><br><span class=\"line\">\t\t<span class=\"keyword\">if</span> (WebUtils.isIncludeRequest(request)) &#123;</span><br><span class=\"line\">\t\t\tattributesSnapshot = <span class=\"keyword\">new</span> HashMap&lt;&gt;();</span><br><span class=\"line\">\t\t\tEnumeration&lt;?&gt; attrNames = request.getAttributeNames();</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">while</span> (attrNames.hasMoreElements()) &#123;</span><br><span class=\"line\">\t\t\t\tString attrName = (String) attrNames.nextElement();</span><br><span class=\"line\">\t\t\t\t<span class=\"keyword\">if</span> (<span class=\"keyword\">this</span>.cleanupAfterInclude || attrName.startsWith(DEFAULT_STRATEGIES_PREFIX)) &#123;</span><br><span class=\"line\">\t\t\t\t\tattributesSnapshot.put(attrName, request.getAttribute(attrName));</span><br><span class=\"line\">\t\t\t\t&#125;</span><br><span class=\"line\">\t\t\t&#125;</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t\t<span class=\"comment\">// Make framework objects available to handlers and view objects.</span></span><br><span class=\"line\">\t\trequest.setAttribute(WEB_APPLICATION_CONTEXT_ATTRIBUTE, getWebApplicationContext());</span><br><span class=\"line\">\t\trequest.setAttribute(LOCALE_RESOLVER_ATTRIBUTE, <span class=\"keyword\">this</span>.localeResolver);</span><br><span class=\"line\">\t\trequest.setAttribute(THEME_RESOLVER_ATTRIBUTE, <span class=\"keyword\">this</span>.themeResolver);</span><br><span class=\"line\">\t\trequest.setAttribute(THEME_SOURCE_ATTRIBUTE, getThemeSource());</span><br><span class=\"line\"></span><br><span class=\"line\">\t\t<span class=\"keyword\">if</span> (<span class=\"keyword\">this</span>.flashMapManager != <span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">\t\t\tFlashMap inputFlashMap = <span class=\"keyword\">this</span>.flashMapManager.retrieveAndUpdate(request, response);</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">if</span> (inputFlashMap != <span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">\t\t\t\trequest.setAttribute(INPUT_FLASH_MAP_ATTRIBUTE, Collections.unmodifiableMap(inputFlashMap));</span><br><span class=\"line\">\t\t\t&#125;</span><br><span class=\"line\">\t\t\trequest.setAttribute(OUTPUT_FLASH_MAP_ATTRIBUTE, <span class=\"keyword\">new</span> FlashMap());</span><br><span class=\"line\">\t\t\trequest.setAttribute(FLASH_MAP_MANAGER_ATTRIBUTE, <span class=\"keyword\">this</span>.flashMapManager);</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t\t<span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">      <span class=\"comment\">//è¿›å…¥doDispatch</span></span><br><span class=\"line\">\t\t\tdoDispatch(request, response);</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t\t<span class=\"keyword\">finally</span> &#123;</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">if</span> (!WebAsyncUtils.getAsyncManager(request).isConcurrentHandlingStarted()) &#123;</span><br><span class=\"line\">\t\t\t\t<span class=\"comment\">// Restore the original attribute snapshot, in case of an include.</span></span><br><span class=\"line\">\t\t\t\t<span class=\"keyword\">if</span> (attributesSnapshot != <span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">\t\t\t\t\trestoreAttributesAfterInclude(request, attributesSnapshot);</span><br><span class=\"line\">\t\t\t\t&#125;</span><br><span class=\"line\">\t\t\t&#125;</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">\t * Process the actual dispatching to the handler.</span></span><br><span class=\"line\"><span class=\"comment\">\t * &lt;p&gt;The handler will be obtained by applying the servlet's HandlerMappings in order.</span></span><br><span class=\"line\"><span class=\"comment\">\t * The HandlerAdapter will be obtained by querying the servlet's installed HandlerAdapters</span></span><br><span class=\"line\"><span class=\"comment\">\t * to find the first that supports the handler class.</span></span><br><span class=\"line\"><span class=\"comment\">\t * &lt;p&gt;All HTTP methods are handled by this method. It's up to HandlerAdapters or handlers</span></span><br><span class=\"line\"><span class=\"comment\">\t * themselves to decide which methods are acceptable.</span></span><br><span class=\"line\"><span class=\"comment\">\t * <span class=\"doctag\">@param</span> request current HTTP request</span></span><br><span class=\"line\"><span class=\"comment\">\t * <span class=\"doctag\">@param</span> response current HTTP response</span></span><br><span class=\"line\"><span class=\"comment\">\t * <span class=\"doctag\">@throws</span> Exception in case of any kind of processing failure</span></span><br><span class=\"line\"><span class=\"comment\">\t */</span></span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">protected</span> <span class=\"keyword\">void</span> <span class=\"title\">doDispatch</span><span class=\"params\">(HttpServletRequest request, HttpServletResponse response)</span> <span class=\"keyword\">throws</span> Exception </span>&#123;</span><br><span class=\"line\">\t\tHttpServletRequest processedRequest = request;</span><br><span class=\"line\">\t\tHandlerExecutionChain mappedHandler = <span class=\"keyword\">null</span>;</span><br><span class=\"line\">\t\t<span class=\"keyword\">boolean</span> multipartRequestParsed = <span class=\"keyword\">false</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">\t\tWebAsyncManager asyncManager = WebAsyncUtils.getAsyncManager(request);</span><br><span class=\"line\"></span><br><span class=\"line\">\t\t<span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">\t\t\tModelAndView mv = <span class=\"keyword\">null</span>;</span><br><span class=\"line\">\t\t\tException dispatchException = <span class=\"keyword\">null</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">\t\t\t<span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">        <span class=\"comment\">// å…ˆå¤„ç†æ˜¯å¦Multipartçš„è¯·æ±‚ï¼Œå¦‚æœæ˜¯åˆ™ä¼šè§£æï¼Œå¹¶ä¸”è¿”å›ä¸€ä¸ªè§£æåçš„è¯·æ±‚ã€‚</span></span><br><span class=\"line\">\t\t\t\tprocessedRequest = checkMultipart(request);</span><br><span class=\"line\">\t\t\t\tmultipartRequestParsed = (processedRequest != request);</span><br><span class=\"line\">\t\t\t\t<span class=\"comment\">// å¯»æ‰¾å¯¹åº”çš„handler</span></span><br><span class=\"line\">\t\t\t\t<span class=\"comment\">// Determine handler for the current request.</span></span><br><span class=\"line\">\t\t\t\tmappedHandler = getHandler(processedRequest);</span><br><span class=\"line\">\t\t\t\t<span class=\"keyword\">if</span> (mappedHandler == <span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">          <span class=\"comment\">// æ²¡æœ‰æ‰¾åˆ°åˆ™ç›´æ¥è¿”å›é»˜è®¤404è§†å›¾ã€‚</span></span><br><span class=\"line\">\t\t\t\t\tnoHandlerFound(processedRequest, response);</span><br><span class=\"line\">\t\t\t\t\t<span class=\"keyword\">return</span>;</span><br><span class=\"line\">\t\t\t\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t\t\t\t<span class=\"comment\">// Determine handler adapter for the current request.</span></span><br><span class=\"line\">\t\t\t\tHandlerAdapter ha = getHandlerAdapter(mappedHandler.getHandler());</span><br><span class=\"line\"></span><br><span class=\"line\">\t\t\t\t<span class=\"comment\">// Process last-modified header, if supported by the handler.</span></span><br><span class=\"line\">\t\t\t\tString method = request.getMethod();</span><br><span class=\"line\">\t\t\t\t<span class=\"keyword\">boolean</span> isGet = <span class=\"string\">\"GET\"</span>.equals(method);</span><br><span class=\"line\">\t\t\t\t<span class=\"keyword\">if</span> (isGet || <span class=\"string\">\"HEAD\"</span>.equals(method)) &#123;</span><br><span class=\"line\">\t\t\t\t\t<span class=\"keyword\">long</span> lastModified = ha.getLastModified(request, mappedHandler.getHandler());</span><br><span class=\"line\">\t\t\t\t\t<span class=\"keyword\">if</span> (<span class=\"keyword\">new</span> ServletWebRequest(request, response).checkNotModified(lastModified) &amp;&amp; isGet) &#123;</span><br><span class=\"line\">\t\t\t\t\t\t<span class=\"keyword\">return</span>;</span><br><span class=\"line\">\t\t\t\t\t&#125;</span><br><span class=\"line\">\t\t\t\t&#125;</span><br><span class=\"line\">\t\t\t\t<span class=\"comment\">// å‰ç½®æ‹¦æˆªå™¨</span></span><br><span class=\"line\">\t\t\t\t<span class=\"keyword\">if</span> (!mappedHandler.applyPreHandle(processedRequest, response)) &#123;</span><br><span class=\"line\">\t\t\t\t\t<span class=\"keyword\">return</span>;</span><br><span class=\"line\">\t\t\t\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t\t\t\t<span class=\"comment\">// Actually invoke the handler.</span></span><br><span class=\"line\">        <span class=\"comment\">// å¦‚æœä¸Šé¢çš„æµç¨‹éƒ½æ‰§è¡Œå®Œæˆï¼Œåœ¨æ‰§è¡ŒçœŸå®çš„handle</span></span><br><span class=\"line\">\t\t\t\tmv = ha.handle(processedRequest, response, mappedHandler.getHandler());</span><br><span class=\"line\">\t\t\t</span><br><span class=\"line\">        <span class=\"comment\">// å¦‚æœæ˜¯å¼‚æ­¥çš„å°±ç›´æ¥ç»“æŸã€‚</span></span><br><span class=\"line\">\t\t\t\t<span class=\"keyword\">if</span> (asyncManager.isConcurrentHandlingStarted()) &#123;</span><br><span class=\"line\">\t\t\t\t\t<span class=\"keyword\">return</span>;</span><br><span class=\"line\">\t\t\t\t&#125;</span><br><span class=\"line\">\t\t\t\t<span class=\"comment\">// è§†å›¾è§£æ</span></span><br><span class=\"line\">\t\t\t\tapplyDefaultViewName(processedRequest, mv);</span><br><span class=\"line\">        <span class=\"comment\">//æ‰§è¡Œåç½®æ‹¦æˆªå™¨</span></span><br><span class=\"line\">\t\t\t\tmappedHandler.applyPostHandle(processedRequest, response, mv);</span><br><span class=\"line\">\t\t\t&#125;</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">catch</span> (Exception ex) &#123;</span><br><span class=\"line\">\t\t\t\tdispatchException = ex;</span><br><span class=\"line\">\t\t\t&#125;</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">catch</span> (Throwable err) &#123;</span><br><span class=\"line\">\t\t\t\t<span class=\"comment\">// As of 4.3, we're processing Errors thrown from handler methods as well,</span></span><br><span class=\"line\">\t\t\t\t<span class=\"comment\">// making them available for @ExceptionHandler methods and other scenarios.</span></span><br><span class=\"line\">\t\t\t\tdispatchException = <span class=\"keyword\">new</span> NestedServletException(<span class=\"string\">\"Handler dispatch failed\"</span>, err);</span><br><span class=\"line\">\t\t\t&#125;</span><br><span class=\"line\">      </span><br><span class=\"line\">      <span class=\"comment\">// å“åº”è§†å›¾</span></span><br><span class=\"line\">\t\t\tprocessDispatchResult(processedRequest, response, mappedHandler, mv, dispatchException);</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t\t<span class=\"keyword\">catch</span> (Exception ex) &#123;</span><br><span class=\"line\">\t\t\ttriggerAfterCompletion(processedRequest, response, mappedHandler, ex);</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t\t<span class=\"keyword\">catch</span> (Throwable err) &#123;</span><br><span class=\"line\">\t\t\ttriggerAfterCompletion(processedRequest, response, mappedHandler,</span><br><span class=\"line\">\t\t\t\t\t<span class=\"keyword\">new</span> NestedServletException(<span class=\"string\">\"Handler processing failed\"</span>, err));</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t\t<span class=\"keyword\">finally</span> &#123;</span><br><span class=\"line\">      <span class=\"comment\">// æ²¡æœ‰æŠ›å¼‚å¸¸ä¹Ÿä¼šåˆ¤æ–­æ˜¯å¦å¼‚æ­¥ï¼Œå¦‚æœæ˜¯å¼‚æ­¥ä¹Ÿä¼šæ‰§è¡Œæ‹¦æˆªå™¨ã€‚</span></span><br><span class=\"line\">\t\t\t<span class=\"keyword\">if</span> (asyncManager.isConcurrentHandlingStarted()) &#123;</span><br><span class=\"line\">\t\t\t\t<span class=\"comment\">// Instead of postHandle and afterCompletion</span></span><br><span class=\"line\">\t\t\t\t<span class=\"keyword\">if</span> (mappedHandler != <span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">\t\t\t\t\tmappedHandler.applyAfterConcurrentHandlingStarted(processedRequest, response);</span><br><span class=\"line\">\t\t\t\t&#125;</span><br><span class=\"line\">\t\t\t&#125;</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">\t\t\t\t<span class=\"comment\">// Clean up any resources used by a multipart request.</span></span><br><span class=\"line\">\t\t\t\t<span class=\"keyword\">if</span> (multipartRequestParsed) &#123;</span><br><span class=\"line\">\t\t\t\t\tcleanupMultipart(processedRequest);</span><br><span class=\"line\">\t\t\t\t&#125;</span><br><span class=\"line\">\t\t\t&#125;</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">\t * Return the HandlerExecutionChain for this request.</span></span><br><span class=\"line\"><span class=\"comment\">\t * &lt;p&gt;Tries all handler mappings in order.</span></span><br><span class=\"line\"><span class=\"comment\">\t * <span class=\"doctag\">@param</span> request current HTTP request</span></span><br><span class=\"line\"><span class=\"comment\">\t * <span class=\"doctag\">@return</span> the HandlerExecutionChain, or &#123;<span class=\"doctag\">@code</span> null&#125; if no handler could be found</span></span><br><span class=\"line\"><span class=\"comment\">\t */</span></span><br><span class=\"line\">\t<span class=\"meta\">@Nullable</span></span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">protected</span> HandlerExecutionChain <span class=\"title\">getHandler</span><span class=\"params\">(HttpServletRequest request)</span> <span class=\"keyword\">throws</span> Exception </span>&#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">if</span> (<span class=\"keyword\">this</span>.handlerMappings != <span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">      <span class=\"comment\">// éå†æ‰€æœ‰çš„HandlerMappingæ‰¾å‡ºå¯¹åº”çš„HandlerExecutionChain</span></span><br><span class=\"line\">\t\t\t<span class=\"keyword\">for</span> (HandlerMapping mapping : <span class=\"keyword\">this</span>.handlerMappings) &#123;</span><br><span class=\"line\">\t\t\t\tHandlerExecutionChain handler = mapping.getHandler(request);</span><br><span class=\"line\">\t\t\t\t<span class=\"keyword\">if</span> (handler != <span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">\t\t\t\t\t<span class=\"keyword\">return</span> handler;</span><br><span class=\"line\">\t\t\t\t&#125;</span><br><span class=\"line\">\t\t\t&#125;</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t\t<span class=\"keyword\">return</span> <span class=\"keyword\">null</span>;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">\t * Apply postHandle methods of registered interceptors.</span></span><br><span class=\"line\"><span class=\"comment\">\t */</span></span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">applyPostHandle</span><span class=\"params\">(HttpServletRequest request, HttpServletResponse response, @Nullable ModelAndView mv)</span></span></span><br><span class=\"line\"><span class=\"function\">\t\t\t<span class=\"keyword\">throws</span> Exception </span>&#123;</span><br><span class=\"line\">\t\t<span class=\"comment\">// å–å‡ºæ‰€æœ‰æ‹¦æˆªå™¨ï¼Œéå†æ‹¦æˆªå™¨</span></span><br><span class=\"line\">\t\tHandlerInterceptor[] interceptors = getInterceptors();</span><br><span class=\"line\">\t\t<span class=\"keyword\">if</span> (!ObjectUtils.isEmpty(interceptors)) &#123;</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> i = interceptors.length - <span class=\"number\">1</span>; i &gt;= <span class=\"number\">0</span>; i--) &#123;</span><br><span class=\"line\">\t\t\t\tHandlerInterceptor interceptor = interceptors[i];</span><br><span class=\"line\">\t\t\t\tinterceptor.postHandle(request, response, <span class=\"keyword\">this</span>.handler, mv);</span><br><span class=\"line\">\t\t\t&#125;</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"å†…åµŒwebå®¹å™¨\"><a href=\"#å†…åµŒwebå®¹å™¨\" class=\"headerlink\" title=\"å†…åµŒwebå®¹å™¨\"></a>å†…åµŒwebå®¹å™¨</h3><blockquote>\n<p>spring boot å¯ä»¥åˆ‡æ¢webå®¹å™¨ï¼Œé€šè¿‡spring boot spiæœºåˆ¶ï¼Œå¼•å…¥ä¸åŒçš„webå®¹å™¨å¹¶å±è”½é»˜è®¤tomcatå®Œæˆåˆ‡æ¢webå®¹å™¨ã€‚</p>\n</blockquote>\n<ul>\n<li>spring-boot-starter-tomcat</li>\n<li>Spring-boot-starter-jettty</li>\n<li>Spring-boot-starter-undertow</li>\n<li>spring-boot-starter-reactor-netty</li>\n</ul>\n<h4 id=\"webé…ç½®\"><a href=\"#webé…ç½®\" class=\"headerlink\" title=\"webé…ç½®\"></a>webé…ç½®</h4><blockquote>\n<p>webå®¹å™¨é…ç½®ä¿¡æ¯åˆ†ä¸ºä¸¤ç§ï¼Œé…ç½®æ–‡ä»¶å’Œä»£ç é…ç½®ã€‚è¿™é‡Œä¸»è¦è¯´ä¸‹ä»£ç é…ç½®ã€‚</p>\n</blockquote>\n<ul>\n<li>WebServerFactoryCustomizer<T><ul>\n<li>TomcatServletWebServerFactory</li>\n<li>JettyServletWebServerFactory</li>\n<li>UndertowServletWebServerFactory</li>\n</ul>\n</li>\n</ul>\n","categories":["æŸ¥ç¼ºè¡¥æ¼"],"tags":["Java","Spring"]},{"title":"æŸ¥ç¼ºè¡¥æ¼-Spring","url":"/posts/4279462154/","content":"<blockquote>\n<p>æœ¬ç« æ˜¯æ•´ç†çŸ¥è¯†å†…å®¹ï¼Œä¸ºå¼ºåŒ–çŸ¥è¯†é•¿æœŸæ›´æ–°ã€‚</p>\n</blockquote>\n<p><img src=\"https://z201.oss-cn-shanghai.aliyuncs.com/JavaNote/SpringFrameworkRutime.png\"></p>\n<h3 id=\"Spring\"><a href=\"#Spring\" class=\"headerlink\" title=\"Spring\"></a>Spring</h3><ul>\n<li><p>Springæ˜¯ä¸€ä¸ªè½»é‡çº§çš„IoCå’ŒAOPå®¹å™¨æ¡†æ¶ã€‚æ˜¯ä¸ºJavaåº”ç”¨ç¨‹åºæä¾›åŸºç¡€æ€§æœåŠ¡çš„ä¸€å¥—æ¡†æ¶ï¼Œç›®çš„æ˜¯ç”¨äºç®€åŒ–ä¼ä¸šåº”ç”¨ç¨‹åºçš„å¼€å‘ï¼Œå®ƒä½¿å¾—å¼€å‘è€…åªéœ€è¦å…³å¿ƒä¸šåŠ¡éœ€æ±‚ã€‚</p>\n</li>\n<li><p>ä¸»è¦ç”±ä»¥ä¸‹å‡ ä¸ªæ¨¡å—ç»„æˆï¼š</p>\n<ul>\n<li>Spring Coreï¼šæ ¸å¿ƒç±»åº“ï¼Œæä¾›IOCæœåŠ¡</li>\n<li>Spring Contextï¼šæä¾›æ¡†æ¶å¼çš„Beanè®¿é—®æ–¹å¼ï¼Œä»¥åŠä¼ä¸šçº§åŠŸèƒ½ï¼ˆJNDIã€å®šæ—¶ä»»åŠ¡ç­‰ï¼‰</li>\n<li>Spring AOPï¼šAOPæœåŠ¡åˆ‡é¢ç¼–ç¨‹</li>\n<li>Spring DAOï¼šå¯¹JDBCçš„æŠ½è±¡ï¼Œç®€åŒ–äº†æ•°æ®è®¿é—®å¼‚å¸¸çš„å¤„ç†</li>\n<li>Spring ORMï¼šå¯¹ç°æœ‰çš„ORMæ¡†æ¶çš„æ”¯æŒ</li>\n<li>Spring Webï¼šæä¾›äº†åŸºæœ¬çš„é¢å‘Webçš„ç»¼åˆç‰¹æ€§ï¼Œä¾‹å¦‚å¤šæ–¹æ–‡ä»¶ä¸Šä¼ </li>\n<li>Spring MVCï¼šæä¾›é¢å‘Webåº”ç”¨çš„Model-View-Controllerå®ç°</li>\n</ul>\n</li>\n<li><p>IoCï¼ˆInversion of Controlï¼Œç¿»è¯‘ä¸ºâ€œæ§åˆ¶åè½¬â€ï¼‰ä¸æ˜¯ä¸€ä¸ªå…·ä½“çš„æŠ€æœ¯ï¼Œè€Œæ˜¯ä¸€ç§è®¾è®¡æ€æƒ³ã€‚ä¸ä¼ ç»Ÿæ§åˆ¶æµç›¸æ¯”ï¼ŒIoC ä¼šé¢ å€’æ§åˆ¶æµï¼Œåœ¨ä¼ ç»Ÿçš„ç¼–ç¨‹ä¸­éœ€è¦å¼€å‘è€…è‡ªè¡Œåˆ›å»ºå¹¶é”€æ¯å¯¹è±¡ï¼Œè€Œåœ¨ IoC ä¸­ä¼šæŠŠè¿™äº›æ“ä½œäº¤ç»™æ¡†æ¶æ¥å¤„ç†ï¼Œè¿™æ ·å¼€å‘è€…å°±ä¸ç”¨å…³æ³¨å…·ä½“çš„å®ç°ç»†èŠ‚äº†ï¼Œæ‹¿æ¥ç›´æ¥ç”¨å°±å¯ä»¥äº†ï¼Œè¿™å°±æ˜¯æ§åˆ¶åè½¬ã€‚</p>\n</li>\n<li><p>IoC å¾ˆå¥½çš„ä½“ç°å‡ºäº†é¢å‘å¯¹è±¡çš„è®¾è®¡æ³•åˆ™ä¹‹ä¸€â€”â€”å¥½è±åæ³•åˆ™ï¼šâ€œåˆ«æ‰¾æˆ‘ä»¬ï¼Œæˆ‘ä»¬æ‰¾ä½ â€ã€‚å³ç”± IoC å®¹å™¨å¸®å¯¹è±¡æ‰¾åˆ°ç›¸åº”çš„ä¾èµ–å¯¹è±¡å¹¶æ³¨å…¥ï¼Œè€Œä¸æ˜¯ç”±å¯¹è±¡ä¸»åŠ¨å»æ‰¾ã€‚</p>\n</li>\n<li><p>DIï¼ˆDependency Injectionï¼Œç¿»è¯‘ä¸ºâ€œä¾èµ–æ³¨å…¥â€ï¼‰è¡¨ç¤ºç»„ä»¶é—´çš„ä¾èµ–å…³ç³»äº¤ç”±å®¹å™¨åœ¨è¿è¡ŒæœŸè‡ªåŠ¨ç”Ÿæˆï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œç”±å®¹å™¨åŠ¨æ€çš„å°†æŸä¸ªä¾èµ–å…³ç³»æ³¨å…¥åˆ°ç»„ä»¶ä¹‹ä¸­ï¼Œè¿™æ ·å°±èƒ½æå‡ç»„ä»¶çš„é‡ç”¨é¢‘ç‡ã€‚é€šè¿‡ä¾èµ–æ³¨å…¥æœºåˆ¶ï¼Œæˆ‘ä»¬åªéœ€è¦é€šè¿‡ç®€å•çš„é…ç½®ï¼Œå°±å¯æŒ‡å®šç›®æ ‡éœ€è¦çš„èµ„æºï¼Œå®Œæˆè‡ªèº«çš„ä¸šåŠ¡é€»è¾‘ï¼Œè€Œä¸éœ€è¦å…³å¿ƒèµ„æºæ¥è‡ªå“ªé‡Œã€ç”±è°å®ç°ç­‰é—®é¢˜ã€‚</p>\n</li>\n<li><p>IoC å’Œ DI å…¶å®æ˜¯åŒä¸€ä¸ªæ¦‚å¿µä»ä¸åŒè§’åº¦çš„æè¿°çš„ï¼Œç”±äºæ§åˆ¶åè½¬è¿™ä¸ªæ¦‚å¿µæ¯”è¾ƒå«ç³Šï¼ˆå¯èƒ½åªç†è§£æˆäº†å®¹å™¨æ§åˆ¶å¯¹è±¡è¿™ä¸€ä¸ªå±‚é¢ï¼Œå¾ˆéš¾è®©äººæƒ³åˆ°è°æ¥ç»´æŠ¤å¯¹è±¡å…³ç³»ï¼‰ï¼Œæ‰€ä»¥ 2004 å¹´è¢«å¼€å‘è€…å°Šç§°ä¸ºâ€œæ•™çˆ¶â€çš„ Martin Fowlerï¼ˆä¸–ç•Œé¡¶çº§ä¸“å®¶ï¼Œæ•æ·å¼€å‘æ–¹æ³•çš„åˆ›å§‹äººä¹‹ä¸€ï¼‰åˆç»™å‡ºäº†ä¸€ä¸ªæ–°çš„åå­—â€œä¾èµ–æ³¨å…¥â€ï¼Œç›¸å¯¹ IoC è€Œè¨€ï¼Œâ€œä¾èµ–æ³¨å…¥â€æ˜ç¡®æè¿°äº†â€œè¢«æ³¨å…¥å¯¹è±¡ä¾èµ– IoC å®¹å™¨é…ç½®ä¾èµ–å¯¹è±¡â€ã€‚</p>\n</li>\n</ul>\n<h4 id=\"ä¾èµ–æ³¨å…¥\"><a href=\"#ä¾èµ–æ³¨å…¥\" class=\"headerlink\" title=\"ä¾èµ–æ³¨å…¥\"></a>ä¾èµ–æ³¨å…¥</h4><ul>\n<li>å¹³å¸¸çš„Javaå¼€å‘ä¸­ï¼Œç¨‹åºå‘˜åœ¨æŸä¸ªç±»ä¸­éœ€è¦ä¾èµ–å…¶å®ƒç±»çš„æ–¹æ³•ã€‚é€šå¸¸æ˜¯newä¸€ä¸ªä¾èµ–ç±»å†è°ƒç”¨ç±»å®ä¾‹çš„æ–¹æ³•ï¼Œè¿™ç§å¼€å‘å­˜åœ¨çš„é—®é¢˜æ˜¯newçš„ç±»å®ä¾‹ä¸å¥½ç»Ÿä¸€ç®¡ç†ã€‚ Springæå‡ºäº†ä¾èµ–æ³¨å…¥çš„æ€æƒ³ï¼Œå³ä¾èµ–ç±»ä¸ç”±ç¨‹åºå‘˜å®ä¾‹åŒ–ï¼Œè€Œæ˜¯é€šè¿‡Springå®¹å™¨å¸®æˆ‘ä»¬newæŒ‡å®šå®ä¾‹å¹¶ä¸”å°†å®ä¾‹æ³¨å…¥åˆ°éœ€è¦è¯¥å¯¹è±¡çš„ç±»ä¸­ã€‚ä¾èµ–æ³¨å…¥çš„å¦ä¸€ç§è¯´æ³•æ˜¯â€æ§åˆ¶åè½¬â€ã€‚é€šä¿—çš„ç†è§£æ˜¯ï¼šå¹³å¸¸æˆ‘ä»¬newä¸€ä¸ªå®ä¾‹ï¼Œè¿™ä¸ªå®ä¾‹çš„æ§åˆ¶æƒæ˜¯æˆ‘ä»¬ç¨‹åºå‘˜ã€‚è€Œæ§åˆ¶åè½¬æ˜¯æŒ‡newå®ä¾‹å·¥ä½œä¸ç”±æˆ‘ä»¬ç¨‹åºå‘˜æ¥åšè€Œæ˜¯äº¤ç»™Springå®¹å™¨æ¥åšã€‚</li>\n<li>IOCå¯¹äºSpringæ¡†æ¶æ¥è¯´ï¼Œå°±æ˜¯ç”±Springæ¥è´Ÿè´£æ§åˆ¶å¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸå’Œå¯¹è±¡é—´çš„å…³ç³»ã€‚</li>\n<li>æ‰€è°“ä¾èµ–æ³¨å…¥ï¼Œå°±æ˜¯ç”±IOCå®¹å™¨åœ¨è¿è¡ŒæœŸé—´ï¼ŒåŠ¨æ€åœ°å°†æŸç§ä¾èµ–å…³ç³»æ³¨å…¥åˆ°å¯¹è±¡ä¹‹ä¸­ï¼Œæ‰€ä»¥ï¼Œä»¥æ¥æ³¨å…¥DI å’Œæ§åˆ¶åè½¬IOC æ˜¯ä»ä¸åŒçš„è§’åº¦æè¿°çš„åŒä¸€é—´äº‹æƒ…ï¼Œå°±æ˜¯å€¼é€šè¿‡å¼•ç”¨IOCå®¹å™¨ï¼Œåˆ©ç”¨ä»¥æ¥å…³ç³»æ³¨å…¥çš„æ–¹å¼ï¼Œå®ç°å¯¹è±¡ä¹‹é—´çš„è§£è€¦ã€‚</li>\n</ul>\n<p><img src=\"https://z201.oss-cn-shanghai.aliyuncs.com/JavaNote/SpringIoc%E5%88%9D%E5%A7%8B%E5%8C%96%E8%BF%87%E7%A8%8B.png\"></p>\n<h4 id=\"æ³¨å…¥æ–¹å¼\"><a href=\"#æ³¨å…¥æ–¹å¼\" class=\"headerlink\" title=\"æ³¨å…¥æ–¹å¼\"></a>æ³¨å…¥æ–¹å¼</h4><ul>\n<li>Setæ³¨å…¥ã€‚</li>\n<li>æ„é€ æ–¹æ³•æ³¨å…¥ã€‚</li>\n<li>å·¥å‚çš„æ–¹æ³•æ³¨å…¥ã€‚</li>\n<li>é€šè¿‡å±æ€§æ³¨å…¥ã€‚</li>\n<li>é€šè¿‡Listæ³¨å…¥ã€‚</li>\n<li>é€šè¿‡Mapæ³¨å…¥ã€‚</li>\n</ul>\n<h3 id=\"Spring-AOP\"><a href=\"#Spring-AOP\" class=\"headerlink\" title=\"Spring AOP\"></a>Spring AOP</h3><ul>\n<li><p>AOP(Aspect-Oriented Programming:â¾¯å‘åˆ‡â¾¯ç¼–ç¨‹)èƒ½å¤Ÿå°†é‚£äº›ä¸ä¸šåŠ¡â½†å…³ï¼Œå´ä¸ºä¸šåŠ¡æ¨¡å—æ‰€å…±åŒè°ƒâ½¤çš„é€»è¾‘æˆ–è´£ä»»ï¼ˆä¾‹å¦‚äº‹åŠ¡å¤„ç†ã€â½‡å¿—ç®¡ç†ã€æƒé™æ§åˆ¶ç­‰ï¼‰å°è£…èµ·æ¥ï¼Œä¾¿äºå‡å°‘ç³»ç»Ÿçš„é‡å¤ä»£ç ï¼Œé™ä½æ¨¡å—é—´çš„è€¦åˆåº¦ï¼Œå¹¶æœ‰åˆ©äºæœªæ¥çš„å¯æ‹“å±•æ€§å’Œå¯ç»´æŠ¤æ€§ã€‚</p>\n<ul>\n<li><strong>Spring AOP</strong>å°±æ˜¯åŸºäºåŠ¨æ€ä»£ç†çš„ï¼Œå¦‚æœè¦ä»£ç†çš„å¯¹è±¡ï¼Œå®ç°äº†æŸä¸ªæ¥â¼ï¼Œé‚£ä¹ˆSpring AOPä¼šä½¿â½¤<strong>JDK</strong> Proxyï¼Œå»åˆ›å»ºä»£ç†å¯¹è±¡ï¼Œâ½½å¯¹äºæ²¡æœ‰å®ç°æ¥â¼çš„å¯¹è±¡ï¼Œå°±â½†æ³•ä½¿â½¤ JDK Proxy å»è¿›â¾ä»£ç†äº†ï¼Œè¿™æ—¶å€™Spring AOPä¼šä½¿â½¤<strong>Cglib</strong> ï¼Œè¿™æ—¶å€™Spring AOPä¼šä½¿â½¤ <strong>Cglib</strong> â½£æˆâ¼€ä¸ªè¢«ä»£ç†å¯¹è±¡çš„â¼¦ç±»æ¥ä½œä¸ºä»£ç†ã€‚</li>\n</ul>\n<p><img src=\"https://z201.oss-cn-shanghai.aliyuncs.com/JavaNote/SpringAopProcess.png\"></p>\n<ul>\n<li>Spring Aopæ˜¯è¿è¡Œæ—¶å¢å¼ºã€‚</li>\n<li>Cglib Aopæ˜¯ç¼–è¯‘å™¨å¢å¼ºã€‚</li>\n</ul>\n</li>\n<li><p>AOPä¸“é—¨ç”¨äºå¤„ç†ç³»ç»Ÿä¸­åˆ†å¸ƒäºå„ä¸ªæ¨¡å—ä¸­äº¤å‰å…³æ³¨ç‚¹çš„é—®é¢˜ï¼Œåœ¨JavaEEåº”ç”¨ä¸­ï¼Œå¸¸å¸¸é€šè¿‡AOPæ¥å¤„ç†ä¸€äº›æ¨ªåˆ‡æ€§è´¨çš„ç³»ç»Ÿçº§æœåŠ¡ï¼Œå¦‚äº‹ç‰©ç®¡ç†ã€å®‰å…¨æ£€æŸ¥ã€ç¼“å­˜å¯¹è±¡æ± ç®¡ç†ã€‚</p>\n<ul>\n<li>1.ï¼‰åˆ‡é¢ -Aspect åˆ‡é¢ç±» æ¯”å¦‚æ—¥å¿—ç±»</li>\n<li>2.ï¼‰ è¿æ¥ç‚¹ - Join Point åŠ å…¥åˆ‡ç‚¹çš„é‚£ä¸ªç‚¹</li>\n<li>3.ï¼‰é€šçŸ¥ -Advice æ˜¯åœ¨åˆ‡é¢æŸä¸ªç‰¹å®šçš„è¿æ¥ç‚¹ä¸Šçš„åŠ¨ä½œã€‚</li>\n<li>4.ï¼‰åˆ‡å…¥ç‚¹ - Point Cut åŒ¹é…è¿æ¥ç‚¹çš„æ–­ç‚¹</li>\n<li>5.ï¼‰å¼•å…¥ - Introduction </li>\n<li>6.ï¼‰ç›®æ ‡å¯¹è±¡ - Target Object è¢«ä¸€ä¸ªæˆ–å¤šä¸ªé€šçŸ¥å¯¹è±¡ï¼Œæ°¸è¿œè¢«ä»£ç†çš„å¯¹è±¡ã€‚</li>\n<li>7.ï¼‰ AOPä»£ç† - AOP Proxy AOPåˆ›å»ºçš„å¯¹è±¡ç”¨æ¥å®ç°åˆ‡é¢å¯¹è±¡ã€‚</li>\n<li>8.ï¼‰ç»‡å…¥ - Weaving </li>\n<li>9.ï¼‰AOPé€šä¿—çš„ç†è§£ï¼š<ul>\n<li>ä¸€ä¸ªç»„å»ºAï¼Œä¸å…³å¿ƒå…¶ä»–å¸¸ç”¨çš„æœåŠ¡ç»„ä»¶Bï¼Œä½†æ˜¯è¿™ä¸ªç»„ä»¶Aä½¿ç”¨ç»„ä»¶Bçš„æ—¶å€™ä¸æ˜¯ç»„å»ºAè‡ªèº«å»è°ƒç”¨ï¼Œè€Œæ˜¯é€šè¿‡é…ç½®ç­‰å…¶ä»–æ–¹å¼ï¼Œæ¯”å¦‚Springä¸­å¯ä»¥é€šè¿‡XMLé…ç½®æ–‡ä»¶ã€‚è¿™æ ·å°±ä½¿çš„Aå‹æ ¹ä¸éœ€è¦çŸ¥é“æœåŠ¡ç»„ä»¶Bæ˜¯æ€ä¹ˆæ ·çš„ï¼ŒAåªå…³å¿ƒè‡ªå·±çš„ä¸šåŠ¡é€»è¾‘ï¼Œå…·ä½“Aä½¿ç”¨Bçš„æ—¶å€™ï¼Œé…ç½®æ–‡ä»¶å»åšï¼Œä¸å…·ä½“çš„Aç»„ä»¶æ— å…³ã€‚</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"Springæ¡†æ¶ä¸­çš„è®¾è®¡æ¨¡å¼\"><a href=\"#Springæ¡†æ¶ä¸­çš„è®¾è®¡æ¨¡å¼\" class=\"headerlink\" title=\"Springæ¡†æ¶ä¸­çš„è®¾è®¡æ¨¡å¼\"></a>Springæ¡†æ¶ä¸­çš„è®¾è®¡æ¨¡å¼</h3><ul>\n<li>å·¥å‚æ¨¡å¼ï¼šBeanFactoryå°±æ˜¯ç®€å•å·¥å‚æ¨¡å¼çš„ä½“ç°ï¼Œç”¨æ¥åˆ›å»ºå¯¹è±¡çš„å®ä¾‹</li>\n<li>å•ä¾‹æ¨¡å¼ï¼šBeané»˜è®¤ä¸ºå•ä¾‹æ¨¡å¼</li>\n<li>ä»£ç†æ¨¡å¼ï¼šSpringçš„AOPåŠŸèƒ½ç”¨åˆ°äº†JDKçš„åŠ¨æ€ä»£ç†å’ŒCGLIBå­—èŠ‚ç ç”ŸæˆæŠ€æœ¯</li>\n<li>æ¨¡æ¿æ–¹æ³•ï¼šç”¨æ¥è§£å†³ä»£ç é‡å¤çš„é—®é¢˜ã€‚æ¯”å¦‚. RestTemplate, JmsTemplate, JpaTemplate</li>\n<li>è§‚å¯Ÿè€…æ¨¡å¼ï¼šå®šä¹‰å¯¹è±¡é”®ä¸€ç§ä¸€å¯¹å¤šçš„ä¾èµ–å…³ç³»ï¼Œå½“ä¸€ä¸ªå¯¹è±¡çš„çŠ¶æ€å‘ç”Ÿæ”¹å˜æ—¶ï¼Œæ‰€æœ‰ä¾èµ–äºå®ƒçš„å¯¹è±¡éƒ½ä¼šå¾—åˆ°é€šçŸ¥è¢«åˆ¶åŠ¨æ›´æ–°ï¼Œå¦‚Springä¸­listenerçš„å®ç°â€“ApplicationListenerï¼ŒSpring äº‹ä»¶é©±åŠ¨æ¨¡å‹å°±æ˜¯è§‚å¯Ÿè€…æ¨¡å¼å¾ˆç»å…¸çš„â¼€ä¸ªåº”â½¤ã€‚</li>\n<li>é€‚é…å™¨æ¨¡å¼ :Spring AOP çš„å¢å¼ºæˆ–é€šçŸ¥(Advice)ä½¿â½¤åˆ°äº†é€‚é…å™¨æ¨¡å¼ã€spring MVC ä¸­ä¹Ÿæ˜¯â½¤åˆ°äº†é€‚é…å™¨æ¨¡å¼é€‚é… Controller ã€‚</li>\n<li>ç­–ç•¥æ¨¡å¼ï¼š Beançš„å®ä¾‹åŒ–çš„æ—¶å€™å†³å®šé‡‡ç”¨ä½•ç§æ–¹å¼åˆå§‹åŒ–beanå®ä¾‹ï¼ˆåå°„æˆ–è€…CGLIBåŠ¨æ€å­—èŠ‚ç ç”Ÿæˆï¼‰ï¼ŒResource æ¥å£æ˜¯å…·ä½“èµ„æºè®¿é—®ç­–ç•¥çš„æŠ½è±¡ã€‚</li>\n<li>è£…é¥°å™¨æ¨¡å¼ï¼šSpringä¸­ç”¨åˆ°çš„åŒ…è£…å™¨æ¨¡å¼åœ¨ç±»åä¸Šæœ‰ä¸¤ç§è¡¨ç°ï¼šä¸€ç§æ˜¯ç±»åä¸­å«æœ‰Wrapperï¼Œå¦ä¸€ç§æ˜¯ç±»åä¸­å«æœ‰Decoratorã€‚</li>\n<li>æ¨¡ç‰ˆæ¨¡å¼ï¼šSpring Template éƒ½é‡‡ç”¨äº†è¯¥æ¨¡å¼ã€‚</li>\n</ul>\n<h3 id=\"Springä¸­Autowiredå’ŒResourceå…³é”®å­—\"><a href=\"#Springä¸­Autowiredå’ŒResourceå…³é”®å­—\" class=\"headerlink\" title=\"Springä¸­Autowiredå’ŒResourceå…³é”®å­—\"></a>Springä¸­Autowiredå’ŒResourceå…³é”®å­—</h3><ul>\n<li>@Resourceå’Œ@Autowiredéƒ½æ˜¯åšbeançš„æ³¨å…¥æ—¶ä½¿ç”¨ï¼Œå…¶å®@Resourceå¹¶ä¸æ˜¯Springçš„æ³¨è§£ï¼Œå®ƒçš„åŒ…æ˜¯javax.annotation.Resourceï¼Œéœ€è¦å¯¼å…¥ï¼Œä½†æ˜¯Springæ”¯æŒè¯¥æ³¨è§£çš„æ³¨å…¥ã€‚</li>\n<li>Autowiredæ³¨è§£æ˜¯æŒ‰ç…§ç±»å‹ï¼ˆbyTypeï¼‰è£…é…ä¾èµ–å¯¹è±¡ï¼Œé»˜è®¤æƒ…å†µä¸‹å®ƒè¦æ±‚ä¾èµ–å¯¹è±¡å¿…é¡»å­˜åœ¨ï¼Œå¦‚æœå…è®¸nullå€¼ï¼Œå¯ä»¥è®¾ç½®å®ƒçš„requiredå±æ€§ä¸ºfalseã€‚å¦‚æœæˆ‘ä»¬æƒ³ä½¿ç”¨æŒ‰ç…§åç§°ï¼ˆbyNameï¼‰æ¥è£…é…ï¼Œå¯ä»¥ç»“åˆ@Qualififieræ³¨è§£ä¸€èµ·ä½¿ç”¨ï¼š</li>\n</ul>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">TestServiceImpl</span> </span>&#123; </span><br><span class=\"line\">  <span class=\"comment\">// ä¸‹é¢ä¸¤ç§@Autowiredåªè¦ä½¿ç”¨ä¸€ç§å³å¯ </span></span><br><span class=\"line\">  <span class=\"meta\">@Autowired</span> </span><br><span class=\"line\">  <span class=\"keyword\">private</span> UserDao userDao; <span class=\"comment\">// ç”¨äºå­—æ®µä¸Š </span></span><br><span class=\"line\">  </span><br><span class=\"line\">  <span class=\"meta\">@Autowired</span>  <span class=\"comment\">// ç”¨äºå±æ€§çš„æ–¹æ³•ä¸Š</span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setUserDao</span><span class=\"params\">(UserDao userDao)</span> </span></span><br><span class=\"line\"><span class=\"function\">  </span>&#123;  </span><br><span class=\"line\">    <span class=\"keyword\">this</span>.userDao = userDao; </span><br><span class=\"line\">  &#125; </span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">// @Autowiredæ³¨è§£æ˜¯æŒ‰ç…§ç±»å‹ï¼ˆbyTypeï¼‰è£…é…ä¾èµ–å¯¹è±¡ï¼Œé»˜è®¤æƒ…å†µä¸‹å®ƒè¦æ±‚ä¾èµ–å¯¹è±¡å¿…é¡»å­˜åœ¨ï¼Œå¦‚æœå…</span></span><br><span class=\"line\"><span class=\"comment\">// è®¸nullå€¼ï¼Œå¯ä»¥è®¾ç½®å®ƒçš„requiredå±æ€§ä¸ºfalseã€‚å¦‚æœæˆ‘ä»¬æƒ³ä½¿ç”¨æŒ‰ç…§åç§°ï¼ˆbyNameï¼‰æ¥è£…é…ï¼Œå¯ä»¥ç»“</span></span><br><span class=\"line\"><span class=\"comment\">// åˆ@Qualifieræ³¨è§£ä¸€èµ·ä½¿ç”¨ã€‚å¦‚ä¸‹ï¼š</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">TestServiceImpl</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"meta\">@Autowired</span> </span><br><span class=\"line\">  <span class=\"meta\">@Qualifier</span>(<span class=\"string\">\"userDao\"</span>) <span class=\"keyword\">private</span> UserDao userDao;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>Resourceé»˜è®¤æŒ‰ç…§ByNameè‡ªåŠ¨æ³¨å…¥ï¼Œç”±J2EEæä¾›ï¼Œéœ€è¦å¯¼å…¥åŒ…javax.annotation.Resourceã€‚@Resourceæœ‰ä¸¤ä¸ªé‡è¦çš„å±æ€§ï¼šnameå’Œtypeï¼Œè€ŒSpringå°†@Resourceæ³¨è§£çš„nameå±æ€§è§£æä¸ºbeançš„åå­—ï¼Œè€Œtypeå±æ€§åˆ™è§£æä¸ºbeançš„ç±»å‹ã€‚æ‰€ä»¥ï¼Œå¦‚æœä½¿ç”¨nameå±æ€§ï¼Œåˆ™ä½¿ç”¨byNameçš„è‡ªåŠ¨æ³¨å…¥ç­–ç•¥ï¼Œè€Œä½¿ç”¨typeå±æ€§æ—¶åˆ™ä½¿ç”¨byTypeè‡ªåŠ¨æ³¨å…¥ç­–ç•¥ã€‚å¦‚æœæ—¢ä¸åˆ¶å®šnameä¹Ÿä¸åˆ¶å®štypeå±æ€§ï¼Œè¿™æ—¶å°†é€šè¿‡åå°„æœºåˆ¶ä½¿ç”¨byNameè‡ªåŠ¨æ³¨å…¥ç­–ç•¥ã€‚</li>\n</ul>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">TestServiceImpl</span> </span>&#123; </span><br><span class=\"line\">  <span class=\"comment\">// ä¸‹é¢ä¸¤ç§@Resourceåªè¦ä½¿ç”¨ä¸€ç§å³å¯ </span></span><br><span class=\"line\">  </span><br><span class=\"line\">  <span class=\"comment\">// ç”¨äºå­—æ®µä¸Š </span></span><br><span class=\"line\">  <span class=\"meta\">@Resource</span>(name=<span class=\"string\">\"userDao\"</span>) </span><br><span class=\"line\">  <span class=\"keyword\">private</span> UserDao userDao; </span><br><span class=\"line\">  </span><br><span class=\"line\">  <span class=\"comment\">// ç”¨äºå±æ€§çš„setteræ–¹æ³•ä¸Š </span></span><br><span class=\"line\">  <span class=\"meta\">@Resource</span>(name=<span class=\"string\">\"userDao\"</span>) </span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setUserDao</span><span class=\"params\">(UserDao userDao)</span> </span>&#123; </span><br><span class=\"line\">    <span class=\"keyword\">this</span>.userDao = userDao;</span><br><span class=\"line\">  &#125; </span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"Beanæ³¨å†Œæ–¹å¼\"><a href=\"#Beanæ³¨å†Œæ–¹å¼\" class=\"headerlink\" title=\"Beanæ³¨å†Œæ–¹å¼\"></a>Beanæ³¨å†Œæ–¹å¼</h3><ul>\n<li>XML é…ç½®æ–‡ä»¶çš„æ³¨å†Œæ–¹å¼</li>\n</ul>\n<figure class=\"highlight xml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">bean</span>Â <span class=\"attr\">id</span>=<span class=\"string\">\"person\"</span>Â <span class=\"attr\">class</span>=<span class=\"string\">\"org.springframework.beans.Person\"</span>&gt;</span></span><br><span class=\"line\">Â Â Â <span class=\"tag\">&lt;<span class=\"name\">property</span>Â <span class=\"attr\">name</span>=<span class=\"string\">\"id\"</span>Â <span class=\"attr\">value</span>=<span class=\"string\">\"1\"</span>/&gt;</span></span><br><span class=\"line\">Â Â Â <span class=\"tag\">&lt;<span class=\"name\">property</span>Â <span class=\"attr\">name</span>=<span class=\"string\">\"name\"</span>Â <span class=\"attr\">value</span>=<span class=\"string\">\"Java\"</span>/&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<h4 id=\"Java-æ³¨è§£çš„æ³¨å†Œæ–¹å¼\"><a href=\"#Java-æ³¨è§£çš„æ³¨å†Œæ–¹å¼\" class=\"headerlink\" title=\"Java æ³¨è§£çš„æ³¨å†Œæ–¹å¼\"></a>Java æ³¨è§£çš„æ³¨å†Œæ–¹å¼</h4><figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// å¯ä»¥ä½¿ç”¨ @Component æ³¨è§£æ–¹å¼æ¥æ³¨å†Œ Bean</span></span><br><span class=\"line\"><span class=\"meta\">@Component</span></span><br><span class=\"line\"><span class=\"keyword\">public</span>Â <span class=\"class\"><span class=\"keyword\">class</span>Â <span class=\"title\">Person</span>Â </span>&#123;</span><br><span class=\"line\">Â Â Â <span class=\"keyword\">private</span>Â IntegerÂ id;</span><br><span class=\"line\">Â Â Â <span class=\"keyword\">private</span>Â StringÂ name</span><br><span class=\"line\">Â Â Â <span class=\"comment\">//Â å¿½ç•¥å…¶ä»–æ–¹æ³•</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// @Bean æ³¨è§£æ–¹å¼æ¥æ³¨å†Œ Bean</span></span><br><span class=\"line\"><span class=\"meta\">@Configuration</span></span><br><span class=\"line\"><span class=\"keyword\">public</span>Â <span class=\"class\"><span class=\"keyword\">class</span>Â <span class=\"title\">Person</span>Â </span>&#123;</span><br><span class=\"line\">Â Â Â <span class=\"meta\">@Bean</span></span><br><span class=\"line\">Â Â Â <span class=\"function\"><span class=\"keyword\">public</span>Â PersonÂ Â <span class=\"title\">person</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">Â Â Â Â Â Â <span class=\"keyword\">return</span>Â <span class=\"keyword\">new</span>Â Person();</span><br><span class=\"line\">Â Â Â &#125;</span><br><span class=\"line\">Â Â Â <span class=\"comment\">//Â å¿½ç•¥å…¶ä»–æ–¹æ³•</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"Java-API-çš„æ³¨å†Œæ–¹å¼\"><a href=\"#Java-API-çš„æ³¨å†Œæ–¹å¼\" class=\"headerlink\" title=\"Java API çš„æ³¨å†Œæ–¹å¼\"></a>Java API çš„æ³¨å†Œæ–¹å¼</h4><figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ä½¿ç”¨ BeanDefinitionRegistry.registerBeanDefinition() æ–¹æ³•çš„æ–¹å¼æ³¨å†Œ Bean\t</span></span><br><span class=\"line\"><span class=\"keyword\">public</span>Â <span class=\"class\"><span class=\"keyword\">class</span>Â <span class=\"title\">CustomBeanDefinitionRegistry</span>Â <span class=\"keyword\">implements</span>Â <span class=\"title\">BeanDefinitionRegistryPostProcessor</span>Â </span>&#123;</span><br><span class=\"line\">\t<span class=\"meta\">@Override</span></span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">public</span>Â <span class=\"keyword\">void</span>Â <span class=\"title\">postProcessBeanFactory</span><span class=\"params\">(ConfigurableListableBeanFactoryÂ beanFactory)</span>Â <span class=\"keyword\">throws</span>Â BeansExceptionÂ </span>&#123;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\t<span class=\"meta\">@Override</span></span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">public</span>Â <span class=\"keyword\">void</span>Â <span class=\"title\">postProcessBeanDefinitionRegistry</span><span class=\"params\">(BeanDefinitionRegistryÂ registry)</span>Â <span class=\"keyword\">throws</span>Â BeansExceptionÂ </span>&#123;</span><br><span class=\"line\">\t\tRootBeanDefinitionÂ personBeanÂ =Â <span class=\"keyword\">new</span>Â RootBeanDefinition(Person<span class=\"class\">.<span class=\"keyword\">class</span>)</span>;</span><br><span class=\"line\">\t\t<span class=\"comment\">//Â æ–°å¢Â Bean</span></span><br><span class=\"line\">\t\tregistry.registerBeanDefinition(<span class=\"string\">\"person\"</span>,Â personBean);</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<a id=\"more\"></a>\n\n<h3 id=\"Spring-Bean-çš„ä½œç”¨åŸŸ\"><a href=\"#Spring-Bean-çš„ä½œç”¨åŸŸ\" class=\"headerlink\" title=\"Spring Bean çš„ä½œç”¨åŸŸ\"></a>Spring Bean çš„ä½œç”¨åŸŸ</h3><ul>\n<li>singleton <ul>\n<li>è¡¨ç¤ºåœ¨ Spring å®¹å™¨ä¸­åªæœ‰ä¸€ä¸ª Bean å®ä¾‹ï¼Œä»¥å•ä¾‹çš„å½¢å¼å­˜åœ¨ï¼Œæ˜¯é»˜è®¤çš„ Bean ä½œç”¨åŸŸã€‚</li>\n</ul>\n</li>\n<li>prototype<ul>\n<li>åŸå‹ä½œç”¨åŸŸï¼Œæ¯æ¬¡è°ƒç”¨ Bean æ—¶éƒ½ä¼šåˆ›å»ºä¸€ä¸ªæ–°å®ä¾‹ï¼Œä¹Ÿå°±æ˜¯è¯´æ¯æ¬¡è°ƒç”¨ getBean() æ–¹æ³•æ—¶ï¼Œç›¸å½“äºæ‰§è¡Œäº† new Bean()ã€‚</li>\n</ul>\n</li>\n<li>request<ul>\n<li>æ¯æ¬¡ Http è¯·æ±‚æ—¶éƒ½ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„ Beanï¼Œè¯¥ä½œç”¨åŸŸä»…é€‚åº”äº WebApplicationContext ç¯å¢ƒã€‚</li>\n</ul>\n</li>\n<li>session<ul>\n<li>åŒä¸€ä¸ª Http Session å…±äº«ä¸€ä¸ª Bean å¯¹è±¡ï¼Œä¸åŒçš„ Session æ‹¥æœ‰ä¸åŒçš„ Bean å¯¹è±¡ï¼Œä»…é€‚ç”¨äº WebApplicationContext ç¯å¢ƒã€‚</li>\n</ul>\n</li>\n<li>global session<ul>\n<li>å…¨å±€sessionå…±äº«ä¸€ä¸ªbeanå¯¹è±¡ã€‚</li>\n</ul>\n</li>\n<li>application<ul>\n<li>å…¨å±€çš„ Web ä½œç”¨åŸŸï¼Œç±»ä¼¼äº Servlet ä¸­çš„ Applicationã€‚</li>\n</ul>\n</li>\n</ul>\n<h4 id=\"Spring-ä¸­çš„å•ä¾‹-bean-çš„çº¿ç¨‹å®‰å…¨é—®é¢˜\"><a href=\"#Spring-ä¸­çš„å•ä¾‹-bean-çš„çº¿ç¨‹å®‰å…¨é—®é¢˜\" class=\"headerlink\" title=\"Spring ä¸­çš„å•ä¾‹ bean çš„çº¿ç¨‹å®‰å…¨é—®é¢˜\"></a>Spring ä¸­çš„å•ä¾‹ bean çš„çº¿ç¨‹å®‰å…¨é—®é¢˜</h4><ul>\n<li>å•ä¾‹ bean å­˜åœ¨çº¿ç¨‹é—®é¢˜ï¼Œä¸»è¦æ˜¯å› ä¸ºå½“å¤šä¸ªçº¿ç¨‹æ“ä½œåŒâ¼€ä¸ªå¯¹è±¡çš„æ—¶å€™ï¼Œå¯¹è¿™ä¸ªå¯¹è±¡çš„â¾®é™æ€æˆå‘˜å˜é‡çš„å†™æ“ä½œä¼šå­˜åœ¨çº¿ç¨‹å®‰å…¨é—®é¢˜ã€‚åœ¨ç±»ä¸­å®šä¹‰â¼€ä¸ªThreadLocalæˆå‘˜å˜é‡ï¼Œå°†éœ€è¦çš„å¯å˜æˆå‘˜å˜é‡ä¿å­˜åœ¨ ThreadLocal ä¸­ï¼ˆæ¨èçš„â¼€ç§â½…å¼ï¼‰ã€‚</li>\n</ul>\n<h3 id=\"Bean-ç”Ÿå‘½å‘¨æœŸ\"><a href=\"#Bean-ç”Ÿå‘½å‘¨æœŸ\" class=\"headerlink\" title=\"Bean ç”Ÿå‘½å‘¨æœŸ\"></a>Bean ç”Ÿå‘½å‘¨æœŸ</h3><ul>\n<li>å¯¹äº Spring Bean æ¥è¯´ï¼Œå¹¶ä¸æ˜¯å¯åŠ¨é˜¶æ®µå°±ä¼šè§¦å‘ Bean çš„å®ä¾‹åŒ–ï¼Œåªæœ‰å½“å®¢æˆ·ç«¯é€šè¿‡æ˜¾å¼æˆ–è€…éšå¼çš„æ–¹å¼è°ƒç”¨ BeanFactory çš„ getBean() æ–¹æ³•æ—¶ï¼Œå®ƒæ‰ä¼šè§¦å‘è¯¥ç±»çš„å®ä¾‹åŒ–æ–¹æ³•ã€‚å½“ç„¶å¯¹äº BeanFactory æ¥è¯´ï¼Œä¹Ÿä¸æ˜¯æ‰€æœ‰çš„ getBean() æ–¹æ³•éƒ½ä¼šå®ä¾‹åŒ– Bean å¯¹è±¡ï¼Œä¾‹å¦‚ä½œç”¨åŸŸä¸º singleton æ—¶ï¼Œåªä¼šåœ¨ç¬¬ä¸€æ¬¡ï¼Œå®ä¾‹åŒ–è¯¥ Bean å¯¹è±¡ï¼Œä¹‹åä¼šç›´æ¥è¿”å›è¯¥å¯¹è±¡ã€‚ä½†å¦‚æœä½¿ç”¨çš„æ˜¯ApplicationContext å®¹å™¨ï¼Œåˆ™ä¼šåœ¨è¯¥å®¹å™¨å¯åŠ¨çš„æ—¶å€™ï¼Œç«‹å³è°ƒç”¨æ³¨å†Œåˆ°è¯¥å®¹å™¨æ‰€æœ‰ Bean çš„å®ä¾‹åŒ–æ–¹æ³•ã€‚getBean() æ–¹æ³•æ˜¯å±äº BeanFactory æ¥å£çš„ï¼Œå®ƒçš„çœŸæ­£å®ç°æ˜¯AbstractAutowireCapableBeanFactory çš„ createBean() æ–¹æ³•ï¼Œè€Œ createBean() æ˜¯é€šè¿‡ doCreateBean() æ¥å®ç°çš„ï¼Œå…·ä½“æºç å®ç°ã€‚</li>\n</ul>\n<p><img src=\"https://z201.oss-cn-shanghai.aliyuncs.com/JavaNote/springBean%E7%9A%84%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F.png\"></p>\n<ul>\n<li>å®ä¾‹åŒ–Bean<ul>\n<li>å¯¹äºBeanFactoryå®¹å™¨ï¼Œå½“å®¢æˆ·å‘å®¹å™¨è¯·æ±‚ä¸€ä¸ªå°šæœªåˆå§‹åŒ–çš„beanæ—¶ï¼Œæˆ–åˆå§‹åŒ–beançš„æ—¶å€™éœ€è¦æ³¨å…¥å¦ä¸€ä¸ªå°šæœªåˆå§‹åŒ–çš„ä¾èµ–æ—¶ï¼Œå®¹å™¨å°±ä¼šè°ƒç”¨createBeanè¿›è¡Œå®ä¾‹åŒ–ã€‚å¯¹äºApplicationContextå®¹å™¨ï¼Œå½“å®¹å™¨å¯åŠ¨ç»“æŸåï¼Œé€šè¿‡è·å–BeanDefifinitionå¯¹è±¡ä¸­çš„ä¿¡æ¯ï¼Œå®ä¾‹åŒ–æ‰€æœ‰çš„beanã€‚</li>\n</ul>\n</li>\n<li>è®¾ç½®å¯¹è±¡å±æ€§ï¼ˆä¾èµ–æ³¨å…¥ï¼‰<ul>\n<li>å®ä¾‹åŒ–åçš„å¯¹è±¡è¢«å°è£…åœ¨BeanWrapperå¯¹è±¡ä¸­ï¼Œç´§æ¥ç€ï¼ŒSpringæ ¹æ®BeanDefifinitionä¸­çš„ä¿¡æ¯ ä»¥åŠ é€šè¿‡BeanWrapperæä¾›çš„è®¾ç½®å±æ€§çš„æ¥å£å®Œæˆä¾èµ–æ³¨å…¥ã€‚     </li>\n</ul>\n</li>\n<li>å¤„ç†Awareæ¥å£<ul>\n<li>æ¥ç€ï¼ŒSpringä¼šæ£€æµ‹è¯¥å¯¹è±¡æ˜¯å¦å®ç°äº†xxxAwareæ¥å£ï¼Œå¹¶å°†ç›¸å…³çš„xxxAwareå®ä¾‹æ³¨å…¥ç»™Beanã€‚<ul>\n<li>å¦‚æœè¿™ä¸ªBeanå·²ç»å®ç°äº†BeanNameAwareæ¥å£ï¼Œä¼šè°ƒç”¨å®ƒå®ç°çš„setBeanName(String beanId)æ–¹æ³•ï¼Œæ­¤å¤„ä¼ é€’çš„å°±æ˜¯Springé…ç½®æ–‡ä»¶ä¸­Beançš„idå€¼ã€‚</li>\n<li>å¦‚æœè¿™ä¸ªBeanå·²ç»å®ç°äº†BeanFactoryAwareæ¥å£ï¼Œä¼šè°ƒç”¨å®ƒå®ç°çš„setBeanFactory()æ–¹æ³•ï¼Œä¼ é€’çš„æ˜¯Springå·¥å‚è‡ªèº«ã€‚</li>\n<li>å¦‚æœè¿™ä¸ªBeanå·²ç»å®ç°äº†ApplicationContextAwareæ¥å£ï¼Œä¼šè°ƒç”¨setApplicationContext(ApplicationContext)æ–¹æ³•ï¼Œä¼ å…¥Springä¸Šä¸‹æ–‡ã€‚</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>BeanPostProcessor<ul>\n<li>å¦‚æœæƒ³å¯¹Beanè¿›è¡Œä¸€äº›è‡ªå®šä¹‰çš„å¤„ç†ï¼Œé‚£ä¹ˆå¯ä»¥è®©Beanå®ç°äº†BeanPostProcessoræ¥å£ï¼Œé‚£å°†ä¼šè°ƒç”¨postProcessBeforeInitialization(Object obj, String s)æ–¹æ³•ã€‚</li>\n</ul>\n</li>\n<li>InitializingBean ä¸ init-method<ul>\n<li>å¦‚æœå®ç°ç›¸å…³æ–¹æ³•æˆ–è€…é…ç½®äº† init-methodåˆ™ä¼šè‡ªåŠ¨è°ƒç”¨å…¶é…ç½®çš„åˆå§‹åŒ–æ–¹æ³•</li>\n</ul>\n</li>\n<li>BeanPostProcessor<ul>\n<li>å¦‚æœè¿™ä¸ªBeanå®ç°äº†BeanPostProcessoræ¥å£ï¼Œå°†ä¼šè°ƒç”¨postProcessAfterInitialization(Object obj, String s)æ–¹æ³•ï¼›ç”±äºè¿™ä¸ªæ–¹æ³•æ˜¯åœ¨Beanåˆå§‹åŒ–ç»“æŸæ—¶è°ƒç”¨çš„ï¼Œæ‰€ä»¥å¯ä»¥è¢«åº”ç”¨äºå†…å­˜æˆ–ç¼“å­˜æŠ€æœ¯ã€‚</li>\n</ul>\n</li>\n<li>getBean<ul>\n<li>å¯ä»¥æ­£å¸¸ä½¿ç”¨è¿™ä¸ªbeanäº†ã€‚</li>\n</ul>\n</li>\n<li>DisposableBean<ul>\n<li>å½“Beanä¸å†éœ€è¦æ—¶ï¼Œä¼šç»è¿‡æ¸…ç†é˜¶æ®µï¼Œå¦‚æœBeanå®ç°äº†DisposableBeanè¿™ä¸ªæ¥å£ï¼Œä¼šè°ƒç”¨å…¶å®ç°çš„destroy()æ–¹æ³•ã€‚</li>\n</ul>\n</li>\n<li>destroy-method<ul>\n<li>å¦‚æœè¿™ä¸ªBeançš„Springé…ç½®ä¸­é…ç½®äº†destroy-methodå±æ€§ï¼Œä¼šè‡ªåŠ¨è°ƒç”¨å…¶é…ç½®çš„é”€æ¯æ–¹æ³•ã€‚</li>\n</ul>\n</li>\n<li>ç²¾ç®€ä¸‹<ul>\n<li>å®ä¾‹åŒ–Beanï¼š Iocå®¹å™¨é€šè¿‡è·å–BeanDefinitionå¯¹è±¡ä¸­çš„ä¿¡æ¯è¿›è¡Œå®ä¾‹åŒ–ï¼Œå®ä¾‹åŒ–å¯¹è±¡è¢«åŒ…è£…åœ¨BeanWrapperå¯¹è±¡ä¸­ã€‚</li>\n<li>è®¾ç½®å¯¹è±¡å±æ€§ï¼ˆDIï¼‰ï¼šé€šè¿‡BeanWrapperæä¾›çš„è®¾ç½®å±æ€§çš„æ¥å£å®Œæˆå±æ€§ä¾èµ–æ³¨å…¥ã€‚</li>\n<li>æ³¨å…¥Awareæ¥å£ï¼ˆBeanFactoryAwareï¼Œ å¯ä»¥ç”¨è¿™ä¸ªæ–¹å¼æ¥è·å–å…¶å®ƒ Beanï¼ŒApplicationContextAwareï¼‰ï¼šSpringä¼šæ£€æµ‹è¯¥å¯¹è±¡æ˜¯å¦å®ç°äº†xxxAwareæ¥å£ï¼Œå¹¶å°†ç›¸å…³çš„xxxAwareå®ä¾‹æ³¨å…¥ç»™beanã€‚</li>\n<li>BeanPostProcessorï¼šè‡ªå®šä¹‰çš„å¤„ç†ï¼ˆåˆ†å‰ç½®å¤„ç†å’Œåç½®å¤„ç†ï¼‰</li>\n<li>InitializingBeanå’Œinit-methodï¼šæ‰§è¡Œæˆ‘ä»¬è‡ªå·±å®šä¹‰çš„åˆå§‹åŒ–æ–¹æ³•ä½¿ç”¨</li>\n<li>destroyï¼šbeançš„é”€æ¯</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"Springè‡ªåŠ¨è£…é…\"><a href=\"#Springè‡ªåŠ¨è£…é…\" class=\"headerlink\" title=\"Springè‡ªåŠ¨è£…é…\"></a>Springè‡ªåŠ¨è£…é…</h3><blockquote>\n<p>SpringBoot å·¥ç¨‹çš„å¯åŠ¨ç±»ä¸Šéƒ½å¿…é¡»è¦åŠ ä¸€ä¸ª @SpringBootApplication æ³¨è§£ï¼Œè€Œä¸”è¿˜è¦åœ¨ run æ–¹æ³•ä¸­å¯¼å…¥æˆ‘ä»¬çš„ä¸»ç±»ï¼Œæˆ‘ä»¬å°±ä»è¿™ä¸ªè¢«å¯¼å…¥çš„ä¸»ç±»ä¸Šçš„æ³¨è§£å¼€å§‹åˆ†æã€‚</p>\n</blockquote>\n<ul>\n<li>åŸºäºæ·»åŠ jarä¾èµ–è‡ªåŠ¨å¯¹Spring Bootç¨‹åºè¿›è¡Œé…ç½®<ul>\n<li>spring-boot-autoconfiguration</li>\n</ul>\n</li>\n<li>å¼€å¯è‡ªåŠ¨è£…é…<ul>\n<li>@EnableAutoConfiguration</li>\n<li>@SpringBootApplication</li>\n</ul>\n</li>\n</ul>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@SpringBootApplication</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">BlogApplication</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String[] args)</span> </span>&#123;</span><br><span class=\"line\">        SpringApplication.run(VueBlogApplication<span class=\"class\">.<span class=\"keyword\">class</span>, <span class=\"title\">args</span>)</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"SpringBootApplication\"><a href=\"#SpringBootApplication\" class=\"headerlink\" title=\"SpringBootApplication\"></a>SpringBootApplication</h4><blockquote>\n<p>@SpringBootApplication æ³¨è§£æ˜¯ä¸€ä¸ªå¤åˆæ³¨è§£ã€‚é™¤å» Java çš„ 4 ä¸ªå…ƒæ³¨è§£å¤–ï¼Œåˆ†åˆ«æ˜¯ @SpringBootConfigurationã€@EnableAutoConfigurationã€@ComponentScan</p>\n</blockquote>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Target</span>(ElementType.TYPE)</span><br><span class=\"line\"><span class=\"meta\">@Retention</span>(RetentionPolicy.RUNTIME)</span><br><span class=\"line\"><span class=\"meta\">@Documented</span></span><br><span class=\"line\"><span class=\"meta\">@Inherited</span></span><br><span class=\"line\"><span class=\"meta\">@SpringBootConfiguration</span></span><br><span class=\"line\"><span class=\"meta\">@EnableAutoConfiguration</span></span><br><span class=\"line\"><span class=\"meta\">@ComponentScan</span>(excludeFilters = &#123;</span><br><span class=\"line\">        <span class=\"meta\">@Filter</span>(type = FilterType.CUSTOM, classes = TypeExcludeFilter<span class=\"class\">.<span class=\"keyword\">class</span>),</span></span><br><span class=\"line\"><span class=\"class\">        @<span class=\"title\">Filter</span>(<span class=\"title\">type</span> </span>= FilterType.CUSTOM, classes = AutoConfigurationExcludeFilter<span class=\"class\">.<span class=\"keyword\">class</span>) &#125;)</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"title\">public</span> @<span class=\"title\">interface</span> <span class=\"title\">SpringBootApplication</span> </span>&#123;</span><br><span class=\"line\">   </span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"SpringBootConfiguration\"><a href=\"#SpringBootConfiguration\" class=\"headerlink\" title=\"SpringBootConfiguration\"></a>SpringBootConfiguration</h4><blockquote>\n<p>@SpringBootConfiguration æ³¨è§£æœ¬è´¨æ˜¯ä¸€ä¸ª @Configuration æ³¨è§£ï¼Œè€Œ @Configuration æœ¬è´¨æ˜¯ä¸€ä¸ª @Component æ³¨è§£ã€‚</p>\n</blockquote>\n<ul>\n<li>@SpringBootConfiguration æ³¨è§£çš„å¯åŠ¨ç±»ï¼Œæœ¬è´¨å°±æ˜¯ä¸€ä¸ªé…ç½®ç±»ï¼ˆConfigurationClassï¼‰ï¼Œæ­¤ç±»ä¸­å¯ä»¥å£°æ˜ä¸€ä¸ªæˆ–è€…å¤šä¸ªè¢« @Bean æ³¨è§£æ ‡è®°çš„æ–¹æ³•ã€‚</li>\n</ul>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Target</span>(ElementType.TYPE)</span><br><span class=\"line\"><span class=\"meta\">@Retention</span>(RetentionPolicy.RUNTIME)</span><br><span class=\"line\"><span class=\"meta\">@Documented</span></span><br><span class=\"line\"><span class=\"meta\">@Configuration</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"meta\">@interface</span> SpringBootConfiguration &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">@Target</span>(ElementType.TYPE)</span><br><span class=\"line\"><span class=\"meta\">@Retention</span>(RetentionPolicy.RUNTIME)</span><br><span class=\"line\"><span class=\"meta\">@Documented</span></span><br><span class=\"line\"><span class=\"meta\">@Component</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"meta\">@interface</span> Configuration &#123;</span><br><span class=\"line\">    <span class=\"meta\">@AliasFor</span>(annotation = Component<span class=\"class\">.<span class=\"keyword\">class</span>)</span></span><br><span class=\"line\">    String value() default \"\";</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n\n\n<h4 id=\"ComponentScan\"><a href=\"#ComponentScan\" class=\"headerlink\" title=\"ComponentScan\"></a>ComponentScan</h4><blockquote>\n<p>æ‰§è¡ŒåŒ…çš„æ‰«æï¼Œå¦‚æœ useDefaultFilters å±æ€§ä¸º trueï¼Œé‚£ä¹ˆå®ƒä¼šå°†è¢« @component æ³¨è§£æ ‡è®°ä»¥åŠä»¥ @component ä¸ºå…ƒæ³¨è§£çš„æ³¨è§£æ ‡è®°çš„ç±»éƒ½æ‰«æåˆ° IOC å®¹å™¨ä¸­å»ã€‚</p>\n</blockquote>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Retention</span>(RetentionPolicy.RUNTIME)</span><br><span class=\"line\"><span class=\"meta\">@Target</span>(&#123;ElementType.TYPE&#125;)</span><br><span class=\"line\"><span class=\"meta\">@Documented</span></span><br><span class=\"line\"><span class=\"meta\">@Repeatable</span>(ComponentScans<span class=\"class\">.<span class=\"keyword\">class</span>)</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"title\">public</span> @<span class=\"title\">interface</span> <span class=\"title\">ComponentScan</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n\n\n<h4 id=\"EnableAutoConfiguration\"><a href=\"#EnableAutoConfiguration\" class=\"headerlink\" title=\"EnableAutoConfiguration\"></a>EnableAutoConfiguration</h4><blockquote>\n<p>é€šè¿‡@Importæ³¨è§£å°†ç‰¹å®šçš„ç±»å¯¼å…¥åˆ°å®¹å™¨ä¸­</p>\n</blockquote>\n<ul>\n<li>å¼•å…¥AutoConfigurationImportSelector</li>\n<li>è¯»å–META-INF/spring.factories</li>\n</ul>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Target</span>(ElementType.TYPE)</span><br><span class=\"line\"><span class=\"meta\">@Retention</span>(RetentionPolicy.RUNTIME)</span><br><span class=\"line\"><span class=\"meta\">@Documented</span></span><br><span class=\"line\"><span class=\"meta\">@Inherited</span></span><br><span class=\"line\"><span class=\"meta\">@AutoConfigurationPackage</span></span><br><span class=\"line\"><span class=\"meta\">@Import</span>(AutoConfigurationImportSelector<span class=\"class\">.<span class=\"keyword\">class</span>)</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"title\">public</span> @<span class=\"title\">interface</span> <span class=\"title\">EnableAutoConfiguration</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">\t * Return the auto-configuration class names that should be considered. By default</span></span><br><span class=\"line\"><span class=\"comment\">\t * this method will load candidates using &#123;<span class=\"doctag\">@link</span> SpringFactoriesLoader&#125; with</span></span><br><span class=\"line\"><span class=\"comment\">\t * &#123;<span class=\"doctag\">@link</span> #getSpringFactoriesLoaderFactoryClass()&#125;.</span></span><br><span class=\"line\"><span class=\"comment\">\t * <span class=\"doctag\">@param</span> metadata the source metadata</span></span><br><span class=\"line\"><span class=\"comment\">\t * <span class=\"doctag\">@param</span> attributes the &#123;<span class=\"doctag\">@link</span> #getAttributes(AnnotationMetadata) annotation</span></span><br><span class=\"line\"><span class=\"comment\">\t * attributes&#125;</span></span><br><span class=\"line\"><span class=\"comment\">\t * <span class=\"doctag\">@return</span> a list of candidate configurations</span></span><br><span class=\"line\"><span class=\"comment\">\t */</span></span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">protected</span> List&lt;String&gt; <span class=\"title\">getCandidateConfigurations</span><span class=\"params\">(AnnotationMetadata metadata, AnnotationAttributes attributes)</span> </span>&#123;</span><br><span class=\"line\">\t\tList&lt;String&gt; configurations = SpringFactoriesLoader.loadFactoryNames(getSpringFactoriesLoaderFactoryClass(),</span><br><span class=\"line\">\t\t\t\tgetBeanClassLoader());</span><br><span class=\"line\">\t\tAssert.notEmpty(configurations, <span class=\"string\">\"No auto configuration classes found in META-INF/spring.factories. If you \"</span></span><br><span class=\"line\">\t\t\t\t+ <span class=\"string\">\"are using a custom packaging, make sure that file is correct.\"</span>);</span><br><span class=\"line\">\t\t<span class=\"keyword\">return</span> configurations;</span><br><span class=\"line\">\t&#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>AutoConfigurationImportSelectorç±»ä¸­é€šè¿‡ SpringFactoriesLoader.loadFactoryNames() å» classpath ä¸‹çš„ META-INF/spring.factories ä¸­è·å–äº†æ‰€æœ‰éœ€è¦è‡ªåŠ¨è£…é…çš„ç±»ï¼Œæ”¾å…¥åˆ°äº† IOC å®¹å™¨ä¸­ã€‚</li>\n</ul>\n<p>![image-20211102145526599](/Users/zengqingfeng/Library/Application Support/typora-user-images/image-20211102145526599.png)</p>\n<ul>\n<li>é»˜è®¤çš„ä¿¡æ¯</li>\n</ul>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"># Logging Systems</span><br><span class=\"line\">org.springframework.boot.logging.LoggingSystemFactory=\\</span><br><span class=\"line\">org.springframework.boot.logging.logback.LogbackLoggingSystem.Factory,\\</span><br><span class=\"line\">org.springframework.boot.logging.log4j2.Log4J2LoggingSystem.Factory,\\</span><br><span class=\"line\">org.springframework.boot.logging.java.JavaLoggingSystem.Factory</span><br><span class=\"line\"></span><br><span class=\"line\"># PropertySource Loaders</span><br><span class=\"line\">org.springframework.boot.env.PropertySourceLoader=\\</span><br><span class=\"line\">org.springframework.boot.env.PropertiesPropertySourceLoader,\\</span><br><span class=\"line\">org.springframework.boot.env.YamlPropertySourceLoader</span><br><span class=\"line\"></span><br><span class=\"line\"># ConfigData Location Resolvers</span><br><span class=\"line\">org.springframework.boot.context.config.ConfigDataLocationResolver=\\</span><br><span class=\"line\">org.springframework.boot.context.config.ConfigTreeConfigDataLocationResolver,\\</span><br><span class=\"line\">org.springframework.boot.context.config.StandardConfigDataLocationResolver</span><br><span class=\"line\"></span><br><span class=\"line\"># ConfigData Loaders</span><br><span class=\"line\">org.springframework.boot.context.config.ConfigDataLoader=\\</span><br><span class=\"line\">org.springframework.boot.context.config.ConfigTreeConfigDataLoader,\\</span><br><span class=\"line\">org.springframework.boot.context.config.StandardConfigDataLoader</span><br><span class=\"line\"></span><br><span class=\"line\"># Run Listeners</span><br><span class=\"line\">org.springframework.boot.SpringApplicationRunListener=\\</span><br><span class=\"line\">org.springframework.boot.context.event.EventPublishingRunListener</span><br><span class=\"line\"></span><br><span class=\"line\"># Error Reporters</span><br><span class=\"line\">org.springframework.boot.SpringBootExceptionReporter=\\</span><br><span class=\"line\">org.springframework.boot.diagnostics.FailureAnalyzers</span><br><span class=\"line\"></span><br><span class=\"line\"># Application Context Initializers</span><br><span class=\"line\">org.springframework.context.ApplicationContextInitializer=\\</span><br><span class=\"line\">org.springframework.boot.context.ConfigurationWarningsApplicationContextInitializer,\\</span><br><span class=\"line\">org.springframework.boot.context.ContextIdApplicationContextInitializer,\\</span><br><span class=\"line\">org.springframework.boot.context.config.DelegatingApplicationContextInitializer,\\</span><br><span class=\"line\">org.springframework.boot.rsocket.context.RSocketPortInfoApplicationContextInitializer,\\</span><br><span class=\"line\">org.springframework.boot.web.context.ServerPortInfoApplicationContextInitializer</span><br><span class=\"line\"></span><br><span class=\"line\"># Application Listeners</span><br><span class=\"line\">org.springframework.context.ApplicationListener=\\</span><br><span class=\"line\">org.springframework.boot.ClearCachesApplicationListener,\\</span><br><span class=\"line\">org.springframework.boot.builder.ParentContextCloserApplicationListener,\\</span><br><span class=\"line\">org.springframework.boot.context.FileEncodingApplicationListener,\\</span><br><span class=\"line\">org.springframework.boot.context.config.AnsiOutputApplicationListener,\\</span><br><span class=\"line\">org.springframework.boot.context.config.DelegatingApplicationListener,\\</span><br><span class=\"line\">org.springframework.boot.context.logging.LoggingApplicationListener,\\</span><br><span class=\"line\">org.springframework.boot.env.EnvironmentPostProcessorApplicationListener,\\</span><br><span class=\"line\">org.springframework.boot.liquibase.LiquibaseServiceLocatorApplicationListener</span><br><span class=\"line\"></span><br><span class=\"line\"># Environment Post Processors</span><br><span class=\"line\">org.springframework.boot.env.EnvironmentPostProcessor=\\</span><br><span class=\"line\">org.springframework.boot.cloud.CloudFoundryVcapEnvironmentPostProcessor,\\</span><br><span class=\"line\">org.springframework.boot.context.config.ConfigDataEnvironmentPostProcessor,\\</span><br><span class=\"line\">org.springframework.boot.env.RandomValuePropertySourceEnvironmentPostProcessor,\\</span><br><span class=\"line\">org.springframework.boot.env.SpringApplicationJsonEnvironmentPostProcessor,\\</span><br><span class=\"line\">org.springframework.boot.env.SystemEnvironmentPropertySourceEnvironmentPostProcessor,\\</span><br><span class=\"line\">org.springframework.boot.reactor.DebugAgentEnvironmentPostProcessor</span><br><span class=\"line\"></span><br><span class=\"line\"># Failure Analyzers</span><br><span class=\"line\">org.springframework.boot.diagnostics.FailureAnalyzer=\\</span><br><span class=\"line\">org.springframework.boot.context.config.ConfigDataNotFoundFailureAnalyzer,\\</span><br><span class=\"line\">org.springframework.boot.context.properties.IncompatibleConfigurationFailureAnalyzer,\\</span><br><span class=\"line\">org.springframework.boot.context.properties.NotConstructorBoundInjectionFailureAnalyzer,\\</span><br><span class=\"line\">org.springframework.boot.diagnostics.analyzer.BeanCurrentlyInCreationFailureAnalyzer,\\</span><br><span class=\"line\">org.springframework.boot.diagnostics.analyzer.BeanDefinitionOverrideFailureAnalyzer,\\</span><br><span class=\"line\">org.springframework.boot.diagnostics.analyzer.BeanNotOfRequiredTypeFailureAnalyzer,\\</span><br><span class=\"line\">org.springframework.boot.diagnostics.analyzer.BindFailureAnalyzer,\\</span><br><span class=\"line\">org.springframework.boot.diagnostics.analyzer.BindValidationFailureAnalyzer,\\</span><br><span class=\"line\">org.springframework.boot.diagnostics.analyzer.UnboundConfigurationPropertyFailureAnalyzer,\\</span><br><span class=\"line\">org.springframework.boot.diagnostics.analyzer.ConnectorStartFailureAnalyzer,\\</span><br><span class=\"line\">org.springframework.boot.diagnostics.analyzer.NoSuchMethodFailureAnalyzer,\\</span><br><span class=\"line\">org.springframework.boot.diagnostics.analyzer.NoUniqueBeanDefinitionFailureAnalyzer,\\</span><br><span class=\"line\">org.springframework.boot.diagnostics.analyzer.PortInUseFailureAnalyzer,\\</span><br><span class=\"line\">org.springframework.boot.diagnostics.analyzer.ValidationExceptionFailureAnalyzer,\\</span><br><span class=\"line\">org.springframework.boot.diagnostics.analyzer.InvalidConfigurationPropertyNameFailureAnalyzer,\\</span><br><span class=\"line\">org.springframework.boot.diagnostics.analyzer.InvalidConfigurationPropertyValueFailureAnalyzer,\\</span><br><span class=\"line\">org.springframework.boot.diagnostics.analyzer.PatternParseFailureAnalyzer,\\</span><br><span class=\"line\">org.springframework.boot.liquibase.LiquibaseChangelogMissingFailureAnalyzer</span><br><span class=\"line\"></span><br><span class=\"line\"># Failure Analysis Reporters</span><br><span class=\"line\">org.springframework.boot.diagnostics.FailureAnalysisReporter=\\</span><br><span class=\"line\">org.springframework.boot.diagnostics.LoggingFailureAnalysisReporter</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"Spring-SPI\"><a href=\"#Spring-SPI\" class=\"headerlink\" title=\"Spring SPI\"></a>Spring SPI</h4><blockquote>\n<p>SPI å…¨ç§°ä¸º Service Provider Interfaceï¼Œæ˜¯ä¸€ç§æœåŠ¡å‘ç°æœºåˆ¶ã€‚SPI çš„æœ¬è´¨æ˜¯å°†æ¥å£å®ç°ç±»çš„å…¨é™å®šåé…ç½®åœ¨æ–‡ä»¶ä¸­ï¼Œå¹¶ç”±æœåŠ¡åŠ è½½å™¨è¯»å–é…ç½®æ–‡ä»¶ï¼ŒåŠ è½½å®ç°ç±»ã€‚</p>\n</blockquote>\n<ul>\n<li>Spring çš„ SPI é…ç½®æ–‡ä»¶æ˜¯ä¸€ä¸ªå›ºå®šçš„æ–‡ä»¶ - <code>META-INF/spring.factories</code>ï¼ŒåŠŸèƒ½ä¸Šå’Œ JDK çš„ç±»ä¼¼ï¼Œæ¯ä¸ªæ¥å£å¯ä»¥æœ‰å¤šä¸ªæ‰©å±•å®ç°ï¼Œä½¿ç”¨èµ·æ¥éå¸¸ç®€å•ï¼š</li>\n</ul>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//è·å–æ‰€æœ‰factoriesæ–‡ä»¶ä¸­é…ç½®çš„LoggingSystemFactory</span></span><br><span class=\"line\">List&lt;LoggingSystemFactory&gt;&gt; factories = </span><br><span class=\"line\">    SpringFactoriesLoader.loadFactories(LoggingSystemFactory<span class=\"class\">.<span class=\"keyword\">class</span>, <span class=\"title\">classLoader</span>)</span>;</span><br></pre></td></tr></table></figure>\n\n\n\n<h3 id=\"Springå¾ªç¯ä¾èµ–\"><a href=\"#Springå¾ªç¯ä¾èµ–\" class=\"headerlink\" title=\"Springå¾ªç¯ä¾èµ–\"></a>Springå¾ªç¯ä¾èµ–</h3><blockquote>\n<p>å½“beançš„ä½œç”¨åŸŸæ˜¯Prototypeçš„æ˜¯ä¸æ”¯æŒå¾ªç¯ä¾èµ–çš„ã€‚ä¸ç„¶ä¼šå‡ºç°å¥—å¨ƒï¼Œ</p>\n</blockquote>\n<ul>\n<li>å¯èƒ½å‡ºç°çš„ä¾èµ–åœºæ™¯<ul>\n<li>æ„é€ å™¨å¾ªç¯ä¾èµ–</li>\n<li>å±æ€§æ³¨å…¥å¾ªç¯ä¾èµ–</li>\n</ul>\n</li>\n<li>Springç»´æŠ¤äº†ä¸‰ä¸ªMapï¼Œæ‰€è°“çš„ä¸‰çº§ç¼“å­˜ã€‚<ul>\n<li>singletonObjectsï¼šç¬¬ä¸€çº§ç¼“å­˜ï¼Œé‡Œé¢æ”¾ç½®çš„æ˜¯å®ä¾‹åŒ–å¥½çš„å•ä¾‹å¯¹è±¡</li>\n<li>earlySingletonObjectsï¼šç¬¬äºŒçº§ç¼“å­˜ï¼Œé‡Œé¢å­˜æ”¾çš„æ˜¯æå‰æ›å…‰çš„å•ä¾‹å¯¹è±¡ã€‚</li>\n<li>singletonFactoriesï¼šç¬¬ä¸‰çº§ç¼“å­˜ï¼Œé‡Œé¢å­˜æ”¾çš„æ˜¯è¦è¢«å®ä¾‹åŒ–çš„å¯¹è±¡çš„å¯¹è±¡å·¥å‚ã€‚</li>\n<li>åˆ›å»ºbeançš„æ—¶å€™Springé¦–å…ˆä»ä¸€çº§ç¼“å­˜singletonObjectsä¸­è·å–ã€‚å¦‚æœè·å–ä¸åˆ°ï¼Œå¹¶ä¸”å¯¹è±¡æ­£åœ¨åˆ›å»ºä¸­ï¼Œå°±å†ä»äºŒçº§ç¼“å­˜earlySingletonObjectsä¸­è·å–ï¼Œå¦‚æœè¿˜æ˜¯è·å–ä¸åˆ°å°±ä»ä¸‰çº§ç¼“å­˜singletonFactoriesä¸­å–ï¼ˆBeanè°ƒç”¨æ„é€ å‡½æ•°è¿›è¡Œå®ä¾‹åŒ–åï¼Œå³ä½¿å±æ€§è¿˜æœªå¡«å……ï¼Œå°±å¯ä»¥é€šè¿‡ä¸‰çº§ç¼“å­˜å‘å¤–æå‰æš´éœ²ä¾èµ–çš„å¼•ç”¨å€¼ï¼ˆæå‰æ›å…‰ï¼‰ï¼Œæ ¹æ®å¯¹è±¡å¼•ç”¨èƒ½å®šä½åˆ°å †ä¸­çš„å¯¹è±¡ï¼Œå…¶åŸç†æ˜¯åŸºäºJavaçš„å¼•ç”¨ä¼ é€’ï¼‰ï¼Œå–åˆ°åä»ä¸‰çº§ç¼“å­˜ç§»åŠ¨åˆ°äº†äºŒçº§ç¼“å­˜å®Œå…¨åˆå§‹åŒ–ä¹‹åå°†è‡ªå·±æ”¾å…¥åˆ°ä¸€çº§ç¼“å­˜ä¸­ä¾›å…¶ä»–ä½¿ç”¨ï¼Œå› ä¸ºåŠ å…¥singletonFactoriesä¸‰çº§ç¼“å­˜çš„å‰ææ˜¯æ‰§è¡Œäº†æ„é€ å™¨ï¼Œæ‰€ä»¥æ„é€ å™¨çš„å¾ªç¯ä¾èµ–æ²¡æ³•è§£å†³ã€‚</li>\n</ul>\n</li>\n</ul>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">DefaultSingletonBeanRegistry</span> <span class=\"keyword\">extends</span> <span class=\"title\">SimpleAliasRegistry</span> <span class=\"keyword\">implements</span> <span class=\"title\">SingletonBeanRegistry</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">/*</span></span><br><span class=\"line\"><span class=\"comment\">     * ä¸€çº§ç¼“å­˜</span></span><br><span class=\"line\"><span class=\"comment\">     * singletonObjects è¿™å°±æ˜¯äººä»¬å¸¸è¯´çš„å•ä¾‹æ± ï¼Œä»å¾®è§‚æ„ä¹‰ä¸Šæ¥è¯´ï¼Œè¿™å°±æ˜¯æˆ‘ä»¬çš„ Spring å®¹å™¨ï¼Œ</span></span><br><span class=\"line\"><span class=\"comment\">     * å®ƒç”¨äºå­˜æ”¾å®Œå…¨åˆå§‹åŒ–å¥½çš„ beanï¼Œä»ç¼“å­˜ä¸­å–å‡ºçš„ bean å¯ä»¥ç›´æ¥ä½¿ç”¨ã€‚</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">final</span> Map&lt;String, Object&gt; singletonObjects = <span class=\"keyword\">new</span> ConcurrentHashMap&lt;&gt;(<span class=\"number\">256</span>);</span><br><span class=\"line\">    <span class=\"comment\">/*</span></span><br><span class=\"line\"><span class=\"comment\">     * ä¸‰çº§ç¼“å­˜</span></span><br><span class=\"line\"><span class=\"comment\">     * å­˜æ”¾ bean å·¥å‚å¯¹è±¡ï¼Œæå‰æ›å…‰å¼•ç”¨ï¼Œè§£å†³å¾ªç¯ä¾èµ–ï¼Œè™½ç„¶è¿™ä¸ªå¯¹è±¡ä¸å®Œæ•´ï¼Œä½†æ˜¯å·²ç»å¯ä»¥æ ¹æ®å¼•ç”¨å®šä½åˆ°å †å†…å­˜ä¸­çš„å¯¹è±¡ï¼Œ</span></span><br><span class=\"line\"><span class=\"comment\">     * æ­¤å¯¹è±¡å¯èƒ½æ˜¯é€šè¿‡æ„é€ æ–¹æ³•åˆ›å»ºï¼Œè¿˜æ²¡è£…é…å±æ€§ã€‚</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">final</span> Map&lt;String, ObjectFactory&lt;?&gt;&gt; singletonFactories = <span class=\"keyword\">new</span> HashMap&lt;&gt;(<span class=\"number\">16</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/*</span></span><br><span class=\"line\"><span class=\"comment\">     * äºŒçº§ç¼“å­˜</span></span><br><span class=\"line\"><span class=\"comment\">     * å­˜æ”¾åŸå§‹çš„ bean å¯¹è±¡ç”¨äºè§£å†³å¾ªç¯ä¾èµ–ï¼Œå­˜åˆ°é‡Œé¢çš„å¯¹è±¡è¿˜æ²¡æœ‰è¢«å¡«å……å±æ€§ã€‚</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">final</span> Map&lt;String, Object&gt; earlySingletonObjects = <span class=\"keyword\">new</span> HashMap&lt;&gt;(<span class=\"number\">16</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/** Names of beans that are currently in creation */</span></span><br><span class=\"line\">    <span class=\"comment\">// æ ‡è®°ä¸ºæ­£åœ¨åˆ›å»ºçš„ bean çš„é›†åˆ(A ä¾èµ–äº Bï¼Œå®ä¾‹åŒ– A çš„è¿‡ç¨‹ä¸­å‘ç°ä¾èµ– Bï¼Œå°±å»åˆ›å»º Bï¼Œé‚£ä¹ˆ A å°±ä¼šæ”¾åœ¨æ­¤é›†åˆä¸­)</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">final</span> Set&lt;String&gt; singletonsCurrentlyInCreation =</span><br><span class=\"line\">            Collections.newSetFromMap(<span class=\"keyword\">new</span> ConcurrentHashMap&lt;&gt;(<span class=\"number\">16</span>));</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><p>é¦–å…ˆå°è¯•å»ä»ä¸€çº§ç¼“å­˜ singletonObjects å•ä¾‹æ± ä¸­å»è·å–ï¼Œæ²¡æœ‰è·å–åˆ°å¹¶ä¸”è¦è·å–çš„ Bean æ­£åœ¨åˆ›å»ºä¸­ï¼Œå†å»æŸ¥æ‰¾äºŒçº§ç¼“å­˜ earlySingletonObjectsï¼Œå¦‚æœè¿˜æ˜¯æ²¡æœ‰æ‰¾åˆ°ï¼Œå°±å†å»ä¸‰çº§ç¼“å­˜ singletonFactories ä¸­å»æ‰¾ï¼Œæ‰¾åˆ°äº†å°±ä»ä¸‰çº§ç¼“å­˜ singletonFactories ä¸­ç§»é™¤ï¼Œæ”¾å…¥åˆ°äºŒçº§ç¼“å­˜ earlySingletonObjects ä¸­å»ï¼Œè¿™æ ·åšçš„å¥½å¤„å°±æ˜¯ï¼Œå¦‚æœè¿˜æœ‰å…¶ä»–å¯¹è±¡å°è¯•è·å–è¿™ä¸ª Beanï¼Œé‚£ä¹ˆå¯ä»¥ç›´æ¥ä»äºŒçº§ç¼“å­˜ä¸­å–å‡ºæ¥ï¼Œå°±ä¸éœ€è¦å†è°ƒç”¨ getEarlyBeanReference() æ–¹æ³•äº†ã€‚æœ€ç»ˆï¼Œåˆ›å»ºå¥½çš„ Beanï¼Œå…¨éƒ¨ put åˆ°äº†å•ä¾‹æ±  singletonObjects ä¸­äº†ã€‚</p>\n</li>\n<li><p>å¦‚ä½•è§£å†³å¾ªç¯ä¾èµ–</p>\n<ul>\n<li>æ„é€ å™¨å¾ªç¯ä¾èµ–è§£å†³åŠæ³•ï¼šåœ¨æ„é€ å‡½æ•°ä¸­ä½¿ç”¨@Lazyæ³¨è§£å»¶è¿ŸåŠ è½½ã€‚åœ¨æ³¨å…¥ä¾èµ–æ—¶ï¼Œå…ˆæ³¨å…¥ä»£ç†å¯¹è±¡ï¼Œå½“é¦–æ¬¡ä½¿ç”¨æ—¶å†åˆ›å»ºå¯¹è±¡è¯´æ˜ï¼šä¸€ç§äº’æ–¥çš„å…³ç³»è€Œéå±‚æ¬¡é€’è¿›çš„å…³ç³»ï¼Œæ•…ç§°ä¸ºä¸‰ä¸ªMapè€Œéä¸‰çº§ç¼“å­˜çš„ç¼˜ç”± å®Œæˆæ³¨å…¥ï¼›</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"Springä¸­Filterå’ŒInterceptorçš„åŒºåˆ«\"><a href=\"#Springä¸­Filterå’ŒInterceptorçš„åŒºåˆ«\" class=\"headerlink\" title=\"Springä¸­Filterå’ŒInterceptorçš„åŒºåˆ«\"></a>Springä¸­Filterå’ŒInterceptorçš„åŒºåˆ«</h3><ul>\n<li>Filteræ˜¯åŸºäºå‡½æ•°å›è°ƒï¼ˆdoFilter()æ–¹æ³•ï¼‰çš„ï¼Œè€ŒInterceptoråˆ™æ˜¯åŸºäºJavaåå°„çš„ï¼ˆAOPæ€æƒ³ï¼‰ã€‚</li>\n<li>Filterä¾èµ–äºServletå®¹å™¨ï¼Œè€ŒInterceptorä¸ä¾èµ–äºServletå®¹å™¨ã€‚</li>\n<li>Filterå¯¹å‡ ä¹æ‰€æœ‰çš„è¯·æ±‚èµ·ä½œç”¨ï¼Œè€ŒInterceptoråªèƒ½å¯¹actionè¯·æ±‚èµ·ä½œç”¨ã€‚</li>\n<li>Interceptorå¯ä»¥è®¿é—®Actionçš„ä¸Šä¸‹æ–‡ï¼Œå€¼æ ˆé‡Œçš„å¯¹è±¡ï¼Œè€ŒFilterä¸èƒ½ã€‚</li>\n<li>åœ¨actionçš„ç”Ÿå‘½å‘¨æœŸé‡Œï¼ŒInterceptorå¯ä»¥è¢«å¤šæ¬¡è°ƒç”¨ï¼Œè€ŒFilteråªèƒ½åœ¨å®¹å™¨åˆå§‹åŒ–æ—¶è°ƒç”¨ä¸€æ¬¡ã€‚</li>\n<li>Filteråœ¨è¿‡æ»¤æ˜¯åªèƒ½å¯¹requestå’Œresponseè¿›è¡Œæ“ä½œï¼Œè€Œinterceptorå¯ä»¥å¯¹requestã€responseã€handlerã€modelAndViewã€exceptionè¿›è¡Œæ“ä½œã€‚</li>\n<li>interceptor çš„æ‰§è¡Œé¡ºåºå¤§è‡´ä¸ºï¼š<ul>\n<li>è¯·æ±‚åˆ°è¾¾ DispatcherServlet</li>\n<li>DispatcherServlet å‘é€è‡³ Interceptor ï¼Œæ‰§è¡Œ preHandle</li>\n<li>è¯·æ±‚è¾¾åˆ° Controller</li>\n<li>è¯·æ±‚ç»“æŸåï¼ŒpostHandle æ‰§è¡Œ</li>\n</ul>\n</li>\n<li>Spring ä¸­ä¸»è¦é€šè¿‡ HandlerInterceptor æ¥å£æ¥å®ç°è¯·æ±‚çš„æ‹¦æˆªï¼Œå®ç° HandlerInterceptor æ¥å£éœ€è¦å®ç°ä¸‹é¢ä¸‰ä¸ªæ–¹æ³•ï¼š<ul>\n<li><strong>preHandle()</strong> â€“ åœ¨handleræ‰§è¡Œä¹‹å‰ï¼Œè¿”å› boolean å€¼ï¼Œtrue è¡¨ç¤ºç»§ç»­æ‰§è¡Œï¼Œfalse ä¸ºåœæ­¢æ‰§è¡Œå¹¶è¿”å›ã€‚</li>\n<li><strong>postHandle()</strong> â€“ åœ¨handleræ‰§è¡Œä¹‹å, å¯ä»¥åœ¨è¿”å›ä¹‹å‰å¯¹è¿”å›çš„ç»“æœè¿›è¡Œä¿®æ”¹</li>\n<li><strong>afterCompletion()</strong> â€“ åœ¨è¯·æ±‚å®Œå…¨ç»“æŸåè°ƒç”¨ï¼Œå¯ä»¥ç”¨æ¥ç»Ÿè®¡è¯·æ±‚è€—æ—¶ç­‰ç­‰</li>\n</ul>\n</li>\n</ul>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class=\"line\"><span class=\"keyword\">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> org.apache.log4j.Logger;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.springframework.web.servlet.ModelAndView;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.springframework.web.servlet.handler.HandlerInterceptorAdapter;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ExecuteTimeInterceptor</span> <span class=\"keyword\">extends</span> <span class=\"title\">HandlerInterceptorAdapter</span></span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> Logger logger = Logger.getLogger(ExecuteTimeInterceptor<span class=\"class\">.<span class=\"keyword\">class</span>)</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"comment\">//before the actual handler will be executed</span></span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">boolean</span> <span class=\"title\">preHandle</span><span class=\"params\">(HttpServletRequest request,</span></span></span><br><span class=\"line\"><span class=\"function\"><span class=\"params\">\t\tHttpServletResponse response, Object handler)</span></span></span><br><span class=\"line\"><span class=\"function\">\t\t<span class=\"keyword\">throws</span> Exception </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">\t\t<span class=\"keyword\">long</span> startTime = System.currentTimeMillis();</span><br><span class=\"line\">\t\trequest.setAttribute(<span class=\"string\">\"startTime\"</span>, startTime);</span><br><span class=\"line\"></span><br><span class=\"line\">\t\t<span class=\"keyword\">return</span> <span class=\"keyword\">true</span>;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"comment\">//after the handler is executed</span></span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">postHandle</span><span class=\"params\">(</span></span></span><br><span class=\"line\"><span class=\"function\"><span class=\"params\">\t\tHttpServletRequest request, HttpServletResponse response,</span></span></span><br><span class=\"line\"><span class=\"function\"><span class=\"params\">\t\tObject handler, ModelAndView modelAndView)</span></span></span><br><span class=\"line\"><span class=\"function\">\t\t<span class=\"keyword\">throws</span> Exception </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">\t\t<span class=\"keyword\">long</span> startTime = (Long)request.getAttribute(<span class=\"string\">\"startTime\"</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">\t\t<span class=\"keyword\">long</span> endTime = System.currentTimeMillis();</span><br><span class=\"line\"></span><br><span class=\"line\">\t\t<span class=\"keyword\">long</span> executeTime = endTime - startTime;</span><br><span class=\"line\"></span><br><span class=\"line\">\t\t<span class=\"comment\">//modified the exisitng modelAndView</span></span><br><span class=\"line\">\t\tmodelAndView.addObject(<span class=\"string\">\"executeTime\"</span>,executeTime);</span><br><span class=\"line\"></span><br><span class=\"line\">\t\t<span class=\"comment\">//log it</span></span><br><span class=\"line\">\t\t<span class=\"keyword\">if</span>(logger.isDebugEnabled())&#123;</span><br><span class=\"line\">\t\t   logger.debug(<span class=\"string\">\"[\"</span> + handler + <span class=\"string\">\"] executeTime : \"</span> + executeTime + <span class=\"string\">\"ms\"</span>);</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>Servlet çš„ Filter æ¥å£éœ€è¦å®ç°å¦‚ä¸‹æ–¹æ³•ï¼š<ul>\n<li><code>void init(FilterConfig paramFilterConfig)</code> â€“ å½“å®¹å™¨åˆå§‹åŒ– Filter æ—¶è°ƒç”¨ï¼Œè¯¥æ–¹æ³•åœ¨ Filter çš„ç”Ÿå‘½å‘¨æœŸåªä¼šè¢«è°ƒç”¨ä¸€æ¬¡ï¼Œä¸€èˆ¬åœ¨è¯¥æ–¹æ³•ä¸­åˆå§‹åŒ–ä¸€äº›èµ„æºï¼ŒFilterConfig æ˜¯å®¹å™¨æä¾›ç»™ Filter çš„åˆå§‹åŒ–å‚æ•°ï¼Œåœ¨è¯¥æ–¹æ³•ä¸­å¯ä»¥æŠ›å‡º ServletException ã€‚init æ–¹æ³•å¿…é¡»æ‰§è¡ŒæˆåŠŸï¼Œå¦åˆ™ Filter å¯èƒ½ä¸èµ·ä½œç”¨ï¼Œå‡ºç°ä»¥ä¸‹ä¸¤ç§æƒ…å†µæ—¶ï¼Œweb å®¹å™¨ä¸­ Filter å¯èƒ½æ— æ•ˆï¼š 1ï¼‰æŠ›å‡º ServletException 2ï¼‰è¶…è¿‡ web å®¹å™¨å®šä¹‰çš„æ‰§è¡Œæ—¶é—´ã€‚</li>\n<li><code>doFilter(ServletRequest paramServletRequest, ServletResponse paramServletResponse, FilterChain paramFilterChain)</code> â€“ Web å®¹å™¨æ¯ä¸€æ¬¡è¯·æ±‚éƒ½ä¼šè°ƒç”¨è¯¥æ–¹æ³•ã€‚è¯¥æ–¹æ³•å°†å®¹å™¨çš„è¯·æ±‚å’Œå“åº”ä½œä¸ºå‚æ•°ä¼ é€’è¿›æ¥ï¼Œ FilterChain ç”¨æ¥è°ƒç”¨ä¸‹ä¸€ä¸ª Filterã€‚</li>\n<li><code>void destroy()</code> â€“ å½“å®¹å™¨é”€æ¯ Filter å®ä¾‹æ—¶è°ƒç”¨è¯¥æ–¹æ³•ï¼Œå¯ä»¥åœ¨æ–¹æ³•ä¸­é”€æ¯èµ„æºï¼Œè¯¥æ–¹æ³•åœ¨ Filter çš„ç”Ÿå‘½å‘¨æœŸåªä¼šè¢«è°ƒç”¨ä¸€æ¬¡ã€‚</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"Spring-äº‹åŠ¡\"><a href=\"#Spring-äº‹åŠ¡\" class=\"headerlink\" title=\"Spring äº‹åŠ¡\"></a>Spring äº‹åŠ¡</h3><h4 id=\"Springçš„äº‹ç‰©æŠ½è±¡\"><a href=\"#Springçš„äº‹ç‰©æŠ½è±¡\" class=\"headerlink\" title=\"Springçš„äº‹ç‰©æŠ½è±¡\"></a>Springçš„äº‹ç‰©æŠ½è±¡</h4><ul>\n<li><p>Springäº‹ç‰©çš„ç‰¹æ€§</p>\n<ul>\n<li>éš”ç¦»çº§åˆ«<ul>\n<li>å¤„ç†å¹¶å‘äº‹åŠ¡å¸¦æ¥çš„é—®é¢˜</li>\n</ul>\n</li>\n<li>äº‹ç‰©ä¼ æ’­<ul>\n<li>å¤„ç†ä¸šåŠ¡ä»£ç äº’ç›¸è°ƒç”¨äº‹ç‰©é—®é¢˜</li>\n</ul>\n</li>\n<li>äº‹ç‰©å›æ»š<ul>\n<li>å¤„ç†ä¸šåŠ¡å¤±è´¥ä¼šæ»šä¸šåŠ¡äº‹ç‰©é—®é¢˜</li>\n</ul>\n</li>\n<li>äº‹ç‰©è¶…æ—¶<ul>\n<li>å¤„ç†äº‹ç‰©å…è®¸çš„æ‰§è¡Œæ—¶é—´é—®é¢˜</li>\n</ul>\n</li>\n<li>æ˜¯å¦åªè¯»<ul>\n<li>æ®è¯´å¯ä»¥åªè¯»æé«˜äº‹ç‰©æ‰§è¡Œæ•ˆç‡</li>\n</ul>\n</li>\n</ul>\n</li>\n<li><p>äº‹ç‰©å¼€å¯æ–¹å¼</p>\n<ul>\n<li>ç¼–ç¨‹å¼äº‹åŠ¡ ä»£ç ä¸­ç¡¬ç¼–ç å¼€å¯äº‹ç‰©ã€‚</li>\n<li>å£°æ˜å¼äº‹åŠ¡<ul>\n<li>åŸºäºæ³¨è§£å¼€å¯äº‹ç‰©ã€‚</li>\n<li>åŸºäºxmlé…ç½®æ–‡ä»¶å¼€å¯äº‹ç‰©ã€‚</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<h4 id=\"Spring-äº‹åŠ¡ä¸­çš„éš”ç¦»çº§åˆ«\"><a href=\"#Spring-äº‹åŠ¡ä¸­çš„éš”ç¦»çº§åˆ«\" class=\"headerlink\" title=\"Spring äº‹åŠ¡ä¸­çš„éš”ç¦»çº§åˆ«\"></a>Spring äº‹åŠ¡ä¸­çš„éš”ç¦»çº§åˆ«</h4><blockquote>\n<p><strong>TransactionDefinition</strong> æ¥â¼ä¸­å®šä¹‰äº†äº”ä¸ªè¡¨ç¤ºéš”ç¦»çº§åˆ«çš„å¸¸é‡ï¼š</p>\n</blockquote>\n<ul>\n<li><p><strong>TransactionDefinition.ISOLATION_DEFAULT:</strong> ä½¿â½¤åç«¯æ•°æ®åº“é»˜è®¤çš„éš”ç¦»çº§åˆ«ï¼ŒMysql é»˜è®¤é‡‡â½¤çš„ REPEATABLE_READéš”ç¦»çº§åˆ« Oracle é»˜è®¤é‡‡â½¤çš„ READ_COMMITTEDéš”ç¦»çº§åˆ«ã€‚</p>\n</li>\n<li><p><strong>TransactionDefinition.ISOLATION_READ_UNCOMMITTED:</strong> æœ€ä½çš„éš”ç¦»çº§åˆ«ï¼Œå…è®¸è¯»å–å°šæœªæäº¤çš„é˜»â½Œè„è¯»ï¼Œä½†æ˜¯å¹»è¯»æˆ–ä¸å¯é‡å¤è¯»ä»æœ‰å¯èƒ½å‘â½£ã€‚</p>\n</li>\n<li><p><strong>TransactionDefinition.ISOLATION_READ_COMMITTED:</strong> å…è®¸è¯»å–å¹¶å‘äº‹åŠ¡å·²ç»æäº¤çš„æ•°æ®ï¼Œå¯ä»¥é˜»â½Œè„è¯»ï¼Œä½†æ˜¯å¹»è¯»æˆ–ä¸å¯é‡å¤è¯»ä»æœ‰å¯èƒ½å‘â½£ã€‚</p>\n</li>\n<li><p><strong>TransactionDefinition.ISOLATION_REPEATABLE_READ:</strong> å¯¹åŒâ¼€å­—æ®µçš„å¤šæ¬¡è¯»å–ç»“æœéƒ½æ˜¯â¼€è‡´çš„ï¼Œé™¤â¾®æ•°æ®æ˜¯è¢«æœ¬èº«äº‹åŠ¡â¾ƒâ¼°æ‰€ä¿®æ”¹ï¼Œå¯ä»¥é˜»â½Œè„è¯»å’Œä¸å¯é‡å¤è¯»ï¼Œä½†å¹»è¯»ä»æœ‰å¯èƒ½å‘â½£ã€‚</p>\n</li>\n<li><p><strong>TransactionDefinition.ISOLATION_SERIALIZABLE:</strong> æœ€â¾¼çš„éš”ç¦»çº§åˆ«ï¼Œå®Œå…¨æœä»ACIDçš„éš”ç¦»çº§åˆ«ã€‚æ‰€æœ‰çš„äº‹åŠ¡ä¾æ¬¡é€ä¸ªæ‰§â¾ï¼Œè¿™æ ·äº‹åŠ¡ä¹‹é—´å°±å®Œå…¨ä¸å¯èƒ½äº§â½£â¼²æ‰°ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œè¯¥çº§åˆ«å¯ä»¥é˜²â½Œè„è¯»ã€ä¸å¯é‡å¤è¯»ä»¥åŠå¹»è¯»ã€‚ä½†æ˜¯è¿™å°†ä¸¥é‡å½±å“ç¨‹åºçš„æ€§èƒ½ã€‚é€šå¸¸æƒ…å†µä¸‹ä¹Ÿä¸ä¼šâ½¤åˆ°è¯¥çº§åˆ«ã€‚</p>\n</li>\n</ul>\n<h4 id=\"Spring-äº‹åŠ¡ä¸­äº‹åŠ¡ä¼ æ’­â¾ä¸º\"><a href=\"#Spring-äº‹åŠ¡ä¸­äº‹åŠ¡ä¼ æ’­â¾ä¸º\" class=\"headerlink\" title=\"Spring äº‹åŠ¡ä¸­äº‹åŠ¡ä¼ æ’­â¾ä¸º\"></a>Spring äº‹åŠ¡ä¸­äº‹åŠ¡ä¼ æ’­â¾ä¸º</h4><ul>\n<li>â½€æŒå½“å‰äº‹åŠ¡çš„æƒ…å†µï¼š<ul>\n<li><strong>TransactionDefinition.PROPAGATION_REQUIRED</strong>ï¼š å¦‚æœå½“å‰å­˜åœ¨äº‹åŠ¡ï¼Œåˆ™åŠ â¼Šè¯¥äº‹åŠ¡ï¼›å¦‚æœå½“å‰æ²¡æœ‰äº‹åŠ¡ï¼Œåˆ™åˆ›å»ºâ¼€ä¸ªæ–°çš„äº‹åŠ¡ã€‚</li>\n<li><strong>TransactionDefinition.PROPAGATION_SUPPORTS</strong>ï¼š å¦‚æœå½“å‰å­˜åœ¨äº‹åŠ¡ï¼Œåˆ™åŠ â¼Šè¯¥äº‹åŠ¡ï¼›å¦‚æœå½“å‰æ²¡æœ‰äº‹åŠ¡ï¼Œåˆ™ä»¥â¾®äº‹åŠ¡çš„â½…å¼ç»§ç»­è¿â¾ã€‚</li>\n<li><strong>TransactionDefinition.PROPAGATION_MANDATORY</strong>ï¼š å¦‚æœå½“å‰å­˜åœ¨äº‹åŠ¡ï¼Œåˆ™åŠ â¼Šè¯¥äº‹åŠ¡ï¼›å¦‚æœå½“å‰æ²¡æœ‰äº‹åŠ¡ï¼Œåˆ™æŠ›å‡ºå¼‚å¸¸ã€‚ï¼ˆmandatoryï¼šå¼ºåˆ¶æ€§ï¼‰</li>\n</ul>\n</li>\n<li>ä¸â½€æŒå½“å‰äº‹åŠ¡çš„æƒ…å†µï¼š<ul>\n<li><strong>TransactionDefinition.PROPAGATION_REQUIRES_NEW</strong>ï¼š åˆ›å»ºâ¼€ä¸ªæ–°çš„äº‹åŠ¡ï¼Œå¦‚æœå½“å‰å­˜åœ¨äº‹åŠ¡ï¼Œåˆ™æŠŠå½“å‰äº‹åŠ¡æŒ‚èµ·ã€‚</li>\n<li><strong>TransactionDefinition.PROPAGATION_NOT_SUPPORTED</strong>ï¼š ä»¥â¾®äº‹åŠ¡â½…å¼è¿â¾ï¼Œå¦‚æœå½“å‰å­˜åœ¨äº‹åŠ¡ï¼Œåˆ™æŠŠå½“å‰äº‹åŠ¡æŒ‚èµ·ã€‚</li>\n<li><strong>TransactionDefinition.PROPAGATION_NEVER</strong>ï¼š ä»¥â¾®äº‹åŠ¡â½…å¼è¿â¾ï¼Œå¦‚æœå½“å‰å­˜åœ¨äº‹åŠ¡ï¼Œåˆ™æŠ›å‡ºå¼‚å¸¸ã€‚</li>\n</ul>\n</li>\n<li>å…¶ä»–æƒ…å†µï¼š<ul>\n<li><strong>TransactionDefinition.PROPAGATION_NESTED</strong>ï¼š å¦‚æœå½“å‰å­˜åœ¨äº‹åŠ¡ï¼Œåˆ™åˆ›å»ºâ¼€ä¸ªäº‹åŠ¡ä½œä¸ºå½“å‰äº‹åŠ¡çš„åµŒå¥—äº‹åŠ¡æ¥è¿â¾ï¼›å¦‚æœå½“å‰æ²¡æœ‰äº‹åŠ¡ï¼Œåˆ™è¯¥å–å€¼ç­‰ä»·äºTransactionDefinition.PROPAGATION_REQUIREDã€‚</li>\n</ul>\n</li>\n</ul>\n<h4 id=\"TransactionStatusæ¥å£ä»‹ç»\"><a href=\"#TransactionStatusæ¥å£ä»‹ç»\" class=\"headerlink\" title=\"TransactionStatusæ¥å£ä»‹ç»\"></a>TransactionStatusæ¥å£ä»‹ç»</h4><ul>\n<li>TransactionStatusæ¥å£ç”¨æ¥è®°å½•äº‹åŠ¡çš„çŠ¶æ€ è¯¥æ¥å£å®šä¹‰äº†ä¸€ç»„æ–¹æ³•,ç”¨æ¥è·å–æˆ–åˆ¤æ–­äº‹åŠ¡çš„ç›¸åº”çŠ¶æ€ä¿¡æ¯.</li>\n</ul>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">interface</span> <span class=\"title\">TransactionStatus</span></span>&#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">boolean</span> <span class=\"title\">isNewTransaction</span><span class=\"params\">()</span></span>; <span class=\"comment\">// æ˜¯å¦æ˜¯æ–°çš„äº‹ç‰©</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">boolean</span> <span class=\"title\">hasSavepoint</span><span class=\"params\">()</span></span>; <span class=\"comment\">// æ˜¯å¦æœ‰æ¢å¤ç‚¹</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">setRollbackOnly</span><span class=\"params\">()</span></span>;  <span class=\"comment\">// è®¾ç½®ä¸ºåªå›æ»š</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">boolean</span> <span class=\"title\">isRollbackOnly</span><span class=\"params\">()</span></span>; <span class=\"comment\">// æ˜¯å¦ä¸ºåªå›æ»š</span></span><br><span class=\"line\">    <span class=\"keyword\">boolean</span> isCompleted; <span class=\"comment\">// æ˜¯å¦å·²å®Œæˆ</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"Spring-Boot-å¯åŠ¨æµç¨‹\"><a href=\"#Spring-Boot-å¯åŠ¨æµç¨‹\" class=\"headerlink\" title=\"Spring Boot å¯åŠ¨æµç¨‹\"></a>Spring Boot å¯åŠ¨æµç¨‹</h3><blockquote>\n<p>Spring Boot ç¨‹åºçš„å…¥å£æ˜¯ SpringApplication.run(Application.class, args) æ–¹æ³•</p>\n</blockquote>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> ConfigurableApplicationContext <span class=\"title\">run</span><span class=\"params\">(String... args)</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">// 1.åˆ›å»ºå¹¶å¯åŠ¨è®¡æ—¶ç›‘æ§ç±»</span></span><br><span class=\"line\">    StopWatch stopWatch = <span class=\"keyword\">new</span> StopWatch();</span><br><span class=\"line\">    stopWatch.start();</span><br><span class=\"line\">    <span class=\"comment\">// 2.å£°æ˜åº”ç”¨ä¸Šä¸‹æ–‡å¯¹è±¡å’Œå¼‚å¸¸æŠ¥å‘Šé›†åˆ</span></span><br><span class=\"line\">    ConfigurableApplicationContext context = <span class=\"keyword\">null</span>;</span><br><span class=\"line\">    Collection&lt;SpringBootExceptionReporter&gt; exceptionReporters = <span class=\"keyword\">new</span> ArrayList();</span><br><span class=\"line\">    <span class=\"comment\">// 3.è®¾ç½®ç³»ç»Ÿå±æ€§ headless çš„å€¼</span></span><br><span class=\"line\">    <span class=\"keyword\">this</span>.configureHeadlessProperty();</span><br><span class=\"line\">    <span class=\"comment\">// 4.åˆ›å»ºæ‰€æœ‰ Spring è¿è¡Œç›‘å¬å™¨å¹¶å‘å¸ƒåº”ç”¨å¯åŠ¨äº‹ä»¶</span></span><br><span class=\"line\">    SpringApplicationRunListeners listeners = <span class=\"keyword\">this</span>.getRunListeners(args);</span><br><span class=\"line\">    listeners.starting();</span><br><span class=\"line\">    Collection exceptionReporters;</span><br><span class=\"line\">    <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">        <span class=\"comment\">// 5.å¤„ç† args å‚æ•°</span></span><br><span class=\"line\">        ApplicationArguments applicationArguments = <span class=\"keyword\">new</span> DefaultApplicationArguments(args);</span><br><span class=\"line\">        <span class=\"comment\">// 6.å‡†å¤‡ç¯å¢ƒ</span></span><br><span class=\"line\">        ConfigurableEnvironment environment = <span class=\"keyword\">this</span>.prepareEnvironment(listeners, applicationArguments);</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.configureIgnoreBeanInfo(environment);</span><br><span class=\"line\">        <span class=\"comment\">// 7.åˆ›å»º Banner çš„æ‰“å°ç±»</span></span><br><span class=\"line\">        Banner printedBanner = <span class=\"keyword\">this</span>.printBanner(environment);</span><br><span class=\"line\">        <span class=\"comment\">// 8.åˆ›å»ºåº”ç”¨ä¸Šä¸‹æ–‡</span></span><br><span class=\"line\">        context = <span class=\"keyword\">this</span>.createApplicationContext();</span><br><span class=\"line\">        <span class=\"comment\">// 9.å®ä¾‹åŒ–å¼‚å¸¸æŠ¥å‘Šå™¨</span></span><br><span class=\"line\">        exceptionReporters = this.getSpringFactoriesInstances(SpringBootExceptionReporter.class, new Class[]&#123;ConfigurableApplicationContext.class&#125;, context);</span><br><span class=\"line\">        <span class=\"comment\">// 10.å‡†å¤‡åº”ç”¨ä¸Šä¸‹æ–‡</span></span><br><span class=\"line\">        <span class=\"keyword\">this</span>.prepareContext(context, environment, listeners, applicationArguments, printedBanner);</span><br><span class=\"line\">        <span class=\"comment\">// 11.åˆ·æ–°åº”ç”¨ä¸Šä¸‹æ–‡</span></span><br><span class=\"line\">        <span class=\"keyword\">this</span>.refreshContext(context);</span><br><span class=\"line\">        <span class=\"comment\">// 12.åº”ç”¨ä¸Šä¸‹æ–‡åˆ·æ–°ä¹‹åçš„äº‹ä»¶çš„å¤„ç†</span></span><br><span class=\"line\">        <span class=\"keyword\">this</span>.afterRefresh(context, applicationArguments);</span><br><span class=\"line\">        <span class=\"comment\">// 13.åœæ­¢è®¡æ—¶ç›‘æ§ç±»</span></span><br><span class=\"line\">        stopWatch.stop();</span><br><span class=\"line\">        <span class=\"comment\">// 14.è¾“å‡ºæ—¥å¿—è®°å½•æ‰§è¡Œä¸»ç±»åã€æ—¶é—´ä¿¡æ¯</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (<span class=\"keyword\">this</span>.logStartupInfo) &#123;</span><br><span class=\"line\">            (<span class=\"keyword\">new</span> StartupInfoLogger(<span class=\"keyword\">this</span>.mainApplicationClass)).logStarted(<span class=\"keyword\">this</span>.getApplicationLog(), stopWatch);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"comment\">// 15.å‘å¸ƒåº”ç”¨ä¸Šä¸‹æ–‡å¯åŠ¨å®Œæˆäº‹ä»¶</span></span><br><span class=\"line\">        listeners.started(context);</span><br><span class=\"line\">        <span class=\"comment\">// 16.æ‰§è¡Œæ‰€æœ‰ Runner è¿è¡Œå™¨</span></span><br><span class=\"line\">        <span class=\"keyword\">this</span>.callRunners(context, applicationArguments);</span><br><span class=\"line\">    &#125; <span class=\"keyword\">catch</span> (Throwable var10) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.handleRunFailure(context, var10, exceptionReporters, listeners);</span><br><span class=\"line\">        <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> IllegalStateException(var10);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">        <span class=\"comment\">// 17.å‘å¸ƒåº”ç”¨ä¸Šä¸‹æ–‡å°±ç»ªäº‹ä»¶</span></span><br><span class=\"line\">        listeners.running(context);</span><br><span class=\"line\">        <span class=\"comment\">// 18.è¿”å›åº”ç”¨ä¸Šä¸‹æ–‡å¯¹è±¡</span></span><br><span class=\"line\">        <span class=\"keyword\">return</span> context;</span><br><span class=\"line\">    &#125; <span class=\"keyword\">catch</span> (Throwable var9) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.handleRunFailure(context, var9, exceptionReporters, (SpringApplicationRunListeners)<span class=\"keyword\">null</span>);</span><br><span class=\"line\">        <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> IllegalStateException(var9);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><p>Spring Boot çš„å¯åŠ¨æµç¨‹</p>\n<ul>\n<li><p>1ã€åˆ›å»ºå¹¶å¯åŠ¨è®¡æ—¶ç›‘æ§ç±»</p>\n<ul>\n<li>æ­¤è®¡æ—¶å™¨æ˜¯ä¸ºäº†ç›‘æ§å¹¶è®°å½• Spring Boot åº”ç”¨å¯åŠ¨çš„æ—¶é—´çš„ï¼Œå®ƒä¼šè®°å½•å½“å‰ä»»åŠ¡çš„åç§°ï¼Œç„¶åå¼€å¯è®¡æ—¶å™¨ã€‚</li>\n</ul>\n</li>\n<li><p>2.å£°æ˜åº”ç”¨ä¸Šä¸‹æ–‡å¯¹è±¡å’Œå¼‚å¸¸æŠ¥å‘Šé›†åˆ</p>\n<ul>\n<li>æ­¤è¿‡ç¨‹å£°æ˜äº†åº”ç”¨ä¸Šä¸‹æ–‡å¯¹è±¡å’Œä¸€ä¸ªå¼‚å¸¸æŠ¥å‘Šçš„ ArrayList é›†åˆã€‚</li>\n</ul>\n</li>\n<li><p>3.è®¾ç½®ç³»ç»Ÿå±æ€§ headless çš„å€¼</p>\n<ul>\n<li>è®¾ç½® Java.awt.headless = trueï¼Œå…¶ä¸­ awtï¼ˆAbstract Window Toolkitï¼‰çš„å«ä¹‰æ˜¯æŠ½è±¡çª—å£å·¥å…·é›†ã€‚è®¾ç½®ä¸º true è¡¨ç¤ºè¿è¡Œä¸€ä¸ª headless æœåŠ¡å™¨ï¼Œå¯ä»¥ç”¨å®ƒæ¥ä½œä¸€äº›ç®€å•çš„å›¾åƒå¤„ç†ã€‚</li>\n</ul>\n</li>\n<li><p>4.åˆ›å»ºæ‰€æœ‰ Spring è¿è¡Œç›‘å¬å™¨å¹¶å‘å¸ƒåº”ç”¨å¯åŠ¨äº‹ä»¶</p>\n<ul>\n<li>æ­¤è¿‡ç¨‹ç”¨äºè·å–é…ç½®çš„ç›‘å¬å™¨åç§°å¹¶å®ä¾‹åŒ–æ‰€æœ‰çš„ç±»ã€‚</li>\n</ul>\n</li>\n<li><p>5.åˆå§‹åŒ–é»˜è®¤åº”ç”¨çš„å‚æ•°ç±»</p>\n<ul>\n<li>ä¹Ÿå°±æ˜¯è¯´å£°æ˜å¹¶åˆ›å»ºä¸€ä¸ªåº”ç”¨å‚æ•°å¯¹è±¡ã€‚</li>\n</ul>\n</li>\n<li><p>6.å‡†å¤‡ç¯å¢ƒ</p>\n<ul>\n<li>åˆ›å»ºé…ç½®å¹¶ä¸”ç»‘å®šç¯å¢ƒï¼ˆé€šè¿‡ property sources å’Œ profiles ç­‰é…ç½®æ–‡ä»¶ï¼‰ã€‚</li>\n</ul>\n</li>\n<li><p>7.åˆ›å»º Banner çš„æ‰“å°ç±»</p>\n<ul>\n<li>å°±æ˜¯å‡ºä¸ªé‚£ä¸ªlogoä¹Ÿå¯ä»¥è‡ªå·±å®šä¹‰ã€‚</li>\n</ul>\n</li>\n<li><p>8.åˆ›å»ºåº”ç”¨ä¸Šä¸‹æ–‡</p>\n<ul>\n<li>æ ¹æ®ä¸åŒçš„åº”ç”¨ç±»å‹æ¥åˆ›å»ºä¸åŒçš„ ApplicationContext ä¸Šä¸‹æ–‡å¯¹è±¡ã€‚</li>\n</ul>\n</li>\n<li><p>9.å®ä¾‹åŒ–å¼‚å¸¸æŠ¥å‘Šå™¨</p>\n<ul>\n<li>å®ƒè°ƒç”¨çš„æ˜¯ getSpringFactoriesInstances() æ–¹æ³•æ¥è·å–é…ç½®å¼‚å¸¸ç±»çš„åç§°ï¼Œå¹¶å®ä¾‹åŒ–æ‰€æœ‰çš„å¼‚å¸¸å¤„ç†ç±»ã€‚</li>\n</ul>\n</li>\n<li><p>10.å‡†å¤‡åº”ç”¨ä¸Šä¸‹æ–‡</p>\n<ul>\n<li>æ­¤æ–¹æ³•çš„ä¸»è¦ä½œç”¨æ˜¯æŠŠä¸Šé¢å·²ç»åˆ›å»ºå¥½çš„å¯¹è±¡ï¼Œä¼ é€’ç»™ prepareContext æ¥å‡†å¤‡ä¸Šä¸‹æ–‡ï¼Œä¾‹å¦‚å°†ç¯å¢ƒå˜é‡ environment å¯¹è±¡ç»‘å®šåˆ°ä¸Šä¸‹æ–‡ä¸­ã€é…ç½® bean ç”Ÿæˆå™¨ä»¥åŠèµ„æºåŠ è½½å™¨ã€è®°å½•å¯åŠ¨æ—¥å¿—ç­‰æ“ä½œã€‚</li>\n</ul>\n</li>\n<li><p>11.åˆ·æ–°åº”ç”¨ä¸Šä¸‹æ–‡</p>\n<ul>\n<li>æ­¤æ–¹æ³•ç”¨äºè§£æé…ç½®æ–‡ä»¶ï¼ŒåŠ è½½ bean å¯¹è±¡ï¼Œå¹¶ä¸”å¯åŠ¨å†…ç½®çš„ web å®¹å™¨ç­‰æ“ä½œã€‚</li>\n</ul>\n</li>\n<li><p>12.åº”ç”¨ä¸Šä¸‹æ–‡åˆ·æ–°ä¹‹åçš„äº‹ä»¶å¤„ç†</p>\n<ul>\n<li>è¿™ä¸ªæ–¹æ³•çš„æºç æ˜¯ç©ºçš„ï¼Œå¯ä»¥åšä¸€äº›è‡ªå®šä¹‰çš„åç½®å¤„ç†æ“ä½œã€‚</li>\n</ul>\n</li>\n<li><p>13.åœæ­¢è®¡æ—¶ç›‘æ§ç±»</p>\n<ul>\n<li>åœæ­¢æ­¤è¿‡ç¨‹ç¬¬ä¸€æ­¥ä¸­çš„ç¨‹åºè®¡æ—¶å™¨ï¼Œå¹¶ç»Ÿè®¡ä»»åŠ¡çš„æ‰§è¡Œä¿¡æ¯ã€‚</li>\n</ul>\n</li>\n<li><p>14.è¾“å‡ºæ—¥å¿—ä¿¡æ¯</p>\n<ul>\n<li>æŠŠç›¸å…³çš„è®°å½•ä¿¡æ¯ï¼Œå¦‚ç±»åã€æ—¶é—´ç­‰ä¿¡æ¯è¿›è¡Œæ§åˆ¶å°è¾“å‡ºã€‚</li>\n</ul>\n</li>\n<li><p>15.å‘å¸ƒåº”ç”¨ä¸Šä¸‹æ–‡å¯åŠ¨å®Œæˆäº‹ä»¶</p>\n<ul>\n<li>è§¦å‘æ‰€æœ‰ SpringApplicationRunListener ç›‘å¬å™¨çš„ started äº‹ä»¶æ–¹æ³•ã€‚</li>\n</ul>\n</li>\n<li><p>16.æ‰§è¡Œæ‰€æœ‰ Runner è¿è¡Œå™¨</p>\n<ul>\n<li>æ‰§è¡Œæ‰€æœ‰çš„ ApplicationRunner å’Œ CommandLineRunner è¿è¡Œå™¨ã€‚</li>\n</ul>\n</li>\n<li><p>17.å‘å¸ƒåº”ç”¨ä¸Šä¸‹æ–‡å°±ç»ªäº‹ä»¶</p>\n<ul>\n<li>è§¦å‘æ‰€æœ‰çš„ SpringApplicationRunListener ç›‘å¬å™¨çš„ running äº‹ä»¶ã€‚</li>\n</ul>\n</li>\n<li><p>18.è¿”å›åº”ç”¨ä¸Šä¸‹æ–‡å¯¹è±¡</p>\n<ul>\n<li>åˆ°æ­¤ä¸ºæ­¢ Spring Boot çš„å¯åŠ¨ç¨‹åºå°±ç»“æŸäº†ã€‚</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"Springä»£ç†\"><a href=\"#Springä»£ç†\" class=\"headerlink\" title=\"Springä»£ç†\"></a>Springä»£ç†</h3><ul>\n<li>åŠ¨æ€ä»£ç†<ul>\n<li>åœ¨ç¨‹åºè¿è¡Œæ—¶åˆ©ç”¨åå°„åŠ¨æ€åˆ›å»ºä»£ç†å¯¹è±¡&lt;å¤ç”¨æ€§ï¼Œæ˜“ç”¨æ€§ï¼Œæ›´åŠ é›†ä¸­éƒ½è°ƒç”¨invokeã€‚</li>\n</ul>\n</li>\n<li>é™æ€ä»£ç†<ul>\n<li>ç¨‹åºè¿è¡Œå‰ä»£ç†ç±»çš„.classæ–‡ä»¶å°±å­˜åœ¨äº†ã€‚</li>\n</ul>\n</li>\n</ul>\n<h4 id=\"Springä¸­è·å–ä»£ç†å¯¹è±¡\"><a href=\"#Springä¸­è·å–ä»£ç†å¯¹è±¡\" class=\"headerlink\" title=\"Springä¸­è·å–ä»£ç†å¯¹è±¡\"></a>Springä¸­è·å–ä»£ç†å¯¹è±¡</h4><blockquote>\n<p>springä¸­è·å–ä»£ç†å¯¹è±¡çš„ä¸‰ç§æ–¹å¼ï¼š</p>\n</blockquote>\n<ol>\n<li>ç›´æ¥autowireåŸºäºæ¥å£æ³¨å…¥ã€‚</li>\n<li><code>@Autowire applicationcontext</code>ï¼Œé€šè¿‡applicationcontext.getbeanè·å–ä»£ç†å¯¹è±¡ã€‚</li>\n<li>é€šè¿‡<code>aopcontext.currentproxy</code>æ–¹æ³•è·å–(æ³¨æ„ï¼šéœ€è¦å¯åŠ¨ç±»ä¸Šå¢åŠ æ³¨è§£<code>@enableaspectjautoproxy(exposeproxy=true))ï¼›</code></li>\n</ol>\n<ul>\n<li>å¦‚æœspringå¯åŠ¨æ—¶å¾ªç¯ä¾èµ–å¯¼è‡´æŠ¥é”™ï¼Œå¯ä»¥é€šè¿‡ä¾èµ–æ³¨å…¥å±æ€§å¢åŠ @lazyæ³¨è§£è§£å†³ã€‚</li>\n</ul>\n<h3 id=\"JDK-Proxy-å’Œ-CGLib-æœ‰ä»€ä¹ˆåŒºåˆ«\"><a href=\"#JDK-Proxy-å’Œ-CGLib-æœ‰ä»€ä¹ˆåŒºåˆ«\" class=\"headerlink\" title=\"JDK Proxy å’Œ CGLib æœ‰ä»€ä¹ˆåŒºåˆ«\"></a>JDK Proxy å’Œ CGLib æœ‰ä»€ä¹ˆåŒºåˆ«</h3><ul>\n<li>JDK Proxy <ul>\n<li>JDK Proxy æ˜¯ Java è¯­è¨€è‡ªå¸¦çš„åŠŸèƒ½ï¼Œæ— éœ€é€šè¿‡åŠ è½½ç¬¬ä¸‰æ–¹ç±»å®ç°ã€‚</li>\n<li>JDK Proxy æ˜¯é€šè¿‡æ‹¦æˆªå™¨åŠ åå°„çš„æ–¹å¼å®ç°çš„ï¼›</li>\n<li>JDK Proxy åªèƒ½ä»£ç†ç»§æ‰¿æ¥å£çš„ç±»ï¼›</li>\n</ul>\n</li>\n<li>CGLib <ul>\n<li>CGLib æ˜¯ç¬¬ä¸‰æ–¹æä¾›çš„å·¥å…·ï¼ŒåŸºäº ASM å®ç°çš„ï¼Œæ€§èƒ½æ¯”è¾ƒé«˜ï¼›</li>\n<li>CGLib æ— éœ€é€šè¿‡æ¥å£æ¥å®ç°ï¼Œå®ƒæ˜¯é€šè¿‡å®ç°å­ç±»çš„æ–¹å¼æ¥å®Œæˆè°ƒç”¨çš„ã€‚</li>\n</ul>\n</li>\n</ul>\n","categories":["æŸ¥ç¼ºè¡¥æ¼"],"tags":["Java","Spring"]},{"title":"æŸ¥ç¼ºè¡¥æ¼-MySQL","url":"/posts/1254210873/","content":"<blockquote>\n<p>æœ¬ç« æ˜¯æ•´ç†çŸ¥è¯†å†…å®¹ï¼Œä¸ºå¼ºåŒ–çŸ¥è¯†é•¿æœŸæ›´æ–°ã€‚</p>\n</blockquote>\n<h3 id=\"MysqlåŸºç¡€æ¶æ„å›¾\"><a href=\"#MysqlåŸºç¡€æ¶æ„å›¾\" class=\"headerlink\" title=\"MysqlåŸºç¡€æ¶æ„å›¾\"></a>MysqlåŸºç¡€æ¶æ„å›¾</h3><p><img src=\"https://z201.oss-cn-shanghai.aliyuncs.com/JavaNote/mysql/mysql%E6%9E%B6%E6%9E%84.svg\" alt=\"mysqlåŸºç¡€æ¶æ„å›¾\"></p>\n<h4 id=\"ç®€å•ä»‹ç»ä¸Šå›¾ç›¸å…³æ¨¡å—åŠŸèƒ½\"><a href=\"#ç®€å•ä»‹ç»ä¸Šå›¾ç›¸å…³æ¨¡å—åŠŸèƒ½\" class=\"headerlink\" title=\"ç®€å•ä»‹ç»ä¸Šå›¾ç›¸å…³æ¨¡å—åŠŸèƒ½\"></a>ç®€å•ä»‹ç»ä¸Šå›¾ç›¸å…³æ¨¡å—åŠŸèƒ½</h4><ul>\n<li><p>è¿æ¥å™¨ï¼šç®¡ç†è¿æ¥ï¼Œæƒé™éªŒè¯</p>\n</li>\n<li><p>æŸ¥è¯¢ç¼“å­˜ï¼šå‘½ä¸­ç¼“å­˜åˆ™ç›´æ¥è¿”å›ç»“æœ</p>\n</li>\n<li><p>è¯­æ³•è§£æï¼šè¯æ³•åˆ†æï¼Œè¯­æ³•åˆ†æ</p>\n</li>\n<li><p>æŸ¥è¯¢ä¼˜åŒ–ï¼šæ‰§è¡Œè®¡åˆ’ç”Ÿæˆï¼Œç´¢å¼•é€‰æ‹©</p>\n</li>\n<li><p>æ‰§è¡Œå™¨ï¼šæ“ä½œå¼•æ“ï¼Œè¿”å›ç»“æœ</p>\n</li>\n<li><p>å­˜å‚¨å¼•æ“ï¼šå­˜å‚¨æ•°æ®ï¼Œæä¾›è¯»å†™ç»“æ„ã€‚</p>\n</li>\n</ul>\n<h4 id=\"è¿æ¥å™¨\"><a href=\"#è¿æ¥å™¨\" class=\"headerlink\" title=\"è¿æ¥å™¨\"></a>è¿æ¥å™¨</h4><blockquote>\n<p>æˆ‘ä»¬éœ€è¦è¿æ¥åˆ°mysqlæœåŠ¡ç«¯æ‰èƒ½è¿›è¡Œå„ç§æ“ä½œã€‚</p>\n</blockquote>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># ä½¿ç”¨å¯†ç ç™»å½•åˆ°æ—¶å€™æˆ‘ä»¬ä¼šä½¿ç”¨è¿™ç§æ ¼å¼ã€‚</span></span><br><span class=\"line\">mysql -h<span class=\"variable\">$ip</span> -P<span class=\"variable\">$port</span> -u<span class=\"variable\">$user</span> -p</span><br></pre></td></tr></table></figure>\n\n<p>æ‰§è¡Œä¸Šè¿°å‘½ä»¤ä¼šæç¤ºè¾“å…¥å¯†ç ã€‚è¾“å…¥å®Œå¯†ç åå°±è¿›å…¥äº†mysqlã€‚</p>\n<ul>\n<li><p>å¦‚æœç”¨æˆ·åæˆ–è€…å¯†ç è¾“å…¥é”™è¯¯ï¼Œä¼šæç¤ºä¸€ä¸ª<code>Access denied for user</code>åˆ°é”™è¯¯ï¼Œç„¶åå®¢æˆ·ç«¯ç¨‹åºç»“æŸæ‰§è¡Œã€‚</p>\n</li>\n<li><p>å¦‚æœç”¨æˆ·åå’Œå¯†ç è®¤è¯é€šè¿‡ï¼Œè¿æ¥å™¨ä¼šå»æƒé™è¡¨ä¸­æŸ¥è¯¢è¯¥ç”¨æˆ·æ‹¥æœ‰çš„æ‰€æœ‰æƒé™ã€‚æ­¤åè¯¥è¿æ¥é‡Œé¢çš„æƒé™é€»è¾‘åˆ¤æ–­éƒ½ä¼šä¾èµ–è®¤è¯æˆåŠŸæ—¶å€™è¯»å–åˆ°çš„æƒé™ã€‚</p>\n</li>\n</ul>\n<blockquote>\n<p>å› æ­¤å½“ä¿®æ”¹ç”¨æˆ·çš„æƒé™ä¹‹åï¼Œå¦‚æœè¢«ä¿®æ”¹ç”¨æˆ·çš„åœ¨ç™»å½•çŠ¶æ€æ˜¯ä¸ä¼šä¿®æ”¹å·²ç»è¿æ¥çš„æƒé™ã€‚éœ€è¦è®©è¢«ä¿®æ”¹æƒé™ç”¨æˆ·ä»æ–°ç™»å½•ã€‚</p>\n</blockquote>\n<ul>\n<li>å®é™…ä¸Šè¿æ¥çš„æ–¹å¼æœ‰å¤šç§ï¼Œä¸Šé¢é€šè¿‡å¯†ç çš„æ–¹å¼åªæ˜¯å…¶ä¸­çš„ä¸€ç§æ–¹å¼ã€‚å½“å®¢æˆ·ç«¯ä¸æœåŠ¡ç«¯mysqlè¿›ç¨‹è¿›ç¨‹å»ºç«‹è¿æ¥ï¼ŒæœåŠ¡å™¨çš„è¿›ç¨‹å°±ä¼šåˆ›å»ºä¸€ä¸ªå•ç‹¬çš„çº¿ç¨‹æ¥ä¸“é—¨å¤„ç†ä¸è¿™ä¸ªå®¢æˆ·ç«¯çš„äº¤äº’ï¼Œå½“è¯¥å®¢æˆ·æ–­å¼€ä¸æœåŠ¡ç«¯è¿æ¥æ—¶ï¼ŒæœåŠ¡ç«¯å¹¶ä¸ä¼šé©¬ä¸Šé”€æ¯å¯¹åº”çš„äº¤äº’çº¿ç¨‹ï¼Œè€Œæ˜¯ç¼“å­˜èµ·æ¥ã€‚å½“å¦ä¸€ä¸ªæ–°çš„å®¢æˆ·ç«¯è¿æ¥è¿›æ¥çš„æ—¶å€™ï¼Œåœ¨æŠŠè¿™ä¸ªç¼“å­˜çš„çº¿ç¨‹åˆ†é…ç»™æ–°çš„å®¢æˆ·ç«¯ã€‚è¿™æ ·å°±é¿å…çš„é¢‘ç¹åˆ›å»ºå’Œä¿®æ”¹çº¿ç¨‹ï¼ŒèŠ‚çœç³»ç»Ÿçš„å¼€é”€ã€‚ä½†æ˜¯è¿æ¥çº¿ç¨‹å¤šäº†ä¹Ÿä¼šå½±å“æœåŠ¡ç«¯ï¼Œæ‰€ä»¥ä¹Ÿæœ‰é»˜è®¤çš„å‚æ•°é™åˆ¶å®¢æˆ·ç«¯çš„è¿æ¥æ•°é‡ã€‚</li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\"># è¿™é‡Œæ˜¯æŸ¥è¯¢æœåŠ¡ç«¯å­˜åœ¨çš„è¿æ¥ã€‚</span><br><span class=\"line\">SHOW PROCESSLIST;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>æˆ‘ä½¿ç”¨çš„é˜¿é‡Œäº‘çš„æ•°æ®åº“ï¼Œè¿™é‡Œå±•ç¤ºä¸‹ç»“æœé›†ã€‚è¿™é‡Œéœ€è¦æ³¨æ„ï¼Œç™»å½•çš„è´¦å·éœ€è¦æœ‰PROCESSçš„æƒé™å¦åˆ™åªèƒ½çœ‹åˆ°è‡ªå·±çš„è¿æ¥ä¿¡æ¯ï¼ˆçº¿ç¨‹ï¼‰ï¼Œæˆ‘è¿™é‡Œé‡‡ç”¨çš„rootæ‰€ä»¥çœ‹åˆ°å…¨éƒ¨åˆ°ã€‚</p>\n</blockquote>\n<p><img src=\"https://z201.oss-cn-shanghai.aliyuncs.com/JavaNote/mysql/SHOW_PROCESSLIST.png\"></p>\n<ul>\n<li><a href=\"https://dev.mysql.com/doc/refman/5.7/en/processlist-table.html\" target=\"_blank\" rel=\"noopener\">MySQL PROCESSLIST å®˜æ–¹æ–‡æ¡£</a></li>\n</ul>\n<blockquote>\n<p>è¿æ¥å®Œæˆåå¦‚æœæ²¡æœ‰æ‰§è¡Œåç»­æ“ä½œåˆ™ Commandä¼šæ˜¾ç¤ºSleepçš„çŠ¶æ€ï¼Œé•¿æ—¶é—´Sleepä¼šå¯¼è‡´è¿æ¥è‡ªåŠ¨æ–­å¼€ã€‚é»˜è®¤çš„æ—¶é—´æ˜¯8å°æ—¶ï¼Œä¹Ÿå°±æ˜¯å‚æ•° <code>wait_timeout</code>ã€‚å½“å®¢æˆ·ç«¯è¿æ¥æ–­å¼€åï¼Œè‹¥å®¢æˆ·ç«¯å†æ¬¡å‘å‡ºè¯·æ±‚å°±ä¼šæç¤ºä¸€ä¸ª</p>\n<p><code>Lost connection to MySQL server during query</code>ï¼Œæ­¤æ—¶å°±åªèƒ½é‡æ–°å»ºç«‹è¿æ¥äº†ã€‚</p>\n</blockquote>\n<h5 id=\"åŠåŒå·¥\"><a href=\"#åŠåŒå·¥\" class=\"headerlink\" title=\"åŠåŒå·¥\"></a>åŠåŒå·¥</h5><ul>\n<li>MySQLå®¢æˆ·ç«¯/æœåŠ¡ç«¯é€šä¿¡åè®®æ˜¯<code>â€œåŠåŒå·¥â€</code>çš„ï¼šåœ¨ä»»ä¸€æ—¶åˆ»ï¼Œè¦ä¹ˆæ˜¯æœåŠ¡å™¨å‘å®¢æˆ·ç«¯å‘é€æ•°æ®ï¼Œè¦ä¹ˆæ˜¯å®¢æˆ·ç«¯å‘æœåŠ¡å™¨å‘é€æ•°æ®ï¼Œè¿™ä¸¤ä¸ªåŠ¨ä½œä¸èƒ½åŒæ—¶å‘ç”Ÿã€‚ä¸€æ—¦ä¸€ç«¯å¼€å§‹å‘é€æ¶ˆæ¯ï¼Œå¦ä¸€ç«¯è¦æ¥æ”¶å®Œæ•´ä¸ªæ¶ˆæ¯æ‰èƒ½å“åº”å®ƒï¼Œæ‰€ä»¥æˆ‘ä»¬æ— æ³•ä¹Ÿæ— é¡»å°†ä¸€ä¸ªæ¶ˆæ¯åˆ‡æˆå°å—ç‹¬ç«‹å‘é€ï¼Œä¹Ÿæ²¡æœ‰åŠæ³•è¿›è¡Œæµé‡æ§åˆ¶ã€‚</li>\n<li>æœåŠ¡å™¨å“åº”ç»™ç”¨æˆ·çš„æ•°æ®é€šå¸¸ä¼šå¾ˆå¤šï¼Œç”±å¤šä¸ªæ•°æ®åŒ…ç»„æˆã€‚ä½†æ˜¯å½“æœåŠ¡å™¨å“åº”å®¢æˆ·ç«¯è¯·æ±‚æ—¶ï¼Œå®¢æˆ·ç«¯å¿…é¡»å®Œæ•´çš„æ¥æ”¶æ•´ä¸ªè¿”å›ç»“æœï¼Œè€Œä¸èƒ½ç®€å•çš„åªå–å‰é¢å‡ æ¡ç»“æœï¼Œç„¶åè®©æœåŠ¡å™¨åœæ­¢å‘é€ã€‚å› è€Œåœ¨å®é™…å¼€å‘ä¸­ï¼Œå°½é‡ä¿æŒæŸ¥è¯¢ç®€å•ä¸”åªè¿”å›å¿…éœ€çš„æ•°æ®ï¼Œå‡å°é€šä¿¡é—´æ•°æ®åŒ…çš„å¤§å°å’Œæ•°é‡æ˜¯ä¸€ä¸ªéå¸¸å¥½çš„ä¹ æƒ¯ï¼Œè¿™ä¹Ÿæ˜¯æŸ¥è¯¢ä¸­å°½é‡é¿å…ä½¿ç”¨<code>SELECT *</code>ä»¥åŠåŠ ä¸Š<code>LIMIT</code>é™åˆ¶çš„åŸå› ä¹‹ä¸€ã€‚</li>\n</ul>\n<h5 id=\"é•¿è¿æ¥ä¸çŸ­è¿æ¥\"><a href=\"#é•¿è¿æ¥ä¸çŸ­è¿æ¥\" class=\"headerlink\" title=\"é•¿è¿æ¥ä¸çŸ­è¿æ¥\"></a>é•¿è¿æ¥ä¸çŸ­è¿æ¥</h5><ul>\n<li><p>åœ¨æ•°æ®åº“é‡Œé¢ï¼Œé•¿è¿æ¥æ˜¯æŒ‡æ•°æ®åº“å»ºç«‹è¿æ¥ï¼Œå¦‚æœå®¢æˆ·ç«¯æœ‰æŒç»­çš„è¯·æ±‚åˆ™ä½¿ç”¨åŒä¸€ä¸ªè¿æ¥ï¼ŒçŸ­è¿æ¥æ˜¯æŒ‡æ¯æ¬¡æ‰§è¡Œå‡ æ¬¡çŸ­çš„æŸ¥è¯¢å°±æ–­å¼€è¿æ¥ï¼Œä¸‹æ¬¡æŸ¥è¯¢å†æ¬¡åˆ›å»ºè¿æ¥ã€‚ç”±äºåˆ›å»ºçš„è¿‡ç¨‹å¤æ‚ï¼Œä¸€èˆ¬æ¥è¯´å°½é‡å‡å°‘åˆ›å»ºè¿æ¥çš„åŠ¨ä½œï¼Œå°½å¯èƒ½ä½¿ç”¨é•¿è¿æ¥ã€‚ç‰¹åˆ«æ˜¯åœ¨å¼€å‘çš„æ—¶å€™å‡ºç°å¤§ä¼™çªç„¶è¿æ¥ä¸ä¸Šæµ‹è¯•åº“ï¼Œæ­¤æ—¶å°±æ£€æŸ¥ä¸‹è¿æ¥æ˜¯ä¸æ˜¯å¤ªå¤šäº†ã€‚å› ä¸ºè¿æ¥å¤šäº†ä¼šå¯¼è‡´å†…å­˜æ¶ˆè€—ç‰¹åˆ«å¿«ã€‚</p>\n<ul>\n<li>mysqlçš„æ‰§è¡Œè¿‡ç¨‹ä¸­ä¸´æ—¶ä½¿ç”¨çš„å†…å­˜ç®¡ç†æ˜¯åœ¨è¿æ¥çº¿ç¨‹å¯¹è±¡é‡Œé¢ï¼ŒæœåŠ¡ç«¯æ–­å¼€çš„æ—¶å€™æ‰ä¼šé‡Šæ”¾ï¼Œä¸ºäº†é¿å…å†…å­˜æ¶ˆè€—è¿‡å¤§ï¼Œæ¯æ¬¡æ‰§è¡Œè¾ƒå¤§çš„æ“ä½œä¹‹åï¼Œå¯ä»¥é€šè¿‡<code>mysql_reset_connection</code>æ¥é‡æ–°åˆå§‹åŒ–è¿æ¥èµ„æºã€‚è¿™ä¸ªæ“ä½œæ˜¯ä¸éœ€è¦é‡æ–°åšæƒé™ï¼Œåªæ˜¯æ¢å¤åˆ°åˆ›å»ºçš„åˆå§‹çŠ¶æ€ã€‚</li>\n</ul>\n</li>\n<li><p><a href=\"https://dev.mysql.com/doc/refman/5.7/en/mysql-reset-connection.html\" target=\"_blank\" rel=\"noopener\">MySQL mysql_reset_connection å®˜æ–¹æ–‡æ¡£</a></p>\n</li>\n</ul>\n<h4 id=\"æŸ¥è¯¢ç¼“å­˜\"><a href=\"#æŸ¥è¯¢ç¼“å­˜\" class=\"headerlink\" title=\"æŸ¥è¯¢ç¼“å­˜\"></a>æŸ¥è¯¢ç¼“å­˜</h4><blockquote>\n<p> ä¸€ä¸ªä¸è¢«å»ºè®®ä½¿ç”¨çš„åŠŸèƒ½ï¼Œåœ¨æ–°ç‰ˆçš„8.0ä¸­å·²ç»è¢«åˆ é™¤äº†ã€‚æ€»ç»“å°±æ˜¯å¼Šå¤§äºåˆ©ã€‚</p>\n</blockquote>\n<ul>\n<li>å»ºç«‹å®Œæˆåï¼Œå‡è®¾æ‰§è¡Œä¸€æ¬¡<code>SELECT</code>è¯­å¥ï¼Œæ‰§è¡Œé€»è¾‘å°±ä¼šåˆ°ç¬¬äºŒéƒ¨æŸ¥è¯¢ç¼“å­˜ã€‚mysqlæ‹¿åˆ°ä¸€ä¸ªæŸ¥è¯¢ä¹‹åï¼Œä¼šå…ˆåˆ°ç¼“å­˜ä¸­å¯»æ‰¾é‡Šæ”¾æœ‰å®Œå…¨å¯¹åº”çš„ï¼Œå› ä¸ºä¹‹å‰æ‰§è¡Œçš„æŸ¥è¯¢è¯­å¥å’Œç»“æœé›†ä¼šç›´æ¥è¢«ç¼“å­˜èµ·æ¥ï¼Œä»¥<code>Keys-value</code>çš„å½¢å¼ã€‚keysæ˜¯æŸ¥è¯¢è¯­å¥-valueæ˜¯æŸ¥è¯¢ç»“æœé›†ã€‚å¦‚æœèƒ½å‘½ä¸­è¿™ä¸ªkeyåˆ™ç›´æ¥è¿”å›valueã€‚å’‹ä¸€çœ‹æŒºæœ‰ç”¨çš„ï¼Œä½†å®é™…ä¸ŠæŸ¥è¯¢ç¼“å­˜çš„å®æ•ˆçš„å¤ªé¢‘ç¹ã€‚å¹¶ä¸”keysçš„å‘½ä¸­æ¡ä»¶å¤ªä¸èªæ˜äº†ï¼Œ<code>å¦‚æœä¸¤æ¬¡æŸ¥è¯¢è¯­å¥åœ¨ä»»ä½•çš„å­—ç¬¦ä¸Šå­˜åœ¨ä¸é€šï¼ˆç©ºæ ¼ã€å¤§å°å†™ï¼‰</code>éƒ½ä¸ä¼šç¼“å­˜å‘½ä¸­ã€‚ä¸ºä»€ä¹ˆä¼šé¢‘ç¹å¤±æ•ˆï¼Œå› ä¸ºå¦‚æœå¯¹æŸ¥è¯¢è¯­å¥ä¸­çš„è¡¨è¿›è¡Œæ›´æ–°ï¼Œå°±ä¼šå¯¼è‡´ç¼“å­˜å¤±æ•ˆã€‚æ¯”å¦‚<code>INSERTã€UPDATE ã€DELETE ã€TRUNCATE TABLE ã€ALTER TABLE </code>ç­‰ç­‰å°±ä¼šå¯¼è‡´ç¼“å­˜å¤±æ•ˆã€‚</li>\n</ul>\n<h4 id=\"è¯­æ³•è§£æ\"><a href=\"#è¯­æ³•è§£æ\" class=\"headerlink\" title=\"è¯­æ³•è§£æ\"></a>è¯­æ³•è§£æ</h4><blockquote>\n<p>å¦‚æœæ²¡æœ‰å‘½ä¸­æŸ¥è¯¢ç¼“å­˜ï¼Œå°±è¦å¼€å§‹æ‰§è¡Œsqlè¯­å¥äº†ã€‚mysqléœ€è¦åšä»€ä¹ˆï¼Œå› æ­¤éœ€è¦å¯¹sqlè¿›è¡Œè§£æã€‚MySQLé€šè¿‡å…³é”®å­—å°†SQLè¯­å¥è¿›è¡Œè§£æï¼Œå¹¶ç”Ÿæˆä¸€é¢—å¯¹åº”çš„è§£ææ ‘ã€‚è¿™ä¸ªè¿‡ç¨‹è§£æå™¨ä¸»è¦é€šè¿‡è¯­æ³•è§„åˆ™æ¥éªŒè¯å’Œè§£æã€‚æ¯”å¦‚SQLä¸­æ˜¯å¦ä½¿ç”¨äº†é”™è¯¯çš„å…³é”®å­—æˆ–è€…å…³é”®å­—çš„é¡ºåºæ˜¯å¦æ­£ç¡®ç­‰ç­‰ã€‚é¢„å¤„ç†åˆ™ä¼šæ ¹æ®MySQLè§„åˆ™è¿›ä¸€æ­¥æ£€æŸ¥è§£ææ ‘æ˜¯å¦åˆæ³•ã€‚æ¯”å¦‚æ£€æŸ¥è¦æŸ¥è¯¢çš„æ•°æ®è¡¨å’Œæ•°æ®åˆ—æ˜¯å¦å­˜åœ¨ç­‰ç­‰ã€‚</p>\n</blockquote>\n<ul>\n<li>æœ¬è´¨ä¸Šå‘é€è¿‡æ¥çš„æ˜¯ä¸€ä¸ªæ–‡æœ¬ä¿¡æ¯ï¼Œè¿™é‡Œå°±éœ€è¦å¯¹è¯¥æ–‡æœ¬ä¿¡æ¯è¿›è¡Œç¼–è¯‘ï¼Œæ¶‰åŠåˆ°<code>è¯æ³•è§£æ</code>ã€<code>è¯­æ³•è§£æ</code>ã€<code>è¯­ä¹‰è§£æ</code>ç­‰é˜¶æ®µã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè¿™é‡Œä¼šå¯¹sqlè¯­å¥è¿›è¡Œä¸€äº›æ£€æŸ¥ï¼Œæ¯”å¦‚è®¾è®¡çš„ç›¸å…³è¡¨ã€è¡¨å­—æ®µã€‚è¿™é‡Œæ£€æŸ¥é€šè¿‡çš„æ‰ä¼šè¿›å…¥æŸ¥è¯¢ä¼˜åŒ–æ¨¡å—ã€‚</li>\n<li>æ ¹æ®SQLè¯­è¨€çš„åŠŸèƒ½å¯ä»¥åˆ’åˆ†æˆ4ä¸ªéƒ¨åˆ†<ul>\n<li>DDLï¼Œè‹±æ–‡å«åš Data Definition Languageï¼Œä¹Ÿå°±æ˜¯æ•°æ®å®šä¹‰è¯­è¨€ï¼Œå®ƒç”¨æ¥å®šä¹‰æˆ‘ä»¬çš„æ•°æ®åº“å¯¹è±¡ï¼ŒåŒ…æ‹¬æ•°æ®åº“ã€æ•°æ®è¡¨å’Œåˆ—ã€‚é€šè¿‡ä½¿ç”¨ DDLï¼Œæˆ‘ä»¬å¯ä»¥åˆ›å»ºï¼Œåˆ é™¤å’Œä¿®æ”¹æ•°æ®åº“å’Œè¡¨ç»“æ„ã€‚</li>\n<li>DMLï¼Œè‹±æ–‡å«åš Data Manipulation Languageï¼Œæ•°æ®æ“ä½œè¯­è¨€ï¼Œæˆ‘ä»¬ç”¨å®ƒæ“ä½œå’Œæ•°æ®åº“ç›¸å…³çš„è®°å½•ï¼Œæ¯”å¦‚å¢åŠ ã€åˆ é™¤ã€ä¿®æ”¹æ•°æ®è¡¨ä¸­çš„è®°å½•ã€‚</li>\n<li>DCLï¼Œè‹±æ–‡å«åš Data Control Languageï¼Œæ•°æ®æ§åˆ¶è¯­è¨€ï¼Œæˆ‘ä»¬ç”¨å®ƒæ¥å®šä¹‰è®¿é—®æƒé™å’Œå®‰å…¨çº§åˆ«ã€‚</li>\n<li>DQLï¼Œè‹±æ–‡å«åš Data Query Languageï¼Œæ•°æ®æŸ¥è¯¢è¯­è¨€ï¼Œæˆ‘ä»¬ç”¨å®ƒæŸ¥è¯¢æƒ³è¦çš„è®°å½•ï¼Œå®ƒæ˜¯ SQL è¯­è¨€çš„é‡ä¸­ä¹‹é‡ã€‚åœ¨å®é™…çš„ä¸šåŠ¡ä¸­ï¼Œæˆ‘ä»¬ç»å¤§å¤šæ•°æƒ…å†µä¸‹éƒ½æ˜¯åœ¨å’ŒæŸ¥è¯¢æ‰“äº¤é“ï¼Œå› æ­¤å­¦ä¼šç¼–å†™æ­£ç¡®ä¸”é«˜æ•ˆçš„æŸ¥è¯¢è¯­å¥ï¼Œæ˜¯å­¦ä¹ çš„é‡ç‚¹ã€‚</li>\n</ul>\n</li>\n</ul>\n<h4 id=\"æŸ¥è¯¢ä¼˜åŒ–\"><a href=\"#æŸ¥è¯¢ä¼˜åŒ–\" class=\"headerlink\" title=\"æŸ¥è¯¢ä¼˜åŒ–\"></a>æŸ¥è¯¢ä¼˜åŒ–</h4><blockquote>\n<p>é€šè¿‡ä¹‹å‰çš„è¯­æ³•è§£æï¼ŒåŸºæœ¬å¯ä»¥åˆ¤å®šè¯­æ³•æ ‘æ˜¯åˆæ³•çš„ï¼Œæ­¤æ—¶mysqlå°±çŸ¥é“æ–‡æœ¬å†…å®¹è¦åšä»€ä¹ˆã€‚</p>\n</blockquote>\n<ul>\n<li>mysqlä¼šå¯¹æŸ¥è¯¢è¯­å¥è¿›è¡Œä¼˜åŒ–ï¼Œä¼˜åŒ–çš„ç»“æœå°±æ˜¯ç”Ÿæˆä¸€ä¸ªæ‰§è¡Œè®¡åˆ’ï¼Œè¿™ä¸ªè®¡åˆ’ä¼šè¡¨æ˜ä½¿ç”¨äº†é‚£äº›æŸ¥è¯¢ç´¢å¼•ï¼Œè¡¨ä¹‹é—´çš„è¿æ¥æ˜¯ä»€ä¹ˆæ ·å­çš„ã€‚æœ‰æ—¶å€™å‡ºç°å¤šç§æ‰§è¡Œæ–¹å¼ï¼Œåªæ˜¯æ•ˆç‡ä¸é€šï¼Œä¼˜åŒ–å™¨ä¼šå†³å®šä½¿ç”¨å“ªä¸€ä¸ªæ‰§è¡Œæ–¹æ¡ˆï¼Œè¿™ä¸ªæ—¶å€™å°±æ¶‰åŠåˆ°<code>EXPLAIN</code>è¯­å¥ï¼Œè¯¥è¯­å¥å¯ä»¥æŸ¥çœ‹sqlåˆ°æ‰§è¡Œè®¡åˆ’ï¼Œè¿™å°†æ¶‰åŠåˆ°æŸ¥è¯¢ä¼˜åŒ–ã€‚</li>\n<li>MySQLçš„æŸ¥è¯¢ä¼˜åŒ–å™¨æ˜¯ä¸€ä¸ªéå¸¸å¤æ‚çš„éƒ¨ä»¶ï¼Œå®ƒä½¿ç”¨äº†éå¸¸å¤šçš„ä¼˜åŒ–ç­–ç•¥æ¥ç”Ÿæˆä¸€ä¸ªæœ€ä¼˜çš„æ‰§è¡Œè®¡åˆ’ã€‚<ul>\n<li>é‡æ–°å®šä¹‰è¡¨çš„å…³è”é¡ºåºï¼ˆå¤šå¼ è¡¨å…³è”æŸ¥è¯¢æ—¶ï¼Œå¹¶ä¸ä¸€å®šæŒ‰ç…§SQLä¸­æŒ‡å®šçš„é¡ºåºè¿›è¡Œï¼Œä½†æœ‰ä¸€äº›æŠ€å·§å¯ä»¥æŒ‡å®šå…³è”é¡ºåºï¼‰</li>\n<li>ä¼˜åŒ–å‡½æ•°</li>\n<li>æå‰ç»ˆæ­¢æŸ¥è¯¢ï¼ˆæ¯”å¦‚ï¼šä½¿ç”¨Limitæ—¶ï¼ŒæŸ¥æ‰¾åˆ°æ»¡è¶³æ•°é‡çš„ç»“æœé›†åä¼šç«‹å³ç»ˆæ­¢æŸ¥è¯¢ï¼‰</li>\n<li>ä¼˜åŒ–æ’åºï¼ˆåœ¨è€ç‰ˆæœ¬MySQLä¼šä½¿ç”¨ä¸¤æ¬¡ä¼ è¾“æ’åºï¼Œå³å…ˆè¯»å–è¡ŒæŒ‡é’ˆå’Œéœ€è¦æ’åºçš„å­—æ®µåœ¨å†…å­˜ä¸­å¯¹å…¶æ’åºï¼Œç„¶åå†æ ¹æ®æ’åºç»“æœå»è¯»å–æ•°æ®è¡Œï¼Œè€Œæ–°ç‰ˆæœ¬é‡‡ç”¨çš„æ˜¯å•æ¬¡ä¼ è¾“æ’åºï¼Œä¹Ÿå°±æ˜¯ä¸€æ¬¡è¯»å–æ‰€æœ‰çš„æ•°æ®è¡Œï¼Œç„¶åæ ¹æ®ç»™å®šçš„åˆ—æ’åºã€‚å¯¹äº<code>I/O</code>å¯†é›†å‹åº”ç”¨ï¼Œæ•ˆç‡ä¼šé«˜å¾ˆå¤šã€‚</li>\n</ul>\n</li>\n</ul>\n<h4 id=\"æ‰§è¡Œå™¨\"><a href=\"#æ‰§è¡Œå™¨\" class=\"headerlink\" title=\"æ‰§è¡Œå™¨\"></a>æ‰§è¡Œå™¨</h4><blockquote>\n<p>è¿›å…¥åˆ°æ‰§è¡Œsqlåˆ°ç¯èŠ‚ã€‚</p>\n</blockquote>\n<ul>\n<li>é€šè¿‡ä¹‹å‰åˆ°æŸ¥è¯¢ä¼˜åŒ–ï¼Œè¿›å…¥æ‰§è¡Œé˜¶æ®µï¼Œæ­¤æ—¶ä¼šå…ˆåˆ¤æ–­è¯¥è¿æ¥ç”¨æˆ·æ˜¯å¦æœ‰ç›¸å…³è¡¨çš„æƒé™ï¼Œå¦‚æœæ²¡æœ‰ä¼šè¿”å›æƒé™é”™è¯¯ã€‚å¦‚æœæœ‰æƒé™å°±ä¼šæ‰“å¼€è¡¨ï¼Œæ‰§è¡Œå™¨ä¼šæ ¹æ®è¡¨å®šä¹‰çš„å¼•æ“å»ä½¿ç”¨è¿™ä¸ªå¼•æ“æä¾›çš„æ¥å£å®Œæˆæµç¨‹ã€‚</li>\n</ul>\n<h4 id=\"å­˜å‚¨å¼•æ“\"><a href=\"#å­˜å‚¨å¼•æ“\" class=\"headerlink\" title=\"å­˜å‚¨å¼•æ“\"></a>å­˜å‚¨å¼•æ“</h4><blockquote>\n<p> å…³äºå­˜å‚¨å¼•æ“ï¼Œè¿™é‡Œæ˜ç¡®æé†’ã€‚ä¸æ˜¯ä¸‰ç§ä¹Ÿä¸æ˜¯å››ç§ã€‚è€Œæ˜¯å¤šç§å› ä¸ºéšæ—¶å¯èƒ½å‡ºç°æ–°çš„å¼•æ“ã€‚</p>\n</blockquote>\n<ul>\n<li>æˆ‘ä»¬å¸¸ç”¨çš„å°±æ˜¯<code>InnoDB</code>å’Œ<code>MyISAM</code>ï¼Œå…¶å®ƒçš„ä¸å¸¸è§å°±ä¸åšè¿‡å¤šä»‹ç»ã€‚mysqlç°åœ¨é»˜è®¤çš„å¼•æ“æ˜¯<code>InnoDB</code>æ‰€ä»¥ä¸»è¦ä¹Ÿæ˜¯äº†è§£<code>InnoDB</code></li>\n</ul>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># æŸ¥çœ‹å½“å‰æœåŠ¡æ”¯æŒçš„å­˜å‚¨å¼•æ“</span></span><br><span class=\"line\">SHOW ENGINES;</span><br></pre></td></tr></table></figure>\n\n<p><img src=\"https://z201.oss-cn-shanghai.aliyuncs.com/JavaNote/mysql/SHOW_ENGINES.png\"></p>\n<a id=\"more\"></a>\n\n<h4 id=\"innodb\"><a href=\"#innodb\" class=\"headerlink\" title=\"innodb\"></a>innodb</h4><ul>\n<li>æ’å…¥ç¼“å†²ï¼ˆinsert buffer),</li>\n<li>äºŒæ¬¡å†™(double write),</li>\n<li>è‡ªé€‚åº”å“ˆå¸Œç´¢å¼•(ahi),</li>\n<li>é¢„è¯»(read ahead)</li>\n<li>æ”¯æŒäº‹åŠ¡æ“ä½œï¼Œå…·æœ‰äº‹åŠ¡ ACID éš”ç¦»ç‰¹æ€§ï¼Œé»˜è®¤çš„éš”ç¦»çº§åˆ«æ˜¯<code>å¯é‡å¤è¯»(repetable-read)</code>ã€é€šè¿‡MVCCï¼ˆå¹¶å‘ç‰ˆæœ¬æ§åˆ¶ï¼‰æ¥å®ç°çš„ã€‚èƒ½å¤Ÿè§£å†³<code>è„è¯»</code>å’Œ<code>ä¸å¯é‡å¤è¯»</code>çš„é—®é¢˜ã€‚</li>\n<li>InnoDB æ”¯æŒå¤–é”®æ“ä½œã€‚</li>\n<li>InnoDB é»˜è®¤çš„é”ç²’åº¦<code>è¡Œçº§é”</code>ï¼Œå¹¶å‘æ€§èƒ½æ¯”è¾ƒå¥½ï¼Œä¼šå‘ç”Ÿæ­»é”çš„æƒ…å†µã€‚</li>\n<li>å’Œ MyISAM ä¸€æ ·çš„æ˜¯ï¼ŒInnoDB å­˜å‚¨å¼•æ“ä¹Ÿæœ‰ <code>.frmæ–‡ä»¶å­˜å‚¨è¡¨ç»“æ„</code> å®šä¹‰ï¼Œä½†æ˜¯ä¸åŒçš„æ˜¯ï¼ŒInnoDB çš„è¡¨æ•°æ®ä¸ç´¢å¼•æ•°æ®æ˜¯å­˜å‚¨åœ¨ä¸€èµ·çš„ï¼Œéƒ½ä½äº B+ æ•°çš„å¶å­èŠ‚ç‚¹ä¸Šï¼Œè€Œ MyISAM çš„è¡¨æ•°æ®å’Œç´¢å¼•æ•°æ®æ˜¯åˆ†å¼€çš„ã€‚</li>\n<li>InnoDB æœ‰å®‰å…¨çš„æ—¥å¿—æ–‡ä»¶ï¼Œè¿™ä¸ªæ—¥å¿—æ–‡ä»¶ç”¨äºæ¢å¤å› æ•°æ®åº“å´©æºƒæˆ–å…¶ä»–æƒ…å†µå¯¼è‡´çš„æ•°æ®ä¸¢å¤±é—®é¢˜ï¼Œä¿è¯æ•°æ®çš„ä¸€è‡´æ€§ã€‚</li>\n<li>InnoDB å’Œ MyISAM æ”¯æŒçš„ç´¢å¼•ç±»å‹ç›¸åŒï¼Œä½†å…·ä½“å®ç°å› ä¸ºæ–‡ä»¶ç»“æ„çš„ä¸åŒæœ‰å¾ˆå¤§å·®å¼‚ã€‚</li>\n<li>å¢åˆ æ”¹æŸ¥æ€§èƒ½æ–¹é¢ï¼Œå¦‚æœæ‰§è¡Œå¤§é‡çš„å¢åˆ æ”¹æ“ä½œï¼Œæ¨èä½¿ç”¨ InnoDB å­˜å‚¨å¼•æ“ï¼Œå®ƒåœ¨åˆ é™¤æ“ä½œæ—¶æ˜¯å¯¹è¡Œåˆ é™¤ï¼Œä¸ä¼šé‡å»ºè¡¨ã€‚</li>\n</ul>\n<h5 id=\"myisamä¸innodb\"><a href=\"#myisamä¸innodb\" class=\"headerlink\" title=\"myisamä¸innodb\"></a>myisamä¸innodb</h5><ul>\n<li>InnoDBæ”¯æŒäº‹ç‰©ï¼Œè€ŒMyISAMä¸æ”¯æŒäº‹ç‰©</li>\n<li>InnoDBæ”¯æŒè¡Œçº§é”ï¼Œè€ŒMyISAMæ”¯æŒè¡¨çº§é”</li>\n<li>InnoDBæ”¯æŒMVCC, è€ŒMyISAMä¸æ”¯æŒ</li>\n<li>InnoDBæ”¯æŒå¤–é”®ï¼Œè€ŒMyISAMä¸æ”¯æŒ</li>\n<li>InnoDBä¸æ”¯æŒå…¨æ–‡ç´¢å¼•ï¼Œè€ŒMyISAMæ”¯æŒã€‚</li>\n</ul>\n<h3 id=\"ç´¢å¼•\"><a href=\"#ç´¢å¼•\" class=\"headerlink\" title=\"ç´¢å¼•\"></a>ç´¢å¼•</h3><h4 id=\"ä¸»é”®\"><a href=\"#ä¸»é”®\" class=\"headerlink\" title=\"ä¸»é”®\"></a>ä¸»é”®</h4><ul>\n<li>æ•°æ®åº“è¡¨ä¸­å¯¹å‚¨å­˜æ•°æ®å¯¹è±¡äºˆä»¥å”¯ä¸€å’Œå®Œæ•´æ ‡è¯†çš„æ•°æ®åˆ—æˆ–å±æ€§çš„ç»„åˆã€‚ä¸€ä¸ªæ•°æ®åˆ—åªèƒ½æœ‰ä¸€ä¸ªä¸»é”®ï¼Œä¸”ä¸»é”®çš„å–å€¼ä¸èƒ½ç¼ºå¤±ï¼Œå³ä¸èƒ½ä¸ºç©ºå€¼ï¼ˆNullï¼‰ã€‚</li>\n</ul>\n<h4 id=\"è¶…é”®\"><a href=\"#è¶…é”®\" class=\"headerlink\" title=\"è¶…é”®\"></a>è¶…é”®</h4><ul>\n<li>åœ¨å…³ç³»ä¸­èƒ½å”¯ä¸€æ ‡è¯†å…ƒç»„çš„å±æ€§é›†ç§°ä¸ºå…³ç³»æ¨¡å¼çš„è¶…é”®ã€‚ä¸€ä¸ªå±æ€§å¯ä»¥ä¸ºä½œä¸ºä¸€ä¸ªè¶…é”®ï¼Œå¤šä¸ªå±æ€§ç»„åˆåœ¨ä¸€èµ·ä¹Ÿå¯ä»¥ä½œä¸ºä¸€ä¸ªè¶…é”®ã€‚è¶…é”®åŒ…å«å€™é€‰é”®å’Œä¸»é”®ã€‚</li>\n</ul>\n<h4 id=\"å€™é€‰é”®\"><a href=\"#å€™é€‰é”®\" class=\"headerlink\" title=\"å€™é€‰é”®\"></a>å€™é€‰é”®</h4><ul>\n<li>æ˜¯æœ€å°è¶…é”®ï¼Œå³æ²¡æœ‰å†—ä½™å…ƒç´ çš„è¶…é”®ã€‚</li>\n</ul>\n<h4 id=\"å¤–é”®\"><a href=\"#å¤–é”®\" class=\"headerlink\" title=\"å¤–é”®\"></a>å¤–é”®</h4><ul>\n<li>åœ¨ä¸€ä¸ªè¡¨ä¸­å­˜åœ¨çš„å¦ä¸€ä¸ªè¡¨çš„ä¸»é”®ç§°æ­¤è¡¨çš„å¤–é”®ã€‚</li>\n</ul>\n<h4 id=\"ä¸ºä»€ä¹ˆè¦ä½¿ç”¨è‡ªå¢åˆ—ä½œä¸ºä¸»é”®ï¼Ÿ\"><a href=\"#ä¸ºä»€ä¹ˆè¦ä½¿ç”¨è‡ªå¢åˆ—ä½œä¸ºä¸»é”®ï¼Ÿ\" class=\"headerlink\" title=\"ä¸ºä»€ä¹ˆè¦ä½¿ç”¨è‡ªå¢åˆ—ä½œä¸ºä¸»é”®ï¼Ÿ\"></a>ä¸ºä»€ä¹ˆè¦ä½¿ç”¨è‡ªå¢åˆ—ä½œä¸ºä¸»é”®ï¼Ÿ</h4><blockquote>\n<p>è‡ªå¢IDæœ‰åºï¼Œä¼šæŒ‰é¡ºåºå¾€æœ€åæ’å…¥ï¼Œè€ŒUUIDæ— åºï¼Œéšæœºç”Ÿæˆï¼Œéšæœºæ’å…¥ï¼Œä¼šé€ æˆé¢‘ç¹é¡µåˆ†è£‚ï¼Œå†…å­˜ç¢ç‰‡åŒ–ï¼Œå¤§é‡éšæœºIO</p>\n</blockquote>\n<ul>\n<li><p>å¦‚æœæ²¡æœ‰æ˜¾ç¤ºçš„æŒ‡å®šä¸»é”®ï¼Œåˆ™InnoDBä¼šé€‰æ‹©ä¸€ä¸ªä¸åŒ…å«NULLå€¼çš„å”¯ä¸€ç´¢å¼•ä½œä¸ºä¸»é”®ç´¢å¼•ã€‚å¦‚æœä¸æ»¡è¶³æ¡ä»¶ï¼ŒInnoDBä¼šé€‰æ‹©å†…ç½®6å­—èŠ‚é•¿åº¦çš„ROWIDä½œä¸ºéšå«çš„èšé›†ç´¢å¼•ã€‚</p>\n</li>\n<li><p>InnoDBæ•°æ®è®°å½•æœ¬èº«å­˜æ”¾ä¸»ç´¢å¼•ï¼ˆB+Treeï¼‰çš„å¶å­ç»“ç‚¹ä¸Šé¢ï¼ŒåŒä¸€ä¸ªå¶å­ç»“ç‚¹å†…çš„å„æ¡æ•°æ®æ˜¯æŒ‰ç…§ä¸»é”®é¡ºåºå­˜æ”¾ã€‚å› æ­¤æ¯æ¬¡æ’å…¥æ•°æ®çš„æ—¶å€™ï¼Œmysqlä¼šæ ¹æ®å…¶ä¸»é”®æ’å…¥é€‚å½“çš„ä½ç½®ï¼Œå¦‚æœé¡µè¾¾åˆ°è£…è½½å› å­æ¡ä»¶ï¼Œåˆ™å¼€è¾Ÿä¸€ä¸ªæ–°çš„é¡µã€‚</p>\n</li>\n<li><p>ä½¿ç”¨éè‡ªå¢ï¼Œæ¯æ¬¡æ’å…¥çš„å€¼éƒ½æ˜¯å‡ ä¹æ— åºçš„ï¼Œå¯¼è‡´å¶èŠ‚ç‚¹ä¸å¤Ÿç´§å‡‘ï¼Œé¢‘ç¹ç§»åŠ¨åˆ†å¶é€ æˆå¤§é‡ç¢ç‰‡ã€‚å¢åŠ ç»´æŠ¤å·¥ä½œã€‚</p>\n</li>\n<li><p>InnoDBå¼•æ“çš„è‡ªå¢å€¼ï¼Œå…¶å®æ˜¯<strong>ä¿å­˜åœ¨äº†å†…å­˜</strong>é‡Œï¼Œå¹¶ä¸”åˆ°äº†MySQL 8.0ç‰ˆæœ¬åï¼Œæ‰æœ‰äº†â€œè‡ªå¢å€¼æŒä¹…åŒ–â€çš„èƒ½åŠ›ã€‚</p>\n</li>\n</ul>\n<h4 id=\"ç´¢å¼•æ˜¯ä»€ä¹ˆ\"><a href=\"#ç´¢å¼•æ˜¯ä»€ä¹ˆ\" class=\"headerlink\" title=\"ç´¢å¼•æ˜¯ä»€ä¹ˆ\"></a>ç´¢å¼•æ˜¯ä»€ä¹ˆ</h4><blockquote>\n<p>åœ¨äº†è§£ç´¢å¼•ä¹‹å‰ï¼Œå¤§æ¦‚ç†è§£ä¸‹mysqlå­˜å‚¨æ•°æ®çš„å¤§å°åˆ’åˆ†<code>è¡¨ç©ºé—´ -&gt; æ®µ -&gt; åŒº -&gt; æ•°æ®é¡µ</code> ã€‚</p>\n</blockquote>\n<ul>\n<li><p>ç´¢å¼•æ˜¯å¯¹æ•°æ®åº“è¡¨ä¸­ä¸€æˆ–å¤šä¸ªåˆ—çš„å€¼è¿›è¡Œæ’åºçš„ç»“æ„ï¼Œæ˜¯å¸®åŠ©MySQLé«˜æ•ˆè·å–æ•°æ®çš„æ•°æ®ç»“æ„</p>\n</li>\n<li><p>ç´¢å¼•å°±æ˜¯åŠ å¿«æ£€ç´¢è¡¨ä¸­æ•°æ®çš„æ–¹æ³•ã€‚æ•°æ®åº“çš„ç´¢å¼•ç±»ä¼¼äºä¹¦ç±çš„ç´¢å¼•ã€‚åœ¨ä¹¦ç±ä¸­ï¼Œç´¢å¼•å…è®¸ç”¨æˆ·ä¸å¿…ç¿»é˜…å®Œæ•´ä¸ªä¹¦å°±èƒ½è¿…é€Ÿåœ°æ‰¾åˆ°æ‰€éœ€è¦çš„ä¿¡æ¯ã€‚åœ¨æ•°æ®åº“ä¸­ï¼Œç´¢å¼•ä¹Ÿå…è®¸æ•°æ®åº“ç¨‹åºè¿…é€Ÿåœ°æ‰¾åˆ°è¡¨ä¸­çš„æ•°æ®ï¼Œè€Œä¸å¿…æ‰«ææ•´ä¸ªæ•°æ®åº“ã€‚</p>\n</li>\n<li><p>ç´¢å¼•ä¼˜ç¼ºç‚¹</p>\n<ol>\n<li>ç´¢å¼•åŠ å¿«æ•°æ®åº“çš„æ£€ç´¢é€Ÿåº¦ã€‚</li>\n<li>ç´¢å¼•é™ä½äº†æ’å…¥ã€åˆ é™¤ã€ä¿®æ”¹ç­‰ç»´æŠ¤ä»»åŠ¡çš„é€Ÿåº¦ã€‚</li>\n<li>å”¯ä¸€ç´¢å¼•å¯ä»¥ç¡®ä¿æ¯ä¸€è¡Œæ•°æ®çš„å”¯ä¸€æ€§ã€‚</li>\n<li>é€šè¿‡ä½¿ç”¨ç´¢å¼•ï¼Œå¯ä»¥åœ¨æŸ¥è¯¢çš„è¿‡ç¨‹ä¸­ä½¿ç”¨ä¼˜åŒ–éšè—å™¨ï¼Œæé«˜ç³»ç»Ÿçš„æ€§èƒ½ã€‚</li>\n<li>ç´¢å¼•éœ€è¦å ç‰©ç†å’Œæ•°æ®ç©ºé—´ã€‚</li>\n</ol>\n</li>\n</ul>\n<h5 id=\"è¡¨ç©ºé—´ã€æ®µã€åŒºã€æ•°æ®é¡µ\"><a href=\"#è¡¨ç©ºé—´ã€æ®µã€åŒºã€æ•°æ®é¡µ\" class=\"headerlink\" title=\"è¡¨ç©ºé—´ã€æ®µã€åŒºã€æ•°æ®é¡µ\"></a>è¡¨ç©ºé—´ã€æ®µã€åŒºã€æ•°æ®é¡µ</h5><blockquote>\n<p>è®°å½•æ˜¯æŒ‰ç…§è¡Œæ¥å­˜å‚¨çš„ï¼Œä½†æ˜¯æ•°æ®åº“çš„è¯»å–å¹¶ä¸ä»¥è¡Œä¸ºå•ä½ï¼Œå¦åˆ™ä¸€æ¬¡è¯»å–ï¼ˆä¹Ÿå°±æ˜¯ä¸€æ¬¡ I/O æ“ä½œï¼‰åªèƒ½å¤„ç†ä¸€è¡Œæ•°æ®ï¼Œæ•ˆç‡ä¼šéå¸¸ä½ã€‚å› æ­¤åœ¨æ•°æ®åº“ä¸­ï¼Œä¸è®ºè¯»ä¸€è¡Œï¼Œè¿˜æ˜¯è¯»å¤šè¡Œï¼Œéƒ½æ˜¯å°†è¿™äº›è¡Œæ‰€åœ¨çš„é¡µè¿›è¡ŒåŠ è½½ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œæ•°æ®åº“ç®¡ç†å­˜å‚¨ç©ºé—´çš„åŸºæœ¬å•ä½æ˜¯é¡µï¼ˆPageï¼‰ã€‚</p>\n</blockquote>\n<ul>\n<li>ä¸€ä¸ªé¡µä¸­å¯ä»¥å­˜å‚¨å¤šä¸ªè¡Œè®°å½•ï¼ˆRowï¼‰ï¼ŒåŒæ—¶åœ¨æ•°æ®åº“ä¸­ï¼Œè¿˜å­˜åœ¨ç€åŒºï¼ˆExtentï¼‰ã€æ®µï¼ˆSegmentï¼‰å’Œè¡¨ç©ºé—´ï¼ˆTablespaceï¼‰ã€‚è¡Œã€é¡µã€åŒºã€æ®µã€è¡¨ç©ºé—´çš„å…³ç³»å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</li>\n</ul>\n<p><img src=\"https://z201.oss-cn-shanghai.aliyuncs.com/JavaNote/MysqlInnoDB%E6%95%B0%E6%8D%AE%E5%AD%98%E5%82%A8%E7%BB%93%E6%9E%84.png\"></p>\n<h5 id=\"ç´¢å¼•çš„ä¼˜ç‚¹\"><a href=\"#ç´¢å¼•çš„ä¼˜ç‚¹\" class=\"headerlink\" title=\"ç´¢å¼•çš„ä¼˜ç‚¹\"></a>ç´¢å¼•çš„ä¼˜ç‚¹</h5><ul>\n<li><p>å¤©ç”Ÿæ’åº</p>\n</li>\n<li><p>å¿«é€ŸæŸ¥æ‰¾</p>\n</li>\n</ul>\n<h5 id=\"ç´¢å¼•çš„ç¼ºç‚¹\"><a href=\"#ç´¢å¼•çš„ç¼ºç‚¹\" class=\"headerlink\" title=\"ç´¢å¼•çš„ç¼ºç‚¹\"></a>ç´¢å¼•çš„ç¼ºç‚¹</h5><ul>\n<li>å ç”¨ç©ºé—´</li>\n<li>é™ä½æ›´æ–°è¡¨çš„é€Ÿåº¦ã€‚</li>\n</ul>\n<h5 id=\"æ³¨æ„ç‚¹\"><a href=\"#æ³¨æ„ç‚¹\" class=\"headerlink\" title=\"æ³¨æ„ç‚¹\"></a>æ³¨æ„ç‚¹</h5><ul>\n<li><p>å°è¡¨ä½¿ç”¨å…¨è¡¨æ‰«ææ›´å¿«ï¼Œä¸­å¤§è¡¨æ‰ä½¿ç”¨ç´¢å¼•ã€‚è¶…çº§å¤§è¡¨ç´¢å¼•åŸºæœ¬æ— æ•ˆã€‚</p>\n</li>\n<li><p>ç´¢å¼•å®ç°ï¼Œåˆ†æˆ 2 ç§ï¼šèšé›†ç´¢å¼•å’Œè¾…åŠ©ç´¢å¼•ï¼ˆä¹Ÿå«äºŒçº§ç´¢å¼•æˆ–è€…éèšé›†ç´¢å¼•ï¼‰</p>\n</li>\n<li><p>åŠŸèƒ½åŒºåˆ†ï¼Œåˆ†ä¸º 6 ç§ï¼šæ™®é€šç´¢å¼•ï¼Œå”¯ä¸€ç´¢å¼•ï¼Œä¸»é”®ç´¢å¼•ï¼Œå¤åˆç´¢å¼•ï¼Œå¤–é”®ç´¢å¼•ï¼Œå…¨æ–‡ç´¢å¼•ã€‚</p>\n<p>1ã€æ™®é€šç´¢å¼•ï¼šæœ€åŸºæœ¬çš„ç´¢å¼•ï¼Œæ²¡æœ‰ä»»ä½•çº¦æŸã€‚<br>2ã€å”¯ä¸€ç´¢å¼•ï¼šä¸æ™®é€šç´¢å¼•ç±»ä¼¼ï¼Œä½†å…·æœ‰å”¯ä¸€æ€§çº¦æŸã€‚<br>3ã€ä¸»é”®ç´¢å¼•ï¼š<strong>ç‰¹æ®Šçš„å”¯ä¸€ç´¢å¼•ï¼Œä¸å…è®¸æœ‰ç©ºå€¼</strong>ã€‚<br>4ã€å¤åˆç´¢å¼•ï¼šå°†å¤šä¸ªåˆ—ç»„åˆåœ¨ä¸€èµ·åˆ›å»ºç´¢å¼•ï¼Œå¯ä»¥è¦†ç›–å¤šä¸ªåˆ—ã€‚<br>5ã€å¤–é”®ç´¢å¼•ï¼šåªæœ‰InnoDBç±»å‹çš„è¡¨æ‰å¯ä»¥ä½¿ç”¨å¤–é”®ç´¢å¼•ï¼Œä¿è¯æ•°æ®çš„ä¸€è‡´æ€§ã€å®Œæ•´æ€§å’Œå®ç°çº§è”æ“ä½œã€‚<br>6ã€å…¨æ–‡ç´¢å¼•ï¼šMySQL è‡ªå¸¦çš„å…¨æ–‡ç´¢å¼•åªèƒ½ç”¨äº InnoDBã€MyISAM ï¼Œå¹¶ä¸”åªèƒ½å¯¹è‹±æ–‡è¿›è¡Œå…¨æ–‡æ£€ç´¢ï¼Œä¸€èˆ¬ä½¿ç”¨å…¨æ–‡ç´¢å¼•å¼•æ“ï¼ˆESï¼ŒSolrï¼‰ã€‚</p>\n</li>\n<li><p><code>æ³¨æ„ï¼šä¸»é”®å°±æ˜¯å”¯ä¸€ç´¢å¼•ï¼Œä½†æ˜¯å”¯ä¸€ç´¢å¼•ä¸ä¸€å®šæ˜¯ä¸»é”®ï¼Œå”¯ä¸€ç´¢å¼•å¯ä»¥ä¸ºç©ºï¼Œä½†æ˜¯ç©ºå€¼åªèƒ½æœ‰ä¸€ä¸ªï¼Œä¸»é”®ä¸èƒ½ä¸ºç©ºã€‚</code></p>\n</li>\n</ul>\n<h4 id=\"å¸¸è§ç´¢å¼•ç±»å‹\"><a href=\"#å¸¸è§ç´¢å¼•ç±»å‹\" class=\"headerlink\" title=\"å¸¸è§ç´¢å¼•ç±»å‹\"></a>å¸¸è§ç´¢å¼•ç±»å‹</h4><blockquote>\n<p>ç´¢å¼•æ˜¯å­˜å‚¨åœ¨ä¸€å¼ è¡¨ä¸­ç‰¹å®šåˆ—ä¸Šçš„<code>æ•°æ®ç»“æ„</code>ï¼Œç´¢å¼•æ˜¯åœ¨åˆ—ä¸Šåˆ›å»ºçš„ã€‚å¹¶ä¸”ï¼Œç´¢å¼•æ˜¯ä¸€ç§æ•°æ®ç»“æ„ã€‚</p>\n</blockquote>\n<h5 id=\"å…¨å±€ç´¢å¼•-FULLTEXT\"><a href=\"#å…¨å±€ç´¢å¼•-FULLTEXT\" class=\"headerlink\" title=\"å…¨å±€ç´¢å¼•(FULLTEXT)\"></a>å…¨å±€ç´¢å¼•(FULLTEXT)</h5><ul>\n<li>å…¨å±€ç´¢å¼•ï¼Œç›®å‰åªæœ‰ MyISAM å¼•æ“æ”¯æŒå…¨å±€ç´¢å¼•ï¼Œå®ƒçš„å‡ºç°æ˜¯ä¸ºäº†è§£å†³é’ˆå¯¹æ–‡æœ¬çš„æ¨¡ç³ŠæŸ¥è¯¢æ•ˆç‡è¾ƒä½çš„é—®é¢˜ã€‚</li>\n</ul>\n<h5 id=\"å“ˆå¸Œç´¢å¼•-HASH\"><a href=\"#å“ˆå¸Œç´¢å¼•-HASH\" class=\"headerlink\" title=\"å“ˆå¸Œç´¢å¼•(HASH)\"></a>å“ˆå¸Œç´¢å¼•(HASH)</h5><ul>\n<li>å“ˆå¸Œç´¢å¼•æ˜¯ MySQL ä¸­ç”¨åˆ°çš„å”¯ä¸€ key-value é”®å€¼å¯¹çš„æ•°æ®ç»“æ„ï¼Œå¾ˆé€‚åˆä½œä¸ºç´¢å¼•ã€‚HASH ç´¢å¼•å…·æœ‰ä¸€æ¬¡å®šä½çš„å¥½å¤„ï¼Œä¸éœ€è¦åƒæ ‘é‚£æ ·é€ä¸ªèŠ‚ç‚¹æŸ¥æ‰¾ï¼Œä½†æ˜¯è¿™ç§æŸ¥æ‰¾é€‚åˆåº”ç”¨äºæŸ¥æ‰¾å•ä¸ªé”®çš„æƒ…å†µï¼Œå¯¹äºèŒƒå›´æŸ¥æ‰¾ï¼ŒHASH ç´¢å¼•çš„æ€§èƒ½å°±ä¼šå¾ˆä½ã€‚</li>\n</ul>\n<h5 id=\"B-Treeç´¢å¼•\"><a href=\"#B-Treeç´¢å¼•\" class=\"headerlink\" title=\"B-Treeç´¢å¼•\"></a>B-Treeç´¢å¼•</h5><ul>\n<li>B å°±æ˜¯ Balance çš„æ„æ€ï¼ŒBTree æ˜¯ä¸€ç§å¹³è¡¡æ ‘ï¼Œå®ƒæœ‰å¾ˆå¤šå˜ç§ï¼Œæœ€å¸¸è§çš„å°±æ˜¯ B+ Treeï¼Œå®ƒè¢« MySQL å¹¿æ³›ä½¿ç”¨ã€‚</li>\n</ul>\n<h5 id=\"R-Treeç´¢å¼•\"><a href=\"#R-Treeç´¢å¼•\" class=\"headerlink\" title=\"R-Treeç´¢å¼•\"></a>R-Treeç´¢å¼•</h5><ul>\n<li>R-Tree åœ¨ MySQL å¾ˆå°‘ä½¿ç”¨ï¼Œä»…æ”¯æŒ geometry æ•°æ®ç±»å‹ï¼Œæ”¯æŒè¯¥ç±»å‹çš„å­˜å‚¨å¼•æ“åªæœ‰MyISAMã€BDbã€InnoDbã€NDbã€Archiveå‡ ç§ï¼Œç›¸å¯¹äº B-Tree æ¥è¯´ï¼ŒR-Tree çš„ä¼˜åŠ¿åœ¨äºèŒƒå›´æŸ¥æ‰¾ã€‚</li>\n</ul>\n<h4 id=\"B-Treeä¸Hashç´¢å¼•çš„åŒºåˆ«\"><a href=\"#B-Treeä¸Hashç´¢å¼•çš„åŒºåˆ«\" class=\"headerlink\" title=\"B+Treeä¸Hashç´¢å¼•çš„åŒºåˆ«\"></a>B+Treeä¸Hashç´¢å¼•çš„åŒºåˆ«</h4><ol>\n<li>B+Treeæ˜¯ä¸€ä¸ªå¹³è¡¡å¤šå‰æ ‘ï¼Œä»æ ¹èŠ‚ç‚¹åˆ°æ¯ä¸ªå¶å­èŠ‚ç‚¹ç‚¹é«˜åº¦å·®å€¼ä¸è¶…è¿‡1ï¼ŒåŒå±‚çº§çš„èŠ‚ç‚¹äº’ç›¸æœ‰æŒ‡é’ˆäº’ç›¸é“¾æ¥ï¼Œæ˜¯æœ‰åºçš„ã€‚</li>\n<li>Hashç´¢å¼•æ˜¯é‡‡ç”¨ä¸€å®šçš„Hashç®—æ³•ï¼ŒæŠŠå¥å€¼æ¢æˆå“ˆå¸Œå€¼ï¼Œæ£€ç´¢çš„æ—¶å€™ä¸éœ€è¦ç±»ä¼¼b+æ ‘ä»æ ¹èŠ‚ç‚¹é€æ¸æŸ¥æ‰¾ï¼Œå€¼éœ€è¦ä¸€æ¬¡å“ˆå¸Œè¿ç®—å³å¯ï¼Œæ˜¯æ— åºçš„ã€‚</li>\n<li>Hashç´¢å¼•é€‚åˆç­‰å€¼æŸ¥è¯¢ï¼Œå“ˆå¸Œç´¢å¼•å…·æœ‰ç»å¯¹ä¼˜åŠ¿ï¼ˆå‰ææ˜¯ï¼šæ²¡æœ‰â¼¤é‡é‡å¤é”®å€¼ï¼Œå¦‚æœâ¼¤é‡é‡å¤é”®å€¼æ—¶ï¼Œå“ˆå¸Œç´¢å¼•çš„æ•ˆç‡å¾ˆä½ï¼Œå› ä¸ºå­˜åœ¨æ‰€è°“çš„ å“ˆå¸Œç¢°æ’é—®é¢˜ã€‚ä¸ä½¿ç”¨èŒƒå›´æŸ¥è¯¢ã€ä¹Ÿä¸æ”¯æŒç´¢å¼•å®Œæˆæ’åºã€‚ä¸æ”¯æŒè”åˆç´¢å¼•æœ€å·¦åŒ¹é…åŸåˆ™ã€‚é€šè¿‡åˆ—çš„åŸºæ•°å¾ˆå¤§ä¹Ÿä¸å»ºè®®ä½¿ç”¨Hashç´¢å¼•ã€‚</li>\n</ol>\n<h4 id=\"InnoDBå­˜å‚¨å¼•æ“çš„B-æ ‘ç´¢å¼•\"><a href=\"#InnoDBå­˜å‚¨å¼•æ“çš„B-æ ‘ç´¢å¼•\" class=\"headerlink\" title=\"InnoDBå­˜å‚¨å¼•æ“çš„B+æ ‘ç´¢å¼•\"></a>InnoDBå­˜å‚¨å¼•æ“çš„B+æ ‘ç´¢å¼•</h4><ul>\n<li>æ¯ä¸ªç´¢å¼•éƒ½å¯¹åº”ä¸€æ£µB+æ ‘ï¼ŒB+æ ‘åˆ†ä¸ºå¥½å¤šå±‚ï¼Œæœ€ä¸‹è¾¹ä¸€å±‚æ˜¯å¶å­èŠ‚ç‚¹ï¼Œå…¶ä½™çš„æ˜¯å†…èŠ‚ç‚¹ã€‚æ‰€æœ‰ç”¨æˆ·è®°å½•éƒ½å­˜å‚¨åœ¨B+æ ‘çš„å¶å­èŠ‚ç‚¹ï¼Œæ‰€æœ‰ç›®å½•é¡¹è®°å½•éƒ½å­˜å‚¨åœ¨å†…èŠ‚ç‚¹ã€‚</li>\n<li>InnoDBå­˜å‚¨å¼•æ“ä¼šè‡ªåŠ¨ä¸ºä¸»é”®ï¼ˆå¦‚æœæ²¡æœ‰å®ƒä¼šè‡ªåŠ¨å¸®æˆ‘ä»¬æ·»åŠ ï¼‰å»ºç«‹èšç°‡ç´¢å¼•ï¼Œèšç°‡ç´¢å¼•çš„å¶å­èŠ‚ç‚¹åŒ…å«å®Œæ•´çš„ç”¨æˆ·è®°å½•ã€‚</li>\n<li>æˆ‘ä»¬å¯ä»¥ä¸ºè‡ªå·±æ„Ÿå…´è¶£çš„åˆ—å»ºç«‹äºŒçº§ç´¢å¼•ï¼ŒäºŒçº§ç´¢å¼•çš„å¶å­èŠ‚ç‚¹åŒ…å«çš„ç”¨æˆ·è®°å½•ç”±ç´¢å¼•åˆ— + ä¸»é”®ç»„æˆï¼Œæ‰€ä»¥å¦‚æœæƒ³é€šè¿‡äºŒçº§ç´¢å¼•æ¥æŸ¥æ‰¾å®Œæ•´çš„ç”¨æˆ·è®°å½•çš„è¯ï¼Œéœ€è¦é€šè¿‡å›è¡¨æ“ä½œï¼Œä¹Ÿå°±æ˜¯åœ¨é€šè¿‡äºŒçº§ç´¢å¼•æ‰¾åˆ°ä¸»é”®å€¼ä¹‹åå†åˆ°èšç°‡ç´¢å¼•ä¸­æŸ¥æ‰¾å®Œæ•´çš„ç”¨æˆ·è®°å½•ã€‚</li>\n<li>B+æ ‘ä¸­æ¯å±‚èŠ‚ç‚¹éƒ½æ˜¯æŒ‰ç…§ç´¢å¼•åˆ—å€¼ä»å°åˆ°å¤§çš„é¡ºåºæ’åºè€Œç»„æˆäº†åŒå‘é“¾è¡¨ï¼Œè€Œä¸”æ¯ä¸ªé¡µå†…çš„è®°å½•ï¼ˆä¸è®ºæ˜¯ç”¨æˆ·è®°å½•è¿˜æ˜¯ç›®å½•é¡¹è®°å½•ï¼‰éƒ½æ˜¯æŒ‰ç…§ç´¢å¼•åˆ—çš„å€¼ä»å°åˆ°å¤§çš„é¡ºåºè€Œå½¢æˆäº†ä¸€ä¸ªå•é“¾è¡¨ã€‚å¦‚æœæ˜¯è”åˆç´¢å¼•çš„è¯ï¼Œåˆ™é¡µé¢å’Œè®°å½•å…ˆæŒ‰ç…§è”åˆç´¢å¼•å‰è¾¹çš„åˆ—æ’åºï¼Œå¦‚æœè¯¥åˆ—å€¼ç›¸åŒï¼Œå†æŒ‰ç…§è”åˆç´¢å¼•åè¾¹çš„åˆ—æ’åºã€‚</li>\n<li>é€šè¿‡ç´¢å¼•æŸ¥æ‰¾è®°å½•æ˜¯ä»B+æ ‘çš„æ ¹èŠ‚ç‚¹å¼€å§‹ï¼Œä¸€å±‚ä¸€å±‚å‘ä¸‹æœç´¢ã€‚ç”±äºæ¯ä¸ªé¡µé¢éƒ½æŒ‰ç…§ç´¢å¼•åˆ—çš„å€¼å»ºç«‹äº†Page Directoryï¼ˆé¡µç›®å½•ï¼‰ï¼Œæ‰€ä»¥åœ¨è¿™äº›é¡µé¢ä¸­çš„æŸ¥æ‰¾éå¸¸å¿«ã€‚</li>\n<li>äºŒè€…SELECT COUNT(*)å“ªä¸ªæ›´å¿«ï¼Œä¸ºä»€ä¹ˆ<ul>\n<li>myisamæ›´å¿«ï¼Œå› ä¸ºmyisamå†…éƒ¨ç»´æŠ¤äº†ä¸€ä¸ªè®¡æ•°å™¨ï¼Œå¯ä»¥ç›´æ¥è°ƒå–ã€‚</li>\n</ul>\n</li>\n</ul>\n<h4 id=\"ç´¢å¼•å¤±æ•ˆ\"><a href=\"#ç´¢å¼•å¤±æ•ˆ\" class=\"headerlink\" title=\"ç´¢å¼•å¤±æ•ˆ\"></a>ç´¢å¼•å¤±æ•ˆ</h4><ul>\n<li>ä¸¤å¼ è¡¨è”åˆæŸ¥è¯¢çš„æ—¶å€™è¡¨çš„ç¼–ç é›†ä¸ä¸€æ ·ä¼šå¯¼è‡´ç´¢å¼•å¤±æ•ˆã€‚</li>\n<li>åˆ—ç±»å‹æ˜¯å­—ç¬¦ä¸²ï¼Œä¸€å®šè¦åœ¨æ¡ä»¶ä¸­å°†æ•°æ®ç”¨<code>å¼•å·å¼•ç”¨</code>ï¼Œå¦åˆ™å¤±æ•ˆï¼ˆéšå¼è½¬æ¢ï¼‰</li>\n<li>orè¯­å¥å‰åæœªä½¿ç”¨ç´¢å¼•å­—æ®µ ï¼Œå­—æ®µAåšäº†ç´¢å¼• WHERE A = 1 OR B = 2 è¿™æ—¶å€™ä¹Ÿä¸å›èµ°ç´¢å¼•ã€‚</li>\n<li>likeæœªä½¿ç”¨æœ€å·¦å‰ç¼€ï¼Œwhere A like â€œ%Chinaâ€ã€‚</li>\n<li>åœ¨ç´¢å¼•ä¸Šä½¿ç”¨å‡½æ•° ã€!= ã€&lt;&gt; ã€not in ã€‚</li>\n<li>where a = b + 1 æŸ¥è¯¢æ¡ä»¶åšè¿ç®—</li>\n<li>is null ã€is not null</li>\n</ul>\n<h4 id=\"è¦†ç›–ç´¢å¼•å’Œå›è¡¨\"><a href=\"#è¦†ç›–ç´¢å¼•å’Œå›è¡¨\" class=\"headerlink\" title=\"è¦†ç›–ç´¢å¼•å’Œå›è¡¨\"></a>è¦†ç›–ç´¢å¼•å’Œå›è¡¨</h4><ul>\n<li>è¦†ç›–ç´¢å¼•æŒ‡çš„æ˜¯åœ¨ä¸€æ¬¡æŸ¥è¯¢ä¸­ï¼Œå¦‚æœä¸€ä¸ªç´¢å¼•åŒ…å«æˆ–è€…è¯´è¦†ç›–æ‰€æœ‰éœ€è¦æŸ¥è¯¢çš„å­—æ®µçš„å€¼ï¼Œæˆ‘ä»¬å°±ç§°ä¹‹ä¸ºè¦†ç›–ç´¢å¼•ï¼Œè€Œä¸å†éœ€è¦å›è¡¨æŸ¥è¯¢ã€‚è€Œè¦ç¡®å®šä¸€ä¸ªæŸ¥è¯¢æ˜¯å¦æ˜¯è¦†ç›–ç´¢å¼•ï¼Œæˆ‘ä»¬åªéœ€è¦explain sqlè¯­å¥çœ‹Extraçš„ç»“æœæ˜¯å¦æ˜¯â€œUsing indexâ€å³å¯ã€‚</li>\n</ul>\n<h4 id=\"ç´¢å¼•ä¸‹æ¨\"><a href=\"#ç´¢å¼•ä¸‹æ¨\" class=\"headerlink\" title=\"ç´¢å¼•ä¸‹æ¨\"></a>ç´¢å¼•ä¸‹æ¨</h4><blockquote>\n<p>åœ¨æ ¹æ®ç´¢å¼•æŸ¥è¯¢è¿‡ç¨‹ä¸­å°±æ ¹æ®æŸ¥è¯¢æ¡ä»¶è¿‡æ»¤æ‰ä¸€äº›è®°å½•ï¼Œå‡å°‘æœ€åçš„å›è¡¨æ“ä½œ</p>\n</blockquote>\n<h4 id=\"ä½¿ç”¨ç´¢å¼•æŸ¥è¯¢ä¸€å®šèƒ½æé«˜æŸ¥è¯¢çš„æ€§èƒ½å—ï¼Ÿ\"><a href=\"#ä½¿ç”¨ç´¢å¼•æŸ¥è¯¢ä¸€å®šèƒ½æé«˜æŸ¥è¯¢çš„æ€§èƒ½å—ï¼Ÿ\" class=\"headerlink\" title=\"ä½¿ç”¨ç´¢å¼•æŸ¥è¯¢ä¸€å®šèƒ½æé«˜æŸ¥è¯¢çš„æ€§èƒ½å—ï¼Ÿ\"></a>ä½¿ç”¨ç´¢å¼•æŸ¥è¯¢ä¸€å®šèƒ½æé«˜æŸ¥è¯¢çš„æ€§èƒ½å—ï¼Ÿ</h4><blockquote>\n<p>é€šå¸¸,é€šè¿‡ç´¢å¼•æŸ¥è¯¢æ•°æ®æ¯”å…¨è¡¨æ‰«æè¦å¿«.ä½†æ˜¯æˆ‘ä»¬ä¹Ÿå¿…é¡»æ³¨æ„åˆ°å®ƒçš„ä»£ä»·.</p>\n</blockquote>\n<ul>\n<li>ç´¢å¼•éœ€è¦ç©ºé—´æ¥å­˜å‚¨,ä¹Ÿéœ€è¦å®šæœŸç»´æŠ¤, æ¯å½“æœ‰è®°å½•åœ¨è¡¨ä¸­å¢å‡æˆ–ç´¢å¼•åˆ—è¢«ä¿®æ”¹æ—¶,ç´¢å¼•æœ¬èº«ä¹Ÿä¼šè¢«ä¿®æ”¹. è¿™æ„å‘³ç€æ¯æ¡è®°å½•çš„INSERT,DELETE,UPDATEå°†ä¸ºæ­¤å¤šä»˜å‡º4,5 æ¬¡çš„ç£ç›˜I/O. å› ä¸ºç´¢å¼•éœ€è¦é¢å¤–çš„å­˜å‚¨ç©ºé—´å’Œå¤„ç†,é‚£äº›ä¸å¿…è¦çš„ç´¢å¼•åè€Œä¼šä½¿æŸ¥è¯¢ååº”æ—¶é—´å˜æ…¢.ä½¿ç”¨ç´¢å¼•æŸ¥è¯¢ä¸ä¸€å®šèƒ½æé«˜æŸ¥è¯¢æ€§èƒ½,ç´¢å¼•èŒƒå›´æŸ¥è¯¢(INDEX RANGE SCAN)é€‚ç”¨äºä¸¤ç§æƒ…å†µ:</li>\n<li>åŸºäºä¸€ä¸ªèŒƒå›´çš„æ£€ç´¢,ä¸€èˆ¬æŸ¥è¯¢è¿”å›ç»“æœé›†å°äºè¡¨ä¸­è®°å½•æ•°çš„30%</li>\n<li>åŸºäºéå”¯ä¸€æ€§ç´¢å¼•çš„æ£€ç´¢</li>\n</ul>\n<h3 id=\"äº‹åŠ¡\"><a href=\"#äº‹åŠ¡\" class=\"headerlink\" title=\"äº‹åŠ¡\"></a>äº‹åŠ¡</h3><blockquote>\n<p>äº‹åŠ¡ï¼ˆTransactionï¼‰æ˜¯å¹¶å‘æ§åˆ¶çš„åŸºæœ¬å•ä½ã€‚æ‰€è°“çš„äº‹åŠ¡ï¼Œå®ƒæ˜¯ä¸€ä¸ªæ“ä½œåºåˆ—ï¼Œè¿™äº›æ“ä½œè¦ä¹ˆéƒ½æ‰§è¡Œï¼Œè¦ä¹ˆéƒ½ä¸æ‰§è¡Œï¼Œå®ƒæ˜¯ä¸€ä¸ªä¸å¯åˆ†å‰²çš„å·¥ä½œå•ä½ã€‚äº‹åŠ¡æ˜¯æ•°æ®åº“ç»´æŠ¤æ•°æ®ä¸€è‡´æ€§çš„å•ä½ï¼Œåœ¨æ¯ä¸ªäº‹åŠ¡ç»“æŸæ—¶ï¼Œéƒ½èƒ½ä¿æŒæ•°æ®ä¸€è‡´æ€§ã€‚</p>\n</blockquote>\n<h4 id=\"ACID\"><a href=\"#ACID\" class=\"headerlink\" title=\"ACID\"></a>ACID</h4><blockquote>\n<p>ä¸€è¯´åˆ° MySQL äº‹åŠ¡ï¼Œä½ è‚¯å®šèƒ½æƒ³èµ·æ¥å››å¤§ç‰¹æ€§ï¼š<code>åŸå­æ€§</code>ã€<code>ä¸€è‡´æ€§</code>ã€<code>éš”ç¦»æ€§</code>ã€<code>æŒä¹…æ€§</code>ã€‚</p>\n<p>ACIDæ¨¡å¼æ˜¯ä¸€ç»„æ•°æ®åº“è®¾è®¡åŸåˆ™å¼ºè°ƒçš„æ˜¯ï¼Œå¯¹äºä¸šåŠ¡æ•°æ®å’Œå…³é”®ä»»åŠ¡åº”ç”¨é‡è¦çš„å¯é æ€§æ–¹é¢ã€‚MySQLåŒ…å«è¯¸å¦‚çš„ç»„ä»¶<code>InnoDB</code>å­˜å‚¨å¼•æ“ä¸ACIDæ¨¡å‹ç´§å¯†ç»“åˆï¼Œå› æ­¤æ•°æ®ä¸ä¼šæŸåï¼Œå¹¶ä¸”ä¸ä¼šå› è½¯ä»¶å´©æºƒå’Œç¡¬ä»¶æ•…éšœç­‰ç‰¹æ®Šæƒ…å†µè€Œå¯¼è‡´ç»“æœå¤±çœŸã€‚å½“æ‚¨ä¾èµ–ç¬¦åˆACIDçš„åŠŸèƒ½æ—¶ï¼Œæ‚¨æ— éœ€é‡æ–°å‘æ˜ä¸€è‡´æ€§æ£€æŸ¥å’Œå´©æºƒæ¢å¤æœºåˆ¶ã€‚å¦‚æœæ‚¨æœ‰å…¶ä»–è½¯ä»¶å®‰å…¨æªæ–½ï¼Œè¶…å¯é ç¡¬ä»¶æˆ–å¯ä»¥å®¹å¿å°‘é‡æ•°æ®ä¸¢å¤±æˆ–ä¸ä¸€è‡´çš„åº”ç”¨ç¨‹åºï¼Œæ‚¨å¯ä»¥è°ƒæ•´MySQLè®¾ç½®ä»¥äº¤æ¢ä¸€äº›ACIDå¯é æ€§ä»¥è·å¾—æ›´é«˜çš„æ€§èƒ½æˆ–ååé‡ã€‚</p>\n</blockquote>\n<h4 id=\"åŸå­æ€§-Atomicity\"><a href=\"#åŸå­æ€§-Atomicity\" class=\"headerlink\" title=\"åŸå­æ€§(Atomicity)\"></a>åŸå­æ€§(Atomicity)</h4><ul>\n<li>åŸå­æ€§æŒ‡çš„å°±æ˜¯ MySQL ä¸­çš„åŒ…å«äº‹åŠ¡çš„æ“ä½œè¦ä¹ˆ<code>å…¨éƒ¨æˆåŠŸ</code>ã€è¦ä¹ˆå…¨éƒ¨<code>å¤±è´¥å›æ»š</code>ï¼Œå› æ­¤äº‹åŠ¡çš„æ“ä½œå¦‚æœæˆåŠŸå°±å¿…é¡»è¦å…¨éƒ¨åº”ç”¨åˆ°æ•°æ®åº“ï¼Œå¦‚æœæ“ä½œå¤±è´¥åˆ™ä¸èƒ½å¯¹æ•°æ®åº“æœ‰ä»»ä½•å½±å“ã€‚</li>\n</ul>\n<h4 id=\"ä¸€è‡´æ€§-Consistency\"><a href=\"#ä¸€è‡´æ€§-Consistency\" class=\"headerlink\" title=\"ä¸€è‡´æ€§(Consistency)\"></a>ä¸€è‡´æ€§(Consistency)</h4><ul>\n<li>ä¸€è‡´æ€§æŒ‡çš„æ˜¯ä¸€ä¸ªäº‹åŠ¡åœ¨æ‰§è¡Œå‰åå…¶çŠ¶æ€ä¸€è‡´ã€‚æ¯”å¦‚ A å’Œ B åŠ èµ·æ¥çš„é’±ä¸€å…±æ˜¯ 1000 å…ƒï¼Œé‚£ä¹ˆä¸ç®¡ A å’Œ B ä¹‹é—´å¦‚ä½•è½¬è´¦ï¼Œè½¬å¤šå°‘æ¬¡ï¼Œäº‹åŠ¡ç»“æŸåä¸¤ä¸ªç”¨æˆ·çš„é’±åŠ èµ·æ¥è¿˜å¾—æ˜¯ 1000ï¼Œè¿™å°±æ˜¯äº‹åŠ¡çš„ä¸€è‡´æ€§ã€‚</li>\n</ul>\n<h4 id=\"æŒä¹…æ€§-Durability\"><a href=\"#æŒä¹…æ€§-Durability\" class=\"headerlink\" title=\"æŒä¹…æ€§(Durability)\"></a>æŒä¹…æ€§(Durability)</h4><ul>\n<li>æŒä¹…æ€§æŒ‡çš„æ˜¯ä¸€æ—¦äº‹åŠ¡æäº¤ï¼Œé‚£ä¹ˆå‘ç”Ÿçš„æ”¹å˜å°±æ˜¯æ°¸ä¹…æ€§çš„ï¼Œå³ä½¿æ•°æ®åº“é‡åˆ°ç‰¹æ®Šæƒ…å†µæ¯”å¦‚æ•…éšœçš„æ—¶å€™ä¹Ÿä¸ä¼šäº§ç”Ÿå¹²æ‰°ã€‚</li>\n</ul>\n<h4 id=\"éš”ç¦»æ€§-Isolation\"><a href=\"#éš”ç¦»æ€§-Isolation\" class=\"headerlink\" title=\"éš”ç¦»æ€§(Isolation)\"></a>éš”ç¦»æ€§(Isolation)</h4><blockquote>\n<p>å½“å¤šä¸ªäº‹åŠ¡åŒæ—¶è¿›è¡Œæ—¶ï¼Œå°±æœ‰å¯èƒ½å‡ºç°<code>è„è¯»(dirty read)</code>ã€<code>ä¸å¯é‡å¤è¯»(non-repeatable read)</code>ã€<code>å¹»è¯»(phantom read)</code> çš„æƒ…å†µï¼Œä¸ºäº†è§£å†³è¿™äº›å¹¶å‘é—®é¢˜ï¼Œæå‡ºäº†éš”ç¦»æ€§çš„æ¦‚å¿µã€‚</p>\n</blockquote>\n<ul>\n<li><code>è¯»æœªæäº¤</code>ï¼šè¯»æœªæäº¤æŒ‡çš„æ˜¯ä¸€ä¸ªäº‹åŠ¡åœ¨æäº¤ä¹‹å‰ï¼Œå®ƒæ‰€åšçš„ä¿®æ”¹å°±èƒ½å¤Ÿè¢«å…¶ä»–äº‹åŠ¡æ‰€çœ‹åˆ°ã€‚</li>\n<li><code>è¯»å·²æäº¤</code>ï¼šè¯»å·²æäº¤æŒ‡çš„æ˜¯ä¸€ä¸ªäº‹åŠ¡åœ¨æäº¤ä¹‹åï¼Œå®ƒæ‰€åšçš„å˜æ›´æ‰èƒ½å¤Ÿè®©å…¶ä»–äº‹åŠ¡çœ‹åˆ°ã€‚</li>\n<li><code>å¯é‡å¤è¯»</code>ï¼šå¯é‡å¤è¯»æŒ‡çš„æ˜¯ä¸€ä¸ªäº‹åŠ¡åœ¨æ‰§è¡Œçš„è¿‡ç¨‹ä¸­ï¼Œçœ‹åˆ°çš„æ•°æ®æ˜¯å’Œå¯åŠ¨æ—¶çœ‹åˆ°çš„æ•°æ®æ˜¯ä¸€è‡´çš„ã€‚æœªæäº¤çš„å˜æ›´å¯¹å…¶ä»–äº‹åŠ¡ä¸å¯è§ã€‚</li>\n<li><code>ä¸²è¡ŒåŒ–</code>ï¼šé¡¾åæ€ä¹‰æ˜¯å¯¹äºåŒä¸€è¡Œè®°å½•ï¼Œ<code>å†™</code>ä¼šåŠ <code>å†™é”</code>ï¼Œ<code>è¯»</code>ä¼šåŠ <code>è¯»é”</code>ã€‚å½“å‡ºç°è¯»å†™é”å†²çªçš„æ—¶å€™ï¼Œåè®¿é—®çš„äº‹åŠ¡å¿…é¡»ç­‰å‰ä¸€ä¸ªäº‹åŠ¡æ‰§è¡Œå®Œæˆï¼Œæ‰èƒ½ç»§ç»­æ‰§è¡Œã€‚</li>\n</ul>\n<h5 id=\"éš”ç¦»æ€§å››ä¸ªç‰¹æ€§\"><a href=\"#éš”ç¦»æ€§å››ä¸ªç‰¹æ€§\" class=\"headerlink\" title=\"éš”ç¦»æ€§å››ä¸ªç‰¹æ€§\"></a>éš”ç¦»æ€§å››ä¸ªç‰¹æ€§</h5><blockquote>\n<p>æœ€é‡è¦çš„å°±æ˜¯ä¸€è‡´æ€§ã€‚è€Œ<strong>ä¸€è‡´æ€§</strong>ç”±åŸå­æ€§ï¼Œéš”ç¦»æ€§ï¼ŒæŒä¹…æ€§æ¥ä¿è¯ã€‚</p>\n</blockquote>\n<ul>\n<li>åŸå­æ€§ç”± Undo log ä¿è¯ã€‚Undo Log ä¼šä¿å­˜æ¯æ¬¡å˜æ›´ä¹‹å‰çš„è®°å½•ï¼Œä»è€Œåœ¨å‘ç”Ÿé”™è¯¯æ—¶è¿›è¡Œå›æ»šã€‚</li>\n<li>éš”ç¦»æ€§ç”± MVCC å’Œ Lock ä¿è¯ã€‚</li>\n<li>æŒä¹…æ€§ç”± Redo Log ä¿è¯ã€‚æ¯æ¬¡çœŸæ­£ä¿®æ”¹æ•°æ®ä¹‹å‰ï¼Œéƒ½ä¼šå°†è®°å½•å†™åˆ° Redo Log ä¸­ï¼Œåªæœ‰ Redo Log å†™å…¥æˆåŠŸï¼Œæ‰ä¼šçœŸæ­£çš„å†™å…¥åˆ° B+ æ ‘ä¸­ï¼Œå¦‚æœæäº¤ä¹‹å‰æ–­ç”µï¼Œå°±å¯ä»¥é€šè¿‡ Redo Log æ¢å¤è®°å½•ã€‚</li>\n</ul>\n<table>\n<thead>\n<tr>\n<th>äº‹åŠ¡éš”ç¦»çº§åˆ«</th>\n<th>å€¼</th>\n<th>è„è¯»</th>\n<th>ä¸å¯é‡å¤è¯»</th>\n<th>å¹»è¯»</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>è¯»æœªæäº¤ï¼ˆread-uncommittedï¼‰</td>\n<td>1</td>\n<td>æ˜¯</td>\n<td>æ˜¯</td>\n<td>æ˜¯</td>\n</tr>\n<tr>\n<td>è¯»å·²æäº¤ï¼ˆread-committedï¼‰</td>\n<td>2</td>\n<td>å¦</td>\n<td>æ˜¯</td>\n<td>æ˜¯</td>\n</tr>\n<tr>\n<td>å¯é‡å¤è¯»ï¼ˆrepeatable-readï¼‰</td>\n<td>3</td>\n<td>å¦</td>\n<td>å¦</td>\n<td>æ˜¯ï¼ˆxï¼‰</td>\n</tr>\n<tr>\n<td>ä¸²è¡ŒåŒ–ï¼ˆserializableï¼‰</td>\n<td>4</td>\n<td>å¦</td>\n<td>å¦</td>\n<td>å¦</td>\n</tr>\n</tbody></table>\n<blockquote>\n<p>è¯»å·²æäº¤å’Œå¯é‡å¤è¯»å®ç°åŸç†å°±æ˜¯MVCC Read Viewä¸åŒçš„ç”Ÿæˆæ—¶æœºã€‚å¯é‡å¤è¯»åªåœ¨äº‹åŠ¡å¼€å§‹æ—¶ç”Ÿæˆä¸€ä¸ªRead Viewï¼›è¯»å·²æäº¤æ¯æ¬¡æ‰§è¡Œå‰éƒ½ä¼šç”ŸæˆRead Viewã€‚</p>\n</blockquote>\n<h5 id=\"è¯»æœªæäº¤\"><a href=\"#è¯»æœªæäº¤\" class=\"headerlink\" title=\"è¯»æœªæäº¤\"></a>è¯»æœªæäº¤</h5><blockquote>\n<p>ä¸€ä¸ªäº‹ç‰©æœªæäº¤çš„æ—¶å€™ï¼Œå®ƒåšçš„æ•°æ®å˜æ›´å°±èƒ½è¢«å…¶å®ƒäº‹ç‰©çœ‹åˆ°ã€‚</p>\n</blockquote>\n<ul>\n<li>åŸç†ï¼šç›´æ¥è¯»å–æ•°æ®ï¼Œä¸èƒ½è§£å†³ä»»ä½•å¹¶å‘é—®é¢˜</li>\n</ul>\n<h5 id=\"è¯»æäº¤\"><a href=\"#è¯»æäº¤\" class=\"headerlink\" title=\"è¯»æäº¤\"></a>è¯»æäº¤</h5><blockquote>\n<p>ä¸€ä¸ªäº‹ç‰©æäº¤åï¼Œå®ƒåšçš„æ•°æ®å˜æ›´æ‰èƒ½è¢«å…¶å®ƒäº‹ç‰©çœ‹åˆ°ã€‚</p>\n</blockquote>\n<ul>\n<li>åŸç†ï¼šåˆ©ç”¨MVCCå®ç°ï¼Œæ¯ä¸€å¥è¯­å¥æ‰§è¡Œå‰éƒ½ä¼šç”ŸæˆRead Viewï¼ˆä¸€è‡´æ€§è§†å›¾ï¼‰</li>\n</ul>\n<h5 id=\"å¯é‡å¤è¯»-ï¼ˆé»˜è®¤éš”ç¦»çº§åˆ«ï¼‰\"><a href=\"#å¯é‡å¤è¯»-ï¼ˆé»˜è®¤éš”ç¦»çº§åˆ«ï¼‰\" class=\"headerlink\" title=\"å¯é‡å¤è¯» ï¼ˆé»˜è®¤éš”ç¦»çº§åˆ«ï¼‰\"></a>å¯é‡å¤è¯» ï¼ˆ<strong>é»˜è®¤éš”ç¦»çº§åˆ«</strong>ï¼‰</h5><blockquote>\n<p>ä¸€ä¸ªäº‹ç‰©æ‰§è¡Œçš„è¿‡ç¨‹ä¸­çœ‹åˆ°çš„æ•°æ®ï¼Œæ€»æ˜¯è·Ÿè¿™ä¸ªäº‹ç‰©åœ¨å¯åŠ¨æ—¶å€™çœ‹çš„æ•°æ®ä¸€è‡´ã€‚åªæœ‰äº‹åŠ¡å¼€å§‹æ—¶ä¼šåˆ›å»ºRead Viewï¼Œä¹‹åäº‹åŠ¡é‡Œçš„å…¶ä»–æŸ¥è¯¢éƒ½ç”¨è¿™ä¸ªRead Viewã€‚è§£å†³äº†è„è¯»ã€ä¸å¯é‡å¤è¯»ï¼Œå¿«ç…§è¯»ï¼ˆæ™®é€šæŸ¥è¯¢ï¼Œè¯»å–å†å²æ•°æ®ï¼‰</p>\n</blockquote>\n<ul>\n<li>åŸç†ï¼šä½¿ç”¨MVCCè§£å†³äº†å¹»è¯»ï¼Œå½“å‰è¯»ï¼ˆè¯»å–æœ€æ–°æäº¤æ•°æ®ï¼‰é€šè¿‡é—´éš™é”è§£å†³å¹»è¯»ï¼ˆlock in share modeã€for updateã€updateã€deteteã€insertï¼‰ï¼Œé—´éš™é”åœ¨å¯é‡å¤è¯»ä¸‹æ‰ç”Ÿæ•ˆã€‚</li>\n</ul>\n<h5 id=\"ä¸²è¡ŒåŒ–\"><a href=\"#ä¸²è¡ŒåŒ–\" class=\"headerlink\" title=\"ä¸²è¡ŒåŒ–\"></a>ä¸²è¡ŒåŒ–</h5><blockquote>\n<p>å¯¹åŒä¸€è¡Œæ•°æ® <code>å†™</code>ä¼šåŠ <code>å†™é”</code>,<code>è¯»</code>ä¼šåŠ <code>è¯»é”</code>ã€‚å½“å‡ºç°è¯»å†™å†²çªçš„æ—¶å€™ï¼Œå¿…é¡»æŒ‰æ•°æ®æ‰§è¡Œäº‹åŠ¡ã€‚</p>\n</blockquote>\n<ul>\n<li>åŸç†ï¼šä½¿ç”¨é”ï¼Œè¯»åŠ å…±äº«é”ï¼Œå†™åŠ æ’ä»–é”ï¼Œä¸²è¡Œæ‰§è¡Œ</li>\n</ul>\n<h4 id=\"å¹¶å‘äº‹åŠ¡çš„é—®é¢˜\"><a href=\"#å¹¶å‘äº‹åŠ¡çš„é—®é¢˜\" class=\"headerlink\" title=\"å¹¶å‘äº‹åŠ¡çš„é—®é¢˜\"></a>å¹¶å‘äº‹åŠ¡çš„é—®é¢˜</h4><h5 id=\"è„è¯»\"><a href=\"#è„è¯»\" class=\"headerlink\" title=\"è„è¯»\"></a>è„è¯»</h5><blockquote>\n<p>ä¸€ä¸ªäº‹åŠ¡æ­£åœ¨å¯¹ä¸€æ¡è®°å½•è¿›è¡Œä¿®æ”¹ï¼Œåœ¨è¿™ä¸ªäº‹åŠ¡å®Œæˆå¹¶æäº¤å‰ï¼Œè¿™æ¡è®°å½•çš„æ•°æ®å°±å¤„äºä¸ä¸€è‡´çŠ¶æ€ã€‚è¿™æ—¶ï¼Œå¦ä¸€ä¸ªäº‹åŠ¡ä¹Ÿæ¥è¯»å–åŒä¸€æ¡è®°å½•ï¼Œå¦‚æœä¸åŠ æ§åˆ¶ï¼Œç¬¬äºŒä¸ªäº‹åŠ¡è¯»å–äº†è¿™äº›â€œè„â€æ•°æ®ï¼Œå¹¶æ®æ­¤åšè¿›ä¸€æ­¥çš„å¤„ç†ï¼Œå°±ä¼šäº§ç”Ÿæœªæäº¤çš„æ•°æ®ä¾èµ–å…³ç³»ã€‚</p>\n</blockquote>\n<table>\n<thead>\n<tr>\n<th align=\"left\">æ—¶é—´</th>\n<th align=\"left\">äº‹åŠ¡A</th>\n<th align=\"left\">äº‹åŠ¡B</th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"left\">T1</td>\n<td align=\"left\">å¼€å¯äº‹åŠ¡</td>\n<td align=\"left\">å¼€å¯äº‹åŠ¡</td>\n</tr>\n<tr>\n<td align=\"left\">T2</td>\n<td align=\"left\">æŸ¥è¯¢è´¦æˆ·ä½™é¢ä¸º1000</td>\n<td align=\"left\"></td>\n</tr>\n<tr>\n<td align=\"left\">T3</td>\n<td align=\"left\">å……å€¼500ï¼Œä½™é¢ä¿®æ”¹ä¸º1500</td>\n<td align=\"left\"></td>\n</tr>\n<tr>\n<td align=\"left\">T4</td>\n<td align=\"left\"></td>\n<td align=\"left\">æŸ¥è¯¢ä½™é¢ä¸º<strong>1500</strong></td>\n</tr>\n<tr>\n<td align=\"left\">T5</td>\n<td align=\"left\">æ’¤é”€äº‹åŠ¡ï¼Œä½™é¢æ”¹å›<strong>1000</strong></td>\n<td align=\"left\"></td>\n</tr>\n<tr>\n<td align=\"left\">T6</td>\n<td align=\"left\"></td>\n<td align=\"left\">æ±‡å…¥500ï¼Œä½™é¢ä¿®æ”¹ä¸º<strong>2000</strong></td>\n</tr>\n<tr>\n<td align=\"left\">T7</td>\n<td align=\"left\"></td>\n<td align=\"left\">æäº¤äº‹åŠ¡</td>\n</tr>\n</tbody></table>\n<h5 id=\"ä¸å¯é‡å¤è¯»\"><a href=\"#ä¸å¯é‡å¤è¯»\" class=\"headerlink\" title=\"ä¸å¯é‡å¤è¯»\"></a>ä¸å¯é‡å¤è¯»</h5><blockquote>\n<p>ä¸€ä¸ªäº‹åŠ¡åœ¨è¯»å–æŸäº›æ•°æ®åçš„æŸä¸ªæ—¶é—´ï¼Œå†æ¬¡è¯»å–ä»¥å‰è¯»è¿‡çš„æ•°æ®ï¼Œå´å‘ç°å…¶è¯»å‡ºçš„æ•°æ®å·²ç»å‘ç”Ÿäº†å˜æ›´ã€æˆ–è€…æŸäº›è®°å½•å·²ç»è¢«åˆ é™¤äº†ã€‚</p>\n</blockquote>\n<table>\n<thead>\n<tr>\n<th>æ—¶é—´</th>\n<th>äº‹åŠ¡A</th>\n<th>äº‹åŠ¡B</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>T1</td>\n<td>å¼€å¯äº‹åŠ¡</td>\n<td>å¼€å¯äº‹åŠ¡</td>\n</tr>\n<tr>\n<td>T2</td>\n<td>select * from user where user_id=100 å‡è®¾ä¸ºå°æ˜çš„ç”¨æˆ·ä¿¡æ¯</td>\n<td></td>\n</tr>\n<tr>\n<td>T3</td>\n<td></td>\n<td>å°†user_id=100çš„ç”¨æˆ·ä¿¡æ¯å¯¹åº”çš„å¹´é¾„ä¿®æ”¹ä¸º<strong>18</strong></td>\n</tr>\n<tr>\n<td>T4</td>\n<td></td>\n<td>æäº¤äº‹åŠ¡</td>\n</tr>\n<tr>\n<td>T5</td>\n<td>å†æ¬¡æŸ¥è¯¢å‘ç°ç”¨æˆ·çš„<strong>å¹´é¾„å˜æ›´</strong>äº†</td>\n<td></td>\n</tr>\n<tr>\n<td>T6</td>\n<td>â€¦</td>\n<td></td>\n</tr>\n<tr>\n<td>T7</td>\n<td>æäº¤äº‹åŠ¡</td>\n<td></td>\n</tr>\n</tbody></table>\n<h5 id=\"å¹»è¯»\"><a href=\"#å¹»è¯»\" class=\"headerlink\" title=\"å¹»è¯»\"></a>å¹»è¯»</h5><blockquote>\n<p>ä¸€ä¸ªäº‹åŠ¡æŒ‰ç›¸åŒçš„æŸ¥è¯¢æ¡ä»¶é‡æ–°è¯»å–ä»¥å‰æ£€ç´¢è¿‡çš„æ•°æ®ï¼Œå´å‘ç°å…¶å®ƒäº‹åŠ¡æ’å…¥äº†æ»¡è¶³å…¶æŸ¥è¯¢æ¡ä»¶çš„æ–°æ•°æ®ã€‚</p>\n</blockquote>\n<table>\n<thead>\n<tr>\n<th>æ—¶é—´</th>\n<th>äº‹åŠ¡A</th>\n<th>äº‹åŠ¡B</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>T1</td>\n<td>å¼€å¯äº‹åŠ¡</td>\n<td>å¼€å¯äº‹åŠ¡</td>\n</tr>\n<tr>\n<td>T2</td>\n<td>select * from user where age=18 å‡è®¾å¾—åˆ°ä¸¤æ¡è®°å½•</td>\n<td></td>\n</tr>\n<tr>\n<td>T3</td>\n<td></td>\n<td>å‘userè¡¨æ’å…¥ä¸€æ¡age=18çš„æ–°è®°å½•</td>\n</tr>\n<tr>\n<td>T4</td>\n<td></td>\n<td>æäº¤äº‹åŠ¡</td>\n</tr>\n<tr>\n<td>T5</td>\n<td><strong>å†æ¬¡æŸ¥è¯¢å¾—åˆ°ä¸‰æ¡è®°å½•</strong></td>\n<td></td>\n</tr>\n<tr>\n<td>T6</td>\n<td>..</td>\n<td></td>\n</tr>\n<tr>\n<td>T7</td>\n<td>æäº¤äº‹åŠ¡</td>\n<td></td>\n</tr>\n</tbody></table>\n<h5 id=\"å¹»è¯»å’Œä¸å¯é‡å¤è¯»çš„åŒºåˆ«\"><a href=\"#å¹»è¯»å’Œä¸å¯é‡å¤è¯»çš„åŒºåˆ«\" class=\"headerlink\" title=\"å¹»è¯»å’Œä¸å¯é‡å¤è¯»çš„åŒºåˆ«\"></a>å¹»è¯»å’Œä¸å¯é‡å¤è¯»çš„åŒºåˆ«</h5><ul>\n<li>ä¸å¯é‡å¤è¯»çš„é‡ç‚¹æ˜¯ä¿®æ”¹ï¼šåœ¨åŒä¸€äº‹åŠ¡ä¸­ï¼Œç›¸åŒçš„æ¡ä»¶ï¼Œç¬¬ä¸€æ¬¡å’Œç¬¬äºŒæ¬¡è¯»åˆ°çš„æ•°æ®ä¸ä¸€è‡´ï¼ˆä¸­é—´æœ‰å…¶å®ƒäº‹åŠ¡æäº¤äº†ä¿®æ”¹ï¼‰ã€‚</li>\n<li>å¹»è¯»çš„é‡ç‚¹æ˜¯æ–°å¢æˆ–è€…åˆ é™¤ï¼šåœ¨åŒä¸€äº‹åŠ¡ä¸­ï¼Œç›¸åŒçš„æ¡ä»¶ï¼Œç¬¬ä¸€æ¬¡å’Œç¬¬äºŒæ¬¡è¯»åˆ°çš„è®°å½•æ•°ä¸ä¸€æ ·ï¼ˆä¸­é—´æœ‰å…¶å®ƒäº‹åŠ¡æäº¤äº†æ–°å¢æˆ–è€…åˆ é™¤ï¼‰ã€‚</li>\n</ul>\n<h3 id=\"LOCK\"><a href=\"#LOCK\" class=\"headerlink\" title=\"LOCK\"></a>LOCK</h3><blockquote>\n<p>è¿™å¾ˆé‡è¦ä¸ç®¡æ˜¯é¢è¯•å·¥ä½œï¼Œè¿˜æ˜¯æ’æŸ¥å¼‚å¸¸ï¼Œå‡ºç°é—®é¢˜çš„æ—¶å€™éœ€è¦å‘ç°ã€å®šä½ã€è§£å†³èƒ½åŠ›ã€‚ä¹Ÿæ˜¯å¼€å‘äººå‘˜å¿…é¡»æŒæ¡çš„ä¸€é¡¹èƒ½åŠ›ã€‚</p>\n</blockquote>\n<h4 id=\"ç†è§£ä¸‹é”å‡ ç§ç»´åº¦\"><a href=\"#ç†è§£ä¸‹é”å‡ ç§ç»´åº¦\" class=\"headerlink\" title=\"ç†è§£ä¸‹é”å‡ ç§ç»´åº¦\"></a>ç†è§£ä¸‹é”å‡ ç§ç»´åº¦</h4><h5 id=\"ç±»å‹ç»´åº¦\"><a href=\"#ç±»å‹ç»´åº¦\" class=\"headerlink\" title=\"ç±»å‹ç»´åº¦\"></a>ç±»å‹ç»´åº¦</h5><ul>\n<li><p>å…±äº«é”ï¼ˆè¯»é” / S é”ï¼‰</p>\n</li>\n<li><p>æ’å®ƒé”ï¼ˆå†™é” / X é”ï¼‰ç±»å‹ç»†åˆ†ï¼š</p>\n<ul>\n<li><p>æ„å‘å…±äº«é”</p>\n</li>\n<li><p>æ„å‘æ’ä»–ï¼ˆäº’æ–¥ï¼‰é”</p>\n</li>\n</ul>\n</li>\n<li><p>æ‚²è§‚é”ï¼ˆä½¿ç”¨é”ï¼Œå³ for updateï¼‰</p>\n</li>\n<li><p>ä¹è§‚é”ï¼ˆä½¿ç”¨ç‰ˆæœ¬å·å­—æ®µï¼Œç±»ä¼¼ CAS æœºåˆ¶ï¼Œå³ç”¨æˆ·è‡ªå·±æ§åˆ¶ã€‚ç¼ºç‚¹ï¼šå¹¶å‘å¾ˆé«˜çš„æ—¶å€™ï¼Œå¤šäº†å¾ˆå¤šæ— ç”¨çš„é‡è¯•ï¼‰</p>\n</li>\n</ul>\n<h5 id=\"é”çš„ç²’åº¦ï¼ˆç²’åº¦ç»´åº¦ï¼‰\"><a href=\"#é”çš„ç²’åº¦ï¼ˆç²’åº¦ç»´åº¦ï¼‰\" class=\"headerlink\" title=\"é”çš„ç²’åº¦ï¼ˆç²’åº¦ç»´åº¦ï¼‰\"></a>é”çš„ç²’åº¦ï¼ˆç²’åº¦ç»´åº¦ï¼‰</h5><ul>\n<li>è¡¨é”</li>\n<li>é¡µé”ï¼ˆMysql BerkeleyDB å¼•æ“ï¼‰</li>\n<li>è¡Œé”ï¼ˆInnoDBï¼‰</li>\n<li>å…¨å‰§é” ï¼ˆé”çš„æ˜¯æ•´ä¸ª <code>database</code>ï¼‰å…¨åº“å¤‡ä»½çš„æ—¶å€™æ—¶å…¨å±€é”</li>\n</ul>\n<h5 id=\"é”çš„ç®—æ³•ï¼ˆç®—æ³•ç»´åº¦ï¼‰\"><a href=\"#é”çš„ç®—æ³•ï¼ˆç®—æ³•ç»´åº¦ï¼‰\" class=\"headerlink\" title=\"é”çš„ç®—æ³•ï¼ˆç®—æ³•ç»´åº¦ï¼‰\"></a>é”çš„ç®—æ³•ï¼ˆç®—æ³•ç»´åº¦ï¼‰</h5><ul>\n<li>Record Lockï¼ˆå•è¡Œè®°å½•ï¼‰</li>\n<li>Gap Lockï¼ˆé—´éš™é”ï¼Œé”å®šä¸€ä¸ªèŒƒå›´ï¼Œä½†ä¸åŒ…å«é”å®šè®°å½•ï¼‰</li>\n<li>Next-Key Lockï¼ˆRecord Lock + Gap Lockï¼Œé”å®šä¸€ä¸ªèŒƒå›´ï¼Œå¹¶ä¸”é”å®šè®°å½•æœ¬èº«ï¼Œ MySql é˜²æ­¢å¹»è¯»ï¼Œå°±æ˜¯ä½¿ç”¨æ­¤é”å®ç°ï¼‰</li>\n</ul>\n<h5 id=\"Record-Lock\"><a href=\"#Record-Lock\" class=\"headerlink\" title=\"Record Lock\"></a>Record Lock</h5><blockquote>\n<p><strong>å¯¹å•ä¸ªè®°å½•åŠ é”</strong>,è¡Œé”åªæœ‰åœ¨äº‹åŠ¡ç»“æŸçš„æ—¶å€™æ‰ä¼šé‡Šæ”¾ã€‚ä¹Ÿå°±æ—¶ä¸¤é˜¶æ®µåè®®å®Œæˆåã€‚</p>\n</blockquote>\n<figure class=\"highlight sql\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">## å¯¹id=3çš„è®°å½•åŠ Så‹Record Lock Sé”</span></span><br><span class=\"line\"><span class=\"keyword\">SELECT</span> * <span class=\"keyword\">FROM</span> <span class=\"string\">`usr_info`</span> <span class=\"keyword\">WHERE</span> <span class=\"keyword\">id</span> = <span class=\"number\">3</span> <span class=\"keyword\">LOCK</span> <span class=\"keyword\">IN</span> <span class=\"keyword\">SHARE</span> <span class=\"keyword\">MODE</span>;</span><br><span class=\"line\"><span class=\"comment\">## å¯¹id=3çš„è®°å½•åŠ Så‹Record Lock xé”</span></span><br><span class=\"line\"><span class=\"keyword\">SELECT</span> * <span class=\"keyword\">FROM</span> <span class=\"string\">`usr_info`</span> <span class=\"keyword\">WHERE</span> <span class=\"keyword\">id</span> = <span class=\"number\">3</span> <span class=\"keyword\">FOR</span> <span class=\"keyword\">UPDATE</span>;</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"Gap-Lock\"><a href=\"#Gap-Lock\" class=\"headerlink\" title=\"Gap Lock\"></a>Gap Lock</h5><blockquote>\n<p><strong>é”ä½è®°å½•å‰é¢çš„é—´éš™ï¼Œä¸å…è®¸æ’å…¥è®°å½•</strong></p>\n</blockquote>\n<figure class=\"highlight sql\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">##ä¸å…è®¸åˆ«çš„äº‹åŠ¡åœ¨id=3çš„è®°å½•å‰é¢çš„é—´éš™æ’å…¥æ–°è®°å½•ï¼Œå³idå€¼åœ¨(1, 3)è¿™ä¸ªåŒºé—´å†…çš„è®°å½•æ˜¯ä¸å…è®¸ç«‹å³æ’å…¥çš„ã€‚ç›´åˆ°åŠ é—´éš™é”çš„äº‹åŠ¡æäº¤åï¼Œidå€¼åœ¨(1, 3)è¿™ä¸ªåŒºé—´ä¸­çš„è®°å½•æ‰å¯ä»¥è¢«æäº¤ã€‚</span></span><br><span class=\"line\"><span class=\"keyword\">SELECT</span> * <span class=\"keyword\">FROM</span> <span class=\"string\">`usr_info`</span> <span class=\"keyword\">WHERE</span> <span class=\"keyword\">id</span> &lt; <span class=\"number\">3</span> <span class=\"keyword\">AND</span> <span class=\"keyword\">id</span> &gt; <span class=\"number\">1</span> <span class=\"keyword\">LOCK</span> <span class=\"keyword\">IN</span> <span class=\"keyword\">SHARE</span> <span class=\"keyword\">MODE</span>;</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"Next-Key-Lock\"><a href=\"#Next-Key-Lock\" class=\"headerlink\" title=\"Next-Key Lock\"></a>Next-Key Lock</h5><blockquote>\n<p><strong>åŒæ—¶é”ä½æ•°æ®å’Œæ•°æ®å‰é¢çš„é—´éš™ï¼Œå³æ•°æ®å’Œæ•°æ®å‰é¢çš„é—´éš™éƒ½ä¸å…è®¸æ’å…¥è®°å½•</strong></p>\n</blockquote>\n<figure class=\"highlight sql\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">-- å¯¹id=3çš„èšé›†ç´¢å¼•è®°å½•åŠ Så‹Record Lock</span></span><br><span class=\"line\"><span class=\"comment\">-- å¯¹id&gt;1çš„æ‰€æœ‰èšé›†ç´¢å¼•è®°å½•åŠ Så‹Next-key Lockï¼ˆåŒ…æ‹¬Supremumä¼ªè®°å½•ï¼‰</span></span><br><span class=\"line\"><span class=\"keyword\">SELECT</span> * <span class=\"keyword\">FROM</span> <span class=\"string\">`usr_info`</span> <span class=\"keyword\">WHERE</span> <span class=\"keyword\">id</span> &lt;= <span class=\"number\">3</span> <span class=\"keyword\">AND</span> <span class=\"keyword\">id</span> &gt; <span class=\"number\">1</span> <span class=\"keyword\">LOCK</span> <span class=\"keyword\">IN</span> <span class=\"keyword\">SHARE</span> <span class=\"keyword\">MODE</span>;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>æœªåŠ ç´¢å¼•çš„å­—æ®µ</li>\n</ul>\n<blockquote>\n<p>å­˜å‚¨å¼•æ“åªèƒ½ç»™è¡¨ä¸­æ‰€æœ‰çš„è®°å½•éƒ½åŠ ä¸Šé”ã€‚</p>\n</blockquote>\n<h5 id=\"ä¹è§‚é”ä¸æ‚²è§‚é”\"><a href=\"#ä¹è§‚é”ä¸æ‚²è§‚é”\" class=\"headerlink\" title=\"ä¹è§‚é”ä¸æ‚²è§‚é”\"></a>ä¹è§‚é”ä¸æ‚²è§‚é”</h5><blockquote>\n<p>æ•°æ®åº“é€šè¿‡é”æœºåˆ¶æ¥è§£å†³å¹¶å‘åœºæ™¯-å…±äº«é”ï¼ˆè¯»é”ï¼‰å’Œæ’ä»–é”ï¼ˆå†™é”ï¼‰ã€‚è¯»é”æ˜¯ä¸é˜»å¡çš„ï¼Œå¤šä¸ªå®¢æˆ·ç«¯å¯ä»¥åœ¨åŒä¸€æ—¶åˆ»è¯»å–åŒä¸€ä¸ªèµ„æºã€‚å†™é”æ˜¯æ’ä»–çš„ï¼Œå¹¶ä¸”ä¼šé˜»å¡å…¶ä»–çš„è¯»é”å’Œå†™é”ã€‚ç®€å•æä¸‹ä¹è§‚é”å’Œæ‚²è§‚é”ã€‚</p>\n</blockquote>\n<ul>\n<li><p><strong>æ‚²è§‚é”</strong>ï¼šå‡å®šä¼šå‘ç”Ÿå¹¶å‘å†²çªï¼Œå±è”½ä¸€åˆ‡å¯èƒ½è¿åæ•°æ®å®Œæ•´æ€§çš„æ“ä½œã€‚</p>\n<ul>\n<li><strong>è¡¨é”</strong>ï¼Œé”å®šæ•´å¼ è¡¨ï¼Œå¼€é”€æœ€å°ï¼Œä½†æ˜¯ä¼šåŠ å‰§é”ç«äº‰ã€‚</li>\n<li><strong>è¡Œé”</strong>ï¼Œé”å®šè¡Œçº§åˆ«ï¼Œå¼€é”€æœ€å¤§ï¼Œä½†æ˜¯å¯ä»¥æœ€å¤§ç¨‹åº¦çš„æ”¯æŒå¹¶å‘ã€‚</li>\n<li>å…±äº«é”ï¼ˆå¤šä¸ªäº‹ç‰©å…±äº«ï¼‰å…±äº«é”ä¹Ÿå«è¯»é”æˆ– S é”ã€‚</li>\n<li>æ’å®ƒé”ï¼ˆå•ä¸ªäº‹ç‰©å æœ‰ï¼‰æ’å®ƒé”ä¹Ÿç‹¬å é”ã€å†™é”æˆ– X é”</li>\n</ul>\n</li>\n<li><p><strong>ä¹è§‚é”</strong>ï¼šå‡è®¾ä¸ä¼šå‘ç”Ÿå¹¶å‘å†²çªï¼Œåªåœ¨æäº¤æ“ä½œæ—¶æ£€æŸ¥æ˜¯å¦è¿åæ•°æ®å®Œæ•´æ€§ã€‚</p>\n<ul>\n<li>ä¸è¿‡é€šè¿‡æ•°æ®åº“çš„ç‰ˆæœ¬æœºåˆ¶å®ç°ï¼Œé€šè¿‡ç‰ˆæœ¬å·å­—æ®µæˆ–è€…æ—¶é—´æˆ³å­—æ®µæ¥å®ç°ã€‚</li>\n</ul>\n</li>\n</ul>\n<h5 id=\"æ­»é”\"><a href=\"#æ­»é”\" class=\"headerlink\" title=\"æ­»é”\"></a>æ­»é”</h5><blockquote>\n<p>åœ¨å¹¶å‘ç³»ç»Ÿä¸­å‡ºç°ä¸åŒçº¿ç¨‹å¾ªç¯ä¾èµ–èµ„æºï¼Œæ¶‰åŠçš„çº¿ç¨‹éƒ½åœ¨ç­‰å¾…å…¶ä»–çº¿ç¨‹é‡Šæ”¾èµ„æºï¼Œå°±ä¼šå¯¼è‡´ç›¸å…³çº¿ç¨‹è¿›å…¥æ— é™ç­‰å¾…çš„çŠ¶æ€ï¼Œç®€ç§°æ­»é”ã€‚</p>\n</blockquote>\n<figure class=\"highlight sql\"><table><tr><td class=\"code\"><pre><span class=\"line\">ERROR 1213 (40001): Deadlock found when trying to get <span class=\"keyword\">lock</span>; try restarting transaction</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>è®¾ç½®è¶…æ—¶æ—¶é—´ï¼Œé˜²æ­¢çº¿ç¨‹äº‹åŠ¡ä¸€ç›´ç­‰å¾…ã€‚<code>innodb_lock_wait_timeout</code>è®¾ç½®è¶…æ—¶æ—¶é—´ï¼Œè¯¥å€¼é»˜è®¤çš„æ—¶é—´æ—¶<code>50s</code>ã€‚</li>\n<li>ä¸»åŠ¨å›æ»šç›¸å…³çº¿ç¨‹ä¸­æŸä¸ªäº‹ç‰©ï¼Œæ‰‹åŠ¨é‡Šæ”¾èµ„æºã€‚</li>\n</ul>\n<h4 id=\"InnoDBå¼•æ“çš„è¡Œé”çš„å®ç°æ–¹å¼\"><a href=\"#InnoDBå¼•æ“çš„è¡Œé”çš„å®ç°æ–¹å¼\" class=\"headerlink\" title=\"InnoDBå¼•æ“çš„è¡Œé”çš„å®ç°æ–¹å¼\"></a>InnoDBå¼•æ“çš„è¡Œé”çš„å®ç°æ–¹å¼</h4><blockquote>\n<p>InnoDBæ˜¯åŸºäºç´¢å¼•æ¥å®Œæˆè¡Œé”</p>\n</blockquote>\n<figure class=\"highlight sql\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">-- ä¾‹:  --</span></span><br><span class=\"line\"><span class=\"keyword\">select</span> * <span class=\"keyword\">from</span> tab_with_index <span class=\"keyword\">where</span> <span class=\"keyword\">id</span> = <span class=\"number\">1</span> <span class=\"keyword\">for</span> <span class=\"keyword\">update</span>;</span><br><span class=\"line\"><span class=\"comment\">-- for update å¯ä»¥æ ¹æ®æ¡ä»¶æ¥å®Œæˆè¡Œé”é”å®š,å¹¶ä¸” id æ˜¯æœ‰ç´¢å¼•é”®çš„åˆ—-- </span></span><br><span class=\"line\"><span class=\"comment\">-- å¦‚æœ id ä¸æ˜¯ç´¢å¼•é”®é‚£ä¹ˆInnoDBå°†å®Œæˆè¡¨é”,å¹¶å‘å°†æ— ä»è°ˆèµ·--</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"InnDbæ¶æ„\"><a href=\"#InnDbæ¶æ„\" class=\"headerlink\" title=\"InnDbæ¶æ„\"></a>InnDbæ¶æ„</h3><ul>\n<li>è¿™æ˜¯å®˜æ–¹æ–‡æ¡£ä¸­çš„æ¶æ„å›¾</li>\n</ul>\n<p><img src=\"https://z201.oss-cn-shanghai.aliyuncs.com/JavaNote/mysql/innodb-architecture.png\" alt=\"innodb-architecture\"></p>\n<h4 id=\"Buffer-Pool\"><a href=\"#Buffer-Pool\" class=\"headerlink\" title=\"Buffer Pool\"></a>Buffer Pool</h4><blockquote>\n<p>åœ¨ä½¿ç”¨InnoDBçš„æ—¶å€™ï¼Œç´¢å¼•éƒ½æ˜¯ä»¥é¡µçš„å½¢å¼å­˜åœ¨åœ¨<code>è¡¨ç©ºé—´</code>ä¸­çš„ï¼Œæœ¬è´¨ä¸Šæ˜¯å­˜å‚¨åœ¨ç¡¬ç›˜ä¸Šçš„ã€‚è®¾è®¡<code>InnoDB</code>çš„å¤§å”ä¸ºäº†ç¼“å­˜ç£ç›˜ä¸­çš„é¡µï¼Œåœ¨<code>MySQL</code>æœåŠ¡å™¨å¯åŠ¨çš„æ—¶å€™å°±å‘æ“ä½œç³»ç»Ÿç”³è¯·äº†ä¸€ç‰‡è¿ç»­çš„å†…å­˜ï¼Œä»–ä»¬ç»™è¿™ç‰‡å†…å­˜èµ·äº†ä¸ªåï¼Œå«åš<code>Buffer Pool</code>ï¼ˆä¸­æ–‡åæ˜¯<code>ç¼“å†²æ± </code>ï¼‰</p>\n</blockquote>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">[server]</span><br><span class=\"line\">innodb_buffer_pool_size &#x3D; 268435456</span><br><span class=\"line\">-- 268435456çš„å•ä½æ˜¯å­—èŠ‚ï¼Œä¹Ÿå°±æ˜¯æˆ‘æŒ‡å®šBuffer Poolçš„å¤§å°ä¸º256Mã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒBuffer Poolä¹Ÿä¸èƒ½å¤ªå°ã€‚--</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"Mysql-log\"><a href=\"#Mysql-log\" class=\"headerlink\" title=\"Mysql log\"></a>Mysql log</h4><blockquote>\n<p>æ—¥å¿—æ˜¯mysqlä¸­éå¸¸é‡è¦çš„ç»„æˆéƒ¨åˆ†ï¼Œè®°å½•ç€æ•°æ®åº“è¿è¡ŒæœŸé—´çš„å„ç§çŠ¶æ€ä¿¡æ¯ã€‚Mysqlçš„æ—¥å¿—ä¸»è¦åŒ…æ‹¬<code>é”™è¯¯æ—¥å¿—</code>ã€<code>æŸ¥è¯¢æ—¥å¿—</code>ã€<code>æ…¢æŸ¥è¯¢æ—¥å¿—</code>ã€<code>äº‹ç‰©æ—¥å¿—</code>ã€äºŒè¿›åˆ¶æ—¥å¿—å¤§ç±»ã€‚</p>\n</blockquote>\n<h5 id=\"é”™è¯¯æ—¥å¿—-Error-Log\"><a href=\"#é”™è¯¯æ—¥å¿—-Error-Log\" class=\"headerlink\" title=\"é”™è¯¯æ—¥å¿— Error Log\"></a>é”™è¯¯æ—¥å¿— Error Log</h5><ul>\n<li>è®°å½•å‡ºé”™ä¿¡æ¯ï¼Œä¹Ÿè®°å½•ä¸€äº›è­¦å‘Šä¿¡æ¯æˆ–è€…æ­£ç¡®çš„ä¿¡æ¯ã€‚é»˜è®¤å¼€å¯ã€‚</li>\n<li><code> show vaiables like &#39;%log_err%&#39;</code></li>\n</ul>\n<h5 id=\"æŸ¥è¯¢æ—¥å¿—-General-query-log\"><a href=\"#æŸ¥è¯¢æ—¥å¿—-General-query-log\" class=\"headerlink\" title=\"æŸ¥è¯¢æ—¥å¿— General query log\"></a>æŸ¥è¯¢æ—¥å¿— General query log</h5><ul>\n<li>è®°å½•æ‰€æœ‰å¯¹æ•°æ®åº“è¯·æ±‚çš„ä¿¡æ¯ï¼Œä¸è®ºè¿™äº›è¯·æ±‚æ˜¯å¦å¾—åˆ°äº†æ­£ç¡®çš„æ‰§è¡Œã€‚</li>\n<li><code> show vaiables like &#39;%general%&#39;</code></li>\n</ul>\n<h5 id=\"æ…¢æŸ¥è¯¢æ—¥å¿—-Show-query-log\"><a href=\"#æ…¢æŸ¥è¯¢æ—¥å¿—-Show-query-log\" class=\"headerlink\" title=\"æ…¢æŸ¥è¯¢æ—¥å¿— Show query log\"></a>æ…¢æŸ¥è¯¢æ—¥å¿— Show query log</h5><ul>\n<li>è®¾ç½®ä¸€ä¸ªé˜ˆå€¼ï¼Œå°†è¿è¡Œæ—¶é—´è¶…è¿‡è¯¥å€¼çš„æ‰€æœ‰SQLè¯­å¥éƒ½è®°å½•åˆ°æ…¢æŸ¥è¯¢çš„æ—¥å¿—æ–‡ä»¶ä¸­ã€‚</li>\n<li><code>show variables  like &#39;%slow_query_log%&#39;</code> </li>\n<li><code>show variables  like &#39;%slow_query_time%&#39;</code> æ…¢æŸ¥è¯¢æ—¥å¿—è®°å½•æ‰§è¡Œæ—¶é—´é˜€å€¼ </li>\n</ul>\n<h5 id=\"äºŒè¿›åˆ¶æ—¥å¿—-binary-log\"><a href=\"#äºŒè¿›åˆ¶æ—¥å¿—-binary-log\" class=\"headerlink\" title=\"äºŒè¿›åˆ¶æ—¥å¿— binary log\"></a>äºŒè¿›åˆ¶æ—¥å¿— binary log</h5><ul>\n<li>è®°å½•å¯¹æ•°æ®åº“æ‰§è¡Œæ›´æ”¹çš„æ‰€æœ‰æ“ä½œã€‚ä¸»è¦æ•°æ®åº“çš„æ¢å¤ã€ä¸»ä»æ•°æ®åº“å¤åˆ¶åŒæ­¥ã€‚</li>\n<li><code> show vaiables like &#39;%log_bin%&#39;</code></li>\n</ul>\n<h5 id=\"ä¸­ç»§æ—¥å¿—\"><a href=\"#ä¸­ç»§æ—¥å¿—\" class=\"headerlink\" title=\"ä¸­ç»§æ—¥å¿—\"></a>ä¸­ç»§æ—¥å¿—</h5><ul>\n<li>ä¸­ç»§æ—¥å¿—ä¹Ÿæ˜¯äºŒè¿›åˆ¶æ—¥å¿—ï¼Œç”¨æ¥ç»™slave åº“æ¢å¤</li>\n</ul>\n<h5 id=\"äº‹ç‰©æ—¥å¿—\"><a href=\"#äº‹ç‰©æ—¥å¿—\" class=\"headerlink\" title=\"äº‹ç‰©æ—¥å¿—\"></a>äº‹ç‰©æ—¥å¿—</h5><ul>\n<li><p>é‡åšæ—¥å¿—redoå’Œå›æ»šæ—¥å¿—undo</p>\n</li>\n<li><p>äº‹åŠ¡æ—¥å¿—æ˜¯é€šè¿‡redoå’Œinnodbçš„å­˜å‚¨å¼•æ“æ—¥å¿—ç¼“å†²ï¼ˆInnodb log bufferï¼‰æ¥å®ç°çš„ï¼Œå½“å¼€å§‹ä¸€ä¸ªäº‹åŠ¡çš„æ—¶å€™ï¼Œä¼šè®°å½•è¯¥äº‹åŠ¡çš„lsn(log sequence number)å·; å½“äº‹åŠ¡æ‰§è¡Œæ—¶ï¼Œä¼šå¾€InnoDBå­˜å‚¨å¼•æ“çš„æ—¥å¿—çš„æ—¥å¿—ç¼“å­˜é‡Œé¢æ’å…¥äº‹åŠ¡æ—¥å¿—ï¼›å½“äº‹åŠ¡æäº¤æ—¶ï¼Œå¿…é¡»å°†å­˜å‚¨å¼•æ“çš„æ—¥å¿—ç¼“å†²å†™å…¥ç£ç›˜ï¼ˆé€šè¿‡innodb_flush_log_at_trx_commitæ¥æ§åˆ¶ï¼‰ï¼Œä¹Ÿå°±æ˜¯å†™æ•°æ®å‰ï¼Œéœ€è¦å…ˆå†™æ—¥å¿—ã€‚è¿™ç§æ–¹å¼ç§°ä¸ºâ€œé¢„å†™æ—¥å¿—æ–¹å¼â€ã€‚</p>\n</li>\n</ul>\n<h4 id=\"binlog\"><a href=\"#binlog\" class=\"headerlink\" title=\"binlog\"></a>binlog</h4><p><code>binlog</code>ç”¨äºè®°å½•æ•°æ®åº“æ‰§è¡Œçš„å†™å…¥æ€§æ“ä½œï¼ˆä¸åŒ…æ‹¬æŸ¥è¯¢ï¼‰çš„ä¿¡æ¯ã€ä»¥äºŒè¿›åˆ¶çš„ä¿¡æ¯ä¿ä¿å­˜åœ¨ç£ç›˜ä¸­ï¼Œ<code>binlog</code>æ˜¯Mysqlçš„é€»è¾‘æ—¥å¿—ï¼Œåˆ<code>server</code>å±‚è¿›è¡Œè®°å½•ã€‚ä½¿ç”¨ä»»ä½•çš„å­˜å‚¨å¼•æ“éƒ½ä¼šè¿›è¡Œè®°å½•ã€‚<code>binlog</code>æ˜¯é€šè¿‡è¿½åŠ çš„æ–¹å¼å†™å…¥ï¼Œå½“æ–‡ä»¶è¾¾åˆ°ä¸€å®šå¤§å°å€¼ä»¥åï¼Œä¼šç”Ÿæˆå…¨æ–°æ–‡ä»¶æ¥ä¿å­˜æ—¥å¿—ã€‚</p>\n<ul>\n<li><p>é€»è¾‘æ—¥å¿—ï¼šè®°å½•sqlè¯­å¥çš„æ—¥å¿—ã€‚</p>\n</li>\n<li><p>ç‰©ç†æ—¥å¿—ï¼š<code>mysql innodb</code>æ•°æ®æ˜¯ä¿å­˜åœ¨æ•°æ®é¡µä¸­ï¼Œç‰©ç†è®°å½•çš„å°±æ˜¯æ•°æ®é¡µå˜æ›´ã€‚</p>\n</li>\n<li><p>ä¸»ä»å¤åˆ¶ï¼šMasterç«¯å¼€å¯<code>binlog</code>ï¼Œç„¶åå°†<code>binlog</code>å‘é€åˆ°<code>Slave</code>ç«¯ï¼Œ<code>Slave</code>ç«¯é€šè¿‡é‡æ”¾<code>binlog</code>è¾¾åˆ°æ•°æ®ä¸€è‡´ã€‚</p>\n</li>\n<li><p>æ•°æ®æ¢å¤ï¼šé€šè¿‡<code>mysqlbinlog</code>å·¥å…·æ¥æ¢å¤æ•°æ®åº“ã€‚</p>\n</li>\n</ul>\n<h5 id=\"æ—¥å¿—æ ¼å¼\"><a href=\"#æ—¥å¿—æ ¼å¼\" class=\"headerlink\" title=\"æ—¥å¿—æ ¼å¼\"></a>æ—¥å¿—æ ¼å¼</h5><blockquote>\n<p>åœ¨ <code>MySQL 5.7.7</code> ä¹‹å‰ï¼Œé»˜è®¤çš„æ ¼å¼æ˜¯ <code>STATEMENT</code> ï¼Œ <code>MySQL 5.7.7</code> ä¹‹åï¼Œé»˜è®¤å€¼æ˜¯ <code>ROW</code>ã€‚æ—¥å¿—æ ¼å¼é€šè¿‡ <code>binlog-format</code> æŒ‡å®šã€‚</p>\n</blockquote>\n<ul>\n<li><code>STATMENT</code>ï¼šåŸºäº<code>SQL</code> è¯­å¥çš„å¤åˆ¶( <code>statement-based replication, SBR</code> )ï¼Œæ¯ä¸€æ¡ä¼šä¿®æ”¹æ•°æ®çš„sqlè¯­å¥ä¼šè®°å½•åˆ°<code>binlog</code> ä¸­  ã€‚</li>\n<li><ul>\n<li>ä¼˜ç‚¹ï¼šä¸éœ€è¦è®°å½•æ¯ä¸€è¡Œçš„å˜åŒ–ï¼Œå‡å°‘äº† binlog æ—¥å¿—é‡ï¼ŒèŠ‚çº¦äº† IO  , ä»è€Œæé«˜äº†æ€§èƒ½ï¼›</li>\n<li>ç¼ºç‚¹ï¼šåœ¨æŸäº›æƒ…å†µä¸‹ä¼šå¯¼è‡´ä¸»ä»æ•°æ®ä¸ä¸€è‡´ï¼Œæ¯”å¦‚æ‰§è¡Œsysdate() ã€  slepp()  ç­‰ ã€‚</li>\n</ul>\n</li>\n<li><code>ROW</code>ï¼šåŸºäºè¡Œçš„å¤åˆ¶(<code>row-based replication, RBR</code> )ï¼Œä¸è®°å½•æ¯æ¡sqlè¯­å¥çš„ä¸Šä¸‹æ–‡ä¿¡æ¯ï¼Œä»…éœ€è®°å½•å“ªæ¡æ•°æ®è¢«ä¿®æ”¹äº† ã€‚</li>\n<li><ul>\n<li>ä¼˜ç‚¹ï¼šä¸ä¼šå‡ºç°æŸäº›ç‰¹å®šæƒ…å†µä¸‹çš„å­˜å‚¨è¿‡ç¨‹ã€æˆ–functionã€æˆ–triggerçš„è°ƒç”¨å’Œè§¦å‘æ— æ³•è¢«æ­£ç¡®å¤åˆ¶çš„é—®é¢˜ ï¼›</li>\n<li>ç¼ºç‚¹ï¼šä¼šäº§ç”Ÿå¤§é‡çš„æ—¥å¿—ï¼Œå°¤å…¶æ˜¯<code>alter table</code> çš„æ—¶å€™ä¼šè®©æ—¥å¿—æš´æ¶¨</li>\n</ul>\n</li>\n<li><code>MIXED</code>ï¼šåŸºäº<code>STATMENT</code> å’Œ <code>ROW</code> ä¸¤ç§æ¨¡å¼çš„æ··åˆå¤åˆ¶(<code>mixed-based replication, MBR</code> )ï¼Œä¸€èˆ¬çš„å¤åˆ¶ä½¿ç”¨<code>STATEMENT</code> æ¨¡å¼ä¿å­˜ <code>binlog</code> ï¼Œå¯¹äº <code>STATEMENT</code> æ¨¡å¼æ— æ³•å¤åˆ¶çš„æ“ä½œä½¿ç”¨ <code>ROW</code> æ¨¡å¼ä¿å­˜ <code>binlog</code></li>\n</ul>\n<h6 id=\"statement\"><a href=\"#statement\" class=\"headerlink\" title=\"statement\"></a>statement</h6><blockquote>\n<p>æ¯ä¸€æ¡ä¼šä¿®æ”¹æ•°æ®çš„sqléƒ½ä¼šè®°å½•åœ¨binlogä¸­ã€‚</p>\n</blockquote>\n<ul>\n<li><p><strong>ä¼˜ç‚¹</strong>ï¼šä¸éœ€è¦è®°å½•æ¯ä¸€è¡Œçš„å˜åŒ–ï¼Œå‡å°‘äº†binlogæ—¥å¿—é‡ï¼ŒèŠ‚çº¦äº†IOï¼Œæé«˜æ€§èƒ½ã€‚(ç›¸æ¯”rowèƒ½èŠ‚çº¦å¤šå°‘æ€§èƒ½ ä¸æ—¥å¿—é‡ï¼Œè¿™ä¸ªå–å†³äºåº”ç”¨çš„SQLæƒ…å†µï¼Œæ­£å¸¸åŒä¸€æ¡è®°å½•ä¿®æ”¹æˆ–è€…æ’å…¥rowæ ¼å¼æ‰€äº§ç”Ÿçš„æ—¥å¿—é‡è¿˜å°äºStatementäº§ç”Ÿçš„æ—¥å¿—é‡ï¼Œä½†æ˜¯è€ƒè™‘åˆ°å¦‚æœå¸¦æ¡ ä»¶çš„updateæ“ä½œï¼Œä»¥åŠæ•´è¡¨åˆ é™¤ï¼Œalterè¡¨ç­‰æ“ä½œï¼ŒROWæ ¼å¼ä¼šäº§ç”Ÿå¤§é‡æ—¥å¿—ï¼Œå› æ­¤åœ¨è€ƒè™‘æ˜¯å¦ä½¿ç”¨ROWæ ¼å¼æ—¥å¿—æ—¶åº”è¯¥è·Ÿæ®åº”ç”¨çš„å®é™…æƒ…å†µï¼Œå…¶æ‰€ äº§ç”Ÿçš„æ—¥å¿—é‡ä¼šå¢åŠ å¤šå°‘ï¼Œä»¥åŠå¸¦æ¥çš„IOæ€§èƒ½é—®é¢˜ã€‚)</p>\n</li>\n<li><p><strong>ç¼ºç‚¹</strong>ï¼šç”±äºè®°å½•çš„åªæ˜¯æ‰§è¡Œè¯­å¥ï¼Œä¸ºäº†è¿™äº›è¯­å¥èƒ½åœ¨slaveä¸Šæ­£ç¡®è¿è¡Œï¼Œå› æ­¤è¿˜å¿…é¡»è®°å½•æ¯æ¡è¯­å¥åœ¨æ‰§è¡Œçš„æ—¶å€™çš„ ä¸€äº›ç›¸å…³ä¿¡æ¯ï¼Œä»¥ä¿è¯æ‰€æœ‰è¯­å¥èƒ½åœ¨slaveå¾—åˆ°å’Œåœ¨masterç«¯æ‰§è¡Œæ—¶å€™ç›¸åŒ çš„ç»“æœã€‚å¦å¤–mysql çš„å¤åˆ¶,åƒä¸€äº›ç‰¹å®šå‡½æ•°åŠŸèƒ½ï¼Œslaveå¯ä¸masterä¸Šè¦ä¿æŒä¸€è‡´ä¼šæœ‰å¾ˆå¤šç›¸å…³é—®é¢˜(å¦‚sleep()å‡½æ•°ï¼Œ last_insert_id()ï¼Œä»¥åŠuser-defined functions(udf)ä¼šå‡ºç°é—®é¢˜)ã€‚</p>\n</li>\n</ul>\n<p><strong>ä½¿ç”¨ä»¥ä¸‹å‡½æ•°çš„è¯­å¥ä¹Ÿæ— æ³•è¢«å¤åˆ¶</strong>ï¼š</p>\n<ul>\n<li>LOAD_FILE()</li>\n<li>UUID()</li>\n<li>USER()</li>\n<li>FOUND_ROWS()</li>\n<li>SYSDATE() (é™¤éå¯åŠ¨æ—¶å¯ç”¨äº† â€“sysdate-is-now é€‰é¡¹)</li>\n</ul>\n<p>åŒæ—¶åœ¨INSERT â€¦SELECT ä¼šäº§ç”Ÿæ¯” RBR æ›´å¤šçš„è¡Œçº§é”</p>\n<h6 id=\"row\"><a href=\"#row\" class=\"headerlink\" title=\"row\"></a>row</h6><blockquote>\n<p>ä¸è®°å½•sqlè¯­å¥ä¸Šä¸‹æ–‡ç›¸å…³ä¿¡æ¯ï¼Œä»…ä¿å­˜å“ªæ¡è®°å½•è¢«ä¿®æ”¹ã€‚</p>\n</blockquote>\n<ul>\n<li><strong>ä¼˜ç‚¹</strong>ï¼š binlogä¸­å¯ä»¥ä¸è®°å½•æ‰§è¡Œçš„sqlè¯­å¥çš„ä¸Šä¸‹æ–‡ç›¸å…³çš„ä¿¡æ¯ï¼Œä»…éœ€è¦è®°å½•é‚£ä¸€æ¡è®°å½•è¢«ä¿®æ”¹æˆä»€ä¹ˆäº†ã€‚æ‰€ä»¥rowlevelçš„æ—¥å¿—å†…å®¹ä¼šéå¸¸æ¸…æ¥šçš„è®°å½•ä¸‹ æ¯ä¸€è¡Œæ•°æ®ä¿®æ”¹çš„ç»†èŠ‚ã€‚è€Œä¸”ä¸ä¼šå‡ºç°æŸäº›ç‰¹å®šæƒ…å†µä¸‹çš„å­˜å‚¨è¿‡ç¨‹ï¼Œæˆ–functionï¼Œä»¥åŠtriggerçš„è°ƒç”¨å’Œè§¦å‘æ— æ³•è¢«æ­£ç¡®å¤åˆ¶çš„é—®é¢˜</li>\n<li><strong>ç¼ºç‚¹</strong>:æ‰€æœ‰çš„æ‰§è¡Œçš„è¯­å¥å½“è®°å½•åˆ°æ—¥å¿—ä¸­çš„æ—¶å€™ï¼Œéƒ½å°†ä»¥æ¯è¡Œè®°å½•çš„ä¿®æ”¹æ¥è®°å½•ï¼Œè¿™æ ·å¯èƒ½ä¼šäº§ç”Ÿå¤§é‡çš„æ—¥å¿—å†…å®¹,æ¯” å¦‚ä¸€æ¡updateè¯­å¥ï¼Œä¿®æ”¹å¤šæ¡è®°å½•ï¼Œåˆ™binlogä¸­æ¯ä¸€æ¡ä¿®æ”¹éƒ½ä¼šæœ‰è®°å½•ï¼Œè¿™æ ·é€ æˆbinlogæ—¥å¿—é‡ä¼šå¾ˆå¤§ï¼Œç‰¹åˆ«æ˜¯å½“æ‰§è¡Œalter tableä¹‹ç±»çš„è¯­å¥çš„æ—¶å€™ï¼Œç”±äºè¡¨ç»“æ„ä¿®æ”¹ï¼Œæ¯æ¡è®°å½•éƒ½å‘ç”Ÿæ”¹å˜ï¼Œé‚£ä¹ˆè¯¥è¡¨æ¯ä¸€æ¡è®°å½•éƒ½ä¼šè®°å½•åˆ°æ—¥å¿—ä¸­ã€‚</li>\n</ul>\n<h6 id=\"mixedlevel\"><a href=\"#mixedlevel\" class=\"headerlink\" title=\"mixedlevel\"></a>mixedlevel</h6><ul>\n<li>Mixedæ˜¯ä»¥ä¸Šä¸¤ç§levelçš„æ··åˆä½¿ç”¨ï¼Œä¸€èˆ¬çš„è¯­å¥ä¿®æ”¹ä½¿ç”¨statmentæ ¼å¼ä¿å­˜binlogï¼Œå¦‚ä¸€äº›å‡½æ•°ï¼Œstatementæ— æ³•å®Œæˆä¸»ä»å¤åˆ¶çš„æ“ä½œï¼Œåˆ™ é‡‡ç”¨rowæ ¼å¼ä¿å­˜binlog,MySQLä¼šæ ¹æ®æ‰§è¡Œçš„æ¯ä¸€æ¡å…·ä½“çš„sqlè¯­å¥æ¥åŒºåˆ†å¯¹å¾…è®°å½•çš„æ—¥å¿—å½¢å¼ï¼Œä¹Ÿå°±æ˜¯åœ¨Statementå’ŒRowä¹‹é—´é€‰æ‹© ä¸€ç§.æ–°ç‰ˆæœ¬çš„MySQLä¸­é˜Ÿrow levelæ¨¡å¼ä¹Ÿè¢«åšäº†ä¼˜åŒ–ï¼Œå¹¶ä¸æ˜¯æ‰€æœ‰çš„ä¿®æ”¹éƒ½ä¼šä»¥row levelæ¥è®°å½•ï¼Œåƒé‡åˆ°è¡¨ç»“æ„å˜æ›´çš„æ—¶å€™å°±ä¼šä»¥statementæ¨¡å¼æ¥è®°å½•ã€‚è‡³äºupdateæˆ–è€…deleteç­‰ä¿®æ”¹æ•°æ®çš„è¯­å¥ï¼Œè¿˜æ˜¯ä¼šè®°å½•æ‰€æœ‰è¡Œçš„å˜æ›´ã€‚</li>\n</ul>\n<h5 id=\"2PCä¸¤é˜¶æ®µæäº¤\"><a href=\"#2PCä¸¤é˜¶æ®µæäº¤\" class=\"headerlink\" title=\"2PCä¸¤é˜¶æ®µæäº¤\"></a>2PCä¸¤é˜¶æ®µæäº¤</h5><blockquote>\n<p>mysqlä¸­åœ¨serverå±‚çº§åˆ«æœ‰ä¸ªbinlogæ—¥å¿—ï¼Œå½’æ¡£æ—¥å¿—ï¼Œç”¨äºå¤‡ä»½ï¼Œä¸»ä»åŒæ­¥å¤åˆ¶ï¼Œå¦‚æœé‡‡ç”¨ä¸€ä¸»å¤šä»æ¶æ„ï¼Œä¸»å¤‡åˆ‡æ¢ï¼Œé‚£å°±å¿…é¡»ç”¨åˆ°binlogè¿›è¡Œä¸»ä»åŒæ­¥ã€‚</p>\n</blockquote>\n<ul>\n<li>äº‹åŠ¡æäº¤å°±å¿…é¡»ä¿è¯redologä¸binlogçš„ä¸€è‡´æ€§ï¼Œä¸€èˆ¬æƒ…å†µæ²¡æœ‰å¼€å¯binlogæ—¥å¿—ï¼Œäº‹åŠ¡æäº¤ä¸ä¼šä¸¤é˜¶æ®µæäº¤ï¼Œè‹¥éœ€è¦ä¸»ä»åŒæ­¥å°±å¿…é¡»å¼€å¯binlogä½¿ç”¨ä¸¤é˜¶æ®µæäº¤ä¿è¯æ•°æ®ä¸€è‡´æ€§ã€‚</li>\n<li><strong>Prepare é˜¶æ®µ</strong>ï¼šInnoDB å°†å›æ»šæ®µundologè®¾ç½®ä¸º prepare çŠ¶æ€ï¼›å°† redolog å†™æ–‡ä»¶å¹¶åˆ·ç›˜ï¼›å…ˆå†™redologï¼Œäº‹åŠ¡è¿›å…¥prepareçŠ¶æ€ï¼‰</li>\n<li><strong>Commit é˜¶æ®µ</strong>ï¼šBinlog å†™å…¥æ–‡ä»¶ï¼›binlog åˆ·ç›˜ï¼›InnoDB commitï¼›</li>\n</ul>\n<h5 id=\"åˆ·ç›˜æœºåˆ¶\"><a href=\"#åˆ·ç›˜æœºåˆ¶\" class=\"headerlink\" title=\"åˆ·ç›˜æœºåˆ¶\"></a>åˆ·ç›˜æœºåˆ¶</h5><blockquote>\n<p><code>Innodbä¸‹åªæœ‰åœ¨äº‹ç‰©æäº¤çš„æƒ…å†µä¸‹æ‰ä¼šè®°å½•binlog</code>ï¼Œæ­¤æ—¶è®°å½•è¿˜åœ¨å†…å­˜ä¸­ã€‚mysqlé€šè¿‡<code>sync_binlog</code>å‚æ•°æ§åˆ¶<code>binlog</code>åˆ·ç›˜æ—¶æœºã€‚å–å€¼èŒƒå›´0-n</p>\n</blockquote>\n<ul>\n<li>0ï¼šä¸å»å¼ºåˆ¶è¦æ±‚ï¼Œç”±ç³»ç»Ÿè‡ªè¡Œåˆ¤æ–­ä½•æ—¶å†™å…¥ç£ç›˜ï¼›</li>\n<li>1ï¼šæ¯æ¬¡ <code>commit</code> çš„æ—¶å€™éƒ½è¦å°† <code>binlog</code> å†™å…¥ç£ç›˜ï¼›</li>\n<li>Nï¼šæ¯Nä¸ªäº‹åŠ¡ï¼Œæ‰ä¼šå°† <code>binlog</code> å†™å…¥ç£ç›˜ã€‚</li>\n</ul>\n<h4 id=\"redo-Log\"><a href=\"#redo-Log\" class=\"headerlink\" title=\"redo Log\"></a>redo Log</h4><blockquote>\n<p>äº‹åŠ¡çš„å››å¤§ç‰¹æ€§é‡Œé¢æœ‰ä¸€ä¸ªæ˜¯ <strong>æŒä¹…æ€§</strong> ï¼Œå…·ä½“æ¥è¯´å°±æ˜¯<strong>åªè¦äº‹åŠ¡æäº¤æˆåŠŸï¼Œé‚£ä¹ˆå¯¹æ•°æ®åº“åšçš„ä¿®æ”¹å°±è¢«æ°¸ä¹…ä¿å­˜ä¸‹æ¥äº†ï¼Œä¸å¯èƒ½å› ä¸ºä»»ä½•åŸå› å†å›åˆ°åŸæ¥çš„çŠ¶æ€</strong> ã€‚</p>\n</blockquote>\n<h5 id=\"ä¿æŒä¸€è‡´æ€§\"><a href=\"#ä¿æŒä¸€è‡´æ€§\" class=\"headerlink\" title=\"ä¿æŒä¸€è‡´æ€§\"></a>ä¿æŒä¸€è‡´æ€§</h5><blockquote>\n<p>æœ€ç®€å•çš„åšæ³•æ˜¯åœ¨æ¯æ¬¡äº‹åŠ¡æäº¤çš„æ—¶å€™ï¼Œå°†è¯¥äº‹åŠ¡æ¶‰åŠä¿®æ”¹çš„æ•°æ®é¡µå…¨éƒ¨åˆ·æ–°åˆ°ç£ç›˜ä¸­ã€‚ä½†æ˜¯è¿™ä¹ˆåšä¼šæœ‰ä¸¥é‡çš„æ€§èƒ½é—®é¢˜ï¼Œ<code>redo log</code> åŒ…å«ä¸¤ä¸ªéƒ¨åˆ†ï¼Œä¸€ä¸ªæ˜¯å†…å­˜ä¸­çš„æ—¥å¿—ç¼“å†² <code>redo log buffer</code> , å¦ä¸€ä¸ªæ˜¯ç£ç›˜ä¸Šçš„æ—¥å¿—æ–‡ä»¶<code>redo logfile</code> </p>\n</blockquote>\n<ul>\n<li><p><code>Innodb</code> æ˜¯ä»¥ <code>é¡µ</code> ä¸ºå•ä½è¿›è¡Œç£ç›˜äº¤äº’çš„ï¼Œè€Œä¸€ä¸ªäº‹åŠ¡å¾ˆå¯èƒ½åªä¿®æ”¹ä¸€ä¸ªæ•°æ®é¡µé‡Œé¢çš„å‡ ä¸ªå­—èŠ‚ï¼Œè¿™ä¸ªæ—¶å€™å°†å®Œæ•´çš„æ•°æ®é¡µåˆ·åˆ°ç£ç›˜çš„è¯ï¼Œå¤ªæ¶ˆè€—èµ„æºäº†ã€‚</p>\n</li>\n<li><p>ä¸€ä¸ªäº‹åŠ¡å¯èƒ½æ¶‰åŠä¿®æ”¹å¤šä¸ªæ•°æ®é¡µï¼Œå¹¶ä¸”è¿™äº›æ•°æ®é¡µåœ¨ç‰©ç†ä¸Šå¹¶ä¸è¿ç»­ï¼Œä½¿ç”¨éšæœºIOå†™å…¥æ€§èƒ½å¤ªå·®ï¼</p>\n<ul>\n<li>mysql æ¯æ‰§è¡Œä¸€æ¡<code>DML</code>è¯­å¥ï¼Œå…ˆå°†è®°å½•å†™å…¥<code>redo log buffer</code>,åç»­æŸä¸ªæ—¶é—´ç‚¹å†ä¸€æ¬¡æ€§å°†å¤šä¸ªæ“ä½œå†™åˆ° <code>redo log file</code>ã€‚è¿™ç§å…ˆå†™æ—¥å¿—ï¼Œå†å†™ç£ç›˜çš„æŠ€æœ¯å°±æ˜¯<code>Mysql</code>é‡Œç»å¸¸è¯´åˆ°çš„<code>WAL (write-ahead Logging)</code>æŠ€æœ¯ã€‚ <strong>å…·ä½“æ¥è¯´å°±æ˜¯åªè®°å½•äº‹åŠ¡å¯¹æ•°æ®é¡µåšäº†å“ªäº›ä¿®æ”¹</strong>ï¼Œè¿™æ ·å°±èƒ½å®Œç¾åœ°è§£å†³æ€§èƒ½é—®é¢˜äº†(ç›¸å¯¹è€Œè¨€æ–‡ä»¶æ›´å°å¹¶ä¸”æ˜¯é¡ºåºIO)ã€‚</li>\n</ul>\n</li>\n<li><p>åœ¨è®¡ç®—æœºä¸­ï¼Œç”¨æˆ·çš„ç©ºé—´<code>user space</code>ä¸‹çš„ç¼“å†²åŒºä¸€èˆ¬æƒ…å†µä¸‹æ˜¯ä¸èƒ½ç›´æ¥å†™å…¥ç£ç›˜ï¼Œä¸­é—´éœ€è¦ç»è¿‡ç³»ç»Ÿå†…æ ¸ç©ºé—´<code> kerne space</code>ç¼“å†²åŒº<code>Os Buffer</code>ï¼Œå› æ­¤<code>redo log buffer</code>å†™å…¥<code>redo logfile</code>å®é™…ä¸Šæ˜¯å†™å…¥<code>Os Buffer</code>ï¼Œç„¶åå†é€šè¿‡ç³»ç»Ÿè°ƒç”¨<code>fsunc()</code>å°†æ•°æ®åˆ·å…¥<code>redo log file</code></p>\n</li>\n</ul>\n<h5 id=\"åˆ·ç›˜æœºåˆ¶-1\"><a href=\"#åˆ·ç›˜æœºåˆ¶-1\" class=\"headerlink\" title=\"åˆ·ç›˜æœºåˆ¶\"></a>åˆ·ç›˜æœºåˆ¶</h5><blockquote>\n<p>mysql æ”¯æŒä¸‰ç§å°†<code>redo log buffer</code>å†™å…¥<code>redo log file</code>çš„æœºåˆ¶ï¼Œå¯ä»¥é€šè¿‡<code>innodb_flush_log_at_trx_commit</code>é…ç½®</p>\n</blockquote>\n<table>\n<thead>\n<tr>\n<th>innodb_flush_log_at_trx_commit</th>\n<th>æè¿°</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>0</td>\n<td>äº‹ç‰©æäº¤ä¸å°†<code>redo log buffer</code>åªæ—¥å¿—å†™å…¥<code>os buffer</code>ï¼Œè€Œæ˜¯æ¯ç§’å†™å…¥<code>os buffer</code>å¹¶è°ƒç”¨<code>fsync()</code>å†™å…¥<code>redo log file</code>ä¸­ï¼Œä¹Ÿå°±æ˜¯è¯´è®¾ç½®0æ—¶ï¼Œå¤§æ¦‚æ¯ç§’åˆ·æ–°ä¸€æ¬¡è¿›å…¥ç£ç›˜ï¼Œå¦‚æœç³»ç»Ÿå‡ºç°æ•…éšœï¼Œä¼šä¸¢å¤±1ç§’çš„æ•°æ®ã€‚</td>\n</tr>\n<tr>\n<td>1</td>\n<td>æ¯æ¬¡æäº¤äº‹ç‰©éƒ½å°†<code>redo log buufer</code> å†™å…¥ <code>os buffer</code>å¹¶è°ƒç”¨<code>fsync()</code>ã€‚è¿™ç§æƒ…å†µç³»ç»Ÿæ•…éšœä¹Ÿä¸ä¼šä¸¢å¤±æ•°æ®ï¼Œ<code>io</code>æ€§èƒ½å¤ªå·®ã€‚</td>\n</tr>\n<tr>\n<td>2</td>\n<td>æ¯æ¬¡æäº¤äº‹ç‰©éƒ½å°†<code>redo log buufer</code> å†™å…¥ <code>os buffer</code>ï¼Œæ¯ç§’è°ƒç”¨<code>fsync()</code>å°†<code>os buffer</code>ä¸­æ—¥å¿—å†™å…¥<code>redo log file</code></td>\n</tr>\n</tbody></table>\n<p><img src=\"https://z201.oss-cn-shanghai.aliyuncs.com/JavaNote/20211020211536.png\"></p>\n<h4 id=\"undo-Log\"><a href=\"#undo-Log\" class=\"headerlink\" title=\"undo Log\"></a>undo Log</h4><blockquote>\n<p>æ•°æ®åº“äº‹åŠ¡å››å¤§ç‰¹æ€§ä¸­æœ‰ä¸€ä¸ªæ˜¯ <strong>åŸå­æ€§</strong> ï¼Œå…·ä½“æ¥è¯´å°±æ˜¯ <strong>åŸå­æ€§æ˜¯æŒ‡å¯¹æ•°æ®åº“çš„ä¸€ç³»åˆ—æ“ä½œï¼Œè¦ä¹ˆå…¨éƒ¨æˆåŠŸï¼Œè¦ä¹ˆå…¨éƒ¨å¤±è´¥ï¼Œä¸å¯èƒ½å‡ºç°éƒ¨åˆ†æˆåŠŸçš„æƒ…å†µ</strong>ã€‚</p>\n</blockquote>\n<ul>\n<li><strong>åŸå­æ€§</strong> åº•å±‚å°±æ˜¯é€šè¿‡ <code>undo log</code> å®ç°çš„ã€‚<code>undo log</code>ä¸»è¦è®°å½•äº†æ•°æ®çš„é€»è¾‘å˜åŒ–ï¼Œæ¯”å¦‚ä¸€æ¡ <code>INSERT</code> è¯­å¥ï¼Œå¯¹åº”ä¸€æ¡<code>DELETE</code> çš„ <code>undo log</code> ï¼Œå¯¹äºæ¯ä¸ª <code>UPDATE</code> è¯­å¥ï¼Œå¯¹åº”ä¸€æ¡ç›¸åçš„ <code>UPDATE</code> çš„ <code>undo log</code> ï¼Œè¿™æ ·åœ¨å‘ç”Ÿé”™è¯¯æ—¶ï¼Œå°±èƒ½å›æ»šåˆ°äº‹åŠ¡ä¹‹å‰çš„æ•°æ®çŠ¶æ€ã€‚</li>\n<li><code>undo log</code> ä¹Ÿæ˜¯ <code>MVCC</code>(å¤šç‰ˆæœ¬å¹¶å‘æ§åˆ¶)å®ç°çš„å…³é”®ã€‚åœ¨äº‹ç‰©æäº¤ä¹‹å‰Undo Logä¿å­˜äº†æœªæäº¤çš„ç‰ˆæœ¬æ•°æ®,Undo log ä¸­çš„æ•°æ®å¯ä»¥ä½œä¸ºæ•°æ®æ—§ç‰ˆæœ¬æä¾›å¿«ç…§è¯»ï¼Œä¸”ä¸ºå…¶ä»–äº‹ç‰©æä¾›å¿«ç…§è¯»ã€‚è¯»å–é¡ºåºæ˜¯Undo buffer ä¸­æŸ¥æ‰¾æ•°æ®ï¼Œæœªæ‰¾åˆ°å°±ä»Undo log file ä¸­æŸ¥æ‰¾æ•°æ®ã€‚</li>\n</ul>\n<h4 id=\"Redologä¸Binlog\"><a href=\"#Redologä¸Binlog\" class=\"headerlink\" title=\"Redologä¸Binlog\"></a>Redologä¸Binlog</h4><ul>\n<li>Redo Logæ—¶å±äºInnoDBå¼•æ“åŠŸèƒ½ï¼ŒBinlogæ—¶å±äºMysql Serverçš„åŠŸèƒ½ï¼Œä¸”ä»¥äºŒè¿›åˆ¶æ–‡ä»¶è®°å½•ã€‚</li>\n<li>Redo Logå±äºç‰©ç†æ—¥å¿—,è®°å½•æ•°æ®å¶æ›´æ–°çŠ¶æ€å†…å®¹ã€‚binLogæ—¶é€»è¾‘æ—¥å¿—ï¼Œè®°å½•æ›´æ–°è¿‡ç¨‹ã€‚</li>\n<li>Redo Logæ—¥å¿—å¾ªç¯å†™å…¥ï¼Œæ—¥å¿—å¤§å°ç©ºé—´æ—¶å›ºå®šçš„ï¼ŒbinLogè¿½åŠ å†™å…¥æ—¥å¿—ï¼Œä¸ä¼šè¦†ç›–å†™å…¥ã€‚</li>\n<li>Redo Logåœ¨æœåŠ¡å™¨å¼‚å¸¸ä¹‹åå¯ä»¥è‡ªåŠ¨æ¢å¤ä½¿ç”¨ï¼ŒbinLogå¯ä»¥ä½œä¸ºä¸»ä»å’Œæ•°æ®æ¢å¤ä½¿ç”¨ã€‚binLogæ²¡æœ‰è‡ªåŠ¨crash-safeèƒ½åŠ›ã€‚</li>\n</ul>\n<h3 id=\"MVCC\"><a href=\"#MVCC\" class=\"headerlink\" title=\"MVCC\"></a>MVCC</h3><blockquote>\n<p>MySQL InnoDBå­˜å‚¨å¼•æ“ï¼Œå®ç°çš„æ˜¯åŸºäºå¤šç‰ˆæœ¬çš„å¹¶å‘æ§åˆ¶åè®®â€”â€”MVCC (Multi-Version Concurrency Control) ä¸MVCCç›¸å¯¹çš„ï¼Œæ˜¯åŸºäºé”çš„å¹¶å‘æ§åˆ¶ï¼ŒLock-Based Concurrency Control åŸºäºå¤šç‰ˆæœ¬çš„å¹¶å‘æ§åˆ¶åè®®</p>\n</blockquote>\n<ul>\n<li>é€šè¿‡ MVCC æˆ‘ä»¬å¯ä»¥è§£å†³ä»¥ä¸‹å‡ ä¸ªé—®é¢˜ï¼š</li>\n</ul>\n<ol>\n<li>è¯»å†™ä¹‹é—´é˜»å¡çš„é—®é¢˜ï¼Œé€šè¿‡ MVCC å¯ä»¥è®©è¯»å†™äº’ç›¸ä¸é˜»å¡ï¼Œå³è¯»ä¸é˜»å¡å†™ï¼Œå†™ä¸é˜»å¡è¯»ï¼Œè¿™æ ·å°±å¯ä»¥æå‡äº‹åŠ¡å¹¶å‘å¤„ç†èƒ½åŠ›ã€‚</li>\n<li>é™ä½äº†æ­»é”çš„æ¦‚ç‡ã€‚è¿™æ˜¯å› ä¸º MVCC é‡‡ç”¨äº†ä¹è§‚é”çš„æ–¹å¼ï¼Œè¯»å–æ•°æ®æ—¶å¹¶ä¸éœ€è¦åŠ é”ï¼Œå¯¹äºå†™æ“ä½œï¼Œä¹Ÿåªé”å®šå¿…è¦çš„è¡Œã€‚</li>\n<li>è§£å†³ä¸€è‡´æ€§è¯»çš„é—®é¢˜ã€‚ä¸€è‡´æ€§è¯»ä¹Ÿè¢«ç§°ä¸ºå¿«ç…§è¯»ï¼Œå½“æˆ‘ä»¬æŸ¥è¯¢æ•°æ®åº“åœ¨æŸä¸ªæ—¶é—´ç‚¹çš„å¿«ç…§æ—¶ï¼Œåªèƒ½çœ‹åˆ°è¿™ä¸ªæ—¶é—´ç‚¹ä¹‹å‰äº‹åŠ¡æäº¤æ›´æ–°çš„ç»“æœï¼Œè€Œä¸èƒ½çœ‹åˆ°è¿™ä¸ªæ—¶é—´ç‚¹ä¹‹åäº‹åŠ¡æäº¤çš„æ›´æ–°ç»“æœã€‚</li>\n</ol>\n<h4 id=\"éšè—å­—æ®µ\"><a href=\"#éšè—å­—æ®µ\" class=\"headerlink\" title=\"éšè—å­—æ®µ\"></a>éšè—å­—æ®µ</h4><blockquote>\n<p>InnoDBå­˜å‚¨å¼•æ“ï¼Œæ¯ä¸€è¡Œè®°å½•éƒ½æœ‰ä¸¤ä¸ªéšè—åˆ—<strong>trx_id</strong>ã€<strong>roll_pointer</strong>ï¼Œå¦‚æœè¡¨ä¸­æ²¡æœ‰ä¸»é”®å’ŒéNULLå”¯ä¸€é”®æ—¶ï¼Œåˆ™è¿˜ä¼šæœ‰ç¬¬ä¸‰ä¸ªéšè—çš„ä¸»é”®åˆ—<strong>row_id</strong>ã€‚</p>\n</blockquote>\n<table>\n<thead>\n<tr>\n<th align=\"left\">åˆ—å</th>\n<th align=\"left\">æ˜¯å¦å¿…é¡»</th>\n<th align=\"left\">æè¿°</th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"left\">row_id</td>\n<td align=\"left\">å¦</td>\n<td align=\"left\">å•è°ƒé€’å¢çš„è¡ŒIDï¼Œä¸æ˜¯å¿…éœ€çš„ï¼Œå ç”¨6ä¸ªå­—èŠ‚ã€‚</td>\n</tr>\n<tr>\n<td align=\"left\">trx_id</td>\n<td align=\"left\">æ˜¯</td>\n<td align=\"left\">è®°å½•æ“ä½œè¯¥æ•°æ®äº‹åŠ¡çš„äº‹åŠ¡ID</td>\n</tr>\n<tr>\n<td align=\"left\">roll_pointer</td>\n<td align=\"left\">æ˜¯</td>\n<td align=\"left\">è¿™ä¸ªéšè—åˆ—å°±ç›¸å½“äºä¸€ä¸ªæŒ‡é’ˆï¼ŒæŒ‡å‘å›æ»šæ®µçš„undoæ—¥å¿—</td>\n</tr>\n</tbody></table>\n<ul>\n<li><p>LBCCï¼šï¼šLock-Based Concurrency Controlï¼ŒåŸºäºé”çš„å¹¶å‘æ§åˆ¶ </p>\n</li>\n<li><p>MVCCï¼šï¼šMulti-Version Concurrency Control  åŸºäºå¤šç‰ˆæœ¬çš„å¹¶å‘æ§åˆ¶åè®®ã€‚çº¯ç²¹åŸºäºé”çš„å¹¶å‘æœºåˆ¶å¹¶å‘é‡ä½ï¼ŒMVCCæ˜¯åœ¨åŸºäºé”çš„å¹¶å‘æ§åˆ¶ä¸Šçš„æ”¹è¿›ï¼Œä¸»è¦æ˜¯åœ¨è¯»æ“ä½œä¸Šæâ¾¼äº†å¹¶å‘é‡ã€‚ MVCCæœ€â¼¤çš„å¥½å¤„ï¼šè¯»ä¸åŠ é”ï¼Œè¯»å†™ä¸å†²çªã€‚åœ¨è¯»å¤šå†™å°‘çš„OLTPåº”â½¤ä¸­ï¼Œè¯»å†™ä¸å†²çªæ˜¯â¾®å¸¸é‡è¦çš„ï¼Œæâ¼¤çš„å¢åŠ äº†ç³»ç»Ÿçš„å¹¶å‘æ€§ èƒ½ï¼Œç°é˜¶æ®µâ¼ä¹æ‰€æœ‰çš„RDBMSï¼Œéƒ½â½€æŒäº†MVCCã€‚ </p>\n</li>\n</ul>\n<ul>\n<li>åœ¨MVCCå¹¶å‘æ§åˆ¶ä¸­ï¼Œè¯»æ“ä½œå¯ä»¥åˆ†æˆä¸¤ç±»<ul>\n<li>å¿«ç…§è¯» (snapshot read)ï¼šè¯»å–çš„æ˜¯è®°å½•çš„å¯â»…ç‰ˆæœ¬ (æœ‰å¯èƒ½æ˜¯å†å²ç‰ˆæœ¬)ï¼Œä¸â½¤åŠ é”ï¼ˆå…±äº«è¯»é”sé”ä¹Ÿä¸åŠ ï¼Œæ‰€ä»¥ä¸ä¼šé˜»å¡å…¶ä»–äº‹åŠ¡çš„å†™ï¼‰ ã€‚</li>\n<li>å½“å‰è¯» (current read)ï¼šè¯»å–çš„æ˜¯è®°å½•çš„æœ€æ–°ç‰ˆæœ¬ï¼Œå¹¶ä¸”ï¼Œå½“å‰è¯»è¿”å›çš„è®°å½•ï¼Œéƒ½ä¼šåŠ ä¸Šé”ï¼Œä¿è¯å…¶ä»–äº‹åŠ¡ä¸ä¼šå†å¹¶å‘ä¿®æ”¹è¿™æ¡è®°å½•ã€‚</li>\n</ul>\n</li>\n</ul>\n<h4 id=\"å¿«ç…§è¯»ä¸å½“å‰è¯»åŒºåˆ«\"><a href=\"#å¿«ç…§è¯»ä¸å½“å‰è¯»åŒºåˆ«\" class=\"headerlink\" title=\"å¿«ç…§è¯»ä¸å½“å‰è¯»åŒºåˆ«\"></a>å¿«ç…§è¯»ä¸å½“å‰è¯»åŒºåˆ«</h4><ul>\n<li><p>å¿«ç…§è¯»è¯»å–çš„æ˜¯å¿«ç…§æ•°æ®ã€‚ä¸åŠ é”çš„ç®€å•çš„ SELECT éƒ½å±äºå¿«ç…§è¯»ï¼Œæ¯”å¦‚è¿™æ ·ï¼š</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">SELECT</span> * <span class=\"keyword\">FROM</span> player_users <span class=\"keyword\">WHERE</span> ...</span><br></pre></td></tr></table></figure>\n\n<p>å½“å‰è¯»å°±æ˜¯è¯»å–æœ€æ–°æ•°æ®ï¼Œè€Œä¸æ˜¯å†å²ç‰ˆæœ¬çš„æ•°æ®ã€‚åŠ é”çš„ SELECTï¼Œæˆ–è€…å¯¹æ•°æ®è¿›è¡Œå¢åˆ æ”¹éƒ½ä¼šè¿›è¡Œå½“å‰è¯»ï¼Œæ¯”å¦‚ï¼š</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">-- è¿™é‡ŒåŠ çš„æ˜¯è¯»é”ã€‚ update/insert/deleteè¯­å¥</span></span><br><span class=\"line\"><span class=\"keyword\">SELECT</span> * <span class=\"keyword\">FROM</span> player_users <span class=\"keyword\">LOCK</span> <span class=\"keyword\">IN</span> <span class=\"keyword\">SHARE</span> <span class=\"keyword\">MODE</span>;</span><br><span class=\"line\"><span class=\"keyword\">SELECT</span> * <span class=\"keyword\">FROM</span> player_users <span class=\"keyword\">FOR</span> <span class=\"keyword\">UPDATE</span></span><br></pre></td></tr></table></figure>\n\n</li>\n</ul>\n<h4 id=\"Read-View\"><a href=\"#Read-View\" class=\"headerlink\" title=\"Read View\"></a>Read View</h4><blockquote>\n<p>æ¯æ¬¡å¼€å¯äº‹åŠ¡çš„æ—¶å€™éƒ½ä¼šç”Ÿæˆä¸€ä¸ªReadViewï¼ŒReadViewä¿å­˜äº†å½“å‰äº‹åŠ¡å¼€å¯æ—¶å€™æ‰€æœ‰æ´»è·ƒï¼ˆè¿˜æœªæäº¤çš„äº‹åŠ¡ï¼‰äº‹åŠ¡åˆ—è¡¨ã€‚</p>\n</blockquote>\n<ul>\n<li>è¯»å·²æäº¤<ul>\n<li>ä¸€ä¸ªäº‹åŠ¡ä¸­æ¯ä¸€æ¬¡SELECTæŸ¥è¯¢éƒ½ä¼šè·å–ä¸€æ¬¡ReadView</li>\n</ul>\n</li>\n<li>å¯é‡å¤è¯»<ul>\n<li>ä¸€ä¸ªäº‹åŠ¡ç¬¬ä¸€æ¬¡æŸ¥è¯¢SELECTæ—¶ä¼šè·å–ä¸€æ¬¡ReadView,æ­¤åçš„SELECTæŸ¥è¯¢éƒ½ä¼šå¤ç”¨è¿™ä¸ªReadView</li>\n</ul>\n</li>\n</ul>\n<h4 id=\"MVVCå¦‚ä½•æŸ¥è¯¢è®°å½•\"><a href=\"#MVVCå¦‚ä½•æŸ¥è¯¢è®°å½•\" class=\"headerlink\" title=\"MVVCå¦‚ä½•æŸ¥è¯¢è®°å½•\"></a>MVVCå¦‚ä½•æŸ¥è¯¢è®°å½•</h4><blockquote>\n<p>MVCC çš„æ ¸å¿ƒå°±æ˜¯ Undo Log+ Read Viewï¼Œâ€œMVâ€å°±æ˜¯é€šè¿‡ Undo Log æ¥ä¿å­˜æ•°æ®çš„å†å²ç‰ˆæœ¬ï¼Œå®ç°å¤šç‰ˆæœ¬çš„ç®¡ç†ï¼Œâ€œCCâ€æ˜¯é€šè¿‡ Read View æ¥å®ç°ç®¡ç†ï¼Œé€šè¿‡ Read View åŸåˆ™æ¥å†³å®šæ•°æ®æ˜¯å¦æ˜¾ç¤ºã€‚åŒæ—¶é’ˆå¯¹ä¸åŒçš„éš”ç¦»çº§åˆ«ï¼ŒRead View çš„ç”Ÿæˆç­–ç•¥ä¸åŒï¼Œä¹Ÿå°±å®ç°äº†ä¸åŒçš„éš”ç¦»çº§åˆ«ã€‚</p>\n</blockquote>\n<ol>\n<li>è·å–äº‹åŠ¡è‡ªå·±çš„ç‰ˆæœ¬å·ï¼Œå³äº‹åŠ¡ID</li>\n<li>è·å–Read View</li>\n<li>æŸ¥è¯¢å¾—åˆ°çš„æ•°æ®ï¼Œç„¶åRead Viewä¸­çš„äº‹åŠ¡ç‰ˆæœ¬å·è¿›è¡Œæ¯”è¾ƒã€‚</li>\n<li>å¦‚æœä¸ç¬¦åˆRead Viewçš„å¯è§æ€§è§„åˆ™ï¼Œ å³å°±éœ€è¦Undo logä¸­å†å²å¿«ç…§;</li>\n<li>æœ€åè¿”å›ç¬¦åˆè§„åˆ™çš„æ•°æ®</li>\n</ol>\n<h4 id=\"å¦‚ä½•è§£å†³å¹»è¯»\"><a href=\"#å¦‚ä½•è§£å†³å¹»è¯»\" class=\"headerlink\" title=\"å¦‚ä½•è§£å†³å¹»è¯»\"></a>å¦‚ä½•è§£å†³å¹»è¯»</h4><ul>\n<li>Next  keyé”+MVVCé¿å…å¹»è¯»ã€‚</li>\n</ul>\n<h3 id=\"SQLè¯­å¥çš„æ‰§è¡Œé¡ºåº\"><a href=\"#SQLè¯­å¥çš„æ‰§è¡Œé¡ºåº\" class=\"headerlink\" title=\"SQLè¯­å¥çš„æ‰§è¡Œé¡ºåº\"></a>SQLè¯­å¥çš„æ‰§è¡Œé¡ºåº</h3><p><img src=\"https://z201.oss-cn-shanghai.aliyuncs.com/JavaNote/SQL%E8%AF%AD%E5%8F%A5%E6%89%A7%E8%A1%8C%E9%A1%BA%E5%BA%8F.png\"></p>\n<blockquote>\n<p>æˆ‘ä»¬åœ¨ç¼–å†™ä¸€ä¸ªæŸ¥è¯¢è¯­å¥çš„æ—¶å€™</p>\n</blockquote>\n<figure class=\"highlight sql\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">SELECT</span> <span class=\"keyword\">DISTINCT</span></span><br><span class=\"line\">    &lt; select_list &gt;</span><br><span class=\"line\"><span class=\"keyword\">FROM</span></span><br><span class=\"line\">    &lt; left_table &gt; &lt; join_type &gt;</span><br><span class=\"line\"><span class=\"keyword\">JOIN</span> &lt; right_table &gt; <span class=\"keyword\">ON</span> &lt; join_condition &gt;</span><br><span class=\"line\"><span class=\"keyword\">WHERE</span></span><br><span class=\"line\">    &lt; where_condition &gt;</span><br><span class=\"line\"><span class=\"keyword\">GROUP</span> <span class=\"keyword\">BY</span></span><br><span class=\"line\">    &lt; group_by_list &gt;</span><br><span class=\"line\"><span class=\"keyword\">HAVING</span></span><br><span class=\"line\">    &lt; having_condition &gt;</span><br><span class=\"line\"><span class=\"keyword\">ORDER</span> <span class=\"keyword\">BY</span></span><br><span class=\"line\">    &lt; order_by_condition &gt;</span><br><span class=\"line\"><span class=\"keyword\">LIMIT</span> &lt; limit_number &gt;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"FROM\"><a href=\"#FROM\" class=\"headerlink\" title=\"FROM\"></a>FROM</h4><ul>\n<li>é¦–å…ˆï¼Œå¯¹ SELECT è¯­å¥æ‰§è¡ŒæŸ¥è¯¢æ—¶ï¼Œå¯¹<code>FROM</code> å…³é”®å­—ä¸¤è¾¹çš„è¡¨æ‰§è¡Œè¿æ¥ï¼Œä¼šå½¢æˆ<code>ç¬›å¡å°”ç§¯</code>ï¼Œè¿™æ—¶å€™ä¼šäº§ç”Ÿä¸€ä¸ª<code>è™šè¡¨VT1(virtual table)</code></li>\n</ul>\n<blockquote>\n<p>é¦–å…ˆå…ˆæ¥è§£é‡Šä¸€ä¸‹ä»€ä¹ˆæ˜¯<code>ç¬›å¡å°”ç§¯</code></p>\n<p>ç°åœ¨æˆ‘ä»¬æœ‰ä¸¤ä¸ªé›†åˆ A = {0,1} , B = {2,3,4}</p>\n<p>é‚£ä¹ˆï¼Œé›†åˆ A * B å¾—åˆ°çš„ç»“æœå°±æ˜¯</p>\n<p>A * B = {(0,2)ã€(1,2)ã€(0,3)ã€(1,3)ã€(0,4)ã€(1,4)};</p>\n<p>B * A = {(2,0)ã€{2,1}ã€{3,0}ã€{3,1}ã€{4,0}ã€(4,1)};</p>\n<p>ä¸Šé¢ A * B å’Œ B * A çš„ç»“æœå°±å¯ä»¥ç§°ä¸ºä¸¤ä¸ªé›†åˆç›¸ä¹˜çš„ <code>ç¬›å¡å°”ç§¯</code></p>\n<p>æˆ‘ä»¬å¯ä»¥å¾—å‡ºç»“è®ºï¼ŒA é›†åˆå’Œ B é›†åˆç›¸ä¹˜ï¼ŒåŒ…å«äº†é›†åˆ A ä¸­çš„å…ƒç´ å’Œé›†åˆ B ä¸­å…ƒç´ ä¹‹å’Œï¼Œä¹Ÿå°±æ˜¯ A å…ƒç´ çš„ä¸ªæ•° * B å…ƒç´ çš„ä¸ªæ•°</p>\n</blockquote>\n<h4 id=\"ON\"><a href=\"#ON\" class=\"headerlink\" title=\"ON\"></a>ON</h4><ul>\n<li>ç„¶åå¯¹ FROM è¿æ¥çš„ç»“æœè¿›è¡Œ ON ç­›é€‰ï¼Œåˆ›å»º VT2ï¼ŒæŠŠç¬¦åˆè®°å½•çš„æ¡ä»¶å­˜åœ¨ VT2 ä¸­ã€‚</li>\n</ul>\n<h4 id=\"JOIN\"><a href=\"#JOIN\" class=\"headerlink\" title=\"JOIN\"></a>JOIN</h4><p>ç¬¬ä¸‰æ­¥ï¼Œå¦‚æœæ˜¯ <code>OUTER JOIN(left joinã€right join)</code> ï¼Œé‚£ä¹ˆè¿™ä¸€æ­¥å°±å°†æ·»åŠ å¤–éƒ¨è¡Œï¼Œå¦‚æœæ˜¯ left join å°±æŠŠ ON è¿‡æ»¤æ¡ä»¶çš„å·¦è¡¨æ·»åŠ è¿›æ¥ï¼Œå¦‚æœæ˜¯ right join ï¼Œå°±æŠŠå³è¡¨æ·»åŠ è¿›æ¥ï¼Œä»è€Œç”Ÿæˆæ–°çš„è™šæ‹Ÿè¡¨ VT3ã€‚</p>\n<h4 id=\"WHERE\"><a href=\"#WHERE\" class=\"headerlink\" title=\"WHERE\"></a>WHERE</h4><ul>\n<li><p>ç¬¬å››æ­¥ï¼Œæ˜¯æ‰§è¡Œ WHERE è¿‡æ»¤å™¨ï¼Œå¯¹ä¸Šä¸€æ­¥ç”Ÿäº§çš„è™šæ‹Ÿè¡¨å¼•ç”¨ WHERE ç­›é€‰ï¼Œç”Ÿæˆè™šæ‹Ÿè¡¨ VT4ã€‚</p>\n</li>\n<li><p>WHERE å’Œ ON çš„åŒºåˆ«</p>\n<ul>\n<li>å¦‚æœæœ‰å¤–éƒ¨åˆ—ï¼ŒON é’ˆå¯¹è¿‡æ»¤çš„æ˜¯å…³è”è¡¨ï¼Œä¸»è¡¨(ä¿ç•™è¡¨)ä¼šè¿”å›æ‰€æœ‰çš„åˆ—;</li>\n<li>å¦‚æœæ²¡æœ‰æ·»åŠ å¤–éƒ¨åˆ—ï¼Œä¸¤è€…çš„æ•ˆæœæ˜¯ä¸€æ ·çš„;</li>\n</ul>\n</li>\n<li><p>åº”ç”¨</p>\n<ul>\n<li>å¯¹ä¸»è¡¨çš„è¿‡æ»¤åº”è¯¥ä½¿ç”¨ WHERE;</li>\n<li>å¯¹äºå…³è”è¡¨ï¼Œå…ˆæ¡ä»¶æŸ¥è¯¢åè¿æ¥åˆ™ç”¨ ONï¼Œå…ˆè¿æ¥åæ¡ä»¶æŸ¥è¯¢åˆ™ç”¨ WHERE;</li>\n</ul>\n</li>\n</ul>\n<h4 id=\"GROUP-BY\"><a href=\"#GROUP-BY\" class=\"headerlink\" title=\"GROUP BY\"></a>GROUP BY</h4><ul>\n<li>æ ¹æ® group by å­—å¥ä¸­çš„åˆ—ï¼Œä¼šå¯¹ VT4 ä¸­çš„è®°å½•è¿›è¡Œåˆ†ç»„æ“ä½œï¼Œäº§ç”Ÿè™šæ‹Ÿæœºè¡¨ VT5ã€‚æœåº”ç”¨äº†group byï¼Œé‚£ä¹ˆåé¢çš„æ‰€æœ‰æ­¥éª¤éƒ½åªèƒ½å¾—åˆ°çš„ VT5 çš„åˆ—æˆ–è€…æ˜¯èšåˆå‡½æ•°ï¼ˆcountã€sumã€avgç­‰ï¼‰ã€‚</li>\n</ul>\n<h4 id=\"HAVING\"><a href=\"#HAVING\" class=\"headerlink\" title=\"HAVING\"></a>HAVING</h4><ul>\n<li>ç´§è·Ÿç€ GROUP BY å­—å¥åé¢çš„æ˜¯ HAVINGï¼Œä½¿ç”¨ HAVING è¿‡æ»¤ï¼Œä¼šæŠŠç¬¦åˆæ¡ä»¶çš„æ”¾åœ¨ VT6</li>\n</ul>\n<h4 id=\"SELECT\"><a href=\"#SELECT\" class=\"headerlink\" title=\"SELECT\"></a>SELECT</h4><ul>\n<li>ç¬¬ä¸ƒæ­¥æ‰ä¼šæ‰§è¡Œ SELECT è¯­å¥ï¼Œå°† VT6 ä¸­çš„ç»“æœæŒ‰ç…§ SELECT è¿›è¡Œåˆ·é€‰ï¼Œç”Ÿæˆ VT7</li>\n</ul>\n<h4 id=\"DISTINCT\"><a href=\"#DISTINCT\" class=\"headerlink\" title=\"DISTINCT\"></a>DISTINCT</h4><ul>\n<li>åœ¨ç¬¬å…«æ­¥ä¸­ï¼Œä¼šå¯¹ TV7 ç”Ÿæˆçš„è®°å½•è¿›è¡Œå»é‡æ“ä½œï¼Œç”Ÿæˆ VT8ã€‚äº‹å®ä¸Šå¦‚æœåº”ç”¨äº† group by å­å¥é‚£ä¹ˆ distinct æ˜¯å¤šä½™çš„ï¼ŒåŸå› åŒæ ·åœ¨äºï¼Œåˆ†ç»„çš„æ—¶å€™æ˜¯å°†åˆ—ä¸­å”¯ä¸€çš„å€¼åˆ†æˆä¸€ç»„ï¼ŒåŒæ—¶åªä¸ºæ¯ä¸€ç»„è¿”å›ä¸€è¡Œè®°å½•ï¼Œé‚£ä¹ˆæ‰€ä»¥çš„è®°å½•éƒ½å°†æ˜¯ä¸ç›¸åŒçš„ã€‚</li>\n</ul>\n<h4 id=\"ORDER-BY\"><a href=\"#ORDER-BY\" class=\"headerlink\" title=\"ORDER BY\"></a>ORDER BY</h4><ul>\n<li>åº”ç”¨ order by å­å¥ã€‚æŒ‰ç…§ order_by_condition æ’åº VT8ï¼Œæ­¤æ—¶è¿”å›çš„ä¸€ä¸ªæ¸¸æ ‡ï¼Œè€Œä¸æ˜¯è™šæ‹Ÿè¡¨ã€‚sql æ˜¯åŸºäºé›†åˆçš„ç†è®ºçš„ï¼Œé›†åˆä¸ä¼šé¢„å…ˆå¯¹ä»–çš„è¡Œæ’åºï¼Œå®ƒåªæ˜¯æˆå‘˜çš„é€»è¾‘é›†åˆï¼Œæˆå‘˜çš„é¡ºåºæ˜¯æ— å…³ç´§è¦çš„ã€‚</li>\n</ul>\n<h5 id=\"ORDER-BYæ³¨æ„äº‹é¡¹\"><a href=\"#ORDER-BYæ³¨æ„äº‹é¡¹\" class=\"headerlink\" title=\"ORDER BYæ³¨æ„äº‹é¡¹\"></a>ORDER BYæ³¨æ„äº‹é¡¹</h5><ul>\n<li><p>æ’åºçš„åˆ—åï¼šORDER BY åé¢å¯ä»¥æœ‰ä¸€ä¸ªæˆ–å¤šä¸ªåˆ—åï¼Œå¦‚æœæ˜¯å¤šä¸ªåˆ—åè¿›è¡Œæ’åºï¼Œä¼šæŒ‰ç…§åé¢ç¬¬ä¸€ä¸ªåˆ—å…ˆè¿›è¡Œæ’åºï¼Œå½“ç¬¬ä¸€åˆ—çš„å€¼ç›¸åŒçš„æ—¶å€™ï¼Œå†æŒ‰ç…§ç¬¬äºŒåˆ—è¿›è¡Œæ’åºï¼Œä»¥æ­¤ç±»æ¨ã€‚</p>\n</li>\n<li><p>æ’åºçš„é¡ºåºï¼šORDER BY åé¢å¯ä»¥æ³¨æ˜æ’åºè§„åˆ™ï¼ŒASC ä»£è¡¨é€’å¢æ’åºï¼ŒDESC ä»£è¡¨é€’å‡æ’åºã€‚å¦‚æœæ²¡æœ‰æ³¨æ˜æ’åºè§„åˆ™ï¼Œé»˜è®¤æƒ…å†µä¸‹æ˜¯æŒ‰ç…§ ASC é€’å¢æ’åºã€‚æˆ‘ä»¬å¾ˆå®¹æ˜“ç†è§£ ORDER BY å¯¹æ•°å€¼ç±»å‹å­—æ®µçš„æ’åºè§„åˆ™ï¼Œä½†å¦‚æœæ’åºå­—æ®µç±»å‹ä¸ºæ–‡æœ¬æ•°æ®ï¼Œå°±éœ€è¦å‚è€ƒæ•°æ®åº“çš„è®¾ç½®æ–¹å¼äº†ï¼Œè¿™æ ·æ‰èƒ½åˆ¤æ–­ A æ˜¯åœ¨ B ä¹‹å‰ï¼Œè¿˜æ˜¯åœ¨ B ä¹‹åã€‚æ¯”å¦‚ä½¿ç”¨ MySQL åœ¨åˆ›å»ºå­—æ®µçš„æ—¶å€™è®¾ç½®ä¸º BINARY å±æ€§ï¼Œå°±ä»£è¡¨åŒºåˆ†å¤§å°å†™ã€‚</p>\n</li>\n<li><p>éé€‰æ‹©åˆ—æ’åºï¼šORDER BY å¯ä»¥ä½¿ç”¨éé€‰æ‹©åˆ—è¿›è¡Œæ’åºï¼Œæ‰€ä»¥å³ä½¿åœ¨ SELECT åé¢æ²¡æœ‰è¿™ä¸ªåˆ—åï¼Œä½ åŒæ ·å¯ä»¥æ”¾åˆ° ORDER BY åé¢è¿›è¡Œæ’åºã€‚</p>\n</li>\n<li><p>ORDER BY çš„ä½ç½®ï¼šORDER BY é€šå¸¸ä½äº SELECT è¯­å¥çš„æœ€åä¸€æ¡å­å¥ï¼Œå¦åˆ™ä¼šæŠ¥é”™ã€‚</p>\n</li>\n</ul>\n<h3 id=\"æŸ¥è¯¢ä¼˜åŒ–-1\"><a href=\"#æŸ¥è¯¢ä¼˜åŒ–-1\" class=\"headerlink\" title=\"æŸ¥è¯¢ä¼˜åŒ–\"></a>æŸ¥è¯¢ä¼˜åŒ–</h3><ul>\n<li><p>é¿å…ä½¿ç”¨ select * è€Œæ˜¯æŸ¥è¯¢éœ€è¦çš„å­—æ®µï¼Œè¿™æ ·å¯ä»¥æå‡é€Ÿåº¦ï¼Œä»¥åŠå‡å°‘ç½‘ç»œä¼ è¾“çš„å¸¦å®½å‹åŠ›ã€‚</p>\n</li>\n<li><p>å°½é‡ä½¿ç”¨ Join è¯­å¥æ¥æ›¿ä»£å­æŸ¥è¯¢ï¼Œå› ä¸ºå­æŸ¥è¯¢æ˜¯åµŒå¥—æŸ¥è¯¢ï¼Œè€ŒåµŒå¥—æŸ¥è¯¢ä¼šæ–°åˆ›å»ºä¸€å¼ ä¸´æ—¶è¡¨ï¼Œè€Œä¸´æ—¶è¡¨çš„åˆ›å»ºä¸é”€æ¯ä¼šå ç”¨ä¸€å®šçš„ç³»ç»Ÿèµ„æºä»¥åŠèŠ±è´¹ä¸€å®šçš„æ—¶é—´ï¼Œä½† Join è¯­å¥å¹¶ä¸ä¼šåˆ›å»ºä¸´æ—¶è¡¨ï¼Œå› æ­¤æ€§èƒ½ä¼šæ›´é«˜ã€‚</p>\n</li>\n<li><p>å°½é‡ä½¿ç”¨è¦†ç›–æŸ¥è¯¢ã€‚é€šè¿‡åˆ›å»ºè”åˆä¸»é”®çš„æ–¹å¼å‡å°‘å›è¡¨æ“ä½œã€‚</p>\n</li>\n<li><p>ä¸è¦åœ¨åˆ—ä¸Šè¿›è¡Œè¿ç®—æ“ä½œ</p>\n</li>\n<li><p>é€‚å½“å¢åŠ å†—ä½™å­—æ®µï¼Œé˜²æ­¢å¤šåº¦è¿è¡¨æŸ¥è¯¢ï¼Œé€šå¸¸ä¸å»ºè®®joinè¶…è¿‡ä¸‰å¼ è¡¨ã€‚</p>\n</li>\n<li><p>æœ€å°æ•°æ®é•¿åº¦ï¼Œä¸€èˆ¬è¯´æ¥æ•°æ®åº“çš„è¡¨è¶Šå°ï¼Œé‚£ä¹ˆå®ƒçš„æŸ¥è¯¢é€Ÿåº¦å°±è¶Šå¿«ï¼Œå› æ­¤ä¸ºäº†æé«˜è¡¨çš„æ•ˆç‡</p>\n</li>\n<li><p>ä½¿ç”¨æœ€ç®€å•æ•°æ®ç±»å‹ï¼Œèƒ½ä½¿ç”¨ int ç±»å‹å°±ä¸è¦ä½¿ç”¨ varchar ç±»å‹ï¼Œå› ä¸º int ç±»å‹æ¯” varchar ç±»å‹çš„æŸ¥è¯¢æ•ˆç‡æ›´é«˜ã€‚</p>\n</li>\n<li><p>å°½é‡å°‘å®šä¹‰ text ç±»å‹ï¼Œtext ç±»å‹çš„æŸ¥è¯¢æ•ˆç‡å¾ˆä½ï¼Œå¦‚æœå¿…é¡»è¦ä½¿ç”¨ text å®šä¹‰å­—æ®µï¼Œå¯ä»¥æŠŠæ­¤å­—æ®µåˆ†ç¦»æˆå­è¡¨ï¼Œéœ€è¦æŸ¥è¯¢æ­¤å­—æ®µæ—¶ä½¿ç”¨è”åˆæŸ¥è¯¢ï¼Œè¿™æ ·å¯ä»¥æé«˜ä¸»è¡¨çš„æŸ¥è¯¢æ•ˆç‡ã€‚</p>\n</li>\n<li><p>é€‚å½“åˆ†è¡¨ã€åˆ†åº“ç­–ç•¥ï¼Œåˆ†è¡¨å’Œåˆ†åº“æ–¹æ¡ˆä¹Ÿæ˜¯æˆ‘ä»¬ç»å¸¸è¯´çš„å‚ç›´åˆ†éš”ï¼ˆåˆ†è¡¨ï¼‰å’Œæ°´å¹³åˆ†éš”ï¼ˆåˆ†åº“ï¼‰ã€‚</p>\n<p>åˆ†è¡¨æ˜¯æŒ‡å½“ä¸€å¼ è¡¨ä¸­çš„å­—æ®µæ›´å¤šæ—¶ï¼Œå¯ä»¥å°è¯•å°†ä¸€å¼ å¤§è¡¨æ‹†åˆ†ä¸ºå¤šå¼ å­è¡¨ï¼ŒæŠŠä½¿ç”¨æ¯”è¾ƒé«˜é¢‘çš„ä¸»ä¿¡æ¯æ”¾å…¥ä¸»è¡¨ä¸­ï¼Œå…¶ä»–çš„æ”¾å…¥å­è¡¨ï¼Œè¿™æ ·æˆ‘ä»¬å¤§éƒ¨åˆ†æŸ¥è¯¢åªéœ€è¦æŸ¥è¯¢å­—æ®µæ›´å°‘çš„ä¸»è¡¨å°±å¯ä»¥å®Œæˆäº†ï¼Œä»è€Œæœ‰æ•ˆçš„æé«˜äº†æŸ¥è¯¢çš„æ•ˆç‡ã€‚</p>\n<p>åˆ†åº“æ˜¯æŒ‡å°†ä¸€ä¸ªæ•°æ®åº“åˆ†ä¸ºå¤šä¸ªæ•°æ®åº“ã€‚æ¯”å¦‚æˆ‘ä»¬æŠŠä¸€ä¸ªæ•°æ®åº“æ‹†åˆ†ä¸ºäº†å¤šä¸ªæ•°æ®åº“ï¼Œä¸€ä¸ªä¸»æ•°æ®åº“ç”¨äºå†™å…¥å’Œä¿®æ”¹æ•°æ®ï¼Œå…¶ä»–çš„ç”¨äºåŒæ­¥ä¸»æ•°æ®å¹¶æä¾›ç»™å®¢æˆ·ç«¯æŸ¥è¯¢ï¼Œè¿™æ ·å°±æŠŠä¸€ä¸ªåº“çš„è¯»å’Œå†™çš„å‹åŠ›ï¼Œåˆ†æ‘Šç»™äº†å¤šä¸ªåº“ï¼Œä»è€Œæé«˜äº†æ•°æ®åº“æ•´ä½“çš„è¿è¡Œæ•ˆç‡ã€‚</p>\n</li>\n</ul>\n<h4 id=\"SQLä¼˜åŒ–explain\"><a href=\"#SQLä¼˜åŒ–explain\" class=\"headerlink\" title=\"SQLä¼˜åŒ–explain\"></a>SQLä¼˜åŒ–explain</h4><ul>\n<li>explainå‡ºæ¥çš„å„ç§itemçš„æ„ä¹‰ï¼›</li>\n</ul>\n<figure class=\"highlight sql\"><table><tr><td class=\"code\"><pre><span class=\"line\">select_type</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>è¡¨ç¤ºæŸ¥è¯¢ä¸­æ¯ä¸ªselectå­å¥çš„ç±»å‹ï¼Œæœ‰å‡ ç§å€¼ï¼šsimpleï¼ˆè¡¨ç¤ºç®€å•çš„selectï¼Œæ²¡æœ‰unionå’Œå­æŸ¥è¯¢ï¼‰ï¼Œprimaryï¼ˆæœ‰å­æŸ¥è¯¢ï¼Œæœ€å¤–é¢çš„selectæŸ¥è¯¢å°±æ˜¯primaryï¼‰ï¼Œunionï¼ˆunionä¸­çš„ç¬¬äºŒä¸ªæˆ–éšåçš„selectæŸ¥è¯¢ï¼Œä¸ä¾èµ–å¤–éƒ¨æŸ¥è¯¢ç»“æœï¼‰ï¼Œdependent unionï¼ˆunionä¸­çš„ç¬¬äºŒä¸ªæˆ–éšåçš„selectæŸ¥è¯¢ï¼Œä¾èµ–å¤–éƒ¨æŸ¥è¯¢ç»“æœï¼‰</li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">type</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>è¡¨ç¤ºMySQLåœ¨è¡¨ä¸­æ‰¾åˆ°æ‰€éœ€è¡Œçš„æ–¹å¼ï¼Œåˆç§°â€œè®¿é—®ç±»å‹â€ï¼Œæœ‰å‡ ç§å€¼ï¼šsystemï¼ˆè¡¨ä»…æœ‰ä¸€è¡Œï¼ˆ=ç³»ç»Ÿè¡¨ï¼‰ï¼Œè¿™æ˜¯constè¿æ¥ç±»å‹çš„ä¸€ä¸ªç‰¹ä¾‹ï¼‰ï¼Œconstï¼ˆå¸¸é‡æŸ¥è¯¢ï¼‰, ref(éå”¯ä¸€ç´¢å¼•è®¿é—®ï¼Œåªæœ‰æ™®é€šç´¢å¼•)ï¼Œeq_refï¼ˆä½¿ç”¨å”¯ä¸€ç´¢å¼•æˆ–ç»„ä»¶æŸ¥è¯¢ï¼‰ï¼Œallï¼ˆå…¨è¡¨æŸ¥è¯¢ï¼‰ï¼Œindexï¼ˆæ ¹æ®ç´¢å¼•æŸ¥è¯¢å…¨è¡¨ï¼‰ï¼Œrangeï¼ˆèŒƒå›´æŸ¥è¯¢ï¼‰</li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">possible_keys</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>æŒ‡å‡ºMySQLèƒ½ä½¿ç”¨å“ªä¸ªç´¢å¼•åœ¨è¡¨ä¸­æ‰¾åˆ°è¡Œï¼ŒæŸ¥è¯¢æ¶‰åŠåˆ°çš„å­—æ®µä¸Šè‹¥å­˜åœ¨ç´¢å¼•ï¼Œåˆ™è¯¥ç´¢å¼•å°†è¢«åˆ—å‡ºï¼Œä½†ä¸ä¸€å®šè¢«æŸ¥è¯¢ä½¿ç”¨</li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">key</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>æ˜¾ç¤ºMySQLåœ¨æŸ¥è¯¢ä¸­å®é™…ä½¿ç”¨çš„ç´¢å¼•ï¼Œè‹¥æ²¡æœ‰ä½¿ç”¨ç´¢å¼•ï¼Œæ˜¾ç¤ºä¸ºNULL</li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">key_len</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>è¡¨ç¤ºç´¢å¼•ä¸­ä½¿ç”¨çš„å­—èŠ‚æ•°ï¼Œå¯é€šè¿‡è¯¥åˆ—è®¡ç®—æŸ¥è¯¢ä¸­ä½¿ç”¨çš„ç´¢å¼•çš„é•¿åº¦</li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">ref</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>è¡¨ç¤ºä¸Šè¿°è¡¨çš„è¿æ¥åŒ¹é…æ¡ä»¶ï¼Œå³å“ªäº›åˆ—æˆ–å¸¸é‡è¢«ç”¨äºæŸ¥æ‰¾ç´¢å¼•åˆ—ä¸Šçš„å€¼</li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">Extra</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><p>åŒ…å«ä¸é€‚åˆåœ¨å…¶ä»–åˆ—ä¸­æ˜¾ç¤ºä½†ååˆ†é‡è¦çš„é¢å¤–ä¿¡æ¯</p>\n</li>\n<li><p>profileçš„æ„ä¹‰ä»¥åŠä½¿ç”¨åœºæ™¯ï¼›</p>\n</li>\n</ul>\n<blockquote>\n<p>æŸ¥è¯¢åˆ° SQL ä¼šæ‰§è¡Œå¤šå°‘æ—¶é—´, å¹¶çœ‹å‡º CPU/Memory ä½¿ç”¨é‡, æ‰§è¡Œè¿‡ç¨‹ä¸­ Systemlock, Table lock èŠ±å¤šå°‘æ—¶é—´ç­‰ç­‰ã€‚</p>\n</blockquote>\n<h4 id=\"innodbçš„è¯»å†™å‚æ•°ä¼˜åŒ–\"><a href=\"#innodbçš„è¯»å†™å‚æ•°ä¼˜åŒ–\" class=\"headerlink\" title=\"innodbçš„è¯»å†™å‚æ•°ä¼˜åŒ–\"></a>innodbçš„è¯»å†™å‚æ•°ä¼˜åŒ–</h4><ul>\n<li>è¯»å–å‚æ•°</li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">global buffer poolä»¥åŠ local bufferï¼›</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>å†™å…¥å‚æ•°ï¼›</li>\n</ul>\n<figure class=\"highlight sql\"><table><tr><td class=\"code\"><pre><span class=\"line\">innodb_flush_log_at_trx_commit</span><br><span class=\"line\"></span><br><span class=\"line\">innodb_buffer_pool_size</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>ä¸IOç›¸å…³çš„å‚æ•°ï¼›</li>\n</ul>\n<figure class=\"highlight sql\"><table><tr><td class=\"code\"><pre><span class=\"line\">innodb_write_io_threads = 8</span><br><span class=\"line\"></span><br><span class=\"line\">innodb_read_io_threads = 8</span><br><span class=\"line\"></span><br><span class=\"line\">innodb_thread_concurrency = 0</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"SQL-ä¼˜åŒ–çš„ç»éªŒ\"><a href=\"#SQL-ä¼˜åŒ–çš„ç»éªŒ\" class=\"headerlink\" title=\"SQL ä¼˜åŒ–çš„ç»éªŒ\"></a>SQL ä¼˜åŒ–çš„ç»éªŒ</h4><ul>\n<li>æŸ¥è¯¢è¯­å¥æ— è®ºæ˜¯ä½¿ç”¨å“ªç§åˆ¤æ–­æ¡ä»¶ <strong>ç­‰äºã€å°äºã€å¤§äº</strong>ï¼Œ <code>WHERE</code> å·¦ä¾§çš„æ¡ä»¶æŸ¥è¯¢å­—æ®µä¸è¦ä½¿ç”¨å‡½æ•°æˆ–è€…è¡¨è¾¾å¼</li>\n<li>ä½¿ç”¨ <code>EXPLAIN</code> å‘½ä»¤ä¼˜åŒ–ä½ çš„ SELECT æŸ¥è¯¢ï¼Œå¯¹äºå¤æ‚ã€æ•ˆç‡ä½çš„ sql è¯­å¥ï¼Œæˆ‘ä»¬é€šå¸¸æ˜¯ä½¿ç”¨ explain sql æ¥åˆ†æè¿™æ¡ sql è¯­å¥ï¼Œè¿™æ ·æ–¹ä¾¿æˆ‘ä»¬åˆ†æï¼Œè¿›è¡Œä¼˜åŒ–ã€‚</li>\n<li>å½“ä½ çš„ SELECT æŸ¥è¯¢è¯­å¥åªéœ€è¦ä½¿ç”¨ä¸€æ¡è®°å½•æ—¶ï¼Œè¦ä½¿ç”¨ <code>LIMIT 1</code></li>\n<li>ä¸è¦ç›´æ¥ä½¿ç”¨ <code>SELECT *</code>ï¼Œè€Œåº”è¯¥ä½¿ç”¨å…·ä½“éœ€è¦æŸ¥è¯¢çš„è¡¨å­—æ®µï¼Œå› ä¸ºä½¿ç”¨ EXPLAIN è¿›è¡Œåˆ†ææ—¶ï¼ŒSELECT * ä½¿ç”¨çš„æ˜¯å…¨è¡¨æ‰«æï¼Œä¹Ÿå°±æ˜¯ <code>type = all</code>ã€‚</li>\n<li>ä¸ºæ¯ä¸€å¼ è¡¨è®¾ç½®ä¸€ä¸ª ID å±æ€§</li>\n<li>é¿å…åœ¨ <code>WHERE</code> å­—å¥ä¸­å¯¹å­—æ®µè¿›è¡Œ <code>NULL</code> åˆ¤æ–­</li>\n<li>é¿å…åœ¨ <code>WHERE</code> ä¸­ä½¿ç”¨ <code>!=</code> æˆ– <code>&lt;&gt;</code> æ“ä½œç¬¦</li>\n<li>ä½¿ç”¨ <code>BETWEEN AND</code> æ›¿ä»£ <code>IN</code></li>\n<li>ä¸ºæœç´¢å­—æ®µåˆ›å»ºç´¢å¼•,å¤§å­—æ®µç±»å‹ä¸è¦å»ºç«‹ç´¢å¼•ã€‚</li>\n<li>é€‰æ‹©æ­£ç¡®çš„å­˜å‚¨å¼•æ“ï¼ŒInnoDB ã€MyISAM ã€MEMORY ç­‰</li>\n<li>ä½¿ç”¨ <code>LIKE %abc%</code> ä¸ä¼šèµ°ç´¢å¼•ï¼Œè€Œä½¿ç”¨ <code>LIKE abc%</code> ä¼šèµ°ç´¢å¼•</li>\n<li>å¯¹äºæšä¸¾ç±»å‹çš„å­—æ®µ(å³æœ‰å›ºå®šç½—åˆ—å€¼çš„å­—æ®µ)ï¼Œå»ºè®®ä½¿ç”¨<code>ENUM</code>è€Œä¸æ˜¯<code>VARCHAR</code>ï¼Œå¦‚æ€§åˆ«ã€æ˜ŸæœŸã€ç±»å‹ã€ç±»åˆ«ç­‰</li>\n<li>æ‹†åˆ†å¤§çš„ DELETE æˆ– INSERT è¯­å¥</li>\n<li>é€‰æ‹©åˆé€‚çš„å­—æ®µç±»å‹ï¼Œé€‰æ‹©æ ‡å‡†æ˜¯ <strong>å°½å¯èƒ½å°ã€å°½å¯èƒ½å®šé•¿ã€å°½å¯èƒ½ä½¿ç”¨æ•´æ•°</strong>ã€‚</li>\n<li>å­—æ®µè®¾è®¡å°½å¯èƒ½ä½¿ç”¨ <code>NOT NULL</code></li>\n<li>è¿›è¡Œæ°´å¹³åˆ‡å‰²æˆ–è€…å‚ç›´åˆ†å‰²</li>\n</ul>\n<h3 id=\"è§†å›¾\"><a href=\"#è§†å›¾\" class=\"headerlink\" title=\"è§†å›¾\"></a>è§†å›¾</h3><ul>\n<li>è§†å›¾æ˜¯ä¸€ç§è™šæ‹Ÿçš„è¡¨ï¼Œå…·æœ‰å’Œç‰©ç†è¡¨ç›¸åŒçš„åŠŸèƒ½ã€‚å¯ä»¥å¯¹è§†å›¾è¿›è¡Œå¢ï¼Œæ”¹ï¼ŒæŸ¥ï¼Œæ“ä½œï¼Œè¯•å›¾é€šå¸¸æ˜¯æœ‰ä¸€ä¸ªè¡¨æˆ–è€…å¤šä¸ªè¡¨çš„è¡Œæˆ–åˆ—çš„å­é›†ã€‚å¯¹è§†å›¾çš„ä¿®æ”¹ä¸å½±å“åŸºæœ¬è¡¨ã€‚å®ƒä½¿å¾—æˆ‘ä»¬è·å–æ•°æ®æ›´å®¹æ˜“ï¼Œç›¸æ¯”å¤šè¡¨æŸ¥è¯¢ã€‚</li>\n<li>åªæš´éœ²éƒ¨åˆ†å­—æ®µç»™è®¿é—®è€…ï¼Œæ‰€ä»¥å°±å»ºä¸€ä¸ªè™šè¡¨ï¼Œå°±æ˜¯è§†å›¾ã€‚</li>\n<li>æŸ¥è¯¢çš„æ•°æ®æ¥æºäºä¸åŒçš„è¡¨ï¼Œè€ŒæŸ¥è¯¢è€…å¸Œæœ›ä»¥ç»Ÿä¸€çš„æ–¹å¼æŸ¥è¯¢ï¼Œè¿™æ ·ä¹Ÿå¯ä»¥å»ºç«‹ä¸€ä¸ªè§†å›¾ï¼ŒæŠŠå¤šä¸ªè¡¨æŸ¥è¯¢ç»“æœè”åˆèµ·æ¥ï¼ŒæŸ¥è¯¢è€…åªéœ€è¦ç›´æ¥ä»è§†å›¾ä¸­è·å–æ•°æ®ï¼Œä¸å¿…è€ƒè™‘æ•°æ®æ¥æºäºä¸åŒè¡¨æ‰€å¸¦æ¥çš„å·®å¼‚ã€‚</li>\n</ul>\n<h3 id=\"å­˜å‚¨è¿‡ç¨‹\"><a href=\"#å­˜å‚¨è¿‡ç¨‹\" class=\"headerlink\" title=\"å­˜å‚¨è¿‡ç¨‹\"></a>å­˜å‚¨è¿‡ç¨‹</h3><p>å­˜å‚¨è¿‡ç¨‹æ˜¯ä¸€äº›é¢„ç¼–è¯‘çš„SQLè¯­å¥ã€‚</p>\n<ul>\n<li>æ›´åŠ ç›´ç™½çš„ç†è§£ï¼šå­˜å‚¨è¿‡ç¨‹å¯ä»¥è¯´æ˜¯ä¸€ä¸ªè®°å½•é›†ï¼Œå®ƒæ˜¯ç”±ä¸€äº›T-SQLè¯­å¥ç»„æˆçš„ä»£ç å—ï¼Œè¿™äº›T-SQLè¯­å¥ä»£ç åƒä¸€ä¸ªæ–¹æ³•ä¸€æ ·å®ç°ä¸€äº›åŠŸèƒ½ï¼ˆå¯¹å•è¡¨æˆ–å¤šè¡¨çš„å¢åˆ æ”¹æŸ¥ï¼‰ï¼Œç„¶åå†ç»™è¿™ä¸ªä»£ç å—å–ä¸€ä¸ªåå­—ï¼Œåœ¨ç”¨åˆ°è¿™ä¸ªåŠŸèƒ½çš„æ—¶å€™è°ƒç”¨ä»–å°±è¡Œäº†ã€‚</li>\n<li>å­˜å‚¨è¿‡ç¨‹æ˜¯ä¸€ä¸ªé¢„ç¼–è¯‘çš„ä»£ç å—ï¼Œæ‰§è¡Œæ•ˆç‡æ¯”è¾ƒé«˜,ä¸€ä¸ªå­˜å‚¨è¿‡ç¨‹æ›¿ä»£å¤§é‡T_SQLè¯­å¥ ï¼Œå¯ä»¥é™ä½ç½‘ç»œé€šä¿¡é‡ï¼Œæé«˜é€šä¿¡é€Ÿç‡,å¯ä»¥ä¸€å®šç¨‹åº¦ä¸Šç¡®ä¿æ•°æ®å®‰å…¨ã€‚</li>\n</ul>\n<h3 id=\"Mysql-Master-slave-çš„åŸç†\"><a href=\"#Mysql-Master-slave-çš„åŸç†\" class=\"headerlink\" title=\"Mysql Master slave çš„åŸç†\"></a>Mysql Master slave çš„åŸç†</h3><ul>\n<li><p><strong>ä¸»</strong>ï¼šbinlogçº¿ç¨‹â€”â€”è®°å½•ä¸‹æ‰€æœ‰æ”¹å˜äº†æ•°æ®åº“æ•°æ®çš„è¯­å¥ï¼Œæ”¾è¿›masterä¸Šçš„binlogä¸­ï¼›</p>\n</li>\n<li><p><strong>ä»</strong>ï¼šioçº¿ç¨‹â€”â€”åœ¨ä½¿ç”¨start slave ä¹‹åï¼Œè´Ÿè´£ä»masterä¸Šæ‹‰å– binlog å†…å®¹ï¼Œæ”¾è¿› è‡ªå·±çš„relay logä¸­ï¼›</p>\n</li>\n<li><p><strong>ä»</strong>ï¼šsqlæ‰§è¡Œçº¿ç¨‹â€”â€”æ‰§è¡Œrelay logä¸­çš„è¯­å¥ï¼›</p>\n</li>\n</ul>\n<h3 id=\"å¤‡ä»½\"><a href=\"#å¤‡ä»½\" class=\"headerlink\" title=\"å¤‡ä»½\"></a>å¤‡ä»½</h3><h4 id=\"å¤‡ä»½è®¡åˆ’ï¼Œmysqldumpä»¥åŠxtranbackupçš„å®ç°åŸç†\"><a href=\"#å¤‡ä»½è®¡åˆ’ï¼Œmysqldumpä»¥åŠxtranbackupçš„å®ç°åŸç†\" class=\"headerlink\" title=\"å¤‡ä»½è®¡åˆ’ï¼Œmysqldumpä»¥åŠxtranbackupçš„å®ç°åŸç†\"></a>å¤‡ä»½è®¡åˆ’ï¼Œmysqldumpä»¥åŠxtranbackupçš„å®ç°åŸç†</h4><ul>\n<li><p>å¤‡ä»½è®¡åˆ’</p>\n<ul>\n<li>è¿™é‡Œæ¯ä¸ªå…¬å¸éƒ½ä¸ä¸€æ ·</li>\n</ul>\n</li>\n<li><p>å¤‡ä»½æ¢å¤æ—¶é—´,è¿™é‡Œè·Ÿæœºå™¨ï¼Œå°¤å…¶æ˜¯ç¡¬ç›˜çš„é€Ÿç‡æœ‰å…³ç³»ï¼Œä»¥ä¸‹åˆ—ä¸¾å‡ ä¸ªä»…ä¾›å‚è€ƒ</p>\n<ul>\n<li><p>20Gçš„2åˆ†é’Ÿï¼ˆmysqldumpï¼‰</p>\n</li>\n<li><p>80Gçš„30åˆ†é’Ÿ(mysqldump)</p>\n</li>\n<li><p>111Gçš„30åˆ†é’Ÿï¼ˆmysqldump)</p>\n</li>\n<li><p>288Gçš„3å°æ—¶ï¼ˆxtra)</p>\n</li>\n<li><p>3Tçš„4å°æ—¶ï¼ˆxtra)</p>\n</li>\n<li><p>é€»è¾‘å¯¼å…¥æ—¶é—´ä¸€èˆ¬æ˜¯å¤‡ä»½æ—¶é—´çš„5å€ä»¥ä¸Š</p>\n</li>\n</ul>\n</li>\n<li><p>xtrabackupå®ç°åŸç†</p>\n<ul>\n<li>åœ¨InnoDBå†…éƒ¨ä¼šç»´æŠ¤ä¸€ä¸ªredoæ—¥å¿—æ–‡ä»¶ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥å«åšäº‹åŠ¡æ—¥å¿—æ–‡ä»¶ã€‚äº‹åŠ¡æ—¥å¿—ä¼šå­˜å‚¨æ¯ä¸€ä¸ªInnoDBè¡¨æ•°æ®çš„è®°å½•ä¿®æ”¹ã€‚å½“InnoDBå¯åŠ¨æ—¶ï¼ŒInnoDBä¼šæ£€æŸ¥æ•°æ®æ–‡ä»¶å’Œäº‹åŠ¡æ—¥å¿—ï¼Œå¹¶æ‰§è¡Œä¸¤ä¸ªæ­¥éª¤ï¼šå®ƒåº”ç”¨ï¼ˆå‰æ»šï¼‰å·²ç»æäº¤çš„äº‹åŠ¡æ—¥å¿—åˆ°æ•°æ®æ–‡ä»¶ï¼Œå¹¶å°†ä¿®æ”¹è¿‡ä½†æ²¡æœ‰æäº¤çš„æ•°æ®è¿›è¡Œå›æ»šæ“ä½œã€‚</li>\n</ul>\n</li>\n</ul>\n<h4 id=\"mysqldumpä¸­å¤‡ä»½å‡ºæ¥çš„sqlï¼Œå¦‚æœæˆ‘æƒ³sqlæ–‡ä»¶ä¸­ï¼Œä¸€è¡Œåªæœ‰ä¸€ä¸ªinsertâ€¦-value-çš„è¯ï¼Œæ€ä¹ˆåŠï¼Ÿå¦‚æœå¤‡ä»½éœ€è¦å¸¦ä¸Šmasterçš„å¤åˆ¶ç‚¹ä¿¡æ¯æ€ä¹ˆåŠï¼Ÿ\"><a href=\"#mysqldumpä¸­å¤‡ä»½å‡ºæ¥çš„sqlï¼Œå¦‚æœæˆ‘æƒ³sqlæ–‡ä»¶ä¸­ï¼Œä¸€è¡Œåªæœ‰ä¸€ä¸ªinsertâ€¦-value-çš„è¯ï¼Œæ€ä¹ˆåŠï¼Ÿå¦‚æœå¤‡ä»½éœ€è¦å¸¦ä¸Šmasterçš„å¤åˆ¶ç‚¹ä¿¡æ¯æ€ä¹ˆåŠï¼Ÿ\" class=\"headerlink\" title=\"mysqldumpä¸­å¤‡ä»½å‡ºæ¥çš„sqlï¼Œå¦‚æœæˆ‘æƒ³sqlæ–‡ä»¶ä¸­ï¼Œä¸€è¡Œåªæœ‰ä¸€ä¸ªinsertâ€¦.value()çš„è¯ï¼Œæ€ä¹ˆåŠï¼Ÿå¦‚æœå¤‡ä»½éœ€è¦å¸¦ä¸Šmasterçš„å¤åˆ¶ç‚¹ä¿¡æ¯æ€ä¹ˆåŠï¼Ÿ\"></a>mysqldumpä¸­å¤‡ä»½å‡ºæ¥çš„sqlï¼Œå¦‚æœæˆ‘æƒ³sqlæ–‡ä»¶ä¸­ï¼Œä¸€è¡Œåªæœ‰ä¸€ä¸ªinsertâ€¦.value()çš„è¯ï¼Œæ€ä¹ˆåŠï¼Ÿå¦‚æœå¤‡ä»½éœ€è¦å¸¦ä¸Šmasterçš„å¤åˆ¶ç‚¹ä¿¡æ¯æ€ä¹ˆåŠï¼Ÿ</h4><figure class=\"highlight sql\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">--skip-extended-insert</span></span><br><span class=\"line\"></span><br><span class=\"line\">[root@helei-zhuanshu ~]<span class=\"comment\"># mysqldump -uroot -p helei --skip-extended-insert</span></span><br><span class=\"line\"></span><br><span class=\"line\">Enter password:</span><br><span class=\"line\"></span><br><span class=\"line\">KEY `idx_c1` (`c1`),</span><br><span class=\"line\"></span><br><span class=\"line\">KEY `idx_c2` (`c2`)</span><br><span class=\"line\"></span><br><span class=\"line\">) ENGINE=InnoDB AUTO_INCREMENT=51 DEFAULT CHARSET=latin1;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/*!40101 SET character_set_client = @saved_cs_client */</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">--</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">-- Dumping data for table `helei`</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">--</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">LOCK</span> <span class=\"keyword\">TABLES</span> <span class=\"string\">`helei`</span> WRITE;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/*!40000 ALTER TABLE `helei` DISABLE KEYS */</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">INSERT</span> <span class=\"keyword\">INTO</span> <span class=\"string\">`helei`</span> <span class=\"keyword\">VALUES</span> (<span class=\"number\">1</span>,<span class=\"number\">32</span>,<span class=\"number\">37</span>,<span class=\"number\">38</span>,<span class=\"string\">'2016-10-18 06:19:24'</span>,<span class=\"string\">'susususususususususususu'</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">INSERT</span> <span class=\"keyword\">INTO</span> <span class=\"string\">`helei`</span> <span class=\"keyword\">VALUES</span> (<span class=\"number\">2</span>,<span class=\"number\">37</span>,<span class=\"number\">46</span>,<span class=\"number\">21</span>,<span class=\"string\">'2016-10-18 06:19:24'</span>,<span class=\"string\">'susususususu'</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">INSERT</span> <span class=\"keyword\">INTO</span> <span class=\"string\">`helei`</span> <span class=\"keyword\">VALUES</span> (<span class=\"number\">3</span>,<span class=\"number\">21</span>,<span class=\"number\">5</span>,<span class=\"number\">14</span>,<span class=\"string\">'2016-10-18 06:19:24'</span>,<span class=\"string\">'susu'</span>);</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"æ‰©å±•\"><a href=\"#æ‰©å±•\" class=\"headerlink\" title=\"æ‰©å±•\"></a>æ‰©å±•</h3><h4 id=\"å¤§è¡¨è¿è¡¨æŸ¥è¯¢\"><a href=\"#å¤§è¡¨è¿è¡¨æŸ¥è¯¢\" class=\"headerlink\" title=\"å¤§è¡¨è¿è¡¨æŸ¥è¯¢\"></a>å¤§è¡¨è¿è¡¨æŸ¥è¯¢</h4><p>ä¸€ä¸ª6äº¿çš„è¡¨aï¼Œä¸€ä¸ª3äº¿çš„è¡¨bï¼Œé€šè¿‡å¤–é—´tidå…³è”ï¼Œä½ å¦‚ä½•æœ€å¿«çš„æŸ¥è¯¢å‡ºæ»¡è¶³æ¡ä»¶çš„ç¬¬50000åˆ°ç¬¬50200ä¸­çš„è¿™200æ¡æ•°æ®è®°å½•ã€‚</p>\n<ul>\n<li>1ã€å¦‚æœAè¡¨TIDæ˜¯è‡ªå¢é•¿,å¹¶ä¸”æ˜¯è¿ç»­çš„,Bè¡¨çš„IDä¸ºç´¢å¼•</li>\n</ul>\n<figure class=\"highlight sql\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">select</span> * <span class=\"keyword\">from</span> a,b <span class=\"keyword\">where</span> a.tid = b.id <span class=\"keyword\">and</span> a.tid&gt;<span class=\"number\">500000</span> <span class=\"keyword\">limit</span> <span class=\"number\">200</span>;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>2ã€å¦‚æœAè¡¨çš„TIDä¸æ˜¯è¿ç»­çš„,é‚£ä¹ˆå°±éœ€è¦ä½¿ç”¨è¦†ç›–ç´¢å¼•.TIDè¦ä¹ˆæ˜¯ä¸»é”®,è¦ä¹ˆæ˜¯è¾…åŠ©ç´¢å¼•,Bè¡¨IDä¹Ÿéœ€è¦æœ‰ç´¢å¼•ã€‚</li>\n</ul>\n<figure class=\"highlight sql\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">select</span> * <span class=\"keyword\">from</span> b , (<span class=\"keyword\">select</span> tid <span class=\"keyword\">from</span> a <span class=\"keyword\">limit</span> <span class=\"number\">50000</span>,<span class=\"number\">200</span>) a <span class=\"keyword\">where</span> b.id = a .tid;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"æ•°æ®åº“çš„ä¸‰èŒƒå¼æ˜¯ä»€ä¹ˆ\"><a href=\"#æ•°æ®åº“çš„ä¸‰èŒƒå¼æ˜¯ä»€ä¹ˆ\" class=\"headerlink\" title=\"æ•°æ®åº“çš„ä¸‰èŒƒå¼æ˜¯ä»€ä¹ˆ\"></a>æ•°æ®åº“çš„ä¸‰èŒƒå¼æ˜¯ä»€ä¹ˆ</h4><blockquote>\n<ul>\n<li>ç¬¬ä¸€èŒƒå¼ï¼šåˆ—ä¸å¯å†åˆ†ï¼Œå­—æ®µå…·å¤‡å•ä¸€èŒè´£</li>\n<li>ç¬¬äºŒèŒƒå¼ï¼šè¡Œå¯ä»¥å”¯ä¸€åŒºåˆ†ï¼Œä¸»é”®çº¦æŸ</li>\n<li>ç¬¬ä¸‰èŒƒå¼ï¼šè¡¨çš„éä¸»å±æ€§ä¸èƒ½ä¾èµ–ä¸å…¶ä»–è¡¨çš„éä¸»å±æ€§ å¤–é”®çº¦æŸ</li>\n</ul>\n</blockquote>\n<ul>\n<li>ç¬¬ä¸€èŒƒå¼ï¼ˆ1NFï¼‰ï¼šæ•°æ®åº“è¡¨ä¸­çš„å­—æ®µéƒ½æ˜¯å•ä¸€å±æ€§çš„ï¼Œä¸å¯å†åˆ†ã€‚è¿™ä¸ªå•ä¸€å±æ€§ç”±åŸºæœ¬ç±»å‹æ„æˆï¼ŒåŒ…æ‹¬æ•´å‹ã€å®æ•°ã€å­—ç¬¦å‹ã€é€»è¾‘å‹ã€æ—¥æœŸå‹ç­‰ã€‚</li>\n<li>ç¬¬äºŒèŒƒå¼ï¼ˆ2NFï¼‰ï¼šæ•°æ®åº“è¡¨ä¸­ä¸å­˜åœ¨éå…³é”®å­—æ®µå¯¹ä»»ä¸€å€™é€‰å…³é”®å­—æ®µçš„éƒ¨åˆ†å‡½æ•°ä¾èµ–ï¼ˆéƒ¨åˆ†å‡½æ•°ä¾èµ–æŒ‡çš„æ˜¯å­˜åœ¨ç»„åˆå…³é”®å­—ä¸­çš„æŸäº›å­—æ®µå†³å®šéå…³é”®å­—æ®µçš„æƒ…å†µï¼‰ï¼Œä¹Ÿå³æ‰€æœ‰éå…³é”®å­—æ®µéƒ½å®Œå…¨ä¾èµ–äºä»»æ„ä¸€ç»„å€™é€‰å…³é”®å­—ã€‚</li>\n<li>ç¬¬ä¸‰èŒƒå¼ï¼ˆ3NFï¼‰ï¼šåœ¨ç¬¬äºŒèŒƒå¼çš„åŸºç¡€ä¸Šï¼Œæ•°æ®è¡¨ä¸­å¦‚æœä¸å­˜åœ¨éå…³é”®å­—æ®µå¯¹ä»»ä¸€å€™é€‰å…³é”®å­—æ®µçš„ä¼ é€’å‡½æ•°ä¾èµ–åˆ™ç¬¦åˆç¬¬ä¸‰èŒƒå¼ã€‚æ‰€è°“ä¼ é€’å‡½æ•°ä¾èµ–ï¼ŒæŒ‡çš„æ˜¯å¦‚ æœå­˜åœ¨â€A â†’ B â†’ Câ€çš„å†³å®šå…³ç³»ï¼Œåˆ™Cä¼ é€’å‡½æ•°ä¾èµ–äºAã€‚å› æ­¤ï¼Œæ»¡è¶³ç¬¬ä¸‰èŒƒå¼çš„æ•°æ®åº“è¡¨åº”è¯¥ä¸å­˜åœ¨å¦‚ä¸‹ä¾èµ–å…³ç³»ï¼š å…³é”®å­—æ®µ â†’ éå…³é”®å­—æ®µ x â†’ éå…³é”®å­—æ®µy</li>\n<li>ä¸”ä¸‰å¤§èŒƒå¼æ˜¯ä¸€çº§ä¸€çº§ä¾èµ–çš„ï¼Œç¬¬äºŒèŒƒå¼å»ºç«‹åœ¨ç¬¬ä¸€èŒƒå¼ä¸Šï¼Œç¬¬ä¸‰èŒƒå¼å»ºç«‹ç¬¬ä¸€ç¬¬äºŒèŒƒå¼ä¸Šã€‚</li>\n</ul>\n<h4 id=\"Mysql-å¤§å°å†™é—®é¢˜\"><a href=\"#Mysql-å¤§å°å†™é—®é¢˜\" class=\"headerlink\" title=\"Mysql å¤§å°å†™é—®é¢˜\"></a>Mysql å¤§å°å†™é—®é¢˜</h4><ul>\n<li>è¡¨åã€è¡¨åˆ«åã€å­—æ®µåã€å­—æ®µåˆ«åéƒ½å°å†™ã€‚SQLä¿ç•™å­—æ®µã€å‡½æ•°åã€ç»‘å®šå˜é‡åéƒ½å¤§å†™ã€‚</li>\n</ul>\n<h4 id=\"DDLè®¾è®¡æ•°æ®è¡¨çš„åŸåˆ™\"><a href=\"#DDLè®¾è®¡æ•°æ®è¡¨çš„åŸåˆ™\" class=\"headerlink\" title=\"DDLè®¾è®¡æ•°æ®è¡¨çš„åŸåˆ™\"></a>DDLè®¾è®¡æ•°æ®è¡¨çš„åŸåˆ™</h4><ol>\n<li>æ•°æ®è¡¨è¶Šå°‘è¶Šå¥½</li>\n<li>æ•°æ®è¡¨ä¸­çš„å­—æ®µè¶Šå°‘è¶Šå¥½</li>\n<li>æ•°æ®è¡¨ä¸­è”åˆä¸»é”®çš„å­—æ®µè¶Šå°‘è¶Šå¥½</li>\n<li>ä½¿ç”¨ä¸»é”®å’Œå¤–é”®è¶Šå¤šè¶Šå¥½</li>\n</ol>\n<h4 id=\"varcharä¸charçš„åŒºåˆ«ä»¥åŠvarchar-50-ä¸­çš„50ä»£è¡¨çš„æ¶µä¹‰\"><a href=\"#varcharä¸charçš„åŒºåˆ«ä»¥åŠvarchar-50-ä¸­çš„50ä»£è¡¨çš„æ¶µä¹‰\" class=\"headerlink\" title=\"varcharä¸charçš„åŒºåˆ«ä»¥åŠvarchar(50)ä¸­çš„50ä»£è¡¨çš„æ¶µä¹‰\"></a>varcharä¸charçš„åŒºåˆ«ä»¥åŠvarchar(50)ä¸­çš„50ä»£è¡¨çš„æ¶µä¹‰</h4><ul>\n<li>varcharä¸charçš„åŒºåˆ«<ul>\n<li>CHARå’ŒVARCHARç±»å‹åœ¨å­˜å‚¨å’Œæ£€ç´¢æ–¹é¢æœ‰æ‰€ä¸åŒï¼ŒCHARæ˜¯ä¸€ç§å›ºå®šé•¿åº¦çš„ç±»å‹ï¼ŒVARCHARåˆ™æ˜¯ä¸€ç§å¯å˜é•¿åº¦çš„ç±»å‹ã€‚</li>\n<li>CHARåˆ—é•¿åº¦å›ºå®šä¸ºåˆ›å»ºè¡¨æ—¶å£°æ˜çš„é•¿åº¦ï¼Œé•¿åº¦å€¼èŒƒå›´æ˜¯1åˆ°255å½“CHARå€¼è¢«å­˜å‚¨æ—¶ï¼Œå®ƒä»¬è¢«ç”¨ç©ºæ ¼å¡«å……åˆ°ç‰¹å®šé•¿åº¦ï¼Œæ£€ç´¢CHARå€¼æ—¶éœ€åˆ é™¤å°¾éšç©ºæ ¼ã€‚</li>\n</ul>\n</li>\n<li>varchar(50)ä¸­50çš„æ¶µä¹‰<ul>\n<li>æœ€å¤šå­˜æ”¾50ä¸ªå­—ç¬¦ï¼Œvarchar(50)å’Œ(200)å­˜å‚¨helloæ‰€å ç©ºé—´ä¸€æ ·ï¼Œä½†åè€…åœ¨æ’åºæ—¶ä¼šæ¶ˆè€—æ›´å¤šå†…å­˜ï¼Œå› ä¸ºorder by colé‡‡ç”¨fixed_lengthè®¡ç®—colé•¿åº¦(memoryå¼•æ“ä¹Ÿä¸€æ ·)</li>\n</ul>\n</li>\n<li>intï¼ˆ20ï¼‰ä¸­20çš„æ¶µä¹‰<ul>\n<li>æ˜¯æŒ‡æ˜¾ç¤ºå­—ç¬¦çš„é•¿åº¦ä½†è¦åŠ å‚æ•°çš„ï¼Œæœ€å¤§ä¸º255ï¼Œæ¯”å¦‚å®ƒæ˜¯è®°å½•è¡Œæ•°çš„id,æ’å…¥10ç¬”èµ„æ–™ï¼Œå®ƒå°±æ˜¾ç¤º00000000001 <del>~</del>00000000010ï¼Œå½“å­—ç¬¦çš„ä½æ•°è¶…è¿‡11,å®ƒä¹Ÿåªæ˜¾ç¤º11ä½ï¼Œå¦‚æœä½ æ²¡æœ‰åŠ é‚£ä¸ªè®©å®ƒæœªæ»¡11ä½å°±å‰é¢åŠ 0çš„å‚æ•°ï¼Œå®ƒä¸ä¼šåœ¨å‰é¢åŠ 0</li>\n<li>20è¡¨ç¤ºæœ€å¤§æ˜¾ç¤ºå®½åº¦ä¸º20ï¼Œä½†ä»å 4å­—èŠ‚å­˜å‚¨ï¼Œå­˜å‚¨èŒƒå›´ä¸å˜ã€‚</li>\n</ul>\n</li>\n<li>mysqlä¸ºä»€ä¹ˆè¿™ä¹ˆè®¾è®¡<ul>\n<li>å¯¹å¤§å¤šæ•°åº”ç”¨æ²¡æœ‰æ„ä¹‰ï¼Œåªæ˜¯è§„å®šä¸€äº›å·¥å…·ç”¨æ¥æ˜¾ç¤ºå­—ç¬¦çš„ä¸ªæ•°ï¼›int(1)å’Œint(20)å­˜å‚¨å’Œè®¡ç®—å‡ä¸€æ ·ã€‚</li>\n</ul>\n</li>\n</ul>\n<h4 id=\"è¡¨ä¸­æœ‰å¤§å­—æ®µX-ä¾‹å¦‚ï¼štextç±»å‹-ï¼Œä¸”å­—æ®µXä¸ä¼šç»å¸¸æ›´æ–°ï¼Œä»¥è¯»ä¸ºä¸ºä¸»ã€‚å¦‚ä½•æ‹†åˆ†\"><a href=\"#è¡¨ä¸­æœ‰å¤§å­—æ®µX-ä¾‹å¦‚ï¼štextç±»å‹-ï¼Œä¸”å­—æ®µXä¸ä¼šç»å¸¸æ›´æ–°ï¼Œä»¥è¯»ä¸ºä¸ºä¸»ã€‚å¦‚ä½•æ‹†åˆ†\" class=\"headerlink\" title=\"è¡¨ä¸­æœ‰å¤§å­—æ®µX(ä¾‹å¦‚ï¼štextç±»å‹)ï¼Œä¸”å­—æ®µXä¸ä¼šç»å¸¸æ›´æ–°ï¼Œä»¥è¯»ä¸ºä¸ºä¸»ã€‚å¦‚ä½•æ‹†åˆ†\"></a>è¡¨ä¸­æœ‰å¤§å­—æ®µX(ä¾‹å¦‚ï¼štextç±»å‹)ï¼Œä¸”å­—æ®µXä¸ä¼šç»å¸¸æ›´æ–°ï¼Œä»¥è¯»ä¸ºä¸ºä¸»ã€‚å¦‚ä½•æ‹†åˆ†</h4><blockquote>\n<p>æ‹†å¸¦æ¥çš„é—®é¢˜ï¼šè¿æ¥æ¶ˆè€— + å­˜å‚¨æ‹†åˆ†ç©ºé—´ï¼›ä¸æ‹†å¯èƒ½å¸¦æ¥çš„é—®é¢˜ï¼šæŸ¥è¯¢æ€§èƒ½ï¼›</p>\n</blockquote>\n<ul>\n<li>1ã€å¦‚æœèƒ½å®¹å¿æ‹†åˆ†å¸¦æ¥çš„ç©ºé—´é—®é¢˜,æ‹†çš„è¯æœ€å¥½å’Œç»å¸¸è¦æŸ¥è¯¢çš„è¡¨çš„ä¸»é”®åœ¨ç‰©ç†ç»“æ„ä¸Šæ”¾ç½®åœ¨ä¸€èµ·(åˆ†åŒº) é¡ºåºIO,å‡å°‘è¿æ¥æ¶ˆè€—,æœ€åè¿™æ˜¯ä¸€ä¸ªæ–‡æœ¬åˆ—å†åŠ ä¸Šä¸€ä¸ªå…¨æ–‡ç´¢å¼•æ¥å°½é‡æŠµæ¶ˆè¿æ¥æ¶ˆè€—</li>\n<li>2ã€å¦‚æœèƒ½å®¹å¿ä¸æ‹†åˆ†å¸¦æ¥çš„æŸ¥è¯¢æ€§èƒ½æŸå¤±çš„è¯:ä¸Šé¢çš„æ–¹æ¡ˆåœ¨æŸä¸ªæè‡´æ¡ä»¶ä¸‹è‚¯å®šä¼šå‡ºç°é—®é¢˜,é‚£ä¹ˆä¸æ‹†å°±æ˜¯æœ€å¥½çš„é€‰æ‹©ã€‚</li>\n</ul>\n<h4 id=\"ä»€ä¹ˆæ˜¯ä¸´æ—¶è¡¨ï¼Œä½•æ—¶åˆ é™¤ä¸´æ—¶è¡¨\"><a href=\"#ä»€ä¹ˆæ˜¯ä¸´æ—¶è¡¨ï¼Œä½•æ—¶åˆ é™¤ä¸´æ—¶è¡¨\" class=\"headerlink\" title=\"ä»€ä¹ˆæ˜¯ä¸´æ—¶è¡¨ï¼Œä½•æ—¶åˆ é™¤ä¸´æ—¶è¡¨\"></a>ä»€ä¹ˆæ˜¯ä¸´æ—¶è¡¨ï¼Œä½•æ—¶åˆ é™¤ä¸´æ—¶è¡¨</h4><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">åœ¨ MySQL ä¸­ï¼Œæœ‰ä¸‰ç§ç±»å‹çš„è¡¨</span><br><span class=\"line\">ä¸€ç§æ˜¯&#96;æ°¸ä¹…è¡¨&#96;ï¼Œæ°¸ä¹…è¡¨å°±æ˜¯åˆ›å»ºä»¥åç”¨æ¥é•¿æœŸä¿å­˜æ•°æ®çš„è¡¨</span><br><span class=\"line\">ä¸€ç§æ˜¯&#96;ä¸´æ—¶è¡¨&#96;ï¼Œä¸´æ—¶è¡¨ä¹Ÿæœ‰ä¸¤ç±»ï¼Œä¸€ç§æ˜¯å’Œæ°¸ä¹…è¡¨ä¸€æ ·ï¼Œåªä¿å­˜ä¸´æ—¶æ•°æ®ï¼Œä½†æ˜¯èƒ½å¤Ÿé•¿ä¹…å­˜åœ¨çš„ï¼›è¿˜æœ‰ä¸€ç§æ˜¯ä¸´æ—¶åˆ›å»ºçš„ï¼ŒSQL è¯­å¥æ‰§è¡Œå®Œæˆå°±ä¼šåˆ é™¤ã€‚</span><br><span class=\"line\">ä¸€ç§æ˜¯&#96;è™šè¡¨&#96;ï¼Œè™šè¡¨å…¶å®å°±æ˜¯&#96;è§†å›¾&#96;ï¼Œæ•°æ®å¯èƒ½ä¼šæ¥è‡ªå¤šå¼ è¡¨çš„æ‰§è¡Œç»“æœã€‚</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>MySQL ä¼šåœ¨ä¸‹é¢è¿™å‡ ç§æƒ…å†µäº§ç”Ÿä¸´æ—¶è¡¨<ul>\n<li>ä½¿ç”¨ UNION æŸ¥è¯¢ï¼šUNION æœ‰ä¸¤ç§ï¼Œä¸€ç§æ˜¯<code>UNION</code> ï¼Œä¸€ç§æ˜¯ <code>UNION ALL</code> ï¼Œå®ƒä»¬éƒ½ç”¨äºè”åˆæŸ¥è¯¢ï¼›åŒºåˆ«æ˜¯ ä½¿ç”¨ UNION ä¼šå»æ‰ä¸¤ä¸ªè¡¨ä¸­çš„é‡å¤æ•°æ®ï¼Œç›¸å½“äºå¯¹ç»“æœé›†åšäº†ä¸€ä¸‹<code>å»é‡(distinct)</code>ã€‚ä½¿ç”¨ UNION ALLï¼Œåˆ™ä¸ä¼šæ’é‡ï¼Œè¿”å›æ‰€æœ‰çš„è¡Œã€‚ä½¿ç”¨ UNION æŸ¥è¯¢ä¼šäº§ç”Ÿä¸´æ—¶è¡¨ã€‚</li>\n<li>ä½¿ç”¨ <code>TEMPTABLE ç®—æ³•</code>æˆ–è€…æ˜¯ UNION æŸ¥è¯¢ä¸­çš„è§†å›¾ã€‚TEMPTABLE ç®—æ³•æ˜¯ä¸€ç§åˆ›å»ºä¸´æ—¶è¡¨çš„ç®—æ³•ï¼Œå®ƒæ˜¯å°†ç»“æœæ”¾ç½®åˆ°ä¸´æ—¶è¡¨ä¸­ï¼Œæ„å‘³è¿™è¦ MySQL è¦å…ˆåˆ›å»ºå¥½ä¸€ä¸ªä¸´æ—¶è¡¨ï¼Œç„¶åå°†ç»“æœæ”¾åˆ°ä¸´æ—¶è¡¨ä¸­å»ï¼Œç„¶åå†ä½¿ç”¨è¿™ä¸ªä¸´æ—¶è¡¨è¿›è¡Œç›¸åº”çš„æŸ¥è¯¢ã€‚</li>\n<li>ORDER BY å’Œ GROUP BY çš„å­å¥ä¸ä¸€æ ·æ—¶ä¹Ÿä¼šäº§ç”Ÿä¸´æ—¶è¡¨ã€‚</li>\n<li>DISTINCT æŸ¥è¯¢å¹¶ä¸”åŠ ä¸Š ORDER BY æ—¶ï¼›</li>\n<li>SQL ç”¨åˆ° SQL_SMALL_RESULT é€‰é¡¹æ—¶ï¼›å¦‚æœæŸ¥è¯¢ç»“æœæ¯”è¾ƒå°çš„æ—¶å€™ï¼Œå¯ä»¥åŠ ä¸Š SQL_SMALL_RESULT æ¥ä¼˜åŒ–ï¼Œäº§ç”Ÿä¸´æ—¶è¡¨</li>\n<li>FROM ä¸­çš„å­æŸ¥è¯¢ï¼›</li>\n<li>EXPLAIN æŸ¥çœ‹æ‰§è¡Œè®¡åˆ’ç»“æœçš„ Extra åˆ—ä¸­ï¼Œå¦‚æœä½¿ç”¨ <code>Using Temporary</code> å°±è¡¨ç¤ºä¼šç”¨åˆ°ä¸´æ—¶è¡¨ã€‚</li>\n</ul>\n</li>\n</ul>\n<h4 id=\"Existsä¸in\"><a href=\"#Existsä¸in\" class=\"headerlink\" title=\"Existsä¸in\"></a>Existsä¸in</h4><ul>\n<li>å°†è®¾Aã€Bä¸¤è¡¨ï¼Œèµ°ç´¢å¼•çš„æƒ…å†µä¸‹ã€‚æ ¹æ®Aã€Bè¡¨çš„å¤§å°æ¯”è¾ƒï¼Œå¦‚æœAè¡¨å¤§äºBè¡¨é‚£ä¹ˆINçš„æŸ¥è¯¢æ•ˆç‡æ¯”EXISTSé«˜ã€‚</li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">SELECT * FROM A WHERE cc IN (SELECT cc FROM B)</span><br><span class=\"line\"></span><br><span class=\"line\">SELECT * FROM A WHERE EXISTS (SELECT cc FROM B WHERE B.cc&#x3D;A.cc)</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"æµ‹è¯•ç¯å¢ƒæ‰“å¼€profiling\"><a href=\"#æµ‹è¯•ç¯å¢ƒæ‰“å¼€profiling\" class=\"headerlink\" title=\"æµ‹è¯•ç¯å¢ƒæ‰“å¼€profiling\"></a>æµ‹è¯•ç¯å¢ƒæ‰“å¼€profiling</h4><ul>\n<li>é¦–å…ˆæˆ‘ä»¬éœ€è¦çœ‹ä¸‹ profiling æ˜¯å¦å¼€å¯ï¼Œå¼€å¯å®ƒå¯ä»¥è®© MySQL æ”¶é›†åœ¨ SQL æ‰§è¡Œæ—¶æ‰€ä½¿ç”¨çš„èµ„æºæƒ…å†µï¼Œå‘½ä»¤å¦‚ä¸‹ï¼š</li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">mysql&gt; select @@profiling;</span><br><span class=\"line\"># profiling&#x3D;0 ä»£è¡¨å…³é—­ï¼Œæˆ‘ä»¬éœ€è¦æŠŠ profiling æ‰“å¼€ï¼Œå³è®¾ç½®ä¸º 1ï¼š</span><br><span class=\"line\">mysql&gt; set profiling&#x3D;1;</span><br><span class=\"line\"># ç„¶åæˆ‘ä»¬æ‰§è¡Œä¸€ä¸ª SQL æŸ¥è¯¢ï¼ˆä½ å¯ä»¥æ‰§è¡Œä»»ä½•ä¸€ä¸ª SQL æŸ¥è¯¢ï¼‰ï¼š</span><br><span class=\"line\">mysql&gt; select * from wucai.heros;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"å»é™¤é‡å¤è¡Œ\"><a href=\"#å»é™¤é‡å¤è¡Œ\" class=\"headerlink\" title=\"å»é™¤é‡å¤è¡Œ\"></a>å»é™¤é‡å¤è¡Œ</h4><ol>\n<li>DISTINCT éœ€è¦æ”¾åˆ°æ‰€æœ‰åˆ—åçš„å‰é¢</li>\n</ol>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\"># è¿™ä¹ˆå†™ä¼šæŠ¥é”™</span><br><span class=\"line\">SELECT name, DISTINCT age FROM us</span><br></pre></td></tr></table></figure>\n\n<ol start=\"2\">\n<li>DISTINCT å…¶å®æ˜¯å¯¹åé¢æ‰€æœ‰åˆ—åçš„ç»„åˆè¿›è¡Œå»é‡ã€‚</li>\n</ol>\n<h4 id=\"dropã€deleteä¸truncate\"><a href=\"#dropã€deleteä¸truncate\" class=\"headerlink\" title=\"dropã€deleteä¸truncate\"></a>dropã€deleteä¸truncate</h4><blockquote>\n<p>SQLä¸­çš„dropã€deleteã€truncateéƒ½è¡¨ç¤ºåˆ é™¤ï¼Œä½†æ˜¯ä¸‰è€…æœ‰ä¸€äº›å·®åˆ«</p>\n</blockquote>\n<ul>\n<li><p>deleteå’Œtruncateåªåˆ é™¤è¡¨çš„æ•°æ®ä¸åˆ é™¤è¡¨çš„ç»“æ„</p>\n</li>\n<li><p>é€Ÿåº¦,ä¸€èˆ¬æ¥è¯´: drop&gt; truncate &gt;delete</p>\n</li>\n<li><p>deleteè¯­å¥æ˜¯dml,è¿™ä¸ªæ“ä½œä¼šæ”¾åˆ°rollback segementä¸­,äº‹åŠ¡æäº¤ä¹‹åæ‰ç”Ÿæ•ˆ;</p>\n</li>\n<li><p>å¦‚æœæœ‰ç›¸åº”çš„trigger,æ‰§è¡Œçš„æ—¶å€™å°†è¢«è§¦å‘. truncate,dropæ˜¯ddl, æ“ä½œç«‹å³ç”Ÿæ•ˆ,åŸæ•°æ®ä¸æ”¾åˆ°rollback segmentä¸­,ä¸èƒ½å›æ»š. æ“ä½œä¸è§¦å‘triggerã€‚</p>\n</li>\n<li><p>ä¸å†éœ€è¦ä¸€å¼ è¡¨çš„æ—¶å€™ï¼Œç”¨drop</p>\n</li>\n<li><p>æƒ³åˆ é™¤éƒ¨åˆ†æ•°æ®è¡Œæ—¶å€™ï¼Œç”¨deleteï¼Œå¹¶ä¸”å¸¦ä¸Šwhereå­å¥</p>\n</li>\n<li><p>ä¿ç•™è¡¨è€Œåˆ é™¤æ‰€æœ‰æ•°æ®çš„æ—¶å€™ç”¨truncate</p>\n</li>\n</ul>\n<h4 id=\"in-not-in-exists-not-exists-å®ƒä»¬æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Œæ•ˆç‡å¦‚ä½•ï¼Ÿ\"><a href=\"#in-not-in-exists-not-exists-å®ƒä»¬æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Œæ•ˆç‡å¦‚ä½•ï¼Ÿ\" class=\"headerlink\" title=\"in, not in , exists , not exists å®ƒä»¬æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Œæ•ˆç‡å¦‚ä½•ï¼Ÿ\"></a>in, not in , exists , not exists å®ƒä»¬æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Œæ•ˆç‡å¦‚ä½•ï¼Ÿ</h4><ul>\n<li><a href=\"https://segmentfault.com/a/1190000023825926\" target=\"_blank\" rel=\"noopener\">å‚è€ƒæ–‡çŒ®</a></li>\n</ul>\n<h4 id=\"ä½ æ˜¯å¦åšè¿‡ä¸»ä»ä¸€è‡´æ€§æ ¡éªŒï¼Œå¦‚æœæœ‰ï¼Œæ€ä¹ˆåšçš„ï¼Œå¦‚æœæ²¡æœ‰ï¼Œä½ æ‰“ç®—æ€ä¹ˆåšï¼Ÿ\"><a href=\"#ä½ æ˜¯å¦åšè¿‡ä¸»ä»ä¸€è‡´æ€§æ ¡éªŒï¼Œå¦‚æœæœ‰ï¼Œæ€ä¹ˆåšçš„ï¼Œå¦‚æœæ²¡æœ‰ï¼Œä½ æ‰“ç®—æ€ä¹ˆåšï¼Ÿ\" class=\"headerlink\" title=\"ä½ æ˜¯å¦åšè¿‡ä¸»ä»ä¸€è‡´æ€§æ ¡éªŒï¼Œå¦‚æœæœ‰ï¼Œæ€ä¹ˆåšçš„ï¼Œå¦‚æœæ²¡æœ‰ï¼Œä½ æ‰“ç®—æ€ä¹ˆåšï¼Ÿ\"></a>ä½ æ˜¯å¦åšè¿‡ä¸»ä»ä¸€è‡´æ€§æ ¡éªŒï¼Œå¦‚æœæœ‰ï¼Œæ€ä¹ˆåšçš„ï¼Œå¦‚æœæ²¡æœ‰ï¼Œä½ æ‰“ç®—æ€ä¹ˆåšï¼Ÿ</h4><ul>\n<li>ä¸»ä»ä¸€è‡´æ€§æ ¡éªŒæœ‰å¤šç§å·¥å…· ä¾‹å¦‚checksumã€mysqldiffã€pt-table-checksumç­‰ã€‚</li>\n</ul>\n<h4 id=\"ä½ ä»¬æ•°æ®åº“æ˜¯å¦æ”¯æŒemojiè¡¨æƒ…ï¼Œå¦‚æœä¸æ”¯æŒï¼Œå¦‚ä½•æ“ä½œï¼Ÿ\"><a href=\"#ä½ ä»¬æ•°æ®åº“æ˜¯å¦æ”¯æŒemojiè¡¨æƒ…ï¼Œå¦‚æœä¸æ”¯æŒï¼Œå¦‚ä½•æ“ä½œï¼Ÿ\" class=\"headerlink\" title=\"ä½ ä»¬æ•°æ®åº“æ˜¯å¦æ”¯æŒemojiè¡¨æƒ…ï¼Œå¦‚æœä¸æ”¯æŒï¼Œå¦‚ä½•æ“ä½œï¼Ÿ\"></a>ä½ ä»¬æ•°æ®åº“æ˜¯å¦æ”¯æŒemojiè¡¨æƒ…ï¼Œå¦‚æœä¸æ”¯æŒï¼Œå¦‚ä½•æ“ä½œï¼Ÿ</h4><ul>\n<li>å¦‚æœæ˜¯utf8å­—ç¬¦é›†çš„è¯ï¼Œéœ€è¦å‡çº§è‡³utf8_mb4æ–¹å¯æ”¯æŒã€‚</li>\n</ul>\n<h4 id=\"Too-many-connections\"><a href=\"#Too-many-connections\" class=\"headerlink\" title=\"Too many connections\"></a>Too many connections</h4><blockquote>\n<p>è¿æ¥æ•°è¶…å‡º Mysql çš„æœ€å¤§è¿æ¥é™åˆ¶</p>\n</blockquote>\n<ul>\n<li><p>è§£å†³æ–¹æ³•ï¼š</p>\n</li>\n<li><ul>\n<li>1ã€åœ¨ my.cnf é…ç½®æ–‡ä»¶é‡Œé¢å¢åŠ è¿æ¥æ•°ï¼Œç„¶åé‡å¯ MySQL æœåŠ¡ã€‚max_connections = 10000</li>\n<li>2ã€ä¸´æ—¶ä¿®æ”¹æœ€å¤§è¿æ¥æ•°ï¼Œé‡å¯åä¸ç”Ÿæ•ˆã€‚éœ€è¦åœ¨ my.cnf é‡Œé¢ä¿®æ”¹é…ç½®æ–‡ä»¶ï¼Œä¸‹æ¬¡é‡å¯ç”Ÿæ•ˆã€‚</li>\n</ul>\n</li>\n</ul>\n<h4 id=\"MySQLæ•°æ®åº“cpué£™å‡åˆ°100-çš„è¯æ€ä¹ˆå¤„ç†ï¼Ÿ\"><a href=\"#MySQLæ•°æ®åº“cpué£™å‡åˆ°100-çš„è¯æ€ä¹ˆå¤„ç†ï¼Ÿ\" class=\"headerlink\" title=\"MySQLæ•°æ®åº“cpué£™å‡åˆ°100%çš„è¯æ€ä¹ˆå¤„ç†ï¼Ÿ\"></a>MySQLæ•°æ®åº“cpué£™å‡åˆ°100%çš„è¯æ€ä¹ˆå¤„ç†ï¼Ÿ</h4><ul>\n<li>åˆ—å‡ºæ‰€æœ‰è¿›ç¨‹ show processlist,è§‚å¯Ÿæ‰€æœ‰è¿›ç¨‹ ,å¤šç§’æ²¡æœ‰çŠ¶æ€å˜åŒ–çš„(å¹²æ‰)</li>\n<li>æŸ¥çœ‹è¶…æ—¶æ—¥å¿—æˆ–è€…é”™è¯¯æ—¥å¿— (ä¸€èˆ¬ä¼šæ˜¯æŸ¥è¯¢ä»¥åŠå¤§æ‰¹é‡çš„æ’å…¥ä¼šå¯¼è‡´cpuä¸i/oä¸Šæ¶¨,å½“ç„¶ä¸æ’é™¤ç½‘ç»œçŠ¶æ€çªç„¶æ–­äº†,å¯¼è‡´ä¸€ä¸ªè¯·æ±‚æœåŠ¡å™¨åªæ¥å—åˆ°ä¸€åŠï¼Œæ¯”å¦‚whereå­å¥æˆ–åˆ†é¡µå­å¥æ²¡æœ‰å‘é€,,å½“ç„¶çš„ä¸€æ¬¡è¢«å‘ç»å†)ã€‚</li>\n</ul>\n<h3 id=\"å‚è€ƒæ–‡çŒ®\"><a href=\"#å‚è€ƒæ–‡çŒ®\" class=\"headerlink\" title=\"å‚è€ƒæ–‡çŒ®\"></a>å‚è€ƒæ–‡çŒ®</h3><p><a href=\"https://mp.weixin.qq.com/s/lnLSOPQkjTkr957ds_4ZPA\" target=\"_blank\" rel=\"noopener\">https://mp.weixin.qq.com/s/lnLSOPQkjTkr957ds_4ZPA</a></p>\n","categories":["æŸ¥ç¼ºè¡¥æ¼"],"tags":["Mysql"]},{"title":"æŸ¥ç¼ºè¡¥æ¼-JavaCore","url":"/posts/4202610895/","content":"<blockquote>\n<p>æœ¬ç« æ˜¯æ•´ç†çŸ¥è¯†å†…å®¹ï¼Œä¸ºå¼ºåŒ–çŸ¥è¯†é•¿æœŸæ›´æ–°ã€‚</p>\n</blockquote>\n<h3 id=\"é¢å‘å¯¹è±¡æ€æƒ³\"><a href=\"#é¢å‘å¯¹è±¡æ€æƒ³\" class=\"headerlink\" title=\"é¢å‘å¯¹è±¡æ€æƒ³\"></a>é¢å‘å¯¹è±¡æ€æƒ³</h3><ul>\n<li>é¢å‘å¯¹è±¡æ˜¯ä¸€ä¸ªæ€æƒ³ï¼Œæ—¶é—´ä¸‡ç‰©çš†å¯ä»¥è¢«çœ‹åšä¸€ä¸ªå¯¹è±¡ã€‚</li>\n</ul>\n<h4 id=\"å°è£…\"><a href=\"#å°è£…\" class=\"headerlink\" title=\"å°è£…\"></a>å°è£…</h4><ul>\n<li>éšè—å¯¹è±¡çš„å±æ€§å’Œå®ç°çš„å…·ä½“ç»†èŠ‚ï¼Œåªå¯¹å¤–æš´éœ²å…¬å…±è®¿é—®æ–¹å¼ã€‚</li>\n</ul>\n<h4 id=\"ç»§æ‰¿\"><a href=\"#ç»§æ‰¿\" class=\"headerlink\" title=\"ç»§æ‰¿\"></a>ç»§æ‰¿</h4><ul>\n<li>å½“å¤šä¸ªç±»å‡ºç°ç›¸åŒä»£ç é€»è¾‘æ—¶ï¼Œæˆ‘ä»¬é€šå¸¸å°†ç›¸åŒçš„ä»£ç é‡æ„åˆ°ä¸€ä¸ªç±»ä¸­ï¼Œå¦‚æœæ˜¯ç»‘å®šå…³ç³»å°±å¯ä»¥ä½¿ç”¨ç»§æ‰¿ã€‚</li>\n<li>Javaä¸­ç±»æ˜¯å•ç»§æ‰¿ã€‚</li>\n</ul>\n<h4 id=\"å¤šæ€\"><a href=\"#å¤šæ€\" class=\"headerlink\" title=\"å¤šæ€\"></a>å¤šæ€</h4><ul>\n<li>ä¸€ä¸ªäº‹ç‰©çš„çš„å¤šç§çŠ¶æ€ï¼Œæ¯”å¦‚å¥³äººã€ç”·äººéƒ½æ˜¯äººçš„æ€§åˆ«ã€‚äººçš„æ€§åˆ«å°±åˆ†ä¸ºå¥³äººã€ç”·äººã€‚</li>\n</ul>\n<h4 id=\"æŠ½è±¡\"><a href=\"#æŠ½è±¡\" class=\"headerlink\" title=\"æŠ½è±¡\"></a>æŠ½è±¡</h4><ul>\n<li>åœ¨é€»è¾‘ä¸Šçœ‹ä¼¼ç›¸å…³çš„ï¼Œæƒ³è¦æŠŠä»–ä»¬è”ç³»èµ·æ¥ã€‚è¿™æ ·å¯ä»¥æé«˜æ•ˆç‡ã€‚çŸ©å½¢ã€åœ†å½¢ï¼Œéƒ½å¯ä»¥å…·æœ‰å‘¨é•¿å’Œé¢ç§¯ä¸¤ä¸ªæ–¹æ³•ï¼Œä½†æ˜¯è®¡ç®—çš„æ–¹å¼å®Œå…¨ä¸åŒï¼ŒçŸ©å½¢å’Œåœ†å½¢ä¹‹é—´è‚¯å®šä¸èƒ½æ„æˆå­çˆ¶ç±»çš„å…³ç³»ï¼Œé‚£ä¹ˆåªèƒ½æ˜¯åŒæ—¶å»ç»§æ‰¿ä¸€ä¸ªçˆ¶ç±»ã€‚è¿™æ—¶ï¼Œå°±å¼•å‡ºäº†æŠ½è±¡çš„æ¦‚å¿µã€‚</li>\n</ul>\n<h3 id=\"é‡å†™å’Œé‡è½½\"><a href=\"#é‡å†™å’Œé‡è½½\" class=\"headerlink\" title=\"é‡å†™å’Œé‡è½½\"></a>é‡å†™å’Œé‡è½½</h3><ul>\n<li>é‡è½½ï¼šåŒä¸€ä¸ªç±»ä¸­ï¼Œæ–¹æ³•åç›¸åŒï¼Œå‚æ•°ä¸ªæ•°æˆ–è€…ç±»å‹ä¸ç›¸åŒï¼Œè¿”å›ç±»å‹å¯ä»¥ä¸ç›¸åŒã€‚</li>\n<li>é‡å†™ï¼šç±»çš„ç»§æ‰¿å…³ç³»ä¸­ä½“ç°ï¼Œå­ç±»é‡å†™çˆ¶ç±»çš„æ–¹æ³•ã€‚</li>\n</ul>\n<table>\n<thead>\n<tr>\n<th>åŒºåˆ«ç‚¹</th>\n<th>é‡è½½æ–¹æ³•</th>\n<th>é‡å†™æ–¹æ³•</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>å‘ç”ŸèŒƒå›´</td>\n<td>åŒä¸€ä¸ªç±»</td>\n<td>å­ç±»</td>\n</tr>\n<tr>\n<td>å‚æ•°åˆ—è¡¨</td>\n<td>å¿…é¡»ä¿®æ”¹</td>\n<td>ä¸€å®šä¸èƒ½ä¿®æ”¹</td>\n</tr>\n<tr>\n<td>è¿”å›ç±»å‹</td>\n<td>å¯ä¿®æ”¹</td>\n<td>å­ç±»æ–¹æ³•è¿”å›å€¼ç±»å‹åº”æ¯”çˆ¶ç±»æ–¹æ³•è¿”å›å€¼ç±»å‹æ›´å°æˆ–ç›¸ç­‰</td>\n</tr>\n<tr>\n<td>å¼‚å¸¸</td>\n<td>å¯ä¿®æ”¹</td>\n<td>å­ç±»æ–¹æ³•å£°æ˜æŠ›å‡ºçš„å¼‚å¸¸ç±»åº”æ¯”çˆ¶ç±»æ–¹æ³•å£°æ˜æŠ›å‡ºçš„å¼‚å¸¸ç±»æ›´å°æˆ–ç›¸ç­‰ï¼›</td>\n</tr>\n<tr>\n<td>è®¿é—®ä¿®é¥°ç¬¦</td>\n<td>å¯ä¿®æ”¹</td>\n<td>ä¸€å®šä¸èƒ½åšæ›´ä¸¥æ ¼çš„é™åˆ¶ï¼ˆå¯ä»¥é™ä½é™åˆ¶ï¼‰</td>\n</tr>\n<tr>\n<td>å‘ç”Ÿé˜¶æ®µ</td>\n<td>ç¼–è¯‘æœŸ</td>\n<td>è¿è¡ŒæœŸ</td>\n</tr>\n</tbody></table>\n<ul>\n<li><p>é‡å†™(override) </p>\n<ul>\n<li>å­˜åœ¨çˆ¶ç±»å’Œå­ç±»ä¹‹é—´ã€‚</li>\n<li>æ–¹æ³•åã€å‚æ•°ã€è¿”å›å€¼ç›¸åŒã€‚</li>\n<li>æ–¹æ³•è¢«<code>final</code>ä¿®é¥°ä¸èƒ½è¢«é‡å†™ã€‚</li>\n<li>å­ç±»é‡å†™çˆ¶ç±»æ–¹æ³•åï¼Œä¸èƒ½æŠ›å‡ºæ¯”çˆ¶ç±»æ–¹æ³•çš„å¼‚å¸¸ã€‚å­ç±»ä¸èƒ½ç¼©å†™çˆ¶ç±»çš„æ–¹æ³•<code>è®¿é—®æƒé™</code>ã€‚</li>\n</ul>\n</li>\n<li><p>é‡è½½(overload)</p>\n<ul>\n<li>å‚æ•°ç±»å‹ã€ä¸ªæ•°ã€é¡ºåºè‡³å°‘æœ‰ä¸€ä¸ªä¸ç›¸åŒã€‚</li>\n<li>ä¸èƒ½é‡è½½åªæœ‰è¿”å›å€¼ä¸åŒçš„æ–¹æ³•åã€‚</li>\n<li>å­˜åœ¨äºçˆ¶ç±»å’Œå­ç±»ã€åŒç±»ä¸­ã€‚</li>\n</ul>\n</li>\n<li><p>Constructor ä¸èƒ½è¢« overrideï¼ˆé‡å†™ï¼‰,ä½†æ˜¯å¯ä»¥ overloadï¼ˆé‡è½½ï¼‰,æ‰€ä»¥ä½ å¯ä»¥çœ‹åˆ°â¼€ä¸ªç±»ä¸­æœ‰å¤šä¸ªæ„é€ å‡½æ•°çš„æƒ…å†µã€‚</p>\n</li>\n</ul>\n<h3 id=\"ä»‹ç»ä¸‹-Java-åŸºæœ¬æ•°æ®ç±»å‹\"><a href=\"#ä»‹ç»ä¸‹-Java-åŸºæœ¬æ•°æ®ç±»å‹\" class=\"headerlink\" title=\"ä»‹ç»ä¸‹ Java åŸºæœ¬æ•°æ®ç±»å‹\"></a>ä»‹ç»ä¸‹ Java åŸºæœ¬æ•°æ®ç±»å‹</h3><ul>\n<li>Javaä¸­å­˜åœ¨8ä¸ªåŸç”Ÿæ•°æ®ç±»å‹ï¼ŒåŒæ—¶åˆåˆ†æˆå››ç§ï¼šæ•´å½¢ã€æµ®ç‚¹å‹ã€charã€Booleanã€‚å®ƒä»¬ä¹‹é—´å­˜åœ¨è‡ªåŠ¨ç±»å‹è½¬æ¢ï¼Œè§„åˆ™æ˜¯ä»å°åˆ°å¤§ã€‚å¹¶ä¸”éƒ½å­˜åœ¨è‡ªåŠ¨è£…ç®±æ‹†ç®±ç‰¹æ€§ï¼Œä½†æ˜¯è¿™ç§æ“ä½œæ˜¯éšå¼æ“ä½œè€Œä¸”åœ¨æŸäº›æƒ…å†µä¼šå¯¼è‡´CGå‹åŠ›å¢å¤§ã€‚</li>\n</ul>\n<table>\n<thead>\n<tr>\n<th align=\"center\">ç±»å‹</th>\n<th align=\"center\">å­˜å‚¨éœ€æ±‚</th>\n<th align=\"center\">å–å€¼èŒƒå›´</th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"center\">int</td>\n<td align=\"center\">4å­—èŠ‚</td>\n<td align=\"center\">-2 147 483 638 ï½ 2 147 483 637</td>\n</tr>\n<tr>\n<td align=\"center\">short</td>\n<td align=\"center\">2å­—èŠ‚</td>\n<td align=\"center\">-32 768 ï½ 32 767</td>\n</tr>\n<tr>\n<td align=\"center\">long</td>\n<td align=\"center\">8å­—èŠ‚</td>\n<td align=\"center\">-9 223 372 036 854 775 808 ï½ 9 223 372 036 854 775 807</td>\n</tr>\n<tr>\n<td align=\"center\">byte</td>\n<td align=\"center\">1å­—èŠ‚</td>\n<td align=\"center\">- 128 ï½ 127</td>\n</tr>\n</tbody></table>\n<ul>\n<li>æ•´å‹çš„èŒƒå›´ä¸è¿è¡ŒJavaè¿è¡Œçš„ç¡¬ä»¶æ²¡æœ‰å…³ç³»ï¼Œæ‰€æœ‰çš„æ•°æ®ç±»å‹æ‰€å çš„å­—èŠ‚æ•°é‡ä¸å¹³å°æ— å…³ã€‚</li>\n</ul>\n<table>\n<thead>\n<tr>\n<th align=\"center\">ç±»å‹</th>\n<th align=\"center\">å­˜å‚¨éœ€æ±‚</th>\n<th align=\"center\">å–å€¼èŒƒå›´</th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"center\">float</td>\n<td align=\"center\">4å­—èŠ‚</td>\n<td align=\"center\">å¤§çº¦ $\\pm$ 3.402 823 37F + 38F (æœ‰æ•ˆä½æ•°ä¸º7ï½8ä½)</td>\n</tr>\n<tr>\n<td align=\"center\">double</td>\n<td align=\"center\">8å­—èŠ‚</td>\n<td align=\"center\">å¤§çº¦ $\\pm$ 1.797 693 134 862 315 70E + 308 ï¼ˆæœ‰æ•ˆä½æ•°ä¸º15ä½ï¼‰</td>\n</tr>\n</tbody></table>\n<ul>\n<li><p>doubleè¿™ç§ç±»å‹çš„ç²¾åº¦æ˜¯floatçš„ä¸¤å€ã€‚</p>\n</li>\n<li><p>æ‰€æœ‰æµ®ç‚¹æ•°å€¼è®¡ç®—éƒ½éµå¾ªIEEE 754è§„èŒƒï¼Œä¸‹é¢æ˜¯æº¢å‡ºå’Œå‡ºé”™çš„æƒ…å†µçš„ä¸‰ç§ç‰¹æ®Šçš„æµ®ç‚¹æ•°å€¼ã€‚</p>\n<ul>\n<li>æ­£æ— ç©·å¤§</li>\n<li>è´Ÿæ— ç©·å¤§</li>\n<li>NaN ( ä¸æ˜¯ä¸€ä¸ªæ•°å­— )</li>\n<li>ä¸€ä¸ªæ•´æ•´æ•°é™¤ä»¥0çš„ç»“æœä¸ºæ­£æ— ç©·å¤§ï¼Œè®¡ç®—0/0æˆ–è€…è´Ÿæ•°çš„å¹³æ–¹æ ¹ç»“æœä¸ºNaNã€‚</li>\n</ul>\n</li>\n<li><p>charç±»å‹</p>\n<ul>\n<li>charç±»å‹è¡¨ç¤ºå•ä¸ªå­—ç¬¦ï¼Œå±äºUnicodeç¼–ç è¡¨ã€‚å› ä¸ºå†å²åŸå› ï¼Œä¸å»ºè®®åœ¨ç¨‹åºä¸­ä½¿ç”¨ã€‚é™¤éç¡®å®è¦å¯¹UTF-16ä»£ç å•å…ƒè¿›è¡Œæ“ä½œã€‚</li>\n<li>charå­—èŠ‚å¤§å°<ul>\n<li>Javaä¸­æ— è®ºæ˜¯æ±‰å­—è¿˜æ˜¯è‹±æ–‡å­—æ¯éƒ½æ˜¯ç”¨Unicodeç¼–ç æ¥è¡¨ç¤ºçš„ï¼Œä¸€ä¸ªUnicodeæ˜¯16ä½ï¼Œæ¯å­—èŠ‚æ˜¯8ä½ï¼Œæ‰€ä»¥ä¸€ä¸ªUnicodeç å ä¸¤å­—èŠ‚ã€‚ä½†æ˜¯è‹±æ–‡å­—æ¯æ¯”è¾ƒç‰¹æ®Šï¼Œæºè‡ªäº8ä½ï¼ˆ1å­—èŠ‚ï¼‰çš„ASCIIå—ï¼Œäºæ˜¯åœ¨Unicodeç ä»…ä½¿ç”¨äº†ä½8ä½ï¼ˆ1å­—èŠ‚ï¼‰å°±å¯ä»¥è¡¨ç¤ºã€‚</li>\n</ul>\n</li>\n</ul>\n</li>\n<li><p>booleanç±»å‹</p>\n<ul>\n<li>å¸ƒå°”ç±»å‹ï¼Œåªæœ‰ä¸¤ä¸ªå€¼falseã€trueã€‚åŸºæœ¬ç”¨äºåˆ¤å®šæ¡ä»¶ã€‚</li>\n<li>booleanå­—èŠ‚å¤§å°<ul>\n<li>Javaè§„èŒƒä¸­å¹¶æœªæ˜ç¡®è§„å®šbooleanç±»å‹çš„å¤§å°ã€‚</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<ul>\n<li><p>è‡ªåŠ¨ç±»å‹è½¬æ¢</p>\n<ul>\n<li><p><strong>æ•´å‹ã€å®å‹ï¼ˆå¸¸é‡ï¼‰ã€å­—ç¬¦å‹æ•°æ®å¯ä»¥æ··åˆè¿ç®—ã€‚è¿ç®—ä¸­ï¼Œä¸åŒç±»å‹çš„æ•°æ®å…ˆè½¬åŒ–ä¸ºåŒä¸€ç±»å‹ï¼Œç„¶åè¿›è¡Œè¿ç®—ã€‚</strong></p>\n<p>è½¬æ¢ä»ä½çº§åˆ°é«˜çº§ã€‚</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">byte</span>,<span class=\"keyword\">short</span>,<span class=\"keyword\">char</span>â€”&gt; <span class=\"keyword\">int</span> â€”&gt; <span class=\"keyword\">long</span>â€”&gt; <span class=\"keyword\">float</span> â€”&gt; <span class=\"keyword\">double</span></span><br></pre></td></tr></table></figure>\n</li>\n<li><p>ä¸èƒ½å¯¹booleanè¿›è¡Œç±»å‹è½¬æ¢ã€ä¸èƒ½æŠŠå¯¹è±¡ç±»å‹è½¬æ¢æˆä¸ç›¸å…³çš„å¯¹è±¡ã€æŠŠå¤§å®¹é‡çš„å¯¹è±¡è½¬æ¢æˆå°å®¹é‡å¯¹è±¡æ—¶éœ€è¦å¼ºåˆ¶ç±»å‹è½¬æ¢ã€è½¬æ¢è¿‡ç¨‹ä¸­é—´å¯èƒ½å‡ºç°ç²¾åº¦æŸå¤±ã€‚</p>\n</li>\n</ul>\n</li>\n</ul>\n<h4 id=\"è£…ç®±å’Œæ‹†ç®±boxing-or-unboxing\"><a href=\"#è£…ç®±å’Œæ‹†ç®±boxing-or-unboxing\" class=\"headerlink\" title=\"è£…ç®±å’Œæ‹†ç®±boxing or unboxing\"></a>è£…ç®±å’Œæ‹†ç®±<strong>boxing or unboxing</strong></h4><blockquote>\n<p>è£…ç®±ï¼šå°†åŸºç¡€ç±»å‹ç”¨å®ƒä»¬å¯¹åº”ç±»å‹åŒ…è£…èµ·æ¥</p>\n<p>æ‹†ç®±ï¼šå°†åŒ…è£…ç±»å‹è½¬æ¢æˆåŸºæœ¬æ•°æ®ç±»å‹</p>\n</blockquote>\n<table>\n<thead>\n<tr>\n<th align=\"center\">åŸè¯­</th>\n<th align=\"center\">å¯¹åº”çš„JDKç±»</th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"center\">int</td>\n<td align=\"center\">java.lang.Integer</td>\n</tr>\n<tr>\n<td align=\"center\">short</td>\n<td align=\"center\">java.lang.Short</td>\n</tr>\n<tr>\n<td align=\"center\">long</td>\n<td align=\"center\">java.lang.Long</td>\n</tr>\n<tr>\n<td align=\"center\">byte</td>\n<td align=\"center\">java.lang.Byte</td>\n</tr>\n<tr>\n<td align=\"center\">char</td>\n<td align=\"center\">java.lang.Character</td>\n</tr>\n<tr>\n<td align=\"center\">double</td>\n<td align=\"center\">java.lang.Double</td>\n</tr>\n<tr>\n<td align=\"center\">float</td>\n<td align=\"center\">java.lang.Float</td>\n</tr>\n<tr>\n<td align=\"center\">boolean</td>\n<td align=\"center\">java.lang.Boolean</td>\n</tr>\n</tbody></table>\n<ul>\n<li><p>Javaä¸­åªæœ‰åŸç”Ÿæ•°æ®ç±»å‹æ˜¯ç‰¹æ®Šçš„ï¼Œå®ƒä»¬ä¸æ˜¯å¯¹è±¡ã€‚å…¶å®ƒçš„éƒ½æ˜¯å¯¹è±¡ã€‚é‚£ä¹ˆå°±ä¸€ä¸ªå°´å°¬çš„é—®é¢˜ï¼Œé›†åˆç±»éƒ½æ˜¯å­˜æ”¾çš„å¯¹è±¡ï¼ŒJDK5ä¹‹åè€ƒè™‘åˆ°è¿™ä¸ªé—®é¢˜å°±è‡ªåŠ¨è¿›è¡Œé€†è¡Œæ‹†ç®±è£…ç®±çš„æ“ä½œã€‚</p>\n  <figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//æ¯”å¦‚æ‰€åœ¨æ³›å‹ä¸­æ˜¯ä¸èƒ½å­˜æ”¾åŸç”Ÿæ•°æ®ç±»å‹çš„ï¼Œå¦‚è¦è¦å­˜æ”¾åŸç”Ÿæ•°æ®ç±»å‹çš„æ•°æ®ï¼Œéœ€è¦è£…ç®±ã€‚</span></span><br><span class=\"line\">Collection&lt;<span class=\"keyword\">int</span>&gt; c = <span class=\"keyword\">new</span> ArrayList&lt;<span class=\"keyword\">int</span>&gt;(); <span class=\"comment\">//è¿™æ˜¯æ— æ³•ç¼–è¯‘æˆåŠŸçš„ã€‚</span></span><br><span class=\"line\">Collection&lt;Integer&gt; cc = <span class=\"keyword\">new</span> ArrayList&lt;Integer&gt;(); <span class=\"comment\">//è¿™æ ·æ‰è¡Œã€‚</span></span><br></pre></td></tr></table></figure>\n</li>\n<li><p>æ¯ä¸ª JDK ç±»éƒ½æä¾›äº†ç›¸åº”æ–¹æ³•æ¥è§£æå®ƒçš„å†…éƒ¨è¡¨ç¤ºï¼Œå¹¶å°†å…¶è½¬æ¢ä¸ºç›¸åº”çš„åŸè¯­ç±»å‹ã€‚</p>\n</li>\n<li><p>ä½†æ˜¯æ³¨æ„è£…ç®±æ‹†ç®±æ“ä½œå…¶å®æ˜¯éå¸¸æ¶ˆè€—å†…å­˜çš„ä¸¾åŠ¨ï¼Œåœ¨è¯¥è¿‡ç¨‹ä¸­å¯èƒ½ä¼šç”Ÿæˆç”Ÿæˆæ— ç”¨å¯¹è±¡å¢åŠ GCå‹åŠ›ã€‚æ‰€ä»¥å°½é‡é¿å…è¿™ä¸­æ“ä½œã€‚</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\">Integer sum = <span class=\"number\">0</span>;</span><br><span class=\"line\"><span class=\"keyword\">for</span>(<span class=\"keyword\">int</span> index  = <span class=\"number\">1000</span>; index &lt; <span class=\"number\">5000</span>; index ++)&#123;</span><br><span class=\"line\"> sum+=index;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>  æ¯”å¦‚è¿™ç§ï¼Œæ¯æ¬¡suméƒ½éœ€è¦è‡ªåŠ¨æ‹†ç®±ã€‚</p>\n</li>\n</ul>\n<ul>\n<li><p>é»˜è®¤æƒ…å†µä¸‹æ•´æ•°çš„ç±»å‹éƒ½æ˜¯intã€æµ®ç‚¹å‹çš„æ•°éƒ½æ˜¯doubleã€‚</p>\n   <figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">float</span> d = <span class=\"number\">1.1f</span>; <span class=\"comment\">//åœ¨åé¢æ·»åŠ f,å¤§å°å†™ä¸åŒºåˆ†ã€‚éšå¼å¼ºåˆ¶ç±»å‹è½¬æ¢</span></span><br></pre></td></tr></table></figure>\n\n</li>\n</ul>\n<a id=\"more\"></a>\n\n<h3 id=\"int-å’Œ-Integer-æœ‰ä»€ä¹ˆåŒºåˆ«ã€‚\"><a href=\"#int-å’Œ-Integer-æœ‰ä»€ä¹ˆåŒºåˆ«ã€‚\" class=\"headerlink\" title=\"int å’Œ Integer æœ‰ä»€ä¹ˆåŒºåˆ«ã€‚\"></a>int å’Œ Integer æœ‰ä»€ä¹ˆåŒºåˆ«ã€‚</h3><ul>\n<li>Integeræ˜¯intçš„åŒ…è£…ç±»ï¼Œå®ƒæœ‰ä¸€ä¸ªintç±»å‹å­—æ®µå­˜å‚¨æ•°æ®ï¼Œå¹¶æä¾›äº†åŸºç¡€çš„æ“ä½œã€‚å…³äºIntegerçš„ç¼“å­˜å€¼ï¼Œjdk5ä¹‹åå¼•å…¥äº†ä¸€ä¸ªé™æ€å·¥å‚æ–¹æ³•<code>valueOf</code>ï¼Œåœ¨è°ƒç”¨å®ƒçš„æ—¶å€™ä¼šæœ‰æ˜æ˜¾çš„æ€§èƒ½æå‡ï¼Œå†…éƒ¨æ˜¯ä¸€ä¸ªç¼“å­˜æœºåˆ¶<code>IntegerCache</code>é»˜è®¤çš„é•¿åº¦æ˜¯-128~127ä¹‹é—´ã€‚<ul>\n<li>è¿™ç§ç¼“å­˜è¡Œä¸ºä¸ä»…é€‚ç”¨äºIntegerå¯¹è±¡ã€‚æˆ‘ä»¬é’ˆå¯¹æ‰€æœ‰æ•´æ•°ç±»å‹çš„ç±»éƒ½æœ‰ç±»ä¼¼çš„ç¼“å­˜æœºåˆ¶ã€‚<ul>\n<li>æœ‰ ByteCache ç”¨äºç¼“å­˜ Byte å¯¹è±¡ã€‚</li>\n<li>æœ‰ ShortCache ç”¨äºç¼“å­˜ Short å¯¹è±¡ã€‚</li>\n<li>æœ‰ LongCache ç”¨äºç¼“å­˜ Long å¯¹è±¡ã€‚</li>\n<li>æœ‰ CharacterCache ç”¨äºç¼“å­˜ Character å¯¹è±¡ã€‚</li>\n<li>Byteï¼ŒShortï¼ŒLong æœ‰å›ºå®šèŒƒå›´: -128 åˆ° 127ã€‚å¯¹äº Character, èŒƒå›´æ˜¯ 0 åˆ° 127ã€‚é™¤äº† Integer å¯ä»¥é€šè¿‡å‚æ•°æ”¹å˜èŒƒå›´å¤–ï¼Œå…¶å®ƒçš„éƒ½ä¸è¡Œã€‚</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"Javaä¸­è®¿é—®ç±»å‹\"><a href=\"#Javaä¸­è®¿é—®ç±»å‹\" class=\"headerlink\" title=\"Javaä¸­è®¿é—®ç±»å‹\"></a>Javaä¸­è®¿é—®ç±»å‹</h3><table>\n<thead>\n<tr>\n<th>è®¿é—®ç±»å‹</th>\n<th>åŒä¸€ä¸ªç±»</th>\n<th>åŒä¸€ä¸ªåŒ…</th>\n<th>ä¸åŒåŒ…çš„å­ç±»</th>\n<th>ä¸åŒåŒ…çš„éå­ç±»</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>public</td>\n<td>Y</td>\n<td>Y</td>\n<td>Y</td>\n<td>Y</td>\n</tr>\n<tr>\n<td>protected</td>\n<td>Y</td>\n<td>Y</td>\n<td>Y</td>\n<td></td>\n</tr>\n<tr>\n<td>default</td>\n<td>Y</td>\n<td>Y</td>\n<td></td>\n<td></td>\n</tr>\n<tr>\n<td>private</td>\n<td>Y</td>\n<td></td>\n<td></td>\n<td></td>\n</tr>\n</tbody></table>\n<h3 id=\"instanceof-å…³é”®å­—\"><a href=\"#instanceof-å…³é”®å­—\" class=\"headerlink\" title=\"instanceof å…³é”®å­—\"></a><strong>instanceof</strong> <strong>å…³é”®å­—</strong></h3><ul>\n<li>instanceof ä¸¥æ ¼æ¥è¯´æ˜¯Javaä¸­çš„ä¸€ä¸ªåŒç›®è¿ç®—ç¬¦ï¼Œç”¨æ¥æµ‹è¯•ä¸€ä¸ªå¯¹è±¡æ˜¯å¦ä¸ºä¸€ä¸ªç±»çš„å®ä¾‹ï¼Œç”¨æ³•ä¸ºï¼š</li>\n</ul>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">boolean</span> result = obj <span class=\"keyword\">instanceof</span> Class</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><p>å…¶ä¸­ obj ä¸ºä¸€ä¸ªå¯¹è±¡ï¼ŒClass è¡¨ç¤ºä¸€ä¸ªç±»æˆ–è€…ä¸€ä¸ªæ¥å£ï¼Œå½“ obj ä¸º Class çš„å¯¹è±¡ï¼Œæˆ–è€…æ˜¯å…¶ç›´æ¥æˆ–é—´æ¥å­ç±»ï¼Œæˆ–è€…æ˜¯å…¶æ¥å£çš„å®ç°ç±»ï¼Œç»“æœresult éƒ½è¿”å› trueï¼Œå¦åˆ™è¿”å›falseã€‚</p>\n</li>\n<li><p>æ³¨æ„ï¼šç¼–è¯‘å™¨ä¼šæ£€æŸ¥ obj æ˜¯å¦èƒ½è½¬æ¢æˆå³è¾¹çš„classç±»å‹ï¼Œå¦‚æœä¸èƒ½è½¬æ¢åˆ™ç›´æ¥æŠ¥é”™ï¼Œå¦‚æœä¸èƒ½ç¡®å®šç±»å‹ï¼Œåˆ™é€šè¿‡ç¼–è¯‘ï¼Œå…·ä½“çœ‹è¿è¡Œæ—¶å®šã€‚</p>\n</li>\n</ul>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">int</span> i = <span class=\"number\">0</span>;</span><br><span class=\"line\">System.out.println(i <span class=\"keyword\">instanceof</span> Integer);<span class=\"comment\">//ç¼–è¯‘ä¸é€šè¿‡ iå¿…é¡»æ˜¯å¼•ç”¨ç±»å‹ï¼Œä¸èƒ½æ˜¯åŸºæœ¬ç±»å‹ </span></span><br><span class=\"line\">System.out.println(i <span class=\"keyword\">instanceof</span> Object);<span class=\"comment\">//ç¼–è¯‘ä¸é€šè¿‡</span></span><br><span class=\"line\"></span><br><span class=\"line\">Integer integer = <span class=\"keyword\">new</span> Integer(<span class=\"number\">1</span>); </span><br><span class=\"line\">System.out.println(integer <span class=\"keyword\">instanceof</span> Integer);<span class=\"comment\">//true</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//false ,åœ¨ JavaSEè§„èŒƒ ä¸­å¯¹ instanceof è¿ç®—ç¬¦çš„è§„å®šå°±æ˜¯ï¼šå¦‚æœ obj ä¸º nullï¼Œé‚£ä¹ˆå°†è¿”å› falseã€‚</span></span><br><span class=\"line\">System.out.println(<span class=\"keyword\">null</span> <span class=\"keyword\">instanceof</span> Object);</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"å£°æ˜ä¸€ä¸ªDoubleå˜é‡èµ‹å€¼-0-001ä¼šç¼–è¯‘é”™è¯¯å—-ï¼Ÿ\"><a href=\"#å£°æ˜ä¸€ä¸ªDoubleå˜é‡èµ‹å€¼-0-001ä¼šç¼–è¯‘é”™è¯¯å—-ï¼Ÿ\" class=\"headerlink\" title=\"å£°æ˜ä¸€ä¸ªDoubleå˜é‡èµ‹å€¼ 0.001ä¼šç¼–è¯‘é”™è¯¯å— ï¼Ÿ\"></a>å£°æ˜ä¸€ä¸ªDoubleå˜é‡èµ‹å€¼ 0.001ä¼šç¼–è¯‘é”™è¯¯å— ï¼Ÿ</h3><ul>\n<li>ä¸ä¼šï¼Œdouble æ•°æ®ç±»å‹æ˜¯åŒç²¾åº¦ã€64 ä½ã€æ ‡å‡†çš„æµ®ç‚¹æ•°ã€‚</li>\n</ul>\n<h3 id=\"Javaæ˜¯çº¯ç²¹çš„é¢å‘å¯¹è±¡è¯­è¨€å—ï¼Ÿ\"><a href=\"#Javaæ˜¯çº¯ç²¹çš„é¢å‘å¯¹è±¡è¯­è¨€å—ï¼Ÿ\" class=\"headerlink\" title=\"Javaæ˜¯çº¯ç²¹çš„é¢å‘å¯¹è±¡è¯­è¨€å—ï¼Ÿ\"></a>Javaæ˜¯çº¯ç²¹çš„é¢å‘å¯¹è±¡è¯­è¨€å—ï¼Ÿ</h3><ul>\n<li>Javaä¸æ˜¯å­˜ç²¹çš„é¢å‘å¯¹è±¡è¯­è¨€ï¼Œå› ä¸ºå®ƒåŒ…å«äº†åŸç”Ÿæ•°æ®ç±»å‹ï¼Œæ¯”å¦‚int ã€doubleã€‚</li>\n</ul>\n<h3 id=\"Stringã€StringBufferã€StringBuilderçš„åŒºåˆ«\"><a href=\"#Stringã€StringBufferã€StringBuilderçš„åŒºåˆ«\" class=\"headerlink\" title=\"Stringã€StringBufferã€StringBuilderçš„åŒºåˆ«\"></a>Stringã€StringBufferã€StringBuilderçš„åŒºåˆ«</h3><ul>\n<li>å¯å˜æ€§<ul>\n<li>String æ˜¯ä¸å¯å˜çš„ï¼ŒStringBufferã€StringBuilderæ˜¯å¯å˜çš„ã€‚</li>\n<li>String ç±»ä¸­ä½¿ç”¨ final å…³é”®å­—å­—ç¬¦æ•°ç»„ä¿å­˜å­—ç¬¦ä¸²ï¼Œ<code>privateã€€finalã€€charã€€value[]</code>ï¼Œæ‰€ä»¥ String å¯¹è±¡æ˜¯ä¸å¯å˜çš„ã€‚è€ŒStringBuilder ä¸ StringBuffer éƒ½ç»§æ‰¿è‡ª AbstractStringBuilder ç±»ï¼Œåœ¨ AbstractStringBuilder ä¸­ä¹Ÿæ˜¯ä½¿ç”¨å­—ç¬¦æ•°ç»„ä¿å­˜å­—ç¬¦ä¸²<code>char[]value</code> ä½†æ˜¯æ²¡æœ‰ç”¨ final å…³é”®å­—ä¿®é¥°ï¼Œæ‰€ä»¥è¿™ä¸¤ç§å¯¹è±¡éƒ½æ˜¯å¯å˜çš„ã€‚</li>\n</ul>\n</li>\n<li>çº¿ç¨‹å®‰å…¨æ–¹é¢<ul>\n<li>String ä¸­çš„å¯¹è±¡æ˜¯ä¸å¯å˜çš„ï¼Œä¹Ÿå°±å¯ä»¥ç†è§£ä¸ºå¸¸é‡ï¼Œçº¿ç¨‹å®‰å…¨ã€‚<code>AbstractStringBuilder</code> æ˜¯ <code>StringBuilder</code> ä¸ <code>StringBuffer</code> çš„å…¬å…±çˆ¶ç±»ï¼Œä½†æ˜¯StringBuffer å¯¹æ–¹æ³•åŠ äº†åŒæ­¥é”æˆ–è€…å¯¹è°ƒç”¨çš„æ–¹æ³•åŠ äº†åŒæ­¥é”ï¼Œæ‰€ä»¥æ˜¯çº¿ç¨‹å®‰å…¨çš„ã€‚StringBuilder å¹¶æ²¡æœ‰å¯¹æ–¹æ³•è¿›è¡ŒåŠ åŒæ­¥é”ï¼Œæ‰€ä»¥æ˜¯éçº¿ç¨‹å®‰å…¨çš„ã€‚ </li>\n</ul>\n</li>\n<li>æ€§èƒ½<ul>\n<li>æ“ä½œå°‘é‡çš„æ•°æ® = String</li>\n<li>å•çº¿ç¨‹æ“ä½œå­—ç¬¦ä¸²ç¼“å†²åŒºä¸‹æ“ä½œå¤§é‡æ•°æ® = StringBuilder</li>\n<li>å¤šçº¿ç¨‹æ“ä½œå­—ç¬¦ä¸²ç¼“å†²åŒºä¸‹æ“ä½œå¤§é‡æ•°æ® = StringBuffer</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"ä¸ºä»€ä¹ˆ-String-ç±»å‹è¦ç”¨-final-ä¿®é¥°ï¼Ÿ\"><a href=\"#ä¸ºä»€ä¹ˆ-String-ç±»å‹è¦ç”¨-final-ä¿®é¥°ï¼Ÿ\" class=\"headerlink\" title=\"ä¸ºä»€ä¹ˆ String ç±»å‹è¦ç”¨ final ä¿®é¥°ï¼Ÿ\"></a>ä¸ºä»€ä¹ˆ String ç±»å‹è¦ç”¨ final ä¿®é¥°ï¼Ÿ</h3><blockquote>\n<p> ä½¿ç”¨ final ä¿®é¥°çš„ç¬¬ä¸€ä¸ªå¥½å¤„æ˜¯å®‰å…¨ï¼›ç¬¬äºŒä¸ªå¥½å¤„æ˜¯é«˜æ•ˆï¼Œä»¥ JVM ä¸­çš„å­—ç¬¦ä¸²å¸¸é‡æ± æ¥ä¸¾ä¾‹ï¼Œå¦‚ä¸‹ä¸¤ä¸ªå˜é‡ï¼š</p>\n</blockquote>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Test</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String[] args)</span> </span>&#123;</span><br><span class=\"line\">      String s1 = <span class=\"string\">\"java\"</span>;</span><br><span class=\"line\">\t\t  String s2 = <span class=\"string\">\"java\"</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// ä»¥ä¸Šä¸¤ä¸ªå±€éƒ¨å˜é‡éƒ½å­˜åœ¨äº†å¸¸é‡æ± ä¸­</span></span><br><span class=\"line\">        System.out.println(s1 == s2); <span class=\"comment\">// true</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// newå‡ºæ¥çš„å¯¹è±¡ä¸ä¼šæ”¾åˆ°å¸¸é‡æ± ä¸­,å†…å­˜åœ°å€æ˜¯ä¸åŒçš„</span></span><br><span class=\"line\">        String s3 = <span class=\"keyword\">new</span> String();</span><br><span class=\"line\">        String s4 = <span class=\"keyword\">new</span> String();</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     \t* å­—ç¬¦ä¸²çš„æ¯”è¾ƒä¸å¯ä»¥ä½¿ç”¨åŒç­‰å·,è¿™æ ·ä¼šæ¯”è¾ƒå†…å­˜åœ°å€</span></span><br><span class=\"line\"><span class=\"comment\">     \t* å­—ç¬¦ä¸²æ¯”è¾ƒåº”å½“ç”¨equals,å¯è§Stringé‡å†™äº†equals</span></span><br><span class=\"line\"><span class=\"comment\">     \t*/</span></span><br><span class=\"line\">        System.out.println(s3 == s4); <span class=\"comment\">// false</span></span><br><span class=\"line\">        System.out.println(s3.equals(s4)); <span class=\"comment\">// true</span></span><br><span class=\"line\">         &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>åªæœ‰å­—ç¬¦ä¸²æ˜¯ä¸å¯å˜æ—¶ï¼Œæˆ‘ä»¬æ‰èƒ½å®ç°å­—ç¬¦ä¸²å¸¸é‡æ± ï¼Œå­—ç¬¦ä¸²å¸¸é‡æ± å¯ä»¥ä¸ºæˆ‘ä»¬ç¼“å­˜å­—ç¬¦ä¸²ï¼Œæé«˜ç¨‹åºçš„è¿è¡Œæ•ˆç‡ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</li>\n</ul>\n<p><img src=\"https://z201.oss-cn-shanghai.aliyuncs.com/JavaNote/String%E5%AD%97%E7%AC%A6%E4%B8%B2%E5%B8%B8%E9%87%8F%E6%B1%A0.png\"></p>\n<ul>\n<li><strong>å·¥ä½œåŸç†</strong></li>\n</ul>\n<p>ã€€ã€€å½“ä»£ç ä¸­å‡ºç°å­—é¢é‡å½¢å¼åˆ›å»ºå­—ç¬¦ä¸²å¯¹è±¡æ—¶ï¼ŒJVMé¦–å…ˆä¼šå¯¹è¿™ä¸ªå­—é¢é‡è¿›è¡Œæ£€æŸ¥ï¼Œå¦‚æœå­—ç¬¦ä¸²å¸¸é‡æ± ä¸­å­˜åœ¨ç›¸åŒå†…å®¹çš„å­—ç¬¦ä¸²å¯¹è±¡çš„å¼•ç”¨ï¼Œåˆ™å°†è¿™ä¸ªå¼•ç”¨è¿”å›ï¼Œå¦åˆ™æ–°çš„å­—ç¬¦ä¸²å¯¹è±¡è¢«åˆ›å»ºï¼Œç„¶åå°†è¿™ä¸ªå¼•ç”¨æ”¾å…¥å­—ç¬¦ä¸²å¸¸é‡æ± ï¼Œå¹¶è¿”å›è¯¥å¼•ç”¨ã€‚</p>\n<h3 id=\"ä¸ºä»€ä¹ˆ-char-æ•°ç»„æ¯”-Java-ä¸­çš„-String-æ›´é€‚åˆå­˜å‚¨å¯†ç \"><a href=\"#ä¸ºä»€ä¹ˆ-char-æ•°ç»„æ¯”-Java-ä¸­çš„-String-æ›´é€‚åˆå­˜å‚¨å¯†ç \" class=\"headerlink\" title=\"ä¸ºä»€ä¹ˆ char æ•°ç»„æ¯” Java ä¸­çš„ String æ›´é€‚åˆå­˜å‚¨å¯†ç \"></a>ä¸ºä»€ä¹ˆ char æ•°ç»„æ¯” Java ä¸­çš„ String æ›´é€‚åˆå­˜å‚¨å¯†ç </h3><ul>\n<li>å­—ç¬¦ä¸²åœ¨ Java ä¸­æ˜¯ä¸å¯å˜çš„ï¼Œå¦‚æœä½ å°†å¯†ç å­˜å‚¨ä¸ºçº¯æ–‡æœ¬ï¼Œå®ƒå°†åœ¨å†…å­˜ä¸­å¯ç”¨ï¼Œç›´åˆ°åƒåœ¾æ”¶é›†å™¨æ¸…é™¤å®ƒ. å¹¶ä¸”ä¸ºäº†å¯é‡ç”¨æ€§ï¼Œä¼šå­˜åœ¨ String åœ¨å­—ç¬¦ä¸²æ± ä¸­, å®ƒå¾ˆå¯èƒ½ä¼šä¿ç•™åœ¨å†…å­˜ä¸­æŒç»­å¾ˆé•¿æ—¶é—´ï¼Œä»è€Œæ„æˆå®‰å…¨å¨èƒã€‚</li>\n<li>ç”±äºå­—ç¬¦ä¸²æ˜¯ä¸å¯å˜çš„ï¼Œæ‰€ä»¥ä¸èƒ½æ›´æ”¹å­—ç¬¦ä¸²çš„å†…å®¹ï¼Œå› ä¸ºä»»ä½•æ›´æ”¹éƒ½ä¼šäº§ç”Ÿæ–°çš„å­—ç¬¦ä¸²ï¼Œè€Œå¦‚æœä½ ä½¿ç”¨char[]ï¼Œä½ å°±å¯ä»¥å°†æ‰€æœ‰å…ƒç´ è®¾ç½®ä¸ºç©ºç™½æˆ–é›¶ã€‚å› æ­¤ï¼Œåœ¨å­—ç¬¦æ•°ç»„ä¸­å­˜å‚¨å¯†ç å¯ä»¥æ˜æ˜¾é™ä½çªƒå–å¯†ç çš„å®‰å…¨é£é™©ã€‚</li>\n</ul>\n<h3 id=\"å’Œ-equals-ä¸-compareTo\"><a href=\"#å’Œ-equals-ä¸-compareTo\" class=\"headerlink\" title=\"== å’Œ equals ä¸ compareTo\"></a>== å’Œ equals ä¸ compareTo</h3><ul>\n<li><strong>==</strong> : å®ƒçš„ä½œç”¨æ˜¯åˆ¤æ–­ä¸¤ä¸ªå¯¹è±¡çš„åœ°å€æ˜¯ä¸æ˜¯ç›¸ç­‰ã€‚å³ï¼Œåˆ¤æ–­ä¸¤ä¸ªå¯¹è±¡æ˜¯ä¸æ˜¯åŒä¸€ä¸ªå¯¹è±¡ã€‚(åŸºæœ¬æ•°æ®ç±»å‹==æ¯”è¾ƒçš„æ˜¯å€¼ï¼Œå¼•ç”¨æ•°æ®ç±»å‹==æ¯”è¾ƒçš„æ˜¯å†…å­˜åœ°å€)</li>\n<li><strong>equals()</strong> : å®ƒçš„ä½œç”¨ä¹Ÿæ˜¯åˆ¤æ–­ä¸¤ä¸ªå¯¹è±¡æ˜¯å¦ç›¸ç­‰ã€‚ä½†å®ƒä¸€èˆ¬æœ‰ä¸¤ç§ä½¿ç”¨æƒ…å†µï¼š<ul>\n<li>æƒ…å†µ1ï¼šç±»æ²¡æœ‰è¦†ç›– equals() æ–¹æ³•ã€‚åˆ™é€šè¿‡ equals() æ¯”è¾ƒè¯¥ç±»çš„ä¸¤ä¸ªå¯¹è±¡æ—¶ï¼Œç­‰ä»·äºé€šè¿‡â€œ==â€æ¯”è¾ƒè¿™ä¸¤ä¸ªå¯¹è±¡ã€‚</li>\n<li>æƒ…å†µ2ï¼šç±»è¦†ç›–äº† equals() æ–¹æ³•ã€‚ä¸€èˆ¬ï¼Œæˆ‘ä»¬éƒ½è¦†ç›– equals() æ–¹æ³•æ¥ä¸¤ä¸ªå¯¹è±¡çš„å†…å®¹ç›¸ç­‰ï¼›è‹¥å®ƒä»¬çš„å†…å®¹ç›¸ç­‰ï¼Œåˆ™è¿”å› true (å³ï¼Œè®¤ä¸ºè¿™ä¸¤ä¸ªå¯¹è±¡ç›¸ç­‰)ã€‚</li>\n<li>String ä¸­çš„ equals æ–¹æ³•æ˜¯è¢«é‡å†™è¿‡çš„ï¼Œå› ä¸º object çš„ equals æ–¹æ³•æ˜¯æ¯”è¾ƒçš„å¯¹è±¡çš„å†…å­˜åœ°å€ï¼Œè€Œ String çš„ equals æ–¹æ³•æ¯”è¾ƒçš„æ˜¯å¯¹è±¡çš„å€¼ã€‚</li>\n<li>å½“åˆ›å»º String ç±»å‹çš„å¯¹è±¡æ—¶ï¼Œè™šæ‹Ÿæœºä¼šåœ¨å¸¸é‡æ± ä¸­æŸ¥æ‰¾æœ‰æ²¡æœ‰å·²ç»å­˜åœ¨çš„å€¼å’Œè¦åˆ›å»ºçš„å€¼ç›¸åŒçš„å¯¹è±¡ï¼Œå¦‚æœæœ‰å°±æŠŠå®ƒèµ‹ç»™å½“å‰å¼•ç”¨ã€‚å¦‚æœæ²¡æœ‰å°±åœ¨å¸¸é‡æ± ä¸­é‡æ–°åˆ›å»ºä¸€ä¸ª String å¯¹è±¡ã€‚</li>\n</ul>\n</li>\n<li><strong>compareTo()</strong> æ–¹æ³•ç”¨äºæ¯”è¾ƒä¸¤ä¸ªå­—ç¬¦ä¸²ï¼Œè¿”å›çš„ç»“æœä¸º int ç±»å‹çš„å€¼ã€‚</li>\n</ul>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span>Â <span class=\"keyword\">int</span>Â <span class=\"title\">compareTo</span><span class=\"params\">(StringÂ anotherString)</span>Â </span>&#123;</span><br><span class=\"line\">Â Â Â Â <span class=\"keyword\">int</span>Â len1Â =Â value.length;</span><br><span class=\"line\">Â Â Â Â <span class=\"keyword\">int</span>Â len2Â =Â anotherString.value.length;</span><br><span class=\"line\">Â Â Â Â <span class=\"comment\">//Â è·å–åˆ°ä¸¤ä¸ªå­—ç¬¦ä¸²é•¿åº¦æœ€çŸ­çš„é‚£ä¸ªÂ intÂ å€¼</span></span><br><span class=\"line\">Â Â Â Â <span class=\"keyword\">int</span>Â limÂ =Â Math.min(len1,Â len2);</span><br><span class=\"line\">Â Â Â Â <span class=\"keyword\">char</span>Â v1[]Â =Â value;</span><br><span class=\"line\">Â Â Â Â <span class=\"keyword\">char</span>Â v2[]Â =Â anotherString.value;</span><br><span class=\"line\">Â Â Â Â <span class=\"keyword\">int</span>Â kÂ =Â <span class=\"number\">0</span>;</span><br><span class=\"line\">Â Â Â Â <span class=\"comment\">//Â å¯¹æ¯”æ¯ä¸€ä¸ªå­—ç¬¦</span></span><br><span class=\"line\">Â Â Â Â <span class=\"keyword\">while</span>Â (kÂ &lt;Â lim)Â &#123;</span><br><span class=\"line\">Â Â Â Â Â Â Â Â <span class=\"keyword\">char</span>Â c1Â =Â v1[k];</span><br><span class=\"line\">Â Â Â Â Â Â Â Â <span class=\"keyword\">char</span>Â c2Â =Â v2[k];</span><br><span class=\"line\">Â Â Â Â Â Â Â Â <span class=\"keyword\">if</span>Â (c1Â !=Â c2)Â &#123;</span><br><span class=\"line\">Â Â Â Â Â Â Â Â Â Â Â Â <span class=\"comment\">//Â æœ‰å­—ç¬¦ä¸ç›¸ç­‰å°±è¿”å›å·®å€¼</span></span><br><span class=\"line\">Â Â Â Â Â Â Â Â Â Â Â Â <span class=\"keyword\">return</span>Â c1Â -Â c2;</span><br><span class=\"line\">Â Â Â Â Â Â Â Â &#125;</span><br><span class=\"line\">Â Â Â Â Â Â Â Â k++;</span><br><span class=\"line\">Â Â Â Â &#125;</span><br><span class=\"line\">Â Â Â Â <span class=\"keyword\">return</span>Â len1Â -Â len2;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><p>equals() å¯ä»¥æ¥æ”¶ä¸€ä¸ª Object ç±»å‹çš„å‚æ•°ï¼Œè€Œ compareTo() åªèƒ½æ¥æ”¶ä¸€ä¸ª String ç±»å‹çš„å‚æ•°ï¼›</p>\n</li>\n<li><p>equals() è¿”å›å€¼ä¸º Booleanï¼Œè€Œ compareTo() çš„è¿”å›å€¼åˆ™ä¸º intã€‚</p>\n</li>\n<li><p>å®ƒä»¬éƒ½å¯ä»¥ç”¨äºä¸¤ä¸ªå­—ç¬¦ä¸²çš„æ¯”è¾ƒï¼Œå½“ equals() æ–¹æ³•è¿”å› true æ—¶ï¼Œæˆ–è€…æ˜¯ compareTo() æ–¹æ³•è¿”å› 0 æ—¶ï¼Œåˆ™è¡¨ç¤ºä¸¤ä¸ªå­—ç¬¦ä¸²å®Œå…¨ç›¸åŒã€‚</p>\n</li>\n</ul>\n<h3 id=\"ä¸ºä»€ä¹ˆè¦é‡å†™equalså’Œhashcodeæ–¹æ³•\"><a href=\"#ä¸ºä»€ä¹ˆè¦é‡å†™equalså’Œhashcodeæ–¹æ³•\" class=\"headerlink\" title=\"ä¸ºä»€ä¹ˆè¦é‡å†™equalså’Œhashcodeæ–¹æ³•\"></a>ä¸ºä»€ä¹ˆè¦é‡å†™equalså’Œhashcodeæ–¹æ³•</h3><ul>\n<li>equalsæ˜¯Objectçš„æˆå‘˜æ–¹æ³•ï¼Œé»˜è®¤ä¸é‡å†™ï¼ˆ<em>override</em>ï¼‰æƒ…å†µä¸‹åˆ¤æ–­ç­‰ä»·æ€§ã€‚<ul>\n<li>ç±»æ²¡æœ‰è¦†ç›– equals() æ–¹æ³•ã€‚åˆ™é€šè¿‡ equals() æ¯”è¾ƒè¯¥ç±»çš„ä¸¤ä¸ªå¯¹è±¡æ—¶ï¼Œç­‰ä»·äºé€šè¿‡â€œ==â€æ¯”è¾ƒè¿™ä¸¤ä¸ªå¯¹è±¡ã€‚</li>\n<li>ç±»è¦†ç›–äº† equals() æ–¹æ³•ã€‚ä¸€èˆ¬ï¼Œæˆ‘ä»¬éƒ½è¦†ç›– equals() æ–¹æ³•æ¥ä¸¤ä¸ªå¯¹è±¡çš„å†…å®¹ç›¸ç­‰ï¼›è‹¥å®ƒä»¬çš„å†…å®¹ç›¸ç­‰ï¼Œåˆ™è¿”å› true (å³ï¼Œè®¤ä¸ºè¿™ä¸¤ä¸ªå¯¹è±¡ç›¸ç­‰)ã€‚</li>\n</ul>\n</li>\n</ul>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">test</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">test</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        String a = <span class=\"keyword\">new</span> String(<span class=\"string\">\"ab\"</span>); <span class=\"comment\">// a ä¸ºä¸€ä¸ªå¼•ç”¨</span></span><br><span class=\"line\">        String b = <span class=\"keyword\">new</span> String(<span class=\"string\">\"ab\"</span>); <span class=\"comment\">// bä¸ºå¦ä¸€ä¸ªå¼•ç”¨,å¯¹è±¡çš„å†…å®¹ä¸€æ ·</span></span><br><span class=\"line\">        String aa = <span class=\"string\">\"ab\"</span>; <span class=\"comment\">// æ”¾åœ¨å¸¸é‡æ± ä¸­</span></span><br><span class=\"line\">        String bb = <span class=\"string\">\"ab\"</span>; <span class=\"comment\">// ä»å¸¸é‡æ± ä¸­æŸ¥æ‰¾</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (aa == bb) <span class=\"comment\">// true</span></span><br><span class=\"line\">            System.out.println(<span class=\"string\">\"aa==bb\"</span>);</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (a == b) <span class=\"comment\">// falseï¼ŒéåŒä¸€å¯¹è±¡</span></span><br><span class=\"line\">            System.out.println(<span class=\"string\">\"a==b\"</span>);</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (a.equals(b)) <span class=\"comment\">// true</span></span><br><span class=\"line\">            System.out.println(<span class=\"string\">\"aEQb\"</span>);</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (<span class=\"number\">42</span> == <span class=\"number\">42.0</span>) &#123; <span class=\"comment\">// true</span></span><br><span class=\"line\">            System.out.println(<span class=\"string\">\"true\"</span>);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><p>hashCode() çš„ä½œç”¨æ˜¯è·å–å“ˆå¸Œç ï¼Œä¹Ÿç§°ä¸ºæ•£åˆ—ç ï¼›å®ƒå®é™…ä¸Šæ˜¯è¿”å›ä¸€ä¸ªintæ•´æ•°ã€‚è¿™ä¸ªå“ˆå¸Œç çš„ä½œç”¨æ˜¯ç¡®å®šè¯¥å¯¹è±¡åœ¨å“ˆå¸Œè¡¨ä¸­çš„ç´¢å¼•ä½ç½®ã€‚hashCode() å®šä¹‰åœ¨JDKçš„Object.javaä¸­ï¼Œè¿™å°±æ„å‘³ç€Javaä¸­çš„ä»»ä½•ç±»éƒ½åŒ…å«æœ‰hashCode() å‡½æ•°ã€‚</p>\n<ul>\n<li>é›†åˆä¸­ä½¿ç”¨åœºæ™¯ã€‚<ul>\n<li>å°†å¯¹è±¡æ”¾å…¥åˆ°é›†åˆä¸­æ—¶ï¼Œé¦–å…ˆåˆ¤æ–­è¦æ”¾å…¥å¯¹è±¡çš„ hashCode å€¼ä¸é›†åˆä¸­çš„ä»»æ„ä¸€ä¸ªå…ƒç´ çš„ hashCode å€¼æ˜¯å¦ç›¸ç­‰ï¼Œå¦‚æœä¸ç›¸ç­‰ç›´æ¥å°†è¯¥å¯¹è±¡æ”¾å…¥é›†åˆä¸­ã€‚</li>\n<li>å¦‚æœ hashCode å€¼ç›¸ç­‰ï¼Œç„¶åå†é€šè¿‡ equals æ–¹æ³•åˆ¤æ–­è¦æ”¾å…¥å¯¹è±¡ä¸é›†åˆä¸­çš„ä»»æ„ä¸€ä¸ªå¯¹è±¡æ˜¯å¦ç›¸ç­‰ï¼Œå¦‚æœ equals åˆ¤æ–­ä¸ç›¸ç­‰ï¼Œç›´æ¥å°†è¯¥å…ƒç´ æ”¾å…¥åˆ°é›†åˆä¸­ï¼Œå¦åˆ™ä¸æ”¾å…¥ã€‚</li>\n</ul>\n</li>\n</ul>\n</li>\n<li><p>hashCodeï¼ˆï¼‰ä¸equalsï¼ˆï¼‰çš„ç›¸å…³è§„å®š</p>\n<ol>\n<li>å¦‚æœä¸¤ä¸ªå¯¹è±¡ç›¸ç­‰ï¼Œåˆ™hashcodeä¸€å®šä¹Ÿæ˜¯ç›¸åŒçš„ã€‚</li>\n<li>ä¸¤ä¸ªå¯¹è±¡ç›¸ç­‰,å¯¹ä¸¤ä¸ªå¯¹è±¡åˆ†åˆ«è°ƒç”¨equalsæ–¹æ³•éƒ½è¿”å›trueã€‚</li>\n<li>ä¸¤ä¸ªå¯¹è±¡æœ‰ç›¸åŒçš„hashcodeå€¼ï¼Œå®ƒä»¬ä¹Ÿä¸ä¸€å®šæ˜¯ç›¸ç­‰çš„ã€‚</li>\n<li><strong>å› æ­¤ï¼Œequals æ–¹æ³•è¢«è¦†ç›–è¿‡ï¼Œåˆ™ hashCode æ–¹æ³•ä¹Ÿå¿…é¡»è¢«è¦†ç›–</strong>ã€‚</li>\n<li>hashCode() çš„é»˜è®¤è¡Œä¸ºæ˜¯å¯¹å †ä¸Šçš„å¯¹è±¡äº§ç”Ÿç‹¬ç‰¹å€¼ã€‚å¦‚æœæ²¡æœ‰é‡å†™ hashCode()ï¼Œåˆ™è¯¥ class çš„ä¸¤ä¸ªå¯¹è±¡æ— è®ºå¦‚ä½•éƒ½ä¸ä¼šç›¸ç­‰ï¼ˆå³ä½¿è¿™ä¸¤ä¸ªå¯¹è±¡æŒ‡å‘ç›¸åŒçš„æ•°æ®ï¼‰ã€‚</li>\n</ol>\n</li>\n<li><p>æ€»ç»“</p>\n<ul>\n<li>å¦‚æœåœ¨ Java è¿è¡ŒæœŸé—´å¯¹åŒä¸€ä¸ªå¯¹è±¡è°ƒç”¨ hashCode æ–¹æ³•åï¼Œæ— è®ºè°ƒç”¨å¤šå°‘æ¬¡ï¼Œéƒ½åº”è¯¥è¿”å›ç›¸åŒçš„ hashCodeï¼Œä½†æ˜¯åœ¨ä¸åŒçš„ Java ç¨‹åºä¸­ï¼Œæ‰§è¡Œ hashCode æ–¹æ³•è¿”å›çš„å€¼å¯èƒ½ä¸ä¸€è‡´ã€‚</li>\n<li>å¦‚æœä¸¤ä¸ªå¯¹è±¡çš„ equals ç›¸ç­‰ï¼Œé‚£ä¹ˆ hashCode å¿…é¡»ç›¸åŒã€‚</li>\n<li>å¦‚æœä¸¤ä¸ªå¯¹è±¡ equals ä¸ç›¸ç­‰ï¼Œé‚£ä¹ˆ hashCode ä¹Ÿæœ‰å¯èƒ½ç›¸åŒï¼Œæ‰€ä»¥éœ€è¦é‡å†™ hashCode æ–¹æ³•ï¼Œå› ä¸ºä½ ä¸çŸ¥é“ hashCode çš„åº•å±‚æ„é€ ï¼ˆåæ­£æˆ‘æ˜¯ä¸çŸ¥é“ï¼Œæœ‰å¤§ç‰›å¯ä»¥ä¼ æˆä¼ æˆï¼‰ï¼Œæ‰€ä»¥ä½ éœ€è¦é‡å†™ hashCode æ–¹æ³•ï¼Œæ¥ä¸ºä¸åŒçš„å¯¹è±¡ç”Ÿæˆä¸åŒçš„ hashCode å€¼ï¼Œè¿™æ ·èƒ½å¤Ÿæé«˜ä¸åŒå¯¹è±¡çš„è®¿é—®é€Ÿåº¦ã€‚</li>\n<li>hashCode é€šå¸¸æ˜¯å°†åœ°å€è½¬æ¢ä¸ºæ•´æ•°æ¥å®ç°çš„ã€‚</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"i-å’Œ-iæœ‰ä»€ä¹ˆåŒºåˆ«\"><a href=\"#i-å’Œ-iæœ‰ä»€ä¹ˆåŒºåˆ«\" class=\"headerlink\" title=\"i++å’Œ++iæœ‰ä»€ä¹ˆåŒºåˆ«\"></a>i++å’Œ++iæœ‰ä»€ä¹ˆåŒºåˆ«</h3><ul>\n<li>i++ æ˜¯åœ¨ç¨‹åºæ‰§è¡Œå®Œæ¯•åè¿›è¡Œè‡ªå¢ï¼Œè€Œ ++i æ˜¯åœ¨ç¨‹åºå¼€å§‹æ‰§è¡Œå‰è¿›è¡Œè‡ªå¢ã€‚<ul>\n<li><strong>i++ çš„æ“ä½œåˆ†ä¸‰æ­¥</strong><ul>\n<li>æ ˆä¸­å–å‡º i</li>\n<li>i è‡ªå¢ 1</li>\n<li>å°† i å­˜åˆ°æ ˆ</li>\n<li>ä¸‰ä¸ªé˜¶æ®µï¼šå†…å­˜åˆ°å¯„å­˜å™¨ï¼Œå¯„å­˜å™¨è‡ªå¢ï¼Œå†™å›å†…å­˜ï¼ˆè¿™ä¸‰ä¸ªé˜¶æ®µä¸­é—´éƒ½å¯ä»¥è¢«ä¸­æ–­åˆ†ç¦»å¼€ï¼‰</li>\n<li>æ‰€ä»¥ i++ ä¸æ˜¯åŸå­æ“ä½œï¼Œä¸Šé¢çš„ä¸‰ä¸ªæ­¥éª¤ä¸­ä»»ä½•ä¸€ä¸ªæ­¥éª¤åŒæ—¶æ“ä½œï¼Œéƒ½å¯èƒ½å¯¼è‡´ i çš„å€¼ä¸æ­£ç¡®è‡ªå¢ã€‚</li>\n</ul>\n</li>\n<li><strong>++i</strong><ul>\n<li>åœ¨å¤šæ ¸çš„æœºå™¨ä¸Šï¼ŒCPU åœ¨è¯»å–å†…å­˜ i æ—¶ä¹Ÿä¼šå¯èƒ½å‘ç”ŸåŒæ—¶è¯»å–åˆ°åŒä¸€å€¼ï¼Œè¿™å°±å¯¼è‡´ä¸¤æ¬¡è‡ªå¢ï¼Œå®é™…åªå¢åŠ äº†ä¸€æ¬¡ã€‚</li>\n<li>i++ å’Œ ++i éƒ½ä¸æ˜¯åŸå­æ“ä½œã€‚</li>\n</ul>\n</li>\n<li><strong>åŸå­æ€§</strong>ï¼šæŒ‡çš„æ˜¯ä¸€ä¸ªæ“ä½œæ˜¯ä¸å¯ä¸­æ–­çš„ã€‚å³ä½¿æ˜¯åœ¨å¤šä¸ªçº¿ç¨‹ä¸€èµ·æ‰§è¡Œçš„æ—¶å€™ï¼Œä¸€ä¸ªæ“ä½œä¸€æ—¦å¼€å§‹ï¼Œå°±ä¸ä¼šè¢«å…¶ä»–çº¿ç¨‹æ‰“æ–­ã€‚</li>\n</ul>\n</li>\n</ul>\n<h4 id=\"å¦‚ä½•ä¿è¯å¤šçº¿ç¨‹ä¸‹i-ç»“æœæ­£ç¡®\"><a href=\"#å¦‚ä½•ä¿è¯å¤šçº¿ç¨‹ä¸‹i-ç»“æœæ­£ç¡®\" class=\"headerlink\" title=\"å¦‚ä½•ä¿è¯å¤šçº¿ç¨‹ä¸‹i++ ç»“æœæ­£ç¡®\"></a>å¦‚ä½•ä¿è¯å¤šçº¿ç¨‹ä¸‹i++ ç»“æœæ­£ç¡®</h4><ul>\n<li>ä½¿ç”¨å¾ªç¯CAS,æ¯”å¦‚AtomicInteger</li>\n<li>ä½¿ç”¨é”æœºåˆ¶</li>\n<li>ä½¿ç”¨synchronized</li>\n</ul>\n<h3 id=\"Javaå€¼ä¼ é€’å’Œå¼•ç”¨ä¼ é€’çš„åŒºåˆ«\"><a href=\"#Javaå€¼ä¼ é€’å’Œå¼•ç”¨ä¼ é€’çš„åŒºåˆ«\" class=\"headerlink\" title=\"Javaå€¼ä¼ é€’å’Œå¼•ç”¨ä¼ é€’çš„åŒºåˆ«\"></a>Javaå€¼ä¼ é€’å’Œå¼•ç”¨ä¼ é€’çš„åŒºåˆ«</h3><blockquote>\n<p>Java ç¨‹åºè®¾è®¡è¯­è¨€æ€»æ˜¯é‡‡ç”¨æŒ‰å€¼è°ƒç”¨ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œæ–¹æ³•å¾—åˆ°çš„æ˜¯æ‰€æœ‰å‚æ•°å€¼çš„ä¸€ä¸ªæ‹·è´ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œæ–¹æ³•ä¸èƒ½ä¿®æ”¹ä¼ é€’ç»™å®ƒçš„ä»»ä½•å‚æ•°å˜é‡çš„å†…å®¹ã€‚æŒ‰å€¼è°ƒç”¨(call by value)è¡¨ç¤ºæ–¹æ³•æ¥æ”¶çš„æ˜¯è°ƒç”¨è€…æä¾›çš„å€¼</p>\n</blockquote>\n<ul>\n<li><p>å…¶å®åªæœ‰ä¼ å€¼</p>\n<ul>\n<li>å€¼ä¼ é€’(call by value)ï¼Œå¯¹äºåŸºæœ¬å‹å˜é‡ï¼Œä¼ é€’çš„æ˜¯è¯¥å˜é‡çš„å‰¯æœ¬ï¼Œæ”¹å˜å‰¯æœ¬ä¸å½±å“å˜é‡ã€‚</li>\n<li>ä¼ é€’å¼•ç”¨(call by reference)ï¼Œå¯¹äºå¯¹è±¡å‹å˜é‡ï¼Œä¼ é€’çš„è¯¥å¯¹è±¡çš„åœ°å€çš„ä¸€ä¸ªå‰¯æœ¬ï¼Œå¹¶ä¸æ˜¯åŸå¯¹è±¡æœ¬èº«ã€‚</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"Javaçš„å››ç§å¼•ç”¨ï¼Œå¼ºå¼±è½¯è™š\"><a href=\"#Javaçš„å››ç§å¼•ç”¨ï¼Œå¼ºå¼±è½¯è™š\" class=\"headerlink\" title=\"Javaçš„å››ç§å¼•ç”¨ï¼Œå¼ºå¼±è½¯è™š\"></a>Javaçš„å››ç§å¼•ç”¨ï¼Œå¼ºå¼±è½¯è™š</h3><ul>\n<li><p>å¼ºå¼•ç”¨</p>\n<ul>\n<li>å¼ºå¼•ç”¨æ˜¯å¹³å¸¸ä¸­ä½¿ç”¨æœ€å¤šçš„å¼•ç”¨ï¼Œå¼ºå¼•ç”¨åœ¨ç¨‹åºå†…å­˜ä¸è¶³ï¼ˆOOMï¼‰çš„æ—¶å€™ä¹Ÿä¸ä¼šè¢«å›æ”¶ï¼Œä½¿ç”¨æ–¹å¼ï¼š</li>\n</ul>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\">String str = <span class=\"keyword\">new</span> String(<span class=\"string\">\"str\"</span>);</span><br><span class=\"line\"><span class=\"comment\">// å¼ºå¼•ç”¨ str != null;</span></span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>å½“<strong>å†…å­˜ç©ºé—´ä¸è¶³</strong>æ—¶ï¼Œ<code>Java</code>è™šæ‹Ÿæœºå®æ„¿æŠ›å‡º<code>OutOfMemoryError</code>é”™è¯¯ï¼Œä½¿ç¨‹åº<strong>å¼‚å¸¸ç»ˆæ­¢</strong>ï¼Œä¹Ÿä¸ä¼šé éšæ„<strong>å›æ”¶</strong>å…·æœ‰<strong>å¼ºå¼•ç”¨</strong>çš„<strong>å¯¹è±¡</strong>æ¥è§£å†³å†…å­˜ä¸è¶³çš„é—®é¢˜ã€‚ å¦‚æœå¼ºå¼•ç”¨å¯¹è±¡<strong>ä¸ä½¿ç”¨æ—¶</strong>ï¼Œéœ€è¦å¼±åŒ–ä»è€Œä½¿<code>GC</code>èƒ½å¤Ÿå›æ”¶ã€‚</li>\n</ul>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\">str = <span class=\"keyword\">null</span>;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>æ˜¾ç¤ºçš„å°†strå¯¹è±¡è®¾ç½®æˆnullï¼Œè¿™æ ·å°±è„±ç¦»çš„å¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸï¼Œå…·ä½“ä»€ä¹ˆæ—¶å€™å–å†³å½“å‰çš„gcã€‚</li>\n</ul>\n</li>\n<li><p>è½¯å¼•ç”¨</p>\n<ul>\n<li>è½¯å¼•ç”¨åœ¨ç¨‹åºå†…å­˜ä¸è¶³æ—¶ï¼Œä¼šè¢«å›æ”¶ï¼Œä½¿ç”¨æ–¹å¼ï¼š</li>\n</ul>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// æ³¨æ„ï¼šwrfè¿™ä¸ªå¼•ç”¨ä¹Ÿæ˜¯å¼ºå¼•ç”¨ï¼Œå®ƒæ˜¯æŒ‡å‘SoftReferenceè¿™ä¸ªå¯¹è±¡çš„ï¼Œ </span></span><br><span class=\"line\"><span class=\"comment\">// è¿™é‡Œçš„è½¯å¼•ç”¨æŒ‡çš„æ˜¯æŒ‡å‘new String(\"str\")çš„å¼•ç”¨ï¼Œä¹Ÿå°±æ˜¯SoftReferenceç±»ä¸­T </span></span><br><span class=\"line\">SoftReference&lt;String&gt; wrf = <span class=\"keyword\">new</span> SoftReference&lt;String&gt;(<span class=\"keyword\">new</span> String(<span class=\"string\">\"str\"</span>));</span><br><span class=\"line\"><span class=\"comment\">// åˆ›å»ºç¼“å­˜çš„æ—¶å€™ï¼Œåˆ›å»ºçš„å¯¹è±¡æ”¾è¿›ç¼“å­˜ä¸­ï¼Œå½“å†…å­˜ä¸è¶³æ—¶ï¼ŒJVMå°±ä¼šå›æ”¶æ—©å…ˆåˆ›å»ºçš„å¯¹è±¡ã€‚</span></span><br></pre></td></tr></table></figure>\n</li>\n<li><p>å¼±å¼•ç”¨</p>\n<ul>\n<li>å¼±å¼•ç”¨å°±æ˜¯åªè¦JVMåƒåœ¾å›æ”¶å™¨å‘ç°äº†å®ƒï¼Œå°±ä¼šå°†ä¹‹å›æ”¶ï¼Œä½¿ç”¨æ–¹å¼ï¼š</li>\n</ul>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\">WeakReference&lt;String&gt; wrf = <span class=\"keyword\">new</span> WeakReference&lt;String&gt;(str);</span><br><span class=\"line\"><span class=\"comment\">// Javaæºç ä¸­çš„ java.util.WeakHashMap ä¸­çš„ key å°±æ˜¯ä½¿ç”¨å¼±å¼•ç”¨</span></span><br><span class=\"line\"><span class=\"comment\">// ä¸éœ€è¦æŸä¸ªå¼•ç”¨ï¼ŒJVMä¼šè‡ªåŠ¨å¸®æˆ‘å¤„ç†å®ƒï¼Œè¿™æ ·æˆ‘å°±ä¸éœ€è¦åšå…¶å®ƒæ“ä½œ</span></span><br><span class=\"line\"><span class=\"comment\">// å¼±å¼•ç”¨ wrf = null; æ— æ³•åœ¨è·å–å¯¹è±¡</span></span><br></pre></td></tr></table></figure>\n</li>\n<li><p>è™šå¼•ç”¨</p>\n<p>è™šå¼•ç”¨çš„å›æ”¶æœºåˆ¶è·Ÿå¼±å¼•ç”¨å·®ä¸å¤šï¼Œä½†æ˜¯å®ƒè¢«å›æ”¶ä¹‹å‰ï¼Œä¼šè¢«æ”¾å…¥ ReferenceQueue ä¸­ã€‚å…¶å®ƒå¼•ç”¨æ˜¯è¢«JVMå›æ”¶åæ‰è¢«ä¼ å…¥ ReferenceQueue ä¸­çš„ã€‚ç”±äºè¿™ä¸ªæœºåˆ¶ï¼Œæ‰€ä»¥è™šå¼•ç”¨å¤§å¤šè¢«ç”¨äºå¼•ç”¨é”€æ¯å‰çš„å¤„ç†å·¥ä½œã€‚è¿˜æœ‰å°±æ˜¯ï¼Œè™šå¼•ç”¨åˆ›å»ºçš„æ—¶å€™ï¼Œå¿…é¡»å¸¦æœ‰ ReferenceQueue ï¼Œä½¿ç”¨ã€‚</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\">PhantomReference&lt;String&gt; prf = <span class=\"keyword\">new</span> PhantomReference&lt;String&gt;(<span class=\"keyword\">new</span> String(<span class=\"string\">\"str\"</span>), <span class=\"keyword\">new</span> ReferenceQueue&lt;&gt;());</span><br><span class=\"line\"><span class=\"comment\">// å¯¹è±¡é”€æ¯å‰çš„ä¸€äº›æ“ä½œï¼Œæ¯”å¦‚è¯´èµ„æºé‡Šæ”¾ç­‰ã€‚Object.finalize() è™½ç„¶ä¹Ÿå¯ä»¥åšè¿™ç±»åŠ¨ä½œï¼Œä½†æ˜¯è¿™ä¸ªæ–¹å¼å³ä¸å®‰å…¨åˆä½æ•ˆ</span></span><br><span class=\"line\"><span class=\"comment\">// prf = null ; æ— æ³•åœ¨è·å–å¯¹è±¡</span></span><br></pre></td></tr></table></figure>\n</li>\n<li><p>Javaä¸­4ç§å¼•ç”¨çš„çº§åˆ«å’Œå¼ºåº¦ç”±é«˜åˆ°ä½ä¾æ¬¡ä¸ºï¼šå¼ºå¼•ç”¨ -&gt; è½¯å¼•ç”¨ -&gt; å¼±å¼•ç”¨ -&gt; è™šå¼•ç”¨</p>\n</li>\n</ul>\n<table>\n<thead>\n<tr>\n<th>ç±»å‹</th>\n<th>å›æ”¶æ—¶é—´</th>\n<th>ç”¨é€”</th>\n<th>ç”Ÿå­˜æ—¶é—´</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>å¼ºå¼•ç”¨</td>\n<td>ä»æ¥ä¸ä¼š</td>\n<td>å¯¹è±¡çš„ä¸€èˆ¬çŠ¶æ€</td>\n<td>JVMåœæ­¢è¿è¡Œæ—¶ç»ˆæ­¢</td>\n</tr>\n<tr>\n<td>è½¯é¥®ç”¨</td>\n<td>å½“å†…å­˜ä¸è¶³æ—¶</td>\n<td>å¯¹è±¡ç¼“å­˜</td>\n<td>å†…å­˜ä¸è¶³æ—¶ç»ˆæ­¢</td>\n</tr>\n<tr>\n<td>å¼±é¥®ç”¨</td>\n<td>æ­£å¸¸åƒåœ¾å›æ”¶æ—¶</td>\n<td>å¯¹è±¡ç¼“å­˜</td>\n<td>åƒåœ¾å›æ”¶åç»ˆæ­¢</td>\n</tr>\n<tr>\n<td>è™šé¥®ç”¨</td>\n<td>æ­£å¸¸åƒåœ¾å›æ”¶æ—¶</td>\n<td>è·Ÿè¸ªå¯¹è±¡çš„åƒåœ¾å›æ”¶</td>\n<td>åƒåœ¾å›æ”¶åç»ˆæ­¢</td>\n</tr>\n</tbody></table>\n<h3 id=\"æè¿°ä¸‹final-ä¸-finallyã€finalizeçš„åŒºåˆ«ã€‚\"><a href=\"#æè¿°ä¸‹final-ä¸-finallyã€finalizeçš„åŒºåˆ«ã€‚\" class=\"headerlink\" title=\"æè¿°ä¸‹final ä¸ finallyã€finalizeçš„åŒºåˆ«ã€‚\"></a>æè¿°ä¸‹final ä¸ finallyã€finalizeçš„åŒºåˆ«ã€‚</h3><ul>\n<li><p><code>final</code> ï¼Œæ˜¯ä¿®é¥°ç¬¦å…³é”®å­—ã€‚</p>\n<ul>\n<li><p>å¦‚æœä¸€ä¸ªç±»è¢«å£°æ˜ä¸ºfinalï¼Œæ„å‘³ç€å®ƒä¸èƒ½å†æ´¾ç”Ÿå‡ºæ–°çš„å­ç±»ï¼Œä¸èƒ½ä½œä¸ºçˆ¶ç±»è¢«ç»§æ‰¿ã€‚å› æ­¤ä¸€ä¸ªç±»ä¸èƒ½æ—¢è¢«å£°æ˜ä¸º abstractçš„ï¼Œåˆè¢«å£°æ˜ä¸ºfinalçš„ã€‚å°†å˜é‡æˆ–æ–¹æ³•å£°æ˜ä¸ºfinalï¼Œå¯ä»¥ä¿è¯å®ƒä»¬åœ¨ä½¿ç”¨ä¸­ä¸è¢«æ”¹å˜ã€‚è¢«å£°æ˜ä¸ºfinalçš„å˜é‡å¿…é¡»åœ¨newä¸€ä¸ªå¯¹è±¡æ—¶åˆå§‹åŒ–ï¼ˆå³åªèƒ½åœ¨å£°æ˜å˜é‡æˆ–æ„é€ å™¨æˆ–ä»£ç å—å†…åˆå§‹åŒ–ï¼‰ï¼Œè€Œåœ¨ä»¥åçš„å¼•ç”¨ä¸­åªèƒ½è¯»å–ï¼Œä¸å¯ä¿®æ”¹ã€‚è¢«å£°æ˜ä¸ºfinalçš„æ–¹æ³•ä¹ŸåŒæ ·åªèƒ½ä½¿ç”¨ï¼Œä¸èƒ½è¦†ç›–(é‡å†™)ã€‚</p>\n<ul>\n<li><p>çˆ¶ç±»çš„privateæˆå‘˜æ–¹æ³•æ˜¯ä¸èƒ½è¢«å­ç±»è¦†ç›–çš„ï¼Œå› ä¸ºè¢«privateä¿®é¥°çš„æ–¹æ³•é»˜è®¤æ˜¯finalç±»å‹çš„ã€‚</p>\n</li>\n<li><p>finalç±»</p>\n<ul>\n<li>finalç±»ä¸èƒ½è¢«ç»§æ‰¿ï¼Œå› æ­¤finalç±»çš„æˆå‘˜æ–¹æ³•æ²¡æœ‰æœºä¼šè¢«è¦†ç›–ï¼Œé»˜è®¤éƒ½æ˜¯finalçš„ã€‚å¦‚æœè¿™ä¸ªç±»ä¸éœ€è¦æœ‰å­ç±»ï¼Œç±»çš„å®ç°ç»†èŠ‚ä¸å…è®¸æ”¹å˜ï¼Œå¹¶ä¸”ç¡®ä¿¡è¿™ä¸ªç±»ä¸ä¼šè½½è¢«æ‰©å±•ï¼Œé‚£ä¹ˆå°±è®¾è®¡ä¸ºfinalç±»ã€‚</li>\n</ul>\n</li>\n<li><p>finalæ–¹æ³•</p>\n<ul>\n<li>å¦‚æœä¸€ä¸ªç±»ä¸å…è®¸å…¶å­ç±»è¦†ç›–æŸä¸ªæ–¹æ³•ï¼Œåˆ™å¯ä»¥æŠŠè¿™ä¸ªæ–¹æ³•å£°æ˜ä¸ºfinalæ–¹æ³•ã€‚</li>\n</ul>\n</li>\n<li><p>finalå˜é‡ï¼ˆå¸¸é‡ï¼‰</p>\n<ul>\n<li>ç”¨finalä¿®é¥°çš„æˆå‘˜å˜é‡è¡¨ç¤ºå¸¸é‡ï¼Œå€¼ä¸€æ—¦ç»™å®šå°±æ— æ³•æ”¹å˜ï¼</li>\n<li>finalä¿®é¥°çš„å˜é‡æœ‰ä¸‰ç§ï¼šé™æ€å˜é‡ã€å®ä¾‹å˜é‡å’Œå±€éƒ¨å˜é‡ï¼Œåˆ†åˆ«è¡¨ç¤ºä¸‰ç§ç±»å‹çš„å¸¸é‡ã€‚</li>\n<li>finalå˜é‡å®šä¹‰çš„æ—¶å€™ï¼Œå¯ä»¥å…ˆå£°æ˜ï¼Œè€Œä¸ç»™åˆå€¼ï¼Œè¿™ä¸­å˜é‡ä¹Ÿç§°ä¸ºfinalç©ºç™½ï¼Œæ— è®ºä»€ä¹ˆæƒ…å†µï¼Œç¼–è¯‘å™¨éƒ½ç¡®ä¿ç©ºç™½finalåœ¨ä½¿ç”¨ä¹‹å‰å¿…é¡»è¢«åˆå§‹åŒ–ã€‚ç±»ä¸­çš„finalæ•°æ®æˆå‘˜å°±å¯ä»¥æ ¹æ®ä¾èµ–å¯¹è±¡è€Œæœ‰æ‰€ä¸åŒï¼Œå¹¶ä¿æŒå…¶æ’å®šä¸å˜çš„ç‰¹å¾ã€‚</li>\n</ul>\n</li>\n<li><p>finalå‚æ•°</p>\n<ul>\n<li>å½“å‡½æ•°å‚æ•°ä¸ºfinalç±»å‹æ—¶ï¼Œä½ å¯ä»¥è¯»å–ä½¿ç”¨è¯¥å‚æ•°ï¼Œä½†æ˜¯æ— æ³•æ”¹å˜è¯¥å‚æ•°çš„å€¼ã€‚</li>\n</ul>\n</li>\n<li><p><strong>æ³¨æ„final ä¸æ˜¯immutableçš„</strong></p>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n<li><p><code>finally</code>åœ¨å¼‚å¸¸å¤„ç†æ—¶æä¾› <code>finally</code> å—æ¥æ‰§è¡Œä»»ä½•æ¸…é™¤æ“ä½œã€‚å¦‚æœæŠ›å‡ºä¸€ä¸ªå¼‚å¸¸ï¼Œé‚£ä¹ˆç›¸åŒ¹é…çš„ <code>catch</code> å­å¥å°±ä¼šæ‰§è¡Œï¼Œç„¶åæ§åˆ¶å°±ä¼šè¿›å…¥ <code>finally</code> å—ï¼ˆå¦‚æœæœ‰çš„è¯ï¼‰ã€‚</p>\n<ul>\n<li>åœ¨å¼‚å¸¸å¤„ç†æ—¶æä¾› finally å—æ¥æ‰§è¡Œä»»ä½•æ¸…é™¤æ“ä½œã€‚åªæœ‰åœ¨ä¸ finally ç›¸å¯¹åº”çš„ try è¯­å¥å—å¾—åˆ°æ‰§è¡Œçš„æƒ…å†µä¸‹ï¼Œfinally è¯­å¥å—æ‰ä¼šæ‰§è¡Œã€‚å¦‚æœæŠ›å‡ºä¸€ä¸ªå¼‚å¸¸ï¼Œé‚£ä¹ˆç›¸åŒ¹é…çš„ catch å­å¥å°±ä¼šæ‰§è¡Œï¼Œç„¶åæ§åˆ¶å°±ä¼šè¿›å…¥ finally å—ï¼ˆå¦‚æœæœ‰çš„è¯ï¼‰ã€‚</li>\n<li>finally è¯­å¥å—å¯èƒ½æ˜¯è¦æ‰§è¡Œçš„ã€‚<ul>\n<li>å½“tryæµç¨‹ä¸­å‡ºç°ç¨‹åºä¸­æ–­æƒ…å†µæ˜¯ä¸ä¼šåœ¨æ‰§è¡Œfinallyè¯­å¥çš„ã€‚ä¹Ÿå°±æ˜¯è¯´ä¸€ä¸ªçº¿ç¨‹åœ¨æ‰§è¡Œ try è¯­å¥å—æˆ–è€… catch è¯­å¥å—æ—¶è¢«æ‰“æ–­ï¼ˆinterruptedï¼‰æˆ–è€…è¢«ç»ˆæ­¢ï¼ˆkilledï¼‰ï¼Œä¸å…¶ç›¸å¯¹åº”çš„ finally è¯­å¥å—å¯èƒ½ä¸ä¼šæ‰§è¡Œã€‚è¿˜æœ‰æ›´æç«¯çš„æƒ…å†µï¼Œå°±æ˜¯åœ¨çº¿ç¨‹è¿è¡Œ try è¯­å¥å—æˆ–è€… catch è¯­å¥å—æ—¶ï¼Œçªç„¶æ­»æœºæˆ–è€…æ–­ç”µï¼Œfinally è¯­å¥å—è‚¯å®šä¸ä¼šæ‰§è¡Œäº†ã€‚</li>\n</ul>\n</li>\n</ul>\n</li>\n<li><p><code>finalize</code> ï¼Œæ˜¯æ–¹æ³•åã€‚</p>\n<ul>\n<li>Java å…è®¸ä½¿ç”¨ <code>#finalize()</code> æ–¹æ³•ï¼Œåœ¨åƒåœ¾æ”¶é›†å™¨å°†å¯¹è±¡ä»å†…å­˜ä¸­æ¸…é™¤å‡ºå»ä¹‹å‰åšå¿…è¦çš„æ¸…ç†å·¥ä½œã€‚è¿™ä¸ªæ–¹æ³•æ˜¯ç”±åƒåœ¾æ”¶é›†å™¨åœ¨ç¡®å®šè¿™ä¸ªå¯¹è±¡æ²¡æœ‰è¢«å¼•ç”¨æ—¶å¯¹è¿™ä¸ªå¯¹è±¡è°ƒç”¨çš„ã€‚</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"finallyå¯¹åº”çš„try-catchè¯­å¥æµç¨‹\"><a href=\"#finallyå¯¹åº”çš„try-catchè¯­å¥æµç¨‹\" class=\"headerlink\" title=\"finallyå¯¹åº”çš„try catchè¯­å¥æµç¨‹\"></a>finallyå¯¹åº”çš„try catchè¯­å¥æµç¨‹</h3><figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\">   <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String[] args)</span>  </span>&#123;</span><br><span class=\"line\">       <span class=\"keyword\">try</span> &#123;  </span><br><span class=\"line\">           System.out.println(<span class=\"string\">\"try block\"</span>);  </span><br><span class=\"line\">           <span class=\"keyword\">return</span> ;  </span><br><span class=\"line\">       &#125; <span class=\"keyword\">finally</span> &#123;  </span><br><span class=\"line\">           System.out.println(<span class=\"string\">\"finally block\"</span>);  </span><br><span class=\"line\">       &#125;  </span><br><span class=\"line\">    &#125; </span><br><span class=\"line\"><span class=\"comment\">//è¿è¡Œç»“æœ</span></span><br><span class=\"line\"><span class=\"comment\">//try block </span></span><br><span class=\"line\"><span class=\"comment\">//finally block</span></span><br></pre></td></tr></table></figure>\n\n<p>ä»ç»“æœçœ‹finallyè¯­å¥ä¼šåœ¨returnä¹‹å‰æ‰§è¡Œã€‚</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String[] args)</span>  </span>&#123;</span><br><span class=\"line\">    System.out.println(<span class=\"string\">\"return value of test(): \"</span> + test()); </span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">int</span> <span class=\"title\">test</span><span class=\"params\">()</span> </span>&#123; </span><br><span class=\"line\">    <span class=\"keyword\">int</span> i = <span class=\"number\">1</span>;</span><br><span class=\"line\"> <span class=\"keyword\">try</span> &#123;  </span><br><span class=\"line\">    System.out.println(<span class=\"string\">\"try block\"</span>);</span><br><span class=\"line\">        i = <span class=\"number\">1</span> / <span class=\"number\">0</span>; <span class=\"comment\">//æŠ›ä¸€ä¸ªå¼‚å¸¸è¿›catch</span></span><br><span class=\"line\">     <span class=\"keyword\">return</span> i;  </span><br><span class=\"line\"> &#125;<span class=\"keyword\">catch</span> (Exception e)&#123; </span><br><span class=\"line\">    System.out.println(<span class=\"string\">\"exception block\"</span>); </span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"number\">2</span>; </span><br><span class=\"line\"> &#125;<span class=\"keyword\">finally</span> &#123;  </span><br><span class=\"line\">    System.out.println(<span class=\"string\">\"finally block\"</span>);  </span><br><span class=\"line\"> &#125; </span><br><span class=\"line\">&#125;  </span><br><span class=\"line\"><span class=\"comment\">//è¿è¡Œç»“æœ</span></span><br><span class=\"line\"><span class=\"comment\">//try block</span></span><br><span class=\"line\"><span class=\"comment\">//exception block</span></span><br><span class=\"line\"><span class=\"comment\">//finally block</span></span><br><span class=\"line\"><span class=\"comment\">//return value of test(): 2</span></span><br></pre></td></tr></table></figure>\n\n<p> ä»ç»“æœçœ‹finally è¯­å¥å—åœ¨ catch è¯­å¥å—ä¸­çš„ return è¯­å¥ä¹‹å‰æ‰§è¡Œã€‚</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String[] args)</span>  </span>&#123;</span><br><span class=\"line\">    System.out.println(<span class=\"string\">\"return value of test(): \"</span> + test()); </span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">@SuppressWarnings</span>(<span class=\"string\">\"finally\"</span>)</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">int</span> <span class=\"title\">test</span><span class=\"params\">()</span> </span>&#123; </span><br><span class=\"line\">  <span class=\"keyword\">int</span> i = <span class=\"number\">1</span>; </span><br><span class=\"line\">      <span class=\"keyword\">try</span> &#123; </span><br><span class=\"line\">         i = <span class=\"number\">4</span>; </span><br><span class=\"line\">         <span class=\"keyword\">return</span> i;</span><br><span class=\"line\">      &#125; <span class=\"keyword\">finally</span> &#123; </span><br><span class=\"line\">         i++; </span><br><span class=\"line\">         <span class=\"keyword\">return</span> i; </span><br><span class=\"line\">      &#125;  </span><br><span class=\"line\">&#125; </span><br><span class=\"line\"><span class=\"comment\">//è¿è¡Œç»“æœ</span></span><br><span class=\"line\"><span class=\"comment\">//return value of test(): 5</span></span><br></pre></td></tr></table></figure>\n\n<p>ä»ç»“æœçœ‹ finally è¯­å¥å—ä¸­å¦‚æœå‡ºç°returné‚£ä¹ˆè¯¥æµç¨‹å°±ç»“æŸäº†ã€‚å…¶å®æ˜¯finallyå—ä¸­çš„returnè¯­å¥ä¼šè¦†ç›–tryå—ä¸­çš„returnè¿”å›ã€‚</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"> <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String[] args)</span>  </span>&#123;</span><br><span class=\"line\">    System.out.println(<span class=\"string\">\"return value of test3(): \"</span> + test()); </span><br><span class=\"line\">&#125;</span><br><span class=\"line\"> </span><br><span class=\"line\"> <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">int</span> <span class=\"title\">test3</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">     <span class=\"keyword\">int</span> b = <span class=\"number\">20</span>;</span><br><span class=\"line\">     <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">\"try block\"</span>);</span><br><span class=\"line\">        b += <span class=\"number\">80</span>;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> b; </span><br><span class=\"line\">     &#125; <span class=\"keyword\">catch</span> (Exception e) &#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">\"catch block\"</span>);</span><br><span class=\"line\">     &#125; <span class=\"keyword\">finally</span> &#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">\"finally block\"</span>);</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (b &gt; <span class=\"number\">25</span>) &#123;</span><br><span class=\"line\">           b += <span class=\"number\">100</span>;</span><br><span class=\"line\">           System.out.println(<span class=\"string\">\"b&gt;25 and b = \"</span> + b);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">     &#125;</span><br><span class=\"line\">     <span class=\"keyword\">return</span> b;</span><br><span class=\"line\"> &#125; </span><br><span class=\"line\"><span class=\"comment\">// è¿è¡Œç»“æœ</span></span><br><span class=\"line\"><span class=\"comment\">//try block</span></span><br><span class=\"line\"><span class=\"comment\">//finally block</span></span><br><span class=\"line\"><span class=\"comment\">//b&gt;25 and b = 200</span></span><br><span class=\"line\"><span class=\"comment\">//return value of test(): 100</span></span><br></pre></td></tr></table></figure>\n\n<p>ä»ç»“æœçœ‹:weary:ä¸ºä»€ä¹ˆä¸è¿”å›200ï¼ä¸ºä»€ä¹ˆfinallyé‡Œé¢çš„ä¿®æ”¹æ²¡æœ‰æ•ˆæœï¼Ÿå› ä¸ºfinallyè¯­å¥ä¸­æ²¡æœ‰returnè¯­å¥è¦†ç›–è¿”å›å€¼ï¼Œé‚£ä¹ˆåŸæ¥çš„è¿”å›å€¼å¯èƒ½å› ä¸ºfinallyé‡Œçš„ä¿®æ”¹è€Œæ”¹å˜ä¹Ÿå¯èƒ½ä¸å˜ã€‚é‚£ä»€ä¹ˆæƒ…å†µä¸‹ä¼šæ”¹å˜å‘¢ï¼Ÿ</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"> <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String[] args)</span>  </span>&#123;</span><br><span class=\"line\">   System.out.println(<span class=\"string\">\"return value of test3(): \"</span> + test()); </span><br><span class=\"line\"> &#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">int</span> <span class=\"title\">test3</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">       <span class=\"keyword\">int</span> b = <span class=\"number\">20</span>;</span><br><span class=\"line\">       <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">           System.out.println(<span class=\"string\">\"try block\"</span>);</span><br><span class=\"line\">           b += <span class=\"number\">80</span>;</span><br><span class=\"line\">           b = b / <span class=\"number\">0</span>; <span class=\"comment\">//æŠ›å¼‚å¸¸</span></span><br><span class=\"line\">           <span class=\"keyword\">return</span> b; </span><br><span class=\"line\">       &#125;</span><br><span class=\"line\">       <span class=\"keyword\">catch</span> (Exception e) &#123;</span><br><span class=\"line\">           System.out.println(<span class=\"string\">\"catch block\"</span>);</span><br><span class=\"line\">       &#125;</span><br><span class=\"line\">       <span class=\"keyword\">finally</span> &#123;</span><br><span class=\"line\">           System.out.println(<span class=\"string\">\"finally block\"</span>);</span><br><span class=\"line\">           <span class=\"keyword\">if</span> (b &gt; <span class=\"number\">25</span>) &#123;</span><br><span class=\"line\">            b += <span class=\"number\">100</span>;</span><br><span class=\"line\">               System.out.println(<span class=\"string\">\"b&gt;25 and b = \"</span> + b);</span><br><span class=\"line\">           &#125;</span><br><span class=\"line\">       &#125;</span><br><span class=\"line\">       <span class=\"keyword\">return</span> b;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">//è¿è¡Œç»“æœ</span></span><br><span class=\"line\"><span class=\"comment\">//try block</span></span><br><span class=\"line\"><span class=\"comment\">//catch block</span></span><br><span class=\"line\"><span class=\"comment\">//finally block</span></span><br><span class=\"line\"><span class=\"comment\">//b&gt;25 and b = 200</span></span><br><span class=\"line\"><span class=\"comment\">//return value of test(): 200</span></span><br></pre></td></tr></table></figure>\n\n<p>ä»ç»“æœçœ‹finallyé‡Œé¢çš„ä¿®æ”¹å¯æ•ˆæœäº†ï¼Œå› ä¸ºæŠ›å‡ºäº†å¼‚å¸¸æ‰€ä»¥æ²¡æœ‰æ‰§è¡Œtryä»£ç å—é‡Œé¢çš„returnã€‚</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String[] args)</span>  </span>&#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">\"return value of test3(): \"</span> + test()); </span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">int</span> <span class=\"title\">test3</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">     <span class=\"keyword\">int</span> b = <span class=\"number\">20</span>;</span><br><span class=\"line\">         <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">             System.out.println(<span class=\"string\">\"try block\"</span>);</span><br><span class=\"line\">             b += <span class=\"number\">80</span>;</span><br><span class=\"line\">             b = b / <span class=\"number\">0</span>;</span><br><span class=\"line\">             <span class=\"keyword\">return</span> b; </span><br><span class=\"line\">         &#125;</span><br><span class=\"line\">         <span class=\"keyword\">catch</span> (Exception e) &#123;</span><br><span class=\"line\">             System.out.println(<span class=\"string\">\"catch block\"</span>);</span><br><span class=\"line\">             <span class=\"keyword\">return</span> b += <span class=\"number\">10</span>;</span><br><span class=\"line\">         &#125;</span><br><span class=\"line\">         <span class=\"keyword\">finally</span> &#123;</span><br><span class=\"line\">             System.out.println(<span class=\"string\">\"finally block\"</span>);</span><br><span class=\"line\">             <span class=\"keyword\">if</span> (b &gt; <span class=\"number\">25</span>) &#123;</span><br><span class=\"line\">                b += <span class=\"number\">100</span>;</span><br><span class=\"line\">                 System.out.println(<span class=\"string\">\"b&gt;25 and b = \"</span> + b);</span><br><span class=\"line\">             &#125;</span><br><span class=\"line\">         &#125;</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\"><span class=\"comment\">// è¿è¡Œç»“æœ</span></span><br><span class=\"line\"><span class=\"comment\">// try block</span></span><br><span class=\"line\"><span class=\"comment\">// catch block</span></span><br><span class=\"line\"><span class=\"comment\">// finally block</span></span><br><span class=\"line\"><span class=\"comment\">// b&gt;25 and b = 210</span></span><br><span class=\"line\"><span class=\"comment\">// return value of test(): 110</span></span><br><span class=\"line\"><span class=\"comment\">// ä»ç»“æœæ¥çœ‹ï¼ŒæŠ›å‡ºå¼‚å¸¸åreturn æ–¹æ³•æ‰§è¡Œä¹‹å‰ï¼Œä¹Ÿè¿è¡Œäº†finallyä»£ç å—ï¼Œä½†æ˜¯å¹¶æœªå½±å“catchä»£ç å—ä¸­çš„è¿”å›å€¼ã€‚</span></span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>finallyå—çš„è¯­å¥åœ¨tryæˆ–catchä¸­çš„returnè¯­å¥æ‰§è¡Œä¹‹åè¿”å›ä¹‹å‰æ‰§è¡Œï¼Œfinallyé‡Œçš„ä¿®æ”¹è¯­å¥å¯èƒ½å½±å“ä¹Ÿå¯èƒ½ä¸å½±å“tryæˆ–catchä¸­ returnå·²ç»ç¡®å®šçš„è¿”å›å€¼ï¼Œè‹¥finallyé‡Œä¹Ÿæœ‰returnè¯­å¥åˆ™è¦†ç›–tryæˆ–catchä¸­çš„returnè¯­å¥ç›´æ¥è¿”å›ã€‚æ²¡æœ‰è¿›å…¥tryä»£ç å—å°±ä¸ä¼šæ‰§è¡Œfinallyä»£ç å—ã€‚</li>\n</ul>\n<h3 id=\"static-this-super-å…³é”®å­—æ€»ç»“\"><a href=\"#static-this-super-å…³é”®å­—æ€»ç»“\" class=\"headerlink\" title=\"static,this,super å…³é”®å­—æ€»ç»“\"></a>static,this,super å…³é”®å­—æ€»ç»“</h3><h4 id=\"static-å…³é”®å­—\"><a href=\"#static-å…³é”®å­—\" class=\"headerlink\" title=\"static å…³é”®å­—\"></a>static å…³é”®å­—</h4><blockquote>\n<p>static å…³é”®å­—ä¸»è¦æœ‰ä»¥ä¸‹å››ç§ä½¿ç”¨åœºæ™¯</p>\n</blockquote>\n<ul>\n<li><p><strong>ä¿®é¥°æˆå‘˜å˜é‡å’Œæˆå‘˜æ–¹æ³•:</strong> è¢« static ä¿®é¥°çš„æˆå‘˜å±äºç±»ï¼Œä¸å±äºå•ä¸ªè¿™ä¸ªç±»çš„æŸä¸ªå¯¹è±¡ï¼Œè¢«ç±»ä¸­æ‰€æœ‰å¯¹è±¡å…±äº«ï¼Œå¯ä»¥å¹¶ä¸”å»ºè®®é€šè¿‡ç±»åè°ƒç”¨ã€‚è¢«static å£°æ˜çš„æˆå‘˜å˜é‡å±äºé™æ€æˆå‘˜å˜é‡ï¼Œé™æ€å˜é‡ å­˜æ”¾åœ¨ Java å†…å­˜åŒºåŸŸçš„æ–¹æ³•åŒºã€‚è°ƒç”¨æ ¼å¼ï¼š<code>ç±»å.é™æ€å˜é‡å</code> <code>ç±»å.é™æ€æ–¹æ³•å()</code></p>\n</li>\n<li><p><strong>é™æ€ä»£ç å—:</strong> é™æ€ä»£ç å—å®šä¹‰åœ¨ç±»ä¸­æ–¹æ³•å¤–, é™æ€ä»£ç å—åœ¨éé™æ€ä»£ç å—ä¹‹å‰æ‰§è¡Œ(é™æ€ä»£ç å—â€”&gt;éé™æ€ä»£ç å—â€”&gt;æ„é€ æ–¹æ³•)ã€‚ è¯¥ç±»ä¸ç®¡åˆ›å»ºå¤šå°‘å¯¹è±¡ï¼Œé™æ€ä»£ç å—åªæ‰§è¡Œä¸€æ¬¡.</p>\n</li>\n<li><p><strong>é™æ€å†…éƒ¨ç±»ï¼ˆstaticä¿®é¥°ç±»çš„è¯åªèƒ½ä¿®é¥°å†…éƒ¨ç±»ï¼‰ï¼š</strong> é™æ€å†…éƒ¨ç±»ä¸éé™æ€å†…éƒ¨ç±»ä¹‹é—´å­˜åœ¨ä¸€ä¸ªæœ€å¤§çš„åŒºåˆ«: éé™æ€å†…éƒ¨ç±»åœ¨ç¼–è¯‘å®Œæˆä¹‹åä¼šéšå«åœ°ä¿å­˜ç€ä¸€ä¸ªå¼•ç”¨ï¼Œè¯¥å¼•ç”¨æ˜¯æŒ‡å‘åˆ›å»ºå®ƒçš„å¤–å›´ç±»ï¼Œä½†æ˜¯é™æ€å†…éƒ¨ç±»å´æ²¡æœ‰ã€‚æ²¡æœ‰è¿™ä¸ªå¼•ç”¨å°±æ„å‘³ç€ï¼š1. å®ƒçš„åˆ›å»ºæ˜¯ä¸éœ€è¦ä¾èµ–å¤–å›´ç±»çš„åˆ›å»ºã€‚2. å®ƒä¸èƒ½ä½¿ç”¨ä»»ä½•å¤–å›´ç±»çš„éstaticæˆå‘˜å˜é‡å’Œæ–¹æ³•ã€‚</p>\n</li>\n<li><p><strong>é™æ€å¯¼åŒ…(ç”¨æ¥å¯¼å…¥ç±»ä¸­çš„é™æ€èµ„æºï¼Œ1.5ä¹‹åçš„æ–°ç‰¹æ€§):</strong> æ ¼å¼ä¸ºï¼š<code>import static</code> è¿™ä¸¤ä¸ªå…³é”®å­—è¿ç”¨å¯ä»¥æŒ‡å®šå¯¼å…¥æŸä¸ªç±»ä¸­çš„æŒ‡å®šé™æ€èµ„æºï¼Œå¹¶ä¸”ä¸éœ€è¦ä½¿ç”¨ç±»åè°ƒç”¨ç±»ä¸­é™æ€æˆå‘˜ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨ç±»ä¸­é™æ€æˆå‘˜å˜é‡å’Œæˆå‘˜æ–¹æ³•ã€‚</p>\n</li>\n</ul>\n<h5 id=\"ä¿®é¥°æˆå‘˜å˜é‡å’Œæˆå‘˜æ–¹æ³•-å¸¸ç”¨\"><a href=\"#ä¿®é¥°æˆå‘˜å˜é‡å’Œæˆå‘˜æ–¹æ³•-å¸¸ç”¨\" class=\"headerlink\" title=\"ä¿®é¥°æˆå‘˜å˜é‡å’Œæˆå‘˜æ–¹æ³•(å¸¸ç”¨)\"></a>ä¿®é¥°æˆå‘˜å˜é‡å’Œæˆå‘˜æ–¹æ³•(å¸¸ç”¨)</h5><ul>\n<li><p>è¢« static ä¿®é¥°çš„æˆå‘˜å±äºç±»ï¼Œä¸å±äºå•ä¸ªè¿™ä¸ªç±»çš„æŸä¸ªå¯¹è±¡ï¼Œè¢«ç±»ä¸­æ‰€æœ‰å¯¹è±¡å…±äº«ï¼Œå¯ä»¥å¹¶ä¸”å»ºè®®é€šè¿‡ç±»åè°ƒç”¨ã€‚è¢«static å£°æ˜çš„æˆå‘˜å˜é‡å±äºé™æ€æˆå‘˜å˜é‡ï¼Œé™æ€å˜é‡ å­˜æ”¾åœ¨ Java å†…å­˜åŒºåŸŸçš„æ–¹æ³•åŒºã€‚</p>\n</li>\n<li><p>æ–¹æ³•åŒºä¸ Java å †ä¸€æ ·ï¼Œæ˜¯å„ä¸ªçº¿ç¨‹å…±äº«çš„å†…å­˜åŒºåŸŸï¼Œå®ƒç”¨äºå­˜å‚¨å·²è¢«è™šæ‹ŸæœºåŠ è½½çš„ç±»ä¿¡æ¯ã€å¸¸é‡ã€é™æ€å˜é‡ã€å³æ—¶ç¼–è¯‘å™¨ç¼–è¯‘åçš„ä»£ç ç­‰æ•°æ®ã€‚è™½ç„¶Javaè™šæ‹Ÿæœºè§„èŒƒæŠŠæ–¹æ³•åŒºæè¿°ä¸ºå †çš„ä¸€ä¸ªé€»è¾‘éƒ¨åˆ†ï¼Œä½†æ˜¯å®ƒå´æœ‰ä¸€ä¸ªåˆ«åå«åš Non-Heapï¼ˆéå †ï¼‰ï¼Œç›®çš„åº”è¯¥æ˜¯ä¸ Java å †åŒºåˆ†å¼€æ¥ã€‚</p>\n</li>\n<li><p>HotSpot è™šæ‹Ÿæœºä¸­æ–¹æ³•åŒºä¹Ÿå¸¸è¢«ç§°ä¸º â€œæ°¸ä¹…ä»£â€ï¼Œæœ¬è´¨ä¸Šä¸¤è€…å¹¶ä¸ç­‰ä»·ã€‚ä»…ä»…æ˜¯å› ä¸º HotSpot è™šæ‹Ÿæœºè®¾è®¡å›¢é˜Ÿç”¨æ°¸ä¹…ä»£æ¥å®ç°æ–¹æ³•åŒºè€Œå·²ï¼Œè¿™æ · HotSpot è™šæ‹Ÿæœºçš„åƒåœ¾æ”¶é›†å™¨å°±å¯ä»¥åƒç®¡ç† Java å †ä¸€æ ·ç®¡ç†è¿™éƒ¨åˆ†å†…å­˜äº†ã€‚ä½†æ˜¯è¿™å¹¶ä¸æ˜¯ä¸€ä¸ªå¥½ä¸»æ„ï¼Œå› ä¸ºè¿™æ ·æ›´å®¹æ˜“é‡åˆ°å†…å­˜æº¢å‡ºé—®é¢˜ã€‚</p>\n</li>\n<li><p>è°ƒç”¨æ ¼å¼ï¼š</p>\n<ul>\n<li><code>ç±»å.é™æ€å˜é‡å</code></li>\n<li><code>ç±»å.é™æ€æ–¹æ³•å()</code></li>\n</ul>\n</li>\n<li><p>å¦‚æœå˜é‡æˆ–è€…æ–¹æ³•è¢« private åˆ™ä»£è¡¨è¯¥å±æ€§æˆ–è€…è¯¥æ–¹æ³•åªèƒ½åœ¨ç±»çš„å†…éƒ¨è¢«è®¿é—®è€Œä¸èƒ½åœ¨ç±»çš„å¤–éƒ¨è¢«è®¿é—®ã€‚</p>\n</li>\n</ul>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">StaticBean</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    String name;</span><br><span class=\"line\">    <span class=\"comment\">//é™æ€å˜é‡</span></span><br><span class=\"line\">    <span class=\"keyword\">static</span> <span class=\"keyword\">int</span> age;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">StaticBean</span><span class=\"params\">(String name)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.name = name;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"comment\">//é™æ€æ–¹æ³•</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">SayHello</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">\"Hello i am java\"</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> String <span class=\"title\">toString</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"string\">\"StaticBean&#123;\"</span>+</span><br><span class=\"line\">                <span class=\"string\">\"name=\"</span> + name + <span class=\"string\">\",age=\"</span> + age +</span><br><span class=\"line\">                <span class=\"string\">\"&#125;\"</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">StaticDemo</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String[] args)</span> </span>&#123;</span><br><span class=\"line\">        StaticBean staticBean = <span class=\"keyword\">new</span> StaticBean(<span class=\"string\">\"1\"</span>);</span><br><span class=\"line\">        StaticBean staticBean2 = <span class=\"keyword\">new</span> StaticBean(<span class=\"string\">\"2\"</span>);</span><br><span class=\"line\">        StaticBean staticBean3 = <span class=\"keyword\">new</span> StaticBean(<span class=\"string\">\"3\"</span>);</span><br><span class=\"line\">        StaticBean staticBean4 = <span class=\"keyword\">new</span> StaticBean(<span class=\"string\">\"4\"</span>);</span><br><span class=\"line\">        StaticBean.age = <span class=\"number\">33</span>;</span><br><span class=\"line\">        System.out.println(staticBean + <span class=\"string\">\" \"</span> + staticBean2 + <span class=\"string\">\" \"</span> + staticBean3 + <span class=\"string\">\" \"</span> + staticBean4);</span><br><span class=\"line\">        <span class=\"comment\">//StaticBean&#123;name=1,age=33&#125; StaticBean&#123;name=2,age=33&#125; StaticBean&#123;name=3,age=33&#125; StaticBean&#123;name=4,age=33&#125;</span></span><br><span class=\"line\">        StaticBean.SayHello();<span class=\"comment\">//Hello i am java</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"é™æ€ä»£ç å—\"><a href=\"#é™æ€ä»£ç å—\" class=\"headerlink\" title=\"é™æ€ä»£ç å—\"></a>é™æ€ä»£ç å—</h5><ul>\n<li>é™æ€ä»£ç å—å®šä¹‰åœ¨ç±»ä¸­æ–¹æ³•å¤–, é™æ€ä»£ç å—åœ¨éé™æ€ä»£ç å—ä¹‹å‰æ‰§è¡Œ(é™æ€ä»£ç å—â€”éé™æ€ä»£ç å—â€”æ„é€ æ–¹æ³•)ã€‚ è¯¥ç±»ä¸ç®¡åˆ›å»ºå¤šå°‘å¯¹è±¡ï¼Œé™æ€ä»£ç å—åªæ‰§è¡Œä¸€æ¬¡.</li>\n</ul>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">static</span> &#123;    </span><br><span class=\"line\">è¯­å¥ä½“;   </span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>ä¸€ä¸ªç±»ä¸­çš„é™æ€ä»£ç å—å¯ä»¥æœ‰å¤šä¸ªï¼Œä½ç½®å¯ä»¥éšä¾¿æ”¾ï¼Œå®ƒä¸åœ¨ä»»ä½•çš„æ–¹æ³•ä½“å†…ï¼ŒJVMåŠ è½½ç±»æ—¶ä¼šæ‰§è¡Œè¿™äº›é™æ€çš„ä»£ç å—ï¼Œå¦‚æœé™æ€ä»£ç å—æœ‰å¤šä¸ªï¼ŒJVMå°†æŒ‰ç…§å®ƒä»¬åœ¨ç±»ä¸­å‡ºç°çš„å…ˆåé¡ºåºä¾æ¬¡æ‰§è¡Œå®ƒä»¬ï¼Œæ¯ä¸ªä»£ç å—åªä¼šè¢«æ‰§è¡Œä¸€æ¬¡ã€‚</li>\n</ul>\n<h5 id=\"é™æ€å†…éƒ¨ç±»\"><a href=\"#é™æ€å†…éƒ¨ç±»\" class=\"headerlink\" title=\"é™æ€å†…éƒ¨ç±»\"></a>é™æ€å†…éƒ¨ç±»</h5><ul>\n<li>é™æ€å†…éƒ¨ç±»ä¸éé™æ€å†…éƒ¨ç±»ä¹‹é—´å­˜åœ¨ä¸€ä¸ªæœ€å¤§çš„åŒºåˆ«ï¼Œæˆ‘ä»¬çŸ¥é“éé™æ€å†…éƒ¨ç±»åœ¨ç¼–è¯‘å®Œæˆä¹‹åä¼šéšå«åœ°ä¿å­˜ç€ä¸€ä¸ªå¼•ç”¨ï¼Œè¯¥å¼•ç”¨æ˜¯æŒ‡å‘åˆ›å»ºå®ƒçš„å¤–å›´ç±»ï¼Œä½†æ˜¯é™æ€å†…éƒ¨ç±»å´æ²¡æœ‰ã€‚æ²¡æœ‰è¿™ä¸ªå¼•ç”¨å°±æ„å‘³ç€ï¼š</li>\n</ul>\n<ol>\n<li>å®ƒçš„åˆ›å»ºæ˜¯ä¸éœ€è¦ä¾èµ–å¤–å›´ç±»çš„åˆ›å»ºã€‚</li>\n<li>å®ƒä¸èƒ½ä½¿ç”¨ä»»ä½•å¤–å›´ç±»çš„éstaticæˆå‘˜å˜é‡å’Œæ–¹æ³•ã€‚</li>\n</ol>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Singleton</span> </span>&#123;</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"comment\">//å£°æ˜ä¸º private é¿å…è°ƒç”¨é»˜è®¤æ„é€ æ–¹æ³•åˆ›å»ºå¯¹è±¡</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"title\">Singleton</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    </span><br><span class=\"line\">   <span class=\"comment\">// å£°æ˜ä¸º private è¡¨æ˜é™æ€å†…éƒ¨è¯¥ç±»åªèƒ½åœ¨è¯¥ Singleton ç±»ä¸­è¢«è®¿é—®</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">SingletonHolder</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> Singleton INSTANCE = <span class=\"keyword\">new</span> Singleton();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> Singleton <span class=\"title\">getUniqueInstance</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> SingletonHolder.INSTANCE;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><p>å½“ Singleton ç±»åŠ è½½æ—¶ï¼Œé™æ€å†…éƒ¨ç±» SingletonHolder æ²¡æœ‰è¢«åŠ è½½è¿›å†…å­˜ã€‚åªæœ‰å½“è°ƒç”¨ <code>getUniqueInstance() </code>æ–¹æ³•ä»è€Œè§¦å‘ <code>SingletonHolder.INSTANCE</code> æ—¶ SingletonHolder æ‰ä¼šè¢«åŠ è½½ï¼Œæ­¤æ—¶åˆå§‹åŒ– INSTANCE å®ä¾‹ï¼Œå¹¶ä¸” JVM èƒ½ç¡®ä¿ INSTANCE åªè¢«å®ä¾‹åŒ–ä¸€æ¬¡ã€‚</p>\n</li>\n<li><p>è¿™ç§æ–¹å¼ä¸ä»…å…·æœ‰å»¶è¿Ÿåˆå§‹åŒ–çš„å¥½å¤„ï¼Œè€Œä¸”ç”± JVM æä¾›äº†å¯¹çº¿ç¨‹å®‰å…¨çš„æ”¯æŒã€‚</p>\n</li>\n</ul>\n<h5 id=\"é™æ€å¯¼åŒ…\"><a href=\"#é™æ€å¯¼åŒ…\" class=\"headerlink\" title=\"é™æ€å¯¼åŒ…\"></a>é™æ€å¯¼åŒ…</h5><ul>\n<li><p>æ ¼å¼ä¸ºï¼šimport static</p>\n</li>\n<li><p>è¿™ä¸¤ä¸ªå…³é”®å­—è¿ç”¨å¯ä»¥æŒ‡å®šå¯¼å…¥æŸä¸ªç±»ä¸­çš„æŒ‡å®šé™æ€èµ„æºï¼Œå¹¶ä¸”ä¸éœ€è¦ä½¿ç”¨ç±»åè°ƒç”¨ç±»ä¸­é™æ€æˆå‘˜ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨ç±»ä¸­é™æ€æˆå‘˜å˜é‡å’Œæˆå‘˜æ–¹æ³•</p>\n</li>\n</ul>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"> <span class=\"comment\">//å°†Mathä¸­çš„æ‰€æœ‰é™æ€èµ„æºå¯¼å…¥ï¼Œè¿™æ—¶å€™å¯ä»¥ç›´æ¥ä½¿ç”¨é‡Œé¢çš„é™æ€æ–¹æ³•ï¼Œè€Œä¸ç”¨é€šè¿‡ç±»åè¿›è¡Œè°ƒç”¨</span></span><br><span class=\"line\"> <span class=\"comment\">//å¦‚æœåªæƒ³å¯¼å…¥å•ä¸€æŸä¸ªé™æ€æ–¹æ³•ï¼Œåªéœ€è¦å°†æ¢æˆå¯¹åº”çš„æ–¹æ³•åå³å¯</span></span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"keyword\">import</span> <span class=\"keyword\">static</span> java.lang.Math.*;<span class=\"comment\">//æ¢æˆimport static java.lang.Math.max;å…·æœ‰ä¸€æ ·çš„æ•ˆæœ</span></span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Demo</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String[] args)</span> </span>&#123;</span><br><span class=\"line\"> </span><br><span class=\"line\">    <span class=\"keyword\">int</span> max = max(<span class=\"number\">1</span>,<span class=\"number\">2</span>);</span><br><span class=\"line\">    System.out.println(max);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"é™æ€æ–¹æ³•ä¸éé™æ€æ–¹æ³•\"><a href=\"#é™æ€æ–¹æ³•ä¸éé™æ€æ–¹æ³•\" class=\"headerlink\" title=\"é™æ€æ–¹æ³•ä¸éé™æ€æ–¹æ³•\"></a>é™æ€æ–¹æ³•ä¸éé™æ€æ–¹æ³•</h5><ul>\n<li>é™æ€æ–¹æ³•å±äºç±»æœ¬èº«ï¼Œéé™æ€æ–¹æ³•å±äºä»è¯¥ç±»ç”Ÿæˆçš„æ¯ä¸ªå¯¹è±¡ã€‚ å¦‚æœæ‚¨çš„æ–¹æ³•æ‰§è¡Œçš„æ“ä½œä¸ä¾èµ–äºå…¶ç±»çš„å„ä¸ªå˜é‡å’Œæ–¹æ³•ï¼Œè¯·å°†å…¶è®¾ç½®ä¸ºé™æ€ï¼ˆè¿™å°†ä½¿ç¨‹åºçš„å ç”¨ç©ºé—´æ›´å°ï¼‰ã€‚ å¦åˆ™ï¼Œå®ƒåº”è¯¥æ˜¯éé™æ€çš„ã€‚</li>\n</ul>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Foo</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">int</span> i;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">Foo</span><span class=\"params\">(<span class=\"keyword\">int</span> i)</span> </span>&#123; </span><br><span class=\"line\">       <span class=\"keyword\">this</span>.i = i;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> String <span class=\"title\">method1</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">       <span class=\"keyword\">return</span> <span class=\"string\">\"An example string that doesn't depend on i (an instance variable)\"</span>;</span><br><span class=\"line\">       </span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">int</span> <span class=\"title\">method2</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">       <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>.i + <span class=\"number\">1</span>;  <span class=\"comment\">//Depends on i</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>ä½ å¯ä»¥åƒè¿™æ ·è°ƒç”¨é™æ€æ–¹æ³•ï¼š<code>Foo.method1()</code>ã€‚ å¦‚æœæ‚¨å°è¯•ä½¿ç”¨è¿™ç§æ–¹æ³•è°ƒç”¨ method2 å°†å¤±è´¥ã€‚ ä½†è¿™æ ·å¯è¡Œï¼š<code>Foo bar = new Foo(1);bar.method2();</code></li>\n</ul>\n<p>æ€»ç»“ï¼š</p>\n<ul>\n<li>åœ¨å¤–éƒ¨è°ƒç”¨é™æ€æ–¹æ³•æ—¶ï¼Œå¯ä»¥ä½¿ç”¨â€ç±»å.æ–¹æ³•åâ€çš„æ–¹å¼ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨â€å¯¹è±¡å.æ–¹æ³•åâ€çš„æ–¹å¼ã€‚è€Œå®ä¾‹æ–¹æ³•åªæœ‰åé¢è¿™ç§æ–¹å¼ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œè°ƒç”¨é™æ€æ–¹æ³•å¯ä»¥æ— éœ€åˆ›å»ºå¯¹è±¡ã€‚</li>\n<li>é™æ€æ–¹æ³•åœ¨è®¿é—®æœ¬ç±»çš„æˆå‘˜æ—¶ï¼Œåªå…è®¸è®¿é—®é™æ€æˆå‘˜ï¼ˆå³é™æ€æˆå‘˜å˜é‡å’Œé™æ€æ–¹æ³•ï¼‰ï¼Œè€Œä¸å…è®¸è®¿é—®å®ä¾‹æˆå‘˜å˜é‡å’Œå®ä¾‹æ–¹æ³•ï¼›å®ä¾‹æ–¹æ³•åˆ™æ— æ­¤é™åˆ¶</li>\n</ul>\n<h5 id=\"static-é™æ€ä»£ç å—ä¸-éé™æ€ä»£ç å—-æ„é€ ä»£ç å—\"><a href=\"#static-é™æ€ä»£ç å—ä¸-éé™æ€ä»£ç å—-æ„é€ ä»£ç å—\" class=\"headerlink\" title=\"static{}é™æ€ä»£ç å—ä¸{}éé™æ€ä»£ç å—(æ„é€ ä»£ç å—)\"></a><code>static{}</code>é™æ€ä»£ç å—ä¸<code>{}</code>éé™æ€ä»£ç å—(æ„é€ ä»£ç å—)</h5><ul>\n<li><p>ç›¸åŒç‚¹ï¼š éƒ½æ˜¯åœ¨JVMåŠ è½½ç±»æ—¶ä¸”åœ¨æ„é€ æ–¹æ³•æ‰§è¡Œä¹‹å‰æ‰§è¡Œï¼Œåœ¨ç±»ä¸­éƒ½å¯ä»¥å®šä¹‰å¤šä¸ªï¼Œå®šä¹‰å¤šä¸ªæ—¶æŒ‰å®šä¹‰çš„é¡ºåºæ‰§è¡Œï¼Œä¸€èˆ¬åœ¨ä»£ç å—ä¸­å¯¹ä¸€äº›staticå˜é‡è¿›è¡Œèµ‹å€¼ã€‚</p>\n</li>\n<li><p>ä¸åŒç‚¹ï¼š é™æ€ä»£ç å—åœ¨éé™æ€ä»£ç å—ä¹‹å‰æ‰§è¡Œ(é™æ€ä»£ç å—â€”éé™æ€ä»£ç å—â€”æ„é€ æ–¹æ³•)ã€‚é™æ€ä»£ç å—åªåœ¨ç¬¬ä¸€æ¬¡newæ‰§è¡Œä¸€æ¬¡ï¼Œä¹‹åä¸å†æ‰§è¡Œï¼Œè€Œéé™æ€ä»£ç å—åœ¨æ¯newä¸€æ¬¡å°±æ‰§è¡Œä¸€æ¬¡ã€‚ éé™æ€ä»£ç å—å¯åœ¨æ™®é€šæ–¹æ³•ä¸­å®šä¹‰(ä¸è¿‡ä½œç”¨ä¸å¤§)ï¼›è€Œé™æ€ä»£ç å—ä¸è¡Œã€‚</p>\n</li>\n<li><p>ä¸€èˆ¬æƒ…å†µä¸‹,å¦‚æœæœ‰äº›ä»£ç æ¯”å¦‚ä¸€äº›é¡¹ç›®æœ€å¸¸ç”¨çš„å˜é‡æˆ–å¯¹è±¡å¿…é¡»åœ¨é¡¹ç›®å¯åŠ¨çš„æ—¶å€™å°±æ‰§è¡Œçš„æ—¶å€™,éœ€è¦ä½¿ç”¨é™æ€ä»£ç å—,è¿™ç§ä»£ç æ˜¯ä¸»åŠ¨æ‰§è¡Œçš„ã€‚å¦‚æœæˆ‘ä»¬æƒ³è¦è®¾è®¡ä¸éœ€è¦åˆ›å»ºå¯¹è±¡å°±å¯ä»¥è°ƒç”¨ç±»ä¸­çš„æ–¹æ³•ï¼Œä¾‹å¦‚ï¼šArraysç±»ï¼ŒCharacterç±»ï¼ŒStringç±»ç­‰ï¼Œå°±éœ€è¦ä½¿ç”¨é™æ€æ–¹æ³•, ä¸¤è€…çš„åŒºåˆ«æ˜¯ é™æ€ä»£ç å—æ˜¯è‡ªåŠ¨æ‰§è¡Œçš„è€Œé™æ€æ–¹æ³•æ˜¯è¢«è°ƒç”¨çš„æ—¶å€™æ‰æ‰§è¡Œçš„.</p>\n</li>\n</ul>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Test</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">Test</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        System.out.print(<span class=\"string\">\"é»˜è®¤æ„é€ æ–¹æ³•ï¼--\"</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">//éé™æ€ä»£ç å—</span></span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        System.out.print(<span class=\"string\">\"éé™æ€ä»£ç å—ï¼--\"</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">//é™æ€ä»£ç å—</span></span><br><span class=\"line\">    <span class=\"keyword\">static</span> &#123;</span><br><span class=\"line\">        System.out.print(<span class=\"string\">\"é™æ€ä»£ç å—ï¼--\"</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">test</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        System.out.print(<span class=\"string\">\"é™æ€æ–¹æ³•ä¸­çš„å†…å®¹! --\"</span>);</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            System.out.print(<span class=\"string\">\"é™æ€æ–¹æ³•ä¸­çš„ä»£ç å—ï¼--\"</span>);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String[] args)</span> </span>&#123;</span><br><span class=\"line\">        Test test = <span class=\"keyword\">new</span> Test();</span><br><span class=\"line\">        Test.test();<span class=\"comment\">//é™æ€ä»£ç å—ï¼--é™æ€æ–¹æ³•ä¸­çš„å†…å®¹! --é™æ€æ–¹æ³•ä¸­çš„ä»£ç å—ï¼--</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>ä¸Šè¿°ä»£ç è¾“å‡ºï¼š</li>\n</ul>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\">é™æ€ä»£ç å—ï¼--éé™æ€ä»£ç å—ï¼--é»˜è®¤æ„é€ æ–¹æ³•ï¼--é™æ€æ–¹æ³•ä¸­çš„å†…å®¹! --é™æ€æ–¹æ³•ä¸­çš„ä»£ç å—ï¼--</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>å½“åªæ‰§è¡Œ <code>Test.test();</code> æ—¶è¾“å‡ºï¼š</li>\n</ul>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\">é™æ€ä»£ç å—ï¼--é™æ€æ–¹æ³•ä¸­çš„å†…å®¹! --é™æ€æ–¹æ³•ä¸­çš„ä»£ç å—ï¼--</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>å½“åªæ‰§è¡Œ <code>Test test = new Test();</code> æ—¶è¾“å‡ºï¼š</li>\n</ul>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\">é™æ€ä»£ç å—ï¼--éé™æ€ä»£ç å—ï¼--é»˜è®¤æ„é€ æ–¹æ³•ï¼--</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>éé™æ€ä»£ç å—ä¸æ„é€ å‡½æ•°çš„åŒºåˆ«æ˜¯ï¼š éé™æ€ä»£ç å—æ˜¯ç»™æ‰€æœ‰å¯¹è±¡è¿›è¡Œç»Ÿä¸€åˆå§‹åŒ–ï¼Œè€Œæ„é€ å‡½æ•°æ˜¯ç»™å¯¹åº”çš„å¯¹è±¡åˆå§‹åŒ–ï¼Œå› ä¸ºæ„é€ å‡½æ•°æ˜¯å¯ä»¥å¤šä¸ªçš„ï¼Œè¿è¡Œå“ªä¸ªæ„é€ å‡½æ•°å°±ä¼šå»ºç«‹ä»€ä¹ˆæ ·çš„å¯¹è±¡ï¼Œä½†æ— è®ºå»ºç«‹å“ªä¸ªå¯¹è±¡ï¼Œéƒ½ä¼šå…ˆæ‰§è¡Œç›¸åŒçš„æ„é€ ä»£ç å—ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œæ„é€ ä»£ç å—ä¸­å®šä¹‰çš„æ˜¯ä¸åŒå¯¹è±¡å…±æ€§çš„åˆå§‹åŒ–å†…å®¹ã€‚</li>\n</ul>\n<h4 id=\"this-å…³é”®å­—\"><a href=\"#this-å…³é”®å­—\" class=\"headerlink\" title=\"this å…³é”®å­—\"></a>this å…³é”®å­—</h4><p>thiså…³é”®å­—ç”¨äºå¼•ç”¨ç±»çš„å½“å‰å®ä¾‹ã€‚ ä¾‹å¦‚ï¼š</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Manager</span> </span>&#123;</span><br><span class=\"line\">    Employees[] employees;</span><br><span class=\"line\">     </span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">manageEmployees</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">int</span> totalEmp = <span class=\"keyword\">this</span>.employees.length;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">\"Total employees: \"</span> + totalEmp);</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.report();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">     </span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">report</span><span class=\"params\">()</span> </span>&#123; &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>åœ¨ä¸Šé¢çš„ç¤ºä¾‹ä¸­ï¼Œthiså…³é”®å­—ç”¨äºä¸¤ä¸ªåœ°æ–¹ï¼š</p>\n<ul>\n<li>this.employees.lengthï¼šè®¿é—®ç±»Managerçš„å½“å‰å®ä¾‹çš„å˜é‡ã€‚</li>\n<li>this.reportï¼ˆï¼‰ï¼šè°ƒç”¨ç±»Managerçš„å½“å‰å®ä¾‹çš„æ–¹æ³•ã€‚</li>\n</ul>\n<p>æ­¤å…³é”®å­—æ˜¯å¯é€‰çš„ï¼Œè¿™æ„å‘³ç€å¦‚æœä¸Šé¢çš„ç¤ºä¾‹åœ¨ä¸ä½¿ç”¨æ­¤å…³é”®å­—çš„æƒ…å†µä¸‹è¡¨ç°ç›¸åŒã€‚ ä½†æ˜¯ï¼Œä½¿ç”¨æ­¤å…³é”®å­—å¯èƒ½ä¼šä½¿ä»£ç æ›´æ˜“è¯»æˆ–æ˜“æ‡‚ã€‚</p>\n<h4 id=\"super-å…³é”®å­—\"><a href=\"#super-å…³é”®å­—\" class=\"headerlink\" title=\"super å…³é”®å­—\"></a>super å…³é”®å­—</h4><p>superå…³é”®å­—ç”¨äºä»å­ç±»è®¿é—®çˆ¶ç±»çš„å˜é‡å’Œæ–¹æ³•ã€‚ ä¾‹å¦‚ï¼š</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Super</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">protected</span> <span class=\"keyword\">int</span> number;</span><br><span class=\"line\">     </span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">protected</span> <span class=\"title\">showNumber</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">\"number = \"</span> + number);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Sub</span> <span class=\"keyword\">extends</span> <span class=\"title\">Super</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">bar</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">super</span>.number = <span class=\"number\">10</span>;</span><br><span class=\"line\">        <span class=\"keyword\">super</span>.showNumber();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼ŒSub ç±»è®¿é—®çˆ¶ç±»æˆå‘˜å˜é‡ number å¹¶è°ƒç”¨å…¶å…¶çˆ¶ç±» Super çš„ <code>showNumberï¼ˆï¼‰</code> æ–¹æ³•ã€‚</p>\n<h3 id=\"ä½¿ç”¨-this-å’Œ-super-è¦æ³¨æ„çš„é—®é¢˜\"><a href=\"#ä½¿ç”¨-this-å’Œ-super-è¦æ³¨æ„çš„é—®é¢˜\" class=\"headerlink\" title=\"ä½¿ç”¨ this å’Œ super è¦æ³¨æ„çš„é—®é¢˜\"></a>ä½¿ç”¨ this å’Œ super è¦æ³¨æ„çš„é—®é¢˜</h3><ul>\n<li>åœ¨æ„é€ å™¨ä¸­ä½¿ç”¨ <code>superï¼ˆï¼‰</code> è°ƒç”¨çˆ¶ç±»ä¸­çš„å…¶ä»–æ„é€ æ–¹æ³•æ—¶ï¼Œè¯¥è¯­å¥å¿…é¡»å¤„äºæ„é€ å™¨çš„é¦–è¡Œï¼Œå¦åˆ™ç¼–è¯‘å™¨ä¼šæŠ¥é”™ã€‚å¦å¤–ï¼Œthis è°ƒç”¨æœ¬ç±»ä¸­çš„å…¶ä»–æ„é€ æ–¹æ³•æ—¶ï¼Œä¹Ÿè¦æ”¾åœ¨é¦–è¡Œã€‚</li>\n<li>thisã€superä¸èƒ½ç”¨åœ¨staticæ–¹æ³•ä¸­ã€‚</li>\n</ul>\n<p><strong>ç®€å•è§£é‡Šä¸€ä¸‹ï¼š</strong></p>\n<ul>\n<li>è¢« static ä¿®é¥°çš„æˆå‘˜å±äºç±»ï¼Œä¸å±äºå•ä¸ªè¿™ä¸ªç±»çš„æŸä¸ªå¯¹è±¡ï¼Œè¢«ç±»ä¸­æ‰€æœ‰å¯¹è±¡å…±äº«ã€‚è€Œ this ä»£è¡¨å¯¹æœ¬ç±»å¯¹è±¡çš„å¼•ç”¨ï¼ŒæŒ‡å‘æœ¬ç±»å¯¹è±¡ï¼›è€Œ super ä»£è¡¨å¯¹çˆ¶ç±»å¯¹è±¡çš„å¼•ç”¨ï¼ŒæŒ‡å‘çˆ¶ç±»å¯¹è±¡ï¼›æ‰€ä»¥ï¼Œ <strong>thiså’Œsuperæ˜¯å±äºå¯¹è±¡èŒƒç•´çš„ä¸œè¥¿ï¼Œè€Œé™æ€æ–¹æ³•æ˜¯å±äºç±»èŒƒç•´çš„ä¸œè¥¿</strong>ã€‚</li>\n</ul>\n<h3 id=\"Javaç¨‹åºåˆå§‹åŒ–çš„é¡ºåºæ˜¯æ€ä¹ˆæ ·çš„\"><a href=\"#Javaç¨‹åºåˆå§‹åŒ–çš„é¡ºåºæ˜¯æ€ä¹ˆæ ·çš„\" class=\"headerlink\" title=\"Javaç¨‹åºåˆå§‹åŒ–çš„é¡ºåºæ˜¯æ€ä¹ˆæ ·çš„\"></a>Javaç¨‹åºåˆå§‹åŒ–çš„é¡ºåºæ˜¯æ€ä¹ˆæ ·çš„</h3><p>ã€€åœ¨ Java è¯­è¨€ä¸­ï¼Œå½“å®ä¾‹åŒ–å¯¹è±¡æ—¶ï¼Œå¯¹è±¡æ‰€åœ¨ç±»çš„æ‰€æœ‰æˆå‘˜å˜é‡é¦–å…ˆè¦è¿›è¡Œåˆå§‹åŒ–ï¼Œåªæœ‰å½“æ‰€æœ‰ç±»æˆå‘˜å®Œæˆåˆå§‹åŒ–åï¼Œæ‰ä¼šè°ƒç”¨å¯¹è±¡æ‰€åœ¨ç±»çš„æ„é€ å‡½æ•°åˆ›å»ºè±¡ã€‚</p>\n<p><strong>åˆå§‹åŒ–ä¸€èˆ¬éµå¾ª3ä¸ªåŸåˆ™ï¼š</strong></p>\n<ul>\n<li>é™æ€å¯¹è±¡ï¼ˆå˜é‡ï¼‰ä¼˜å…ˆäºéé™æ€å¯¹è±¡ï¼ˆå˜é‡ï¼‰åˆå§‹åŒ–ï¼Œé™æ€å¯¹è±¡ï¼ˆå˜é‡ï¼‰åªåˆå§‹åŒ–ä¸€æ¬¡ï¼Œè€Œéé™æ€å¯¹è±¡ï¼ˆå˜é‡ï¼‰å¯èƒ½ä¼šåˆå§‹åŒ–å¤šæ¬¡ï¼›</li>\n<li>çˆ¶ç±»ä¼˜å…ˆäºå­ç±»è¿›è¡Œåˆå§‹åŒ–ï¼›</li>\n<li>æŒ‰ç…§æˆå‘˜å˜é‡çš„å®šä¹‰é¡ºåºè¿›è¡Œåˆå§‹åŒ–ã€‚ å³ä½¿å˜é‡å®šä¹‰æ•£å¸ƒäºæ–¹æ³•å®šä¹‰ä¹‹ä¸­ï¼Œå®ƒä»¬ä¾ç„¶åœ¨ä»»ä½•æ–¹æ³•ï¼ˆåŒ…æ‹¬æ„é€ å‡½æ•°ï¼‰è¢«è°ƒç”¨ä¹‹å‰å…ˆåˆå§‹åŒ–ï¼›</li>\n</ul>\n<p><strong>åŠ è½½é¡ºåº</strong></p>\n<ul>\n<li>çˆ¶ç±»ï¼ˆé™æ€å˜é‡ã€é™æ€è¯­å¥å—ï¼‰</li>\n<li>å­ç±»ï¼ˆé™æ€å˜é‡ã€é™æ€è¯­å¥å—ï¼‰</li>\n<li>çˆ¶ç±»ï¼ˆå®ä¾‹å˜é‡ã€æ™®é€šè¯­å¥å—ï¼‰</li>\n<li>çˆ¶ç±»ï¼ˆæ„é€ å‡½æ•°ï¼‰</li>\n<li>å­ç±»ï¼ˆå®ä¾‹å˜é‡ã€æ™®é€šè¯­å¥å—ï¼‰</li>\n<li>å­ç±»ï¼ˆæ„é€ å‡½æ•°ï¼‰</li>\n</ul>\n<p><strong>å®ä¾‹</strong></p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Base</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">// 1.çˆ¶ç±»é™æ€ä»£ç å—</span></span><br><span class=\"line\">    <span class=\"keyword\">static</span> &#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">\"Base static block!\"</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"comment\">// 3.çˆ¶ç±»éé™æ€ä»£ç å—</span></span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">\"Base block\"</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"comment\">// 4.çˆ¶ç±»æ„é€ å™¨</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">Base</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">\"Base constructor!\"</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Derived</span> <span class=\"keyword\">extends</span> <span class=\"title\">Base</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">// 2.å­ç±»é™æ€ä»£ç å—</span></span><br><span class=\"line\">    <span class=\"keyword\">static</span>&#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">\"Derived static block!\"</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"comment\">// 5.å­ç±»éé™æ€ä»£ç å—</span></span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">\"Derived block!\"</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"comment\">// 6.å­ç±»æ„é€ å™¨</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">Derived</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">\"Derived constructor!\"</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String[] args)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">new</span> Derived();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>ç»“æœæ˜¯ï¼š</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\">Base <span class=\"keyword\">static</span> block!</span><br><span class=\"line\">Derived <span class=\"keyword\">static</span> block!</span><br><span class=\"line\">Base block</span><br><span class=\"line\">Base constructor!</span><br><span class=\"line\">Derived block!</span><br><span class=\"line\">Derived constructor!</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"ä»‹ç»ä¸‹å¼‚å¸¸ç±»å‹\"><a href=\"#ä»‹ç»ä¸‹å¼‚å¸¸ç±»å‹\" class=\"headerlink\" title=\"ä»‹ç»ä¸‹å¼‚å¸¸ç±»å‹\"></a>ä»‹ç»ä¸‹å¼‚å¸¸ç±»å‹</h3><ul>\n<li>Throwable <ul>\n<li>Error</li>\n<li>Exception<ul>\n<li>RuntimeException</li>\n<li>IOException</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>è¶…ç±»Throwable ï¼Œæœ‰ä¸¤ä¸ªå­ç±»Errorå’ŒExceptionï¼Œåˆ†åˆ«è¡¨ç¤ºé”™è¯¯å’Œå¼‚å¸¸ã€‚<ul>\n<li>Erroræ˜¯ç¨‹åºæ— æ³•å¤„ç†çš„é”™è¯¯ï¼Œæ¯”å¦‚OutOfMemoryErrorç­‰ã€‚è¿™äº›å¼‚å¸¸å‘ç”Ÿæ—¶ï¼ŒJavaè™šæ‹Ÿæœºï¼ˆJVMï¼‰ä¸€èˆ¬ä¼šé€‰æ‹©çº¿ç¨‹ç»ˆæ­¢ã€‚</li>\n<li>Exceptionæ˜¯ç¨‹åºæœ¬èº«å¯ä»¥å¤„ç†çš„å¼‚å¸¸ï¼Œè¿™ç§å¼‚å¸¸åˆ†ä¸¤å¤§ç±»è¿è¡Œæ—¶å¼‚å¸¸å’Œéè¿è¡Œæ—¶å¼‚å¸¸ã€‚ç¨‹åºä¸­åº”å½“å°½å¯èƒ½å»å¤„ç†è¿™äº›å¼‚å¸¸ã€‚<ul>\n<li>è¿è¡Œæ—¶å¼‚å¸¸(RuntimeException)å’Œéè¿è¡Œæ—¶å¼‚å¸¸ä¹Ÿç§°ä¹‹ä¸ºä¸æ£€æŸ¥å¼‚å¸¸ï¼ˆUnchecked Exceptionï¼‰å’Œæ£€æŸ¥å¼‚å¸¸ï¼ˆChecked Exceptionï¼‰,è¿™ä¸¤ç§å¼‚å¸¸æœ‰å¾ˆå¤§çš„åŒºåˆ«ã€‚</li>\n<li>RuntimeException(è¿è¡Œæ—¶å¼‚å¸¸)ï¼Œè¡¨ç¤ºæ— æ³•è®©ç¨‹åºæ¢å¤çš„å¼‚å¸¸ï¼Œå¯¼è‡´çš„åŸå› é€šå¸¸æ˜¯å› ä¸ºæ‰§è¡Œäº†é”™è¯¯çš„æ“ä½œï¼Œå»ºè®®ç»ˆæ­¢é€»è¾‘ï¼Œå› æ­¤ï¼Œç¼–è¯‘å™¨ä¸æ£€æŸ¥è¿™äº›å¼‚å¸¸ã€‚</li>\n<li>CheckedException(å—æ£€æŸ¥å¼‚å¸¸)ï¼Œæ˜¯è¡¨ç¤ºç¨‹åºå¯ä»¥å¤„ç†çš„å¼‚å¸¸ï¼Œä¹Ÿå³è¡¨ç¤ºç¨‹åºå¯ä»¥ä¿®å¤ï¼ˆç”±ç¨‹åºè‡ªå·±æ¥å—å¼‚å¸¸å¹¶ä¸”åšå‡ºå¤„ç†ï¼‰ï¼Œæ‰€ä»¥ç§°ä¹‹ä¸ºå—æ£€æŸ¥å¼‚å¸¸ã€‚</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>å¸¸è§çš„å¼‚å¸¸<ul>\n<li>NullPointerException: ç©ºæŒ‡é’ˆå¼‚å¸¸ã€‚</li>\n<li>NoSuchMethodExceptionï¼šæ‰¾ä¸åˆ°æ–¹æ³•ã€‚</li>\n<li>IllegalArgumentExceptionï¼šä¸åˆæ³•çš„å‚æ•°å¼‚å¸¸ã€‚</li>\n<li>IndexOutOfBoundException: æ•°ç»„ä¸‹æ ‡è¶Šç•Œå¼‚å¸¸ã€‚</li>\n<li>IOExceptionï¼šç”±äºæ–‡ä»¶æœªæ‰¾åˆ°ã€æœªæ‰“å¼€æˆ–è€… I/O æ“ä½œä¸èƒ½è¿›è¡Œè€Œå¼•èµ·å¼‚å¸¸ã€‚</li>\n<li>ClassNotFoundException ï¼šæ‰¾ä¸åˆ°æ–‡ä»¶æ‰€æŠ›å‡ºçš„å¼‚å¸¸ã€‚</li>\n<li>NumberFormatExceptionï¼š å­—ç¬¦çš„ UTF ä»£ç æ•°æ®æ ¼å¼æœ‰é”™å¼•èµ·å¼‚å¸¸ã€‚</li>\n<li>InterruptedExceptionï¼š çº¿ç¨‹ä¸­æ–­æŠ›å‡ºçš„å¼‚å¸¸ã€‚</li>\n</ul>\n</li>\n</ul>\n<h4 id=\"Throw-å’Œ-throws-çš„åŒºåˆ«\"><a href=\"#Throw-å’Œ-throws-çš„åŒºåˆ«\" class=\"headerlink\" title=\"Throw å’Œ throws çš„åŒºåˆ«\"></a><strong>Throw å’Œ throws çš„åŒºåˆ«</strong></h4><ul>\n<li><p><code>throw</code> ï¼Œç”¨äºåœ¨ç¨‹åºä¸­æ˜¾å¼åœ°æŠ›å‡ºä¸€ä¸ªå¼‚å¸¸ã€‚</p>\n</li>\n<li><p><code>throws</code> ï¼Œç”¨äºæŒ‡å‡ºåœ¨è¯¥æ–¹æ³•ä¸­æ²¡æœ‰å¤„ç†çš„å¼‚å¸¸ã€‚<strong>æ¯ä¸ªæ–¹æ³•å¿…é¡»æ˜¾å¼æŒ‡æ˜å“ªäº›å¼‚å¸¸æ²¡æœ‰å¤„ç†ï¼Œä»¥ä¾¿è¯¥æ–¹æ³•çš„è°ƒç”¨è€…å¯ä»¥é¢„é˜²å¯èƒ½å‘ç”Ÿçš„å¼‚å¸¸</strong>ã€‚æœ€åï¼Œå¤šä¸ªå¼‚å¸¸ç”¨é€—å·åˆ†éš”ã€‚</p>\n</li>\n<li><p><strong>ä½ç½®ä¸åŒ</strong></p>\n<ul>\n<li>throws ç”¨åœ¨å‡½æ•°ä¸Šï¼Œåé¢è·Ÿçš„æ˜¯å¼‚å¸¸ç±»ï¼Œå¯ä»¥è·Ÿå¤šä¸ªï¼›è€Œ throw ç”¨åœ¨å‡½æ•°å†…ï¼Œåé¢è·Ÿçš„æ˜¯å¼‚å¸¸å¯¹è±¡ã€‚</li>\n</ul>\n</li>\n<li><p><strong>åŠŸèƒ½ä¸åŒ</strong></p>\n<ul>\n<li>throws ç”¨æ¥å£°æ˜å¼‚å¸¸ï¼Œè®©è°ƒç”¨è€…åªçŸ¥é“è¯¥åŠŸèƒ½å¯èƒ½å‡ºç°çš„é—®é¢˜ï¼Œå¯ä»¥ç»™å‡ºé¢„å…ˆçš„å¤„ç†æ–¹å¼ï¼›throw æŠ›å‡ºå…·ä½“çš„é—®é¢˜å¯¹è±¡ï¼Œæ‰§è¡Œåˆ° throwï¼ŒåŠŸèƒ½å°±å·²ç»ç»“æŸäº†ï¼Œè·³è½¬åˆ°è°ƒç”¨è€…ï¼Œå¹¶å°†å…·ä½“çš„é—®é¢˜å¯¹è±¡æŠ›ç»™è°ƒç”¨è€…ã€‚ä¹Ÿå°±æ˜¯è¯´ throw è¯­å¥ç‹¬ç«‹å­˜åœ¨æ—¶ï¼Œä¸‹é¢ä¸è¦å®šä¹‰å…¶ä»–è¯­å¥ï¼Œå› ä¸ºæ‰§è¡Œä¸åˆ°ã€‚</li>\n<li>throws è¡¨ç¤ºå‡ºç°å¼‚å¸¸çš„ä¸€ç§å¯èƒ½æ€§ï¼Œå¹¶ä¸ä¸€å®šä¼šå‘ç”Ÿè¿™äº›å¼‚å¸¸ï¼›throw åˆ™æ˜¯æŠ›å‡ºäº†å¼‚å¸¸ï¼Œæ‰§è¡Œ throw åˆ™ä¸€å®šæŠ›å‡ºäº†æŸç§å¼‚å¸¸å¯¹è±¡ã€‚</li>\n</ul>\n</li>\n</ul>\n<h4 id=\"å¸¸è§çš„å¼‚å¸¸å¤„ç†æ–¹å¼\"><a href=\"#å¸¸è§çš„å¼‚å¸¸å¤„ç†æ–¹å¼\" class=\"headerlink\" title=\"å¸¸è§çš„å¼‚å¸¸å¤„ç†æ–¹å¼\"></a>å¸¸è§çš„å¼‚å¸¸å¤„ç†æ–¹å¼</h4><ul>\n<li>ä½¿ç”¨System.out.printlnæ˜¯é«˜ä»£ä»·çš„ï¼Œè¿™è¿™åšä¼šé™ä½ç³»ç»Ÿååé‡ã€‚</li>\n<li>åœ¨ç”Ÿæˆç¯å¢ƒä¸­é¿å…ä½¿ç”¨printStackTrace()æ–¹æ³•ï¼ŒprintStackTraceé»˜è®¤ä¼šæŠŠè°ƒç”¨çš„å †æ ˆæ‰“å°åˆ°æ§åˆ¶å°ä¸Šï¼Œåœ¨ç”Ÿäº§ç¯å¢ƒä¸­è®¿é—®æ§åˆ¶å°æ˜¯ä¸ç°å®çš„ã€‚</li>\n<li>å¦‚æœä¸èƒ½å¤„ç†å¼‚å¸¸ï¼Œå°±ä¸è¦æ•è·è¯¥å¼‚å¸¸ã€‚</li>\n<li>å¦‚æœè¦æ•è·å¼‚å¸¸ï¼Œåº”åœ¨æœ€è¿‘çš„åœ°æ–¹æ•è·å®ƒã€‚</li>\n<li>ä¸è¦åƒæ‰ä½ çš„æ•æ‰çš„å¼‚å¸¸ä¿¡æ¯ï¼Œå°±æ˜¯æ•è·äº†å•¥ä¹Ÿä¸åšï¼Œå»ºè®®LOGè®°å½•ã€‚</li>\n<li>ä¸è¦å°†å¼‚å¸¸å¤„ç†ç”¨äºæ­£å¸¸çš„æ§åˆ¶æµï¼ˆè®¾è®¡è‰¯å¥½çš„ API ä¸åº”è¯¥å¼ºè¿«å®ƒçš„è°ƒç”¨è€…ä¸ºäº†æ­£å¸¸çš„æ§åˆ¶æµè€Œä½¿ç”¨å¼‚å¸¸ï¼‰ã€‚</li>\n<li>å¯¹å¯ä»¥æ¢å¤çš„æƒ…å†µä½¿ç”¨å—æ£€å¼‚å¸¸ï¼Œå¯¹ç¼–ç¨‹é”™è¯¯ä½¿ç”¨è¿è¡Œæ—¶å¼‚å¸¸ã€‚</li>\n<li>é¿å…ä¸å¿…è¦çš„ä½¿ç”¨å—æ£€å¼‚å¸¸ï¼ˆå¯ä»¥é€šè¿‡ä¸€äº›çŠ¶æ€æ£€æµ‹æ‰‹æ®µæ¥é¿å…å¼‚å¸¸çš„å‘ç”Ÿï¼‰ã€‚</li>\n<li>ä¼˜å…ˆä½¿ç”¨æ ‡å‡†çš„å¼‚å¸¸ã€‚</li>\n<li>æ¯ä¸ªæ–¹æ³•æŠ›å‡ºçš„å¼‚å¸¸éƒ½è¦æœ‰æ–‡æ¡£ã€‚</li>\n<li>ä¿æŒå¼‚å¸¸çš„åŸå­æ€§</li>\n<li>ä¸è¦åœ¨ <code>catch</code> ä¸­å¿½ç•¥æ‰æ•è·åˆ°çš„å¼‚å¸¸ã€‚</li>\n</ul>\n<h3 id=\"å¦‚ä½•æ­£ç¡®çš„åœ¨ä¸€ä¸ªå¾ªç¯ä¸­åˆ é™¤ArrayListä¸­çš„å…ƒç´ ã€‚\"><a href=\"#å¦‚ä½•æ­£ç¡®çš„åœ¨ä¸€ä¸ªå¾ªç¯ä¸­åˆ é™¤ArrayListä¸­çš„å…ƒç´ ã€‚\" class=\"headerlink\" title=\"å¦‚ä½•æ­£ç¡®çš„åœ¨ä¸€ä¸ªå¾ªç¯ä¸­åˆ é™¤ArrayListä¸­çš„å…ƒç´ ã€‚\"></a>å¦‚ä½•æ­£ç¡®çš„åœ¨ä¸€ä¸ªå¾ªç¯ä¸­åˆ é™¤ArrayListä¸­çš„å…ƒç´ ã€‚</h3><ul>\n<li><p>å¦‚æœä½¿ç”¨æ™®é€šforå¾ªç¯ç›´æ¥åˆ é™¤ä¼šå‡ºç°IndexOutOfBoundsExceptionå¼‚å¸¸ï¼Œéæ³•ç´¢å¼•ã€‚</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\">ArrayList&lt;String&gt; list = <span class=\"keyword\">new</span> ArrayList&lt;String&gt;();</span><br><span class=\"line\">list.add(<span class=\"string\">\"1\"</span>);</span><br><span class=\"line\">list.add(<span class=\"string\">\"2\"</span>);</span><br><span class=\"line\">list.add(<span class=\"string\">\"2\"</span>);</span><br><span class=\"line\">list.add(<span class=\"string\">\"2\"</span>);</span><br><span class=\"line\">list.add(<span class=\"string\">\"3\"</span>);</span><br><span class=\"line\">list.add(<span class=\"string\">\"4\"</span>);</span><br><span class=\"line\">list.add(<span class=\"string\">\"5\"</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// è¿™æ ·åšè‚¯å®šæŠ›å¼‚å¸¸ï¼Œéæ³•è®¿é—®æ•°æ®è¶Šç•Œ</span></span><br><span class=\"line\"><span class=\"keyword\">int</span> len = list.size();</span><br><span class=\"line\"><span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>; i &lt; len; i++) &#123;</span><br><span class=\"line\"> <span class=\"keyword\">if</span>(<span class=\"string\">\"1\"</span>.equals(list.get(i)))&#123;</span><br><span class=\"line\">    list.remove(i);</span><br><span class=\"line\"> &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//Exception in thread \"main\" java.lang.IndexOutOfBoundsException: Index: 4, Size: 4</span></span><br><span class=\"line\"><span class=\"comment\">//æ”¹è¿›å,åˆ é™¤å…ƒç´ åæ›´æ–°Listé•¿åº¦ï¼Œæ›´æ–°å¾ªç¯ä¸‹æ ‡ã€‚ä½†æ˜¯è¿™æ ·çš„å¯è¯»æ€§å¾ˆå·®ã€‚è€Œä¸”ä¸é€‚ç”¨äºå¤šçº¿ç¨‹åœºæ™¯</span></span><br><span class=\"line\"><span class=\"keyword\">int</span> len = list.size();</span><br><span class=\"line\"><span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>; i &lt; len; i++) &#123;</span><br><span class=\"line\"> <span class=\"keyword\">if</span>(<span class=\"string\">\"1\"</span>.equals(list.get(i)))&#123;</span><br><span class=\"line\">    list.remove(i);</span><br><span class=\"line\">    --len;</span><br><span class=\"line\">    --i;</span><br><span class=\"line\"> &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">//å¦å¤–ä¸€ç§æ–¹å¼ï¼Œè¿™ç§çœ‹èµ·æ¥å¥½è¯»å¤šäº†ã€‚ã€‚ã€‚</span></span><br><span class=\"line\">Iterator&lt;String&gt; sListIterator = list.iterator();  </span><br><span class=\"line\"><span class=\"keyword\">while</span>(sListIterator.hasNext())&#123;  </span><br><span class=\"line\">  String e = sListIterator.next();  <span class=\"comment\">//æ³¨æ„äº†</span></span><br><span class=\"line\">  <span class=\"keyword\">if</span>(e.equals(<span class=\"string\">\"1\"</span>))&#123;  </span><br><span class=\"line\">  sListIterator.remove();  </span><br><span class=\"line\">  &#125;  </span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n</li>\n</ul>\n<h3 id=\"Javaåºåˆ—åŒ–\"><a href=\"#Javaåºåˆ—åŒ–\" class=\"headerlink\" title=\"Javaåºåˆ—åŒ–\"></a>Javaåºåˆ—åŒ–</h3><ul>\n<li>åºåˆ—åŒ–å°±æ˜¯ä¸€ç§ç”¨æ¥å¤„ç†å¯¹è±¡æµçš„æœºåˆ¶ï¼Œæ‰€è°“å¯¹è±¡æµä¹Ÿå°±æ˜¯å°†å¯¹è±¡çš„å†…å®¹è¿›è¡ŒæµåŒ–ã€‚</li>\n<li>ååºåˆ—åŒ–çš„è¿‡ç¨‹ï¼Œåˆ™æ˜¯å’Œåºåˆ—åŒ–ç›¸åçš„è¿‡ç¨‹ã€‚</li>\n<li>å¯¹äºä¸æƒ³è¿›è¡Œåºåˆ—åŒ–çš„å˜é‡ï¼Œä½¿ç”¨transientå…³é”®å­—ä¿®é¥°ã€‚<ul>\n<li>transientå…³é”®å­—çš„ä½œç”¨æ˜¯ï¼šé˜»æ­¢å®ä¾‹ä¸­é‚£äº›ç”¨æ­¤å…³é”®å­—ä¿®é¥°çš„çš„å˜é‡åºåˆ—åŒ–ï¼›å½“å¯¹è±¡è¢«ååºåˆ—åŒ–æ—¶ï¼Œè¢«transientä¿®é¥°çš„å˜é‡å€¼ä¸ä¼šè¢«æŒä¹…åŒ–å’Œæ¢å¤ã€‚transientåªèƒ½ä¿®é¥°å˜é‡ï¼Œä¸èƒ½ä¿®é¥°ç±»å’Œæ–¹æ³•ã€‚</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"Javaåå°„\"><a href=\"#Javaåå°„\" class=\"headerlink\" title=\"Javaåå°„\"></a>Javaåå°„</h3><ul>\n<li><p>åå°„(Reflection)æ˜¯ Java ç¨‹åºå¼€å‘è¯­è¨€çš„ç‰¹å¾ä¹‹ä¸€ï¼Œå®ƒå…è®¸è¿è¡Œä¸­çš„ Java ç¨‹åºè·å–è‡ªèº«çš„ä¿¡æ¯ï¼Œå¹¶ä¸”å¯ä»¥æ“ä½œç±»æˆ–å¯¹è±¡çš„å†…éƒ¨å±æ€§ã€‚</p>\n</li>\n<li><p>é€šè¿‡åå°„ï¼Œå¯ä»¥åœ¨ç¨‹åºè¿è¡Œæ—¶è®¿é—®Javaå¯¹è±¡çš„æˆå‘˜å˜é‡ã€æ–¹æ³•ã€æ„é€ æ–¹æ³•ã€‚</p>\n</li>\n<li><p>åå°„çš„ç¼ºç‚¹</p>\n<ul>\n<li><strong>æ€§èƒ½å¼€é”€</strong> - ç”±äºåå°„æ¶‰åŠåŠ¨æ€è§£æçš„ç±»å‹ï¼Œå› æ­¤æ— æ³•æ‰§è¡ŒæŸäº› Java è™šæ‹Ÿæœºä¼˜åŒ–ã€‚å› æ­¤ï¼Œåå°„æ“ä½œçš„æ€§èƒ½è¦æ¯”éåå°„æ“ä½œçš„æ€§èƒ½è¦å·®ï¼Œåº”è¯¥åœ¨æ€§èƒ½æ•æ„Ÿçš„åº”ç”¨ç¨‹åºä¸­é¢‘ç¹è°ƒç”¨çš„ä»£ç æ®µä¸­é¿å…ã€‚</li>\n<li><strong>ç ´åå°è£…æ€§</strong> - åå°„è°ƒç”¨æ–¹æ³•æ—¶å¯ä»¥å¿½ç•¥æƒé™æ£€æŸ¥ï¼Œå› æ­¤å¯èƒ½ä¼šç ´åå°è£…æ€§è€Œå¯¼è‡´å®‰å…¨é—®é¢˜ã€‚</li>\n<li><strong>å†…éƒ¨æ›å…‰</strong> - ç”±äºåå°„å…è®¸ä»£ç æ‰§è¡Œåœ¨éåå°„ä»£ç ä¸­éæ³•çš„æ“ä½œï¼Œä¾‹å¦‚è®¿é—®ç§æœ‰å­—æ®µå’Œæ–¹æ³•ï¼Œæ‰€ä»¥åå°„çš„ä½¿ç”¨å¯èƒ½ä¼šå¯¼è‡´æ„æƒ³ä¸åˆ°çš„å‰¯ä½œç”¨ï¼Œè¿™å¯èƒ½ä¼šå¯¼è‡´ä»£ç åŠŸèƒ½å¤±å¸¸å¹¶å¯èƒ½ç ´åå¯ç§»æ¤æ€§ã€‚åå°„ä»£ç æ‰“ç ´äº†æŠ½è±¡ï¼Œå› æ­¤å¯èƒ½ä¼šéšç€å¹³å°çš„å‡çº§è€Œæ”¹å˜è¡Œä¸ºã€‚</li>\n</ul>\n</li>\n<li><p><strong>åå°„çš„å®ç°æ–¹å¼ï¼š</strong></p>\n</li>\n<li><p>ç¬¬ä¸€æ­¥ï¼šè·å–Classå¯¹è±¡ï¼Œæœ‰4ä¸­æ–¹æ³•ï¼š</p>\n<ul>\n<li>1ï¼‰Class.forName(â€œç±»çš„è·¯å¾„â€)ï¼› </li>\n<li>2ï¼‰ç±»å.class</li>\n<li>3ï¼‰å¯¹è±¡å.getClass()</li>\n<li>4ï¼‰åŸºæœ¬ç±»å‹çš„åŒ…è£…ç±»ï¼Œå¯ä»¥è°ƒç”¨åŒ…è£…ç±»çš„Typeå±æ€§æ¥è·å¾—è¯¥åŒ…è£…ç±»çš„Classå¯¹è±¡</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"Javaå¤šçº¿ç¨‹\"><a href=\"#Javaå¤šçº¿ç¨‹\" class=\"headerlink\" title=\"Javaå¤šçº¿ç¨‹\"></a>Javaå¤šçº¿ç¨‹</h3><h4 id=\"Javaä¸­çš„ä¸»çº¿ç¨‹\"><a href=\"#Javaä¸­çš„ä¸»çº¿ç¨‹\" class=\"headerlink\" title=\"Javaä¸­çš„ä¸»çº¿ç¨‹\"></a>Javaä¸­çš„ä¸»çº¿ç¨‹</h4><blockquote>\n<p>Javaä¸ºå¤šçº¿ç¨‹ç¼–ç¨‹æä¾›å†…ç½®æ”¯æŒã€‚å¤šçº¿ç¨‹ç¨‹åºåŒ…å«ä¸¤ä¸ªæˆ–å¤šä¸ªå¯ä»¥å¹¶å‘è¿è¡Œçš„éƒ¨åˆ†ã€‚è¿™æ ·çš„ç¨‹åºçš„æ¯ä¸ªéƒ¨åˆ†ç§°ä¸ºçº¿ç¨‹ï¼Œæ¯ä¸ªçº¿ç¨‹å®šä¹‰ä¸€ä¸ªå•ç‹¬çš„æ‰§è¡Œè·¯å¾„ã€‚å½“Javaç¨‹åºå¯åŠ¨æ—¶ï¼Œä¸€ä¸ªçº¿ç¨‹ç«‹å³å¼€å§‹è¿è¡Œã€‚è¿™é€šå¸¸è¢«ç§°ä¸ºæˆ‘ä»¬ç¨‹åºçš„<em>ä¸»</em>çº¿ç¨‹ï¼Œå› ä¸ºå®ƒæ˜¯æˆ‘ä»¬ç¨‹åºå¼€å§‹æ—¶æ‰§è¡Œçš„é‚£ä¸ªã€‚</p>\n</blockquote>\n<ul>\n<li>å®ƒæ˜¯ç”Ÿäº§å¯åŠ¨å…¶å®ƒ<code>å­</code>çº¿ç¨‹çš„çº¿ç¨‹ã€‚</li>\n<li>å®ƒè´Ÿè´£ç¨‹åºç»“æŸæ—¶å€™çš„æ”¶å°¾å·¥ä½œã€‚</li>\n</ul>\n<p><img src=\"https://z201.oss-cn-shanghai.aliyuncs.com/JavaNote/%E5%A4%9A%E7%BA%BF%E7%A8%8B/Java%E4%B8%BB%E7%BA%BF%E7%A8%8B.svg\"></p>\n<blockquote>\n<p>ä¸Šé¢ç®€å•ç”»å›¾å‡ºä¸€ä¸ªä¸»çº¿ç¨‹å’Œå­çº¿ç¨‹ä»¥åŠåå°çº¿ç¨‹çš„å…³ç³»ã€‚</p>\n</blockquote>\n<p>åœ¨ä¸»çº¿ç¨‹ä¸­ï¼Œè¿™å¯ä»¥é€šè¿‡è°ƒç”¨Threadç±»ä¸­çš„<em>currentThreadï¼ˆï¼‰</em>æ–¹æ³•æ¥å®Œæˆã€‚æ­¤æ–¹æ³•è¿”å›å¯¹å…¶è°ƒç”¨çš„çº¿ç¨‹çš„å¼•ç”¨ã€‚ä¸»çº¿ç¨‹çš„é»˜è®¤ä¼˜å…ˆçº§ä¸º5ï¼Œå¯¹äºæ‰€æœ‰å‰©ä½™çš„ç”¨æˆ·çº¿ç¨‹ï¼Œä¼˜å…ˆçº§å°†ä»çˆ¶çº§ç»§æ‰¿åˆ°å­çº§ã€‚åŒæ—¶è™šæ‹Ÿæœºä¼šå¯åŠ¨å…¶å®ƒçš„çº¿ç¨‹ï¼Œæ¯”å¦‚åƒåœ¾å›æ”¶å™¨GCã€‚</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> cn.z201.java.test.thread;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@author</span> z201.coding@gmail.com</span></span><br><span class=\"line\"><span class=\"comment\"> **/</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ChildThread</span> <span class=\"keyword\">extends</span> <span class=\"title\">Thread</span></span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">ChildThread</span><span class=\"params\">(String name)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">super</span>(name);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">run</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>; i &lt; <span class=\"number\">3</span> ; i++) &#123;</span><br><span class=\"line\">            System.out.println(Thread.currentThread().getName() + <span class=\"string\">\":  \"</span> + i);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> cn.z201.java.test.thread;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@author</span> z201.coding@gmail.com</span></span><br><span class=\"line\"><span class=\"comment\"> **/</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">MasterThread</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String[] args)</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">        Thread master = Thread.currentThread();</span><br><span class=\"line\">        <span class=\"comment\">// getting name of Main thread</span></span><br><span class=\"line\">        System.out.println(<span class=\"string\">\"Current thread: \"</span> + master.getName());</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// changing the name of Main thread</span></span><br><span class=\"line\">        master.setName(<span class=\"string\">\"Master\"</span>);</span><br><span class=\"line\">        System.out.println(<span class=\"string\">\"After name change: \"</span> + master.getName());</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// getting priority of Main thread</span></span><br><span class=\"line\">        System.out.println(<span class=\"string\">\"Main thread priority: \"</span>+ master.getPriority());</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// setting priority of Main thread to MAX(10)</span></span><br><span class=\"line\">        master.setPriority(Thread.MAX_PRIORITY);</span><br><span class=\"line\"></span><br><span class=\"line\">        System.out.println(<span class=\"string\">\"Main thread new priority: \"</span>+ master.getPriority());</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>; i &lt; <span class=\"number\">3</span>; i++) &#123;</span><br><span class=\"line\">            System.out.println(<span class=\"string\">\"MasterThread \"</span> + i);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        ChildThread childThread1 = <span class=\"keyword\">new</span> ChildThread(<span class=\"string\">\"childThread1\"</span>);</span><br><span class=\"line\">        <span class=\"comment\">// getting priority of child thread</span></span><br><span class=\"line\">        <span class=\"comment\">// which will be inherited from Main thread</span></span><br><span class=\"line\">        <span class=\"comment\">// as it is created by Main thread</span></span><br><span class=\"line\">        System.out.println(<span class=\"string\">\"Child1 thread priority: \"</span>+ childThread1.getPriority());</span><br><span class=\"line\">        <span class=\"comment\">// setting priority of Main thread to MIN(1)</span></span><br><span class=\"line\">        childThread1.setPriority(Thread.MIN_PRIORITY);</span><br><span class=\"line\">        System.out.println(<span class=\"string\">\"Child1 thread new priority: \"</span>+ childThread1.getPriority());</span><br><span class=\"line\"></span><br><span class=\"line\">        ChildThread childThread2 = <span class=\"keyword\">new</span> ChildThread(<span class=\"string\">\"childThread2\"</span>);</span><br><span class=\"line\">        System.out.println(<span class=\"string\">\"Child2 thread priority: \"</span>+ childThread2.getPriority());</span><br><span class=\"line\">        childThread2.setPriority(Thread.NORM_PRIORITY);</span><br><span class=\"line\">        System.out.println(<span class=\"string\">\"Child2 thread new priority: \"</span>+ childThread2.getPriority());</span><br><span class=\"line\">        <span class=\"comment\">// starting child thread</span></span><br><span class=\"line\">        childThread1.start();</span><br><span class=\"line\">        childThread2.start();</span><br><span class=\"line\"></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">   </span><br><span class=\"line\">è¾“å‡º</span><br><span class=\"line\">Current thread: main</span><br><span class=\"line\">After name change: Master</span><br><span class=\"line\">Main thread priority: <span class=\"number\">5</span></span><br><span class=\"line\">Main thread <span class=\"keyword\">new</span> priority: <span class=\"number\">10</span></span><br><span class=\"line\">MasterThread <span class=\"number\">0</span></span><br><span class=\"line\">MasterThread <span class=\"number\">1</span></span><br><span class=\"line\">MasterThread <span class=\"number\">2</span></span><br><span class=\"line\">Child1 thread priority: <span class=\"number\">10</span></span><br><span class=\"line\">Child1 thread <span class=\"keyword\">new</span> priority: <span class=\"number\">1</span></span><br><span class=\"line\">Child2 thread priority: <span class=\"number\">10</span></span><br><span class=\"line\">Child2 thread <span class=\"keyword\">new</span> priority: <span class=\"number\">5</span></span><br><span class=\"line\">childThread1:  <span class=\"number\">0</span></span><br><span class=\"line\">childThread1:  <span class=\"number\">1</span></span><br><span class=\"line\">childThread1:  <span class=\"number\">2</span></span><br><span class=\"line\">childThread2:  <span class=\"number\">0</span></span><br><span class=\"line\">childThread2:  <span class=\"number\">1</span></span><br><span class=\"line\">childThread2:  <span class=\"number\">2</span></span><br></pre></td></tr></table></figure>\n\n<p>ä¸»çº¿ç¨‹é»˜è®¤ä¼˜å…ˆçº§æ˜¯5ç»è¿‡ä¿®æ”¹ä¸º10ï¼Œå¯åŠ¨çš„å­çº¿ç¨‹å°±ç»§æ‰¿äº†ä¸»çº¿ç¨‹çš„çº§åˆ«ã€‚</p>\n<h4 id=\"ä»€ä¹ˆæ˜¯è¿›ç¨‹\"><a href=\"#ä»€ä¹ˆæ˜¯è¿›ç¨‹\" class=\"headerlink\" title=\"ä»€ä¹ˆæ˜¯è¿›ç¨‹\"></a>ä»€ä¹ˆæ˜¯è¿›ç¨‹</h4><ul>\n<li><p>è¿›ç¨‹æ˜¯ç¨‹åºè¿è¡Œå’Œèµ„æºåˆ†é…çš„åŸºæœ¬å•ä½ï¼Œä¸€ä¸ªç¨‹åºè‡³å°‘ä¸€ä¸ªè¿›ç¨‹ï¼Œä¸€ä¸ªè¿›ç¨‹è‡³å°‘ä¸€ä¸ªçº¿ç¨‹ã€‚</p>\n</li>\n<li><p>å¤šä¸ªè¿›ç¨‹çš„*<code>å†…éƒ¨æ•°æ®å’ŒçŠ¶æ€æ˜¯å®Œå…¨ç‹¬ç«‹çš„</code>*ï¼Œ<code>è€Œå¤šä¸ªçº¿ç¨‹æ˜¯å…±äº«ä¸€ä¸ªå†…å­˜ç©ºé—´å’Œä¸€ç»„ç³»ç»Ÿèµ„æºï¼Œæœ‰å¯èƒ½äº’ç›¸å½±å“</code>ã€‚</p>\n</li>\n</ul>\n<hr>\n<h4 id=\"ä»€ä¹ˆæ˜¯çº¿ç¨‹\"><a href=\"#ä»€ä¹ˆæ˜¯çº¿ç¨‹\" class=\"headerlink\" title=\"ä»€ä¹ˆæ˜¯çº¿ç¨‹\"></a>ä»€ä¹ˆæ˜¯çº¿ç¨‹</h4><ul>\n<li>çº¿ç¨‹æ˜¯ç¨‹åºå†…éƒ¨çš„æ§åˆ¶æµï¼Œ<code>åªèƒ½ä½¿ç”¨åˆ†é…ç»™çº¿ç¨‹ çš„èµ„æºå’Œç¯å¢ƒ</code>ã€‚</li>\n<li><code>çº¿ç¨‹æœ¬èº«çš„æ•°æ®é€šå¸¸åªæœ‰å¯„å­˜å™¨æ•°æ®ï¼Œä»¥åŠä¸€ä¸ªç¨‹åºæ‰§è¡Œæ—¶ä½¿ç”¨çš„å †æ ˆ</code>ï¼Œæ‰€ä»¥çº¿ç¨‹çš„åˆ‡æ¢æ¯”è¿›ç¨‹åˆ‡æ¢è´Ÿæ‹…è¦å°ã€‚</li>\n<li>çº¿ç¨‹æ˜¯è¿›ç¨‹çš„ä¸€ä¸ªå®ä½“ï¼Œæ˜¯cpuè°ƒåº¦å’Œåˆ†æ´¾çš„åŸºæœ¬å•ä½ï¼Œæ˜¯æ¯”ç¨‹åºæ›´å°èƒ½ç‹¬ç«‹è¿è¡Œçš„åŸºæœ¬å•ä½ã€‚</li>\n</ul>\n<hr>\n<h4 id=\"å¤šçº¿ç¨‹ç¼–ç¨‹çš„ç›®çš„\"><a href=\"#å¤šçº¿ç¨‹ç¼–ç¨‹çš„ç›®çš„\" class=\"headerlink\" title=\"å¤šçº¿ç¨‹ç¼–ç¨‹çš„ç›®çš„\"></a>å¤šçº¿ç¨‹ç¼–ç¨‹çš„ç›®çš„</h4><blockquote>\n<p>å……åˆ†çš„åˆ©ç”¨ CPU å’Œ I/O çš„åˆ©ç”¨ç‡</p>\n</blockquote>\n<ul>\n<li>å¤šçº¿ç¨‹ç¼–ç¨‹çš„ç›®çš„ï¼Œå°±æ˜¯ æœ€å¤§é™åº¦åœ°åˆ©ç”¨CPUèµ„æºï¼Œå½“æŸä¸€çº¿ç¨‹çš„å¤„ç†ä¸éœ€è¦å ç”¨CPCè€Œå’ŒI/Oç­‰èµ„æºæ‰“äº¤é“æ—¶ï¼Œè®©éœ€è¦å ç”¨CPUèµ„æºçš„å…¶ä»–çº¿ç¨‹æœ‰æœºä¼šè·å¾—CPUèµ„æºï¼Œä»æ ¹æœ¬ä¸Šï¼Œè¿™å°±æ˜¯å¤šçº¿ç¨‹ç¼–ç¨‹çš„æœ€ç»ˆç›®çš„ã€‚</li>\n<li>çº¿ç¨‹(Thread)ä¹Ÿæ˜¯ç¨‹åºçš„æœ€å°å•å…ƒï¼Œå®ƒä¾æ‰˜è¿›ç¨‹è€Œå­˜åœ¨ã€‚</li>\n<li>å¤šä¸ªçº¿ç¨‹å¯ä»¥å…±äº«ä¸€å—å†…å­˜ç©ºé—´å’Œä¸€ç»„ç³»ç»Ÿèµ„æºå› æ­¤çº¿ç¨‹ä¹‹å‰çš„åˆ‡æ¢æ›´åŠ èŠ‚çœèµ„æºã€æ›´åŠ è½»é‡åŒ–ï¼Œä¹Ÿå› æ­¤è¢«ç§°ä¸ºè½»é‡çº§çš„è¿›ç¨‹ã€‚</li>\n</ul>\n<h4 id=\"å¤šçº¿ç¨‹æ¦‚å¿µä»‹ç»\"><a href=\"#å¤šçº¿ç¨‹æ¦‚å¿µä»‹ç»\" class=\"headerlink\" title=\"å¤šçº¿ç¨‹æ¦‚å¿µä»‹ç»\"></a>å¤šçº¿ç¨‹æ¦‚å¿µä»‹ç»</h4><ul>\n<li>ä¸€ä¸ªè¿›ç¨‹å¯ä»¥åŒ…å«å¤šä¸ªçº¿ç¨‹ã€‚</li>\n<li>ä¸€ä¸ªç¨‹åºå®ç°å¤šä¸ªä»£ç åŒæ—¶äº¤æ›¿è¿è¡Œå°±éœ€è¦äº§ç”Ÿå¤šä¸ªçº¿ç¨‹ã€‚</li>\n<li>CPUéšæœºçš„æŠ½å‡ºæ—¶é—´ï¼Œè®©æˆ‘ä»¬çš„ç¨‹åºä¸€ä¼šåšè¿™ä»¶äº‹æƒ…ï¼Œä¸€ä¼šåšå¦å¤–ä¸€ä»¶äº‹æƒ…ã€‚</li>\n<li>åŒæœŸå…¶ä»–å¤§å¤šæ•°ç¼–ç¨‹è¯­è¨€ä¸åŒï¼ŒJavaå†…ç½®æ”¯æŒå¤šçº¿ç¨‹ç¼–ç¨‹(multithreaded progranmming)ã€‚å¤šçº¿ç¨‹ç¨‹åºåŒ…åŒ…å«ä¸¤ä¸ªæˆ–ä¸¤æ¡ä»¥ä¸Šå¹¶å‘è¿ä½œçš„éƒ¨åˆ†ï¼Œå§ç¨‹åºä¸­æ¯ä¸ªè¿™ç§çš„éƒ¨åˆ†éƒ½å«åšä¸€ä¸ªçº¿ç¨‹ï¼ˆthread)ï¼Œæ¯ä¸ªçº¿ç¨‹éƒ½ç‹¬ç«‹çš„æ‰§è¡Œè·¯ç»ï¼Œå› æ­¤å¤šçº¿ç¨‹æ˜¯å¤šä»»åŠ¡å¤„ç†çš„ä¸€ç§ç‰¹æ®Šå½¢å¼ã€‚</li>\n<li>å¤šä»»åŠ¡å¤„ç†è¢«æ‰€æœ‰çš„ç°ä»£æ“ä½œç³»ç»Ÿæ‰€æ”¯æŒã€‚ç„¶åï¼Œå¤šä»»åŠ¡å¤„ç†æœ‰ä¸¤ç§æˆªç„¶ä¸åŒçš„ç±»å‹ï¼ŒåŸºäºè¿›ç¨‹å’ŒåŸºäºçº¿ç¨‹ã€‚<ul>\n<li>åŸºäºè¿›ç¨‹<ul>\n<li>åŸºäºè¿›ç¨‹çš„å¤šä»»åŠ¡å¤„ç†æ˜¯æ›´ç†Ÿæ‚‰çš„å½¢å¼ï¼Œè¿›ç¨‹ï¼ˆprocessï¼‰æœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªæ‰§è¡Œçš„ç¨‹åºã€‚å› æ­¤åŸºäºè¿›ç¨‹çš„å¤šçº¿ç¨‹ä»»åŠ¡å¤„ç†çš„ç‰¹ç‚¹æ˜¯å…è®¸ä½ çš„è®¡ç®—æœºåŒæ—¶è¿è¡Œä¸¤ä¸ªæˆ–æ›´å¤šçš„ç¨‹åºã€‚</li>\n</ul>\n</li>\n<li>åŸºäºçº¿ç¨‹<ul>\n<li>åŸºäºçº¿ç¨‹ï¼ˆthread-based)çš„å¤šä»»åŠ¡å¤„ç†ç¯å¢ƒä¸­ï¼Œçº¿ç¨‹æ˜¯æœ€å°çš„æ‰§è¡Œå•ä½ã€‚è¿™æ„å‘³ç€ä¸€ä¸ªç¨‹åºå¯ä»¥æ‰§è¡Œä¸¤ä¸ªæˆ–åˆ™å¤šä¸ªä»»åŠ¡çš„åŠŸèƒ½ã€‚</li>\n</ul>\n</li>\n<li>å¤šçº¿ç¨‹ç¨‹åºæ¯”å¤šè¿›ç¨‹ç¨‹åºéœ€è¦æ›´å°‘çš„ç®¡ç†èµ„æºã€‚<ul>\n<li>è¿›ç¨‹æ˜¯é‡é‡çº§çš„ä»»åŠ¡ï¼Œéœ€è¦åˆ†é…ç»™ä»–ä»¬çš„ç‹¬ç«‹ç©ºé—´åœ°å€ã€‚è¿›ç¨‹ä¹‹é—´é€šä¿¡æ˜¯æ˜‚è´µå’Œå—é™çš„ã€‚è¿›ç¨‹ä¹‹é—´çš„è½¬æ¢ä¹Ÿæ˜¯å¾ˆéœ€è¦èŠ±è´¹çš„ã€‚å¦ä¸€æ–¹é¢ï¼Œçº¿ç¨‹æ˜¯è½»é‡çº§çš„é€‰æ‰‹ï¼Œå®ƒä»¬å…±äº«ç›¸åŒçš„åœ°å€ç©ºé—´å¹¶ä¸”å…±äº«åŒä¸€è¿›ç¨‹ï¼Œçº¿ç¨‹ä¹‹é—´é€šä¿¡æ˜¯è½»é‡çº§çš„ï¼Œçº¿ç¨‹çš„è½¬æ¢ä¹Ÿæ˜¯è½»é‡çº§çš„ã€‚</li>\n</ul>\n</li>\n<li>çº¿ç¨‹çš„å®ç°<ul>\n<li>1.ä¸¤ç§æ–¹æ³•å‡éœ€è¦æ‰§è¡Œçº¿ç¨‹startæ–¹æ³•ä½œä¸ºçº¿ç¨‹åˆ†é…å¿…é¡»çš„ç³»ç»Ÿèµ„æºã€è°ƒåº¦çº¿ç¨‹è¿è¡Œå¹¶æ‰§è¡Œçº¿ç¨‹çš„runæ–¹æ³•ã€‚</li>\n<li>2.åœ¨å…·ä½“åº”ç”¨ä¸­ï¼Œé‡‡ç”¨å“ªç§æ–¹æ³•æ¥æ„é€ çº¿ç¨‹ä½“è¦è¯•æƒ…å†µè€Œå®šã€‚é€šå¸¸ï¼Œå½“ä¸€ä¸ªçº¿ç¨‹ç»§æ‰¿äº†å¦ä¸€ä¸ªç±»ï¼Œåº”è¯¥åº”è¯¥ä½¿ç”¨ç¬¬äºŒç§æ–¹æ³•ï¼Œå³ä½¿å®ç°runnableæ¥å£ã€‚</li>\n<li>3.çº¿ç¨‹çš„æ¶ˆäº¡ä¸èƒ½é€šè¿‡è°ƒç”¨ä¸€ä¸ªTrread.stopæ–¹æ³•ï¼Œè€Œæ˜¯è®©çº¿ç¨‹è‡ªç„¶æ¶ˆäº¡ã€‚</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<h4 id=\"çº¿ç¨‹çš„ç”Ÿå‘½å‘¨æœŸ\"><a href=\"#çº¿ç¨‹çš„ç”Ÿå‘½å‘¨æœŸ\" class=\"headerlink\" title=\"çº¿ç¨‹çš„ç”Ÿå‘½å‘¨æœŸ\"></a>çº¿ç¨‹çš„ç”Ÿå‘½å‘¨æœŸ</h4><blockquote>\n<p>ä¸€ä¸ªçº¿ç¨‹çš„æ¶ˆäº¡è¿‡ç¨‹ã€‚</p>\n</blockquote>\n<ul>\n<li><h4 id=\"æ–°å»ºï¼ˆNewï¼‰\"><a href=\"#æ–°å»ºï¼ˆNewï¼‰\" class=\"headerlink\" title=\"æ–°å»ºï¼ˆNewï¼‰\"></a>æ–°å»ºï¼ˆNewï¼‰</h4><ul>\n<li>åˆ›å»ºåå°šæœªå¯åŠ¨ã€‚</li>\n</ul>\n</li>\n<li><h4 id=\"å¯è¿è¡Œï¼ˆRunnableï¼‰\"><a href=\"#å¯è¿è¡Œï¼ˆRunnableï¼‰\" class=\"headerlink\" title=\"å¯è¿è¡Œï¼ˆRunnableï¼‰\"></a>å¯è¿è¡Œï¼ˆRunnableï¼‰</h4><ul>\n<li>å¯èƒ½æ­£åœ¨è¿è¡Œï¼Œä¹Ÿå¯èƒ½æ­£åœ¨ç­‰å¾… CPU æ—¶é—´ç‰‡ã€‚</li>\n<li>åŒ…å«äº†æ“ä½œç³»ç»Ÿçº¿ç¨‹çŠ¶æ€ä¸­çš„ è¿è¡Œï¼ˆRunning ï¼‰ å’Œ å°±ç»ªï¼ˆReadyï¼‰ã€‚</li>\n</ul>\n</li>\n<li><h4 id=\"æ— é™æœŸç­‰å¾…ï¼ˆWaitingï¼‰\"><a href=\"#æ— é™æœŸç­‰å¾…ï¼ˆWaitingï¼‰\" class=\"headerlink\" title=\"æ— é™æœŸç­‰å¾…ï¼ˆWaitingï¼‰\"></a>æ— é™æœŸç­‰å¾…ï¼ˆWaitingï¼‰</h4><ul>\n<li><p>ç­‰å¾…å…¶å®ƒçº¿ç¨‹æ˜¾å¼åœ°å”¤é†’ï¼Œå¦åˆ™ä¸ä¼šè¢«åˆ†é… CPU æ—¶é—´ç‰‡ã€‚</p>\n<table>\n<thead>\n<tr>\n<th>è¿›å…¥æ–¹æ³•</th>\n<th>é€€å‡ºæ–¹æ³•</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>æ²¡æœ‰è®¾ç½® Timeout å‚æ•°çš„ Object.wait() æ–¹æ³•</td>\n<td>Object.notify() / Object.notifyAll()</td>\n</tr>\n<tr>\n<td>æ²¡æœ‰è®¾ç½® Timeout å‚æ•°çš„ Thread.join() æ–¹æ³•</td>\n<td>è¢«è°ƒç”¨çš„çº¿ç¨‹æ‰§è¡Œå®Œæ¯•</td>\n</tr>\n<tr>\n<td>LockSupport.park() æ–¹æ³•</td>\n<td>-</td>\n</tr>\n</tbody></table>\n</li>\n</ul>\n</li>\n<li><h4 id=\"é™æœŸç­‰å¾…ï¼ˆTimed-Waitingï¼‰\"><a href=\"#é™æœŸç­‰å¾…ï¼ˆTimed-Waitingï¼‰\" class=\"headerlink\" title=\"é™æœŸç­‰å¾…ï¼ˆTimed Waitingï¼‰\"></a>é™æœŸç­‰å¾…ï¼ˆTimed Waitingï¼‰</h4><ul>\n<li><p>æ— éœ€ç­‰å¾…å…¶å®ƒçº¿ç¨‹æ˜¾å¼åœ°å”¤é†’ï¼Œåœ¨ä¸€å®šæ—¶é—´ä¹‹åä¼šè¢«ç³»ç»Ÿè‡ªåŠ¨å”¤é†’ã€‚</p>\n</li>\n<li><p>è°ƒç”¨ Thread.sleep() æ–¹æ³•ä½¿çº¿ç¨‹è¿›å…¥é™æœŸç­‰å¾…çŠ¶æ€æ—¶ï¼Œå¸¸å¸¸ç”¨ â€œ<strong>ä½¿ä¸€ä¸ªçº¿ç¨‹ç¡çœ </strong>â€ è¿›è¡Œæè¿°ã€‚</p>\n</li>\n<li><p>è°ƒç”¨ Object.wait() æ–¹æ³•ä½¿çº¿ç¨‹è¿›å…¥é™æœŸç­‰å¾…æˆ–è€…æ— é™æœŸç­‰å¾…æ—¶ï¼Œå¸¸å¸¸ç”¨ â€œ<strong>æŒ‚èµ·ä¸€ä¸ªçº¿ç¨‹</strong>â€ è¿›è¡Œæè¿°ã€‚</p>\n</li>\n<li><p><strong>ç¡çœ å’ŒæŒ‚èµ·</strong>æ˜¯ç”¨æ¥æè¿°<strong>è¡Œä¸º</strong>ï¼Œè€Œ<strong>é˜»å¡</strong>å’Œç­‰å¾…ç”¨æ¥æè¿°<strong>çŠ¶æ€</strong>ã€‚</p>\n</li>\n<li><p>é˜»å¡å’Œç­‰å¾…çš„åŒºåˆ«åœ¨äºï¼Œé˜»å¡æ˜¯è¢«åŠ¨çš„ï¼Œå®ƒæ˜¯åœ¨ç­‰å¾…è·å–ä¸€ä¸ªæ’å®ƒé”ã€‚è€Œç­‰å¾…æ˜¯ä¸»åŠ¨çš„ï¼Œé€šè¿‡è°ƒç”¨ Thread.sleep() å’Œ Object.wait() ç­‰æ–¹æ³•è¿›å…¥ã€‚</p>\n<table>\n<thead>\n<tr>\n<th>è¿›å…¥æ–¹æ³•</th>\n<th>é€€å‡ºæ–¹æ³•</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>Thread.sleep() æ–¹æ³•</td>\n<td>æ—¶é—´ç»“æŸ</td>\n</tr>\n<tr>\n<td>è®¾ç½®äº† Timeout å‚æ•°çš„ Object.wait() æ–¹æ³•</td>\n<td>æ—¶é—´ç»“æŸ / Object.notify() / Object.notifyAll()</td>\n</tr>\n<tr>\n<td>è®¾ç½®äº† Timeout å‚æ•°çš„ Thread.join() æ–¹æ³•</td>\n<td>æ—¶é—´ç»“æŸ / è¢«è°ƒç”¨çš„çº¿ç¨‹æ‰§è¡Œå®Œæ¯•</td>\n</tr>\n<tr>\n<td>LockSupport.parkNanos() æ–¹æ³•</td>\n<td>-</td>\n</tr>\n<tr>\n<td>LockSupport.parkUntil() æ–¹æ³•</td>\n<td>-</td>\n</tr>\n</tbody></table>\n</li>\n</ul>\n</li>\n<li><h4 id=\"é˜»å¡ï¼ˆBlockingï¼‰\"><a href=\"#é˜»å¡ï¼ˆBlockingï¼‰\" class=\"headerlink\" title=\"é˜»å¡ï¼ˆBlockingï¼‰\"></a>é˜»å¡ï¼ˆBlockingï¼‰</h4><ul>\n<li>è¿™ä¸ªçŠ¶æ€ä¸‹ï¼Œæ˜¯åœ¨å¤šä¸ªçº¿ç¨‹æœ‰åŒæ­¥æ“ä½œçš„åœºæ™¯ï¼Œæ¯”å¦‚æ­£åœ¨ç­‰å¾…å¦ä¸€ä¸ªçº¿ç¨‹çš„ synchronized å—çš„æ‰§è¡Œé‡Šæ”¾ï¼Œæˆ–è€…å¯é‡å…¥çš„ synchronized å—é‡Œåˆ«äººè°ƒç”¨ wait() æ–¹æ³•ï¼Œä¹Ÿå°±æ˜¯çº¿ç¨‹åœ¨ç­‰å¾…è¿›å…¥ä¸´ç•ŒåŒºã€‚</li>\n<li>é˜»å¡å¯ä»¥åˆ†ä¸ºï¼šç­‰å¾…é˜»å¡ï¼ŒåŒæ­¥é˜»å¡ï¼Œå…¶ä»–é˜»å¡</li>\n</ul>\n</li>\n<li><h4 id=\"æ­»äº¡ï¼ˆTerminatedï¼‰\"><a href=\"#æ­»äº¡ï¼ˆTerminatedï¼‰\" class=\"headerlink\" title=\"æ­»äº¡ï¼ˆTerminatedï¼‰\"></a>æ­»äº¡ï¼ˆTerminatedï¼‰</h4><ul>\n<li>çº¿ç¨‹å› ä¸º run æ–¹æ³•æ­£å¸¸é€€å‡ºè€Œè‡ªç„¶æ­»äº¡ã€‚</li>\n<li>å› ä¸ºä¸€ä¸ªæ²¡æœ‰æ•è·çš„å¼‚å¸¸ç»ˆæ­¢äº† run æ–¹æ³•è€Œæ„å¤–æ­»äº¡ã€‚</li>\n</ul>\n</li>\n</ul>\n<p><img src=\"https://z201.oss-cn-shanghai.aliyuncs.com/JavaNote/%E7%BA%BF%E7%A8%8B%E7%8A%B6%E6%80%81.png\"></p>\n<p><img src=\"https://z201.oss-cn-shanghai.aliyuncs.com/JavaNote/%E5%A4%9A%E7%BA%BF%E7%A8%8B/%E7%BA%BF%E7%A8%8B%E7%9A%84%E5%9F%BA%E6%9C%AC%E7%8A%B6%E6%80%81.svg\" alt=\"çº¿ç¨‹çš„çŠ¶æ€\"></p>\n<h4 id=\"çº¿ç¨‹çš„åŸºæœ¬æ–¹æ³•\"><a href=\"#çº¿ç¨‹çš„åŸºæœ¬æ–¹æ³•\" class=\"headerlink\" title=\"çº¿ç¨‹çš„åŸºæœ¬æ–¹æ³•\"></a>çº¿ç¨‹çš„åŸºæœ¬æ–¹æ³•</h4><ul>\n<li><p>waitçº¿ç¨‹ç­‰å¾…</p>\n<ul>\n<li>è°ƒç”¨è¯¥æ–¹æ³•çš„çº¿ç¨‹è¿›å…¥ WAITING çŠ¶æ€ï¼Œåªæœ‰ç­‰å¾…å¦å¤–çº¿ç¨‹çš„é€šçŸ¥æˆ–è¢«ä¸­æ–­æ‰ä¼šè¿”å›ï¼Œéœ€è¦æ³¨æ„çš„æ˜¯è°ƒç”¨ wait()æ–¹æ³•åï¼Œä¼šé‡Šæ”¾å¯¹è±¡çš„é”ã€‚å› æ­¤ï¼Œwait æ–¹æ³•ä¸€èˆ¬ç”¨åœ¨åŒæ­¥æ–¹æ³•æˆ–åŒæ­¥ä»£ç å—ä¸­ã€‚</li>\n</ul>\n</li>\n<li><p>sleepçº¿ç¨‹ç¡çœ </p>\n<ul>\n<li>sleep å¯¼è‡´å½“å‰çº¿ç¨‹ä¼‘çœ ï¼Œä¸ wait æ–¹æ³•ä¸åŒçš„æ˜¯ sleep ä¸ä¼šé‡Šæ”¾å½“å‰å æœ‰çš„é”,sleep(long)ä¼šå¯¼è‡´çº¿ç¨‹è¿›å…¥ TIMED-WATING çŠ¶æ€ï¼Œè€Œ wait()æ–¹æ³•ä¼šå¯¼è‡´å½“å‰çº¿ç¨‹è¿›å…¥ WATING çŠ¶æ€ã€‚</li>\n</ul>\n</li>\n<li><p>yieldçº¿ç¨‹è®©æ­¥</p>\n<ul>\n<li>yield ä¼šä½¿å½“å‰çº¿ç¨‹è®©å‡º CPU æ‰§è¡Œæ—¶é—´ç‰‡ï¼Œä¸å…¶ä»–çº¿ç¨‹ä¸€èµ·é‡æ–°ç«äº‰ CPU æ—¶é—´ç‰‡ã€‚ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œä¼˜å…ˆçº§é«˜çš„çº¿ç¨‹æœ‰æ›´å¤§çš„å¯èƒ½æ€§æˆåŠŸç«äº‰å¾—åˆ° CPU æ—¶é—´ç‰‡ï¼Œä½†è¿™åˆä¸æ˜¯ç»å¯¹çš„ï¼Œæœ‰çš„æ“ä½œç³»ç»Ÿå¯¹çº¿ç¨‹ä¼˜å…ˆçº§å¹¶ä¸æ•æ„Ÿã€‚</li>\n</ul>\n</li>\n<li><p>interruptçº¿ç¨‹ä¸­æ–­</p>\n<ul>\n<li><p>ä¸­æ–­ä¸€ä¸ªçº¿ç¨‹ï¼Œå…¶æœ¬æ„æ˜¯ç»™è¿™ä¸ªçº¿ç¨‹ä¸€ä¸ªé€šçŸ¥ä¿¡å·ï¼Œä¼šå½±å“è¿™ä¸ªçº¿ç¨‹å†…éƒ¨çš„ä¸€ä¸ªä¸­æ–­æ ‡è¯†ä½ã€‚è¿™ä¸ªçº¿ç¨‹æœ¬èº«å¹¶ä¸ä¼šå› æ­¤è€Œæ”¹å˜çŠ¶æ€(å¦‚é˜»å¡ï¼Œç»ˆæ­¢ç­‰)ã€‚</p>\n<ul>\n<li><p>è°ƒç”¨ interrupt()æ–¹æ³•å¹¶ä¸ä¼šä¸­æ–­ä¸€ä¸ªæ­£åœ¨è¿è¡Œçš„çº¿ç¨‹ã€‚ä¹Ÿå°±æ˜¯è¯´å¤„äº Running çŠ¶æ€çš„çº¿ç¨‹å¹¶ä¸ä¼šå› ä¸ºè¢«ä¸­æ–­è€Œè¢«ç»ˆæ­¢ï¼Œä»…ä»…æ”¹å˜äº†å†…éƒ¨ç»´æŠ¤çš„ä¸­æ–­æ ‡è¯†ä½è€Œå·²ã€‚</p>\n</li>\n<li><p>è‹¥è°ƒç”¨ sleep()è€Œä½¿çº¿ç¨‹å¤„äº TIMED-WATING çŠ¶æ€ï¼Œè¿™æ—¶è°ƒç”¨ interrupt()æ–¹æ³•ï¼Œä¼šæŠ›å‡ºInterruptedException,ä»è€Œä½¿çº¿ç¨‹æå‰ç»“æŸ TIMED-WATING çŠ¶æ€ã€‚</p>\n<p>è®¸å¤šå£°æ˜æŠ›å‡º InterruptedException çš„æ–¹æ³•(å¦‚ Thread.sleep(long mills æ–¹æ³•))ï¼ŒæŠ›å‡ºå¼‚å¸¸å‰ï¼Œéƒ½ä¼šæ¸…é™¤ä¸­æ–­æ ‡è¯†ä½ï¼Œæ‰€ä»¥æŠ›å‡ºå¼‚å¸¸åï¼Œè°ƒç”¨ isInterrupted()æ–¹æ³•å°†ä¼šè¿”å› falseã€‚</p>\n</li>\n<li><p>ä¸­æ–­çŠ¶æ€æ˜¯çº¿ç¨‹å›ºæœ‰çš„ä¸€ä¸ªæ ‡è¯†ä½ï¼Œå¯ä»¥é€šè¿‡æ­¤æ ‡è¯†ä½å®‰å…¨çš„ç»ˆæ­¢çº¿ç¨‹ã€‚æ¯”å¦‚,ä½ æƒ³ç»ˆæ­¢ä¸€ä¸ªçº¿ç¨‹ thread çš„æ—¶å€™ï¼Œå¯ä»¥è°ƒç”¨ thread.interrupt()æ–¹æ³•ï¼Œåœ¨çº¿ç¨‹çš„ run æ–¹æ³•å†…éƒ¨å¯ä»¥æ ¹æ® thread.isInterrupted()çš„å€¼æ¥ä¼˜é›…çš„ç»ˆæ­¢çº¿ç¨‹ã€‚</p>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n<li><p>joinç­‰å¾…å…¶å®ƒçº¿ç¨‹ç»ˆæ­¢</p>\n<ul>\n<li>join() æ–¹æ³•ï¼Œç­‰å¾…å…¶ä»–çº¿ç¨‹ç»ˆæ­¢ï¼Œåœ¨å½“å‰çº¿ç¨‹ä¸­è°ƒç”¨ä¸€ä¸ªçº¿ç¨‹çš„ join() æ–¹æ³•ï¼Œåˆ™å½“å‰çº¿ç¨‹è½¬ä¸ºé˜»å¡çŠ¶æ€ï¼Œå›åˆ°å¦ä¸€ä¸ªçº¿ç¨‹ç»“æŸï¼Œå½“å‰çº¿ç¨‹å†ç”±é˜»å¡çŠ¶æ€å˜ä¸ºå°±ç»ªçŠ¶æ€ï¼Œç­‰å¾… cpu çš„å® å¹¸ã€‚</li>\n<li>å¾ˆå¤šæƒ…å†µä¸‹ï¼Œä¸»çº¿ç¨‹ç”Ÿæˆå¹¶å¯åŠ¨äº†å­çº¿ç¨‹ï¼Œéœ€è¦ç”¨åˆ°å­çº¿ç¨‹è¿”å›çš„ç»“æœï¼Œä¹Ÿå°±æ˜¯éœ€è¦ä¸»çº¿ç¨‹éœ€è¦åœ¨å­çº¿ç¨‹ç»“æŸåå†ç»“æŸï¼Œè¿™æ—¶å€™å°±è¦ç”¨åˆ° join() æ–¹æ³•ã€‚</li>\n</ul>\n</li>\n<li><p>notifyçº¿ç¨‹å”¤é†’</p>\n<ul>\n<li>Object ç±»ä¸­çš„ notify() æ–¹æ³•ï¼Œå”¤é†’åœ¨æ­¤å¯¹è±¡ç›‘è§†å™¨ä¸Šç­‰å¾…çš„å•ä¸ªçº¿ç¨‹ï¼Œå¦‚æœæ‰€æœ‰çº¿ç¨‹éƒ½åœ¨æ­¤å¯¹è±¡ä¸Šç­‰å¾…ï¼Œåˆ™ä¼šé€‰æ‹©å”¤é†’å…¶ä¸­ä¸€ä¸ªçº¿ç¨‹ï¼Œé€‰æ‹©æ˜¯ä»»æ„çš„ï¼Œå¹¶åœ¨å¯¹å®ç°åšå‡ºå†³å®šæ—¶å‘ç”Ÿï¼Œçº¿ç¨‹é€šè¿‡è°ƒç”¨å…¶ä¸­ä¸€ä¸ª wait() æ–¹æ³•ï¼Œåœ¨å¯¹è±¡çš„ç›‘è§†å™¨ä¸Šç­‰å¾…ï¼Œç›´åˆ°å½“å‰çš„çº¿ç¨‹æ”¾å¼ƒæ­¤å¯¹è±¡ä¸Šçš„é”å®šï¼Œæ‰èƒ½ç»§ç»­æ‰§è¡Œè¢«å”¤é†’çš„çº¿ç¨‹ï¼Œè¢«å”¤é†’çš„çº¿ç¨‹å°†ä»¥å¸¸è§„æ–¹å¼ä¸åœ¨è¯¥å¯¹è±¡ä¸Šä¸»åŠ¨åŒæ­¥çš„å…¶ä»–æ‰€æœ‰çº¿ç¨‹è¿›è¡Œç«äº‰ã€‚ç±»ä¼¼çš„æ–¹æ³•è¿˜æœ‰ notifyAll() ï¼Œå”¤é†’å†æ¬¡ç›‘è§†å™¨ä¸Šç­‰å¾…çš„æ‰€æœ‰çº¿ç¨‹ã€‚</li>\n</ul>\n</li>\n<li><p>å…¶å®ƒæ–¹æ³•</p>\n<ul>\n<li>isAlive()ï¼š åˆ¤æ–­ä¸€ä¸ªçº¿ç¨‹æ˜¯å¦å­˜æ´»ã€‚</li>\n<li>activeCount()ï¼š ç¨‹åºä¸­æ´»è·ƒçš„çº¿ç¨‹æ•°ã€‚</li>\n<li>enumerate()ï¼š æšä¸¾ç¨‹åºä¸­çš„çº¿ç¨‹ã€‚</li>\n<li>currentThread()ï¼š å¾—åˆ°å½“å‰çº¿ç¨‹ã€‚</li>\n<li>isDaemon()ï¼š ä¸€ä¸ªçº¿ç¨‹æ˜¯å¦ä¸ºå®ˆæŠ¤çº¿ç¨‹ã€‚</li>\n<li>setDaemon()ï¼š è®¾ç½®ä¸€ä¸ªçº¿ç¨‹ä¸ºå®ˆæŠ¤çº¿ç¨‹ã€‚(ç”¨æˆ·çº¿ç¨‹å’Œå®ˆæŠ¤çº¿ç¨‹çš„åŒºåˆ«åœ¨äºï¼Œæ˜¯å¦ç­‰å¾…ä¸»çº¿ç¨‹ä¾èµ–äºä¸»çº¿ç¨‹ç»“æŸè€Œç»“æŸ) </li>\n<li>setName()ï¼š ä¸ºçº¿ç¨‹è®¾ç½®ä¸€ä¸ªåç§°ã€‚</li>\n<li>setPriority()ï¼š è®¾ç½®ä¸€ä¸ªçº¿ç¨‹çš„ä¼˜å…ˆçº§ã€‚</li>\n<li>getPriority():ï¼šè·å¾—ä¸€ä¸ªçº¿ç¨‹çš„ä¼˜å…ˆçº§ã€‚</li>\n</ul>\n</li>\n</ul>\n<h4 id=\"çº¿ç¨‹ä¼˜å…ˆçº§\"><a href=\"#çº¿ç¨‹ä¼˜å…ˆçº§\" class=\"headerlink\" title=\"çº¿ç¨‹ä¼˜å…ˆçº§\"></a>çº¿ç¨‹ä¼˜å…ˆçº§</h4><ul>\n<li><p>è®¾ç½®ä¼˜å…ˆçº§æ˜¯ä¸ºäº†åœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸­ä¾¿äºç³»ç»Ÿå¯¹çº¿ç¨‹è°ƒåº¦ï¼Œä¼˜å…ˆçº§é«˜çš„çº¿ç¨‹å°†ä¼˜å…ˆæ‰§è¡Œã€‚</p>\n<ul>\n<li>ä¸€ä¸ªçº¿ç¨‹çš„ä¼˜å…ˆçº§éµä»ä»¥ä¸‹åŸåˆ™ã€‚<ul>\n<li>çº¿ç¨‹åˆ›å»ºæ—¶ï¼Œå­ç»§æ‰¿çˆ¶çš„ä¼˜å…ˆçº§ã€‚</li>\n<li>çº¿ç¨‹åˆ›å»ºåï¼Œå¯ç”¨è¿‡è°ƒç”¨setPriority()æ–¹æ³•æ”¹å˜ä¼˜å…ˆçº§ã€‚</li>\n<li>çº¿ç¨‹çš„ä¼˜å…ˆçº§æ˜¯1-10ä¹‹é—´çš„æ­£æ•´æ•°ã€‚<ul>\n<li>1   -  MIN_PRIORITY</li>\n<li>10 -  MAX_PRIORITY</li>\n<li>5   -  NORM_PRIORITY</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n<li><p>çº¿ç¨‹çš„ä¼˜å…ˆçº§ç­–ç•¥</p>\n<ul>\n<li>çº¿ç¨‹è°ƒåº¦å™¨é€‰æ‹©ä¼˜å…ˆçº§æœ€é«˜çš„çº¿ç¨‹è¿è¡Œ.ä½†æ˜¯,å¦‚æœå‘ç”Ÿä»¥ä¸‹æƒ…å†µ,å°±ä¼šç»ˆæ­¢çº¿ç¨‹çš„è¿è¡Œ.<ul>\n<li>çº¿ç¨‹ä½“ä¸­è°ƒç”¨äº†yieid()æ–¹æ³•,è®©å‡ºäº†å¯¹CPUçš„å ç”¨æƒã€‚</li>\n<li>çº¿ç¨‹ä½“ä¸­è°ƒç”¨sleep()æ–¹æ³•ï¼Œä½¿çº¿ç¨‹è¿›å…¥äº†ç¡çœ çŠ¶æ€ã€‚</li>\n<li>çº¿ç¨‹ç”±I/Oæ“ä½œè€Œå—é˜»å¡ã€‚</li>\n<li>å¦ä¸€ä¸ªæ›´é«˜ä¼˜å…ˆçº§çš„çº¿ç¨‹å‡ºç°ã€‚</li>\n<li>åœ¨æ”¯æŒæ—¶é—´ç‰‡æ®µç³»ç»Ÿä¸­ï¼Œè¯¥çº¿ç¨‹çš„æ—¶é—´ç‰‡ç”¨å®Œã€‚</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<h4 id=\"ä¸Šä¸‹æ–‡åˆ‡æ¢\"><a href=\"#ä¸Šä¸‹æ–‡åˆ‡æ¢\" class=\"headerlink\" title=\"ä¸Šä¸‹æ–‡åˆ‡æ¢\"></a>ä¸Šä¸‹æ–‡åˆ‡æ¢</h4><ul>\n<li><p>æ˜¯æŒ‡æŸä¸€æ—¶é—´ç‚¹ CPU å¯„å­˜å™¨å’Œç¨‹åºè®¡æ•°å™¨çš„å†…å®¹ã€‚</p>\n<ul>\n<li>å¯„å­˜å™¨<ul>\n<li>æ˜¯ CPU å†…éƒ¨çš„æ•°é‡è¾ƒå°‘ä½†æ˜¯é€Ÿåº¦å¾ˆå¿«çš„å†…å­˜ï¼ˆä¸ä¹‹å¯¹åº”çš„æ˜¯ CPU å¤–éƒ¨ç›¸å¯¹è¾ƒæ…¢çš„ RAM ä¸»å†…å­˜ï¼‰ã€‚å¯„å­˜å™¨é€šè¿‡å¯¹å¸¸ç”¨å€¼ï¼ˆé€šå¸¸æ˜¯è¿ç®—çš„ä¸­é—´å€¼ï¼‰çš„å¿«é€Ÿè®¿é—®æ¥æé«˜è®¡ç®—æœºç¨‹åºè¿è¡Œçš„é€Ÿåº¦ã€‚</li>\n</ul>\n</li>\n<li>ç¨‹åºè®¡æ•°å™¨<ul>\n<li>æ˜¯ä¸€ä¸ªä¸“ç”¨çš„å¯„å­˜å™¨ï¼Œç”¨äºè¡¨æ˜æŒ‡ä»¤åºåˆ—ä¸­ CPU æ­£åœ¨æ‰§è¡Œçš„ä½ç½®ï¼Œå­˜çš„å€¼ä¸ºæ­£åœ¨æ‰§è¡Œçš„æŒ‡ä»¤çš„ä½ç½®æˆ–è€…ä¸‹ä¸€ä¸ªå°†è¦è¢«æ‰§è¡Œçš„æŒ‡ä»¤çš„ä½ç½®ï¼Œå…·ä½“ä¾èµ–äºç‰¹å®šçš„ç³»ç»Ÿã€‚</li>\n</ul>\n</li>\n<li>ä¸Šä¸‹æ–‡åˆ‡æ¢çš„æ´»åŠ¨</li>\n</ul>\n<ol>\n<li>æŒ‚èµ·ä¸€ä¸ªè¿›ç¨‹ï¼Œå°†è¿™ä¸ªè¿›ç¨‹åœ¨ CPU ä¸­çš„çŠ¶æ€ï¼ˆä¸Šä¸‹æ–‡ï¼‰å­˜å‚¨äºå†…å­˜ä¸­çš„æŸå¤„ã€‚</li>\n<li>åœ¨å†…å­˜ä¸­æ£€ç´¢ä¸‹ä¸€ä¸ªè¿›ç¨‹çš„ä¸Šä¸‹æ–‡å¹¶å°†å…¶åœ¨ CPU çš„å¯„å­˜å™¨ä¸­æ¢å¤ã€‚</li>\n<li>è·³è½¬åˆ°ç¨‹åºè®¡æ•°å™¨æ‰€æŒ‡å‘çš„ä½ç½®ï¼ˆå³è·³è½¬åˆ°è¿›ç¨‹è¢«ä¸­æ–­æ—¶çš„ä»£ç è¡Œï¼‰ï¼Œä»¥æ¢å¤è¯¥è¿›ç¨‹åœ¨ç¨‹åºä¸­ã€‚</li>\n</ol>\n<ul>\n<li><strong>å¼•èµ·çº¿ç¨‹ä¸Šä¸‹æ–‡åˆ‡æ¢çš„åŸå› </strong></li>\n</ul>\n<ol>\n<li>å½“å‰æ‰§è¡Œä»»åŠ¡çš„æ—¶é—´ç‰‡ç”¨å®Œä¹‹åï¼Œç³»ç»Ÿ CPU æ­£å¸¸è°ƒåº¦ä¸‹ä¸€ä¸ªä»»åŠ¡ã€‚</li>\n<li>å½“å‰æ‰§è¡Œä»»åŠ¡ç¢°åˆ° IO é˜»å¡ï¼Œè°ƒåº¦å™¨å°†æ­¤ä»»åŠ¡æŒ‚èµ·ï¼Œç»§ç»­ä¸‹ä¸€ä»»åŠ¡ã€‚</li>\n<li>å¤šä¸ªä»»åŠ¡æŠ¢å é”èµ„æºï¼Œå½“å‰ä»»åŠ¡æ²¡æœ‰æŠ¢åˆ°é”èµ„æºï¼Œè¢«è°ƒåº¦å™¨æŒ‚èµ·ï¼Œç»§ç»­ä¸‹ä¸€ä»»åŠ¡ã€‚</li>\n<li>ç”¨æˆ·ä»£ç æŒ‚èµ·å½“å‰ä»»åŠ¡ï¼Œè®©å‡º CPU æ—¶é—´ã€‚</li>\n<li>ç¡¬ä»¶ä¸­æ–­ã€‚</li>\n</ol>\n</li>\n</ul>\n<h4 id=\"çº¿ç¨‹çš„åŒæ­¥\"><a href=\"#çº¿ç¨‹çš„åŒæ­¥\" class=\"headerlink\" title=\"çº¿ç¨‹çš„åŒæ­¥\"></a>çº¿ç¨‹çš„åŒæ­¥</h4><ul>\n<li>åœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸­ï¼Œå¯èƒ½ä¼šå‡ºç°ä¸¤ä¸ªç”šè‡³å¤šä¸ªçº¿ç¨‹è¯•å›¾åŒæ—¶è®¿é—®ä¸€ä¸ªæœ‰é™çš„èµ„æºã€‚å¿…é¡»å¯¹è¿™ç§æ½œåœ¨çš„èµ„æºå†²çªè¿›è¡Œé¢„é˜²ã€‚<ul>\n<li>è§£å†³æ–¹æ¡ˆï¼šåœ¨çº¿ç¨‹ä½¿ç”¨ä¸€ä¸ªèµ„æºæ—¶ä¸ºå…¶åŠ é”å³å¯ã€‚è®¿é—®èµ„æºçš„ç¬¬ä¸€ä¸ªçº¿ç¨‹ä¸ºå…¶ä¸Šé”ä»¥åï¼Œå…¶ä»–çº¿ç¨‹æ¯”ä¾¿ä¸èƒ½åœ¨ä½¿ç”¨é‚£ä¸ªèµ„æºã€‚é™¤éè¢«è§£é”ã€‚</li>\n</ul>\n</li>\n<li>åœ¨çº¿ç¨‹ç¯å¢ƒä¸­ï¼Œå…³äºæˆå‘˜å˜é‡ä¸å±€éƒ¨å˜é‡ï¼›å¦‚æœä¸€ä¸ªå˜é‡æ˜¯æˆå‘˜å˜é‡ï¼Œé‚£ä¹ˆå¤šä¸ªçº¿ç¨‹å¯¹åŒä¸€ä¸ªå¯¹è±¡çš„æˆå‘˜å˜é‡è¿›è¡Œæ“ä½œæ—¶å€™ï¼Œä»–ä»¬å¯¹è¯¥æˆå‘˜å˜é‡æ˜¯å½¼æ­¤å½±å“åˆ°ï¼ˆä¹Ÿå°±æ˜¯è¯´ä¸€ä¸ªçº¿ç¨‹å¯¹æˆå‘˜å˜é‡çš„æ”¹å˜ä¼šå½±å“å¦ä¸€ä¸ªåˆ°å¦ä¸€çº¿ç¨‹ï¼‰ã€‚</li>\n<li>ä¸èƒ½ä¾é çº¿ç¨‹ä¼˜å…ˆçº§æ¥å†³å®šçº¿ç¨‹çš„æ‰§è¡Œã€‚</li>\n<li>åŒæ­¥åˆ°å®ç°æ–¹å¼<ul>\n<li>synchronized å…³é”®å­—ï¼›å½“synchronizedå…³é”®å­—ä¿®é¥°ä¸€ä¸ªæ–¹æ³•çš„æ—¶å€™ï¼Œè¯¥æ–¹æ³•å«åšåŒæ­¥æ–¹æ³•ã€‚</li>\n<li>Javaä¸­æ–¹é”ã€‚<ul>\n<li>javaä¸­æ¯ä¸ªå¯¹è±¡éƒ½æœ‰ä¸€ä¸ªé”(lock)æˆ–è€…å«ç›‘è§†å™¨(monitor)ï¼Œå½“è®¿é—®ä¸€ä¸ªå¯¹è±¡synchronizedæ–¹æ³•æ—¶ï¼Œè¡¨ç¤ºå°†è¯¥å¯¹è±¡ä¸Šé”ï¼Œæ­¤æ—¶å…¶ä»–ä»»ä½•çº¿ç¨‹åœ¨å»è®¿é—®è¯¥synchronizedæ–¹æ³•äº†ï¼Œç›´åˆ°ä¹‹å‰é‚£ä¸ªçº¿ç¨‹æ‰§è¡Œæ–¹æ³•å®Œæ¯•åï¼ˆæˆ–è€…æŠ›å‡ºå¼‚å¸¸ï¼‰ï¼Œé‚£ä¹ˆè¯¥å¯¹è±¡çš„é”é‡Šæ”¾æ‰ã€‚å…¶ä»–çº¿ç¨‹æ‰æœ‰å¯èƒ½å†å»è®¿é—®synchronizedæ–¹æ³•ã€‚</li>\n<li>å¦‚æœä¸€ä¸ªå¯¹è±¡ä¸­æœ‰å¤šä¸ªsynchronizedæ–¹æ³•ï¼ŒæŸä¸€æ—¶åˆ»æŸä¸ªçº¿ç¨‹è¿›å…¥äº†è¯¥å¯¹è±¡ä¸­çš„synchronizedæ–¹æ³•ï¼Œé‚£ä¹ˆåœ¨è¯¥æ–¹æ³•æ²¡æœ‰æ‰§è¡Œå®Œæˆä¹‹å‰æˆ–è€…æŠ›å‡ºå¼‚å¸¸ä¹‹å‰ï¼Œå…¶ä»–çº¿ç¨‹æ˜¯æ— æ³•è®¿é—®è¯¥å¯¹è±¡çš„ä»»ä½•synchronizedæ–¹æ³•ã€‚</li>\n<li>è¢«synchronizedä¿æŠ¤çš„å˜é‡åº”è¯¥æ˜¯privateä¿®é¥°çš„ã€‚</li>\n<li>å¦‚æœæŸä¸ªsynchronizedæ–¹æ³•è¢«staticä¿®é¥°çš„ï¼Œé‚£ä¹ˆå½“çº¿ç¨‹è®¿é—®è¯¥æ–¹æ³•æ—¶å€™ï¼Œå®ƒé”å®šå¹¶ä¸æ˜¯å¯¹è±¡ï¼ˆå®ä¾‹ï¼‰ï¼Œè€Œæ˜¯synchronizedæ–¹æ³•æ‰€ä»¥åœ¨å¯¹è±¡æ‰€å¯¹åº”çš„Classå¯¹è±¡ï¼Œå› ä¸ºJavaä¸­æ— è®ºä¸€ä¸ªç±»æœ‰å¤šå°‘ä¸ªå¯¹è±¡ï¼Œè¿™äº›å¯¹è±¡éƒ½ä¼šå¯¹åº”å”¯ä¸€ä¸€ä¸ªClasså¯¹è±¡ï¼Œå› æ­¤å½“çº¿ç¨‹åˆ†åˆ«è®¿é—®ä¸€ä¸ªç±»çš„ä¸¤ä¸ªå¯¹è±¡çš„ä¸¤ä¸ªstatic synchronizedæ–¹æ³•æ—¶ï¼Œä»–ä»¬çš„æ‰§è¡Œé¡ºåºæ˜¯é¡ºåºçš„ï¼Œä¹Ÿå°±æ˜¯è¯´ä¸€ä¸ªçº¿ç¨‹å…ˆæ‰§è¡Œæ–¹æ³•ï¼Œæ‰§è¡Œå®Œæ¯•åå¦ä¸€ä¸ªçº¿ç¨‹æ‰å¼€å§‹æ‰§è¡Œã€‚</li>\n<li>synchronizedæ–¹æ³•æ˜¯ä¸€ä¸ªç²—ç²’åº¦çš„æ§åˆ¶ï¼ŒæŸä¸€ä¸ªæ—¶åˆ»åªèƒ½æœ‰ä¸€ä¸ªæ–¹æ³•æ‰§è¡Œsynchronizedæ–¹æ³•ï¼›sysnchronizedå—åˆ™æ˜¯ä¸€ç§ç»†ç²’åº¦çš„æ§åˆ¶æ–¹ï¼›åªä¼šå°†ä»£ç å—åŒæ­¥ã€‚ä½äºæ–¹æ³•å†…ã€synchronizedå—ä¹‹å¤–çš„ä»£ç æ˜¯å¯ä»¥è¢«å¤šä¸ªçº¿ç¨‹åŒæ—¶è®¿é—®çš„ã€‚</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<h4 id=\"çº¿ç¨‹å¦‚ä½•å·¥ä½œçš„ï¼Ÿ\"><a href=\"#çº¿ç¨‹å¦‚ä½•å·¥ä½œçš„ï¼Ÿ\" class=\"headerlink\" title=\"çº¿ç¨‹å¦‚ä½•å·¥ä½œçš„ï¼Ÿ\"></a>çº¿ç¨‹å¦‚ä½•å·¥ä½œçš„ï¼Ÿ</h4><ul>\n<li><p>çº¿ç¨‹çš„çŠ¶æ€åœ¨æšä¸¾çš„æ–¹å¼è¢«å®šä¹‰åœ¨ Thread çš„æºç ä¸­ï¼Œå®ƒæ€»å…±åŒ…å«ä»¥ä¸‹ 6 ä¸ªçŠ¶æ€ï¼š</p>\n<ul>\n<li>NEWï¼Œæ–°å»ºçŠ¶æ€ï¼Œçº¿ç¨‹è¢«åˆ›å»ºå‡ºæ¥ï¼Œä½†å°šæœªå¯åŠ¨æ—¶çš„çº¿ç¨‹çŠ¶æ€ï¼›</li>\n<li>RUNNABLEï¼Œå°±ç»ªçŠ¶æ€ï¼Œè¡¨ç¤ºå¯ä»¥è¿è¡Œçš„çº¿ç¨‹çŠ¶æ€ï¼Œå®ƒå¯èƒ½æ­£åœ¨è¿è¡Œï¼Œæˆ–è€…æ˜¯åœ¨æ’é˜Ÿç­‰å¾…æ“ä½œç³»ç»Ÿç»™å®ƒåˆ†é… CPU èµ„æºï¼›</li>\n<li>BLOCKEDï¼Œé˜»å¡ç­‰å¾…é”çš„çº¿ç¨‹çŠ¶æ€ï¼Œè¡¨ç¤ºå¤„äºé˜»å¡çŠ¶æ€çš„çº¿ç¨‹æ­£åœ¨ç­‰å¾…ç›‘è§†å™¨é”ï¼Œæ¯”å¦‚ç­‰å¾…æ‰§è¡Œ synchronized ä»£ç å—æˆ–è€…ä½¿ç”¨ synchronized æ ‡è®°çš„æ–¹æ³•ï¼›</li>\n<li>WAITINGï¼Œç­‰å¾…çŠ¶æ€ï¼Œä¸€ä¸ªå¤„äºç­‰å¾…çŠ¶æ€çš„çº¿ç¨‹æ­£åœ¨ç­‰å¾…å¦ä¸€ä¸ªçº¿ç¨‹æ‰§è¡ŒæŸä¸ªç‰¹å®šçš„åŠ¨ä½œï¼Œæ¯”å¦‚ï¼Œä¸€ä¸ªçº¿ç¨‹è°ƒç”¨äº† Object.wait() æ–¹æ³•ï¼Œé‚£å®ƒå°±åœ¨ç­‰å¾…å¦ä¸€ä¸ªçº¿ç¨‹è°ƒç”¨ Object.notify() æˆ– Object.notifyAll() æ–¹æ³•ï¼›</li>\n<li>TIMED_WAITINGï¼Œè®¡æ—¶ç­‰å¾…çŠ¶æ€ï¼Œå’Œç­‰å¾…çŠ¶æ€ï¼ˆWAITINGï¼‰ç±»ä¼¼ï¼Œå®ƒåªæ˜¯å¤šäº†è¶…æ—¶æ—¶é—´ï¼Œæ¯”å¦‚è°ƒç”¨äº†æœ‰è¶…æ—¶æ—¶é—´è®¾ç½®çš„æ–¹æ³• Object.wait(long timeout) å’Œ Thread.join(long timeout) ç­‰è¿™äº›æ–¹æ³•æ—¶ï¼Œå®ƒæ‰ä¼šè¿›å…¥æ­¤çŠ¶æ€ï¼›</li>\n<li>TERMINATEDï¼Œç»ˆæ­¢çŠ¶æ€ï¼Œè¡¨ç¤ºçº¿ç¨‹å·²ç»æ‰§è¡Œå®Œæˆã€‚</li>\n</ul>\n</li>\n</ul>\n<h4 id=\"çº¿ç¨‹çš„æ‰§è¡Œæµç¨‹\"><a href=\"#çº¿ç¨‹çš„æ‰§è¡Œæµç¨‹\" class=\"headerlink\" title=\"çº¿ç¨‹çš„æ‰§è¡Œæµç¨‹\"></a>çº¿ç¨‹çš„æ‰§è¡Œæµç¨‹</h4><ul>\n<li>é¦–å…ˆå…ˆè¦åˆ›å»ºçº¿ç¨‹å¹¶æŒ‡å®šçº¿ç¨‹éœ€è¦æ‰§è¡Œçš„ä¸šåŠ¡æ–¹æ³•ï¼Œç„¶åå†è°ƒç”¨çº¿ç¨‹çš„ start() æ–¹æ³•ï¼Œæ­¤æ—¶çº¿ç¨‹å°±ä» NEWï¼ˆæ–°å»ºï¼‰çŠ¶æ€å˜æˆäº† RUNNABLEï¼ˆå°±ç»ªï¼‰çŠ¶æ€ï¼Œæ­¤æ—¶çº¿ç¨‹ä¼šåˆ¤æ–­è¦æ‰§è¡Œçš„æ–¹æ³•ä¸­æœ‰æ²¡æœ‰ synchronized åŒæ­¥ä»£ç å—ï¼Œå¦‚æœæœ‰å¹¶ä¸”å…¶ä»–çº¿ç¨‹ä¹Ÿåœ¨ä½¿ç”¨æ­¤é”ï¼Œé‚£ä¹ˆçº¿ç¨‹å°±ä¼šå˜ä¸º BLOCKEDï¼ˆé˜»å¡ç­‰å¾…ï¼‰çŠ¶æ€ï¼Œå½“å…¶ä»–çº¿ç¨‹ä½¿ç”¨å®Œæ­¤é”ä¹‹åï¼Œçº¿ç¨‹ä¼šç»§ç»­æ‰§è¡Œå‰©ä½™çš„æ–¹æ³•ã€‚å½“é‡åˆ° Object.wait() æˆ– Thread.join() æ–¹æ³•æ—¶ï¼Œçº¿ç¨‹ä¼šå˜ä¸º WAITINGï¼ˆç­‰å¾…çŠ¶æ€ï¼‰çŠ¶æ€ï¼Œå¦‚æœæ˜¯å¸¦äº†è¶…æ—¶æ—¶é—´çš„ç­‰å¾…æ–¹æ³•ï¼Œé‚£ä¹ˆçº¿ç¨‹ä¼šè¿›å…¥ TIMED_WAITINGï¼ˆè®¡æ—¶ç­‰å¾…ï¼‰çŠ¶æ€ï¼Œå½“æœ‰å…¶ä»–çº¿ç¨‹æ‰§è¡Œäº† notify() æˆ– notifyAll() æ–¹æ³•ä¹‹åï¼Œçº¿ç¨‹è¢«å”¤é†’ç»§ç»­æ‰§è¡Œå‰©ä½™çš„ä¸šåŠ¡æ–¹æ³•ï¼Œç›´åˆ°æ–¹æ³•æ‰§è¡Œå®Œæˆä¸ºæ­¢ï¼Œæ­¤æ—¶æ•´ä¸ªçº¿ç¨‹çš„æµç¨‹å°±æ‰§è¡Œå®Œäº†</li>\n</ul>\n<h4 id=\"Javaå®ç°å¤šçº¿ç¨‹çš„æ–¹å¼\"><a href=\"#Javaå®ç°å¤šçº¿ç¨‹çš„æ–¹å¼\" class=\"headerlink\" title=\"Javaå®ç°å¤šçº¿ç¨‹çš„æ–¹å¼\"></a>Javaå®ç°å¤šçº¿ç¨‹çš„æ–¹å¼</h4><p>æœ‰ä¸‰ç§ä½¿ç”¨çº¿ç¨‹çš„æ–¹æ³•ï¼š</p>\n<ul>\n<li>å®ç° Runnable æ¥å£ï¼›</li>\n<li>å®ç° Callable æ¥å£ï¼›</li>\n<li>ç»§æ‰¿ Thread ç±»ã€‚</li>\n</ul>\n<p>å®ç° Runnable å’Œ Callable æ¥å£çš„ç±»åªèƒ½å½“åšä¸€ä¸ªå¯ä»¥åœ¨çº¿ç¨‹ä¸­è¿è¡Œçš„ä»»åŠ¡ï¼Œä¸æ˜¯çœŸæ­£æ„ä¹‰ä¸Šçš„çº¿ç¨‹ï¼Œå› æ­¤æœ€åè¿˜éœ€è¦é€šè¿‡ Thread æ¥è°ƒç”¨ã€‚å¯ä»¥è¯´ä»»åŠ¡æ˜¯é€šè¿‡çº¿ç¨‹é©±åŠ¨ä»è€Œæ‰§è¡Œçš„ã€‚</p>\n<h5 id=\"1-å®ç°-Runnable-æ¥å£\"><a href=\"#1-å®ç°-Runnable-æ¥å£\" class=\"headerlink\" title=\"1.å®ç° Runnable æ¥å£\"></a>1.å®ç° Runnable æ¥å£</h5><p>éœ€è¦å®ç° run() æ–¹æ³•ã€‚</p>\n<p>é€šè¿‡ Thread è°ƒç”¨ start() æ–¹æ³•æ¥å¯åŠ¨çº¿ç¨‹ã€‚</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">MyRunnable</span> <span class=\"keyword\">implements</span> <span class=\"title\">Runnable</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">run</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"comment\">// ...</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String[] args)</span> </span>&#123;</span><br><span class=\"line\">    MyRunnable instance = <span class=\"keyword\">new</span> MyRunnable();</span><br><span class=\"line\">    Thread thread = <span class=\"keyword\">new</span> Thread(instance);</span><br><span class=\"line\">    thread.start();</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"2-å®ç°-Callable-æ¥å£\"><a href=\"#2-å®ç°-Callable-æ¥å£\" class=\"headerlink\" title=\"2.å®ç° Callable æ¥å£\"></a>2.å®ç° Callable æ¥å£</h5><p>ä¸ Runnable ç›¸æ¯”ï¼ŒCallable å¯ä»¥æœ‰è¿”å›å€¼ï¼Œè¿”å›å€¼é€šè¿‡ FutureTask è¿›è¡Œå°è£…ã€‚</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">MyCallable</span> <span class=\"keyword\">implements</span> <span class=\"title\">Callable</span>&lt;<span class=\"title\">Integer</span>&gt; </span>&#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> Integer <span class=\"title\">call</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"number\">123</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String[] args)</span> <span class=\"keyword\">throws</span> ExecutionException, InterruptedException </span>&#123;</span><br><span class=\"line\">    MyCallable mc = <span class=\"keyword\">new</span> MyCallable();</span><br><span class=\"line\">    FutureTask&lt;Integer&gt; ft = <span class=\"keyword\">new</span> FutureTask&lt;&gt;(mc);</span><br><span class=\"line\">    Thread thread = <span class=\"keyword\">new</span> Thread(ft);</span><br><span class=\"line\">    thread.start();</span><br><span class=\"line\">    System.out.println(ft.get());</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"3-ç»§æ‰¿-Thread-ç±»\"><a href=\"#3-ç»§æ‰¿-Thread-ç±»\" class=\"headerlink\" title=\"3.ç»§æ‰¿ Thread ç±»\"></a>3.ç»§æ‰¿ Thread ç±»</h5><p>åŒæ ·ä¹Ÿæ˜¯éœ€è¦å®ç° run() æ–¹æ³•ï¼Œå› ä¸º Thread ç±»ä¹Ÿå®ç°äº† Runable æ¥å£ã€‚</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">MyThread</span> <span class=\"keyword\">extends</span> <span class=\"title\">Thread</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">run</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"comment\">// ...</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String[] args)</span> </span>&#123;</span><br><span class=\"line\">    MyThread mt = <span class=\"keyword\">new</span> MyThread();</span><br><span class=\"line\">    mt.start();</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"4-Runnable-VS-Thread\"><a href=\"#4-Runnable-VS-Thread\" class=\"headerlink\" title=\"4.Runnable VS  Thread\"></a>4.Runnable VS  Thread</h5><p>å®ç°æ¥å£ä¼šæ›´å¥½ä¸€äº›ï¼Œå› ä¸ºï¼š</p>\n<ul>\n<li>Java ä¸æ”¯æŒå¤šé‡ç»§æ‰¿ï¼Œå› æ­¤ç»§æ‰¿äº† Thread ç±»å°±æ— æ³•ç»§æ‰¿å…¶å®ƒç±»ï¼Œä½†æ˜¯å¯ä»¥å®ç°å¤šä¸ªæ¥å£ï¼›</li>\n<li>ç±»å¯èƒ½åªè¦æ±‚å¯æ‰§è¡Œå°±è¡Œï¼Œç»§æ‰¿æ•´ä¸ª Thread ç±»å¼€é”€è¿‡å¤§ã€‚</li>\n</ul>\n<h5 id=\"5-ä¸‰ç§æ–¹å¼çš„åŒºåˆ«\"><a href=\"#5-ä¸‰ç§æ–¹å¼çš„åŒºåˆ«\" class=\"headerlink\" title=\"5.ä¸‰ç§æ–¹å¼çš„åŒºåˆ«\"></a>5.ä¸‰ç§æ–¹å¼çš„åŒºåˆ«</h5><ul>\n<li>å®ç° Runnable æ¥å£å¯ä»¥é¿å… Java å•ç»§æ‰¿ç‰¹æ€§è€Œå¸¦æ¥çš„å±€é™ï¼›å¢å¼ºç¨‹åºçš„å¥å£®æ€§ï¼Œä»£ç èƒ½å¤Ÿè¢«å¤šä¸ªçº¿ç¨‹å…±äº«ï¼Œä»£ç ä¸æ•°æ®æ˜¯ç‹¬ç«‹çš„ï¼›é€‚åˆå¤šä¸ªç›¸åŒç¨‹åºä»£ç çš„çº¿ç¨‹åŒºå¤„ç†åŒä¸€èµ„æºçš„æƒ…å†µã€‚</li>\n<li>ç»§æ‰¿ Thread ç±»å’Œå®ç° Runnable æ–¹æ³•å¯åŠ¨çº¿ç¨‹éƒ½æ˜¯ä½¿ç”¨ start() æ–¹æ³•ï¼Œç„¶å JVM è™šæ‹Ÿæœºå°†æ­¤çº¿ç¨‹æ”¾åˆ°å°±ç»ªé˜Ÿåˆ—ä¸­ï¼Œå¦‚æœæœ‰å¤„ç†æœºå¯ç”¨ï¼Œåˆ™æ‰§è¡Œ run() æ–¹æ³•ã€‚</li>\n<li>å®ç° Callable æ¥å£è¦å®ç° call() æ–¹æ³•ï¼Œå¹¶ä¸”çº¿ç¨‹æ‰§è¡Œå®Œæ¯•åä¼šæœ‰è¿”å›å€¼ã€‚å…¶ä»–çš„ä¸¤ç§éƒ½æ˜¯é‡å†™ run() æ–¹æ³•ï¼Œæ²¡æœ‰è¿”å›å€¼ã€‚</li>\n</ul>\n<h4 id=\"BLOCKEDï¼ˆé˜»å¡ç­‰å¾…ï¼‰å’Œ-WAITINGï¼ˆç­‰å¾…ï¼‰æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ\"><a href=\"#BLOCKEDï¼ˆé˜»å¡ç­‰å¾…ï¼‰å’Œ-WAITINGï¼ˆç­‰å¾…ï¼‰æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ\" class=\"headerlink\" title=\"BLOCKEDï¼ˆé˜»å¡ç­‰å¾…ï¼‰å’Œ WAITINGï¼ˆç­‰å¾…ï¼‰æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ\"></a>BLOCKEDï¼ˆé˜»å¡ç­‰å¾…ï¼‰å’Œ WAITINGï¼ˆç­‰å¾…ï¼‰æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</h4><ul>\n<li>è™½ç„¶ BLOCKED å’Œ WAITING éƒ½æœ‰ç­‰å¾…çš„å«ä¹‰ï¼Œä½†äºŒè€…æœ‰ç€æœ¬è´¨çš„åŒºåˆ«ï¼Œé¦–å…ˆå®ƒä»¬çŠ¶æ€å½¢æˆçš„è°ƒç”¨æ–¹æ³•ä¸åŒï¼Œå…¶æ¬¡ BLOCKED å¯ä»¥ç†è§£ä¸ºå½“å‰çº¿ç¨‹è¿˜å¤„äºæ´»è·ƒçŠ¶æ€ï¼Œåªæ˜¯åœ¨é˜»å¡ç­‰å¾…å…¶ä»–çº¿ç¨‹ä½¿ç”¨å®ŒæŸä¸ªé”èµ„æºï¼›è€Œ WAITING åˆ™æ˜¯å› ä¸ºè‡ªèº«è°ƒç”¨äº† Object.wait() æˆ–ç€æ˜¯ Thread.join() åˆæˆ–è€…æ˜¯ LockSupport.park() è€Œè¿›å…¥ç­‰å¾…çŠ¶æ€ï¼Œåªèƒ½ç­‰å¾…å…¶ä»–çº¿ç¨‹æ‰§è¡ŒæŸä¸ªç‰¹å®šçš„åŠ¨ä½œæ‰èƒ½è¢«ç»§ç»­å”¤é†’ï¼Œæ¯”å¦‚å½“çº¿ç¨‹å› ä¸ºè°ƒç”¨äº† Object.wait() è€Œè¿›å…¥ WAITING çŠ¶æ€ä¹‹åï¼Œåˆ™éœ€è¦ç­‰å¾…å¦ä¸€ä¸ªçº¿ç¨‹æ‰§è¡Œ Object.notify() æˆ– Object.notifyAll() æ‰èƒ½è¢«å”¤é†’ã€‚</li>\n</ul>\n<h4 id=\"start-æ–¹æ³•å’Œ-run-æ–¹æ³•æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ\"><a href=\"#start-æ–¹æ³•å’Œ-run-æ–¹æ³•æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ\" class=\"headerlink\" title=\"start() æ–¹æ³•å’Œ run() æ–¹æ³•æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ\"></a>start() æ–¹æ³•å’Œ run() æ–¹æ³•æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</h4><blockquote>\n<p> Thread æºç æ¥çœ‹ï¼Œstart() æ–¹æ³•å±äº Thread è‡ªèº«çš„æ–¹æ³•ï¼Œå¹¶ä¸”ä½¿ç”¨äº† synchronized æ¥ä¿è¯çº¿ç¨‹å®‰å…¨ï¼Œæºç å¦‚ä¸‹</p>\n</blockquote>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span>Â <span class=\"keyword\">synchronized</span>Â <span class=\"keyword\">void</span>Â <span class=\"title\">start</span><span class=\"params\">()</span>Â </span>&#123;</span><br><span class=\"line\">Â Â Â Â <span class=\"comment\">//Â çŠ¶æ€éªŒè¯ï¼Œä¸ç­‰äºÂ NEWÂ çš„çŠ¶æ€ä¼šæŠ›å‡ºå¼‚å¸¸</span></span><br><span class=\"line\">Â Â Â Â <span class=\"keyword\">if</span>Â (threadStatusÂ !=Â <span class=\"number\">0</span>)</span><br><span class=\"line\">Â Â Â Â Â Â Â Â <span class=\"keyword\">throw</span>Â <span class=\"keyword\">new</span>Â IllegalThreadStateException();</span><br><span class=\"line\">Â Â Â Â <span class=\"comment\">//Â é€šçŸ¥çº¿ç¨‹ç»„ï¼Œæ­¤çº¿ç¨‹å³å°†å¯åŠ¨</span></span><br><span class=\"line\"></span><br><span class=\"line\">Â Â Â Â group.add(<span class=\"keyword\">this</span>);</span><br><span class=\"line\">Â Â Â Â <span class=\"keyword\">boolean</span>Â startedÂ =Â <span class=\"keyword\">false</span>;</span><br><span class=\"line\">Â Â Â Â <span class=\"keyword\">try</span>Â &#123;</span><br><span class=\"line\">Â Â Â Â Â Â Â Â start0();</span><br><span class=\"line\">Â Â Â Â Â Â Â Â startedÂ =Â <span class=\"keyword\">true</span>;</span><br><span class=\"line\">Â Â Â Â &#125;Â <span class=\"keyword\">finally</span>Â &#123;</span><br><span class=\"line\">Â Â Â Â Â Â Â Â <span class=\"keyword\">try</span>Â &#123;</span><br><span class=\"line\">Â Â Â Â Â Â Â Â Â Â Â Â <span class=\"keyword\">if</span>Â (!started)Â &#123;</span><br><span class=\"line\">Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â group.threadStartFailed(<span class=\"keyword\">this</span>);</span><br><span class=\"line\">Â Â Â Â Â Â Â Â Â Â Â Â &#125;</span><br><span class=\"line\">Â Â Â Â Â Â Â Â &#125;Â <span class=\"keyword\">catch</span>Â (ThrowableÂ ignore)Â &#123;</span><br><span class=\"line\">Â Â Â Â Â Â Â Â Â Â Â Â <span class=\"comment\">//Â ä¸å¤„ç†ä»»ä½•å¼‚å¸¸ï¼Œå¦‚æœÂ start0Â æŠ›å‡ºå¼‚å¸¸ï¼Œåˆ™å®ƒå°†è¢«ä¼ é€’åˆ°è°ƒç”¨å †æ ˆä¸Š</span></span><br><span class=\"line\">Â Â Â Â Â Â Â Â &#125;</span><br><span class=\"line\">Â Â Â Â &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>run() æ–¹æ³•ä¸º Runnable çš„æŠ½è±¡æ–¹æ³•ï¼Œå¿…é¡»ç”±è°ƒç”¨ç±»é‡å†™æ­¤æ–¹æ³•ï¼Œé‡å†™çš„ run() æ–¹æ³•å…¶å®å°±æ˜¯æ­¤çº¿ç¨‹è¦æ‰§è¡Œçš„ä¸šåŠ¡æ–¹æ³•ï¼Œæºç å¦‚ä¸‹ï¼š</p>\n</blockquote>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span>Â <span class=\"class\"><span class=\"keyword\">class</span>Â <span class=\"title\">Thread</span>Â <span class=\"keyword\">implements</span>Â <span class=\"title\">Runnable</span>Â </span>&#123;</span><br><span class=\"line\">Â <span class=\"comment\">//Â å¿½ç•¥å…¶ä»–æ–¹æ³•......</span></span><br><span class=\"line\">Â Â <span class=\"keyword\">private</span>Â RunnableÂ target;</span><br><span class=\"line\">Â Â <span class=\"meta\">@Override</span></span><br><span class=\"line\">Â Â <span class=\"function\"><span class=\"keyword\">public</span>Â <span class=\"keyword\">void</span>Â <span class=\"title\">run</span><span class=\"params\">()</span>Â </span>&#123;</span><br><span class=\"line\">Â Â Â Â Â Â <span class=\"keyword\">if</span>Â (targetÂ !=Â <span class=\"keyword\">null</span>)Â &#123;</span><br><span class=\"line\">Â Â Â Â Â Â Â Â Â Â target.run();</span><br><span class=\"line\">Â Â Â Â Â Â &#125;</span><br><span class=\"line\">Â Â &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"meta\">@FunctionalInterface</span></span><br><span class=\"line\"><span class=\"keyword\">public</span>Â <span class=\"class\"><span class=\"keyword\">interface</span>Â <span class=\"title\">Runnable</span>Â </span>&#123;</span><br><span class=\"line\">Â Â Â Â <span class=\"function\"><span class=\"keyword\">public</span>Â <span class=\"keyword\">abstract</span>Â <span class=\"keyword\">void</span>Â <span class=\"title\">run</span><span class=\"params\">()</span></span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>ä»æ‰§è¡Œçš„æ•ˆæœæ¥è¯´ï¼Œstart() æ–¹æ³•å¯ä»¥å¼€å¯å¤šçº¿ç¨‹ï¼Œè®©çº¿ç¨‹ä» NEW çŠ¶æ€è½¬æ¢æˆ RUNNABLE çŠ¶æ€ï¼Œè€Œ run() æ–¹æ³•åªæ˜¯ä¸€ä¸ªæ™®é€šçš„æ–¹æ³•ã€‚</p>\n<p>å…¶æ¬¡ï¼Œå®ƒä»¬å¯è°ƒç”¨çš„æ¬¡æ•°ä¸åŒï¼Œstart() æ–¹æ³•ä¸èƒ½è¢«å¤šæ¬¡è°ƒç”¨ï¼Œå¦åˆ™ä¼šæŠ›å‡º java.lang.IllegalStateExceptionï¼›è€Œ run() æ–¹æ³•å¯ä»¥è¿›è¡Œå¤šæ¬¡è°ƒç”¨ï¼Œå› ä¸ºå®ƒåªæ˜¯ä¸€ä¸ªæ™®é€šçš„æ–¹æ³•è€Œå·²ã€‚</p>\n</blockquote>\n<h4 id=\"çº¿ç¨‹çš„ä¼˜å…ˆçº§æœ‰ä»€ä¹ˆç”¨ï¼Ÿè¯¥å¦‚ä½•è®¾ç½®ï¼Ÿ\"><a href=\"#çº¿ç¨‹çš„ä¼˜å…ˆçº§æœ‰ä»€ä¹ˆç”¨ï¼Ÿè¯¥å¦‚ä½•è®¾ç½®ï¼Ÿ\" class=\"headerlink\" title=\"çº¿ç¨‹çš„ä¼˜å…ˆçº§æœ‰ä»€ä¹ˆç”¨ï¼Ÿè¯¥å¦‚ä½•è®¾ç½®ï¼Ÿ\"></a>çº¿ç¨‹çš„ä¼˜å…ˆçº§æœ‰ä»€ä¹ˆç”¨ï¼Ÿè¯¥å¦‚ä½•è®¾ç½®ï¼Ÿ</h4><blockquote>\n<p>åœ¨ Thread æºç ä¸­å’Œçº¿ç¨‹ä¼˜å…ˆçº§ç›¸å…³çš„å±æ€§æœ‰ 3 ä¸ªï¼š</p>\n</blockquote>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//Â çº¿ç¨‹å¯ä»¥æ‹¥æœ‰çš„æœ€å°ä¼˜å…ˆçº§</span></span><br><span class=\"line\"><span class=\"keyword\">public</span>Â <span class=\"keyword\">final</span>Â <span class=\"keyword\">static</span>Â <span class=\"keyword\">int</span>Â MIN_PRIORITYÂ =Â <span class=\"number\">1</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//Â çº¿ç¨‹é»˜è®¤ä¼˜å…ˆçº§</span></span><br><span class=\"line\"><span class=\"keyword\">public</span>Â <span class=\"keyword\">final</span>Â <span class=\"keyword\">static</span>Â <span class=\"keyword\">int</span>Â NORM_PRIORITYÂ =Â <span class=\"number\">5</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//Â çº¿ç¨‹å¯ä»¥æ‹¥æœ‰çš„æœ€å¤§ä¼˜å…ˆçº§</span></span><br><span class=\"line\"><span class=\"keyword\">public</span>Â <span class=\"keyword\">final</span>Â <span class=\"keyword\">static</span>Â <span class=\"keyword\">int</span>Â MAX_PRIORITYÂ =Â <span class=\"number\">10</span></span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>çº¿ç¨‹çš„ä¼˜å…ˆçº§å¯ä»¥ç†è§£ä¸ºçº¿ç¨‹æŠ¢å  CPU æ—¶é—´ç‰‡çš„æ¦‚ç‡ï¼Œä¼˜å…ˆçº§è¶Šé«˜çš„çº¿ç¨‹ä¼˜å…ˆæ‰§è¡Œçš„æ¦‚ç‡å°±è¶Šå¤§ï¼Œä½†å¹¶ä¸èƒ½ä¿è¯ä¼˜å…ˆçº§é«˜çš„çº¿ç¨‹ä¸€å®šå…ˆæ‰§è¡Œã€‚</p>\n<p>åœ¨ç¨‹åºä¸­æˆ‘ä»¬å¯ä»¥é€šè¿‡ Thread.setPriority() æ¥è®¾ç½®ä¼˜å…ˆçº§ï¼ŒsetPriority() æºç å¦‚ä¸‹ï¼š</p>\n</blockquote>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span>Â <span class=\"keyword\">final</span>Â <span class=\"keyword\">void</span>Â <span class=\"title\">setPriority</span><span class=\"params\">(<span class=\"keyword\">int</span>Â newPriority)</span>Â </span>&#123;</span><br><span class=\"line\">Â Â Â Â ThreadGroupÂ g;</span><br><span class=\"line\">Â Â Â Â checkAccess();</span><br><span class=\"line\">Â Â Â Â <span class=\"comment\">//Â å…ˆéªŒè¯ä¼˜å…ˆçº§çš„åˆç†æ€§</span></span><br><span class=\"line\">Â Â Â Â <span class=\"keyword\">if</span>Â (newPriorityÂ &gt;Â MAX_PRIORITYÂ ||Â newPriorityÂ &lt;Â MIN_PRIORITY)Â &#123;</span><br><span class=\"line\">Â Â Â Â Â Â Â Â <span class=\"keyword\">throw</span>Â <span class=\"keyword\">new</span>Â IllegalArgumentException();</span><br><span class=\"line\">Â Â Â Â &#125;</span><br><span class=\"line\">Â Â Â Â <span class=\"keyword\">if</span>((gÂ =Â getThreadGroup())Â !=Â <span class=\"keyword\">null</span>)Â &#123;</span><br><span class=\"line\">Â Â Â Â Â Â Â Â <span class=\"comment\">//Â ä¼˜å…ˆçº§å¦‚æœè¶…è¿‡çº¿ç¨‹ç»„çš„æœ€é«˜ä¼˜å…ˆçº§ï¼Œåˆ™æŠŠä¼˜å…ˆçº§è®¾ç½®ä¸ºçº¿ç¨‹ç»„çš„æœ€é«˜ä¼˜å…ˆçº§</span></span><br><span class=\"line\">Â Â Â Â Â Â Â Â <span class=\"keyword\">if</span>Â (newPriorityÂ &gt;Â g.getMaxPriority())Â &#123;</span><br><span class=\"line\">Â Â Â Â Â Â Â Â Â Â Â Â newPriorityÂ =Â g.getMaxPriority();</span><br><span class=\"line\">Â Â Â Â Â Â Â Â &#125;</span><br><span class=\"line\">Â Â Â Â Â Â Â Â setPriority0(priorityÂ =Â newPriority);</span><br><span class=\"line\">Â Â Â Â &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"sleep-å’Œwait-çš„åŒºåˆ«\"><a href=\"#sleep-å’Œwait-çš„åŒºåˆ«\" class=\"headerlink\" title=\"sleep() å’Œwait()çš„åŒºåˆ«\"></a>sleep() å’Œwait()çš„åŒºåˆ«</h4><ul>\n<li><p>sleepæ˜¯Threadçš„æˆå‘˜æ–¹æ³•ï¼Œç¡çœ æ—¶ä¿æŒå¯¹è±¡é”ï¼Œä»ç„¶å æœ‰è¯¥é”ã€‚</p>\n<ul>\n<li>sleep()ä½¿å½“å‰çº¿ç¨‹è¿›å…¥åœæ»çŠ¶æ€ï¼ˆé˜»å¡å½“å‰çº¿ç¨‹ï¼‰ï¼Œè®©å‡ºCUPçš„ä½¿ç”¨ã€ç›®çš„æ˜¯ä¸è®©å½“å‰çº¿ç¨‹ç‹¬è‡ªéœ¸å è¯¥è¿›ç¨‹æ‰€è·çš„CPUèµ„æºï¼Œä»¥ç•™ä¸€å®šæ—¶é—´ç»™å…¶ä»–çº¿ç¨‹æ‰§è¡Œçš„æœºä¼š;sleep()æ˜¯Threadç±»çš„Static(é™æ€)çš„æ–¹æ³•ï¼›å› æ­¤ä»–ä¸èƒ½æ”¹å˜å¯¹è±¡çš„æœºé”ï¼Œæ‰€ä»¥å½“åœ¨ä¸€ä¸ªSynchronizedå—ä¸­è°ƒç”¨Sleep()æ–¹æ³•æ˜¯ï¼Œçº¿ç¨‹è™½ç„¶ä¼‘çœ äº†ï¼Œä½†æ˜¯å¯¹è±¡çš„æœºé”å¹¶æœ¨æœ‰è¢«é‡Šæ”¾ï¼Œå…¶ä»–çº¿ç¨‹æ— æ³•è®¿é—®è¿™ä¸ªå¯¹è±¡ï¼ˆå³ä½¿ç¡ç€ä¹ŸæŒæœ‰å¯¹è±¡é”ï¼‰ã€‚åœ¨sleep()ä¼‘çœ æ—¶é—´æœŸæ»¡åï¼Œè¯¥çº¿ç¨‹ä¸ä¸€å®šä¼šç«‹å³æ‰§è¡Œï¼Œè¿™æ˜¯å› ä¸ºå…¶å®ƒçº¿ç¨‹å¯èƒ½æ­£åœ¨è¿è¡Œè€Œä¸”æ²¡æœ‰è¢«è°ƒåº¦ä¸ºæ”¾å¼ƒæ‰§è¡Œï¼Œé™¤éæ­¤çº¿ç¨‹å…·æœ‰æ›´é«˜çš„ä¼˜å…ˆçº§ã€‚ </li>\n</ul>\n</li>\n<li><p>waitæ˜¯Objectçš„æˆå‘˜æ–¹æ³•ç¡çœ æ—¶ï¼Œé‡Šæ”¾å¯¹è±¡é”ã€‚</p>\n<ul>\n<li>wait()æ–¹æ³•æ˜¯Objectç±»é‡Œçš„æ–¹æ³•ï¼›å½“ä¸€ä¸ªçº¿ç¨‹æ‰§è¡Œåˆ°wait()æ–¹æ³•æ—¶ï¼Œå®ƒå°±è¿›å…¥åˆ°ä¸€ä¸ªå’Œè¯¥å¯¹è±¡ç›¸å…³çš„ç­‰å¾…æ± ä¸­ï¼ŒåŒæ—¶å¤±å»ï¼ˆé‡Šæ”¾ï¼‰äº†å¯¹è±¡çš„æœºé”ï¼ˆæš‚æ—¶å¤±å»æœºé”ï¼Œwait(long timeout)è¶…æ—¶æ—¶é—´åˆ°åè¿˜éœ€è¦è¿”è¿˜å¯¹è±¡é”ï¼‰ï¼›å…¶ä»–çº¿ç¨‹å¯ä»¥è®¿é—®ï¼›wait()ä½¿ç”¨notifyæˆ–è€…notifyAlllæˆ–è€…æŒ‡å®šç¡çœ æ—¶é—´æ¥å”¤é†’å½“å‰ç­‰å¾…æ± ä¸­çš„çº¿ç¨‹ã€‚wiat()å¿…é¡»æ”¾åœ¨synchronized blockä¸­ï¼Œå¦åˆ™ä¼šåœ¨program runtimeæ—¶æ‰”å‡ºâ€java.lang.IllegalMonitorStateExceptionâ€œå¼‚å¸¸ã€‚</li>\n</ul>\n</li>\n<li><p>ä¸¤è€…æœ€ä¸»è¦çš„åŒºåˆ«åœ¨äºï¼š<strong>sleep</strong> â½…æ³•æ²¡æœ‰é‡Šæ”¾é”ï¼Œâ½½ <strong>wait</strong> â½…æ³•é‡Šæ”¾äº†é” ã€‚</p>\n</li>\n<li><p>wait é€šå¸¸è¢«â½¤äºçº¿ç¨‹é—´äº¤äº’/é€šä¿¡ï¼Œsleep é€šå¸¸è¢«â½¤äºæš‚åœæ‰§â¾ã€‚</p>\n</li>\n<li><p>wait() â½…æ³•è¢«è°ƒâ½¤åï¼Œçº¿ç¨‹ä¸ä¼šâ¾ƒåŠ¨è‹é†’ï¼Œéœ€è¦åˆ«çš„çº¿ç¨‹è°ƒâ½¤åŒâ¼€ä¸ªå¯¹è±¡ä¸Šçš„ notify() æˆ–è€…notifyAll() â½…æ³•ã€‚sleep() â½…æ³•æ‰§â¾å®Œæˆåï¼Œçº¿ç¨‹ä¼šâ¾ƒåŠ¨è‹é†’ã€‚æˆ–è€…å¯ä»¥ä½¿â½¤ wait(longtimeout)è¶…æ—¶åçº¿ç¨‹ä¼šâ¾ƒåŠ¨è‹é†’ã€‚</p>\n</li>\n<li><p>waitåªèƒ½åœ¨synchronizeä»£ç å—ä¸­ï¼Œ<strong>sleep</strong>ä¸éœ€è¦ã€‚</p>\n</li>\n</ul>\n<h4 id=\"ä¸ºä»€ä¹ˆæˆ‘ä»¬è°ƒâ½¤-start-â½…æ³•æ—¶ä¼šæ‰§â¾-run-â½…æ³•ï¼Œä¸ºä»€ä¹ˆæˆ‘ä»¬ä¸èƒ½ç›´æ¥è°ƒâ½¤run-â½…æ³•ï¼Ÿ\"><a href=\"#ä¸ºä»€ä¹ˆæˆ‘ä»¬è°ƒâ½¤-start-â½…æ³•æ—¶ä¼šæ‰§â¾-run-â½…æ³•ï¼Œä¸ºä»€ä¹ˆæˆ‘ä»¬ä¸èƒ½ç›´æ¥è°ƒâ½¤run-â½…æ³•ï¼Ÿ\" class=\"headerlink\" title=\"ä¸ºä»€ä¹ˆæˆ‘ä»¬è°ƒâ½¤ start() â½…æ³•æ—¶ä¼šæ‰§â¾ run() â½…æ³•ï¼Œä¸ºä»€ä¹ˆæˆ‘ä»¬ä¸èƒ½ç›´æ¥è°ƒâ½¤run() â½…æ³•ï¼Ÿ\"></a>ä¸ºä»€ä¹ˆæˆ‘ä»¬è°ƒâ½¤ start() â½…æ³•æ—¶ä¼šæ‰§â¾ run() â½…æ³•ï¼Œä¸ºä»€ä¹ˆæˆ‘ä»¬ä¸èƒ½ç›´æ¥è°ƒâ½¤run() â½…æ³•ï¼Ÿ</h4><ul>\n<li>new â¼€ä¸ª Threadï¼Œçº¿ç¨‹è¿›â¼Šäº†æ–°å»ºçŠ¶æ€;è°ƒâ½¤ start() â½…æ³•ï¼Œä¼šå¯åŠ¨â¼€ä¸ªçº¿ç¨‹å¹¶ä½¿çº¿ç¨‹è¿›â¼Šäº†å°±ç»ªçŠ¶æ€ï¼Œå½“åˆ†é…åˆ°æ—¶é—´â½šåå°±å¯ä»¥å¼€å§‹è¿â¾äº†ã€‚ start() ä¼šæ‰§â¾çº¿ç¨‹çš„ç›¸åº”å‡†å¤‡â¼¯ä½œï¼Œç„¶åâ¾ƒåŠ¨æ‰§â¾run() â½…æ³•çš„å†…å®¹ï¼Œè¿™æ˜¯çœŸæ­£çš„å¤šçº¿ç¨‹â¼¯ä½œã€‚ â½½ç›´æ¥æ‰§â¾ run() â½…æ³•ï¼Œä¼šæŠŠ run â½…æ³•å½“æˆâ¼€ä¸ª mainçº¿ç¨‹ä¸‹çš„æ™®é€šâ½…æ³•å»æ‰§â¾ï¼Œå¹¶ä¸ä¼šåœ¨æŸä¸ªçº¿ç¨‹ä¸­æ‰§â¾å®ƒï¼Œæ‰€ä»¥è¿™å¹¶ä¸æ˜¯å¤šçº¿ç¨‹â¼¯ä½œã€‚</li>\n<li>æ€»ç»“ï¼š è°ƒâ½¤ <strong>start</strong> â½…æ³•â½…å¯å¯åŠ¨çº¿ç¨‹å¹¶ä½¿çº¿ç¨‹è¿›â¼Šå°±ç»ªçŠ¶æ€ï¼Œâ½½ <strong>run</strong> â½…æ³•åªæ˜¯ <strong>thread</strong> çš„â¼€ä¸ªæ™®é€šâ½…æ³•è°ƒâ½¤ï¼Œè¿˜æ˜¯åœ¨ä¸»çº¿ç¨‹â¾¥æ‰§â¾ã€‚</li>\n</ul>\n<h4 id=\"notifyä¸notifyAllçš„åŒºåˆ«\"><a href=\"#notifyä¸notifyAllçš„åŒºåˆ«\" class=\"headerlink\" title=\"notifyä¸notifyAllçš„åŒºåˆ«\"></a>notifyä¸notifyAllçš„åŒºåˆ«</h4><blockquote>\n<p>å°½é‡ä½¿ç”¨notifyAllã€‚</p>\n</blockquote>\n<ul>\n<li>è°ƒç”¨ notify() æ–¹æ³•å¯¼è‡´è§£é™¤é˜»å¡çš„çº¿ç¨‹æ˜¯ä»å› è°ƒç”¨è¯¥å¯¹è±¡çš„ wait() æ–¹æ³•è€Œé˜»å¡çš„çº¿ç¨‹ä¸­éšæœºé€‰å–çš„ï¼Œæˆ‘ä»¬æ— æ³•é¢„æ–™å“ªä¸€ä¸ªçº¿ç¨‹å°†ä¼šè¢«é€‰æ‹©ï¼Œæ‰€ä»¥ç¼–ç¨‹æ—¶è¦ç‰¹åˆ«å°å¿ƒï¼Œé¿å…å› è¿™ç§ä¸ç¡®å®šæ€§è€Œäº§ç”Ÿé—®é¢˜ã€‚</li>\n<li>notifyAll() ä¹Ÿå¯èµ·åˆ°ç±»ä¼¼ä½œç”¨ï¼Œå”¯ä¸€çš„åŒºåˆ«åœ¨äºï¼Œè°ƒç”¨ notifyAll() æ–¹æ³•å°†æŠŠå› è°ƒç”¨è¯¥å¯¹è±¡çš„ wait() æ–¹æ³•è€Œé˜»å¡çš„æ‰€æœ‰çº¿ç¨‹ä¸€æ¬¡æ€§å…¨éƒ¨è§£é™¤é˜»å¡ã€‚å½“ç„¶ï¼Œåªæœ‰è·å¾—é”çš„é‚£ä¸€ä¸ªçº¿ç¨‹æ‰èƒ½è¿›å…¥å¯æ‰§è¡ŒçŠ¶æ€ã€‚</li>\n<li>ä¸¤è€…æœ€â¼¤çš„åŒºåˆ«ï¼š<ul>\n<li><strong>notifyAll</strong>ä½¿æ‰€æœ‰åŸæ¥åœ¨è¯¥å¯¹è±¡ä¸Šç­‰å¾…è¢«notifyçš„çº¿ç¨‹ç»Ÿç»Ÿé€€å‡ºwaitçš„çŠ¶æ€ï¼Œå˜æˆç­‰å¾…è¯¥å¯¹è±¡ä¸Šçš„é”ï¼Œâ¼€æ—¦è¯¥å¯¹è±¡è¢«è§£é”ï¼Œä»–ä»¬å°±ä¼šå»ç«äº‰ã€‚</li>\n<li>notifyä»–åªæ˜¯é€‰æ‹©â¼€ä¸ªwaitçŠ¶æ€çº¿ç¨‹è¿›â¾é€šçŸ¥ï¼Œå¹¶ä½¿å®ƒè·å¾—è¯¥å¯¹è±¡ä¸Šçš„é”ï¼Œä½†ä¸æƒŠåŠ¨å…¶ä»–åŒæ ·åœ¨ç­‰å¾…è¢«è¯¥å¯¹è±¡notifyçš„çº¿ç¨‹ä»¬ï¼Œå½“ç¬¬â¼€ä¸ªçº¿ç¨‹è¿â¾å®Œæ¯•ä»¥åé‡Šæ”¾å¯¹è±¡ä¸Šçš„é”ï¼Œæ­¤æ—¶å¦‚æœè¯¥å¯¹è±¡æ²¡æœ‰å†æ¬¡ä½¿â½¤notifyè¯­å¥ï¼Œå³ä¾¿è¯¥å¯¹è±¡å·²ç»ç©ºé—²ï¼Œå…¶ä»–waitçŠ¶æ€ç­‰å¾…çš„çº¿ç¨‹ç”±äºæ²¡æœ‰å¾—åˆ°è¯¥å¯¹è±¡çš„é€šçŸ¥ï¼Œç»§ç»­å¤„åœ¨waitçŠ¶æ€ï¼Œç›´åˆ°è¿™ä¸ªå¯¹è±¡å‘å‡ºâ¼€ä¸ªnotifyæˆ–notifyAllï¼Œå®ƒä»¬ç­‰å¾…çš„æ˜¯è¢«notifyæˆ–notifyAllï¼Œâ½½ä¸æ˜¯é”ã€‚</li>\n</ul>\n</li>\n</ul>\n<h4 id=\"æœ‰ä¸‰ä¸ªçº¿ç¨‹T1-T2-T3-å¦‚ä½•ä¿è¯é¡ºåºæ‰§è¡Œï¼Ÿ\"><a href=\"#æœ‰ä¸‰ä¸ªçº¿ç¨‹T1-T2-T3-å¦‚ä½•ä¿è¯é¡ºåºæ‰§è¡Œï¼Ÿ\" class=\"headerlink\" title=\"æœ‰ä¸‰ä¸ªçº¿ç¨‹T1,T2,T3,å¦‚ä½•ä¿è¯é¡ºåºæ‰§è¡Œï¼Ÿ\"></a>æœ‰ä¸‰ä¸ªçº¿ç¨‹T1,T2,T3,å¦‚ä½•ä¿è¯é¡ºåºæ‰§è¡Œï¼Ÿ</h4><blockquote>\n<p>åœ¨å¤šçº¿ç¨‹ä¸­æœ‰å¤šç§æ–¹æ³•è®©çº¿ç¨‹æŒ‰ç‰¹å®šé¡ºåºæ‰§è¡Œï¼Œä½ å¯ä»¥ç”¨çº¿ç¨‹ç±»çš„join()æ–¹æ³•åœ¨ä¸€ä¸ªçº¿ç¨‹ä¸­å¯åŠ¨å¦ä¸€ä¸ª</p>\n<p>çº¿ç¨‹ï¼Œå¦å¤–ä¸€ä¸ªçº¿ç¨‹å®Œæˆè¯¥çº¿ç¨‹ç»§ç»­æ‰§è¡Œã€‚ä¸ºäº†ç¡®ä¿ä¸‰ä¸ªçº¿ç¨‹çš„é¡ºåºä½ åº”è¯¥å…ˆå¯åŠ¨æœ€åä¸€ä¸ª(T3è°ƒç”¨</p>\n<p>T2ï¼ŒT2è°ƒç”¨T1)ï¼Œè¿™æ ·T1å°±ä¼šå…ˆå®Œæˆè€ŒT3æœ€åå®Œæˆã€‚</p>\n</blockquote>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">JoinTest2</span> </span>&#123; </span><br><span class=\"line\"><span class=\"comment\">// 1.ç°åœ¨æœ‰T1ã€T2ã€T3ä¸‰ä¸ªçº¿ç¨‹ï¼Œä½ æ€æ ·ä¿è¯T2åœ¨T1æ‰§è¡Œå®Œåæ‰§è¡Œï¼ŒT3åœ¨T2æ‰§è¡Œå®Œåæ‰§è¡Œ </span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String[] args)</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">final</span> Thread t1 = <span class=\"keyword\">new</span> Thread(<span class=\"keyword\">new</span> Runnable() &#123;</span><br><span class=\"line\">      <span class=\"meta\">@Override</span></span><br><span class=\"line\">      <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">run</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">\"t1\"</span>);</span><br><span class=\"line\">      &#125; &#125;); </span><br><span class=\"line\">    <span class=\"keyword\">final</span> Thread t2 = <span class=\"keyword\">new</span> Thread(<span class=\"keyword\">new</span> Runnable() &#123;</span><br><span class=\"line\">      <span class=\"meta\">@Override</span> </span><br><span class=\"line\">      <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">run</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">          <span class=\"comment\">// å¼•ç”¨t1çº¿ç¨‹ï¼Œç­‰å¾…t1çº¿ç¨‹æ‰§è¡Œå®Œ </span></span><br><span class=\"line\">          t1.join(); </span><br><span class=\"line\">        &#125; <span class=\"keyword\">catch</span> (InterruptedException e) &#123;</span><br><span class=\"line\">          e.printStackTrace(); </span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">\"t2\"</span>); </span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      &#125;); </span><br><span class=\"line\">    Thread t3 = <span class=\"keyword\">new</span> Thread(<span class=\"keyword\">new</span> Runnable() &#123;</span><br><span class=\"line\">      <span class=\"meta\">@Override</span> </span><br><span class=\"line\">      <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">run</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">          <span class=\"comment\">// å¼•ç”¨t2çº¿ç¨‹ï¼Œç­‰å¾…t2çº¿ç¨‹æ‰§è¡Œå®Œ </span></span><br><span class=\"line\">          t2.join(); </span><br><span class=\"line\">        &#125; <span class=\"keyword\">catch</span> (InterruptedException e) &#123;</span><br><span class=\"line\">          e.printStackTrace(); </span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">\"t3\"</span>); </span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      &#125;); </span><br><span class=\"line\">    t3.start();</span><br><span class=\"line\">    <span class=\"comment\">//è¿™é‡Œä¸‰ä¸ªçº¿ç¨‹çš„å¯åŠ¨é¡ºåºå¯ä»¥ä»»æ„ï¼Œå¤§å®¶å¯ä»¥è¯•ä¸‹ï¼ </span></span><br><span class=\"line\">    t2.start(); </span><br><span class=\"line\">    t1.start(); </span><br><span class=\"line\">  &#125; </span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"åœ¨å¤šçº¿ç¨‹ä¸­ï¼Œä»€ä¹ˆæ˜¯ä¸Šä¸‹æ–‡åˆ‡æ¢-context-switching-ï¼Ÿ\"><a href=\"#åœ¨å¤šçº¿ç¨‹ä¸­ï¼Œä»€ä¹ˆæ˜¯ä¸Šä¸‹æ–‡åˆ‡æ¢-context-switching-ï¼Ÿ\" class=\"headerlink\" title=\"åœ¨å¤šçº¿ç¨‹ä¸­ï¼Œä»€ä¹ˆæ˜¯ä¸Šä¸‹æ–‡åˆ‡æ¢(context-switching)ï¼Ÿ\"></a><strong>åœ¨å¤šçº¿ç¨‹ä¸­ï¼Œä»€ä¹ˆæ˜¯ä¸Šä¸‹æ–‡åˆ‡æ¢(context-switching)ï¼Ÿ</strong></h4><ul>\n<li>ä¸Šä¸‹æ–‡åˆ‡æ¢æ˜¯å­˜å‚¨å’Œæ¢å¤CPUçŠ¶æ€çš„è¿‡ç¨‹ï¼Œå®ƒä½¿å¾—çº¿ç¨‹æ‰§è¡Œèƒ½å¤Ÿä»ä¸­æ–­ç‚¹æ¢å¤æ‰§è¡Œã€‚ä¸Šä¸‹æ–‡åˆ‡æ¢æ˜¯å¤šä»»åŠ¡æ“ä½œç³»ç»Ÿå’Œå¤šçº¿ç¨‹ç¯å¢ƒçš„åŸºæœ¬ç‰¹å¾ã€‚</li>\n<li>å¤šçº¿ç¨‹ç¼–ç¨‹ä¸­â¼€èˆ¬çº¿ç¨‹çš„ä¸ªæ•°éƒ½â¼¤äº CPU æ ¸â¼¼çš„ä¸ªæ•°ï¼Œâ½½â¼€ä¸ª CPU æ ¸â¼¼åœ¨ä»»æ„æ—¶åˆ»åªèƒ½è¢«â¼€ä¸ªçº¿ç¨‹ä½¿â½¤ï¼Œä¸ºäº†è®©è¿™äº›çº¿ç¨‹éƒ½èƒ½å¾—åˆ°æœ‰æ•ˆæ‰§â¾ï¼ŒCPU é‡‡å–çš„ç­–ç•¥æ˜¯ä¸ºæ¯ä¸ªçº¿ç¨‹åˆ†é…æ—¶é—´â½šå¹¶è½®è½¬çš„å½¢å¼ã€‚å½“â¼€ä¸ªçº¿ç¨‹çš„æ—¶é—´â½šâ½¤å®Œçš„æ—¶å€™å°±ä¼šé‡æ–°å¤„äºå°±ç»ªçŠ¶æ€è®©ç»™å…¶ä»–çº¿ç¨‹ä½¿â½¤ï¼Œè¿™ä¸ªè¿‡ç¨‹å°±å±äºâ¼€æ¬¡ä¸Šä¸‹â½‚åˆ‡æ¢ã€‚</li>\n<li>æ¦‚æ‹¬æ¥è¯´å°±æ˜¯ï¼šå½“å‰ä»»åŠ¡åœ¨æ‰§â¾å®Œ CPU æ—¶é—´â½šåˆ‡æ¢åˆ°å¦â¼€ä¸ªä»»åŠ¡ä¹‹å‰ä¼šå…ˆä¿å­˜â¾ƒâ¼°çš„çŠ¶æ€ï¼Œä»¥ä¾¿ä¸‹æ¬¡å†åˆ‡æ¢å›è¿™ä¸ªä»»åŠ¡æ—¶ï¼Œå¯ä»¥å†åŠ è½½è¿™ä¸ªä»»åŠ¡çš„çŠ¶æ€ã€‚ä»»åŠ¡ä»ä¿å­˜åˆ°å†åŠ è½½çš„è¿‡ç¨‹å°±æ˜¯â¼€æ¬¡ä¸Šä¸‹â½‚åˆ‡æ¢ã€‚ä¸Šä¸‹â½‚åˆ‡æ¢é€šå¸¸æ˜¯è®¡ç®—å¯†é›†å‹çš„ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå®ƒéœ€è¦ç›¸å½“å¯è§‚çš„å¤„ç†å™¨æ—¶é—´ï¼Œåœ¨æ¯ç§’â¼â¼—ä¸Šç™¾æ¬¡çš„åˆ‡æ¢ä¸­ï¼Œæ¯æ¬¡åˆ‡æ¢éƒ½éœ€è¦çº³ç§’é‡çº§çš„æ—¶é—´ã€‚æ‰€ä»¥ï¼Œä¸Šä¸‹â½‚åˆ‡æ¢å¯¹ç³»ç»Ÿæ¥è¯´æ„å‘³ç€æ¶ˆè€—â¼¤é‡çš„ CPU æ—¶é—´ï¼Œäº‹å®ä¸Šï¼Œå¯èƒ½æ˜¯æ“ä½œç³»ç»Ÿä¸­æ—¶é—´æ¶ˆè€—æœ€â¼¤çš„æ“ä½œã€‚</li>\n<li>Linux ç›¸â½ä¸å…¶ä»–æ“ä½œç³»ç»Ÿï¼ˆåŒ…æ‹¬å…¶ä»–ç±» Unix ç³»ç»Ÿï¼‰æœ‰å¾ˆå¤šçš„ä¼˜ç‚¹ï¼Œå…¶ä¸­æœ‰â¼€é¡¹å°±æ˜¯ï¼Œå…¶ä¸Šä¸‹â½‚åˆ‡æ¢å’Œæ¨¡å¼åˆ‡æ¢çš„æ—¶é—´æ¶ˆè€—â¾®å¸¸å°‘ã€‚</li>\n</ul>\n<h4 id=\"ä¸ºä»€ä¹ˆçº¿ç¨‹é€šä¿¡çš„æ–¹æ³•wait-notify-å’ŒnotifyAll-è¢«å®šä¹‰åœ¨Objectç±»é‡Œï¼Ÿ\"><a href=\"#ä¸ºä»€ä¹ˆçº¿ç¨‹é€šä¿¡çš„æ–¹æ³•wait-notify-å’ŒnotifyAll-è¢«å®šä¹‰åœ¨Objectç±»é‡Œï¼Ÿ\" class=\"headerlink\" title=\"ä¸ºä»€ä¹ˆçº¿ç¨‹é€šä¿¡çš„æ–¹æ³•wait(), notify()å’ŒnotifyAll()è¢«å®šä¹‰åœ¨Objectç±»é‡Œï¼Ÿ\"></a><strong>ä¸ºä»€ä¹ˆçº¿ç¨‹é€šä¿¡çš„æ–¹æ³•wait(), notify()å’ŒnotifyAll()è¢«å®šä¹‰åœ¨Objectç±»é‡Œ</strong>ï¼Ÿ</h4><ul>\n<li>Javaçš„æ¯ä¸ªå¯¹è±¡ä¸­éƒ½æœ‰ä¸€ä¸ªé”(monitorï¼Œä¹Ÿå¯ä»¥æˆä¸ºç›‘è§†å™¨) å¹¶ä¸”wait()ï¼Œnotify()ç­‰æ–¹æ³•ç”¨äºç­‰å¾…å¯¹è±¡çš„é”æˆ–è€…é€šçŸ¥å…¶ä»–çº¿ç¨‹å¯¹è±¡çš„ç›‘è§†å™¨å¯ç”¨ã€‚åœ¨Javaçš„çº¿ç¨‹ä¸­å¹¶æ²¡æœ‰å¯ä¾›ä»»ä½•å¯¹è±¡ä½¿ç”¨çš„é”å’ŒåŒæ­¥å™¨ã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆè¿™äº›æ–¹æ³•æ˜¯Objectç±»çš„ä¸€éƒ¨åˆ†ï¼Œè¿™æ ·Javaçš„æ¯ä¸€ä¸ªç±»éƒ½æœ‰ç”¨äºçº¿ç¨‹é—´é€šä¿¡çš„åŸºæœ¬æ–¹æ³•ã€‚</li>\n</ul>\n<h4 id=\"ä¸ºä»€ä¹ˆwait-notify-å’ŒnotifyAll-å¿…é¡»åœ¨åŒæ­¥æ–¹æ³•æˆ–è€…åŒæ­¥å—ä¸­è¢«è°ƒç”¨ï¼Ÿ\"><a href=\"#ä¸ºä»€ä¹ˆwait-notify-å’ŒnotifyAll-å¿…é¡»åœ¨åŒæ­¥æ–¹æ³•æˆ–è€…åŒæ­¥å—ä¸­è¢«è°ƒç”¨ï¼Ÿ\" class=\"headerlink\" title=\"ä¸ºä»€ä¹ˆwait(), notify()å’ŒnotifyAll()å¿…é¡»åœ¨åŒæ­¥æ–¹æ³•æˆ–è€…åŒæ­¥å—ä¸­è¢«è°ƒç”¨ï¼Ÿ\"></a><strong>ä¸ºä»€ä¹ˆwait(), notify()å’ŒnotifyAll()å¿…é¡»åœ¨åŒæ­¥æ–¹æ³•æˆ–è€…åŒæ­¥å—ä¸­è¢«è°ƒç”¨ï¼Ÿ</strong></h4><ul>\n<li>å½“ä¸€ä¸ªçº¿ç¨‹éœ€è¦è°ƒç”¨å¯¹è±¡çš„wait()æ–¹æ³•çš„æ—¶å€™ï¼Œè¿™ä¸ªçº¿ç¨‹å¿…é¡»æ‹¥æœ‰è¯¥å¯¹è±¡çš„é”ï¼Œæ¥ç€å®ƒå°±ä¼šé‡Šæ”¾è¿™ä¸ªå¯¹è±¡é”å¹¶è¿›å…¥ç­‰å¾…çŠ¶æ€ç›´åˆ°å…¶ä»–çº¿ç¨‹è°ƒç”¨è¿™ä¸ªå¯¹è±¡ä¸Šçš„notify()æ–¹æ³•ã€‚åŒæ ·çš„ï¼Œå½“ä¸€ä¸ªçº¿ç¨‹éœ€è¦è°ƒç”¨å¯¹è±¡çš„notify()æ–¹æ³•æ—¶ï¼Œå®ƒä¼šé‡Šæ”¾è¿™ä¸ªå¯¹è±¡çš„é”ï¼Œä»¥ä¾¿å…¶ä»–åœ¨ç­‰å¾…çš„çº¿ç¨‹å°±å¯ä»¥å¾—åˆ°è¿™ä¸ªå¯¹è±¡é”ã€‚ç”±äºæ‰€æœ‰çš„è¿™äº›æ–¹æ³•éƒ½éœ€è¦çº¿ç¨‹æŒæœ‰å¯¹è±¡çš„é”ï¼Œè¿™æ ·å°±åªèƒ½é€šè¿‡åŒæ­¥æ¥å®ç°ï¼Œæ‰€ä»¥ä»–ä»¬åªèƒ½åœ¨åŒæ­¥æ–¹æ³•æˆ–è€…åŒæ­¥å—ä¸­è¢«è°ƒç”¨ã€‚</li>\n</ul>\n<h4 id=\"ä¸ºä»€ä¹ˆThreadç±»çš„sleep-å’Œyield-æ–¹æ³•æ˜¯é™æ€çš„ï¼Ÿ\"><a href=\"#ä¸ºä»€ä¹ˆThreadç±»çš„sleep-å’Œyield-æ–¹æ³•æ˜¯é™æ€çš„ï¼Ÿ\" class=\"headerlink\" title=\"ä¸ºä»€ä¹ˆThreadç±»çš„sleep()å’Œyield()æ–¹æ³•æ˜¯é™æ€çš„ï¼Ÿ\"></a><strong>ä¸ºä»€ä¹ˆThreadç±»çš„sleep()å’Œyield()æ–¹æ³•æ˜¯é™æ€çš„ï¼Ÿ</strong></h4><ul>\n<li>Threadç±»çš„sleep()å’Œyield()æ–¹æ³•å°†åœ¨å½“å‰æ­£åœ¨æ‰§è¡Œçš„çº¿ç¨‹ä¸Šè¿è¡Œã€‚æ‰€ä»¥åœ¨å…¶ä»–å¤„äºç­‰å¾…çŠ¶æ€çš„çº¿ç¨‹ä¸Šè°ƒç”¨è¿™äº›æ–¹æ³•æ˜¯æ²¡æœ‰æ„ä¹‰çš„ã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆè¿™äº›æ–¹æ³•æ˜¯é™æ€çš„ã€‚å®ƒä»¬å¯ä»¥åœ¨å½“å‰æ­£åœ¨æ‰§è¡Œçš„çº¿ç¨‹ä¸­å·¥ä½œï¼Œå¹¶é¿å…ç¨‹åºå‘˜é”™è¯¯çš„è®¤ä¸ºå¯ä»¥åœ¨å…¶ä»–éè¿è¡Œçº¿ç¨‹è°ƒç”¨è¿™äº›æ–¹æ³•ã€‚</li>\n</ul>\n<h4 id=\"interruptedå’ŒisInterruptedâ½…æ³•çš„åŒºåˆ«\"><a href=\"#interruptedå’ŒisInterruptedâ½…æ³•çš„åŒºåˆ«\" class=\"headerlink\" title=\"interruptedå’ŒisInterruptedâ½…æ³•çš„åŒºåˆ«?\"></a>interruptedå’ŒisInterruptedâ½…æ³•çš„åŒºåˆ«?</h4><ul>\n<li><p>interrupted() :ä¼šå°†ä¸­æ–­çŠ¶æ€æ¸…é™¤ï¼ŒJavaå¤šçº¿ç¨‹çš„ä¸­æ–­æœºåˆ¶æ˜¯â½¤å†…éƒ¨æ ‡è¯†æ¥å®ç°çš„ï¼Œè°ƒâ½¤Thread.interrupt()æ¥ä¸­æ–­â¼€ä¸ªçº¿ç¨‹å°±ä¼šè®¾ç½®ä¸­æ–­æ ‡è¯†ä¸ºtrueã€‚å½“ä¸­æ–­çº¿ç¨‹è°ƒâ½¤é™æ€â½…æ³•Thread.interrupted()æ¥æ£€æŸ¥ä¸­æ–­çŠ¶æ€æ—¶ï¼Œä¸­æ–­çŠ¶æ€ä¼šè¢«æ¸…é›¶ã€‚</p>\n</li>\n<li><p>isInterruptedd : ä¸ä¼šå°†ä¸­æ–­çŠ¶æ€æ¸…é™¤ï¼Œâ¾®é™æ€â½…æ³•isInterrupted()â½¤æ¥æŸ¥è¯¢å…¶å®ƒçº¿ç¨‹çš„ä¸­æ–­çŠ¶æ€ä¸”ä¸ä¼šæ”¹å˜ä¸­æ–­çŠ¶æ€æ ‡è¯†ã€‚</p>\n</li>\n<li><p>ä»»ä½•æŠ›å‡ºInterruptedExceptionå¼‚å¸¸çš„â½…æ³•éƒ½ä¼šå°†ä¸­æ–­çŠ¶æ€æ¸…é›¶ã€‚â½†è®ºå¦‚ä½•ï¼Œâ¼€ä¸ªçº¿ç¨‹çš„ä¸­æ–­çŠ¶æ€æœ‰æœ‰å¯èƒ½è¢«å…¶å®ƒçº¿ç¨‹è°ƒâ½¤ä¸­æ–­æ¥æ”¹å˜ã€‚</p>\n</li>\n</ul>\n<h3 id=\"synchronizedå…³é”®å­—\"><a href=\"#synchronizedå…³é”®å­—\" class=\"headerlink\" title=\"synchronizedå…³é”®å­—\"></a>synchronizedå…³é”®å­—</h3><blockquote>\n<p>synchronizedå…³é”®å­—è§£å†³çš„æ˜¯å¤šä¸ªçº¿ç¨‹ä¹‹é—´è®¿é—®èµ„æºçš„åŒæ­¥æ€§ï¼Œsynchronizedå…³é”®å­—å¯ä»¥ä¿è¯è¢«å®ƒä¿®é¥°çš„â½…æ³•æˆ–è€…ä»£ç å—åœ¨ä»»æ„æ—¶åˆ»åªèƒ½æœ‰â¼€ä¸ªçº¿ç¨‹æ‰§â¾ã€‚</p>\n</blockquote>\n<ul>\n<li>synchronizedä½œç”¨äº<strong>ã€Œæ–¹æ³•ã€</strong>æˆ–è€…<strong>ã€Œä»£ç å—ã€</strong>ï¼Œä¿è¯è¢«ä¿®é¥°çš„ä»£ç åœ¨åŒä¸€æ—¶é—´åªèƒ½è¢«ä¸€ä¸ªçº¿ç¨‹è®¿é—®ã€‚</li>\n<li>synchronizedä¿®é¥°ä»£ç å—æ—¶ï¼ŒJVMé‡‡ç”¨<strong>ã€Œmonitorenterã€monitorexitã€</strong>ä¸¤ä¸ªæŒ‡ä»¤æ¥å®ç°åŒæ­¥</li>\n<li>synchronizedä¿®é¥°åŒæ­¥æ–¹æ³•æ—¶ï¼ŒJVMé‡‡ç”¨<strong>ã€ŒACC_SYNCHRONIZEDã€</strong>æ ‡è®°ç¬¦æ¥å®ç°åŒæ­¥</li>\n<li>monitorenterã€monitorexitæˆ–è€…ACC_SYNCHRONIZEDéƒ½æ˜¯<strong>ã€ŒåŸºäºMonitorå®ç°ã€</strong>çš„</li>\n<li>å®ä¾‹å¯¹è±¡é‡Œæœ‰å¯¹è±¡å¤´ï¼Œå¯¹è±¡å¤´é‡Œé¢æœ‰Mark Wordï¼ŒMark WordæŒ‡é’ˆæŒ‡å‘äº†<strong>ã€Œmonitorã€</strong></li>\n<li>Monitorå…¶å®æ˜¯ä¸€ç§<strong>ã€ŒåŒæ­¥å·¥å…·ã€</strong>ï¼Œä¹Ÿå¯ä»¥è¯´æ˜¯ä¸€ç§<strong>ã€ŒåŒæ­¥æœºåˆ¶ã€</strong>ã€‚</li>\n<li>åœ¨Javaè™šæ‹Ÿæœºï¼ˆHotSpotï¼‰ä¸­ï¼ŒMonitoræ˜¯ç”±<strong>ã€ŒObjectMonitorå®ç°ã€</strong>çš„ã€‚ObjectMonitorä½“ç°å‡ºMonitorçš„å·¥ä½œåŸç†~</li>\n</ul>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\">ObjectMonitor() &#123;</span><br><span class=\"line\">    _header       = <span class=\"literal\">NULL</span>;</span><br><span class=\"line\">    _count        = <span class=\"number\">0</span>; <span class=\"comment\">// è®°å½•çº¿ç¨‹è·å–é”çš„æ¬¡æ•°</span></span><br><span class=\"line\">    _waiters      = <span class=\"number\">0</span>,</span><br><span class=\"line\">    _recursions   = <span class=\"number\">0</span>;  <span class=\"comment\">//é”çš„é‡å…¥æ¬¡æ•°</span></span><br><span class=\"line\">    _object       = <span class=\"literal\">NULL</span>;</span><br><span class=\"line\">    _owner        = <span class=\"literal\">NULL</span>;  <span class=\"comment\">// æŒ‡å‘æŒæœ‰ObjectMonitorå¯¹è±¡çš„çº¿ç¨‹</span></span><br><span class=\"line\">    _WaitSet      = <span class=\"literal\">NULL</span>;  <span class=\"comment\">// å¤„äºwaitçŠ¶æ€çš„çº¿ç¨‹ï¼Œä¼šè¢«åŠ å…¥åˆ°_WaitSet</span></span><br><span class=\"line\">    _WaitSetLock  = <span class=\"number\">0</span> ;</span><br><span class=\"line\">    _Responsible  = <span class=\"literal\">NULL</span> ;</span><br><span class=\"line\">    _succ         = <span class=\"literal\">NULL</span> ;</span><br><span class=\"line\">    _cxq          = <span class=\"literal\">NULL</span> ;</span><br><span class=\"line\">    FreeNext      = <span class=\"literal\">NULL</span> ;</span><br><span class=\"line\">    _EntryList    = <span class=\"literal\">NULL</span> ;  <span class=\"comment\">// å¤„äºç­‰å¾…é”blockçŠ¶æ€çš„çº¿ç¨‹ï¼Œä¼šè¢«åŠ å…¥åˆ°è¯¥åˆ—è¡¨</span></span><br><span class=\"line\">    _SpinFreq     = <span class=\"number\">0</span> ;</span><br><span class=\"line\">    _SpinClock    = <span class=\"number\">0</span> ;</span><br><span class=\"line\">    OwnerIsThread = <span class=\"number\">0</span> ;</span><br><span class=\"line\">  &#125;</span><br></pre></td></tr></table></figure>\n\n\n\n<ul>\n<li>synchronized å…³é”®å­—åŠ åˆ° static é™æ€â½…æ³•å’Œ synchronized(class)ä»£ç å—ä¸Šéƒ½æ˜¯æ˜¯ç»™ Classç±»ä¸Šé”ã€‚</li>\n<li>synchronized å…³é”®å­—åŠ åˆ°å®ä¾‹â½…æ³•ä¸Šæ˜¯ç»™å¯¹è±¡å®ä¾‹ä¸Šé”ã€‚å°½é‡ä¸è¦ä½¿â½¤synchronized(String a) å› ä¸ºJVMä¸­ï¼Œå­—ç¬¦ä¸²å¸¸é‡æ± å…·æœ‰ç¼“å­˜åŠŸèƒ½ï¼</li>\n</ul>\n<h4 id=\"å¸¸ç”¨åœºæ™¯\"><a href=\"#å¸¸ç”¨åœºæ™¯\" class=\"headerlink\" title=\"å¸¸ç”¨åœºæ™¯\"></a>å¸¸ç”¨åœºæ™¯</h4><h5 id=\"åŒæ­¥ä¸€ä¸ªä»£ç å—\"><a href=\"#åŒæ­¥ä¸€ä¸ªä»£ç å—\" class=\"headerlink\" title=\"åŒæ­¥ä¸€ä¸ªä»£ç å—\"></a><strong>åŒæ­¥ä¸€ä¸ªä»£ç å—</strong></h5><figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">func</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">synchronized</span> (<span class=\"keyword\">this</span>) &#123;</span><br><span class=\"line\">        <span class=\"comment\">// ...</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>å®ƒåªä½œç”¨äºåŒä¸€ä¸ªå¯¹è±¡ï¼Œå¦‚æœè°ƒç”¨ä¸¤ä¸ªå¯¹è±¡ä¸Šçš„åŒæ­¥ä»£ç å—ï¼Œå°±ä¸ä¼šè¿›è¡ŒåŒæ­¥ã€‚</p>\n<p>å¯¹äºä»¥ä¸‹ä»£ç ï¼Œä½¿ç”¨ ExecutorService æ‰§è¡Œäº†ä¸¤ä¸ªçº¿ç¨‹ï¼Œç”±äºè°ƒç”¨çš„æ˜¯åŒä¸€ä¸ªå¯¹è±¡çš„åŒæ­¥ä»£ç å—ï¼Œå› æ­¤è¿™ä¸¤ä¸ªçº¿ç¨‹ä¼šè¿›è¡ŒåŒæ­¥ï¼Œå½“ä¸€ä¸ªçº¿ç¨‹è¿›å…¥åŒæ­¥è¯­å¥å—æ—¶ï¼Œå¦ä¸€ä¸ªçº¿ç¨‹å°±å¿…é¡»ç­‰å¾…ã€‚</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">SynchronizedExample</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">func1</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">synchronized</span> (<span class=\"keyword\">this</span>) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>; i &lt; <span class=\"number\">10</span>; i++) &#123;</span><br><span class=\"line\">                System.out.print(i + <span class=\"string\">\" \"</span>);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String[] args)</span> </span>&#123;</span><br><span class=\"line\">    SynchronizedExample e1 = <span class=\"keyword\">new</span> SynchronizedExample();</span><br><span class=\"line\">    ExecutorService executorService = Executors.newCachedThreadPool();</span><br><span class=\"line\">    executorService.execute(() -&gt; e1.func1());</span><br><span class=\"line\">    executorService.execute(() -&gt; e1.func1());</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"number\">0</span> <span class=\"number\">1</span> <span class=\"number\">2</span> <span class=\"number\">3</span> <span class=\"number\">4</span> <span class=\"number\">5</span> <span class=\"number\">6</span> <span class=\"number\">7</span> <span class=\"number\">8</span> <span class=\"number\">9</span> <span class=\"number\">0</span> <span class=\"number\">1</span> <span class=\"number\">2</span> <span class=\"number\">3</span> <span class=\"number\">4</span> <span class=\"number\">5</span> <span class=\"number\">6</span> <span class=\"number\">7</span> <span class=\"number\">8</span> <span class=\"number\">9</span></span><br></pre></td></tr></table></figure>\n\n<p>å¯¹äºä»¥ä¸‹ä»£ç ï¼Œä¸¤ä¸ªçº¿ç¨‹è°ƒç”¨äº†ä¸åŒå¯¹è±¡çš„åŒæ­¥ä»£ç å—ï¼Œå› æ­¤è¿™ä¸¤ä¸ªçº¿ç¨‹å°±ä¸éœ€è¦åŒæ­¥ã€‚ä»è¾“å‡ºç»“æœå¯ä»¥çœ‹å‡ºï¼Œä¸¤ä¸ªçº¿ç¨‹äº¤å‰æ‰§è¡Œã€‚</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String[] args)</span> </span>&#123;</span><br><span class=\"line\">    SynchronizedExample e1 = <span class=\"keyword\">new</span> SynchronizedExample();</span><br><span class=\"line\">    SynchronizedExample e2 = <span class=\"keyword\">new</span> SynchronizedExample();</span><br><span class=\"line\">    ExecutorService executorService = Executors.newCachedThreadPool();</span><br><span class=\"line\">    executorService.execute(() -&gt; e1.func1());</span><br><span class=\"line\">    executorService.execute(() -&gt; e2.func1());</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"number\">0</span> <span class=\"number\">0</span> <span class=\"number\">1</span> <span class=\"number\">1</span> <span class=\"number\">2</span> <span class=\"number\">2</span> <span class=\"number\">3</span> <span class=\"number\">3</span> <span class=\"number\">4</span> <span class=\"number\">4</span> <span class=\"number\">5</span> <span class=\"number\">5</span> <span class=\"number\">6</span> <span class=\"number\">6</span> <span class=\"number\">7</span> <span class=\"number\">7</span> <span class=\"number\">8</span> <span class=\"number\">8</span> <span class=\"number\">9</span> <span class=\"number\">9</span></span><br></pre></td></tr></table></figure>\n\n<h5 id=\"åŒæ­¥ä¸€ä¸ªæ–¹æ³•\"><a href=\"#åŒæ­¥ä¸€ä¸ªæ–¹æ³•\" class=\"headerlink\" title=\"åŒæ­¥ä¸€ä¸ªæ–¹æ³•\"></a><strong>åŒæ­¥ä¸€ä¸ªæ–¹æ³•</strong></h5><figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">synchronized</span> <span class=\"keyword\">void</span> <span class=\"title\">func</span> <span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">// ...</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>å®ƒå’ŒåŒæ­¥ä»£ç å—ä¸€æ ·ï¼Œä½œç”¨äºåŒä¸€ä¸ªå¯¹è±¡ã€‚</p>\n<h5 id=\"åŒæ­¥ä¸€ä¸ªç±»\"><a href=\"#åŒæ­¥ä¸€ä¸ªç±»\" class=\"headerlink\" title=\"åŒæ­¥ä¸€ä¸ªç±»\"></a><strong>åŒæ­¥ä¸€ä¸ªç±»</strong></h5><figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">func</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">synchronized</span> (SynchronizedExample<span class=\"class\">.<span class=\"keyword\">class</span>) </span>&#123;</span><br><span class=\"line\">        <span class=\"comment\">// ...</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>ä½œç”¨äºæ•´ä¸ªç±»ï¼Œä¹Ÿå°±æ˜¯è¯´ä¸¤ä¸ªçº¿ç¨‹è°ƒç”¨åŒä¸€ä¸ªç±»çš„ä¸åŒå¯¹è±¡ä¸Šçš„è¿™ç§åŒæ­¥è¯­å¥ï¼Œä¹Ÿä¼šè¿›è¡ŒåŒæ­¥ã€‚</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">SynchronizedExample</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">func2</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">synchronized</span> (SynchronizedExample<span class=\"class\">.<span class=\"keyword\">class</span>) </span>&#123;</span><br><span class=\"line\">            <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>; i &lt; <span class=\"number\">10</span>; i++) &#123;</span><br><span class=\"line\">                System.out.print(i + <span class=\"string\">\" \"</span>);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String[] args)</span> </span>&#123;</span><br><span class=\"line\">    SynchronizedExample e1 = <span class=\"keyword\">new</span> SynchronizedExample();</span><br><span class=\"line\">    SynchronizedExample e2 = <span class=\"keyword\">new</span> SynchronizedExample();</span><br><span class=\"line\">    ExecutorService executorService = Executors.newCachedThreadPool();</span><br><span class=\"line\">    executorService.execute(() -&gt; e1.func2());</span><br><span class=\"line\">    executorService.execute(() -&gt; e2.func2());</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"number\">0</span> <span class=\"number\">1</span> <span class=\"number\">2</span> <span class=\"number\">3</span> <span class=\"number\">4</span> <span class=\"number\">5</span> <span class=\"number\">6</span> <span class=\"number\">7</span> <span class=\"number\">8</span> <span class=\"number\">9</span> <span class=\"number\">0</span> <span class=\"number\">1</span> <span class=\"number\">2</span> <span class=\"number\">3</span> <span class=\"number\">4</span> <span class=\"number\">5</span> <span class=\"number\">6</span> <span class=\"number\">7</span> <span class=\"number\">8</span> <span class=\"number\">9</span></span><br></pre></td></tr></table></figure>\n\n<h5 id=\"åŒæ­¥ä¸€ä¸ªé™æ€æ–¹æ³•\"><a href=\"#åŒæ­¥ä¸€ä¸ªé™æ€æ–¹æ³•\" class=\"headerlink\" title=\"åŒæ­¥ä¸€ä¸ªé™æ€æ–¹æ³•\"></a><strong>åŒæ­¥ä¸€ä¸ªé™æ€æ–¹æ³•</strong></h5><figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">synchronized</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">fun</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">// ...</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>ä½œç”¨äºæ•´ä¸ªç±»ã€‚</p>\n<h5 id=\"synchronized-å…³é”®å­—å’Œ-volatile-å…³é”®å­—çš„åŒºåˆ«\"><a href=\"#synchronized-å…³é”®å­—å’Œ-volatile-å…³é”®å­—çš„åŒºåˆ«\" class=\"headerlink\" title=\"synchronized å…³é”®å­—å’Œ volatile å…³é”®å­—çš„åŒºåˆ«\"></a>synchronized å…³é”®å­—å’Œ volatile å…³é”®å­—çš„åŒºåˆ«</h5><ul>\n<li><p><strong>volatile</strong>å…³é”®å­—æ˜¯çº¿ç¨‹åŒæ­¥çš„è½»é‡çº§å®ç°ï¼Œæ‰€ä»¥<strong>volatile</strong>æ€§èƒ½è‚¯å®šâ½<strong>synchronized</strong>å…³é”®å­—è¦å¥½ã€‚ä½†æ˜¯<strong>volatile</strong>å…³é”®å­—åªèƒ½â½¤äºå˜é‡â½½<strong>synchronized</strong>å…³é”®å­—å¯ä»¥ä¿®é¥°â½…æ³•ä»¥åŠä»£ç å—ã€‚synchronizedå…³é”®å­—åœ¨JavaSE1.6ä¹‹åè¿›â¾äº†ä¸»è¦åŒ…æ‹¬ä¸ºäº†å‡å°‘è·å¾—é”å’Œé‡Šæ”¾é”å¸¦æ¥çš„æ€§èƒ½æ¶ˆè€—â½½å¼•â¼Šçš„åå‘é”å’Œè½»é‡çº§é”ä»¥åŠå…¶å®ƒå„ç§ä¼˜åŒ–ä¹‹åæ‰§â¾æ•ˆç‡æœ‰äº†æ˜¾è‘—æå‡ï¼Œå®é™…å¼€å‘ä¸­ä½¿â½¤<strong>synchronized</strong> å…³é”®å­—çš„åœºæ™¯è¿˜æ˜¯æ›´å¤šâ¼€äº›ã€‚</p>\n</li>\n<li><p>å¤šçº¿ç¨‹è®¿é—®<strong>volatile</strong>å…³é”®å­—ä¸ä¼šå‘â½£é˜»å¡ï¼Œâ½½<strong>synchronized</strong>å…³é”®å­—å¯èƒ½ä¼šå‘â½£é˜»å¡ã€‚</p>\n</li>\n<li><p><strong>volatile</strong>å…³é”®å­—èƒ½ä¿è¯æ•°æ®çš„å¯â»…æ€§ï¼Œä½†ä¸èƒ½ä¿è¯æ•°æ®çš„åŸâ¼¦æ€§ã€‚<strong>synchronized</strong>å…³é”®å­—ä¸¤è€…éƒ½èƒ½ä¿è¯ã€‚</p>\n</li>\n<li><p><strong>volatile</strong>å…³é”®å­—ä¸»è¦â½¤äºè§£å†³å˜é‡åœ¨å¤šä¸ªçº¿ç¨‹ä¹‹é—´çš„å¯â»…æ€§ï¼Œâ½½ <strong>synchronized</strong>å…³é”®å­—è§£å†³çš„æ˜¯å¤šä¸ªçº¿ç¨‹ä¹‹é—´è®¿é—®èµ„æºçš„åŒæ­¥æ€§ã€‚</p>\n</li>\n</ul>\n<h3 id=\"ThreadLocal\"><a href=\"#ThreadLocal\" class=\"headerlink\" title=\"ThreadLocal\"></a><strong>ThreadLocal</strong></h3><blockquote>\n<p>ä¸»è¦è§£å†³æ¯ä¸ªçº¿ç¨‹ç»‘å®šè‡ªå·±çš„å€¼ï¼Œå­˜å‚¨æ¯ä¸ªçº¿ç¨‹çš„ç§æœ‰å˜é‡ã€‚</p>\n</blockquote>\n<ul>\n<li>ThreadLocalç”¨äºåˆ›å»ºçº¿ç¨‹çš„æœ¬åœ°å˜é‡ï¼Œæˆ‘ä»¬çŸ¥é“ä¸€ä¸ªå¯¹è±¡çš„æ‰€æœ‰çº¿ç¨‹ä¼šå…±äº«å®ƒçš„å…¨å±€å˜é‡ï¼Œæ‰€ä»¥è¿™äº›å˜é‡ä¸æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨åŒæ­¥æŠ€æœ¯ã€‚ä½†æ˜¯å½“æˆ‘ä»¬ä¸æƒ³ä½¿ç”¨åŒæ­¥çš„æ—¶å€™ï¼Œæˆ‘ä»¬å¯ä»¥é€‰æ‹©ThreadLocalå˜é‡ã€‚</li>\n<li>æ¯ä¸ªçº¿ç¨‹éƒ½ä¼šæ‹¥æœ‰ä»–ä»¬è‡ªå·±çš„Threadå˜é‡ï¼Œå®ƒä»¬å¯ä»¥ä½¿ç”¨get()set()æ–¹æ³•å»è·å–ä»–ä»¬çš„é»˜è®¤å€¼æˆ–è€…åœ¨çº¿ç¨‹å†…éƒ¨æ”¹å˜ä»–ä»¬çš„å€¼ã€‚ThreadLocalå®ä¾‹é€šå¸¸æ˜¯å¸Œæœ›å®ƒä»¬åŒçº¿ç¨‹çŠ¶æ€å…³è”èµ·æ¥æ˜¯private staticå±æ€§ã€‚</li>\n</ul>\n<table>\n<thead>\n<tr>\n<th>æ–¹æ³•å£°æ˜</th>\n<th>æè¿°</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>ThreadLocal()</td>\n<td>åˆ›å»ºThreadLocalå¯¹è±¡</td>\n</tr>\n<tr>\n<td>public void set(T value)</td>\n<td>è®¾ç½®å½“å‰çº¿ç¨‹ç»‘å®šçš„å±€éƒ¨å˜é‡</td>\n</tr>\n<tr>\n<td>public T get()</td>\n<td>è·å–å½“å‰çº¿ç¨‹ç»‘å®šçš„å±€éƒ¨å˜é‡</td>\n</tr>\n<tr>\n<td>public void remove()</td>\n<td>ç§»é™¤å½“å‰çº¿ç¨‹ç»‘å®šçš„å±€éƒ¨å˜é‡</td>\n</tr>\n</tbody></table>\n<h4 id=\"ThreadLocalä¸ºä»€ä¹ˆä¼šå†…å­˜æ³„æ¼\"><a href=\"#ThreadLocalä¸ºä»€ä¹ˆä¼šå†…å­˜æ³„æ¼\" class=\"headerlink\" title=\"ThreadLocalä¸ºä»€ä¹ˆä¼šå†…å­˜æ³„æ¼\"></a>ThreadLocalä¸ºä»€ä¹ˆä¼šå†…å­˜æ³„æ¼</h4><blockquote>\n<p>ThreadLocalä¸ºæ¯ä¸€çº¿ç¨‹åˆ›å»ºä¸€å—å°çš„å †å·¥ä½œç©ºé—´</p>\n</blockquote>\n<ul>\n<li>ThreadLocalä¸­å«æœ‰ä¸€ä¸ªå«åšThreadLocalMapçš„å†…éƒ¨ç±»ï¼Œè¯¥ç±»ä¸ºä¸€ä¸ªé‡‡ç”¨çº¿æ€§æ¢æµ‹æ³•å®ç°çš„HashMapã€‚å®ƒçš„keyä¸ºThreadLocalå¯¹è±¡è€Œä¸”è¿˜ä½¿ç”¨äº†WeakReferenceï¼ŒThreadLocalMapæ­£æ˜¯ç”¨æ¥å­˜å‚¨å˜é‡å‰¯æœ¬çš„ã€‚</li>\n</ul>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">   * ThreadLocalMap is a customized hash map suitable only for</span></span><br><span class=\"line\"><span class=\"comment\">   * maintaining thread local values. No operations are exported</span></span><br><span class=\"line\"><span class=\"comment\">   * outside of the ThreadLocal class. The class is package private to</span></span><br><span class=\"line\"><span class=\"comment\">   * allow declaration of fields in class Thread.  To help deal with</span></span><br><span class=\"line\"><span class=\"comment\">   * very large and long-lived usages, the hash table entries use</span></span><br><span class=\"line\"><span class=\"comment\">   * WeakReferences for keys. However, since reference queues are not</span></span><br><span class=\"line\"><span class=\"comment\">   * used, stale entries are guaranteed to be removed only when</span></span><br><span class=\"line\"><span class=\"comment\">   * the table starts running out of space.</span></span><br><span class=\"line\"><span class=\"comment\">   */</span></span><br><span class=\"line\">  <span class=\"keyword\">static</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ThreadLocalMap</span> </span>&#123;</span><br><span class=\"line\">      <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">       * The entries in this hash map extend WeakReference, using</span></span><br><span class=\"line\"><span class=\"comment\">       * its main ref field as the key (which is always a</span></span><br><span class=\"line\"><span class=\"comment\">       * ThreadLocal object).  Note that null keys (i.e. entry.get()</span></span><br><span class=\"line\"><span class=\"comment\">       * == null) mean that the key is no longer referenced, so the</span></span><br><span class=\"line\"><span class=\"comment\">       * entry can be expunged from table.  Such entries are referred to</span></span><br><span class=\"line\"><span class=\"comment\">       * as \"stale entries\" in the code that follows.</span></span><br><span class=\"line\"><span class=\"comment\">       */</span></span><br><span class=\"line\">      <span class=\"keyword\">static</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Entry</span> <span class=\"keyword\">extends</span> <span class=\"title\">WeakReference</span>&lt;<span class=\"title\">ThreadLocal</span>&lt;?&gt;&gt; </span>&#123;</span><br><span class=\"line\">          <span class=\"comment\">/** The value associated with this ThreadLocal. */</span></span><br><span class=\"line\">          Object value;</span><br><span class=\"line\"></span><br><span class=\"line\">          Entry(ThreadLocal&lt;?&gt; k, Object v) &#123;</span><br><span class=\"line\">              <span class=\"keyword\">super</span>(k);</span><br><span class=\"line\">              value = v;</span><br><span class=\"line\">          &#125;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      ....</span><br><span class=\"line\">  &#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>å¦‚æœThreadLocalè¢«è®¾ç½®ä¸ºnullåï¼Œè€Œä¸”æ²¡æœ‰ä»»ä½•å¼ºå¼•ç”¨æŒ‡å‘å®ƒï¼Œæ ¹æ®åƒåœ¾å›æ”¶çš„å¯è¾¾æ€§åˆ†æç®—æ³•ï¼ŒThreadLocalå°†ä¼šè¢«å›æ”¶ã€‚ä½†æ˜¯å¯¹åº”çš„valueä¸ä¼šè¢«å›æ”¶æ‰ç›´åˆ°çº¿ç¨‹ç»“æŸæ‰ä¼šè¢«å›æ”¶ã€‚å¦‚æœå½“å‰çº¿ç¨‹ä¸€ç›´å¤„äºè¿è¡Œä¸­ï¼Œé‚£ä¹ˆè¿™äº›Entryå¯¹è±¡ä¸­çš„valueå°±å¯èƒ½ä¸€ç›´æ— æ³•å›æ”¶ï¼Œå°±ä¼šå‘ç”Ÿå†…å­˜æ³„éœ²ã€‚<strong>ä¸ºäº†å®‰å…¨åœ°ä½¿ç”¨ThreadLocalï¼Œå¿…é¡»è¦åƒæ¯æ¬¡ä½¿ç”¨å®Œé”å°±è§£é”ä¸€æ ·ï¼Œåœ¨æ¯æ¬¡ä½¿ç”¨å®ŒThreadLocalåéƒ½è¦è°ƒç”¨remove()æ¥æ¸…ç†æ— ç”¨çš„Entryã€‚</strong></li>\n</ul>\n<h4 id=\"ThreadLocalä¸Synchronized\"><a href=\"#ThreadLocalä¸Synchronized\" class=\"headerlink\" title=\"ThreadLocalä¸Synchronized\"></a>ThreadLocalä¸Synchronized</h4><blockquote>\n<p>ThreadLocalæ¨¡å¼ä¸Synchronizedå…³é”®å­—éƒ½ç”¨äºå¤„ç†å¤šçº¿ç¨‹å¹¶å‘è®¿é—®å˜é‡çš„é—®é¢˜ï¼Œå¤„ç†é—®é¢˜çš„è§’åº¦å’Œæ€è·¯ä¸åŒã€‚</p>\n</blockquote>\n<table>\n<thead>\n<tr>\n<th>åç§°</th>\n<th>åŸç†</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>ThreadLocal</td>\n<td>ç©ºé—´æ¢æ—¶é—´ï¼Œä¸ºæ¯ä¸€ä»½çº¿ç¨‹æä¾›ä¸€ä»½å˜é‡å‰¯æœ¬ï¼Œå®Œæˆçº¿ç¨‹ç§æœ‰å˜é‡è®¿é—®ï¼Œå¤šçº¿ç¨‹ä¹‹é—´æ•°æ®äº’ç›¸éš”ç¦»ã€‚</td>\n</tr>\n<tr>\n<td>Synchronized</td>\n<td>æ—¶é—´æ¢ç©ºé—´ï¼Œåªæä¾›ä¸€ä»½å˜é‡å‰¯æœ¬ï¼Œè®©çº¿ç¨‹æ’é˜Ÿè®¿é—®ã€‚å¤šçº¿ç¨‹ä¹‹é—´è®¿é—®æ•°æ®åŒæ­¥ã€‚</td>\n</tr>\n</tbody></table>\n<h3 id=\"volatileå…³é”®å­—\"><a href=\"#volatileå…³é”®å­—\" class=\"headerlink\" title=\"volatileå…³é”®å­—\"></a>volatileå…³é”®å­—</h3><blockquote>\n<p><strong>volatile</strong> å…³é”®å­—çš„ä¸»è¦ä½œâ½¤å°±æ˜¯ä¿è¯å˜é‡çš„å¯â»…æ€§ç„¶åè¿˜æœ‰â¼€ä¸ªä½œâ½¤æ˜¯é˜²â½ŒæŒ‡ä»¤é‡æ’åºã€‚</p>\n</blockquote>\n<p><img src=\"https://z201.oss-cn-shanghai.aliyuncs.com/JavaNote/volatile%E5%86%85%E5%AD%98.png\"></p>\n<h4 id=\"ç‰¹æ€§\"><a href=\"#ç‰¹æ€§\" class=\"headerlink\" title=\"ç‰¹æ€§\"></a>ç‰¹æ€§</h4><ul>\n<li><p>åŸâ¼¦æ€§ : â¼€ä¸ªçš„æ“ä½œæˆ–è€…å¤šæ¬¡æ“ä½œï¼Œè¦ä¹ˆæ‰€æœ‰çš„æ“ä½œå…¨éƒ¨éƒ½å¾—åˆ°æ‰§â¾å¹¶ä¸”ä¸ä¼šæ”¶åˆ°ä»»ä½•å› ç´ çš„â¼²æ‰°â½½ä¸­æ–­ï¼Œè¦ä¹ˆæ‰€æœ‰çš„æ“ä½œéƒ½æ‰§â¾ï¼Œè¦ä¹ˆéƒ½ä¸æ‰§â¾ã€‚ synchronized å¯ä»¥ä¿è¯ä»£ç â½šæ®µçš„åŸâ¼¦æ€§ã€‚</p>\n</li>\n<li><p>å¯â»…æ€§ ï¼šå½“â¼€ä¸ªå˜é‡å¯¹å…±äº«å˜é‡è¿›â¾äº†ä¿®æ”¹ï¼Œé‚£ä¹ˆå¦å¤–çš„çº¿ç¨‹éƒ½æ˜¯â½´å³å¯ä»¥çœ‹åˆ°ä¿®æ”¹åçš„æœ€æ–°å€¼ã€‚ volatile å…³é”®å­—å¯ä»¥ä¿è¯å…±äº«å˜é‡çš„å¯â»…æ€§ã€‚</p>\n</li>\n<li><p>æœ‰åºæ€§ ï¼šä»£ç åœ¨æ‰§â¾çš„è¿‡ç¨‹ä¸­çš„å…ˆåé¡ºåºï¼ŒJava åœ¨ç¼–è¯‘å™¨ä»¥åŠè¿â¾æœŸé—´çš„ä¼˜åŒ–ï¼Œä»£ç çš„æ‰§â¾é¡ºåºæœªå¿…å°±æ˜¯ç¼–å†™ä»£ç æ—¶å€™çš„é¡ºåºã€‚ volatile å…³é”®å­—å¯ä»¥ç¦â½ŒæŒ‡ä»¤è¿›â¾é‡æ’åºä¼˜åŒ–ã€‚</p>\n</li>\n<li><p>å†…å­˜å±è”½ï¼šåŠ å…¥volatileä¼šå¤šå‡ºä¸€ä¸ªlockå‰ç¼€æŒ‡ä»¤ï¼Œlockå‰ç¼€æŒ‡ä»¤ç›¸å½“äºä¸€ä¸ªå†…å­˜å±éšœï¼ˆä¹Ÿç§°å†…å­˜æ …æ ï¼‰ã€‚</p>\n</li>\n<li><p>ç¦æ­¢é‡æ’åºï¼švolatile ç¦æ­¢äº†æŒ‡ä»¤é‡æ’ã€‚</p>\n</li>\n</ul>\n<h4 id=\"ä½¿ç”¨åœºæ™¯\"><a href=\"#ä½¿ç”¨åœºæ™¯\" class=\"headerlink\" title=\"ä½¿ç”¨åœºæ™¯\"></a>ä½¿ç”¨åœºæ™¯</h4><ul>\n<li><p>è¯»å†™é”</p>\n<ul>\n<li>å¦‚æœéœ€è¦å®ç°ä¸€ä¸ªè¯»å†™é”ï¼Œæ¯æ¬¡åªèƒ½ä¸€ä¸ªçº¿ç¨‹å»å†™æ•°æ®ï¼Œä½†æ˜¯æœ‰å¤šä¸ªçº¿ç¨‹æ¥è¯»æ•°æ®ï¼Œå°±synchronizeåŒæ­¥é”æ¥å¯¹setæ–¹æ³•åŠ é”ï¼Œgetæ–¹æ³•ä¸åŠ é”ï¼Œ ä½¿ç”¨volatileæ¥ä¿®é¥°å˜é‡ï¼Œä¿è¯å†…å­˜å¯è§æ€§ï¼Œä¸ç„¶å¤šä¸ªçº¿ç¨‹å¯èƒ½ä¼šåœ¨å˜é‡ä¿®æ”¹åè¿˜è¯»åˆ°ä¸€ä¸ªæ—§å€¼ã€‚</li>\n</ul>\n</li>\n<li><p>çŠ¶æ€ä½</p>\n<ul>\n<li><p>ç”¨äºåšçŠ¶æ€ä½æ ‡å¿—ï¼Œå¦‚æœå¤šä¸ªçº¿ç¨‹å»éœ€è¦æ ¹æ®ä¸€ä¸ªçŠ¶æ€ä½æ¥æ‰§è¡Œä¸€äº›æ“ä½œï¼Œä½¿ç”¨volatileä¿®é¥°å¯ä»¥ä¿è¯å†…å­˜å¯è§æ€§ã€‚</p>\n<p>ç”¨äºå•ä¾‹æ¨¡å¼ç”¨äºä¿è¯å†…å­˜å¯è§æ€§ï¼Œä»¥åŠé˜²æ­¢æŒ‡ä»¤é‡æ’åºã€‚ </p>\n</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"çº¿ç¨‹æ± \"><a href=\"#çº¿ç¨‹æ± \" class=\"headerlink\" title=\"çº¿ç¨‹æ± \"></a>çº¿ç¨‹æ± </h3><blockquote>\n<p>ä¸ºé¿å…çº¿ç¨‹é¢‘ç¹åˆ›å»ºå’Œé”€æ¯å¸¦æ¥çš„æ€§èƒ½é—®é¢˜ï¼Œè€Œæ± åŒ–çš„ä¸€ç§æ–¹æ¡ˆã€‚</p>\n</blockquote>\n<ul>\n<li><p>åˆ©ç”¨çº¿ç¨‹æ± ç®¡ç†å¹¶å¤ç”¨çº¿ç¨‹ã€æ§åˆ¶æœ€å¤§å¹¶å‘æ•°ç­‰ã€‚</p>\n</li>\n<li><p>å®ç°ä»»åŠ¡çº¿ç¨‹é˜Ÿåˆ—ç¼“å­˜ç­–ç•¥å’Œæ‹’ç»æœºåˆ¶ã€‚</p>\n</li>\n<li><p>å®ç°æŸäº›ä¸æ—¶é—´ç›¸å…³çš„åŠŸèƒ½ï¼Œå¦‚å®šæ—¶æ‰§è¡Œã€å‘¨æœŸæ‰§è¡Œç­‰ã€‚</p>\n</li>\n<li><p>éš”ç¦»çº¿ç¨‹ç¯å¢ƒã€‚æ¯”å¦‚ï¼Œäº¤æ˜“æœåŠ¡å’Œæœç´¢æœåŠ¡åœ¨åŒä¸€å°æœåŠ¡å™¨ä¸Šï¼Œåˆ†åˆ«å¼€å¯ä¸¤ä¸ªçº¿ç¨‹æ± ï¼Œäº¤æ˜“çº¿ç¨‹çš„èµ„æºæ¶ˆè€—æ˜æ˜¾è¦å¤§ï¼›å› æ­¤ï¼Œé€šè¿‡é…ç½®ç‹¬ç«‹çš„çº¿ç¨‹æ± å°†è¾ƒæ…¢çš„äº¤æ˜“æœåŠ¡ä¸æœç´¢æœåŠ¡éš”ç¦»å¼€ï¼Œé¿å…å„æœåŠ¡çº¿ç¨‹ç›¸äº’å½±å“ã€‚</p>\n</li>\n</ul>\n<blockquote>\n<p>è¿™é‡Œç›´æ¥å‚è€ƒé˜¿é‡Œå·´å·´çš„æ‰‹å†Œã€‚çº¿ç¨‹æ± ä¸å…è®¸ä½¿ç”¨ Executors å»åˆ›å»ºï¼Œè€Œæ˜¯é€šè¿‡ ThreadPoolExecutor çš„æ–¹å¼ï¼Œè¿™æ ·çš„å¤„ç†æ–¹å¼è®©å†™çš„è¯»è€…æ›´åŠ æ˜ç¡®çº¿ç¨‹æ± çš„è¿è¡Œè§„åˆ™ï¼Œè§„é¿èµ„æºè€—å°½çš„é£é™©ã€‚</p>\n</blockquote>\n<h4 id=\"ExecutorService\"><a href=\"#ExecutorService\" class=\"headerlink\" title=\"ExecutorService\"></a>ExecutorService</h4><blockquote>\n<p> é˜¿é‡Œå¼€å‘æ‰‹å†Œå»ºè®®ä½¿ç”¨ThreadPoolExecutor è¿™æ ·çš„å¤„ç†æ–¹å¼è®©å†™çš„åŒå­¦æ›´åŠ æ˜ç¡®çº¿ç¨‹æ± çš„è¿è¡Œè§„åˆ™ï¼Œè§„é¿èµ„æºè€—å°½çš„é£é™©ã€‚</p>\n</blockquote>\n<ul>\n<li>Executors.newSingleThreadPool()</li>\n<li>newFixedThreadPool()</li>\n<li>newcachedTheadPool()</li>\n<li>newScheduledThreadPool()</li>\n</ul>\n<h5 id=\"Executorsè¿”å›çš„çº¿ç¨‹æ± å¯¹è±¡çš„å¼Šç«¯\"><a href=\"#Executorsè¿”å›çš„çº¿ç¨‹æ± å¯¹è±¡çš„å¼Šç«¯\" class=\"headerlink\" title=\"Executorsè¿”å›çš„çº¿ç¨‹æ± å¯¹è±¡çš„å¼Šç«¯\"></a>Executorsè¿”å›çš„çº¿ç¨‹æ± å¯¹è±¡çš„å¼Šç«¯</h5><blockquote>\n<p>æŸ¥çœ‹ Executors çš„æºç ä¼šå‘ç°ï¼ŒExecutors.newFixedThreadPool()ã€Executors.newSingleThreadExecutor() å’Œ Executors.newCachedThreadPool() ç­‰æ–¹æ³•çš„åº•å±‚éƒ½æ˜¯é€šè¿‡ ThreadPoolExecutor å®ç°çš„ã€‚</p>\n</blockquote>\n<ul>\n<li>FixedThreadPool å’Œ SingleThreadPoolï¼šå…è®¸çš„è¯·æ±‚é˜Ÿåˆ—é•¿åº¦ä¸º Integer.MAX_VALUEï¼Œå¯èƒ½ä¼šå †ç§¯å¤§é‡çš„è¯·æ±‚ï¼Œä»è€Œå¯¼è‡´ OOMã€‚</li>\n<li>CachedThreadPool å’Œ ScheduledThreadPoolï¼šå…è®¸çš„åˆ›å»ºçº¿ç¨‹æ•°é‡ä¸º Integer.MAX_VALUEï¼Œå¯èƒ½ä¼šåˆ›å»ºå¤§é‡çš„çº¿ç¨‹ï¼Œä»è€Œå¯¼è‡´ OOMã€‚</li>\n</ul>\n<h4 id=\"ThreadPoolExecutorçš„æ ¸å¿ƒå‚æ•°\"><a href=\"#ThreadPoolExecutorçš„æ ¸å¿ƒå‚æ•°\" class=\"headerlink\" title=\"ThreadPoolExecutorçš„æ ¸å¿ƒå‚æ•°\"></a>ThreadPoolExecutorçš„æ ¸å¿ƒå‚æ•°</h4><figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span>Â <span class=\"title\">ThreadPoolExecutor</span><span class=\"params\">(<span class=\"keyword\">int</span>Â corePoolSize,</span></span></span><br><span class=\"line\"><span class=\"function\"><span class=\"params\">Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <span class=\"keyword\">int</span>Â maximumPoolSize,</span></span></span><br><span class=\"line\"><span class=\"function\"><span class=\"params\">Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <span class=\"keyword\">long</span>Â keepAliveTime,</span></span></span><br><span class=\"line\"><span class=\"function\"><span class=\"params\">Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â TimeUnitÂ unit,</span></span></span><br><span class=\"line\"><span class=\"function\"><span class=\"params\">Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â BlockingQueue&lt;Runnable&gt;Â workQueue,</span></span></span><br><span class=\"line\"><span class=\"function\"><span class=\"params\">Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ThreadFactoryÂ threadFactory,</span></span></span><br><span class=\"line\"><span class=\"function\"><span class=\"params\">Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â RejectedExecutionHandlerÂ handler)</span>Â </span>&#123;</span><br><span class=\"line\">Â Â Â Â <span class=\"keyword\">if</span>Â (corePoolSizeÂ &lt;Â <span class=\"number\">0</span>Â ||</span><br><span class=\"line\">Â Â Â Â Â Â Â Â maximumPoolSizeÂ &lt;=Â <span class=\"number\">0</span>Â ||</span><br><span class=\"line\">Â Â Â Â Â Â Â Â maximumPoolSizeÂ &lt;Â corePoolSizeÂ ||</span><br><span class=\"line\">Â Â Â Â Â Â Â Â keepAliveTimeÂ &lt;Â <span class=\"number\">0</span>)</span><br><span class=\"line\">Â Â Â Â Â Â Â Â <span class=\"keyword\">throw</span>Â <span class=\"keyword\">new</span>Â IllegalArgumentException();</span><br><span class=\"line\">Â Â Â Â <span class=\"keyword\">if</span>Â (workQueueÂ ==Â <span class=\"keyword\">null</span>Â ||Â threadFactoryÂ ==Â <span class=\"keyword\">null</span>Â ||Â handlerÂ ==Â <span class=\"keyword\">null</span>)</span><br><span class=\"line\">Â Â Â Â Â Â Â Â <span class=\"keyword\">throw</span>Â <span class=\"keyword\">new</span>Â NullPointerException();</span><br><span class=\"line\">Â Â Â Â <span class=\"keyword\">this</span>.accÂ =Â System.getSecurityManager()Â ==Â <span class=\"keyword\">null</span>Â ?</span><br><span class=\"line\">Â Â Â Â Â Â Â Â Â Â Â Â <span class=\"keyword\">null</span>Â :</span><br><span class=\"line\">Â Â Â Â Â Â Â Â Â Â Â Â AccessController.getContext();</span><br><span class=\"line\">Â Â Â Â <span class=\"keyword\">this</span>.corePoolSizeÂ =Â corePoolSize;  <span class=\"comment\">// å¸¸é©»æ ¸å¿ƒçº¿ç¨‹æ•°</span></span><br><span class=\"line\">Â Â Â Â <span class=\"keyword\">this</span>.maximumPoolSizeÂ =Â maximumPoolSize; <span class=\"comment\">//Â maximumPoolSizeÂ å¿…é¡»å¤§äºÂ 0ï¼Œä¸”å¿…é¡»å¤§äºÂ corePoolSize</span></span><br><span class=\"line\">Â Â Â Â <span class=\"keyword\">this</span>.workQueueÂ =Â workQueue;</span><br><span class=\"line\">Â Â Â Â <span class=\"keyword\">this</span>.keepAliveTimeÂ =Â unit.toNanos(keepAliveTime); <span class=\"comment\">// çº¿ç¨‹çš„å­˜æ´»æ—¶é—´</span></span><br><span class=\"line\">Â Â Â Â <span class=\"keyword\">this</span>.threadFactoryÂ =Â threadFactory; <span class=\"comment\">// çº¿ç¨‹çš„åˆ›å»ºå·¥å‚</span></span><br><span class=\"line\">Â Â Â Â <span class=\"keyword\">this</span>.handlerÂ =Â handler; <span class=\"comment\">// çº¿ç¨‹çš„åˆ›å»ºå·¥å‚</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>ç¬¬ 1 ä¸ªå‚æ•°ï¼šcorePoolSize è¡¨ç¤ºçº¿ç¨‹æ± çš„å¸¸é©»æ ¸å¿ƒçº¿ç¨‹æ•°ã€‚å¦‚æœè®¾ç½®ä¸º 0ï¼Œåˆ™è¡¨ç¤ºåœ¨æ²¡æœ‰ä»»ä½•ä»»åŠ¡æ—¶ï¼Œé”€æ¯çº¿ç¨‹æ± ï¼›å¦‚æœå¤§äº 0ï¼Œå³ä½¿æ²¡æœ‰ä»»åŠ¡æ—¶ä¹Ÿä¼šä¿è¯çº¿ç¨‹æ± çš„çº¿ç¨‹æ•°é‡ç­‰äºæ­¤å€¼ã€‚ä½†éœ€è¦æ³¨æ„ï¼Œæ­¤å€¼å¦‚æœè®¾ç½®çš„æ¯”è¾ƒå°ï¼Œåˆ™ä¼šé¢‘ç¹çš„åˆ›å»ºå’Œé”€æ¯çº¿ç¨‹ï¼ˆåˆ›å»ºå’Œé”€æ¯çš„åŸå› ä¼šåœ¨æœ¬è¯¾æ—¶çš„ä¸‹åŠéƒ¨åˆ†è®²åˆ°ï¼‰ï¼›å¦‚æœè®¾ç½®çš„æ¯”è¾ƒå¤§ï¼Œåˆ™ä¼šæµªè´¹ç³»ç»Ÿèµ„æºï¼Œæ‰€ä»¥å¼€å‘è€…éœ€è¦æ ¹æ®è‡ªå·±çš„å®é™…ä¸šåŠ¡æ¥è°ƒæ•´æ­¤å€¼ã€‚</li>\n<li>ç¬¬ 2 ä¸ªå‚æ•°ï¼šmaximumPoolSize è¡¨ç¤ºçº¿ç¨‹æ± åœ¨ä»»åŠ¡æœ€å¤šæ—¶ï¼Œæœ€å¤§å¯ä»¥åˆ›å»ºçš„çº¿ç¨‹æ•°ã€‚å®˜æ–¹è§„å®šæ­¤å€¼å¿…é¡»å¤§äº 0ï¼Œä¹Ÿå¿…é¡»å¤§äºç­‰äº corePoolSizeï¼Œæ­¤å€¼åªæœ‰åœ¨ä»»åŠ¡æ¯”è¾ƒå¤šï¼Œä¸”ä¸èƒ½å­˜æ”¾åœ¨ä»»åŠ¡é˜Ÿåˆ—æ—¶ï¼Œæ‰ä¼šç”¨åˆ°ã€‚</li>\n<li>ç¬¬ 3 ä¸ªå‚æ•°ï¼škeepAliveTime è¡¨ç¤ºçº¿ç¨‹çš„å­˜æ´»æ—¶é—´ï¼Œå½“çº¿ç¨‹æ± ç©ºé—²æ—¶å¹¶ä¸”è¶…è¿‡äº†æ­¤æ—¶é—´ï¼Œå¤šä½™çš„çº¿ç¨‹å°±ä¼šé”€æ¯ï¼Œç›´åˆ°çº¿ç¨‹æ± ä¸­çš„çº¿ç¨‹æ•°é‡é”€æ¯çš„ç­‰äº corePoolSize ä¸ºæ­¢ï¼Œå¦‚æœ maximumPoolSize ç­‰äº corePoolSizeï¼Œé‚£ä¹ˆçº¿ç¨‹æ± åœ¨ç©ºé—²çš„æ—¶å€™ä¹Ÿä¸ä¼šé”€æ¯ä»»ä½•çº¿ç¨‹ã€‚</li>\n<li>ç¬¬ 4 ä¸ªå‚æ•°ï¼šunit è¡¨ç¤ºå­˜æ´»æ—¶é—´çš„å•ä½ï¼Œå®ƒæ˜¯é…åˆ keepAliveTime å‚æ•°å…±åŒä½¿ç”¨çš„ã€‚</li>\n<li>ç¬¬ 5 ä¸ªå‚æ•°ï¼šworkQueue è¡¨ç¤ºçº¿ç¨‹æ± æ‰§è¡Œçš„ä»»åŠ¡é˜Ÿåˆ—ï¼Œå½“çº¿ç¨‹æ± çš„æ‰€æœ‰çº¿ç¨‹éƒ½åœ¨å¤„ç†ä»»åŠ¡æ—¶ï¼Œå¦‚æœæ¥äº†æ–°ä»»åŠ¡å°±ä¼šç¼“å­˜åˆ°æ­¤ä»»åŠ¡é˜Ÿåˆ—ä¸­æ’é˜Ÿç­‰å¾…æ‰§è¡Œã€‚</li>\n<li>ç¬¬ 6 ä¸ªå‚æ•°ï¼šthreadFactory è¡¨ç¤ºçº¿ç¨‹çš„åˆ›å»ºå·¥å‚ï¼Œæ­¤å‚æ•°ä¸€èˆ¬ç”¨çš„æ¯”è¾ƒå°‘ï¼Œæˆ‘ä»¬é€šå¸¸åœ¨åˆ›å»ºçº¿ç¨‹æ± æ—¶ä¸æŒ‡å®šæ­¤å‚æ•°ï¼Œå®ƒä¼šä½¿ç”¨é»˜è®¤çš„çº¿ç¨‹åˆ›å»ºå·¥å‚çš„æ–¹æ³•æ¥åˆ›å»ºçº¿ç¨‹ã€‚</li>\n<li>ç¬¬ 7 ä¸ªå‚æ•°ï¼šRejectedExecutionHandler è¡¨ç¤ºæŒ‡å®šcï¼Œå½“çº¿ç¨‹æ± çš„ä»»åŠ¡å·²ç»åœ¨ç¼“å­˜é˜Ÿåˆ— workQueue ä¸­å­˜å‚¨æ»¡äº†ä¹‹åï¼Œå¹¶ä¸”ä¸èƒ½åˆ›å»ºæ–°çš„çº¿ç¨‹æ¥æ‰§è¡Œæ­¤ä»»åŠ¡æ—¶ï¼Œå°±ä¼šç”¨åˆ°æ­¤æ‹’ç»ç­–ç•¥ï¼Œå®ƒå±äºä¸€ç§é™æµä¿æŠ¤çš„æœºåˆ¶ã€‚</li>\n<li>åŸç†<ul>\n<li>å¦‚æœå½“å‰æ± â¼¤â¼© poolSize &lt; corePoolSizeï¼Œåˆ™åˆ›å»ºæ–°çº¿ç¨‹æ‰§â¾ä»»åŠ¡ã€‚</li>\n<li>å¦‚æœå½“å‰æ± â¼¤â¼© poolSize &gt; corePoolSizeï¼Œä¸”ç­‰å¾…é˜Ÿåˆ—æœªæ»¡ï¼Œåˆ™è¿›â¼Šç­‰å¾…é˜Ÿåˆ—ã€‚</li>\n<li>å¦‚æœå½“å‰æ± â¼¤â¼© poolSize &gt; corePoolSize ä¸”â¼©äº maximumPoolSize ï¼Œä¸”ç­‰å¾…é˜Ÿåˆ—å·²æ»¡ï¼Œåˆ™åˆ›å»ºæ–°çº¿ç¨‹æ‰§â¾ä»»åŠ¡ã€‚</li>\n<li>å¦‚æœå½“å‰æ± â¼¤â¼© poolSize &gt; corePoolSize ä¸”â¼¤äº maximumPoolSize ï¼Œä¸”ç­‰å¾…é˜Ÿåˆ—å·²æ»¡ï¼Œåˆ™è°ƒâ½¤æ‹’ç»ç­–ç•¥æ¥å¤„ç†è¯¥ä»»åŠ¡ã€‚<ul>\n<li>çº¿ç¨‹æ± â¾¥çš„æ¯ä¸ªçº¿ç¨‹æ‰§â¾å®Œä»»åŠ¡åä¸ä¼šâ½´åˆ»é€€å‡ºï¼Œâ½½æ˜¯ä¼šå»æ£€æŸ¥ä¸‹ç­‰å¾…é˜Ÿåˆ—â¾¥æ˜¯å¦è¿˜æœ‰çº¿ç¨‹ä»»åŠ¡éœ€è¦æ‰§â¾ï¼Œå¦‚æœåœ¨ keepAliveTime â¾¥ç­‰ä¸åˆ°æ–°çš„ä»»åŠ¡äº†ï¼Œé‚£ä¹ˆçº¿ç¨‹å°±ä¼šé€€å‡ºã€‚</li>\n</ul>\n</li>\n</ul>\n</li>\n<li><strong><code>ThreadPoolExecutor</code> 3 ä¸ªæœ€é‡è¦çš„å‚æ•°ï¼š</strong><ul>\n<li><strong><code>corePoolSize</code> :</strong> æ ¸å¿ƒçº¿ç¨‹æ•°çº¿ç¨‹æ•°å®šä¹‰äº†æœ€å°å¯ä»¥åŒæ—¶è¿è¡Œçš„çº¿ç¨‹æ•°é‡ã€‚</li>\n<li><strong><code>maximumPoolSize</code> :</strong> å½“é˜Ÿåˆ—ä¸­å­˜æ”¾çš„ä»»åŠ¡è¾¾åˆ°é˜Ÿåˆ—å®¹é‡çš„æ—¶å€™ï¼Œå½“å‰å¯ä»¥åŒæ—¶è¿è¡Œçš„çº¿ç¨‹æ•°é‡å˜ä¸ºæœ€å¤§çº¿ç¨‹æ•°ã€‚</li>\n<li><strong><code>workQueue</code>:</strong> å½“æ–°ä»»åŠ¡æ¥çš„æ—¶å€™ä¼šå…ˆåˆ¤æ–­å½“å‰è¿è¡Œçš„çº¿ç¨‹æ•°é‡æ˜¯å¦è¾¾åˆ°æ ¸å¿ƒçº¿ç¨‹æ•°ï¼Œå¦‚æœè¾¾åˆ°çš„è¯ï¼Œæ–°ä»»åŠ¡å°±ä¼šè¢«å­˜æ”¾åœ¨é˜Ÿåˆ—ä¸­ã€‚</li>\n</ul>\n</li>\n</ul>\n<h4 id=\"çº¿ç¨‹æ± ä»»åŠ¡æ‰§è¡Œçš„ä¸»è¦æµç¨‹\"><a href=\"#çº¿ç¨‹æ± ä»»åŠ¡æ‰§è¡Œçš„ä¸»è¦æµç¨‹\" class=\"headerlink\" title=\"çº¿ç¨‹æ± ä»»åŠ¡æ‰§è¡Œçš„ä¸»è¦æµç¨‹\"></a>çº¿ç¨‹æ± ä»»åŠ¡æ‰§è¡Œçš„ä¸»è¦æµç¨‹</h4><p><img src=\"https://z201.oss-cn-shanghai.aliyuncs.com/JavaNote/%E7%BA%BF%E7%A8%8B%E6%B1%A0%E4%B8%BB%E8%A6%81%E6%B5%81%E7%A8%8B.png\"></p>\n<h4 id=\"execute-VS-submit\"><a href=\"#execute-VS-submit\" class=\"headerlink\" title=\"execute() VS submit()\"></a>execute() VS submit()</h4><blockquote>\n<p>execute() å’Œ submit() éƒ½æ˜¯ç”¨æ¥æ‰§è¡Œçº¿ç¨‹æ± ä»»åŠ¡çš„ï¼Œå®ƒä»¬æœ€ä¸»è¦çš„åŒºåˆ«æ˜¯ï¼Œsubmit() æ–¹æ³•å¯ä»¥æ¥æ”¶çº¿ç¨‹æ± æ‰§è¡Œçš„è¿”å›å€¼ï¼Œè€Œ execute() ä¸èƒ½æ¥æ”¶è¿”å›å€¼ã€‚</p>\n</blockquote>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\">ThreadPoolExecutorÂ executorÂ =Â <span class=\"keyword\">new</span>Â ThreadPoolExecutor(<span class=\"number\">2</span>,Â <span class=\"number\">10</span>,Â <span class=\"number\">10L</span>,</span><br><span class=\"line\">Â Â Â Â Â Â Â Â TimeUnit.SECONDS,Â <span class=\"keyword\">new</span>Â LinkedBlockingQueue(<span class=\"number\">20</span>));</span><br><span class=\"line\"><span class=\"comment\">//Â executeÂ ä½¿ç”¨</span></span><br><span class=\"line\">executor.execute(<span class=\"keyword\">new</span>Â Runnable()Â &#123;</span><br><span class=\"line\">Â Â Â Â <span class=\"meta\">@Override</span></span><br><span class=\"line\">Â Â Â Â <span class=\"function\"><span class=\"keyword\">public</span>Â <span class=\"keyword\">void</span>Â <span class=\"title\">run</span><span class=\"params\">()</span>Â </span>&#123;</span><br><span class=\"line\">Â Â Â Â Â Â Â Â System.out.println(<span class=\"string\">\"Hello,Â execute.\"</span>);</span><br><span class=\"line\">Â Â Â Â &#125;</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"><span class=\"comment\">//Â submitÂ ä½¿ç”¨</span></span><br><span class=\"line\">Future&lt;String&gt;Â futureÂ =Â executor.submit(<span class=\"keyword\">new</span>Â Callable&lt;String&gt;()Â &#123;</span><br><span class=\"line\">Â Â Â Â <span class=\"meta\">@Override</span></span><br><span class=\"line\">Â Â Â Â <span class=\"function\"><span class=\"keyword\">public</span>Â StringÂ <span class=\"title\">call</span><span class=\"params\">()</span>Â <span class=\"keyword\">throws</span>Â ExceptionÂ </span>&#123;</span><br><span class=\"line\">Â Â Â Â Â Â Â Â System.out.println(<span class=\"string\">\"Hello,Â submit.\"</span>);</span><br><span class=\"line\">Â Â Â Â Â Â Â Â <span class=\"keyword\">return</span>Â <span class=\"string\">\"Success\"</span>;</span><br><span class=\"line\">Â Â Â Â &#125;</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\">System.out.println(future.get());</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// æ‰§è¡Œç»“æœ</span></span><br><span class=\"line\"><span class=\"comment\">//Hello,Â submit.</span></span><br><span class=\"line\"><span class=\"comment\">//Hello,Â execute.</span></span><br><span class=\"line\"><span class=\"comment\">//Success</span></span><br></pre></td></tr></table></figure>\n\n<h4 id=\"çº¿ç¨‹æ± çš„æ‹’ç»ç­–ç•¥\"><a href=\"#çº¿ç¨‹æ± çš„æ‹’ç»ç­–ç•¥\" class=\"headerlink\" title=\"çº¿ç¨‹æ± çš„æ‹’ç»ç­–ç•¥\"></a>çº¿ç¨‹æ± çš„æ‹’ç»ç­–ç•¥</h4><blockquote>\n<p>å½“çº¿ç¨‹æ± ä¸­çš„ä»»åŠ¡é˜Ÿåˆ—å·²ç»è¢«å­˜æ»¡ï¼Œå†æœ‰ä»»åŠ¡æ·»åŠ æ—¶ä¼šå…ˆåˆ¤æ–­å½“å‰çº¿ç¨‹æ± ä¸­çš„çº¿ç¨‹æ•°æ˜¯å¦å¤§äºç­‰äºçº¿ç¨‹æ± çš„æœ€å¤§å€¼ï¼Œå¦‚æœæ˜¯ï¼Œåˆ™ä¼šè§¦å‘çº¿ç¨‹æ± çš„æ‹’ç»ç­–ç•¥ã€‚</p>\n</blockquote>\n<ul>\n<li><p>Java è‡ªå¸¦çš„æ‹’ç»ç­–ç•¥æœ‰ 4 ç§ï¼š</p>\n<ul>\n<li>AbortPolicyï¼Œç»ˆæ­¢ç­–ç•¥ï¼Œçº¿ç¨‹æ± ä¼šæŠ›å‡ºå¼‚å¸¸å¹¶ç»ˆæ­¢æ‰§è¡Œï¼Œå®ƒæ˜¯é»˜è®¤çš„æ‹’ç»ç­–ç•¥ã€‚</li>\n<li>CallerRunsPolicyï¼ŒæŠŠä»»åŠ¡äº¤ç»™å½“å‰çº¿ç¨‹æ¥æ‰§è¡Œã€‚</li>\n<li>DiscardPolicyï¼Œå¿½ç•¥æ­¤ä»»åŠ¡ï¼ˆæœ€æ–°çš„ä»»åŠ¡ï¼‰ã€‚</li>\n<li>DiscardOldestPolicyï¼Œå¿½ç•¥æœ€æ—©çš„ä»»åŠ¡ï¼ˆæœ€å…ˆåŠ å…¥é˜Ÿåˆ—çš„ä»»åŠ¡ï¼‰ã€‚</li>\n</ul>\n</li>\n<li><p>æ¼”ç¤ºAbortPolicy</p>\n</li>\n</ul>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\">ThreadPoolExecutorÂ executorÂ =Â <span class=\"keyword\">new</span>Â ThreadPoolExecutor(<span class=\"number\">1</span>,Â <span class=\"number\">3</span>,Â <span class=\"number\">10</span>,</span><br><span class=\"line\">Â Â Â Â Â Â Â Â TimeUnit.SECONDS,Â <span class=\"keyword\">new</span>Â LinkedBlockingQueue&lt;&gt;(<span class=\"number\">2</span>),</span><br><span class=\"line\">Â Â Â Â Â Â Â Â <span class=\"keyword\">new</span>Â ThreadPoolExecutor.AbortPolicy());Â <span class=\"comment\">//Â æ·»åŠ Â AbortPolicyÂ æ‹’ç»ç­–ç•¥</span></span><br><span class=\"line\"><span class=\"keyword\">for</span>Â (<span class=\"keyword\">int</span>Â iÂ =Â <span class=\"number\">0</span>;Â iÂ &lt;Â <span class=\"number\">6</span>;Â i++)Â &#123;</span><br><span class=\"line\">Â Â Â Â executor.execute(()Â -&gt;Â &#123;</span><br><span class=\"line\">Â Â Â Â Â Â Â Â System.out.println(Thread.currentThread().getName());</span><br><span class=\"line\">Â Â Â Â &#125;);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>ç»“æœ</p>\n</blockquote>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">pool-1-thread-1</span><br><span class=\"line\">pool-1-thread-1</span><br><span class=\"line\">pool-1-thread-1</span><br><span class=\"line\">pool-1-thread-3</span><br><span class=\"line\">pool-1-thread-2</span><br><span class=\"line\">ExceptionÂ inÂ threadÂ &quot;main&quot;Â java.util.concurrent.RejectedExecutionException:Â TaskÂ com.lagou.interview.ThreadPoolExample$$Lambda$1&#x2F;1096979270@448139f0Â rejectedÂ fromÂ java.util.concurrent.ThreadPoolExecutor@7cca494b[Running,Â poolÂ sizeÂ &#x3D;Â 3,Â activeÂ threadsÂ &#x3D;Â 3,Â queuedÂ tasksÂ &#x3D;Â 2,Â completedÂ tasksÂ &#x3D;Â 0]</span><br><span class=\"line\">Â atÂ java.util.concurrent.ThreadPoolExecutor$AbortPolicy.rejectedExecution(ThreadPoolExecutor.java:2063)</span><br><span class=\"line\">Â atÂ java.util.concurrent.ThreadPoolExecutor.reject(ThreadPoolExecutor.java:830)</span><br><span class=\"line\">Â atÂ java.util.concurrent.ThreadPoolExecutor.execute(ThreadPoolExecutor.java:1379)</span><br><span class=\"line\">Â atÂ com.lagou.interview.ThreadPoolExample.rejected(ThreadPoolExample.java:35)</span><br><span class=\"line\">Â atÂ com.lagou.interview.ThreadPoolExample.main(ThreadPoolExample.java:26)</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>ç¬¬ 6 ä¸ªä»»åŠ¡æ¥çš„æ—¶å€™ï¼Œçº¿ç¨‹æ± åˆ™æ‰§è¡Œäº† AbortPolicy  æ‹’ç»ç­–ç•¥ï¼ŒæŠ›å‡ºäº†å¼‚å¸¸ã€‚å› ä¸ºé˜Ÿåˆ—æœ€å¤šå­˜å‚¨ 2 ä¸ªä»»åŠ¡ï¼Œæœ€å¤§å¯ä»¥åˆ›å»º 3 ä¸ªçº¿ç¨‹æ¥æ‰§è¡Œä»»åŠ¡ï¼ˆ2+3=5ï¼‰ï¼Œæ‰€ä»¥å½“ç¬¬ 6 ä¸ªä»»åŠ¡æ¥çš„æ—¶å€™ï¼Œæ­¤çº¿ç¨‹æ± å°±â€œå¿™â€ä¸è¿‡æ¥äº†ã€‚</li>\n</ul>\n<h4 id=\"workQueue\"><a href=\"#workQueue\" class=\"headerlink\" title=\"workQueue\"></a>workQueue</h4><h5 id=\"BlockingQueue\"><a href=\"#BlockingQueue\" class=\"headerlink\" title=\"BlockingQueue\"></a>BlockingQueue</h5><h5 id=\"ArrayBlockingQueue\"><a href=\"#ArrayBlockingQueue\" class=\"headerlink\" title=\"ArrayBlockingQueue\"></a>ArrayBlockingQueue</h5><blockquote>\n<p>â¼€ä¸ªç”±æ•°ç»„ç»“æ„ç»„æˆçš„æœ‰ç•Œé˜»å¡é˜Ÿåˆ—ã€‚</p>\n</blockquote>\n<ul>\n<li>ç”¨æ•°ç»„å®ç°çš„æœ‰ç•Œé˜»å¡é˜Ÿåˆ—ã€‚æ­¤é˜Ÿåˆ—æŒ‰ç…§å…ˆè¿›å…ˆå‡ºï¼ˆFIFOï¼‰çš„åŸåˆ™å¯¹å…ƒç´ è¿›è¡Œæ’åºã€‚é»˜è®¤æƒ…å†µä¸‹ä¸ä¿è¯è®¿é—®è€…å…¬å¹³çš„è®¿é—®é˜Ÿåˆ—ï¼Œæ‰€è°“å…¬å¹³è®¿é—®é˜Ÿåˆ—æ˜¯æŒ‡é˜»å¡çš„æ‰€æœ‰ç”Ÿäº§è€…çº¿ç¨‹æˆ–æ¶ˆè´¹è€…çº¿ç¨‹ï¼Œå½“é˜Ÿåˆ—å¯ç”¨æ—¶ï¼Œå¯ä»¥æŒ‰ç…§é˜»å¡çš„å…ˆåé¡ºåºè®¿é—®é˜Ÿåˆ—ï¼Œå³å…ˆé˜»å¡çš„ç”Ÿäº§è€…çº¿ç¨‹ï¼Œå¯ä»¥å…ˆå¾€é˜Ÿåˆ—é‡Œæ’å…¥å…ƒç´ ï¼Œå…ˆé˜»å¡çš„æ¶ˆè´¹è€…çº¿ç¨‹ï¼Œå¯ä»¥å…ˆä»é˜Ÿåˆ—é‡Œè·å–å…ƒç´ ã€‚é€šå¸¸æƒ…å†µä¸‹ä¸ºäº†ä¿è¯å…¬å¹³æ€§ä¼šé™ä½ååé‡ã€‚</li>\n</ul>\n<h5 id=\"LinkedBlockingQueue\"><a href=\"#LinkedBlockingQueue\" class=\"headerlink\" title=\"LinkedBlockingQueue\"></a>LinkedBlockingQueue</h5><blockquote>\n<p>â¼€ä¸ªç”±é“¾è¡¨ç»“æ„ç»„æˆçš„æœ‰ç•Œé˜»å¡é˜Ÿåˆ—ã€‚</p>\n</blockquote>\n<ul>\n<li>åŸºäºé“¾è¡¨çš„é˜»å¡é˜Ÿåˆ—ï¼ŒåŒ ArrayListBlockingQueue ç±»ä¼¼ï¼Œæ­¤é˜Ÿåˆ—æŒ‰ç…§å…ˆè¿›å…ˆå‡ºï¼ˆFIFOï¼‰çš„åŸåˆ™å¯¹å…ƒç´ è¿›è¡Œæ’åºã€‚è€Œ LinkedBlockingQueue ä¹‹æ‰€ä»¥èƒ½å¤Ÿé«˜æ•ˆçš„å¤„ç†å¹¶å‘æ•°æ®ï¼Œè¿˜å› ä¸ºå…¶å¯¹äºç”Ÿäº§è€…ç«¯å’Œæ¶ˆè´¹è€…ç«¯åˆ†åˆ«é‡‡ç”¨äº†ç‹¬ç«‹çš„é”æ¥æ§åˆ¶æ•°æ®åŒæ­¥ï¼Œè¿™ä¹Ÿæ„å‘³ç€åœ¨é«˜å¹¶å‘çš„æƒ…å†µä¸‹ç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…å¯ä»¥å¹¶è¡Œåœ°æ“ä½œé˜Ÿåˆ—ä¸­çš„æ•°æ®ï¼Œä»¥æ­¤æ¥æé«˜æ•´ä¸ªé˜Ÿåˆ—çš„å¹¶å‘æ€§èƒ½ã€‚LinkedBlockingQueue ä¼šé»˜è®¤ä¸€ä¸ªç±»ä¼¼æ— é™å¤§å°çš„å®¹é‡ï¼ˆInteger.MAX_VALUEï¼‰ã€‚</li>\n</ul>\n<h5 id=\"PriorityBlockingQueue\"><a href=\"#PriorityBlockingQueue\" class=\"headerlink\" title=\"PriorityBlockingQueue\"></a>PriorityBlockingQueue</h5><blockquote>\n<p>â¼€ä¸ªâ½€æŒä¼˜å…ˆçº§æ’åºçš„â½†ç•Œé˜»å¡é˜Ÿåˆ—ã€‚</p>\n</blockquote>\n<ul>\n<li>æ˜¯ä¸€ä¸ªæ”¯æŒä¼˜å…ˆçº§çš„æ— ç•Œé˜Ÿåˆ—ã€‚é»˜è®¤æƒ…å†µä¸‹å…ƒç´ é‡‡å–è‡ªç„¶é¡ºåºå‡åºæ’åˆ—ã€‚å¯ä»¥è‡ªå®šä¹‰å®ç°compareTo()æ–¹æ³•æ¥æŒ‡å®šå…ƒç´ è¿›è¡Œæ’åºè§„åˆ™ï¼Œæˆ–è€…åˆå§‹åŒ– PriorityBlockingQueue æ—¶ï¼ŒæŒ‡å®šæ„é€ å‚æ•° Comparator æ¥å¯¹å…ƒç´ è¿›è¡Œæ’åºã€‚éœ€è¦æ³¨æ„çš„æ˜¯ä¸èƒ½ä¿è¯åŒä¼˜å…ˆçº§å…ƒç´ çš„é¡ºåºã€‚</li>\n</ul>\n<h5 id=\"DelayQueue\"><a href=\"#DelayQueue\" class=\"headerlink\" title=\"DelayQueue\"></a>DelayQueue</h5><blockquote>\n<p>â¼€ä¸ªä½¿â½¤ä¼˜å…ˆçº§é˜Ÿåˆ—å®ç°çš„â½†ç•Œé˜»å¡é˜Ÿåˆ—ã€‚</p>\n</blockquote>\n<ul>\n<li>æ˜¯ä¸€ä¸ªæ”¯æŒå»¶æ—¶è·å–å…ƒç´ çš„æ— ç•Œé˜»å¡é˜Ÿåˆ—ã€‚é˜Ÿåˆ—ä½¿ç”¨ PriorityQueue æ¥å®ç°ã€‚é˜Ÿåˆ—ä¸­çš„å…ƒç´ å¿…é¡»å®ç° Delayed æ¥å£ï¼Œåœ¨åˆ›å»ºå…ƒç´ æ—¶å¯ä»¥æŒ‡å®šå¤šä¹…æ‰èƒ½ä»é˜Ÿåˆ—ä¸­è·å–å½“å‰å…ƒç´ ã€‚åªæœ‰åœ¨å»¶è¿ŸæœŸæ»¡æ—¶æ‰èƒ½ä»é˜Ÿåˆ—ä¸­æå–å…ƒç´ ã€‚</li>\n</ul>\n<h5 id=\"SynchronousQueue\"><a href=\"#SynchronousQueue\" class=\"headerlink\" title=\"SynchronousQueue\"></a>SynchronousQueue</h5><blockquote>\n<p>â¼€ä¸ªä¸å­˜å‚¨å…ƒç´ çš„é˜»å¡é˜Ÿåˆ—ã€‚</p>\n</blockquote>\n<ul>\n<li>æ˜¯ä¸€ä¸ªä¸å­˜å‚¨å…ƒç´ çš„é˜»å¡é˜Ÿåˆ—ã€‚æ¯ä¸€ä¸ª put æ“ä½œå¿…é¡»ç­‰å¾…ä¸€ä¸ª take æ“ä½œï¼Œå¦åˆ™ä¸èƒ½ç»§ç»­æ·»åŠ å…ƒç´ ã€‚SynchronousQueue å¯ä»¥çœ‹æˆæ˜¯ä¸€ä¸ªä¼ çƒæ‰‹ï¼Œè´Ÿè´£æŠŠç”Ÿäº§è€…çº¿ç¨‹å¤„ç†çš„æ•°æ®ç›´æ¥ä¼ é€’ç»™æ¶ˆè´¹è€…çº¿ç¨‹ã€‚é˜Ÿåˆ—æœ¬èº«å¹¶ä¸å­˜å‚¨ä»»ä½•å…ƒç´ ï¼Œéå¸¸é€‚åˆäºä¼ é€’æ€§åœºæ™¯,æ¯”å¦‚åœ¨ä¸€ä¸ªçº¿ç¨‹ä¸­ä½¿ç”¨çš„æ•°æ®ï¼Œä¼ é€’ç»™å¦å¤–ä¸€ä¸ªçº¿ç¨‹ä½¿ç”¨ï¼Œ SynchronousQueue çš„ååé‡é«˜äºLinkedBlockingQueue å’ŒArrayBlockingQueueã€‚</li>\n</ul>\n<h5 id=\"LinkedTransferQueue\"><a href=\"#LinkedTransferQueue\" class=\"headerlink\" title=\"LinkedTransferQueue\"></a>LinkedTransferQueue</h5><blockquote>\n<p>â¼€ä¸ªç”±é“¾è¡¨ç»“æ„ç»„æˆçš„â½†ç•Œé˜»å¡é˜Ÿåˆ—ã€‚</p>\n</blockquote>\n<ul>\n<li>æ˜¯ä¸€ä¸ªç”±é“¾è¡¨ç»“æ„ç»„æˆçš„æ— ç•Œé˜»å¡ TransferQueue é˜Ÿåˆ—ã€‚ç›¸å¯¹äºå…¶ä»–é˜»å¡é˜Ÿåˆ—ï¼ŒLinkedTransferQueue å¤šäº† tryTransfer å’Œ transfer æ–¹æ³•ã€‚<ul>\n<li>transfer æ–¹æ³•ï¼šå¦‚æœå½“å‰æœ‰æ¶ˆè´¹è€…æ­£åœ¨ç­‰å¾…æ¥æ”¶å…ƒç´ ï¼ˆæ¶ˆè´¹è€…ä½¿ç”¨ take()æ–¹æ³•æˆ–å¸¦æ—¶é—´é™åˆ¶çš„poll()æ–¹æ³•æ—¶ï¼‰ï¼Œtransfer æ–¹æ³•å¯ä»¥æŠŠç”Ÿäº§è€…ä¼ å…¥çš„å…ƒç´ ç«‹åˆ» transferï¼ˆä¼ è¾“ï¼‰ç»™æ¶ˆè´¹è€…ã€‚å¦‚æœæ²¡æœ‰æ¶ˆè´¹è€…åœ¨ç­‰å¾…æ¥æ”¶å…ƒç´ ï¼Œtransfer æ–¹æ³•ä¼šå°†å…ƒç´ å­˜æ”¾åœ¨é˜Ÿåˆ—çš„ tail èŠ‚ç‚¹ï¼Œå¹¶ç­‰åˆ°è¯¥å…ƒç´ è¢«æ¶ˆè´¹è€…æ¶ˆè´¹äº†æ‰è¿”å›ã€‚</li>\n<li>tryTransfer æ–¹æ³•ã€‚åˆ™æ˜¯ç”¨æ¥è¯•æ¢ä¸‹ç”Ÿäº§è€…ä¼ å…¥çš„å…ƒç´ æ˜¯å¦èƒ½ç›´æ¥ä¼ ç»™æ¶ˆè´¹è€…ã€‚å¦‚æœæ²¡æœ‰æ¶ˆè´¹è€…ç­‰å¾…æ¥æ”¶å…ƒç´ ï¼Œåˆ™è¿”å› falseã€‚å’Œ transfer æ–¹æ³•çš„åŒºåˆ«æ˜¯ tryTransfer æ–¹æ³•æ— è®ºæ¶ˆè´¹è€…æ˜¯å¦æ¥æ”¶ï¼Œæ–¹æ³•ç«‹å³è¿”å›ã€‚è€Œ transfer æ–¹æ³•æ˜¯å¿…é¡»ç­‰åˆ°æ¶ˆè´¹è€…æ¶ˆè´¹äº†æ‰è¿”å›ã€‚</li>\n</ul>\n</li>\n<li>å¯¹äºå¸¦æœ‰æ—¶é—´é™åˆ¶çš„ tryTransfer(E e, long timeout, TimeUnit unit)æ–¹æ³•ï¼Œåˆ™æ˜¯è¯•å›¾æŠŠç”Ÿäº§è€…ä¼ å…¥çš„å…ƒç´ ç›´æ¥ä¼ ç»™æ¶ˆè´¹è€…ï¼Œä½†æ˜¯å¦‚æœæ²¡æœ‰æ¶ˆè´¹è€…æ¶ˆè´¹è¯¥å…ƒç´ åˆ™ç­‰å¾…æŒ‡å®šçš„æ—¶é—´å†è¿”å›ï¼Œå¦‚æœè¶…æ—¶è¿˜æ²¡æ¶ˆè´¹å…ƒç´ ï¼Œåˆ™è¿”å› falseï¼Œå¦‚æœåœ¨è¶…æ—¶æ—¶é—´å†…æ¶ˆè´¹äº†å…ƒç´ ï¼Œåˆ™è¿”å› trueã€‚</li>\n</ul>\n<h5 id=\"LinkedBlockingDeque\"><a href=\"#LinkedBlockingDeque\" class=\"headerlink\" title=\"LinkedBlockingDeque\"></a>LinkedBlockingDeque</h5><blockquote>\n<p>â¼€ä¸ªç”±é“¾è¡¨ç»“æ„ç»„æˆçš„åŒå‘é˜»å¡é˜Ÿåˆ—ã€‚</p>\n</blockquote>\n<ul>\n<li>æ˜¯ä¸€ä¸ªç”±é“¾è¡¨ç»“æ„ç»„æˆçš„åŒå‘é˜»å¡é˜Ÿåˆ—ã€‚æ‰€è°“åŒå‘é˜Ÿåˆ—æŒ‡çš„ä½ å¯ä»¥ä»é˜Ÿåˆ—çš„ä¸¤ç«¯æ’å…¥å’Œç§»å‡ºå…ƒç´ ã€‚åŒç«¯é˜Ÿåˆ—å› ä¸ºå¤šäº†ä¸€ä¸ªæ“ä½œé˜Ÿåˆ—çš„å…¥å£ï¼Œåœ¨å¤šçº¿ç¨‹åŒæ—¶å…¥é˜Ÿæ—¶ï¼Œä¹Ÿå°±å‡å°‘äº†ä¸€åŠçš„ç«äº‰ã€‚</li>\n</ul>\n<h5 id=\"BlockingDeque\"><a href=\"#BlockingDeque\" class=\"headerlink\" title=\"BlockingDeque\"></a>BlockingDeque</h5><h5 id=\"LinkedBlockingDeque-1\"><a href=\"#LinkedBlockingDeque-1\" class=\"headerlink\" title=\"LinkedBlockingDeque\"></a>LinkedBlockingDeque</h5><h5 id=\"TransferQueue\"><a href=\"#TransferQueue\" class=\"headerlink\" title=\"TransferQueue\"></a>TransferQueue</h5><h4 id=\"å¦‚æœä½ æäº¤ä»»åŠ¡æ—¶ï¼Œçº¿ç¨‹æ± é˜Ÿåˆ—å·²æ»¡ã€‚ä¼šæ—¶å‘ä¼šâ½£ä»€ä¹ˆï¼Ÿ\"><a href=\"#å¦‚æœä½ æäº¤ä»»åŠ¡æ—¶ï¼Œçº¿ç¨‹æ± é˜Ÿåˆ—å·²æ»¡ã€‚ä¼šæ—¶å‘ä¼šâ½£ä»€ä¹ˆï¼Ÿ\" class=\"headerlink\" title=\"å¦‚æœä½ æäº¤ä»»åŠ¡æ—¶ï¼Œçº¿ç¨‹æ± é˜Ÿåˆ—å·²æ»¡ã€‚ä¼šæ—¶å‘ä¼šâ½£ä»€ä¹ˆï¼Ÿ\"></a>å¦‚æœä½ æäº¤ä»»åŠ¡æ—¶ï¼Œçº¿ç¨‹æ± é˜Ÿåˆ—å·²æ»¡ã€‚ä¼šæ—¶å‘ä¼šâ½£ä»€ä¹ˆï¼Ÿ</h4><ul>\n<li>â¼€ä¸ªä»»åŠ¡ä¸èƒ½è¢«è°ƒåº¦æ‰§â¾é‚£ä¹ˆThreadPoolExecutor.submit()â½…æ³•å°†ä¼šæŠ›å‡ºâ¼€ä¸ªRejectedExecutionExceptionå¼‚å¸¸ã€‚</li>\n</ul>\n<h4 id=\"shutdown-ä¸shutdownNow\"><a href=\"#shutdown-ä¸shutdownNow\" class=\"headerlink\" title=\"shutdown()ä¸shutdownNow()\"></a><code>shutdown()</code>ä¸<code>shutdownNow()</code></h4><ul>\n<li><strong><code>shutdownï¼ˆï¼‰</code></strong> :å…³é—­çº¿ç¨‹æ± ï¼Œçº¿ç¨‹æ± çš„çŠ¶æ€å˜ä¸º <code>SHUTDOWN</code>ã€‚çº¿ç¨‹æ± ä¸å†æ¥å—æ–°ä»»åŠ¡äº†ï¼Œä½†æ˜¯é˜Ÿåˆ—é‡Œçš„ä»»åŠ¡å¾—æ‰§è¡Œå®Œæ¯•ã€‚</li>\n<li><strong><code>shutdownNowï¼ˆï¼‰</code></strong> :å…³é—­çº¿ç¨‹æ± ï¼Œçº¿ç¨‹çš„çŠ¶æ€å˜ä¸º <code>STOP</code>ã€‚çº¿ç¨‹æ± ä¼šç»ˆæ­¢å½“å‰æ­£åœ¨è¿è¡Œçš„ä»»åŠ¡ï¼Œå¹¶åœæ­¢å¤„ç†æ’é˜Ÿçš„ä»»åŠ¡å¹¶è¿”å›æ­£åœ¨ç­‰å¾…æ‰§è¡Œçš„ Listã€‚</li>\n</ul>\n<h4 id=\"isTerminated-ä¸-isShutdown\"><a href=\"#isTerminated-ä¸-isShutdown\" class=\"headerlink\" title=\"isTerminated() ä¸ isShutdown()\"></a><code>isTerminated()</code> ä¸ <code>isShutdown()</code></h4><ul>\n<li><strong><code>isShutDown</code></strong> å½“è°ƒç”¨ <code>shutdown()</code> æ–¹æ³•åè¿”å›ä¸º trueã€‚</li>\n<li><strong><code>isTerminated</code></strong> å½“è°ƒç”¨ <code>shutdown()</code> æ–¹æ³•åï¼Œå¹¶ä¸”æ‰€æœ‰æäº¤çš„ä»»åŠ¡å®Œæˆåè¿”å›ä¸º true</li>\n</ul>\n<h4 id=\"å¦‚ä½•åˆç†çš„é…ç½®javaçº¿ç¨‹æ± ï¼Ÿ\"><a href=\"#å¦‚ä½•åˆç†çš„é…ç½®javaçº¿ç¨‹æ± ï¼Ÿ\" class=\"headerlink\" title=\"å¦‚ä½•åˆç†çš„é…ç½®javaçº¿ç¨‹æ± ï¼Ÿ\"></a>å¦‚ä½•åˆç†çš„é…ç½®<strong>java</strong>çº¿ç¨‹æ± ï¼Ÿ</h4><blockquote>\n<p><strong>çº¿ç¨‹ç­‰å¾…æ—¶é—´æ‰€å æ¯”ä¾‹è¶Šé«˜ï¼Œéœ€è¦è¶Šå¤šçº¿ç¨‹ï¼›çº¿ç¨‹CPUæ—¶é—´æ‰€å æ¯”ä¾‹è¶Šé«˜ï¼Œéœ€è¦è¶Šå°‘çº¿ç¨‹ã€‚</strong></p>\n</blockquote>\n<ul>\n<li><p>å¦‚CPUå¯†é›†å‹çš„ä»»åŠ¡ï¼ŒåŸºæœ¬çº¿ç¨‹æ± åº”è¯¥é…ç½®å¤šâ¼¤ï¼ŸIOå¯†é›†å‹çš„ä»»åŠ¡ï¼ŒåŸºæœ¬çº¿ç¨‹æ± åº”è¯¥é…ç½®å¤šâ¼¤ï¼Ÿâ½¤æœ‰ç•Œé˜Ÿåˆ—å¥½è¿˜æ˜¯â½†ç•Œé˜Ÿåˆ—å¥½ï¼Ÿä»»åŠ¡â¾®å¸¸å¤šçš„æ—¶å€™ï¼Œä½¿â½¤ä»€ä¹ˆé˜»å¡é˜Ÿåˆ—èƒ½è·å–æœ€å¥½çš„ååé‡ï¼Ÿ</p>\n<ul>\n<li>é…ç½®çº¿ç¨‹æ± æ—¶CPUå¯†é›†å‹ä»»åŠ¡å¯ä»¥å°‘é…ç½®çº¿ç¨‹æ•°ï¼Œâ¼¤æ¦‚å’Œæœºå™¨çš„cpuæ ¸æ•°ç›¸å½“ï¼Œå¯ä»¥ä½¿å¾—æ¯ä¸ªçº¿ç¨‹éƒ½åœ¨æ‰§â¾ä»»åŠ¡ã€‚</li>\n<li>IOå¯†é›†å‹æ—¶ï¼Œâ¼¤éƒ¨åˆ†çº¿ç¨‹éƒ½é˜»å¡ï¼Œæ•…éœ€è¦å¤šé…ç½®çº¿ç¨‹æ•°ï¼Œ2*cpuæ ¸æ•°</li>\n<li>æœ‰ç•Œé˜Ÿåˆ—å’Œâ½†ç•Œé˜Ÿåˆ—çš„é…ç½®éœ€åŒºåˆ†ä¸šåŠ¡åœºæ™¯ï¼Œâ¼€èˆ¬æƒ…å†µä¸‹é…ç½®æœ‰ç•Œé˜Ÿåˆ—ï¼Œåœ¨â¼€äº›å¯èƒ½ä¼šæœ‰çˆ†å‘æ€§å¢â»“çš„æƒ…å†µä¸‹ä½¿â½¤â½†ç•Œé˜Ÿåˆ—ã€‚</li>\n<li>ä»»åŠ¡â¾®å¸¸å¤šæ—¶ï¼Œä½¿â½¤â¾®é˜»å¡é˜Ÿåˆ—ä½¿â½¤CASæ“ä½œæ›¿ä»£é”å¯ä»¥è·å¾—å¥½çš„ååé‡ã€‚</li>\n<li>æœ‰ä¸€ä¸ªç®€å•å¹¶ä¸”é€‚ç”¨é¢æ¯”è¾ƒå¹¿çš„å…¬å¼ï¼š<ul>\n<li><strong>CPU å¯†é›†å‹ä»»åŠ¡(N+1)ï¼š</strong> è¿™ç§ä»»åŠ¡æ¶ˆè€—çš„ä¸»è¦æ˜¯ CPU èµ„æºï¼Œå¯ä»¥å°†çº¿ç¨‹æ•°è®¾ç½®ä¸º Nï¼ˆCPU æ ¸å¿ƒæ•°ï¼‰+1ï¼Œæ¯” CPU æ ¸å¿ƒæ•°å¤šå‡ºæ¥çš„ä¸€ä¸ªçº¿ç¨‹æ˜¯ä¸ºäº†é˜²æ­¢çº¿ç¨‹å¶å‘çš„ç¼ºé¡µä¸­æ–­ï¼Œæˆ–è€…å…¶å®ƒåŸå› å¯¼è‡´çš„ä»»åŠ¡æš‚åœè€Œå¸¦æ¥çš„å½±å“ã€‚ä¸€æ—¦ä»»åŠ¡æš‚åœï¼ŒCPU å°±ä¼šå¤„äºç©ºé—²çŠ¶æ€ï¼Œè€Œåœ¨è¿™ç§æƒ…å†µä¸‹å¤šå‡ºæ¥çš„ä¸€ä¸ªçº¿ç¨‹å°±å¯ä»¥å……åˆ†åˆ©ç”¨ CPU çš„ç©ºé—²æ—¶é—´ã€‚</li>\n<li><strong>I/O å¯†é›†å‹ä»»åŠ¡(2N)ï¼š</strong> è¿™ç§ä»»åŠ¡åº”ç”¨èµ·æ¥ï¼Œç³»ç»Ÿä¼šç”¨å¤§éƒ¨åˆ†çš„æ—¶é—´æ¥å¤„ç† I/O äº¤äº’ï¼Œè€Œçº¿ç¨‹åœ¨å¤„ç† I/O çš„æ—¶é—´æ®µå†…ä¸ä¼šå ç”¨ CPU æ¥å¤„ç†ï¼Œè¿™æ—¶å°±å¯ä»¥å°† CPU äº¤å‡ºç»™å…¶å®ƒçº¿ç¨‹ä½¿ç”¨ã€‚å› æ­¤åœ¨ I/O å¯†é›†å‹ä»»åŠ¡çš„åº”ç”¨ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥å¤šé…ç½®ä¸€äº›çº¿ç¨‹ï¼Œå…·ä½“çš„è®¡ç®—æ–¹æ³•æ˜¯ 2Nã€‚</li>\n</ul>\n</li>\n<li><strong>å¦‚ä½•åˆ¤æ–­æ˜¯ CPU å¯†é›†ä»»åŠ¡è¿˜æ˜¯ IO å¯†é›†ä»»åŠ¡ï¼Ÿ</strong><ul>\n<li>CPU å¯†é›†å‹ç®€å•ç†è§£å°±æ˜¯åˆ©ç”¨ CPU è®¡ç®—èƒ½åŠ›çš„ä»»åŠ¡æ¯”å¦‚ä½ åœ¨å†…å­˜ä¸­å¯¹å¤§é‡æ•°æ®è¿›è¡Œæ’åºã€‚å•å‡¡æ¶‰åŠåˆ°ç½‘ç»œè¯»å–ï¼Œæ–‡ä»¶è¯»å–è¿™ç±»éƒ½æ˜¯ IO å¯†é›†å‹ï¼Œè¿™ç±»ä»»åŠ¡çš„ç‰¹ç‚¹æ˜¯ CPU è®¡ç®—è€—è´¹æ—¶é—´ç›¸æ¯”äºç­‰å¾… IO æ“ä½œå®Œæˆçš„æ—¶é—´æ¥è¯´å¾ˆå°‘ï¼Œå¤§éƒ¨åˆ†æ—¶é—´éƒ½èŠ±åœ¨äº†ç­‰å¾… IO æ“ä½œå®Œæˆä¸Šã€‚</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<h5 id=\"è®¡ç®—å…¬å¼\"><a href=\"#è®¡ç®—å…¬å¼\" class=\"headerlink\" title=\"è®¡ç®—å…¬å¼\"></a>è®¡ç®—å…¬å¼</h5><ul>\n<li><p>CPUå¯†é›†ä»»åŠ¡</p>\n<ul>\n<li>ç†è®ºä¸Š <code>çº¿ç¨‹æ•°é‡ = CPU æ ¸æ•°ï¼ˆé€»è¾‘ï¼‰</code> å°±å¯ä»¥äº†ï¼Œä½†æ˜¯å®é™…ä¸Šï¼Œæ•°é‡ä¸€èˆ¬ä¼šè®¾ç½®ä¸º <code>CPU æ ¸æ•°ï¼ˆé€»è¾‘ï¼‰+ 1</code></li>\n</ul>\n</li>\n<li><p>IOå¯†é›†ä»»åŠ¡</p>\n<ul>\n<li>æœ€ä½³çº¿ç¨‹æ•° =  <code>(1/CPUåˆ©ç”¨ç‡)</code> = <code>1 + (I/Oè€—æ—¶/CPUè€—æ—¶)</code></li>\n<li>æœ€ä½³çº¿ç¨‹æ•° = <code>CPUæ ¸å¿ƒæ•°</code> *  <code>(1/CPUåˆ©ç”¨ç‡)</code> =  <code>CPUæ ¸å¿ƒæ•°</code> * <code>(1 + (I/Oè€—æ—¶/CPUè€—æ—¶))</code></li>\n</ul>\n</li>\n</ul>\n<h3 id=\"Lock\"><a href=\"#Lock\" class=\"headerlink\" title=\"Lock\"></a>Lock</h3><blockquote>\n<p>Lockå¯¹è±¡ä¹Ÿå¯ä»¥å®ç°åŒæ­¥ï¼Œåœ¨ä½¿ç”¨ä¸Šæ›´åŠ æ–¹ä¾¿ã€‚</p>\n</blockquote>\n<p><img src=\"https://z201.oss-cn-shanghai.aliyuncs.com/JavaNote/20211018144234.png\"></p>\n<blockquote>\n<p>Javaå¤šçº¿ç¨‹ä¸­ï¼Œå¯ä»¥ä½¿ç”¨synchronizedå…³é”®å­—æ¥å®ç°çº¿ç¨‹ä¹‹é—´åŒæ­¥äº’æ–¥ï¼Œä½†æ˜¯å†jdk1.5ä»¥åå¢åŠ äº†ReentrantLockç±»ã€‚å¹¶ä¸”åŠŸèƒ½æ›´åŠ å¼ºå¤§ã€çµæ´»ã€‚</p>\n</blockquote>\n<table>\n<thead>\n<tr>\n<th align=\"left\">é”åç§°</th>\n<th align=\"left\">åº”ç”¨</th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"left\">ä¹è§‚é”</td>\n<td align=\"left\">CAS</td>\n</tr>\n<tr>\n<td align=\"left\">è‡ªæ—‹é”</td>\n<td align=\"left\">CAS</td>\n</tr>\n<tr>\n<td align=\"left\">æ‚²è§‚é”</td>\n<td align=\"left\">synchronizedã€vectorã€hashtable</td>\n</tr>\n<tr>\n<td align=\"left\">å¯é‡å…¥é”</td>\n<td align=\"left\">synchronizedã€Reentrantlockã€Lock</td>\n</tr>\n<tr>\n<td align=\"left\">è¯»å†™é”</td>\n<td align=\"left\">ReentrantReadWriteLockï¼ŒCopyOnWriteArrayListã€CopyOnWriteArraySet</td>\n</tr>\n<tr>\n<td align=\"left\">å…¬å¹³é”</td>\n<td align=\"left\">Reentrantlock(true)</td>\n</tr>\n<tr>\n<td align=\"left\">éå…¬å¹³é”</td>\n<td align=\"left\">synchronizedã€reentrantlock(false)</td>\n</tr>\n<tr>\n<td align=\"left\">å…±äº«é”</td>\n<td align=\"left\">ReentrantReadWriteLockä¸­è¯»é”</td>\n</tr>\n<tr>\n<td align=\"left\">ç‹¬å é”</td>\n<td align=\"left\">synchronizedã€vectorã€hashtableã€ReentrantReadWriteLockä¸­å†™é”</td>\n</tr>\n<tr>\n<td align=\"left\">é‡é‡çº§é”</td>\n<td align=\"left\">synchronized</td>\n</tr>\n<tr>\n<td align=\"left\">äº’æ–¥é”</td>\n<td align=\"left\">synchronized</td>\n</tr>\n<tr>\n<td align=\"left\">åŒæ­¥é”</td>\n<td align=\"left\">synchronized</td>\n</tr>\n<tr>\n<td align=\"left\">åˆ†æ®µé”</td>\n<td align=\"left\">concurrentHashMap</td>\n</tr>\n<tr>\n<td align=\"left\">æ­»é”</td>\n<td align=\"left\">ç›¸äº’è¯·æ±‚å¯¹æ–¹çš„èµ„æº</td>\n</tr>\n<tr>\n<td align=\"left\">é”ç²—åŒ–</td>\n<td align=\"left\">é”ä¼˜åŒ–æŠ€æœ¯</td>\n</tr>\n<tr>\n<td align=\"left\">é”æ¶ˆé™¤</td>\n<td align=\"left\">é”ä¼˜åŒ–æŠ€æœ¯</td>\n</tr>\n<tr>\n<td align=\"left\">è½»é‡çº§é”</td>\n<td align=\"left\">é”ä¼˜åŒ–æŠ€æœ¯</td>\n</tr>\n<tr>\n<td align=\"left\">åå‘é”</td>\n<td align=\"left\">é”ä¼˜åŒ–æŠ€æœ¯</td>\n</tr>\n</tbody></table>\n<h4 id=\"AQS-AbstractQueuedSynchronizer\"><a href=\"#AQS-AbstractQueuedSynchronizer\" class=\"headerlink\" title=\"AQS-AbstractQueuedSynchronizer\"></a>AQS-AbstractQueuedSynchronizer</h4><blockquote>\n<p>AQSï¼šAbstractQueuedSynchronizer æŠ½è±¡é˜Ÿåˆ—åŒæ­¥å™¨</p>\n<p>å†…éƒ¨å®ç°äº†ä¸€ä¸ªFIFOåˆ—é˜Ÿæ¥ç®¡ç†é”ï¼Œçº¿ç¨‹ä¼šé¦–å…ˆå°è¯•è·å–é”ï¼Œå¦‚æœå¤±è´¥ã€‚åˆ™å°†å½“å‰çº¿ç¨‹ä»¥åŠç­‰å¾…ä¿¡æ¯åŒ…è£…æˆä¸€ä¸ªnodeèŠ‚ç‚¹æ”¾å…¥åŒæ­¥åˆ—é˜Ÿä¸­æŸ±å¡ï¼Œå½“æœ‰é”çš„çº¿ç¨‹é‡Šæ”¾é”çš„æ—¶å€™ï¼Œåˆ™ä¼šå”¤é†’åˆ—é˜Ÿä¸­çš„ç­‰å¾…çš„çº¿ç¨‹ã€‚</p>\n</blockquote>\n<p><img src=\"https://z201.oss-cn-shanghai.aliyuncs.com/JavaNote/20211005223255.png\"></p>\n<ul>\n<li><p>AQS è¿™é‡Œåªå®šä¹‰äº†ä¸€ä¸ªæ¥å£ï¼Œå…·ä½“èµ„æºçš„è·å–äº¤ç”±è‡ªå®šä¹‰åŒæ­¥å™¨å»å®ç°äº†ï¼ˆé€šè¿‡ state çš„ get/set/CAS)ä¹‹æ‰€ä»¥æ²¡æœ‰å®šä¹‰æˆabstract ï¼Œæ˜¯å› ä¸ºç‹¬å æ¨¡å¼ä¸‹åªç”¨å®ç° tryAcquire-tryRelease ï¼Œè€Œå…±äº«æ¨¡å¼ä¸‹åªç”¨å®ç°tryAcquireShared-tryReleaseSharedã€‚å¦‚æœéƒ½å®šä¹‰æˆabstractï¼Œé‚£ä¹ˆæ¯ä¸ªæ¨¡å¼ä¹Ÿè¦å»å®ç°å¦ä¸€æ¨¡å¼ä¸‹çš„æ¥å£ã€‚ä¸åŒçš„è‡ªå®šä¹‰åŒæ­¥å™¨äº‰ç”¨å…±äº«èµ„æºçš„æ–¹å¼ä¹Ÿä¸åŒã€‚è‡ªå®šä¹‰åŒæ­¥å™¨åœ¨å®ç°æ—¶åªéœ€è¦å®ç°å…±äº«èµ„æº state çš„è·å–ä¸é‡Šæ”¾æ–¹å¼å³å¯ï¼Œè‡³äºå…·ä½“çº¿ç¨‹ç­‰å¾…é˜Ÿåˆ—çš„ç»´æŠ¤ï¼ˆå¦‚è·å–èµ„æºå¤±è´¥å…¥é˜Ÿ/å”¤é†’å‡ºé˜Ÿç­‰ï¼‰ã€‚</p>\n</li>\n<li><p>AQSå®šä¹‰ç±»ä¸€ä¸ª</p>\n</li>\n</ul>\n<h5 id=\"LockSupport\"><a href=\"#LockSupport\" class=\"headerlink\" title=\"LockSupport\"></a>LockSupport</h5><blockquote>\n<p>æ˜¯ç”¨æ¥åˆ›å»ºé”å’Œå…¶ä»–åŒæ­¥ç±»çš„åŸºæœ¬çº¿ç¨‹é˜»å¡åŸè¯­ã€‚</p>\n</blockquote>\n<h5 id=\"CountDownLatch\"><a href=\"#CountDownLatch\" class=\"headerlink\" title=\"CountDownLatch\"></a>CountDownLatch</h5><blockquote>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">CounttDownLatch æ˜¯ java.util.concurrent(JUC)ä¸­çš„é”ï¼Œé—­é”ã€‚åˆ©ç”¨å®ƒå¯ä»¥å®ç°ç±»ä¼¼è®¡æ•°å™¨çš„åŠŸèƒ½ã€‚æ¯”å¦‚æœ‰ä¸€ä¸ªä»»åŠ¡Aï¼Œå®ƒè¦ç­‰å¾…å…¶ä»–4ä¸ªä»»åŠ¡æ‰§è¡Œå®Œæ¯•ä¹‹åæ‰èƒ½æ‰§è¡Œï¼Œæ­¤æ—¶å°±å¯ä»¥åˆ©ç”¨CountDownLatchæ¥å®ç°è¿™ç§åŠŸèƒ½äº†ã€‚</span><br></pre></td></tr></table></figure>\n</blockquote>\n<h6 id=\"æ¡ˆä¾‹\"><a href=\"#æ¡ˆä¾‹\" class=\"headerlink\" title=\"æ¡ˆä¾‹\"></a>æ¡ˆä¾‹</h6><figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\">   <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">oneTest</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">       <span class=\"comment\">// è®¡æ•°å™¨10 state = 10</span></span><br><span class=\"line\">       <span class=\"keyword\">int</span> total = <span class=\"number\">10</span>;</span><br><span class=\"line\">       CountDownLatch countDownLatch = <span class=\"keyword\">new</span> CountDownLatch(total);</span><br><span class=\"line\">       <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>; i &lt; total; i++) &#123;</span><br><span class=\"line\">           <span class=\"keyword\">new</span> Thread(() -&gt; &#123;</span><br><span class=\"line\">               log.info(<span class=\"string\">\"running\"</span>);</span><br><span class=\"line\">               countDownLatch.countDown();</span><br><span class=\"line\">           &#125;).start();</span><br><span class=\"line\">       &#125;</span><br><span class=\"line\">       <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">           log.info(<span class=\"string\">\"await\"</span>);</span><br><span class=\"line\">           countDownLatch.await();</span><br><span class=\"line\">       &#125; <span class=\"keyword\">catch</span> (InterruptedException e) &#123;</span><br><span class=\"line\">           e.printStackTrace();</span><br><span class=\"line\">       &#125;</span><br><span class=\"line\">   &#125;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>è¾“å‡º</p>\n</blockquote>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"number\">14</span>:<span class=\"number\">22</span>:<span class=\"number\">53.775</span> [main] INFO cn.z201.java.test.aqs.CountDownLatchTest - await</span><br><span class=\"line\"><span class=\"number\">14</span>:<span class=\"number\">22</span>:<span class=\"number\">53.775</span> [Thread-<span class=\"number\">7</span>] INFO cn.z201.java.test.aqs.CountDownLatchTest - running</span><br><span class=\"line\"><span class=\"number\">14</span>:<span class=\"number\">22</span>:<span class=\"number\">53.775</span> [Thread-<span class=\"number\">1</span>] INFO cn.z201.java.test.aqs.CountDownLatchTest - running</span><br><span class=\"line\"><span class=\"number\">14</span>:<span class=\"number\">22</span>:<span class=\"number\">53.775</span> [Thread-<span class=\"number\">5</span>] INFO cn.z201.java.test.aqs.CountDownLatchTest - running</span><br><span class=\"line\"><span class=\"number\">14</span>:<span class=\"number\">22</span>:<span class=\"number\">53.775</span> [Thread-<span class=\"number\">8</span>] INFO cn.z201.java.test.aqs.CountDownLatchTest - running</span><br><span class=\"line\"><span class=\"number\">14</span>:<span class=\"number\">22</span>:<span class=\"number\">53.775</span> [Thread-<span class=\"number\">2</span>] INFO cn.z201.java.test.aqs.CountDownLatchTest - running</span><br><span class=\"line\"><span class=\"number\">14</span>:<span class=\"number\">22</span>:<span class=\"number\">53.775</span> [Thread-<span class=\"number\">9</span>] INFO cn.z201.java.test.aqs.CountDownLatchTest - running</span><br><span class=\"line\"><span class=\"number\">14</span>:<span class=\"number\">22</span>:<span class=\"number\">53.775</span> [Thread-<span class=\"number\">4</span>] INFO cn.z201.java.test.aqs.CountDownLatchTest - running</span><br><span class=\"line\"><span class=\"number\">14</span>:<span class=\"number\">22</span>:<span class=\"number\">53.775</span> [Thread-<span class=\"number\">6</span>] INFO cn.z201.java.test.aqs.CountDownLatchTest - running</span><br><span class=\"line\"><span class=\"number\">14</span>:<span class=\"number\">22</span>:<span class=\"number\">53.775</span> [Thread-<span class=\"number\">0</span>] INFO cn.z201.java.test.aqs.CountDownLatchTest - running</span><br><span class=\"line\"><span class=\"number\">14</span>:<span class=\"number\">22</span>:<span class=\"number\">53.775</span> [Thread-<span class=\"number\">3</span>] INFO cn.z201.java.test.aqs.CountDownLatchTest - running</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"ReentrantLock\"><a href=\"#ReentrantLock\" class=\"headerlink\" title=\"ReentrantLock\"></a>ReentrantLock</h5><blockquote>\n<p>ReentrantLock æ˜¯ java.util.concurrentï¼ˆJ.U.Cï¼‰åŒ…ä¸­çš„é”ã€‚å’Œsynchronizedä¹Ÿæ˜¯äº’æ–¥é”ï¼ŒåŒæ—¶å¯ä»¥å®ç°å…¬å¹³å’Œéå…¬å¹³é”ã€‚</p>\n</blockquote>\n<h6 id=\"æ„é€ æ–¹æ³•\"><a href=\"#æ„é€ æ–¹æ³•\" class=\"headerlink\" title=\"æ„é€ æ–¹æ³•\"></a>æ„é€ æ–¹æ³•</h6><figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//é»˜è®¤éå…¬å¹³é”</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">ReentrantLock</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">     sync = <span class=\"keyword\">new</span> NonfairSync();</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//ä¼ å…¥trueï¼Œå¯ä»¥æ„å»ºå…¬å¹³é”</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">ReentrantLock</span><span class=\"params\">(<span class=\"keyword\">boolean</span> fair)</span> </span>&#123;</span><br><span class=\"line\">    sync = fair ? <span class=\"keyword\">new</span> FairSync() : <span class=\"keyword\">new</span> NonfairSync();</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h6 id=\"æ¡ˆä¾‹-1\"><a href=\"#æ¡ˆä¾‹-1\" class=\"headerlink\" title=\"æ¡ˆä¾‹\"></a>æ¡ˆä¾‹</h6><figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">LockExample</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> Lock lock = <span class=\"keyword\">new</span> ReentrantLock();</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">func</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        lock.lock();</span><br><span class=\"line\">        <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">            <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>; i &lt; <span class=\"number\">10</span>; i++) &#123;</span><br><span class=\"line\">                System.out.print(i + <span class=\"string\">\" \"</span>);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125; <span class=\"keyword\">finally</span> &#123;</span><br><span class=\"line\">            lock.unlock(); <span class=\"comment\">// ç¡®ä¿é‡Šæ”¾é”ï¼Œä»è€Œé¿å…å‘ç”Ÿæ­»é”ã€‚</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String[] args)</span> </span>&#123;</span><br><span class=\"line\">    LockExample lockExample = <span class=\"keyword\">new</span> LockExample();</span><br><span class=\"line\">    ExecutorService executorService = Executors.newCachedThreadPool();</span><br><span class=\"line\">    executorService.execute(() -&gt; lockExample.func());</span><br><span class=\"line\">    executorService.execute(() -&gt; lockExample.func());</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">// æœ€åè¾“å‡º 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9</span></span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ReentrantLockDemo</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> Lock lock = <span class=\"keyword\">new</span> ReentrantLock();</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">test</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">        <span class=\"comment\">// è°ƒç”¨ReentrantLockçš„lockæ–¹æ³•è·å–é”</span></span><br><span class=\"line\">        lock.lock();</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>; i &lt; <span class=\"number\">3</span>; i++) &#123;</span><br><span class=\"line\">            System.out.println(<span class=\"string\">\"ThreadName \"</span> + Thread.currentThread().getName() + <span class=\"string\">\" number \"</span> + i);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"comment\">// è°ƒç”¨ReentrantLockçš„lockæ–¹æ³•é‡Šæ”¾é”</span></span><br><span class=\"line\">        lock.unlock();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ReentrantLockThread</span> <span class=\"keyword\">extends</span> <span class=\"title\">Thread</span></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> ReentrantLockDemo reentrantLockDemo;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">ReentrantLockThread</span><span class=\"params\">(ReentrantLockDemo reentrantLockDemo)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.reentrantLockDemo = reentrantLockDemo;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">run</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        reentrantLockDemo.test();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ReentrantLockTests</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String[] args)</span> </span>&#123;</span><br><span class=\"line\">        ReentrantLockDemo reentrantLockDemo = <span class=\"keyword\">new</span> ReentrantLockDemo();</span><br><span class=\"line\">        ReentrantLockThread reentrantLockThread1 = <span class=\"keyword\">new</span> ReentrantLockThread(reentrantLockDemo);</span><br><span class=\"line\">        ReentrantLockThread reentrantLockThread2 = <span class=\"keyword\">new</span> ReentrantLockThread(reentrantLockDemo);</span><br><span class=\"line\">        ReentrantLockThread reentrantLockThread3 = <span class=\"keyword\">new</span> ReentrantLockThread(reentrantLockDemo);</span><br><span class=\"line\">        ReentrantLockThread reentrantLockThread4 = <span class=\"keyword\">new</span> ReentrantLockThread(reentrantLockDemo);</span><br><span class=\"line\">        reentrantLockThread1.start();</span><br><span class=\"line\">        reentrantLockThread2.start();</span><br><span class=\"line\">        reentrantLockThread3.start();</span><br><span class=\"line\">        reentrantLockThread4.start();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>è¾“å‡ºç»“æœ</p>\n</blockquote>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\">ThreadName Thread-<span class=\"number\">0</span> number <span class=\"number\">0</span></span><br><span class=\"line\">ThreadName Thread-<span class=\"number\">0</span> number <span class=\"number\">1</span></span><br><span class=\"line\">ThreadName Thread-<span class=\"number\">0</span> number <span class=\"number\">2</span></span><br><span class=\"line\">ThreadName Thread-<span class=\"number\">2</span> number <span class=\"number\">0</span></span><br><span class=\"line\">ThreadName Thread-<span class=\"number\">2</span> number <span class=\"number\">1</span></span><br><span class=\"line\">ThreadName Thread-<span class=\"number\">2</span> number <span class=\"number\">2</span></span><br><span class=\"line\">ThreadName Thread-<span class=\"number\">3</span> number <span class=\"number\">0</span></span><br><span class=\"line\">ThreadName Thread-<span class=\"number\">3</span> number <span class=\"number\">1</span></span><br><span class=\"line\">ThreadName Thread-<span class=\"number\">3</span> number <span class=\"number\">2</span></span><br><span class=\"line\">ThreadName Thread-<span class=\"number\">1</span> number <span class=\"number\">0</span></span><br><span class=\"line\">ThreadName Thread-<span class=\"number\">1</span> number <span class=\"number\">1</span></span><br><span class=\"line\">ThreadName Thread-<span class=\"number\">1</span> number <span class=\"number\">2</span></span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>å½“å‰çš„çº¿ç¨‹æ‰§è¡Œå®Œæˆä¹‹åæ‰èƒ½æ‰§è¡Œå…¶ä»–çº¿ç¨‹ï¼Œä½†æ˜¯å…¶ä»–çº¿ç¨‹æ‰§è¡Œçš„é¡ºåºæ˜¯éšæœºçš„ã€‚</li>\n</ul>\n<h5 id=\"ReentrantReadWriteLock\"><a href=\"#ReentrantReadWriteLock\" class=\"headerlink\" title=\"ReentrantReadWriteLock\"></a>ReentrantReadWriteLock</h5><h5 id=\"Semaphore\"><a href=\"#Semaphore\" class=\"headerlink\" title=\"Semaphore\"></a>Semaphore</h5><blockquote>\n<p> java.util.concurrent(JUC) ,Semaphoreç¿»è¯‘æˆå­—é¢æ„æ€ä¸º ä¿¡å·é‡ï¼ŒSemaphoreå¯ä»¥æ§åŒæ—¶è®¿é—®çš„çº¿ç¨‹ä¸ªæ•°ï¼Œé€šè¿‡ acquire() è·å–ä¸€ä¸ªè®¸å¯ï¼Œå¦‚æœæ²¡æœ‰å°±ç­‰å¾…ï¼Œè€Œ release() é‡Šæ”¾ä¸€ä¸ªè®¸å¯ã€‚</p>\n</blockquote>\n<h6 id=\"æ¡ˆä¾‹-2\"><a href=\"#æ¡ˆä¾‹-2\" class=\"headerlink\" title=\"æ¡ˆä¾‹\"></a>æ¡ˆä¾‹</h6><blockquote>\n<p>è¿™é‡Œé˜²æ­¢ä¸»çº¿ç¨‹ç»ˆæ­¢ï¼Œå…ˆç¡ä¸ª10sã€‚</p>\n</blockquote>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">oneTest</span><span class=\"params\">()</span> <span class=\"keyword\">throws</span> InterruptedException </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">int</span> total = <span class=\"number\">10</span>;</span><br><span class=\"line\">    Semaphore semaphore = <span class=\"keyword\">new</span> Semaphore(<span class=\"number\">5</span>);</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>; i &lt; total; i++) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">new</span> Thread(<span class=\"keyword\">new</span> SemaphoreRunnable(semaphore)).start();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    Thread.sleep(<span class=\"number\">10000</span>);</span><br><span class=\"line\">    log.info(<span class=\"string\">\"info\"</span>);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">SemaphoreRunnable</span> <span class=\"keyword\">implements</span> <span class=\"title\">Runnable</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> Semaphore semaphore;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">SemaphoreRunnable</span><span class=\"params\">(Semaphore semaphore)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.semaphore = semaphore;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">run</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">            log.info(<span class=\"string\">\"&#123;&#125; acquire\"</span>,Thread.currentThread().getName());</span><br><span class=\"line\">            semaphore.acquire();</span><br><span class=\"line\">            Thread.sleep(<span class=\"number\">1000</span>);</span><br><span class=\"line\">        &#125; <span class=\"keyword\">catch</span> (InterruptedException e) &#123;</span><br><span class=\"line\">            e.printStackTrace();</span><br><span class=\"line\">        &#125; <span class=\"keyword\">finally</span> &#123;</span><br><span class=\"line\">            <span class=\"comment\">//é‡Šæ”¾ä¿¡å·é‡</span></span><br><span class=\"line\">            log.info(<span class=\"string\">\"&#123;&#125; release \"</span>,Thread.currentThread().getName());</span><br><span class=\"line\">            semaphore.release();</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>è¾“å‡º</p>\n</blockquote>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"number\">14</span>:<span class=\"number\">10</span>:<span class=\"number\">08.873</span> [Thread-<span class=\"number\">6</span>] INFO cn.z201.java.test.aqs.SemaphoreTest - Thread-<span class=\"number\">6</span> acquire</span><br><span class=\"line\"><span class=\"number\">14</span>:<span class=\"number\">10</span>:<span class=\"number\">08.874</span> [Thread-<span class=\"number\">9</span>] INFO cn.z201.java.test.aqs.SemaphoreTest - Thread-<span class=\"number\">9</span> acquire</span><br><span class=\"line\"><span class=\"number\">14</span>:<span class=\"number\">10</span>:<span class=\"number\">08.874</span> [Thread-<span class=\"number\">5</span>] INFO cn.z201.java.test.aqs.SemaphoreTest - Thread-<span class=\"number\">5</span> acquire</span><br><span class=\"line\"><span class=\"number\">14</span>:<span class=\"number\">10</span>:<span class=\"number\">08.874</span> [Thread-<span class=\"number\">7</span>] INFO cn.z201.java.test.aqs.SemaphoreTest - Thread-<span class=\"number\">7</span> acquire</span><br><span class=\"line\"><span class=\"number\">14</span>:<span class=\"number\">10</span>:<span class=\"number\">08.874</span> [Thread-<span class=\"number\">2</span>] INFO cn.z201.java.test.aqs.SemaphoreTest - Thread-<span class=\"number\">2</span> acquire</span><br><span class=\"line\"><span class=\"number\">14</span>:<span class=\"number\">10</span>:<span class=\"number\">08.874</span> [Thread-<span class=\"number\">4</span>] INFO cn.z201.java.test.aqs.SemaphoreTest - Thread-<span class=\"number\">4</span> acquire</span><br><span class=\"line\"><span class=\"number\">14</span>:<span class=\"number\">10</span>:<span class=\"number\">08.874</span> [Thread-<span class=\"number\">0</span>] INFO cn.z201.java.test.aqs.SemaphoreTest - Thread-<span class=\"number\">0</span> acquire</span><br><span class=\"line\"><span class=\"number\">14</span>:<span class=\"number\">10</span>:<span class=\"number\">08.874</span> [Thread-<span class=\"number\">1</span>] INFO cn.z201.java.test.aqs.SemaphoreTest - Thread-<span class=\"number\">1</span> acquire</span><br><span class=\"line\"><span class=\"number\">14</span>:<span class=\"number\">10</span>:<span class=\"number\">08.874</span> [Thread-<span class=\"number\">8</span>] INFO cn.z201.java.test.aqs.SemaphoreTest - Thread-<span class=\"number\">8</span> acquire</span><br><span class=\"line\"><span class=\"number\">14</span>:<span class=\"number\">10</span>:<span class=\"number\">08.874</span> [Thread-<span class=\"number\">3</span>] INFO cn.z201.java.test.aqs.SemaphoreTest - Thread-<span class=\"number\">3</span> acquire</span><br><span class=\"line\"><span class=\"number\">14</span>:<span class=\"number\">10</span>:<span class=\"number\">09.884</span> [Thread-<span class=\"number\">5</span>] INFO cn.z201.java.test.aqs.SemaphoreTest - Thread-<span class=\"number\">5</span> release </span><br><span class=\"line\"><span class=\"number\">14</span>:<span class=\"number\">10</span>:<span class=\"number\">09.884</span> [Thread-<span class=\"number\">7</span>] INFO cn.z201.java.test.aqs.SemaphoreTest - Thread-<span class=\"number\">7</span> release </span><br><span class=\"line\"><span class=\"number\">14</span>:<span class=\"number\">10</span>:<span class=\"number\">09.884</span> [Thread-<span class=\"number\">9</span>] INFO cn.z201.java.test.aqs.SemaphoreTest - Thread-<span class=\"number\">9</span> release </span><br><span class=\"line\"><span class=\"number\">14</span>:<span class=\"number\">10</span>:<span class=\"number\">09.884</span> [Thread-<span class=\"number\">2</span>] INFO cn.z201.java.test.aqs.SemaphoreTest - Thread-<span class=\"number\">2</span> release </span><br><span class=\"line\"><span class=\"number\">14</span>:<span class=\"number\">10</span>:<span class=\"number\">09.884</span> [Thread-<span class=\"number\">6</span>] INFO cn.z201.java.test.aqs.SemaphoreTest - Thread-<span class=\"number\">6</span> release </span><br><span class=\"line\"><span class=\"number\">14</span>:<span class=\"number\">10</span>:<span class=\"number\">10.885</span> [Thread-<span class=\"number\">4</span>] INFO cn.z201.java.test.aqs.SemaphoreTest - Thread-<span class=\"number\">4</span> release </span><br><span class=\"line\"><span class=\"number\">14</span>:<span class=\"number\">10</span>:<span class=\"number\">10.885</span> [Thread-<span class=\"number\">1</span>] INFO cn.z201.java.test.aqs.SemaphoreTest - Thread-<span class=\"number\">1</span> release </span><br><span class=\"line\"><span class=\"number\">14</span>:<span class=\"number\">10</span>:<span class=\"number\">10.885</span> [Thread-<span class=\"number\">0</span>] INFO cn.z201.java.test.aqs.SemaphoreTest - Thread-<span class=\"number\">0</span> release </span><br><span class=\"line\"><span class=\"number\">14</span>:<span class=\"number\">10</span>:<span class=\"number\">10.886</span> [Thread-<span class=\"number\">8</span>] INFO cn.z201.java.test.aqs.SemaphoreTest - Thread-<span class=\"number\">8</span> release </span><br><span class=\"line\"><span class=\"number\">14</span>:<span class=\"number\">10</span>:<span class=\"number\">10.886</span> [Thread-<span class=\"number\">3</span>] INFO cn.z201.java.test.aqs.SemaphoreTest - Thread-<span class=\"number\">3</span> release </span><br><span class=\"line\"><span class=\"number\">14</span>:<span class=\"number\">10</span>:<span class=\"number\">18.877</span> [main] INFO cn.z201.java.test.aqs.SemaphoreTest - info</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"CyclicBarrier\"><a href=\"#CyclicBarrier\" class=\"headerlink\" title=\"CyclicBarrier\"></a>CyclicBarrier</h5><blockquote>\n<p>CyclicBarrier æ˜¯ java.util.concurrent(JUC)ä¸­çš„é”ï¼Œæ …æ é”ã€‚å®ƒå¯ä»¥å®ç°è®©ä¸€ç»„çº¿ç¨‹ç­‰å¾…è‡³æŸä¸ªçŠ¶æ€ä¹‹åå†å…¨éƒ¨åŒæ—¶æ‰§è¡Œã€‚</p>\n</blockquote>\n<h6 id=\"æ¡ˆä¾‹-3\"><a href=\"#æ¡ˆä¾‹-3\" class=\"headerlink\" title=\"æ¡ˆä¾‹\"></a>æ¡ˆä¾‹</h6><figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\">   <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">oneTest</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">       <span class=\"keyword\">int</span> total = <span class=\"number\">5</span>;</span><br><span class=\"line\">       CyclicBarrier cyclicBarrier = <span class=\"keyword\">new</span> CyclicBarrier(total);</span><br><span class=\"line\">       ExecutorService executorService = Executors.newCachedThreadPool();</span><br><span class=\"line\">       <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>; i &lt; total; i++) &#123;</span><br><span class=\"line\">           executorService.execute(() -&gt; &#123;</span><br><span class=\"line\">               log.info(<span class=\"string\">\"await\"</span>);</span><br><span class=\"line\">               <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">                   cyclicBarrier.await();</span><br><span class=\"line\">               &#125; <span class=\"keyword\">catch</span> (InterruptedException</span><br><span class=\"line\">                       | BrokenBarrierException e) &#123;</span><br><span class=\"line\">                   e.printStackTrace();</span><br><span class=\"line\">               &#125;</span><br><span class=\"line\">               log.info(<span class=\"string\">\"running\"</span>);</span><br><span class=\"line\">           &#125;);</span><br><span class=\"line\">       &#125;</span><br><span class=\"line\">   &#125;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>è¾“å‡º</p>\n</blockquote>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"number\">15</span>:<span class=\"number\">06</span>:<span class=\"number\">17.233</span> [pool-<span class=\"number\">1</span>-thread-<span class=\"number\">4</span>] INFO cn.z201.java.test.aqs.CyclicBarrierTest - await</span><br><span class=\"line\"><span class=\"number\">15</span>:<span class=\"number\">06</span>:<span class=\"number\">17.233</span> [pool-<span class=\"number\">1</span>-thread-<span class=\"number\">3</span>] INFO cn.z201.java.test.aqs.CyclicBarrierTest - await</span><br><span class=\"line\"><span class=\"number\">15</span>:<span class=\"number\">06</span>:<span class=\"number\">17.233</span> [pool-<span class=\"number\">1</span>-thread-<span class=\"number\">2</span>] INFO cn.z201.java.test.aqs.CyclicBarrierTest - await</span><br><span class=\"line\"><span class=\"number\">15</span>:<span class=\"number\">06</span>:<span class=\"number\">17.233</span> [pool-<span class=\"number\">1</span>-thread-<span class=\"number\">5</span>] INFO cn.z201.java.test.aqs.CyclicBarrierTest - await</span><br><span class=\"line\"><span class=\"number\">15</span>:<span class=\"number\">06</span>:<span class=\"number\">17.233</span> [pool-<span class=\"number\">1</span>-thread-<span class=\"number\">1</span>] INFO cn.z201.java.test.aqs.CyclicBarrierTest - await</span><br><span class=\"line\"><span class=\"number\">15</span>:<span class=\"number\">06</span>:<span class=\"number\">17.233</span> [main] INFO cn.z201.java.test.aqs.CyclicBarrierTest - main</span><br><span class=\"line\"><span class=\"number\">15</span>:<span class=\"number\">06</span>:<span class=\"number\">17.239</span> [pool-<span class=\"number\">1</span>-thread-<span class=\"number\">1</span>] INFO cn.z201.java.test.aqs.CyclicBarrierTest - running</span><br><span class=\"line\"><span class=\"number\">15</span>:<span class=\"number\">06</span>:<span class=\"number\">17.239</span> [pool-<span class=\"number\">1</span>-thread-<span class=\"number\">2</span>] INFO cn.z201.java.test.aqs.CyclicBarrierTest - running</span><br><span class=\"line\"><span class=\"number\">15</span>:<span class=\"number\">06</span>:<span class=\"number\">17.239</span> [pool-<span class=\"number\">1</span>-thread-<span class=\"number\">5</span>] INFO cn.z201.java.test.aqs.CyclicBarrierTest - running</span><br><span class=\"line\"><span class=\"number\">15</span>:<span class=\"number\">06</span>:<span class=\"number\">17.239</span> [pool-<span class=\"number\">1</span>-thread-<span class=\"number\">3</span>] INFO cn.z201.java.test.aqs.CyclicBarrierTest - running</span><br><span class=\"line\"><span class=\"number\">15</span>:<span class=\"number\">06</span>:<span class=\"number\">17.239</span> [pool-<span class=\"number\">1</span>-thread-<span class=\"number\">4</span>] INFO cn.z201.java.test.aqs.CyclicBarrierTest - running</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"ReentrantReadWriteLock-1\"><a href=\"#ReentrantReadWriteLock-1\" class=\"headerlink\" title=\"ReentrantReadWriteLock\"></a>ReentrantReadWriteLock</h5><blockquote>\n<p>ReentrantReadWriteLocké” å®é™…ä¹Ÿæ˜¯ç»§æ‰¿äº†AQSç±»æ¥å®ç°é”çš„åŠŸèƒ½çš„</p>\n</blockquote>\n<h6 id=\"æ¡ˆä¾‹-4\"><a href=\"#æ¡ˆä¾‹-4\" class=\"headerlink\" title=\"æ¡ˆä¾‹\"></a>æ¡ˆä¾‹</h6><figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Slf</span>4j</span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ReentrantReadWriteLockTest</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">final</span> Map&lt;String,String&gt; data = <span class=\"keyword\">new</span> HashMap&lt;&gt;();</span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * è¯»ã€å†™é”</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">final</span> ReentrantReadWriteLock reentrantReadWriteLock = <span class=\"keyword\">new</span> ReentrantReadWriteLock();</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * è¯»é”</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">final</span> Lock readLock = reentrantReadWriteLock.readLock();</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * å†™é”</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">final</span> Lock writeLock = reentrantReadWriteLock.writeLock();</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Test</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">test</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">        put(<span class=\"string\">\"a\"</span>,<span class=\"string\">\"a\"</span>);</span><br><span class=\"line\">        get(<span class=\"string\">\"a\"</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> String <span class=\"title\">get</span><span class=\"params\">(String key)</span></span>&#123;</span><br><span class=\"line\">        readLock.lock();</span><br><span class=\"line\">        log.info(<span class=\"string\">\"è¯»é”\"</span>);</span><br><span class=\"line\">        <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> data.get(key);</span><br><span class=\"line\">        &#125;<span class=\"keyword\">finally</span> &#123;</span><br><span class=\"line\">            readLock.unlock();</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> String <span class=\"title\">put</span><span class=\"params\">(String key ,String value)</span></span>&#123;</span><br><span class=\"line\">        writeLock.lock();</span><br><span class=\"line\">        log.info(<span class=\"string\">\"å†™é”\"</span>);</span><br><span class=\"line\">        <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> data.put(key,value);</span><br><span class=\"line\">        &#125;<span class=\"keyword\">finally</span> &#123;</span><br><span class=\"line\">            writeLock.unlock();</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>è¾“å‡º</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">00:25:27.321 [main] INFO cn.z201.java.test.lock.ReentrantReadWriteLockTest - å†™é”</span><br><span class=\"line\">00:25:27.325 [main] INFO cn.z201.java.test.lock.ReentrantReadWriteLockTest - è¯»é”</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"Condition\"><a href=\"#Condition\" class=\"headerlink\" title=\"Condition\"></a>Condition</h4><blockquote>\n<p>synchronized å…³é”®å­—ï¼Œå®ƒé…åˆ Object çš„ wait()ã€notify() ç³»åˆ—æ–¹æ³•å¯ä»¥å®ç°ç­‰å¾…/é€šçŸ¥æ¨¡å¼ã€‚å¯¹äº Lockï¼Œé€šè¿‡ Condition ä¹Ÿå¯ä»¥å®ç°ç­‰å¾…/é€šçŸ¥æ¨¡å¼ã€‚Condition æ˜¯ä¸€ä¸ªæ¥å£ã€‚Condition æ¥å£çš„å®ç°ç±»æ˜¯ Lockï¼ˆAQSï¼‰ä¸­çš„ ConditionObjectã€‚Lock æ¥å£ä¸­æœ‰ä¸ª newCondition() æ–¹æ³•ï¼Œé€šè¿‡è¿™ä¸ªæ–¹æ³•å¯ä»¥è·å¾— Condition å¯¹è±¡ï¼ˆå…¶å®å°±æ˜¯ ConditionObject ï¼‰ã€‚å› æ­¤ï¼Œé€šè¿‡ Lock å¯¹è±¡å¯ä»¥è·å¾— Condition å¯¹è±¡ã€‚</p>\n</blockquote>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\">Lock lock  = <span class=\"keyword\">new</span> ReentrantLock();</span><br><span class=\"line\">Condition ondition1 = lock.newCondition();</span><br><span class=\"line\">Condition condition2 = lock.newCondition();</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"CountDownLatchä¸CyclicBarrier\"><a href=\"#CountDownLatchä¸CyclicBarrier\" class=\"headerlink\" title=\"CountDownLatchä¸CyclicBarrier\"></a>CountDownLatchä¸CyclicBarrier</h4><ul>\n<li>CountDownLatchçš„ä½œç”¨æ˜¯å…è®¸1æˆ–Nä¸ªçº¿ç¨‹ç­‰å¾…å…¶ä»–çº¿ç¨‹å®Œæˆæ‰§è¡Œï¼›è€ŒCyclicBarrieråˆ™æ˜¯å…è®¸Nä¸ªçº¿ç¨‹ç›¸äº’ç­‰å¾…</li>\n<li>CountDownLatchçš„è®¡æ•°å™¨æ— æ³•è¢«é‡ç½®ï¼›CyclicBarrierçš„è®¡æ•°å™¨å¯ä»¥è¢«é‡ç½®åä½¿ç”¨ï¼Œå› æ­¤å®ƒè¢«ç§°ä¸ºæ˜¯å¾ªç¯çš„barrier</li>\n</ul>\n<h4 id=\"CAS-Compare-And-Swap\"><a href=\"#CAS-Compare-And-Swap\" class=\"headerlink\" title=\"CAS Compare-And-Swap\"></a>CAS Compare-And-Swap</h4><blockquote>\n<p>CASçš„å…¨ç§°æ˜¯Compare-And-Swapï¼Œå®ƒæ˜¯CPUå¹¶å‘åŸè¯­ã€‚å®ƒçš„åŠŸèƒ½æ˜¯åˆ¤æ–­å†…å­˜æŸä¸ªä½ç½®çš„å€¼æ˜¯å¦ä¸ºé¢„æœŸå€¼ï¼Œå¦‚æœæ˜¯åˆ™æ›´æ”¹ä¸ºæ–°çš„å€¼ï¼Œè¿™ä¸ªè¿‡ç¨‹æ˜¯åŸå­çš„ï¼Œå¯ç”¨äºåœ¨å¤šçº¿ç¨‹ç¼–ç¨‹ä¸­å®ç°ä¸è¢«æ‰“æ–­çš„æ•°æ®äº¤æ¢æ“ä½œï¼Œä»è€Œé¿å…å¤šçº¿ç¨‹åŒæ—¶æ”¹å†™æŸä¸€æ•°æ®æ—¶ç”±äºæ‰§è¡Œé¡ºåºä¸ç¡®å®šæ€§ä»¥åŠä¸­æ–­çš„ä¸å¯é¢„çŸ¥æ€§äº§ç”Ÿçš„æ•°æ®ä¸ä¸€è‡´é—®é¢˜ã€‚è¯¥æ“ä½œé€šè¿‡å°†å†…å­˜ä¸­çš„å€¼ä¸æŒ‡å®šæ•°æ®è¿›è¡Œæ¯”è¾ƒï¼Œå½“æ•°å€¼ä¸€æ ·æ—¶å°†å†…å­˜ä¸­çš„æ•°æ®æ›¿æ¢ä¸ºæ–°çš„å€¼ã€‚å…¶åŸç†æ˜¯åˆ©ç”¨<code>sun.misc.Unsafe.java</code> ç±»é€šè¿‡JNIæ¥è°ƒç”¨ç¡¬ä»¶çº§åˆ«çš„åŸå­æ“ä½œæ¥å®ç°CAS(å³CASæ˜¯å€ŸåŠ©Cæ¥è°ƒç”¨CPUåº•å±‚æŒ‡ä»¤å®ç°çš„)ã€‚</p>\n</blockquote>\n<ul>\n<li><p>CAS = æ¯”è¾ƒå¹¶äº¤æ¢ + ä¹è§‚ç‰ˆæœ¬é” + é”è‡ªæ—‹</p>\n</li>\n<li><p>CASå…·å¤‡åŸå­æ€§ï¼Œå®ƒæ˜¯cpuç¡¬ä»¶æŒ‡ä»¤å®ç°ä¿è¯åŸå­æ€§ã€‚é€šè¿‡JNIè°ƒç”¨Nativeæ–¹æ³•ç”±c++ç¼–å†™çš„ç¡¬ä»¶çº§åˆ«æŒ‡ä»¤ã€‚JDKä¸­é€šè¿‡Unsafeç±»æ‰§è¡Œæ“ä½œã€‚</p>\n</li>\n</ul>\n<p><img src=\"https://z201.oss-cn-shanghai.aliyuncs.com/JavaNote/20211007005739.png\"></p>\n<ul>\n<li>éé˜»å¡ç®—æ³•</li>\n<li>éç‹¬å é”</li>\n</ul>\n<h5 id=\"ABAé—®é¢˜\"><a href=\"#ABAé—®é¢˜\" class=\"headerlink\" title=\"ABAé—®é¢˜\"></a>ABAé—®é¢˜</h5><blockquote>\n<p>CAS ç®—æ³•å®ç°ä¸€ä¸ªé‡è¦å‰æéœ€è¦å–å‡ºå†…å­˜ä¸­æŸæ—¶åˆ»çš„æ•°æ®ï¼Œè€Œåœ¨ä¸‹æ—¶åˆ»æ¯”è¾ƒå¹¶æ›¿æ¢ï¼Œé‚£ä¹ˆåœ¨è¿™ä¸ªæ—¶é—´å·®ç±»ä¼šå¯¼è‡´æ•°æ®çš„å˜åŒ–ã€‚</p>\n</blockquote>\n<ul>\n<li>æ¯”å¦‚è¯´ä¸€ä¸ªçº¿ç¨‹ t1 ä»å†…å­˜ä½ç½® V ä¸­å–å‡º Aï¼Œè¿™æ—¶å€™å¦ä¸€ä¸ªçº¿ç¨‹ t2 ä¹Ÿä»å†…å­˜ä¸­å–å‡º Aï¼Œå¹¶ä¸”t2 è¿›è¡Œäº†ä¸€äº›æ“ä½œå˜æˆäº† Bï¼Œç„¶å t2 åˆå°† V ä½ç½®çš„æ•°æ®å˜æˆ Aï¼Œè¿™æ—¶å€™çº¿ç¨‹ t1 è¿›è¡Œ CAS æ“ä½œå‘ç°å†…å­˜ä¸­ä»ç„¶æ˜¯ Aï¼Œç„¶å t1 æ“ä½œæˆåŠŸã€‚æ­¤æ—¶CASæ¯”è¾ƒå€¼ç›¸ç­‰ï¼Œè‡ªæ—‹æˆåŠŸã€‚</li>\n<li>éƒ¨åˆ†ä¹è§‚é”çš„å®ç°æ˜¯é€šè¿‡ç‰ˆæœ¬å·ï¼ˆversionï¼‰çš„æ–¹å¼æ¥è§£å†³ ABA é—®é¢˜ï¼Œä¹è§‚é”æ¯æ¬¡åœ¨æ‰§è¡Œæ•°æ®çš„ä¿®æ”¹æ“ä½œæ—¶ï¼Œéƒ½ä¼šå¸¦ä¸Šä¸€ä¸ªç‰ˆæœ¬å·ï¼Œä¸€æ—¦ç‰ˆæœ¬å·å’Œæ•°æ®çš„ç‰ˆæœ¬å·ä¸€è‡´å°±å¯ä»¥æ‰§è¡Œä¿®æ”¹æ“ä½œå¹¶å¯¹ç‰ˆæœ¬å·æ‰§è¡Œ+1 æ“ä½œï¼Œå¦åˆ™å°±æ‰§è¡Œå¤±è´¥ã€‚å› ä¸ºæ¯æ¬¡æ“ä½œçš„ç‰ˆæœ¬å·éƒ½ä¼šéšä¹‹å¢åŠ ï¼Œæ‰€ä»¥ä¸ä¼šå‡ºç° ABA é—®é¢˜ï¼Œå› ä¸ºç‰ˆæœ¬å·åªä¼šå¢åŠ ä¸ä¼šå‡å°‘ã€‚</li>\n</ul>\n<h4 id=\"synchronizedå’ŒReentrantLock-çš„åŒºåˆ«\"><a href=\"#synchronizedå’ŒReentrantLock-çš„åŒºåˆ«\" class=\"headerlink\" title=\"synchronizedå’ŒReentrantLock çš„åŒºåˆ«\"></a>synchronizedå’ŒReentrantLock çš„åŒºåˆ«</h4><ul>\n<li><p>ä¸¤è€…éƒ½æ˜¯å¯é‡â¼Šé”</p>\n<ul>\n<li>ä¸¤è€…éƒ½æ˜¯å¯é‡â¼Šé”ã€‚â€œå¯é‡â¼Šé”â€æ¦‚å¿µæ˜¯ï¼šâ¾ƒâ¼°å¯ä»¥å†æ¬¡è·å–â¾ƒâ¼°çš„å†…éƒ¨é”ã€‚â½å¦‚â¼€ä¸ªçº¿ç¨‹è·å¾—äº†æŸä¸ªå¯¹è±¡çš„é”ï¼Œæ­¤æ—¶è¿™ä¸ªå¯¹è±¡é”è¿˜æ²¡æœ‰é‡Šæ”¾ï¼Œå½“å…¶å†æ¬¡æƒ³è¦è·å–è¿™ä¸ªå¯¹è±¡çš„é”çš„æ—¶å€™è¿˜æ˜¯å¯ä»¥è·å–çš„ï¼Œå¦‚æœä¸å¯é”é‡â¼Šçš„è¯ï¼Œå°±ä¼šé€ æˆæ­»é”ã€‚åŒâ¼€ä¸ªçº¿ç¨‹æ¯æ¬¡è·å–é”ï¼Œé”çš„è®¡æ•°å™¨éƒ½â¾ƒå¢1ï¼Œæ‰€ä»¥è¦ç­‰åˆ°é”çš„è®¡æ•°å™¨ä¸‹é™ä¸º0æ—¶æ‰èƒ½é‡Šæ”¾é”ã€‚</li>\n</ul>\n</li>\n<li><p><strong>synchronized</strong> ä¾èµ–äº <strong>JVM</strong> â½½ <strong>ReentrantLock</strong> ä¾èµ–äº <strong>API</strong></p>\n<ul>\n<li>synchronized æ˜¯ä¾èµ–äº JVM å®ç°çš„ï¼Œå‰â¾¯æˆ‘ä»¬ä¹Ÿè®²åˆ°äº† è™šæ‹Ÿæœºå›¢é˜Ÿåœ¨ JDK1.6 ä¸º synchronized å…³é”®å­—è¿›â¾äº†å¾ˆå¤šä¼˜åŒ–ï¼Œä½†æ˜¯è¿™äº›ä¼˜åŒ–éƒ½æ˜¯åœ¨è™šæ‹Ÿæœºå±‚â¾¯å®ç°çš„ï¼Œå¹¶æ²¡æœ‰ç›´æ¥æš´éœ²ç»™æˆ‘ä»¬ã€‚ReentrantLock æ˜¯ JDK å±‚â¾¯å®ç°çš„ï¼ˆä¹Ÿå°±æ˜¯ API å±‚â¾¯ï¼Œéœ€è¦ lock() å’Œ unlock() â½…æ³•é…åˆtry/finally è¯­å¥å—æ¥å®Œæˆï¼‰ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥é€šè¿‡æŸ¥çœ‹å®ƒçš„æºä»£ç ï¼Œæ¥çœ‹å®ƒæ˜¯å¦‚ä½•å®ç°çš„ã€‚</li>\n</ul>\n</li>\n<li><p>synchronizedçš„æ–¹å¼åŠ é”ï¼Œä¼šè®©çº¿ç¨‹åœ¨ BLOCKED çŠ¶æ€å’Œ RUNNABLE çŠ¶æ€ä¹‹é—´åˆ‡æ¢ï¼Œåœ¨æ“ä½œç³»ç»Ÿä¸Šï¼Œå°±ä¼šé€ æˆç”¨æˆ·æ€å’Œå†…æ ¸æ€çš„é¢‘ç¹åˆ‡æ¢ï¼Œæ•ˆç‡å°±æ¯”è¾ƒä½ã€‚</p>\n</li>\n<li><p>ç›¸â½synchronizedï¼ŒReentrantLockå¢åŠ äº†â¼€äº›â¾¼çº§åŠŸèƒ½</p>\n<blockquote>\n<p>é™¤ééœ€è¦ä½¿ç”¨ ReentrantLock çš„é«˜çº§åŠŸèƒ½ï¼Œå¦åˆ™ä¼˜å…ˆä½¿ç”¨ synchronizedã€‚è¿™æ˜¯å› ä¸º synchronized æ˜¯ JVM å®ç°çš„ä¸€ç§é”æœºåˆ¶ï¼ŒJVM åŸç”Ÿåœ°æ”¯æŒå®ƒï¼Œè€Œ ReentrantLock ä¸æ˜¯æ‰€æœ‰çš„ JDK ç‰ˆæœ¬éƒ½æ”¯æŒã€‚å¹¶ä¸”ä½¿ç”¨ synchronized ä¸ç”¨æ‹…å¿ƒæ²¡æœ‰é‡Šæ”¾é”è€Œå¯¼è‡´æ­»é”é—®é¢˜ï¼Œå› ä¸º JVM ä¼šç¡®ä¿é”çš„é‡Šæ”¾ã€‚</p>\n</blockquote>\n<ul>\n<li><p>ç­‰å¾…å¯ä¸­æ–­</p>\n<ul>\n<li><strong>ReentrantLock</strong>æä¾›äº†â¼€ç§èƒ½å¤Ÿä¸­æ–­ç­‰å¾…é”çš„çº¿ç¨‹çš„æœºåˆ¶ï¼Œé€šè¿‡lock.lockInterruptibly()æ¥å®ç°è¿™ä¸ªæœºåˆ¶ã€‚ä¹Ÿå°±æ˜¯è¯´æ­£åœ¨ç­‰å¾…çš„çº¿ç¨‹å¯ä»¥é€‰æ‹©æ”¾å¼ƒç­‰å¾…ï¼Œæ”¹ä¸ºå¤„ç†å…¶ä»–äº‹æƒ…ã€‚</li>\n</ul>\n</li>\n<li><p>å®ç°å…¬å¹³é”</p>\n<ul>\n<li><strong>ReentrantLock</strong>å¯ä»¥æŒ‡å®šæ˜¯å…¬å¹³é”è¿˜æ˜¯â¾®å…¬å¹³é”ã€‚â½½<strong>synchronized</strong>åªèƒ½æ˜¯â¾®å…¬å¹³é”ã€‚æ‰€è°“çš„å…¬å¹³é”å°±æ˜¯å…ˆç­‰å¾…çš„çº¿ç¨‹å…ˆè·å¾—é”ã€‚ ReentrantLocké»˜è®¤æƒ…å†µæ˜¯â¾®å…¬å¹³çš„ï¼Œå¯ä»¥é€šè¿‡ ReentrantLockç±»çš„ ReentrantLock(boolean fair) æ„é€ â½…æ³•æ¥åˆ¶å®šæ˜¯å¦æ˜¯å…¬å¹³çš„ã€‚</li>\n</ul>\n</li>\n<li><p>å¯å®ç°é€‰æ‹©æ€§é€šçŸ¥</p>\n<ul>\n<li>ReentrantLockç±»å®ç°ç­‰å¾…/é€šçŸ¥æœºåˆ¶ï¼Œéœ€è¦å€ŸåŠ©äºConditionæ¥â¼ä¸newCondition() â½…æ³•ã€‚Conditionæ˜¯JDK1.5ä¹‹åæ‰æœ‰çš„ï¼Œå®ƒå…·æœ‰å¾ˆå¥½çš„çµæ´»æ€§ï¼Œâ½å¦‚å¯ä»¥å®ç°å¤šè·¯é€šçŸ¥åŠŸèƒ½ä¹Ÿå°±æ˜¯åœ¨â¼€ä¸ªLockå¯¹è±¡ä¸­å¯ä»¥åˆ›å»ºå¤šä¸ªConditionå®ä¾‹ï¼ˆå³å¯¹è±¡ç›‘è§†å™¨ï¼‰ï¼Œçº¿ç¨‹å¯¹è±¡å¯ä»¥æ³¨å†Œåœ¨æŒ‡å®šçš„<strong>Condition</strong>ä¸­ï¼Œä»â½½å¯ä»¥æœ‰é€‰æ‹©æ€§çš„è¿›â¾çº¿ç¨‹é€šçŸ¥ï¼Œåœ¨è°ƒåº¦çº¿ç¨‹ä¸Šæ›´åŠ çµæ´»ã€‚ åœ¨ä½¿â½¤<strong>notify()/notifyAll()**â½…æ³•è¿›â¾é€šçŸ¥æ—¶ï¼Œè¢«é€šçŸ¥çš„çº¿ç¨‹æ˜¯ç”± **JVM</strong> é€‰æ‹©çš„ï¼Œâ½¤<strong>ReentrantLock</strong>ç±»ç»“åˆ<strong>Condition</strong>å®ä¾‹å¯ä»¥å®ç°<strong>â€œ</strong>é€‰æ‹©æ€§é€šçŸ¥<strong>â€</strong> ï¼Œè¿™ä¸ªåŠŸèƒ½â¾®å¸¸é‡è¦ï¼Œâ½½ä¸”æ˜¯Conditionæ¥â¼é»˜è®¤æä¾›çš„ã€‚â½½synchronizedå…³é”®å­—å°±ç›¸å½“äºæ•´ä¸ªLockå¯¹è±¡ä¸­åªæœ‰â¼€ä¸ªConditionå®ä¾‹ï¼Œæ‰€æœ‰çš„çº¿ç¨‹éƒ½æ³¨å†Œåœ¨å®ƒâ¼€ä¸ªèº«ä¸Šã€‚å¦‚æœæ‰§â¾notifyAll()â½…æ³•çš„è¯å°±ä¼šé€šçŸ¥æ‰€æœ‰å¤„äºç­‰å¾…çŠ¶æ€çš„çº¿ç¨‹è¿™æ ·ä¼šé€ æˆå¾ˆâ¼¤çš„æ•ˆç‡é—®é¢˜ï¼Œâ½½Conditionå®ä¾‹çš„signalAll()â½…æ³• åªä¼šå”¤é†’æ³¨å†Œåœ¨è¯¥Conditionå®ä¾‹ä¸­çš„æ‰€æœ‰ç­‰å¾…çº¿ç¨‹ã€‚</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<h4 id=\"å…¬å¹³é”-éå…¬å¹³é”\"><a href=\"#å…¬å¹³é”-éå…¬å¹³é”\" class=\"headerlink\" title=\"å…¬å¹³é”/éå…¬å¹³é”\"></a>å…¬å¹³é”/éå…¬å¹³é”</h4><blockquote>\n<p>å…¬å¹³è¯»å†™é”æ¯”è¾ƒç®€å•çš„ä¸€ç§æ–¹å¼æ˜¯ï¼šç”¨é˜Ÿåˆ—æŠŠè·å–é”çš„çº¿ç¨‹æ’é˜Ÿï¼Œä¸ç®¡æ˜¯å†™çº¿ç¨‹è¿˜æ˜¯è¯»çº¿ç¨‹éƒ½æŒ‰ç…§å…ˆè¿›å…ˆå‡ºçš„åŸåˆ™åŠ é”å³å¯ï¼Œè¿™æ ·è¯»çº¿ç¨‹ä»ç„¶å¯ä»¥å¹¶å‘ï¼Œä¹Ÿä¸ä¼šå‡ºç°ã€Œé¥¥é¥¿ã€çš„ç°è±¡ã€‚</p>\n</blockquote>\n<ul>\n<li>å…¬å¹³é”çš„å«ä¹‰æ˜¯çº¿ç¨‹éœ€è¦æŒ‰ç…§è¯·æ±‚çš„é¡ºåºæ¥è·å¾—é”ï¼›è€Œéå…¬å¹³é”åˆ™å…è®¸â€œæ’é˜Ÿâ€çš„æƒ…å†µå­˜åœ¨ï¼Œæ‰€è°“çš„â€œæ’é˜Ÿâ€æŒ‡çš„æ˜¯ï¼Œçº¿ç¨‹åœ¨å‘é€è¯·æ±‚çš„åŒæ—¶è¯¥é”çš„çŠ¶æ€æ°å¥½å˜æˆäº†å¯ç”¨ï¼Œé‚£ä¹ˆæ­¤çº¿ç¨‹å°±å¯ä»¥è·³è¿‡é˜Ÿåˆ—ä¸­æ‰€æœ‰æ’é˜Ÿçš„çº¿ç¨‹ç›´æ¥æ‹¥æœ‰è¯¥é”ã€‚</li>\n<li>è€Œå…¬å¹³é”ç”±äºæœ‰æŒ‚èµ·å’Œæ¢å¤æ‰€ä»¥å­˜åœ¨ä¸€å®šçš„å¼€é”€ï¼Œå› æ­¤æ€§èƒ½ä¸å¦‚éå…¬å¹³é”ï¼Œæ‰€ä»¥ ReentrantLock å’Œ synchronized é»˜è®¤éƒ½æ˜¯éå…¬å¹³é”çš„å®ç°æ–¹å¼ã€‚</li>\n</ul>\n<h4 id=\"å¯é‡å…¥é”\"><a href=\"#å¯é‡å…¥é”\" class=\"headerlink\" title=\"å¯é‡å…¥é”\"></a>å¯é‡å…¥é”</h4><ul>\n<li>å¯é‡å…¥é”åˆåé€’å½’é”ï¼Œæ˜¯æŒ‡åœ¨åŒä¸€ä¸ªçº¿ç¨‹ï¼Œåœ¨å¤–å±‚æ–¹æ³•è·å–é”çš„æ—¶å€™ï¼Œåœ¨è¿›å…¥å†…å±‚æ–¹æ³•ä¼šè‡ªåŠ¨è·å–é”<strong>ã€‚</strong></li>\n<li>å¯é‡å…¥é”çš„ä¸€ä¸ªå¥½å¤„æ˜¯å¯ä¸€å®šç¨‹åº¦é¿å…æ­»é”ã€‚</li>\n</ul>\n<h4 id=\"å…±äº«é”-ç‹¬å é”\"><a href=\"#å…±äº«é”-ç‹¬å é”\" class=\"headerlink\" title=\"å…±äº«é”/ç‹¬å é”\"></a>å…±äº«é”/ç‹¬å é”</h4><ul>\n<li><p>åªèƒ½è¢«å•çº¿ç¨‹æŒæœ‰çš„é”å«ç‹¬å é”ï¼Œå¯ä»¥è¢«å¤šçº¿ç¨‹æŒæœ‰çš„é”å«å…±äº«é”ã€‚</p>\n<ul>\n<li>ç‹¬å é”æŒ‡çš„æ˜¯åœ¨ä»»ä½•æ—¶å€™æœ€å¤šåªèƒ½æœ‰ä¸€ä¸ªçº¿ç¨‹æŒæœ‰è¯¥é”ï¼Œæ¯”å¦‚ synchronized å°±æ˜¯ç‹¬å é”ï¼Œè€Œ ReadWriteLock è¯»å†™é”å…è®¸åŒä¸€æ—¶é—´å†…æœ‰å¤šä¸ªçº¿ç¨‹è¿›è¡Œè¯»æ“ä½œï¼Œå®ƒå°±å±äºå…±äº«é”ã€‚</li>\n<li>ç‹¬å é”å¯ä»¥ç†è§£ä¸ºæ‚²è§‚é”ï¼Œå½“æ¯æ¬¡è®¿é—®èµ„æºæ—¶éƒ½è¦åŠ ä¸Šäº’æ–¥é”ï¼Œè€Œå…±äº«é”å¯ä»¥ç†è§£ä¸ºä¹è§‚é”ï¼Œå®ƒæ”¾å®½äº†åŠ é”çš„æ¡ä»¶ï¼Œå…è®¸å¤šçº¿ç¨‹åŒæ—¶è®¿é—®è¯¥èµ„æºã€‚</li>\n</ul>\n</li>\n<li><p><code>å…±äº«é”</code>æ˜¯æŒ‡é”å¯è¢«å¤šä¸ªçº¿ç¨‹æ‰€æŒæœ‰ã€‚å¦‚æœä¸€ä¸ªçº¿ç¨‹å¯¹æ•°æ®åŠ ä¸Šå…±äº«é”åï¼Œé‚£ä¹ˆå…¶ä»–çº¿ç¨‹åªèƒ½å¯¹æ•°æ®å†åŠ å…±äº«é”ï¼Œï¥§èƒ½åŠ ç‹¬å é”ã€‚è·å¾—å…±äº«é”çš„çº¿ç¨‹åªèƒ½è¯»æ•°æ®ï¼Œï¥§èƒ½ä¿®æ”¹æ•°æ®ã€‚</p>\n<ul>\n<li>åœ¨ JDK ä¸­ <code>ReentrantReadWriteLock</code> å°±æ˜¯ä¸€ç§å…±äº«é”ã€‚</li>\n</ul>\n</li>\n</ul>\n<h4 id=\"äº’æ–¥é”-è¯»å†™é”\"><a href=\"#äº’æ–¥é”-è¯»å†™é”\" class=\"headerlink\" title=\"äº’æ–¥é”/è¯»å†™é”\"></a>äº’æ–¥é”/è¯»å†™é”</h4><ul>\n<li>ä¸Šé¢è®²çš„ç‹¬äº«é”/å…±äº«é”å°±æ˜¯ä¸€ç§å¹¿ä¹‰çš„è¯´æ³•ï¼Œäº’æ–¥é”/è¯»å†™é”å°±æ˜¯å…·ä½“çš„å®ç°ã€‚<ul>\n<li>äº’æ–¥é”åœ¨Javaä¸­çš„å…·ä½“å®ç°å°±æ˜¯<code>ReentrantLock</code></li>\n<li>è¯»å†™é”åœ¨Javaä¸­çš„å…·ä½“å®ç°å°±æ˜¯<code>ReadWriteLock</code></li>\n</ul>\n</li>\n</ul>\n<h4 id=\"åˆ†æ®µé”\"><a href=\"#åˆ†æ®µé”\" class=\"headerlink\" title=\"åˆ†æ®µé”\"></a>åˆ†æ®µé”</h4><ul>\n<li>åˆ†æ®µé”å…¶å®æ˜¯ä¸€ç§é”çš„è®¾è®¡ï¼Œå¹¶ä¸æ˜¯å…·ä½“çš„ä¸€ç§é”ï¼Œå¯¹äº<code>ConcurrentHashMap</code>è€Œè¨€ï¼Œå…¶å¹¶å‘çš„å®ç°å°±æ˜¯é€šè¿‡åˆ†æ®µé”çš„å½¢å¼æ¥å®ç°é«˜æ•ˆçš„å¹¶å‘æ“ä½œã€‚</li>\n</ul>\n<h4 id=\"é”å‡çº§ï¼ˆæ— é”-åå‘é”-è½»é‡çº§é”-é‡é‡çº§é”ï¼‰\"><a href=\"#é”å‡çº§ï¼ˆæ— é”-åå‘é”-è½»é‡çº§é”-é‡é‡çº§é”ï¼‰\" class=\"headerlink\" title=\"é”å‡çº§ï¼ˆæ— é”|åå‘é”|è½»é‡çº§é”|é‡é‡çº§é”ï¼‰\"></a>é”å‡çº§ï¼ˆæ— é”|åå‘é”|è½»é‡çº§é”|é‡é‡çº§é”ï¼‰</h4><ul>\n<li><p><code>æ— é”</code>çŠ¶æ€å…¶å®å°±æ˜¯ä¸Šé¢è®²çš„ä¹è§‚é”ã€‚</p>\n</li>\n<li><p>åå‘é”æ˜¯æŒ‡ä¸€æ®µåŒæ­¥ä»£ç ä¸€ç›´è¢«ä¸€ä¸ªçº¿ç¨‹æ‰€è®¿é—®ï¼Œé‚£ä¹ˆè¯¥çº¿ç¨‹ä¼šè‡ªåŠ¨è·å–é”ã€‚é™ä½è·å–é”çš„ä»£ä»·ã€‚</p>\n<ul>\n<li>å½“é”å¯¹è±¡ç¬¬ä¸€æ¬¡è¢«çº¿ç¨‹è·å–çš„æ—¶å€™ï¼Œè™šæ‹Ÿæœºå°†ä¼šæŠŠå¯¹è±¡å¤´ä¸­çš„æ ‡å¿—ä½è®¾ä¸ºâ€œ01â€ ï¼ˆå¯åå‘ï¼‰ï¼Œå³åå‘æ¨¡å¼ã€‚åŒæ—¶ä½¿ç”¨CASæ“ä½œæŠŠè·å–åˆ°è¿™ä¸ªé”çš„çº¿ç¨‹çš„IDè®°å½•åœ¨å¯¹è±¡çš„Mark Wordä¹‹ä¸­ï¼Œå¦‚æœCASæ“ä½œæˆåŠŸï¼ŒæŒæœ‰åå‘é”çš„çº¿ç¨‹ä»¥åæ¯æ¬¡è¿›å…¥è¿™ä¸ªé”ç›¸å…³çš„åŒæ­¥å—æ—¶ï¼Œè™šæ‹Ÿæœºéƒ½å¯ä»¥ä¸å†è¿›è¡Œä»»ä½•åŒæ­¥æ“ä½œã€‚</li>\n<li>å½“æœ‰å¦å¤–ä¸€ä¸ªçº¿ç¨‹å»å°è¯•è·å–è¿™ä¸ªé”æ—¶ï¼Œåå‘æ¨¡å¼å°±å®£å‘Šç»“æŸã€‚æ ¹æ®é”å¯¹è±¡ç›®å‰æ˜¯å¦å¤„äºè¢«é”å®šçš„çŠ¶æ€ï¼Œæ’¤é”€åå‘ï¼ˆRevoke Biasï¼‰åæ¢å¤åˆ°æœªé”å®šï¼ˆæ ‡å¿—ä½ä¸ºâ€œ01â€ï¼Œä¸å¯åå‘ï¼‰æˆ– è½»é‡çº§é”å®šï¼ˆæ ‡å¿—ä½ä¸ºâ€œ00â€ï¼‰çš„çŠ¶æ€ï¼Œåç»­çš„åŒæ­¥æ“ä½œå°±è¿›å…¥è½»é‡çº§é”çš„æµç¨‹ã€‚</li>\n</ul>\n</li>\n<li><p>è¿›å…¥åˆ°è½»é‡çº§é”è¯´æ˜ä¸æ­¢ä¸€ä¸ªçº¿ç¨‹å°è¯•è·å–é”ï¼Œè¿™ä¸ªé˜¶æ®µä¼šé€šè¿‡è‡ªé€‚åº”è‡ªæ—‹CASæ–¹å¼è·å–é”ã€‚å¦‚æœè·å–å¤±è´¥ï¼Œåˆ™è¿›è¡Œé”è†¨èƒ€ï¼Œè¿›å…¥é‡é‡çº§é”æµç¨‹ï¼Œçº¿ç¨‹é˜»å¡ã€‚</p>\n</li>\n<li><p>é‡é‡çº§é”æ˜¯é€šè¿‡ç³»ç»Ÿçš„çº¿ç¨‹äº’æ–¥é”æ¥å®ç°çš„ï¼Œä»£ä»·æœ€æ˜‚è´µ</p>\n</li>\n</ul>\n<h4 id=\"è‡ªæ—‹é”\"><a href=\"#è‡ªæ—‹é”\" class=\"headerlink\" title=\"è‡ªæ—‹é”\"></a>è‡ªæ—‹é”</h4><ul>\n<li><code>è‡ªæ—‹é”</code>æ˜¯æŒ‡çº¿ç¨‹åœ¨æ²¡æœ‰è·å¾—é”æ—¶ä¸æ˜¯è¢«ç›´æ¥æŒ‚èµ·ï¼Œè€Œæ˜¯æ‰§è¡Œä¸€ä¸ªå¿™å¾ªç¯ï¼Œè¿™ä¸ªå¿™å¾ªç¯å°±æ˜¯æ‰€è°“çš„è‡ªæ—‹ã€‚<ul>\n<li>å¦‚æœé”è¢«å¦ä¸€ä¸ªçº¿ç¨‹å ç”¨çš„æ—¶é—´æ¯”è¾ƒé•¿ï¼Œå³ä½¿è‡ªæ—‹äº†ä¹‹åå½“å‰çº¿ç¨‹è¿˜æ˜¯ä¼šè¢«æŒ‚èµ·ï¼Œå¿™å¾ªç¯å°±ä¼šå˜æˆæµªè´¹ç³»ç»Ÿèµ„æºçš„æ“ä½œï¼Œåè€Œé™ä½äº†æ•´ä½“æ€§èƒ½ã€‚å› æ­¤è‡ªæ—‹é”æ˜¯ä¸é€‚åº”é”å ç”¨æ—¶é—´é•¿çš„å¹¶å‘æƒ…å†µçš„ã€‚</li>\n</ul>\n</li>\n</ul>\n<h4 id=\"äº’æ–¥é”ä¸è‡ªæ—‹é”\"><a href=\"#äº’æ–¥é”ä¸è‡ªæ—‹é”\" class=\"headerlink\" title=\"äº’æ–¥é”ä¸è‡ªæ—‹é”\"></a>äº’æ–¥é”ä¸è‡ªæ—‹é”</h4><ul>\n<li><strong>äº’æ–¥é”</strong>åŠ é”å¤±è´¥åï¼Œçº¿ç¨‹ä¼š<strong>é‡Šæ”¾ CPU</strong> ï¼Œç»™å…¶ä»–çº¿ç¨‹ï¼›<ul>\n<li>äº’æ–¥é”æ˜¯ä¸€ç§ã€Œç‹¬å é”ã€ï¼Œæ¯”å¦‚å½“çº¿ç¨‹ A åŠ é”æˆåŠŸåï¼Œæ­¤æ—¶äº’æ–¥é”å·²ç»è¢«çº¿ç¨‹ A ç‹¬å äº†ï¼Œåªè¦çº¿ç¨‹ A æ²¡æœ‰é‡Šæ”¾æ‰‹ä¸­çš„é”ï¼Œçº¿ç¨‹ B åŠ é”å°±ä¼šå¤±è´¥ï¼Œäºæ˜¯å°±ä¼šé‡Šæ”¾ CPU è®©ç»™å…¶ä»–çº¿ç¨‹ï¼Œ<strong>æ—¢ç„¶çº¿ç¨‹ B é‡Šæ”¾æ‰äº† CPUï¼Œè‡ªç„¶çº¿ç¨‹ B åŠ é”çš„ä»£ç å°±ä¼šè¢«é˜»å¡</strong>ã€‚<ul>\n<li><strong>å¯¹äºäº’æ–¥é”åŠ é”å¤±è´¥è€Œé˜»å¡çš„ç°è±¡ï¼Œæ˜¯ç”±æ“ä½œç³»ç»Ÿå†…æ ¸å®ç°çš„</strong>ã€‚å½“åŠ é”å¤±è´¥æ—¶ï¼Œå†…æ ¸ä¼šå°†çº¿ç¨‹ç½®ä¸ºã€Œç¡çœ ã€çŠ¶æ€ï¼Œç­‰åˆ°é”è¢«é‡Šæ”¾åï¼Œå†…æ ¸ä¼šåœ¨åˆé€‚çš„æ—¶æœºå”¤é†’çº¿ç¨‹ï¼Œå½“è¿™ä¸ªçº¿ç¨‹æˆåŠŸè·å–åˆ°é”åï¼Œäºæ˜¯å°±å¯ä»¥ç»§ç»­æ‰§è¡Œã€‚</li>\n</ul>\n</li>\n</ul>\n</li>\n<li><strong>è‡ªæ—‹é”</strong>åŠ é”å¤±è´¥åï¼Œçº¿ç¨‹ä¼š<strong>å¿™ç­‰å¾…</strong>ï¼Œç›´åˆ°å®ƒæ‹¿åˆ°é”ï¼›<ul>\n<li>è‡ªæ—‹é”æ˜¯é€šè¿‡ CPU æä¾›çš„ <code>CAS</code> å‡½æ•°ï¼ˆ<em>Compare And Swap</em>ï¼‰ï¼Œåœ¨ã€Œç”¨æˆ·æ€ã€å®ŒæˆåŠ é”å’Œè§£é”æ“ä½œï¼Œä¸ä¼šä¸»åŠ¨äº§ç”Ÿçº¿ç¨‹ä¸Šä¸‹æ–‡åˆ‡æ¢ï¼Œæ‰€ä»¥ç›¸æ¯”äº’æ–¥é”æ¥è¯´ï¼Œä¼šå¿«ä¸€äº›ï¼Œå¼€é”€ä¹Ÿå°ä¸€äº›ã€‚</li>\n<li>ä¸€èˆ¬åŠ é”çš„è¿‡ç¨‹ï¼ŒåŒ…å«ä¸¤ä¸ªæ­¥éª¤ï¼š<ul>\n<li>ç¬¬ä¸€æ­¥ï¼ŒæŸ¥çœ‹é”çš„çŠ¶æ€ï¼Œå¦‚æœé”æ˜¯ç©ºé—²çš„ï¼Œåˆ™æ‰§è¡Œç¬¬äºŒæ­¥ï¼›</li>\n<li>ç¬¬äºŒæ­¥ï¼Œå°†é”è®¾ç½®ä¸ºå½“å‰çº¿ç¨‹æŒæœ‰ï¼›</li>\n<li>CAS å‡½æ•°å°±æŠŠè¿™ä¸¤ä¸ªæ­¥éª¤åˆå¹¶æˆä¸€æ¡ç¡¬ä»¶çº§æŒ‡ä»¤ï¼Œå½¢æˆ<strong>åŸå­æŒ‡ä»¤</strong>ï¼Œè¿™æ ·å°±ä¿è¯äº†è¿™ä¸¤ä¸ªæ­¥éª¤æ˜¯ä¸å¯åˆ†å‰²çš„ï¼Œè¦ä¹ˆä¸€æ¬¡æ€§æ‰§è¡Œå®Œä¸¤ä¸ªæ­¥éª¤ï¼Œè¦ä¹ˆä¸¤ä¸ªæ­¥éª¤éƒ½ä¸æ‰§è¡Œã€‚</li>\n<li>ä½¿ç”¨è‡ªæ—‹é”çš„æ—¶å€™ï¼Œå½“å‘ç”Ÿå¤šçº¿ç¨‹ç«äº‰é”çš„æƒ…å†µï¼ŒåŠ é”å¤±è´¥çš„çº¿ç¨‹ä¼šã€Œå¿™ç­‰å¾…ã€ï¼Œç›´åˆ°å®ƒæ‹¿åˆ°é”ã€‚</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<h4 id=\"é”ä¼˜åŒ–æŠ€æœ¯ï¼ˆé”ç²—åŒ–-é”æ¶ˆé™¤ï¼‰\"><a href=\"#é”ä¼˜åŒ–æŠ€æœ¯ï¼ˆé”ç²—åŒ–-é”æ¶ˆé™¤ï¼‰\" class=\"headerlink\" title=\"é”ä¼˜åŒ–æŠ€æœ¯ï¼ˆé”ç²—åŒ–|é”æ¶ˆé™¤ï¼‰\"></a>é”ä¼˜åŒ–æŠ€æœ¯ï¼ˆé”ç²—åŒ–|é”æ¶ˆé™¤ï¼‰</h4><ul>\n<li><code>é”ç²—åŒ–</code>å°±æ˜¯å°†å¤šä¸ªåŒæ­¥å—çš„æ•°é‡å‡å°‘ï¼Œå¹¶å°†å•ä¸ªåŒæ­¥å—çš„ä½œç”¨èŒƒå›´æ‰©å¤§ï¼Œæœ¬è´¨ä¸Šå°±æ˜¯å°†å¤šæ¬¡ä¸Šé”ã€è§£é”çš„è¯·æ±‚åˆå¹¶ä¸ºä¸€æ¬¡åŒæ­¥è¯·æ±‚ã€‚</li>\n<li><code>é”æ¶ˆé™¤</code>æ˜¯æŒ‡è™šæ‹Ÿæœºç¼–è¯‘å™¨åœ¨è¿è¡Œæ—¶æ£€æµ‹åˆ°äº†å…±äº«æ•°æ®æ²¡æœ‰ç«äº‰çš„é”ï¼Œä»è€Œå°†è¿™äº›é”è¿›è¡Œæ¶ˆé™¤ã€‚</li>\n</ul>\n<h4 id=\"æ­»é”-Deadlock-ï¼Ÿå¦‚ä½•åˆ†æå’Œé¿å…æ­»é”ï¼Ÿ\"><a href=\"#æ­»é”-Deadlock-ï¼Ÿå¦‚ä½•åˆ†æå’Œé¿å…æ­»é”ï¼Ÿ\" class=\"headerlink\" title=\"æ­»é”(Deadlock)ï¼Ÿå¦‚ä½•åˆ†æå’Œé¿å…æ­»é”ï¼Ÿ\"></a><strong>æ­»é”(Deadlock)ï¼Ÿå¦‚ä½•åˆ†æå’Œé¿å…æ­»é”ï¼Ÿ</strong></h4><ul>\n<li>æ­»é”æ˜¯æŒ‡ä¸¤ä¸ªä»¥ä¸Šçš„çº¿ç¨‹æ°¸è¿œé˜»å¡çš„æƒ…å†µï¼Œè¿™ç§æƒ…å†µäº§ç”Ÿè‡³å°‘éœ€è¦ä¸¤ä¸ªä»¥ä¸Šçš„çº¿ç¨‹å’Œä¸¤ä¸ªä»¥ä¸Šçš„èµ„æºã€‚</li>\n<li>åˆ†ææ­»é”ï¼Œæˆ‘ä»¬éœ€è¦æŸ¥çœ‹Javaåº”ç”¨ç¨‹åºçš„çº¿ç¨‹è½¬å‚¨ã€‚æˆ‘ä»¬éœ€è¦æ‰¾å‡ºé‚£äº›çŠ¶æ€ä¸ºBLOCKEDçš„çº¿ç¨‹å’Œä»–ä»¬ç­‰å¾…çš„èµ„æºã€‚æ¯ä¸ªèµ„æºéƒ½æœ‰ä¸€ä¸ªå”¯ä¸€çš„idï¼Œç”¨è¿™ä¸ªidæˆ‘ä»¬å¯ä»¥æ‰¾å‡ºå“ªäº›çº¿ç¨‹å·²ç»æ‹¥æœ‰äº†å®ƒçš„å¯¹è±¡é”ã€‚</li>\n<li>é¿å…åµŒå¥—é”ï¼Œåªåœ¨éœ€è¦çš„åœ°æ–¹ä½¿ç”¨é”å’Œé¿å…æ— é™æœŸç­‰å¾…æ˜¯é¿å…æ­»é”çš„é€šå¸¸åŠæ³•ã€‚</li>\n</ul>\n<h5 id=\"æ¡ˆä¾‹-5\"><a href=\"#æ¡ˆä¾‹-5\" class=\"headerlink\" title=\"æ¡ˆä¾‹\"></a>æ¡ˆä¾‹</h5><figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Slf</span>4j</span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">DeadLockTest</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String[] args)</span> </span>&#123;</span><br><span class=\"line\">        Object l1 = <span class=\"keyword\">new</span> Object();</span><br><span class=\"line\">        Object l2 = <span class=\"keyword\">new</span> Object();</span><br><span class=\"line\">        <span class=\"keyword\">new</span> Thread(()-&gt;&#123;</span><br><span class=\"line\">            <span class=\"keyword\">synchronized</span> (l1)&#123;</span><br><span class=\"line\">                log.info(<span class=\"string\">\"&#123;&#125; lock 1 success\"</span>,Thread.currentThread().getName());</span><br><span class=\"line\">                <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">                    Thread.sleep(<span class=\"number\">1000</span>);</span><br><span class=\"line\">                &#125; <span class=\"keyword\">catch</span> (InterruptedException e) &#123;</span><br><span class=\"line\">                    e.printStackTrace();</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">                <span class=\"keyword\">synchronized</span> (l2)&#123;</span><br><span class=\"line\">                    log.info(<span class=\"string\">\"&#123;&#125; lock 2 success\"</span>,Thread.currentThread().getName());</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;).start();</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">new</span> Thread(()-&gt;&#123;</span><br><span class=\"line\">            <span class=\"keyword\">synchronized</span> (l2)&#123;</span><br><span class=\"line\">                log.info(<span class=\"string\">\"&#123;&#125; lock 2 success\"</span>,Thread.currentThread().getName());</span><br><span class=\"line\">                <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">                    Thread.sleep(<span class=\"number\">1000</span>);</span><br><span class=\"line\">                &#125; <span class=\"keyword\">catch</span> (InterruptedException e) &#123;</span><br><span class=\"line\">                    e.printStackTrace();</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">                <span class=\"keyword\">synchronized</span> (l1)&#123;</span><br><span class=\"line\">                    log.info(<span class=\"string\">\"&#123;&#125; lock 1 success\"</span>,Thread.currentThread().getName());</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;).start();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"number\">14</span>:<span class=\"number\">53</span>:<span class=\"number\">28.122</span> [Thread-<span class=\"number\">1</span>] INFO cn.z201.java.test.lock.DeadLockTest - Thread-<span class=\"number\">1</span> lock <span class=\"number\">2</span> success</span><br><span class=\"line\"><span class=\"number\">14</span>:<span class=\"number\">53</span>:<span class=\"number\">28.122</span> [Thread-<span class=\"number\">0</span>] INFO cn.z201.java.test.lock.DeadLockTest - Thread-<span class=\"number\">0</span> lock <span class=\"number\">1</span> success</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"å¦‚ä½•é¿å…çº¿ç¨‹æ­»é”\"><a href=\"#å¦‚ä½•é¿å…çº¿ç¨‹æ­»é”\" class=\"headerlink\" title=\"å¦‚ä½•é¿å…çº¿ç¨‹æ­»é”?\"></a>å¦‚ä½•é¿å…çº¿ç¨‹æ­»é”?</h5><ul>\n<li><p>ç ´åäº’æ–¥æ¡ä»¶ ï¼šè¿™ä¸ªæ¡ä»¶æˆ‘ä»¬æ²¡æœ‰åŠæ³•ç ´åï¼Œå› ä¸ºæˆ‘ä»¬â½¤é”æœ¬æ¥å°±æ˜¯æƒ³è®©ä»–ä»¬äº’æ–¥çš„ï¼ˆä¸´ç•Œèµ„æºéœ€è¦äº’æ–¥è®¿é—®ï¼‰ã€‚</p>\n</li>\n<li><p>ç ´åè¯·æ±‚ä¸ä¿æŒæ¡ä»¶ ï¼šâ¼€æ¬¡æ€§ç”³è¯·æ‰€æœ‰çš„èµ„æºã€‚</p>\n</li>\n<li><p>ç ´åä¸å‰¥å¤ºæ¡ä»¶ ï¼šå â½¤éƒ¨åˆ†èµ„æºçš„çº¿ç¨‹è¿›â¼€æ­¥ç”³è¯·å…¶ä»–èµ„æºæ—¶ï¼Œå¦‚æœç”³è¯·ä¸åˆ°ï¼Œå¯ä»¥ä¸»åŠ¨é‡Šæ”¾å®ƒå æœ‰çš„èµ„æºã€‚</p>\n</li>\n<li><p>ç ´åå¾ªç¯ç­‰å¾…æ¡ä»¶ ï¼šé æŒ‰åºç”³è¯·èµ„æºæ¥é¢„é˜²ã€‚æŒ‰æŸâ¼€é¡ºåºç”³è¯·èµ„æºï¼Œé‡Šæ”¾èµ„æºåˆ™ååºé‡Šæ”¾ã€‚ç ´åå¾ªç¯ç­‰å¾…æ¡ä»¶ã€‚</p>\n</li>\n</ul>\n<h3 id=\"Javaä¸­å¸¸è§çš„çº¿ç¨‹åŒæ­¥æ–¹å¼\"><a href=\"#Javaä¸­å¸¸è§çš„çº¿ç¨‹åŒæ­¥æ–¹å¼\" class=\"headerlink\" title=\"Javaä¸­å¸¸è§çš„çº¿ç¨‹åŒæ­¥æ–¹å¼\"></a>Javaä¸­å¸¸è§çš„çº¿ç¨‹åŒæ­¥æ–¹å¼</h3><ul>\n<li>Objectä¸­wait\\notify\\notifyAllå®Œæˆå¯¹monitorä¹‹é—´çš„åŒæ­¥ã€‚</li>\n<li>synchronizedå¯¹æ–¹æ³•\\å¯¹è±¡ä»£ç å—åŒæ­¥ã€‚</li>\n<li>volatileå…³é”®å­—ä¿®é¥°å­—æ®µå®ç°å˜é‡çš„å¯è§æ€§ã€‚</li>\n<li>atomicè‡ªå¢è‡ªå‡ã€‚</li>\n<li>ThreadLoacalçº¿ç¨‹å±€éƒ¨å˜é‡ã€‚</li>\n<li>jucåŒ…ä¸‹å·¥å…·ç±»\\LinkedBlockingQueueã€‚</li>\n<li>Threadä¸­join\\awaitæ–¹æ³•å®ç°ä»»åŠ¡é¡ºåºæ‰§è¡Œã€‚</li>\n</ul>\n","categories":["æŸ¥ç¼ºè¡¥æ¼"],"tags":["Java"]},{"title":"æºç é˜…è¯»-HashMap","url":"/posts/307537220/","content":"<blockquote>\n<p>æœ¬ç« å±äºæŒç»­å­¦ä¹ ã€é•¿æœŸæ›´ä¿®ã€‚</p>\n</blockquote>\n<h2 id=\"HashMap\"><a href=\"#HashMap\" class=\"headerlink\" title=\"HashMap\"></a>HashMap</h2><p><img src=\"https://z201.oss-cn-shanghai.aliyuncs.com/JavaNote/HashMap/HashMap.png\"></p>\n<h3 id=\"ç‰¹å¾\"><a href=\"#ç‰¹å¾\" class=\"headerlink\" title=\"ç‰¹å¾\"></a>ç‰¹å¾</h3><ul>\n<li>HashMap å…è®¸<code>null</code>é”®å’Œ<code>null</code>å€¼ï¼Œnullé”®å“ˆè¥¿å€¼ä¸º0.</li>\n<li>HashMap å¹¶ä¸æ˜¯æœ‰åºçš„å­˜æ”¾ã€‚åœ¨ä½¿ç”¨<code>iterate</code>è¿­ä»£çš„æ—¶å€™ï¼Œå¹¶ä¸èƒ½å¾—åˆ°å­˜æ”¾é¡ºåºã€‚</li>\n<li>HashMapä½¿ç”¨å®ƒçš„å†…éƒ¨ç±»Node &lt;Kï¼ŒV&gt;æ¥å­˜å‚¨æ˜ å°„ã€‚</li>\n<li>HashMapå°†<code>entries</code>å­˜å‚¨åˆ°å¤šä¸ªå•é“¾è¡¨ä¸­ï¼Œç§°ä¸ºå­˜å‚¨æ¡¶æˆ–å­˜å‚¨æ¡¶ã€‚é»˜è®¤çš„ç®±æ•°ä¸º16ï¼Œé»˜è®¤è´Ÿè½½å› å­0.75ï¼Œå®ƒçš„æ‰©å±•ç³»æ•°ä¸º2ï¼Œå½“é”®å€¼å¯¹æ•°é‡å¤§äºé˜ˆå€¼ï¼Œåˆ™å®¹é‡æ‰©å®¹åˆ°åŸæ¥çš„2å€ã€‚</li>\n<li>HashMapä¸æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œå¯¹äºå¤šçº¿ç¨‹ç¯å¢ƒï¼Œæ‚¨åº”è¯¥ä½¿ç”¨ConcurrentHashMapç±»æˆ–ä½¿ç”¨<code>Collections.synchronizedMap()</code>æ–¹æ³•è·å–åŒæ­¥æ˜ å°„ã€‚</li>\n<li>åº•å±‚å®ç°æ˜¯é“¾è¡¨ï¼Œä½†æ˜¯jdk1.8åæ·»åŠ äº†çº¢é»‘è°çš„è½¬æ¢ã€‚</li>\n<li>HashMapçš„Keyç”¨å­˜æ”¾ï¼Œæ‰€ä»¥keyé»˜è®¤ä¸å…è®¸é‡å¤çš„ï¼Œå¦‚æœæƒ³é‡å¤å°±é‡å†™keyçš„hashcodeå’Œequalsæ–¹æ³•ã€‚</li>\n<li>æŸ¥æ‰¾æ–¹æ³•ï¼Œæ ¹æ® hash å€¼æˆ‘ä»¬èƒ½å¤Ÿå¿«é€Ÿå®šä½åˆ°æ•°ç»„çš„å…·ä½“ä¸‹æ ‡ï¼Œä½†æ˜¯ä¹‹åçš„è¯ï¼Œéœ€è¦é¡ºç€é“¾è¡¨ä¸€ä¸ªä¸ªæ¯”è¾ƒä¸‹å»æ‰èƒ½æ‰¾åˆ°æˆ‘ä»¬éœ€è¦çš„ï¼Œæ—¶é—´å¤æ‚åº¦å–å†³äºé“¾è¡¨çš„é•¿åº¦ï¼Œä¸º O(n)ã€‚ä¸ºäº†é™ä½è¿™éƒ¨åˆ†çš„å¼€é”€ï¼Œåœ¨ Java8 ä¸­ï¼Œå½“é“¾è¡¨ä¸­çš„å…ƒç´ è¶…è¿‡äº† 8 ä¸ªä»¥åï¼Œä¼šå°†é“¾è¡¨è½¬æ¢ä¸ºçº¢é»‘æ ‘ï¼Œåœ¨è¿™äº›ä½ç½®è¿›è¡ŒæŸ¥æ‰¾çš„æ—¶å€™å¯ä»¥é™ä½æ—¶é—´å¤æ‚åº¦ä¸º O(logN)ã€‚</li>\n</ul>\n<p><img src=\"https://z201.oss-cn-shanghai.aliyuncs.com/JavaNote/20211005220907.png\"></p>\n<h2 id=\"æºç åˆ†æ\"><a href=\"#æºç åˆ†æ\" class=\"headerlink\" title=\"æºç åˆ†æ\"></a>æºç åˆ†æ</h2><blockquote>\n<p>HashMapä¸­çš„å¸¸é‡ä»¥åŠå˜é‡</p>\n</blockquote>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// æœªæŒ‡å®šå®¹é‡å¤§å°çš„æƒ…å†µä¸‹ï¼Œé»˜è®¤åˆå§‹åŒ–16ã€‚å®¹é‡éƒ½æ˜¯2çš„å¹‚ã€‚ç¬¬ä¸€æ¬¡æ‰©å®¹å¤§æ¦‚ç‡æƒ…å†µä¸‹æ˜¯64ã€‚</span></span><br><span class=\"line\"><span class=\"keyword\">static</span> <span class=\"keyword\">final</span> <span class=\"keyword\">int</span> DEFAULT_INITIAL_CAPACITY = <span class=\"number\">1</span> &lt;&lt; <span class=\"number\">4</span>; <span class=\"comment\">// aka 16</span></span><br><span class=\"line\"><span class=\"comment\">// å®¹é‡æœ€å¤§é•¿ä¸ªæ•°ã€‚</span></span><br><span class=\"line\"><span class=\"keyword\">static</span> <span class=\"keyword\">final</span> <span class=\"keyword\">int</span> MAXIMUM_CAPACITY = <span class=\"number\">1</span> &lt;&lt; <span class=\"number\">30</span>;</span><br><span class=\"line\"><span class=\"comment\">// é»˜è®¤è´Ÿè½½å› å­ï¼Œ</span></span><br><span class=\"line\"><span class=\"keyword\">static</span> <span class=\"keyword\">final</span> <span class=\"keyword\">float</span> DEFAULT_LOAD_FACTOR = <span class=\"number\">0.75f</span>;</span><br><span class=\"line\"><span class=\"comment\">// HashMapä½¿ç”¨å•é“¾è¡¨æ¥å­˜å‚¨å…ƒç´ ï¼Œè¿™äº›å…ƒç´ ç§°ä¸ºbinæˆ–bucketsã€‚å½“æˆ‘ä»¬è°ƒç”¨putæ–¹æ³•æ—¶ï¼Œkeyçš„hashCodeç”¨äºç¡®å®šå°†ç”¨äºå­˜å‚¨æ˜ å°„çš„å­˜å‚¨åŒºã€‚</span></span><br><span class=\"line\"><span class=\"comment\">// é“¾è¡¨è½¬æ¢çº¢é»‘æ ‘çš„é˜€å€¼ã€‚å½“æŸä¸ªbin\\bucketsçš„é•¿åº¦å¤§äº8çš„æ—¶å€™è¿›è¡Œè½¬æ¢ã€‚</span></span><br><span class=\"line\"><span class=\"keyword\">static</span> <span class=\"keyword\">final</span> <span class=\"keyword\">int</span> TREEIFY_THRESHOLD = <span class=\"number\">8</span>;</span><br><span class=\"line\"><span class=\"comment\">// çº¢é»‘æ ‘è½¬æ¢é“¾è¡¨çš„é˜€å€¼ã€‚å½“æŸä¸ªbin\\bucketsçš„é•¿åº¦å°äº8çš„æ—¶å€™è¿›è¡Œè½¬æ¢ã€‚</span></span><br><span class=\"line\"><span class=\"keyword\">static</span> <span class=\"keyword\">final</span> <span class=\"keyword\">int</span> UNTREEIFY_THRESHOLD = <span class=\"number\">6</span>;</span><br><span class=\"line\"><span class=\"comment\">// æ¡¶ä¸­binæœ€å°hashå®¹é‡ï¼Œå¦‚æœå¤§äºè¿™ä¸ªå€¼ä¼šè¿›è¡Œresizeæ‰©å®¹æ“ä½œï¼Œæ­¤å€¼è‡³å°‘æ˜¯TREEIFY_THRESHOLDçš„4å€</span></span><br><span class=\"line\"><span class=\"keyword\">static</span> <span class=\"keyword\">final</span> <span class=\"keyword\">int</span> MIN_TREEIFY_CAPACITY = <span class=\"number\">64</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// è¢«transientä¿®é¥°çš„å˜é‡ä¸å›è¢«åºåˆ—åŒ–ã€‚</span></span><br><span class=\"line\"><span class=\"comment\">// HashMapå†…éƒ¨ç±»å®ç°äº†Mapçš„å†…éƒ¨ç±»Entry,ç”¨äºå­˜å‚¨K,Vï¼Œç¬¬ä¸€æ¬¡ä½¿ç”¨çš„æ—¶å€™è¢«åˆ›å»ºï¼Œæ ¹æ®éœ€è¦å¯ä»¥è¿›è¡Œresizeã€‚åˆ†é…é•¿åº¦ä¸º2çš„å†¥æ¬¡æ–¹</span></span><br><span class=\"line\"><span class=\"keyword\">transient</span> Node&lt;K,V&gt;[] table;</span><br><span class=\"line\"><span class=\"comment\">// å½“è¢«è°ƒç”¨entrySetæ—¶è¢«èµ‹å€¼ã€‚é€šè¿‡keySet()æ–¹æ³•å¯ä»¥å¾—åˆ°map keyçš„é›†åˆï¼Œé€šè¿‡valuesæ–¹æ³•å¯ä»¥å¾—åˆ°map valueçš„é›†åˆ</span></span><br><span class=\"line\"><span class=\"keyword\">transient</span> Set&lt;Map.Entry&lt;K,V&gt;&gt; entrySet;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// sizeè¡¨ç¤ºHashMapä¸­å­˜æ”¾KVçš„æ•°é‡ï¼ˆä¸ºé“¾è¡¨å’Œæ ‘ä¸­çš„KVçš„æ€»å’Œï¼‰ã€‚</span></span><br><span class=\"line\"><span class=\"keyword\">transient</span> <span class=\"keyword\">int</span> size;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// æ“ä½œæ¬¡æ•°ï¼Œé€šå¸¸ç”¨è¿‡fail-fastã€‚æ¯æ¬¡æ‰©å®¹å’Œæ›´æ”¹mapç»“æ„çš„è®¡æ•°å™¨</span></span><br><span class=\"line\"><span class=\"keyword\">transient</span> <span class=\"keyword\">int</span> modCount;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// threshold=capacity*loadFactor thresholdè¡¨ç¤ºå½“HashMapçš„sizeå¤§äºthresholdæ—¶ä¼šæ‰§è¡Œresizeæ“ä½œã€‚ </span></span><br><span class=\"line\"><span class=\"keyword\">int</span> threshold;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// Load Factorç”¨äºç¡®å®šä½•æ—¶é‡æ–°æ•£åˆ—HashMapå¹¶å¢åŠ å­˜å‚¨æ¡¶å¤§å°ã€‚å­˜å‚¨æ¡¶æˆ–å®¹é‡çš„é»˜è®¤å€¼ä¸º16ï¼Œè´Ÿè½½ç³»æ•°ä¸º0.75ã€‚é€šè¿‡ä¹˜ä»¥å®¹é‡å’Œè´Ÿè½½å› å­æ¥è®¡ç®—é‡æ–°æ•£åˆ—çš„é˜ˆå€¼</span></span><br><span class=\"line\"><span class=\"keyword\">final</span> <span class=\"keyword\">float</span> loadFactor;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>Node</p>\n</blockquote>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">static</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Node</span>&lt;<span class=\"title\">K</span>,<span class=\"title\">V</span>&gt; <span class=\"keyword\">implements</span> <span class=\"title\">Map</span>.<span class=\"title\">Entry</span>&lt;<span class=\"title\">K</span>,<span class=\"title\">V</span>&gt; </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">final</span> <span class=\"keyword\">int</span> hash; <span class=\"comment\">// nodeå“ˆå¸Œå€¼</span></span><br><span class=\"line\">        <span class=\"keyword\">final</span> K key;    </span><br><span class=\"line\">        V value;</span><br><span class=\"line\">        Node&lt;K,V&gt; next; <span class=\"comment\">// ä¸‹ä¸€ä¸ªnodeçš„åœ°å€</span></span><br><span class=\"line\"></span><br><span class=\"line\">        Node(<span class=\"keyword\">int</span> hash, K key, V value, Node&lt;K,V&gt; next) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">this</span>.hash = hash;</span><br><span class=\"line\">            <span class=\"keyword\">this</span>.key = key;</span><br><span class=\"line\">            <span class=\"keyword\">this</span>.value = value;</span><br><span class=\"line\">            <span class=\"keyword\">this</span>.next = next;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">final</span> K <span class=\"title\">getKey</span><span class=\"params\">()</span>        </span>&#123; <span class=\"keyword\">return</span> key; &#125;</span><br><span class=\"line\">        <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">final</span> V <span class=\"title\">getValue</span><span class=\"params\">()</span>      </span>&#123; <span class=\"keyword\">return</span> value; &#125;</span><br><span class=\"line\">        <span class=\"comment\">// è¿™é‡Œé‡å†™æ–¹æ³•ï¼Œæ‰€ä»¥map.toString()ä¸æ˜¯å†…å­˜åœ°å€ã€‚</span></span><br><span class=\"line\">        <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">final</span> String <span class=\"title\">toString</span><span class=\"params\">()</span> </span>&#123; <span class=\"keyword\">return</span> key + <span class=\"string\">\"=\"</span> + value; &#125;</span><br><span class=\"line\">  </span><br><span class=\"line\">\t\t\t  <span class=\"comment\">// è¿™é‡Œé‡å†™äº†hashCode()æ–¹æ³•</span></span><br><span class=\"line\">        <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">final</span> <span class=\"keyword\">int</span> <span class=\"title\">hashCode</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> Objects.hashCode(key) ^ Objects.hashCode(value);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">\t\t\t\t</span><br><span class=\"line\">        <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">final</span> V <span class=\"title\">setValue</span><span class=\"params\">(V newValue)</span> </span>&#123;</span><br><span class=\"line\">            V oldValue = value;</span><br><span class=\"line\">            value = newValue;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> oldValue;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">  </span><br><span class=\"line\">\t\t\t\t<span class=\"comment\">// è¿™é‡Œé‡å†™äº†equals()æ–¹æ³•</span></span><br><span class=\"line\">        <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">final</span> <span class=\"keyword\">boolean</span> <span class=\"title\">equals</span><span class=\"params\">(Object o)</span> </span>&#123;</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (o == <span class=\"keyword\">this</span>)</span><br><span class=\"line\">                <span class=\"keyword\">return</span> <span class=\"keyword\">true</span>;</span><br><span class=\"line\">            <span class=\"comment\">//Map.Entry ç›¸ç­‰çš„æ¡ä»¶ï¼šé”®ç›¸ç­‰ã€å€¼ç›¸ç­‰ã€ä¸ªæ•°ç›¸ç­‰ã€é¡ºåºç›¸ç­‰</span></span><br><span class=\"line\">            <span class=\"keyword\">if</span> (o <span class=\"keyword\">instanceof</span> Map.Entry) &#123;</span><br><span class=\"line\">                Map.Entry&lt;?,?&gt; e = (Map.Entry&lt;?,?&gt;)o;</span><br><span class=\"line\">                <span class=\"keyword\">if</span> (Objects.equals(key, e.getKey()) &amp;&amp;</span><br><span class=\"line\">                    Objects.equals(value, e.getValue()))</span><br><span class=\"line\">                    <span class=\"keyword\">return</span> <span class=\"keyword\">true</span>;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"keyword\">false</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br></pre></td></tr></table></figure>\n\n<a id=\"more\"></a>\n\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">testConstructor</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">    log.info(<span class=\"string\">\"Map test\"</span>);</span><br><span class=\"line\">    <span class=\"comment\">// 1 </span></span><br><span class=\"line\">    Map m = <span class=\"keyword\">new</span> HashMap(); </span><br><span class=\"line\">    <span class=\"comment\">// 2 </span></span><br><span class=\"line\">    Map m1 = <span class=\"keyword\">new</span> HashMap(<span class=\"number\">10</span>);</span><br><span class=\"line\">    <span class=\"comment\">// 3 </span></span><br><span class=\"line\">    Map m2 = <span class=\"keyword\">new</span> HashMap(<span class=\"number\">10</span>,<span class=\"number\">0.75f</span>);</span><br><span class=\"line\">    <span class=\"comment\">// 4 </span></span><br><span class=\"line\">    Map m3 = <span class=\"keyword\">new</span> HashMap(map1);</span><br><span class=\"line\">    <span class=\"comment\">// put </span></span><br><span class=\"line\">    HashMap map = <span class=\"keyword\">new</span> HashMap&lt;String,Object&gt;();</span><br><span class=\"line\">    map.put(<span class=\"string\">\"1\"</span>,<span class=\"string\">\"1\"</span>);</span><br><span class=\"line\">    map.put(<span class=\"string\">\"2\"</span>,<span class=\"string\">\"2\"</span>);</span><br><span class=\"line\">    map.put(<span class=\"string\">\"3\"</span>,<span class=\"string\">\"3\"</span>);</span><br><span class=\"line\">    map.put(<span class=\"string\">\"4\"</span>,<span class=\"string\">\"4\"</span>);</span><br><span class=\"line\">    log.info(<span class=\"string\">\"map &#123;&#125;\"</span>,map);</span><br><span class=\"line\">    map.put(<span class=\"string\">\"1\"</span>,<span class=\"number\">3</span>);</span><br><span class=\"line\">    log.info(<span class=\"string\">\"map &#123;&#125;\"</span>,map);</span><br><span class=\"line\">    map.put(<span class=\"string\">\"1\"</span>,<span class=\"keyword\">null</span>);</span><br><span class=\"line\">    log.info(<span class=\"string\">\"map &#123;&#125;\"</span>,map);</span><br><span class=\"line\">    map.put(<span class=\"keyword\">null</span>,<span class=\"keyword\">null</span>);</span><br><span class=\"line\">    log.info(<span class=\"string\">\"map &#123;&#125;\"</span>,map);</span><br><span class=\"line\">    Set&lt;String&gt; keySet = map.keySet();</span><br><span class=\"line\">    log.info(<span class=\"string\">\"keySet &#123;&#125;\"</span>,keySet);</span><br><span class=\"line\">    Collection&lt;String&gt; list =  map.values();</span><br><span class=\"line\">    log.info(<span class=\"string\">\"list &#123;&#125;\"</span>,list);</span><br><span class=\"line\">    log.info(<span class=\"string\">\"map.get &#123;&#125;\"</span>,map.get(<span class=\"string\">\"1\"</span>));</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"number\">16</span>:<span class=\"number\">16</span>:<span class=\"number\">25.020</span> [main] INFO cn.z201.java.test.map.HashMapTest - map &#123;<span class=\"number\">1</span>=<span class=\"number\">1</span>, <span class=\"number\">2</span>=<span class=\"number\">2</span>, <span class=\"number\">3</span>=<span class=\"number\">3</span>, <span class=\"number\">4</span>=<span class=\"number\">4</span>&#125;</span><br><span class=\"line\"><span class=\"number\">16</span>:<span class=\"number\">16</span>:<span class=\"number\">25.023</span> [main] INFO cn.z201.java.test.map.HashMapTest - map &#123;<span class=\"number\">1</span>=<span class=\"number\">3</span>, <span class=\"number\">2</span>=<span class=\"number\">2</span>, <span class=\"number\">3</span>=<span class=\"number\">3</span>, <span class=\"number\">4</span>=<span class=\"number\">4</span>&#125;</span><br><span class=\"line\"><span class=\"number\">16</span>:<span class=\"number\">16</span>:<span class=\"number\">25.023</span> [main] INFO cn.z201.java.test.map.HashMapTest - map &#123;<span class=\"number\">1</span>=<span class=\"keyword\">null</span>, <span class=\"number\">2</span>=<span class=\"number\">2</span>, <span class=\"number\">3</span>=<span class=\"number\">3</span>, <span class=\"number\">4</span>=<span class=\"number\">4</span>&#125;</span><br><span class=\"line\"><span class=\"number\">16</span>:<span class=\"number\">16</span>:<span class=\"number\">25.023</span> [main] INFO cn.z201.java.test.map.HashMapTest - map &#123;<span class=\"keyword\">null</span>=<span class=\"keyword\">null</span>, <span class=\"number\">1</span>=<span class=\"keyword\">null</span>, <span class=\"number\">2</span>=<span class=\"number\">2</span>, <span class=\"number\">3</span>=<span class=\"number\">3</span>, <span class=\"number\">4</span>=<span class=\"number\">4</span>&#125;</span><br><span class=\"line\"><span class=\"number\">16</span>:<span class=\"number\">16</span>:<span class=\"number\">25.023</span> [main] INFO cn.z201.java.test.map.HashMapTest - keySet [<span class=\"keyword\">null</span>, <span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>, <span class=\"number\">4</span>]</span><br><span class=\"line\"><span class=\"number\">16</span>:<span class=\"number\">16</span>:<span class=\"number\">25.023</span> [main] INFO cn.z201.java.test.map.HashMapTest - list [<span class=\"keyword\">null</span>, <span class=\"keyword\">null</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>, <span class=\"number\">4</span>]</span><br><span class=\"line\"><span class=\"number\">12</span>:<span class=\"number\">37</span>:<span class=\"number\">27.533</span> [main] INFO cn.z201.java.test.map.HashMapTest - map.get <span class=\"keyword\">null</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"æºç æ–¹æ³•è·Ÿè¸ª\"><a href=\"#æºç æ–¹æ³•è·Ÿè¸ª\" class=\"headerlink\" title=\"æºç æ–¹æ³•è·Ÿè¸ª\"></a>æºç æ–¹æ³•è·Ÿè¸ª</h2><ul>\n<li>HashMap æºç ä¸­ä¸‰ä¸ªé‡è¦æ–¹æ³•ï¼šæŸ¥è¯¢ã€æ–°å¢å’Œæ•°æ®æ‰©å®¹ã€‚</li>\n</ul>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 1 æ„é€ æ–¹æ³•ä¸ºç©ºï¼ŒloadFactor å°†å–é»˜è®¤ç³»æ•°ã€‚</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">HashMap</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.loadFactor = DEFAULT_LOAD_FACTOR; <span class=\"comment\">// all other fields defaulted</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 2 æ„é€ æ–¹æ³•ä¸€ä¸ªå‚æ•°, å°†æŒ‡å®šCapacityçš„å¤§å°ã€‚å…¶å®è°ƒç”¨çš„æ˜¯å¦å¤–çš„ä¸€ä¸ªæ„é€ æ–¹æ³•ã€‚ä½†æ˜¯æŒ‡å®šäº†é»˜è®¤çš„è´Ÿè½½å› å­ã€‚</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">HashMap</span><span class=\"params\">(<span class=\"keyword\">int</span> initialCapacity)</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>(initialCapacity, DEFAULT_LOAD_FACTOR);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 3 æ„é€ æ–¹æ³•ä¸¤ä¸ªå‚æ•°, å°†æŒ‡å®šCapacityçš„å¤§å°ï¼Œå’Œè´Ÿè½½å› å­ã€‚</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">HashMap</span><span class=\"params\">(<span class=\"keyword\">int</span> initialCapacity, <span class=\"keyword\">float</span> loadFactor)</span> </span>&#123;</span><br><span class=\"line\">  \t\t\t<span class=\"comment\">// å¦‚æœæŒ‡å®šçš„å®¹é‡å¤§å°ä¸åˆæ³•ç›´æ¥æŠ›å‡ºå¼‚å¸¸ã€‚</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (initialCapacity &lt; <span class=\"number\">0</span>)</span><br><span class=\"line\">            <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> IllegalArgumentException(<span class=\"string\">\"Illegal initial capacity: \"</span> +</span><br><span class=\"line\">                                               initialCapacity);</span><br><span class=\"line\">  \t\t\t<span class=\"comment\">// å¦‚æœæŒ‡å®šçš„å®¹é‡å¤§äºæœ€å¤§çš„å®¹é‡å¤§å°é™åˆ¶ï¼Œåˆ™ç›´æ¥èµ‹å€¼ä¸ºæœ€å¤§ã€‚å¹¶ä¸æŠ›å‡ºå¼‚å¸¸ã€‚</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (initialCapacity &gt; MAXIMUM_CAPACITY)</span><br><span class=\"line\">            initialCapacity = MAXIMUM_CAPACITY;</span><br><span class=\"line\">  \t\t\t<span class=\"comment\">// å¦‚æœæŒ‡å®šçš„è´Ÿè½½å› å­ä¸åˆæ³•,åˆ™ç›´æ¥æŠ›å‡ºå¼‚å¸¸ã€‚</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (loadFactor &lt;= <span class=\"number\">0</span> || Float.isNaN(loadFactor))</span><br><span class=\"line\">            <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> IllegalArgumentException(<span class=\"string\">\"Illegal load factor: \"</span> +</span><br><span class=\"line\">                                               loadFactor);</span><br><span class=\"line\">  \t\t\t<span class=\"comment\">// åˆæ³•èµ‹å€¼</span></span><br><span class=\"line\">        <span class=\"keyword\">this</span>.loadFactor = loadFactor;</span><br><span class=\"line\">  \t\t\t<span class=\"comment\">// è®¡ç®—å®¹é‡çš„æ‰©å±•é˜€å€¼</span></span><br><span class=\"line\">        <span class=\"keyword\">this</span>.threshold = tableSizeFor(initialCapacity);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 4 åˆ›å»ºä¸€ä¸ªä¸æŒ‡å®šMapå…·æœ‰ç›¸åŒæ˜ å°„å¹¶ä¸”æŒ‡å®šè´Ÿè½½å› å­ç³»æ•°ä¸º0.75çš„Map</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">HashMap</span><span class=\"params\">(Map&lt;? extends K, ? extends V&gt; m)</span> </span>&#123;</span><br><span class=\"line\">  \t\t\t<span class=\"comment\">// ç›´æ¥æŒ‡å®šé»˜è®¤çš„è´Ÿè½½å› å­ã€‚</span></span><br><span class=\"line\">        <span class=\"keyword\">this</span>.loadFactor = DEFAULT_LOAD_FACTOR;</span><br><span class=\"line\">        putMapEntries(m, <span class=\"keyword\">false</span>);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// tableSizeFor(int) æ¥æ ¹æ®æŒ‡å®šçš„å®¹é‡è®¾ç½®é˜ˆå€¼ï¼Œè¿™ä¸ªæ–¹æ³•ç»è¿‡è‹¥å¹²æ¬¡æ— ç¬¦å·å³ç§»ã€æ±‚å¼‚è¿ç®—ï¼Œå¾—å‡ºæœ€æ¥è¿‘æŒ‡å®šå‚æ•° cap çš„ 2 çš„ N æ¬¡æ–¹å®¹é‡ã€‚å‡å¦‚ä½ ä¼ å…¥çš„æ˜¯ 5ï¼Œè¿”å›çš„åˆå§‹å®¹é‡ä¸º 8 ã€‚</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">static</span> <span class=\"keyword\">final</span> <span class=\"keyword\">int</span> <span class=\"title\">tableSizeFor</span><span class=\"params\">(<span class=\"keyword\">int</span> cap)</span> </span>&#123;</span><br><span class=\"line\">  \t\t\t<span class=\"comment\">// å…¶å®æˆ‘æ²¡çœ‹æ‡‚è¿™æ®µä½ç§» ğŸ˜„</span></span><br><span class=\"line\">        <span class=\"keyword\">int</span> n = cap - <span class=\"number\">1</span>;</span><br><span class=\"line\">        n |= n &gt;&gt;&gt; <span class=\"number\">1</span>;</span><br><span class=\"line\">        n |= n &gt;&gt;&gt; <span class=\"number\">2</span>;</span><br><span class=\"line\">        n |= n &gt;&gt;&gt; <span class=\"number\">4</span>;</span><br><span class=\"line\">        n |= n &gt;&gt;&gt; <span class=\"number\">8</span>;</span><br><span class=\"line\">        n |= n &gt;&gt;&gt; <span class=\"number\">16</span>;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> (n &lt; <span class=\"number\">0</span>) ? <span class=\"number\">1</span> : (n &gt;= MAXIMUM_CAPACITY) ? MAXIMUM_CAPACITY : n + <span class=\"number\">1</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// å°†ç›®æ ‡mapçš„æ¡¶æ’å…¥å½“å‰mapä¸­</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">final</span> <span class=\"keyword\">void</span> <span class=\"title\">putMapEntries</span><span class=\"params\">(Map&lt;? extends K, ? extends V&gt; m, <span class=\"keyword\">boolean</span> evict)</span> </span>&#123;</span><br><span class=\"line\">  \t\t\t<span class=\"comment\">// è·å¾—binï¼ˆæ¡¶ï¼‰çš„é•¿åº¦ã€‚</span></span><br><span class=\"line\">        <span class=\"keyword\">int</span> s = m.size();</span><br><span class=\"line\">  \t\t\t<span class=\"comment\">// å¦‚æœæ¡¶é•¿åº¦å¤§0åˆ™è¿›è¡Œå¤åˆ¶ï¼Œå¦åˆ™ä»€ä¹ˆéƒ½ä¸åšã€‚</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (s &gt; <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">          \t<span class=\"comment\">// å¦‚æœå½“å‰ä½æ•°çš„ç—›æ•°ç»„ä¸ºç©ºã€‚ä¹Ÿå°±æ˜¯æœªåˆå§‹åŒ–</span></span><br><span class=\"line\">            <span class=\"keyword\">if</span> (table == <span class=\"keyword\">null</span>) &#123; <span class=\"comment\">// pre-size</span></span><br><span class=\"line\">             </span><br><span class=\"line\">                <span class=\"keyword\">float</span> ft = ((<span class=\"keyword\">float</span>)s / loadFactor) + <span class=\"number\">1.0F</span>;</span><br><span class=\"line\">                <span class=\"keyword\">int</span> t = ((ft &lt; (<span class=\"keyword\">float</span>)MAXIMUM_CAPACITY) ?</span><br><span class=\"line\">                         (<span class=\"keyword\">int</span>)ft : MAXIMUM_CAPACITY);</span><br><span class=\"line\">              \t<span class=\"comment\">// å¦‚æœ åˆ™æŒ‡å®šçš„å®¹é‡è®¾ç½®é˜ˆå€¼</span></span><br><span class=\"line\">                <span class=\"keyword\">if</span> (t &gt; threshold)</span><br><span class=\"line\">                    threshold = tableSizeFor(t);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            <span class=\"comment\">//æ•°ç»„ä¸ä¸ºç©ºï¼Œæ¡¶æ•°é‡è¶…è¿‡é˜ˆå€¼å°±æ‰©å®¹</span></span><br><span class=\"line\">            <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (s &gt; threshold)</span><br><span class=\"line\">                resize();</span><br><span class=\"line\">          \t<span class=\"comment\">// å¢å¼ºå¾ªç¯ä¸ºå½“å‰çš„tableèµ‹å€¼ã€‚</span></span><br><span class=\"line\">            <span class=\"keyword\">for</span> (Map.Entry&lt;? extends K, ? extends V&gt; e : m.entrySet()) &#123;</span><br><span class=\"line\">                K key = e.getKey();</span><br><span class=\"line\">                V value = e.getValue();</span><br><span class=\"line\">              \t<span class=\"comment\">// å’Œputè°ƒç”¨çš„æ˜¯ä¸€ä¸ªæ–¹æ³•ã€‚//å…ˆç»è¿‡ hash() è®¡ç®—ä½ç½®ï¼Œç„¶åå¤åˆ¶æŒ‡å®š map çš„å†…å®¹</span></span><br><span class=\"line\">                putVal(hash(key), key, value, <span class=\"keyword\">false</span>, evict);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">\t\t<span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * æ’å…¥æ•°æ®</span></span><br><span class=\"line\"><span class=\"comment\">     * Implements Map.put and related methods.</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> hash hash for key</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> key the key</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> value the value to put</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> onlyIfAbsent if true, don't change existing value</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> evict if false, the table is in creation mode.</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@return</span> previous value, or null if none</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">final</span> V <span class=\"title\">putVal</span><span class=\"params\">(<span class=\"keyword\">int</span> hash, K key, V value, <span class=\"keyword\">boolean</span> onlyIfAbsent,</span></span></span><br><span class=\"line\"><span class=\"function\"><span class=\"params\">                   <span class=\"keyword\">boolean</span> evict)</span> </span>&#123;</span><br><span class=\"line\">      \t<span class=\"comment\">// å£°æ˜ä¸´æ—¶å˜é‡ table æ•°ç»„ pé“¾è¡¨</span></span><br><span class=\"line\">        Node&lt;K,V&gt;[] tab; Node&lt;K,V&gt; p; <span class=\"keyword\">int</span> n, i;</span><br><span class=\"line\">        <span class=\"comment\">// å¦‚æœå½“å‰çš„æ¡¶æ˜¯nullï¼Œé•¿åº¦ä¸º0ã€‚å°±æ‰©å®¹ä¸€æ¬¡ã€‚</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> ((tab = table) == <span class=\"keyword\">null</span> || (n = tab.length) == <span class=\"number\">0</span>)</span><br><span class=\"line\">          \t<span class=\"comment\">// åˆ™n æŒ‡å‘æœ€åä¸€ä¸ªæ¡¶çš„ä½ç½®</span></span><br><span class=\"line\">            n = (tab = resize()).length;</span><br><span class=\"line\">      \t<span class=\"comment\">// è®¡ç®—æ’å…¥çš„ä½ç½®æœ‰æ²¡æœ‰nodeï¼Œ (n - 1) &amp;hashå¾—åˆ°çš„æ˜¯keyæ‰€åœ¨çš„æ¡¶çš„å¤´ç»“ç‚¹ï¼Œå¦‚æœèŠ‚ç‚¹ä¸åœ¨è¿™ä¸ªæ¡¶ã€‚</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> ((p = tab[i = (n - <span class=\"number\">1</span>) &amp; hash]) == <span class=\"keyword\">null</span>)</span><br><span class=\"line\">            <span class=\"comment\">// æ­¤æ—¶çš„i = 0 , æ–°å»ºä¸ªèŠ‚ç‚¹å¹¶æ”¾è¿›å»</span></span><br><span class=\"line\">            tab[i] = newNode(hash, key, value, <span class=\"keyword\">null</span>);</span><br><span class=\"line\">        <span class=\"keyword\">else</span> &#123; </span><br><span class=\"line\">            <span class=\"comment\">//å¦‚æœæ’å…¥çš„ä½ç½®æœ‰å…ƒç´ ,å°±æ˜¯p != null è¢«æ‰¾åˆ°äº†ã€‚å¼€å§‹æ›¿æ¢valueæµç¨‹ã€‚</span></span><br><span class=\"line\">            <span class=\"comment\">// ä¸´æ—¶å˜é‡  e è¢«æ›¿æ¢çš„å…ƒç´ </span></span><br><span class=\"line\">            Node&lt;K,V&gt; e; K k;</span><br><span class=\"line\">            <span class=\"comment\">//p æŒ‡å‘è¦æ’å…¥çš„æ¡¶ç¬¬ä¸€ä¸ª å…ƒç´ çš„ä½ç½®ï¼Œå¦‚æœ p çš„å“ˆå¸Œå€¼ã€é”®ã€å€¼å’Œè¦æ·»åŠ çš„ä¸€æ ·ã€‚</span></span><br><span class=\"line\">            <span class=\"keyword\">if</span> (p.hash == hash &amp;&amp;</span><br><span class=\"line\">                ((k = p.key) == key || (key != <span class=\"keyword\">null</span> &amp;&amp; key.equals(k))))</span><br><span class=\"line\">                <span class=\"comment\">// e æŒ‡å‘ p</span></span><br><span class=\"line\">                e = p;</span><br><span class=\"line\">            <span class=\"comment\">// //å¦‚æœkey hashä¸ä¸€æ ·ï¼Œåˆ¤æ–­æ˜¯å¦çº¢é»‘æ ‘</span></span><br><span class=\"line\">            <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (p <span class=\"keyword\">instanceof</span> TreeNode)</span><br><span class=\"line\">                <span class=\"comment\">// æ”¾å…¥æ ‘ä¸­ çº¢é»‘æ ‘ç»†èŠ‚å¾…ç»­</span></span><br><span class=\"line\">                e = ((TreeNode&lt;K,V&gt;)p).putTreeVal(<span class=\"keyword\">this</span>, tab, hash, key, value);</span><br><span class=\"line\">            <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">                <span class=\"comment\">//å¦åˆ™ä»é“¾è¡¨æ•°ç»„æŸ¥æ‰¾ã€æ›¿æ¢ã€‚</span></span><br><span class=\"line\">                <span class=\"comment\">// éå†è¿™ä¸ªæ¡¶æ‰€æœ‰çš„å…ƒç´ </span></span><br><span class=\"line\">                <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> binCount = <span class=\"number\">0</span>; ; ++binCount) &#123;</span><br><span class=\"line\">                    <span class=\"keyword\">if</span> ((e = p.next) == <span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">                        p.next = newNode(hash, key, value, <span class=\"keyword\">null</span>);</span><br><span class=\"line\">                        <span class=\"comment\">//å½“è¿™ä¸ªæ¡¶å†…é“¾è¡¨ä¸ªæ•°å¤§äºç­‰äº 8ï¼Œå°±è¦çº¢é»‘æ ‘æ ‘å½¢åŒ–</span></span><br><span class=\"line\">                        <span class=\"keyword\">if</span> (binCount &gt;= TREEIFY_THRESHOLD - <span class=\"number\">1</span>) <span class=\"comment\">// -1 for 1st</span></span><br><span class=\"line\">                            treeifyBin(tab, hash);</span><br><span class=\"line\">                        <span class=\"keyword\">break</span>;</span><br><span class=\"line\">                    &#125;</span><br><span class=\"line\">                    <span class=\"comment\">//å¦‚æœæ‰¾åˆ°è¦æ›¿æ¢çš„èŠ‚ç‚¹ï¼Œå°±åœæ­¢ï¼Œæ­¤æ—¶ e å·²ç»æŒ‡å‘è¦è¢«æ›¿æ¢çš„èŠ‚ç‚¹</span></span><br><span class=\"line\">                    <span class=\"keyword\">if</span> (e.hash == hash &amp;&amp;</span><br><span class=\"line\">                        ((k = e.key) == key || (key != <span class=\"keyword\">null</span> &amp;&amp; key.equals(k))))</span><br><span class=\"line\">                        <span class=\"comment\">// ç›¸ç­‰åˆ™è·³å‡ºå¾ªç¯</span></span><br><span class=\"line\">                        <span class=\"keyword\">break</span>;</span><br><span class=\"line\">                    <span class=\"comment\">// æ²¡æ‰¾åˆ°ã€‚</span></span><br><span class=\"line\">                    p = e;</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            <span class=\"comment\">//å­˜åœ¨è¦æ›¿æ¢çš„èŠ‚ç‚¹</span></span><br><span class=\"line\">            <span class=\"keyword\">if</span> (e != <span class=\"keyword\">null</span>) &#123; <span class=\"comment\">// existing mapping for key</span></span><br><span class=\"line\">                V oldValue = e.value;</span><br><span class=\"line\">                <span class=\"comment\">//æ›¿æ¢ï¼Œè¿”å›</span></span><br><span class=\"line\">                <span class=\"keyword\">if</span> (!onlyIfAbsent || oldValue == <span class=\"keyword\">null</span>)</span><br><span class=\"line\">                    <span class=\"comment\">// æ–°å€¼ æ›¿æ¢ æ—§å€¼</span></span><br><span class=\"line\">                    e.value = value;</span><br><span class=\"line\">                afterNodeAccess(e);</span><br><span class=\"line\">                <span class=\"keyword\">return</span> oldValue;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        ++modCount; <span class=\"comment\">// ä¿®æ”¹è®¡æ•°å™¨</span></span><br><span class=\"line\">        <span class=\"comment\">// å¦‚æœè¶…å‡ºé˜ˆå€¼ï¼Œå°±å¾—æ‰©å®¹</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (++size &gt; threshold)</span><br><span class=\"line\">            resize();</span><br><span class=\"line\">        afterNodeInsertion(evict);</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">null</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t\t<span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">\t\t * æ‰©å®¹</span></span><br><span class=\"line\"><span class=\"comment\">     * Initializes or doubles table size.  If null, allocates in</span></span><br><span class=\"line\"><span class=\"comment\">     * accord with initial capacity target held in field threshold.</span></span><br><span class=\"line\"><span class=\"comment\">     * Otherwise, because we are using power-of-two expansion, the</span></span><br><span class=\"line\"><span class=\"comment\">     * elements from each bin must either stay at same index, or move</span></span><br><span class=\"line\"><span class=\"comment\">     * with a power of two offset in the new table.</span></span><br><span class=\"line\"><span class=\"comment\">     *</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@return</span> the table</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">final</span> Node&lt;K,V&gt;[] resize() &#123;</span><br><span class=\"line\">        <span class=\"comment\">// è·å–å½“å‰çš„table</span></span><br><span class=\"line\">        Node&lt;K,V&gt;[] oldTab = table;</span><br><span class=\"line\">        <span class=\"comment\">// è·å–å½“å‰tableçš„å®¹é‡å¤§å°ã€‚</span></span><br><span class=\"line\">        <span class=\"keyword\">int</span> oldCap = (oldTab == <span class=\"keyword\">null</span>) ? <span class=\"number\">0</span> : oldTab.length;</span><br><span class=\"line\">        <span class=\"comment\">// è·å–å½“å‰tableçš„æ‰©å±•é˜€å€¼</span></span><br><span class=\"line\">        <span class=\"keyword\">int</span> oldThr = threshold;</span><br><span class=\"line\">        <span class=\"comment\">// ä¸´æ—¶å˜é‡ æ–°çš„å®¹é‡ã€é˜€å€¼ã€‚</span></span><br><span class=\"line\">        <span class=\"keyword\">int</span> newCap, newThr = <span class=\"number\">0</span>;</span><br><span class=\"line\">        <span class=\"comment\">// åŸå®¹é‡å¤§äº0</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (oldCap &gt; <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (oldCap &gt;= MAXIMUM_CAPACITY) &#123;</span><br><span class=\"line\">                threshold = Integer.MAX_VALUE;</span><br><span class=\"line\">                <span class=\"keyword\">return</span> oldTab;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            <span class=\"comment\">//æ–°çš„å®¹é‡ä¸ºæ—§çš„ä¸¤å€</span></span><br><span class=\"line\">            <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> ((newCap = oldCap &lt;&lt; <span class=\"number\">1</span>) &lt; MAXIMUM_CAPACITY &amp;&amp;</span><br><span class=\"line\">                     oldCap &gt;= DEFAULT_INITIAL_CAPACITY)</span><br><span class=\"line\">                <span class=\"comment\">//å¦‚æœæ—§å®¹é‡å°äºç­‰äº 16ï¼Œæ–°çš„é˜ˆå€¼å°±æ˜¯æ—§é˜ˆå€¼çš„ä¸¤å€</span></span><br><span class=\"line\">                newThr = oldThr &lt;&lt; <span class=\"number\">1</span>; <span class=\"comment\">// double threshold</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"comment\">// //å¦‚æœæ—§å®¹é‡ä¸º 0 ï¼Œå¹¶ä¸”æ—§é˜ˆå€¼&gt;0ï¼Œè¯´æ˜ä¹‹å‰åˆ›å»ºäº†å“ˆå¸Œè¡¨ä½†æ²¡æœ‰æ·»åŠ å…ƒç´ </span></span><br><span class=\"line\">        <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (oldThr &gt; <span class=\"number\">0</span>) <span class=\"comment\">// initial capacity was placed in threshold</span></span><br><span class=\"line\">            <span class=\"comment\">// åˆå§‹åŒ–å®¹é‡ç­‰äºé˜ˆå€¼</span></span><br><span class=\"line\">            newCap = oldThr;</span><br><span class=\"line\">        <span class=\"keyword\">else</span> &#123;               <span class=\"comment\">// zero initial threshold signifies using defaults</span></span><br><span class=\"line\">            <span class=\"comment\">//æ—§å®¹é‡ã€æ—§é˜ˆå€¼éƒ½æ˜¯0ï¼Œè¯´æ˜è¿˜æ²¡åˆ›å»ºå“ˆå¸Œè¡¨ï¼Œå®¹é‡ä¸ºé»˜è®¤å®¹é‡ï¼Œé˜ˆå€¼ä¸º å®¹é‡*åŠ è½½å› å­</span></span><br><span class=\"line\">            newCap = DEFAULT_INITIAL_CAPACITY;</span><br><span class=\"line\">            newThr = (<span class=\"keyword\">int</span>)(DEFAULT_LOAD_FACTOR * DEFAULT_INITIAL_CAPACITY);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"comment\">// å¦‚æœæ­¤æ—¶æ–°çš„é˜ˆå€¼ä¸º 0 ï¼Œå°±å¾—ç”¨ æ–°å®¹é‡*åŠ è½½å› å­ é‡è®¡ç®—ä¸€æ¬¡</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (newThr == <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">float</span> ft = (<span class=\"keyword\">float</span>)newCap * loadFactor;</span><br><span class=\"line\">            newThr = (newCap &lt; MAXIMUM_CAPACITY &amp;&amp; ft &lt; (<span class=\"keyword\">float</span>)MAXIMUM_CAPACITY ?</span><br><span class=\"line\">                      (<span class=\"keyword\">int</span>)ft : Integer.MAX_VALUE);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"comment\">// è¦†ç›–å½“å‰æ‰©å±•é˜€å€¼</span></span><br><span class=\"line\">        threshold = newThr;</span><br><span class=\"line\">      </span><br><span class=\"line\">        <span class=\"comment\">// åˆ›å»ºæ–°é“¾è¡¨æ•°ç»„ï¼Œå®¹é‡æ˜¯åŸæ¥çš„ä¸¤å€ã€‚newCapä¸Šé¢å·²ç»è¢«èµ‹å€¼äº†ã€‚</span></span><br><span class=\"line\">        <span class=\"meta\">@SuppressWarnings</span>(&#123;<span class=\"string\">\"rawtypes\"</span>,<span class=\"string\">\"unchecked\"</span>&#125;)</span><br><span class=\"line\">        Node&lt;K,V&gt;[] newTab = (Node&lt;K,V&gt;[])<span class=\"keyword\">new</span> Node[newCap];</span><br><span class=\"line\">        table = newTab;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (oldTab != <span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">            <span class=\"comment\">//éå†å¤åˆ¶</span></span><br><span class=\"line\">            <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> j = <span class=\"number\">0</span>; j &lt; oldCap; ++j) &#123;</span><br><span class=\"line\">                Node&lt;K,V&gt; e;</span><br><span class=\"line\">                <span class=\"keyword\">if</span> ((e = oldTab[j]) != <span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">                    oldTab[j] = <span class=\"keyword\">null</span>;</span><br><span class=\"line\">                    <span class=\"comment\">// å¦‚æœæ¡¶é‡Œé¢åªæœ‰ä¸€ä¸ªå…ƒç´ ï¼Œnextæ²¡æœ‰å¾—æƒ…å†µä¸‹ã€‚</span></span><br><span class=\"line\">                    <span class=\"keyword\">if</span> (e.next == <span class=\"keyword\">null</span>)</span><br><span class=\"line\">                        <span class=\"comment\">// ç›´æ¥æ”¾è¿›å»</span></span><br><span class=\"line\">                        newTab[e.hash &amp; (newCap - <span class=\"number\">1</span>)] = e;</span><br><span class=\"line\">                    <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (e <span class=\"keyword\">instanceof</span> TreeNode)</span><br><span class=\"line\">                         <span class=\"comment\">//å¦‚æœæ˜¯ä¸€ä¸ªçº¢é»‘æ ‘,çº¢é»‘æ ‘ç›¸å…³çš„æ“ä½œ</span></span><br><span class=\"line\">                        ((TreeNode&lt;K,V&gt;)e).split(<span class=\"keyword\">this</span>, newTab, j, oldCap);</span><br><span class=\"line\">                    <span class=\"keyword\">else</span> &#123; <span class=\"comment\">// preserve order</span></span><br><span class=\"line\">                        <span class=\"comment\">// å¦‚æœæ¡¶é‡Œé¢æœ‰å…ƒç´ ã€‚ä¿ç•™æ—§å“ˆå¸Œè¡¨æ¡¶ä¸­é“¾è¡¨çš„é¡ºåº</span></span><br><span class=\"line\">                        <span class=\"comment\">//Â é“¾è¡¨å¤åˆ¶ï¼ŒJDKÂ 1.8Â æ‰©å®¹ä¼˜åŒ–éƒ¨åˆ†</span></span><br><span class=\"line\">                        Node&lt;K,V&gt; loHead = <span class=\"keyword\">null</span>, loTail = <span class=\"keyword\">null</span>;</span><br><span class=\"line\">                        Node&lt;K,V&gt; hiHead = <span class=\"keyword\">null</span>, hiTail = <span class=\"keyword\">null</span>;</span><br><span class=\"line\">                        Node&lt;K,V&gt; next;</span><br><span class=\"line\">                        <span class=\"comment\">//do-while å¾ªç¯èµ‹å€¼ç»™æ–°å“ˆå¸Œè¡¨</span></span><br><span class=\"line\">                        <span class=\"keyword\">do</span> &#123;</span><br><span class=\"line\">                            next = e.next;</span><br><span class=\"line\">                          Â  <span class=\"comment\">//Â åŸç´¢å¼•</span></span><br><span class=\"line\">                            <span class=\"keyword\">if</span> ((e.hash &amp; oldCap) == <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">                                <span class=\"keyword\">if</span> (loTail == <span class=\"keyword\">null</span>)</span><br><span class=\"line\">                                    loHead = e;</span><br><span class=\"line\">                                <span class=\"keyword\">else</span></span><br><span class=\"line\">                                    loTail.next = e;</span><br><span class=\"line\">                                loTail = e;</span><br><span class=\"line\">                            &#125;</span><br><span class=\"line\">                            <span class=\"comment\">//Â åŸç´¢å¼•Â +Â oldCap</span></span><br><span class=\"line\">                            <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">                                <span class=\"keyword\">if</span> (hiTail == <span class=\"keyword\">null</span>)</span><br><span class=\"line\">                                    hiHead = e;</span><br><span class=\"line\">                                <span class=\"keyword\">else</span></span><br><span class=\"line\">                                    hiTail.next = e;</span><br><span class=\"line\">                                hiTail = e;</span><br><span class=\"line\">                            &#125;</span><br><span class=\"line\">                        &#125; <span class=\"keyword\">while</span> ((e = next) != <span class=\"keyword\">null</span>);</span><br><span class=\"line\">                        <span class=\"comment\">//Â å°†åŸç´¢å¼•æ”¾åˆ°å“ˆå¸Œæ¡¶ä¸­</span></span><br><span class=\"line\">                        <span class=\"keyword\">if</span> (loTail != <span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">                            loTail.next = <span class=\"keyword\">null</span>;</span><br><span class=\"line\">                            newTab[j] = loHead;</span><br><span class=\"line\">                        &#125;</span><br><span class=\"line\">                        <span class=\"comment\">//Â å°†åŸç´¢å¼•Â +Â oldCapÂ æ”¾åˆ°å“ˆå¸Œæ¡¶ä¸­</span></span><br><span class=\"line\">                        <span class=\"keyword\">if</span> (hiTail != <span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">                            hiTail.next = <span class=\"keyword\">null</span>;</span><br><span class=\"line\">                            newTab[j + oldCap] = hiHead;</span><br><span class=\"line\">                        &#125;</span><br><span class=\"line\">                    &#125;</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> newTab;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t\t<span class=\"comment\">// æŸ¥è¯¢</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> V <span class=\"title\">get</span><span class=\"params\">(Object key)</span> </span>&#123;</span><br><span class=\"line\">        Node&lt;K,V&gt; e;</span><br><span class=\"line\">        <span class=\"comment\">//Â å¯¹Â keyÂ è¿›è¡Œå“ˆå¸Œæ“ä½œ</span></span><br><span class=\"line\">        <span class=\"keyword\">return</span> (e = getNode(hash(key), key)) == <span class=\"keyword\">null</span> ? <span class=\"keyword\">null</span> : e.value;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * Implements Map.get and related methods.</span></span><br><span class=\"line\"><span class=\"comment\">     *</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> hash hash for key</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> key the key</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@return</span> the node, or null if none</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">final</span> Node&lt;K,V&gt; <span class=\"title\">getNode</span><span class=\"params\">(<span class=\"keyword\">int</span> hash, Object key)</span> </span>&#123; </span><br><span class=\"line\">        Node&lt;K,V&gt;[] tab; Node&lt;K,V&gt; first, e; <span class=\"keyword\">int</span> n; K k;</span><br><span class=\"line\">        <span class=\"comment\">// tab = table) != null æ•°ç»„æ¡¶ä¸ä¸ºnull ï¼Œå¹¶èµ‹å€¼ç»™ä¸´æ—¶æ¡¶æ•°ç»„ tabã€‚</span></span><br><span class=\"line\">        <span class=\"comment\">// (n = tab.length) &gt; 0 æ¡¶çš„é•¿åº¦å¤§äº0 ï¼Œå¹¶èµ‹å€¼ç»™ä¸´æ—¶æ¡¶é•¿åº¦ nã€‚</span></span><br><span class=\"line\">        <span class=\"comment\">// (first = tab[(n - 1) &amp; hash]) != null ç¬¬ä¸€ä¸ªæ¡¶é‡Œé¢æœ‰å…ƒç´ ã€‚</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> ((tab = table) != <span class=\"keyword\">null</span> &amp;&amp; (n = tab.length) &gt; <span class=\"number\">0</span> &amp;&amp;</span><br><span class=\"line\">            (first = tab[(n - <span class=\"number\">1</span>) &amp; hash]) != <span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">            <span class=\"comment\">// å¦‚æœæ¡¶é‡Œé¢ç¬¬ä¸€ä¸ªå…ƒç´ keyæ»¡è¶³åŒ¹é…æ¡ä»¶ã€‚åˆ™ç›´æ¥è¿”å›</span></span><br><span class=\"line\">            <span class=\"keyword\">if</span> (first.hash == hash &amp;&amp; <span class=\"comment\">// always check first node</span></span><br><span class=\"line\">                ((k = first.key) == key || (key != <span class=\"keyword\">null</span> &amp;&amp; key.equals(k))))</span><br><span class=\"line\">                <span class=\"keyword\">return</span> first;</span><br><span class=\"line\">            <span class=\"comment\">// ä¸‹ä¸€ä¸ªèŠ‚ç‚¹éç©ºåˆ¤æ–­</span></span><br><span class=\"line\">            <span class=\"keyword\">if</span> ((e = first.next) != <span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">                <span class=\"comment\">// å¦‚æœç¬¬ä¸€èŠ‚ç‚¹æ˜¯æ ‘ç»“æ„ï¼Œåˆ™ä½¿ç”¨ getTreeNode ç›´æ¥è·å–ç›¸åº”çš„æ•°æ®</span></span><br><span class=\"line\">                <span class=\"keyword\">if</span> (first <span class=\"keyword\">instanceof</span> TreeNode)</span><br><span class=\"line\">                    <span class=\"comment\">// å¦‚æœç¬¬ä¸€ä¸ªå…ƒç´ æ˜¯çº¢é»‘æ ‘ã€æš‚æ—¶ä¸æ·±å…¥ã€‚</span></span><br><span class=\"line\">                    <span class=\"keyword\">return</span> ((TreeNode&lt;K,V&gt;)first).getTreeNode(hash, key);</span><br><span class=\"line\">                <span class=\"comment\">// do while // éæ ‘ç»“æ„ï¼Œå¾ªç¯èŠ‚ç‚¹åˆ¤æ–­ å¾ªç¯ä¾¿åˆ©æ¡¶æ‰€æœ‰çš„key hash æ‰¾åˆ°åˆ™è¿”å›ã€‚</span></span><br><span class=\"line\">                <span class=\"keyword\">do</span> &#123;</span><br><span class=\"line\">                     <span class=\"comment\">// hash ç›¸ç­‰å¹¶ä¸” key ç›¸åŒï¼Œåˆ™è¿”å›æ­¤èŠ‚ç‚¹</span></span><br><span class=\"line\">                    <span class=\"keyword\">if</span> (e.hash == hash &amp;&amp;</span><br><span class=\"line\">                        ((k = e.key) == key || (key != <span class=\"keyword\">null</span> &amp;&amp; key.equals(k))))</span><br><span class=\"line\">                        <span class=\"keyword\">return</span> e;</span><br><span class=\"line\">                &#125; <span class=\"keyword\">while</span> ((e = e.next) != <span class=\"keyword\">null</span>);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"comment\">// æ²¡æ‰¾åˆ°ã€‚</span></span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">null</span>;</span><br><span class=\"line\">    &#125;</span><br></pre></td></tr></table></figure>\n\n\n\n","categories":["æºç åˆ†æ"],"tags":["Java","Java-Collecions-Framework","HashMap"]},{"title":"æºç é˜…è¯»-HashSet","url":"/posts/1743596067/","content":"<blockquote>\n<p>æœ¬ç« å±äºæŒç»­å­¦ä¹ ã€é•¿æœŸæ›´ä¿®ã€‚</p>\n</blockquote>\n<h2 id=\"HashSet\"><a href=\"#HashSet\" class=\"headerlink\" title=\"HashSet\"></a>HashSet</h2><p><img src=\"https://z201.oss-cn-shanghai.aliyuncs.com/JavaNote/hashSet/HashSet.png\"></p>\n<h3 id=\"ç‰¹æ€§\"><a href=\"#ç‰¹æ€§\" class=\"headerlink\" title=\"ç‰¹æ€§\"></a>ç‰¹æ€§</h3><ul>\n<li>HashSetä¸å…è®¸é‡å¤æ•°æ®ã€‚</li>\n<li>HashSetä¸å…è®¸nullï¼Œå› ä¸ºnullä¹Ÿæ˜¯å¯ä»¥é‡å¤çš„ã€‚</li>\n<li>HashSetä¸ä¿è¯æ•°æ®çš„æ’å…¥é¡ºåºã€‚</li>\n<li>HashSetä¸æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œå¦‚æœæƒ³ä½¿ç”¨çº¿ç¨‹çš„å®‰å…¨çš„HashSetå¯ä»¥é€šè¿‡<code>Collections.synchronizedSet</code> æ¥è·å–çº¿ç¨‹å®‰å…¨çš„HashSetã€‚ä¹Ÿå¯ä»¥ä½¿ç”¨<code>CopyOnWriteArraySet</code>ã€‚ä½†æ˜¯æ€§èƒ½ä¼šæœ‰å¾ˆå¤§çš„æŸå¤±ã€‚</li>\n<li>HashSetè¿­ä»£å™¨æ–¹æ³•æ˜¯å¿«é€Ÿå¤±è´¥çš„ã€‚å› æ­¤ï¼Œåœ¨åˆ›å»ºè¿­ä»£å™¨ä¹‹åå¯¹é›†åˆè¿›è¡Œä»»ä½•ç»“æ„ä¿®æ”¹éƒ½ä¼šæŠ›å‡ºConcurrentModificationExceptionã€‚</li>\n<li>HashSetæ”¯æŒæ³›å‹ï¼Œè¿™æ˜¯åœ¨è¿è¡Œæ—¶é¿å…ClassCastExceptionçš„æ¨èæ–¹æ³•ã€‚</li>\n<li>HashSetä½¿ç”¨<code>HashMap</code>å­˜å‚¨å…ƒç´ ï¼Œå› æ­¤å¯¹è±¡åº”è¯¥æä¾›hashCodeï¼ˆï¼‰å’Œequalsï¼ˆï¼‰æ–¹æ³•çš„è‰¯å¥½å®ç°ï¼Œä»¥é¿å…ä¸å¿…è¦çš„ç»“æœã€‚</li>\n</ul>\n<h3 id=\"æºç åˆ†æ\"><a href=\"#æºç åˆ†æ\" class=\"headerlink\" title=\"æºç åˆ†æ\"></a>æºç åˆ†æ</h3>","categories":["æºç åˆ†æ"],"tags":["Java","Java-Collecions-Framework","HashSet"]},{"title":"é¢è¯•é¢˜-äº¤æ¢ä¸¤ä¸ªå˜é‡çš„å€¼","url":"/posts/3370594675/","content":"<blockquote>\n<p>åˆšå»æ­å·é¢è¯•çš„ç¬¬äºŒå®¶å…¬å¸ï¼Œåšç¬”è¯•çš„æ—¶å€™çš„æ—¶å€™é‡åˆ°çš„ã€‚æœ€è¿‘å‡ å¤©åœ¨æ•´ç†ä»¥å‰çš„ç¬”è®°å‘ç°äº†ã€‚ç®€å•è®°å½•ä¸‹ã€‚</p>\n</blockquote>\n<h3 id=\"äº’æ¢ä¸¤ä¸ªå˜é‡çš„å€¼\"><a href=\"#äº’æ¢ä¸¤ä¸ªå˜é‡çš„å€¼\" class=\"headerlink\" title=\"äº’æ¢ä¸¤ä¸ªå˜é‡çš„å€¼\"></a>äº’æ¢ä¸¤ä¸ªå˜é‡çš„å€¼</h3><blockquote>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">int</span> a=<span class=\"number\">10</span>;</span><br><span class=\"line\"><span class=\"keyword\">int</span> b=<span class=\"number\">12</span>;</span><br><span class=\"line\"><span class=\"comment\">// é€šè¿‡ä¸¤ä¸ªå˜é‡ä¹‹é—´çš„è¿ç®—è¾“å‡ºç»“æœ a = 12 b = 10</span></span><br></pre></td></tr></table></figure>\n</blockquote>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">swapTest1</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">int</span> a=<span class=\"number\">10</span>;</span><br><span class=\"line\">\t\t<span class=\"keyword\">int</span> b=<span class=\"number\">12</span>;</span><br><span class=\"line\">\t\ta=a^b; <span class=\"comment\">//a=1010^b=1100;</span></span><br><span class=\"line\">\t\tb=a^b; <span class=\"comment\">//a=0110^b=1100;</span></span><br><span class=\"line\">\t\ta=a^b; <span class=\"comment\">//a=0110^b=1010;</span></span><br><span class=\"line\">\t\t<span class=\"comment\">//a=1100=12;b=1010;</span></span><br><span class=\"line\">\t\tSystem.out.println(a);</span><br><span class=\"line\">\t\tSystem.out.println(b);</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\t</span><br><span class=\"line\">\t<span class=\"meta\">@Test</span></span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">swapTest2</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">int</span> a = <span class=\"number\">10</span>;</span><br><span class=\"line\">\t\t<span class=\"keyword\">int</span> b = <span class=\"number\">12</span>;</span><br><span class=\"line\">\t\ta = a + b; <span class=\"comment\">// 22 = 10 + 12</span></span><br><span class=\"line\">\t\tb = a - b; <span class=\"comment\">// 10 = 22 - 12</span></span><br><span class=\"line\">\t\ta = a - b; <span class=\"comment\">// 12 = 22 - 10</span></span><br><span class=\"line\">\t\tSystem.out.println(a);</span><br><span class=\"line\">\t\tSystem.out.println(b);</span><br><span class=\"line\">\t&#125;</span><br></pre></td></tr></table></figure>\n\n","categories":["é¢è¯•"],"tags":["Java"]},{"title":"å®è·µ-Springå‡çº§æ”¹é€ ","url":"/posts/3251840774/","content":"<blockquote>\n<p>2018å¹´åœ¨å…¬å¸è´Ÿè´£äº†ä¸€æ®µæ—¶é—´è€é¡¹ç›®æ”¹é€ å‡çº§å·¥ä½œã€‚å› æ­¤è®°å½•ä¸‹æŠ˜è…¾çš„è¿‡ç¨‹ã€‚</p>\n</blockquote>\n<ul>\n<li>Spring boot æœ€è¿‘æŒºç«çš„ï¼Œä¹‹å‰çš„å·¥ä½œå¹¶æ²¡æœ‰æœºä¼šå»å®æˆ˜ã€‚ä½†æ˜¯å³ä½¿ä¸ä½¿ç”¨Spring boot ä¹Ÿæ˜¯å¯ä»¥åšé›¶é…ç½®çš„ã€‚</li>\n</ul>\n<h3 id=\"çº¦å®šå¤§äºé…ç½®\"><a href=\"#çº¦å®šå¤§äºé…ç½®\" class=\"headerlink\" title=\"çº¦å®šå¤§äºé…ç½®\"></a>çº¦å®šå¤§äºé…ç½®</h3><ul>\n<li>servlet3.*çš„è§„èŒƒå·²ç»æ”¯æŒä¸ä½¿ç”¨web.xmläº†ã€‚</li>\n<li>annotationçš„é…ç½®æ–¹å¼åœ¨Springå…¶å®ä¹Ÿå­˜åœ¨å¾ˆä¹…äº†ã€‚ </li>\n</ul>\n<a id=\"more\"></a>\n\n<h3 id=\"ç›´å¥”ä¸»é¢˜\"><a href=\"#ç›´å¥”ä¸»é¢˜\" class=\"headerlink\" title=\"ç›´å¥”ä¸»é¢˜\"></a>ç›´å¥”ä¸»é¢˜</h3><h4 id=\"ä»£ç é…ç½®web-xml\"><a href=\"#ä»£ç é…ç½®web-xml\" class=\"headerlink\" title=\"ä»£ç é…ç½®web.xml\"></a>ä»£ç é…ç½®web.xml</h4><figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\">org.springframework.web.WebApplicationInitializer</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>å®ç°è¿™ä¸ªæ¥å£,Override onStartupæ–¹æ³•ï¼Œå°±æ‹¿åˆ°é’¥åŒ™äº†ã€‚</li>\n</ul>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> cn.z201.learn.config;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> javax.servlet.FilterRegistration;</span><br><span class=\"line\"><span class=\"keyword\">import</span> javax.servlet.ServletContext;</span><br><span class=\"line\"><span class=\"keyword\">import</span> javax.servlet.ServletException;</span><br><span class=\"line\"><span class=\"keyword\">import</span> javax.servlet.ServletRegistration;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> org.springframework.web.WebApplicationInitializer;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.springframework.web.context.support.AnnotationConfigWebApplicationContext;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.springframework.web.filter.CharacterEncodingFilter;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.springframework.web.filter.HiddenHttpMethodFilter;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.springframework.web.servlet.DispatcherServlet;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> cn.z201.learn.config.app.WebAppConfig;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * åŸºäºä»£ç å¯ä»¥ä¸ä½¿ç”¨web.xml</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@author</span> z201</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">WebProjectConfigInitializer</span>  <span class=\"keyword\">implements</span> <span class=\"title\">WebApplicationInitializer</span> </span>&#123;</span><br><span class=\"line\">\t</span><br><span class=\"line\">\t<span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> String CHARACTER_ENCODING = <span class=\"string\">\"UTF-8\"</span>;</span><br><span class=\"line\">\t</span><br><span class=\"line\">\t<span class=\"keyword\">private</span> <span class=\"keyword\">final</span> <span class=\"keyword\">static</span> String DISPATCHER_SERVLET_NAME = <span class=\"string\">\"dispatcher\"</span>;</span><br><span class=\"line\">\t</span><br><span class=\"line\">\t<span class=\"keyword\">private</span> <span class=\"keyword\">final</span> <span class=\"keyword\">static</span> String DISPATCHER_SERVLET_MAPPING = <span class=\"string\">\"/\"</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"keyword\">private</span> <span class=\"keyword\">final</span> <span class=\"keyword\">static</span> String ENCODEING_FILTER_NAME = <span class=\"string\">\"encodefilter\"</span>;</span><br><span class=\"line\">\t</span><br><span class=\"line\">\t<span class=\"keyword\">private</span> <span class=\"keyword\">final</span> <span class=\"keyword\">static</span> String ENCODEING_FILTER_MAPPING = <span class=\"string\">\"/*\"</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"meta\">@Override</span></span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onStartup</span><span class=\"params\">(ServletContext servletContext)</span> <span class=\"keyword\">throws</span> ServletException </span>&#123;</span><br><span class=\"line\">\t\tinitializeSpringMVCConfig(servletContext); <span class=\"comment\">//å¯åŠ¨spring mvc</span></span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\t</span><br><span class=\"line\">\t<span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">\t * æ³¨å†Œspring mvc</span></span><br><span class=\"line\"><span class=\"comment\">\t * <span class=\"doctag\">@param</span> container</span></span><br><span class=\"line\"><span class=\"comment\">\t */</span></span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title\">initializeSpringMVCConfig</span><span class=\"params\">(ServletContext container)</span> <span class=\"keyword\">throws</span> ServletException </span>&#123;</span><br><span class=\"line\">\t\t</span><br><span class=\"line\">\t\t<span class=\"comment\">// ç¼–ç è¿‡æ»¤å™¨</span></span><br><span class=\"line\">\t\tCharacterEncodingFilter encodingFilter = <span class=\"keyword\">new</span> CharacterEncodingFilter();</span><br><span class=\"line\">\t\tencodingFilter.setForceEncoding(<span class=\"keyword\">true</span>);</span><br><span class=\"line\">\t\tencodingFilter.setEncoding(CHARACTER_ENCODING);</span><br><span class=\"line\">\t\t<span class=\"comment\">//é…ç½®Springæä¾›çš„å­—ç¬¦ç¼–ç è¿‡æ»¤å™¨</span></span><br><span class=\"line\">\t\t<span class=\"comment\">//ç¬¬ä¸€ä¸ªå‚æ•° æŒ‡å®šå­—ç¬¦ç¼–ç ç¼–ç </span></span><br><span class=\"line\">\t\t<span class=\"comment\">//ç¬¬äºŒä¸ªå‚æ•° æ˜¯å¦å¼ºåˆ¶è¦æ±‚å“åº”åŒ…ç¼–ç ä¸è¯·æ±‚åŒ…ç›¸åŒï¼Œfalseè¡¨ç¤ºå¦‚æœå“åº”åŒ…è®¾ç½®äº†è‡ªå·±ç¼–ç åˆ™ä¸å¼ºåˆ¶ä¿®æ”¹</span></span><br><span class=\"line\">        FilterRegistration.Dynamic filter = container.addFilter(ENCODEING_FILTER_NAME, encodingFilter);</span><br><span class=\"line\">        <span class=\"comment\">// è§£å†³HTTP PUTè¯·æ±‚Springæ— æ³•è·å–è¯·æ±‚å‚æ•°çš„é—®é¢˜</span></span><br><span class=\"line\">        \t\t\t\t\t\t   filter = container.addFilter(<span class=\"string\">\"hiddenHttpMethodFilter\"</span>, <span class=\"keyword\">new</span> HiddenHttpMethodFilter());</span><br><span class=\"line\">        <span class=\"comment\">//é…ç½®è¿‡æ»¤å™¨çš„è¿‡æ»¤è·¯å¾„</span></span><br><span class=\"line\">        filter.addMappingForUrlPatterns(<span class=\"keyword\">null</span>, <span class=\"keyword\">true</span>, ENCODEING_FILTER_MAPPING);</span><br><span class=\"line\">\t\t</span><br><span class=\"line\">\t\t<span class=\"comment\">// Create the spring rest servlet's Spring application context</span></span><br><span class=\"line\">\t\tAnnotationConfigWebApplicationContext dispatcherContext = <span class=\"keyword\">new</span> AnnotationConfigWebApplicationContext();</span><br><span class=\"line\">\t\tdispatcherContext.register(WebAppConfig<span class=\"class\">.<span class=\"keyword\">class</span>)</span>;</span><br><span class=\"line\">\t\t<span class=\"comment\">// Register and map the spring rest servlet</span></span><br><span class=\"line\">\t\tServletRegistration.Dynamic dispatcher = container.addServlet(DISPATCHER_SERVLET_NAME,</span><br><span class=\"line\">\t\t\t\t<span class=\"keyword\">new</span> DispatcherServlet(dispatcherContext));</span><br><span class=\"line\">\t\t<span class=\"comment\">//å¯åŠ¨é¡ºåº</span></span><br><span class=\"line\">\t\tdispatcher.setLoadOnStartup(<span class=\"number\">1</span>);</span><br><span class=\"line\">\t\tdispatcher.setAsyncSupported(<span class=\"keyword\">true</span>);</span><br><span class=\"line\">\t\t<span class=\"comment\">//é…ç½®æ˜ å°„è·¯å¾„</span></span><br><span class=\"line\">\t\tdispatcher.addMapping(DISPATCHER_SERVLET_MAPPING);</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"è§£å†³Maven-Waræç¤ºæ‰¾ä¸åˆ°web-xmlç¼–è¯‘é”™è¯¯ã€‚\"><a href=\"#è§£å†³Maven-Waræç¤ºæ‰¾ä¸åˆ°web-xmlç¼–è¯‘é”™è¯¯ã€‚\" class=\"headerlink\" title=\"è§£å†³Maven Waræç¤ºæ‰¾ä¸åˆ°web.xmlç¼–è¯‘é”™è¯¯ã€‚\"></a>è§£å†³Maven Waræç¤ºæ‰¾ä¸åˆ°web.xmlç¼–è¯‘é”™è¯¯ã€‚</h4><ul>\n<li>æ³¨æ„å¦‚æœä½ æ˜¯Mavané¡¹ç›®,é»˜è®¤æƒ…å†µä¸‹waré¡¹ç›®æ˜¯éœ€è¦æ‰¾åˆ°web.xmlçš„ã€‚</li>\n</ul>\n<figure class=\"highlight xml\"><table><tr><td class=\"code\"><pre><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">plugin</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>org.apache.maven.plugins<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>maven-war-plugin<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>2.4<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">configuration</span>&gt;</span></span><br><span class=\"line\">\t    <span class=\"comment\">&lt;!-- failOnMissingWebXml false å¯ä»¥æ²¡æœ‰web.xml --&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">failOnMissingWebXml</span>&gt;</span>false<span class=\"tag\">&lt;/<span class=\"name\">failOnMissingWebXml</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"comment\">&lt;!-- æš‚æ—¶ä¸é€‚ç”¨å…¶ä»–æ¨¡æ¿é¡µé¢</span></span><br><span class=\"line\"><span class=\"comment\">\t\t\t&lt;overlays&gt;</span></span><br><span class=\"line\"><span class=\"comment\">\t\t\t&lt;overlay&gt;</span></span><br><span class=\"line\"><span class=\"comment\">\t\t\t\t&lt;groupId&gt;org.cn.z201.views&lt;/groupId&gt;</span></span><br><span class=\"line\"><span class=\"comment\">\t\t\t\t&lt;artifactId&gt;ssh-views&lt;/artifactId&gt;</span></span><br><span class=\"line\"><span class=\"comment\">\t\t\t&lt;/overlay&gt;</span></span><br><span class=\"line\"><span class=\"comment\">\t\t&lt;/overlays&gt;</span></span><br><span class=\"line\"><span class=\"comment\">\t\t--&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">configuration</span>&gt;</span> </span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">plugin</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>è¯ºï¼Œåœ¨waræ‰“åŒ…æ’ä»¶ä¸­é…ç½®ä¸‹å°±å¥½äº†ã€‚</li>\n</ul>\n<h4 id=\"ä¸»è§’WebAppConfig-SpringMVCé…ç½®å¯åŠ¨ç±»ã€‚\"><a href=\"#ä¸»è§’WebAppConfig-SpringMVCé…ç½®å¯åŠ¨ç±»ã€‚\" class=\"headerlink\" title=\"ä¸»è§’WebAppConfig SpringMVCé…ç½®å¯åŠ¨ç±»ã€‚\"></a>ä¸»è§’WebAppConfig SpringMVCé…ç½®å¯åŠ¨ç±»ã€‚</h4><figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\">org.springframework.web.servlet.config.annotation.WebMvcConfigurerAdapter</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>ç»§æ‰¿è¿™ä¸ªç±»,é‡Œé¢æœ‰å¾ˆå¤šæ–¹æ³•ç»™ä½ é‡å†™ã€‚è¿™å…¶å®è·Ÿxmlé…ç½®éå¸¸ç›¸ä¼¼äº†ã€‚</li>\n</ul>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> cn.z201.learn.config.app;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> java.util.ArrayList;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.util.List;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.util.Locale;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> org.apache.logging.log4j.LogManager;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.apache.logging.log4j.Logger;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.springframework.context.annotation.Bean;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.springframework.context.annotation.ComponentScan;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.springframework.context.annotation.Configuration;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.springframework.context.annotation.EnableAspectJAutoProxy;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.springframework.web.servlet.config.annotation.DefaultServletHandlerConfigurer;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.springframework.web.servlet.config.annotation.EnableWebMvc;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.springframework.web.servlet.config.annotation.InterceptorRegistry;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.springframework.web.servlet.config.annotation.ResourceHandlerRegistry;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.springframework.web.servlet.config.annotation.WebMvcConfigurerAdapter;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.springframework.web.servlet.i18n.LocaleChangeInterceptor;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> cn.z201.learn.config.app.support.BeetlConfiguration;</span><br><span class=\"line\"><span class=\"keyword\">import</span> cn.z201.learn.config.app.support.DataSourceConfiguration;</span><br><span class=\"line\"><span class=\"keyword\">import</span> cn.z201.learn.config.app.support.EhCacheConfiguration;</span><br><span class=\"line\"><span class=\"keyword\">import</span> cn.z201.learn.config.app.support.MultipartResolverConfiguration;</span><br><span class=\"line\"><span class=\"keyword\">import</span> cn.z201.learn.config.app.support.SchedulingConfiguration;</span><br><span class=\"line\"><span class=\"keyword\">import</span> cn.z201.learn.config.app.support.SwaggerConfiguration;</span><br><span class=\"line\"><span class=\"keyword\">import</span> cn.z201.learn.config.app.support.ValidatorConfiguration;</span><br><span class=\"line\"><span class=\"keyword\">import</span> cn.z201.learn.core.interceptor.LoginInterceptor;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> org.springframework.context.annotation.Import;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.springframework.context.annotation.PropertySource;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.springframework.http.MediaType;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.springframework.http.converter.json.MappingJackson2HttpMessageConverter;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.springframework.scheduling.annotation.EnableAsync;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.springframework.scheduling.annotation.EnableScheduling;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.springframework.transaction.annotation.EnableTransactionManagement;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> *  <span class=\"doctag\">@Configuration</span>ï¼Œç”¨äºè¡¨ç¤ºè¿™ä¸ªç±»æ˜¯ä¸€ä¸ªé…ç½®ç±»ï¼Œç”¨äºé…ç½®Springçš„ç›¸å…³ä¿¡æ¯  </span></span><br><span class=\"line\"><span class=\"comment\"> * \t\tç±»ä¼¼äºspringé…ç½®æ–‡ä»¶ï¼Œè´Ÿè´£æ³¨å†Œbeanï¼Œå¯¹åº”çš„æä¾›äº†<span class=\"doctag\">@Bean</span>æ³¨è§£ã€‚</span></span><br><span class=\"line\"><span class=\"comment\"> * \t\téœ€è¦org.springframework.web.context.support.AnnotationConfigWebApplicationContextæ³¨å†Œåˆ°å®¹å™¨ä¸­ã€‚</span></span><br><span class=\"line\"><span class=\"comment\"> *  <span class=\"doctag\">@EnableWebMvc</span> å¯ç”¨MVC Javaé…ç½®ï¼ˆ<span class=\"doctag\">@Controller</span>ç­‰å„ç§æ³¨è§£ï¼‰</span></span><br><span class=\"line\"><span class=\"comment\"> *  <span class=\"doctag\">@ComponentScan</span> ï¼š æ³¨è§£ç±»æŸ¥æ‰¾è§„åˆ™å®šä¹‰ &lt;context:component-scan/&gt; ç»„ä»¶æ‰«æï¼Œ</span></span><br><span class=\"line\"><span class=\"comment\"> * \t\tåœ¨basePackagesæŒ‡å®šçš„ç›®å½•ä¸‹æ‰«æè¢«<span class=\"doctag\">@Controller</span>ã€<span class=\"doctag\">@Service</span>ã€<span class=\"doctag\">@Component</span>ç­‰æ³¨è§£æ³¨å†Œçš„ç»„ä»¶</span></span><br><span class=\"line\"><span class=\"comment\"> *  <span class=\"doctag\">@EnableAsync</span> æ³¨è§£çš„æ„æ€æ˜¯å¯ä»¥å¼‚æ­¥æ‰§è¡Œï¼Œå°±æ˜¯å¼€å¯å¤šçº¿ç¨‹çš„æ„æ€ã€‚</span></span><br><span class=\"line\"><span class=\"comment\"> *\t<span class=\"doctag\">@EnableAspectJAutoProxy</span>ï¼Œå¯ç”¨åˆ‡é¢è‡ªåŠ¨ä»£ç†ï¼Œç”¨äºAOP æ¿€æ´»Aspectè‡ªåŠ¨ä»£ç† &lt;aop:aspectj-autoproxy/&gt;</span></span><br><span class=\"line\"><span class=\"comment\"> *  <span class=\"doctag\">@EnableCaching</span> ï¼šå¯ç”¨ç¼“å­˜æ³¨è§£  &lt;cache:annotation-driven/&gt;</span></span><br><span class=\"line\"><span class=\"comment\"> *  <span class=\"doctag\">@EnableScheduling</span> å¯åŠ¨å®šæ—¶ä»»åŠ¡æ³¨è§£</span></span><br><span class=\"line\"><span class=\"comment\"> *  <span class=\"doctag\">@EnableTransactionManagement</span> ï¼š å¯ç”¨æ³¨è§£å¼äº‹åŠ¡ç®¡ç† &lt;tx:annotation-driven /&gt; å¯ç”¨æ³¨è§£äº‹åŠ¡ï¼Œå³å¯ä»¥ä½¿ç”¨<span class=\"doctag\">@Transactional</span>æ³¨è§£æ¥æ§åˆ¶äº‹åŠ¡</span></span><br><span class=\"line\"><span class=\"comment\"> *  <span class=\"doctag\">@EnableWebMvcSecurity</span> ï¼š å¯ç”¨springSecurityå®‰å…¨éªŒè¯</span></span><br><span class=\"line\"><span class=\"comment\"> *\t<span class=\"doctag\">@Import</span>ã€ <span class=\"doctag\">@ImportResource</span> å¼•å…¥æŒ‡å®šçš„é…ç½®ç±»ï¼Œæˆ‘ä»¬å¼•å…¥äº†Springå®¹å™¨é…ç½®ç±»å’Œæ•°æ®æºäº‹åŠ¡é…ç½®ç±»</span></span><br><span class=\"line\"><span class=\"comment\"> *\t<span class=\"doctag\">@PropertySource</span>ï¼ŒåŠ è½½æŒ‡å®šçš„é…ç½®æ–‡ä»¶ï¼Œé…ç½®æ–‡ä»¶å†…å®¹ä¼šåŠ è½½å…¥Environmentä¸­ç­‰å¾…è°ƒç”¨</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">@Configuration</span></span><br><span class=\"line\"><span class=\"meta\">@EnableWebMvc</span></span><br><span class=\"line\"><span class=\"meta\">@EnableAsync</span></span><br><span class=\"line\"><span class=\"meta\">@EnableScheduling</span></span><br><span class=\"line\"><span class=\"meta\">@EnableTransactionManagement</span></span><br><span class=\"line\"><span class=\"meta\">@EnableAspectJAutoProxy</span>(proxyTargetClass = <span class=\"keyword\">true</span>)</span><br><span class=\"line\"><span class=\"meta\">@Import</span>( &#123; DataSourceConfiguration<span class=\"class\">.<span class=\"keyword\">class</span> ,</span></span><br><span class=\"line\"><span class=\"class\">\t       <span class=\"title\">BeetlConfiguration</span>.<span class=\"title\">class</span>,</span></span><br><span class=\"line\"><span class=\"class\">\t\t   <span class=\"title\">MultipartResolverConfiguration</span>.<span class=\"title\">class</span>,</span></span><br><span class=\"line\"><span class=\"class\">\t\t   <span class=\"title\">SwaggerConfiguration</span>.<span class=\"title\">class</span> ,</span></span><br><span class=\"line\"><span class=\"class\">\t\t   <span class=\"title\">EhCacheConfiguration</span>.<span class=\"title\">class</span> ,</span></span><br><span class=\"line\"><span class=\"class\">\t\t   <span class=\"title\">SchedulingConfiguration</span>.<span class=\"title\">class</span>,</span></span><br><span class=\"line\"><span class=\"class\">\t\t   <span class=\"title\">ValidatorConfiguration</span>.<span class=\"title\">class</span>&#125;)</span></span><br><span class=\"line\"><span class=\"class\">@<span class=\"title\">PropertySource</span>(<span class=\"title\">value</span> </span>= &#123;<span class=\"string\">\"classpath:config.properties\"</span>&#125;,ignoreResourceNotFound = <span class=\"keyword\">true</span>)</span><br><span class=\"line\"><span class=\"meta\">@ComponentScan</span>(basePackages = &#123; <span class=\"string\">\"cn.z201\"</span> &#125;)</span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">WebAppConfig</span> <span class=\"keyword\">extends</span> <span class=\"title\">WebMvcConfigurerAdapter</span> </span>&#123;</span><br><span class=\"line\">\t</span><br><span class=\"line\">\t<span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> Logger  LOGGER = LogManager.getLogger(WebAppConfig<span class=\"class\">.<span class=\"keyword\">class</span>)</span>;</span><br><span class=\"line\">\t</span><br><span class=\"line\">\t</span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">WebAppConfig</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">\t\tLOGGER.info(<span class=\"string\">\"[Initialize WebAppConfig]\"</span>);</span><br><span class=\"line\">\t    Locale.setDefault(Locale.US);</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\t</span><br><span class=\"line\">\t<span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">\t *  é™æ€èµ„æºæ˜ å°„</span></span><br><span class=\"line\"><span class=\"comment\">\t * addResourceHandler()æ–¹æ³•æŒ‡å®šurlï¼Œè¯¥urlåè¿æ¥é™æ€æ–‡ä»¶ï¼Œå¯¹åº”ç€addResourceLoaction()æ–¹æ³•ç›®å½•æ‰€å¯¹åº”çš„é™æ€æ–‡ä»¶</span></span><br><span class=\"line\"><span class=\"comment\">\t */</span></span><br><span class=\"line\">\t<span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">addResourceHandlers</span><span class=\"params\">(ResourceHandlerRegistry registry)</span> </span>&#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">super</span>.addResourceHandlers(registry);</span><br><span class=\"line\">    \tLOGGER.info(<span class=\"string\">\"[Initialize addResourceHandlers]\"</span>);</span><br><span class=\"line\">    \tregistry.addResourceHandler(<span class=\"string\">\"/static/**\"</span>)</span><br><span class=\"line\">    \t\t\t.addResourceLocations(<span class=\"string\">\"/static/\"</span>)</span><br><span class=\"line\">    \t\t\t.setCachePeriod(<span class=\"number\">5000</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">\t</span><br><span class=\"line\">\t<span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * å°†å¯¹äºé™æ€èµ„æºçš„è¯·æ±‚è½¬å‘åˆ°Servletå®¹å™¨çš„é»˜è®¤å¤„ç†é™æ€èµ„æºçš„servlet</span></span><br><span class=\"line\"><span class=\"comment\">     * å› ä¸ºå°†springçš„æ‹¦æˆªæ¨¡å¼è®¾ç½®ä¸º\"/\"æ—¶ä¼šå¯¹é™æ€èµ„æºè¿›è¡Œæ‹¦æˆª</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">\t<span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">configureDefaultServletHandling</span><span class=\"params\">(DefaultServletHandlerConfigurer configurer)</span> </span>&#123;</span><br><span class=\"line\">        configurer.enable();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">\t</span><br><span class=\"line\">\t<span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">\t * æ·»åŠ æ‹¦æˆªå™¨</span></span><br><span class=\"line\"><span class=\"comment\">\t */</span></span><br><span class=\"line\">\t<span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">addInterceptors</span><span class=\"params\">(InterceptorRegistry registry)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"comment\">// å¤šä¸ªæ‹¦æˆªå™¨ç»„æˆä¸€ä¸ªæ‹¦æˆªå™¨é“¾</span></span><br><span class=\"line\">        <span class=\"comment\">// addPathPatterns ç”¨äºæ·»åŠ æ‹¦æˆªè§„åˆ™</span></span><br><span class=\"line\">        <span class=\"comment\">// excludePathPatterns ç”¨æˆ·æ’é™¤æ‹¦æˆª</span></span><br><span class=\"line\">        registry.addInterceptor(<span class=\"keyword\">new</span> LoginInterceptor()).addPathPatterns(<span class=\"string\">\"/**\"</span>).excludePathPatterns(<span class=\"string\">\"/login\"</span>);</span><br><span class=\"line\">        <span class=\"keyword\">super</span>.addInterceptors(registry);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">\t</span><br><span class=\"line\">\t</span><br><span class=\"line\">\t<span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">\t * æœ¬åœ°å›½é™…åŒ–</span></span><br><span class=\"line\"><span class=\"comment\">\t * <span class=\"doctag\">@return</span></span></span><br><span class=\"line\"><span class=\"comment\">\t */</span></span><br><span class=\"line\">\t<span class=\"meta\">@Bean</span></span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">public</span> LocaleChangeInterceptor <span class=\"title\">localeChangeInterceptor</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">\t\tLOGGER.info(<span class=\"string\">\"[Initialize LocaleChangeInterceptor]\"</span>);</span><br><span class=\"line\">\t\t<span class=\"keyword\">return</span> <span class=\"keyword\">new</span> LocaleChangeInterceptor();</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * jsonã€Jsonpæ¶ˆæ¯è½¬æ¢é€‚é…å™¨ï¼Œç”¨äºæ”¯æŒRequestBodyã€ResponseBody</span></span><br><span class=\"line\"><span class=\"comment\">     * Jsonã€Jsonp Message Converter , Support For RequestBodyã€ResponseBody</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@return</span></span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"meta\">@Bean</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> MappingJackson2HttpMessageConverter <span class=\"title\">mappingJackson2HttpMessageConverter</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">    \tLOGGER.info(<span class=\"string\">\"[Initialize MappingJackson2HttpMessageConverter]\"</span>);</span><br><span class=\"line\">    \tMappingJackson2HttpMessageConverter mappingJackson2HttpMessageConverter = <span class=\"keyword\">new</span> MappingJackson2HttpMessageConverter();</span><br><span class=\"line\">\t    \tList&lt;MediaType&gt; mediaType = <span class=\"keyword\">new</span> ArrayList&lt;MediaType&gt;();</span><br><span class=\"line\">\t    \tmediaType.add(MediaType.APPLICATION_JSON_UTF8);</span><br><span class=\"line\">\t    \tmappingJackson2HttpMessageConverter.setSupportedMediaTypes(mediaType);</span><br><span class=\"line\">    \t<span class=\"keyword\">return</span> mappingJackson2HttpMessageConverter;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    </span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>æ©ï¼Œæˆ‘è¿™é‡Œçš„å…¶ä»–é…ç½®æ˜¯ä½¿ç”¨å…¶ä»–çš„Beanå•ç‹¬é…ç½®çš„ã€‚ä¸€ä¸ªä¸€ä¸ªæ¥å§ã€‚</li>\n</ul>\n<h4 id=\"å…¶ä»–é…ç½®\"><a href=\"#å…¶ä»–é…ç½®\" class=\"headerlink\" title=\"å…¶ä»–é…ç½®\"></a>å…¶ä»–é…ç½®</h4><h5 id=\"1-DataSourceConfiguration-æ•°æ®æº-æ²¡æœ‰ä½¿ç”¨ORMæ¡†æ¶ç›´æ¥ç”¨jdbcTemplate\"><a href=\"#1-DataSourceConfiguration-æ•°æ®æº-æ²¡æœ‰ä½¿ç”¨ORMæ¡†æ¶ç›´æ¥ç”¨jdbcTemplate\" class=\"headerlink\" title=\"1. DataSourceConfiguration æ•°æ®æº æ²¡æœ‰ä½¿ç”¨ORMæ¡†æ¶ç›´æ¥ç”¨jdbcTemplate\"></a>1. DataSourceConfiguration æ•°æ®æº æ²¡æœ‰ä½¿ç”¨ORMæ¡†æ¶ç›´æ¥ç”¨jdbcTemplate</h5><figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> cn.z201.learn.config.app.support;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> java.sql.SQLException;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> javax.sql.DataSource;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> org.apache.logging.log4j.LogManager;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.apache.logging.log4j.Logger;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.springframework.beans.factory.annotation.Value;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.springframework.context.annotation.Bean;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.springframework.context.annotation.Configuration;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.springframework.jdbc.core.JdbcTemplate;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.springframework.jdbc.datasource.DataSourceTransactionManager;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> com.alibaba.druid.pool.DruidDataSource;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">@Configuration</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">DataSourceConfiguration</span> </span>&#123;</span><br><span class=\"line\">\t</span><br><span class=\"line\">\t<span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> Logger  LOGGER = LogManager.getLogger(DataSourceConfiguration<span class=\"class\">.<span class=\"keyword\">class</span>)</span>;</span><br><span class=\"line\">\t</span><br><span class=\"line\">\t<span class=\"meta\">@Value</span>(<span class=\"string\">\"$&#123;db.url&#125;\"</span>)</span><br><span class=\"line\">\t<span class=\"keyword\">private</span> String url;</span><br><span class=\"line\">\t</span><br><span class=\"line\">\t<span class=\"meta\">@Value</span>(<span class=\"string\">\"$&#123;db.username&#125;\"</span>)</span><br><span class=\"line\">\t<span class=\"keyword\">private</span> String username;</span><br><span class=\"line\">\t</span><br><span class=\"line\">\t<span class=\"meta\">@Value</span>(<span class=\"string\">\"$&#123;db.password&#125;\"</span>)</span><br><span class=\"line\">\t<span class=\"keyword\">private</span> String password;</span><br><span class=\"line\">\t</span><br><span class=\"line\">\t<span class=\"meta\">@Value</span>(<span class=\"string\">\"$&#123;db.maxActive&#125;\"</span>)</span><br><span class=\"line\">\t<span class=\"keyword\">private</span> <span class=\"keyword\">int</span> maxActive;</span><br><span class=\"line\">\t</span><br><span class=\"line\">\t<span class=\"meta\">@Value</span>(<span class=\"string\">\"$&#123;db.initialSize&#125;\"</span>)</span><br><span class=\"line\">    <span class=\"keyword\">private</span> Integer initialSize;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"meta\">@Value</span>(<span class=\"string\">\"$&#123;db.minIdle&#125;\"</span>)</span><br><span class=\"line\">    <span class=\"keyword\">private</span> Integer minIdle;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"meta\">@Value</span>(<span class=\"string\">\"$&#123;db.maxWait&#125;\"</span>)</span><br><span class=\"line\">    <span class=\"keyword\">private</span> Integer maxWait;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"meta\">@Value</span>(<span class=\"string\">\"$&#123;db.timeBetweenEvictionRunsMillis&#125;\"</span>)</span><br><span class=\"line\">    <span class=\"keyword\">private</span> Integer timeBetweenEvictionRunsMillis;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"meta\">@Value</span>(<span class=\"string\">\"$&#123;db.minEvictableIdleTimeMillis&#125;\"</span>)</span><br><span class=\"line\">    <span class=\"keyword\">private</span> Integer minEvictableIdleTimeMillis;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"meta\">@Value</span>(<span class=\"string\">\"$&#123;db.validationQuery&#125;\"</span>)</span><br><span class=\"line\">    <span class=\"keyword\">private</span> String validationQuery;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"meta\">@Value</span>(<span class=\"string\">\"$&#123;db.testWhileIdle&#125;\"</span>)</span><br><span class=\"line\">    <span class=\"keyword\">private</span> Boolean testWhileIdle;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"meta\">@Value</span>(<span class=\"string\">\"$&#123;db.testOnBorrow&#125;\"</span>)</span><br><span class=\"line\">    <span class=\"keyword\">private</span> Boolean testOnBorrow;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"meta\">@Value</span>(<span class=\"string\">\"$&#123;db.testOnReturn&#125;\"</span>)</span><br><span class=\"line\">    <span class=\"keyword\">private</span> Boolean testOnReturn;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"meta\">@Value</span>(<span class=\"string\">\"$&#123;db.poolPreparedStatements&#125;\"</span>)</span><br><span class=\"line\">    <span class=\"keyword\">private</span> Boolean poolPreparedStatements;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"meta\">@Value</span>(<span class=\"string\">\"$&#123;db.maxPoolPreparedStatementPerConnectionSize&#125;\"</span>)</span><br><span class=\"line\">    <span class=\"keyword\">private</span> Integer maxPoolPreparedStatementPerConnectionSize;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"meta\">@Value</span>(<span class=\"string\">\"$&#123;db.filters&#125;\"</span>)</span><br><span class=\"line\">    <span class=\"keyword\">private</span> String filters;</span><br><span class=\"line\">\t</span><br><span class=\"line\">\t <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * äº‹åŠ¡ç®¡ç†å™¨</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"meta\">@Bean</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> DataSourceTransactionManager <span class=\"title\">dataSourceTransactionManager</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        DataSourceTransactionManager dataSourceTransactionManager = <span class=\"keyword\">new</span> DataSourceTransactionManager();</span><br><span class=\"line\">        dataSourceTransactionManager.setDataSource(dataSource());</span><br><span class=\"line\">        <span class=\"keyword\">return</span> dataSourceTransactionManager;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">\t</span><br><span class=\"line\">\t<span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * SpringJDBC Template</span></span><br><span class=\"line\"><span class=\"comment\">    */</span></span><br><span class=\"line\">    <span class=\"meta\">@Bean</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> JdbcTemplate <span class=\"title\">jdbcTemplate</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> JdbcTemplate(dataSource());</span><br><span class=\"line\">    &#125; </span><br><span class=\"line\">    </span><br><span class=\"line\">\t<span class=\"meta\">@Bean</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> DataSource <span class=\"title\">dataSource</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">\t\tLOGGER.info(<span class=\"string\">\"[Initialize DataSourceConfiguration]\"</span>);</span><br><span class=\"line\">    \tDruidDataSource dataSource = <span class=\"keyword\">new</span> DruidDataSource();</span><br><span class=\"line\">    \tdataSource.setUsername(<span class=\"keyword\">this</span>.username);</span><br><span class=\"line\">    \tdataSource.setPassword(<span class=\"keyword\">this</span>.password);</span><br><span class=\"line\">    \tdataSource.setUrl(<span class=\"keyword\">this</span>.url);</span><br><span class=\"line\"></span><br><span class=\"line\">        dataSource.setInitialSize(initialSize);     <span class=\"comment\">//å®šä¹‰åˆå§‹è¿æ¥æ•°</span></span><br><span class=\"line\">        dataSource.setMinIdle(minIdle);             <span class=\"comment\">//æœ€å°ç©ºé—²</span></span><br><span class=\"line\">        dataSource.setMaxActive(maxActive);         <span class=\"comment\">//å®šä¹‰æœ€å¤§è¿æ¥æ•°</span></span><br><span class=\"line\">        dataSource.setMaxWait(maxWait);             <span class=\"comment\">//æœ€é•¿ç­‰å¾…æ—¶é—´</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// é…ç½®é—´éš”å¤šä¹…æ‰è¿›è¡Œä¸€æ¬¡æ£€æµ‹ï¼Œæ£€æµ‹éœ€è¦å…³é—­çš„ç©ºé—²è¿æ¥ï¼Œå•ä½æ˜¯æ¯«ç§’</span></span><br><span class=\"line\">        dataSource.setTimeBetweenEvictionRunsMillis(timeBetweenEvictionRunsMillis);</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// é…ç½®ä¸€ä¸ªè¿æ¥åœ¨æ± ä¸­æœ€å°ç”Ÿå­˜çš„æ—¶é—´ï¼Œå•ä½æ˜¯æ¯«ç§’</span></span><br><span class=\"line\">        dataSource.setMinEvictableIdleTimeMillis(minEvictableIdleTimeMillis);</span><br><span class=\"line\">        <span class=\"comment\">// ç”¨æ¥æ£€æµ‹è¿æ¥æ˜¯å¦æœ‰æ•ˆçš„sqlï¼Œè¦æ±‚æ˜¯ä¸€ä¸ªæŸ¥è¯¢è¯­å¥ã€‚ å¦‚æœvalidationQueryä¸ºnullï¼ŒtestOnBorrowã€testOnReturnã€ </span></span><br><span class=\"line\">\t\t<span class=\"comment\">// testWhileIdleéƒ½ä¸ä¼šå…¶ä½œç”¨ã€‚åœ¨mysqlä¸­é€šå¸¸ä¸ºselect 'x'ï¼Œåœ¨oracleä¸­é€šå¸¸ä¸º select 1 from dual --&gt;</span></span><br><span class=\"line\">        dataSource.setValidationQuery(validationQuery);</span><br><span class=\"line\">        </span><br><span class=\"line\">        <span class=\"comment\">// å»ºè®®é…ç½®ä¸ºtrueï¼Œä¸å½±å“æ€§èƒ½ï¼Œå¹¶ä¸”ä¿è¯å®‰å…¨æ€§ã€‚ ç”³è¯·è¿æ¥çš„æ—¶å€™æ£€æµ‹ï¼Œå¦‚æœç©ºé—²æ—¶é—´å¤§äº timeBetweenEvictionRunsMillisï¼Œ </span></span><br><span class=\"line\">\t\t<span class=\"comment\">// æ‰§è¡ŒvalidationQueryæ£€æµ‹è¿æ¥æ˜¯å¦æœ‰æ•ˆã€‚</span></span><br><span class=\"line\">        dataSource.setTestWhileIdle(testWhileIdle);</span><br><span class=\"line\">        <span class=\"comment\">// ç”³è¯·è¿æ¥æ—¶æ‰§è¡ŒvalidationQueryæ£€æµ‹è¿æ¥æ˜¯å¦æœ‰æ•ˆï¼Œ åšäº†è¿™ä¸ªé…ç½®ä¼šé™ä½æ€§èƒ½ã€‚</span></span><br><span class=\"line\">        dataSource.setTestOnBorrow(testOnBorrow);</span><br><span class=\"line\">        <span class=\"comment\">//å½’è¿˜è¿æ¥æ—¶æ‰§è¡ŒvalidationQueryæ£€æµ‹è¿æ¥æ˜¯å¦æœ‰æ•ˆï¼Œ åšäº†è¿™ä¸ªé…ç½®ä¼šé™ä½æ€§èƒ½</span></span><br><span class=\"line\">        dataSource.setTestOnReturn(testOnReturn); </span><br><span class=\"line\"></span><br><span class=\"line\">    \t<span class=\"comment\">// æ˜¯å¦ç¼“å­˜preparedStatementï¼Œä¹Ÿå°±æ˜¯PSCacheã€‚ PSCacheå¯¹æ”¯æŒæ¸¸æ ‡çš„æ•°æ®åº“æ€§èƒ½æå‡å·¨å¤§ï¼Œæ¯”å¦‚è¯´oracleã€‚ </span></span><br><span class=\"line\">\t\t<span class=\"comment\">//åœ¨mysql5.5ä»¥ä¸‹çš„ç‰ˆæœ¬ä¸­æ²¡æœ‰PSCacheåŠŸèƒ½ï¼Œå»ºè®®å…³é—­æ‰ã€‚ 5.5åŠä»¥ä¸Šç‰ˆæœ¬æœ‰PSCacheï¼Œå»ºè®®å¼€å¯ã€‚</span></span><br><span class=\"line\">        dataSource.setPoolPreparedStatements(poolPreparedStatements);</span><br><span class=\"line\">        dataSource.setMaxPoolPreparedStatementPerConnectionSize(maxPoolPreparedStatementPerConnectionSize);</span><br><span class=\"line\">        <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">            dataSource.setFilters(filters);</span><br><span class=\"line\">        &#125; <span class=\"keyword\">catch</span> (SQLException e) &#123;</span><br><span class=\"line\">        \tLOGGER.error(<span class=\"string\">\"[Error DataSourceConfiguration ] &#123;&#125;\"</span>,e.getSQLState());</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    \t<span class=\"keyword\">return</span> dataSource;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"2-BeetlConfiguration-é¡µé¢æ¨¡æ¿å¼•æ“\"><a href=\"#2-BeetlConfiguration-é¡µé¢æ¨¡æ¿å¼•æ“\" class=\"headerlink\" title=\"2. BeetlConfiguration   é¡µé¢æ¨¡æ¿å¼•æ“\"></a>2. BeetlConfiguration   é¡µé¢æ¨¡æ¿å¼•æ“</h5><figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> cn.z201.learn.config.app.support;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> org.apache.logging.log4j.LogManager;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.apache.logging.log4j.Logger;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.beetl.ext.spring.BeetlGroupUtilConfiguration;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.beetl.ext.spring.BeetlSpringViewResolver;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.springframework.context.annotation.Bean;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.springframework.context.annotation.Configuration;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.springframework.core.io.ClassPathResource;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">@Configuration</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">BeetlConfiguration</span></span>&#123;</span><br><span class=\"line\">\t</span><br><span class=\"line\">\t<span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> Logger  LOGGER = LogManager.getLogger(BeetlConfiguration<span class=\"class\">.<span class=\"keyword\">class</span>)</span>;</span><br><span class=\"line\">\t</span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">-\t * é…ç½®è¯•å›¾æ¨¡æ¿å¼•æ“ </span></span><br><span class=\"line\"><span class=\"comment\">-\t */</span></span><br><span class=\"line\">\t<span class=\"meta\">@Bean</span>(initMethod = <span class=\"string\">\"init\"</span>, name = <span class=\"string\">\"beetlConfig\"</span>)</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> BeetlGroupUtilConfiguration <span class=\"title\">beetlConfig</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">\t\tLOGGER.info(<span class=\"string\">\"[Initialize BeetlGroupUtilConfiguration]\"</span>);</span><br><span class=\"line\">        BeetlGroupUtilConfiguration beetlGroupUtilConfiguration = <span class=\"keyword\">new</span> BeetlGroupUtilConfiguration();</span><br><span class=\"line\">        <span class=\"comment\">// å¦‚æœéœ€è¦é…ç½® beetl ç›¸å…³åŠŸèƒ½ï¼Œå°±ä¼ å…¥beetlçš„é…ç½®æ–‡ä»¶</span></span><br><span class=\"line\">        <span class=\"comment\">// æ¨¡æ¿çš„ä½ç½®å°±åœ¨ beetl.properties ä¸­é…ç½®</span></span><br><span class=\"line\">        beetlGroupUtilConfiguration.setConfigFileResource(<span class=\"keyword\">new</span> ClassPathResource(<span class=\"string\">\"beetl.properties\"</span>));</span><br><span class=\"line\">        <span class=\"comment\">// æˆ–ç®€å•çš„æ–¹å¼å°±æ˜¯ä½¿ç”¨é»˜è®¤é…ç½®æ–‡ä»¶ï¼Œç”¨ä¸‹é¢çš„ä»£ç è®¾ç½®æ¨¡æ¿ä½ç½®</span></span><br><span class=\"line\">        beetlGroupUtilConfiguration.setRoot(<span class=\"string\">\"/\"</span>);</span><br><span class=\"line\">        <span class=\"keyword\">return</span> beetlGroupUtilConfiguration;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    </span><br><span class=\"line\">\t<span class=\"meta\">@Bean</span>(name = <span class=\"string\">\"beetlSpringViewResolver\"</span>)</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> BeetlSpringViewResolver <span class=\"title\">beetlViewResolver</span><span class=\"params\">(BeetlGroupUtilConfiguration beetlConfig)</span> </span>&#123;</span><br><span class=\"line\">        BeetlSpringViewResolver beetlSpringViewResolver = <span class=\"keyword\">new</span> BeetlSpringViewResolver();</span><br><span class=\"line\">\t       beetlSpringViewResolver.setContentType(<span class=\"string\">\"text/html;charset=UTF-8\"</span>); <span class=\"comment\">// è®¾ç½®ç¼–ç </span></span><br><span class=\"line\">\t       beetlSpringViewResolver.setOrder(<span class=\"number\">0</span>);</span><br><span class=\"line\">\t       beetlSpringViewResolver.setSuffix(<span class=\"string\">\".html\"</span>);</span><br><span class=\"line\">\t       beetlSpringViewResolver.setConfig(beetlConfig);</span><br><span class=\"line\">       <span class=\"keyword\">return</span> beetlSpringViewResolver;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"3-MultipartResolverConfiguration-ä¸Šä¼ æ’ä»¶\"><a href=\"#3-MultipartResolverConfiguration-ä¸Šä¼ æ’ä»¶\" class=\"headerlink\" title=\"3.  MultipartResolverConfiguration   ä¸Šä¼ æ’ä»¶\"></a>3.  MultipartResolverConfiguration   ä¸Šä¼ æ’ä»¶</h5><figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> cn.z201.learn.config.app.support;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> org.apache.logging.log4j.LogManager;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.apache.logging.log4j.Logger;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.springframework.context.annotation.Bean;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.springframework.context.annotation.Configuration;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.springframework.web.multipart.commons.CommonsMultipartResolver;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">@Configuration</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">MultipartResolverConfiguration</span> </span>&#123;</span><br><span class=\"line\">\t</span><br><span class=\"line\">\t<span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> Logger  LOGGER = LogManager.getLogger(MultipartResolverConfiguration<span class=\"class\">.<span class=\"keyword\">class</span>)</span>;</span><br><span class=\"line\">\t</span><br><span class=\"line\">    <span class=\"meta\">@Bean</span>(name=<span class=\"string\">\"multipartResolver\"</span>)  </span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> CommonsMultipartResolver <span class=\"title\">commonsMultipartResolver</span><span class=\"params\">()</span></span>&#123;  </span><br><span class=\"line\">    \tLOGGER.info(<span class=\"string\">\"[Initialize CommonsMultipartResolver]\"</span>);</span><br><span class=\"line\">    \tCommonsMultipartResolver commonsMultipartResolver = <span class=\"keyword\">new</span> CommonsMultipartResolver();</span><br><span class=\"line\">    \t\tcommonsMultipartResolver.setDefaultEncoding(<span class=\"string\">\"utf-8\"</span>);     <span class=\"comment\">//&lt;!--ç¼–ç ä¸ºuft-8 --&gt;</span></span><br><span class=\"line\">    \t\tcommonsMultipartResolver.setMaxUploadSize(<span class=\"number\">104666600</span>);     <span class=\"comment\">//&lt;!-- è®¾ç½®æœ€å¤§ä¸Šä¼ æ–‡ä»¶å¤§å°ä¸º --&gt;</span></span><br><span class=\"line\">    \t\tcommonsMultipartResolver.setMaxInMemorySize(<span class=\"number\">1046666000</span>);  <span class=\"comment\">//&lt;!-- è®¾ç½®æœ€å¤§ä¸Šä¼ æ–‡ä»¶åœ¨å†…å­˜ä¸­çš„å¤§å° --&gt;</span></span><br><span class=\"line\">        <span class=\"keyword\">return</span> commonsMultipartResolver;  </span><br><span class=\"line\">    &#125;  </span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"5-SwaggerConfiguration-API\"><a href=\"#5-SwaggerConfiguration-API\" class=\"headerlink\" title=\"5 .SwaggerConfiguration API\"></a>5 .SwaggerConfiguration API</h5><figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> cn.z201.learn.config.app.support;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> org.apache.logging.log4j.LogManager;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.apache.logging.log4j.Logger;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.springframework.context.annotation.Bean;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.springframework.context.annotation.Configuration;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> com.google.common.collect.Sets;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> io.swagger.annotations.ApiOperation;</span><br><span class=\"line\"><span class=\"keyword\">import</span> springfox.documentation.builders.ApiInfoBuilder;</span><br><span class=\"line\"><span class=\"keyword\">import</span> springfox.documentation.builders.PathSelectors;</span><br><span class=\"line\"><span class=\"keyword\">import</span> springfox.documentation.builders.RequestHandlerSelectors;</span><br><span class=\"line\"><span class=\"keyword\">import</span> springfox.documentation.service.ApiInfo;</span><br><span class=\"line\"><span class=\"keyword\">import</span> springfox.documentation.service.Contact;</span><br><span class=\"line\"><span class=\"keyword\">import</span> springfox.documentation.spi.DocumentationType;</span><br><span class=\"line\"><span class=\"keyword\">import</span> springfox.documentation.spring.web.plugins.Docket;</span><br><span class=\"line\"><span class=\"keyword\">import</span> springfox.documentation.swagger2.annotations.EnableSwagger2;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">@Configuration</span></span><br><span class=\"line\"><span class=\"meta\">@EnableSwagger</span>2</span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">SwaggerConfiguration</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> Logger  LOGGER = LogManager.getLogger(SwaggerConfiguration<span class=\"class\">.<span class=\"keyword\">class</span>)</span>;</span><br><span class=\"line\">\t</span><br><span class=\"line\">\t<span class=\"meta\">@Bean</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> Docket <span class=\"title\">createApi</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">\t\tLOGGER.info(<span class=\"string\">\"[Initialize SwaggerConfiguration]\"</span>);</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> Docket(DocumentationType.SWAGGER_2)</span><br><span class=\"line\">        \t\t.produces(Sets.newHashSet(<span class=\"string\">\"application/json\"</span>, <span class=\"string\">\"application/xml\"</span>))</span><br><span class=\"line\">                .consumes(Sets.newHashSet(<span class=\"string\">\"application/json\"</span>, <span class=\"string\">\"application/xml\"</span>))</span><br><span class=\"line\">                .protocols(Sets.newHashSet(<span class=\"string\">\"http\"</span>, <span class=\"string\">\"https\"</span>))</span><br><span class=\"line\">        \t\t.forCodeGeneration(<span class=\"keyword\">true</span>)</span><br><span class=\"line\">                .apiInfo(apiInfo()) </span><br><span class=\"line\">                .select()               <span class=\"comment\">// é€‰æ‹©é‚£äº›è·¯å¾„å’Œapiä¼šç”Ÿæˆdocument</span></span><br><span class=\"line\">                .apis(RequestHandlerSelectors.withMethodAnnotation(ApiOperation<span class=\"class\">.<span class=\"keyword\">class</span>))  //æ‰«ææ³¨è§£</span></span><br><span class=\"line\"><span class=\"class\">//                .<span class=\"title\">apis</span>(<span class=\"title\">RequestHandlerSelectors</span>.<span class=\"title\">basePackage</span>(<span class=\"title\">ApiPackage</span>.<span class=\"title\">class</span>.<span class=\"title\">getPackage</span>().<span class=\"title\">getName</span>().<span class=\"title\">trim</span>())) //æ‰«æåŒ…è·¯</span></span><br><span class=\"line\"><span class=\"class\">                .<span class=\"title\">paths</span>(<span class=\"title\">PathSelectors</span>.<span class=\"title\">any</span>()) // å¯¹æ‰€æœ‰è·¯å¾„è¿›è¡Œç›‘æ§</span></span><br><span class=\"line\"><span class=\"class\">                .<span class=\"title\">build</span>()</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">\t</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">private</span> ApiInfo <span class=\"title\">apiInfo</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">    \tApiInfo apiInfo= <span class=\"keyword\">new</span> ApiInfoBuilder()</span><br><span class=\"line\">    \t\t\t .title(<span class=\"string\">\"APIç®¡ç†\"</span>)</span><br><span class=\"line\">                 .description(<span class=\"string\">\"https://my.oschina.net/z201/blog\"</span>)</span><br><span class=\"line\">                 .termsOfServiceUrl(<span class=\"string\">\"https://my.oschina.net/z201/blog\"</span>)</span><br><span class=\"line\">                 .contact(<span class=\"keyword\">new</span> Contact(<span class=\"string\">\"è‡ªå·±åŠ¨æ‰‹ä¸°è¡£è¶³é£Ÿ\"</span>,<span class=\"string\">\"\"</span>,<span class=\"string\">\"https://my.oschina.net/z201/blog\"</span>))</span><br><span class=\"line\">                 .version(<span class=\"string\">\"1.0\"</span>)</span><br><span class=\"line\">                 .build();</span><br><span class=\"line\">    \t<span class=\"keyword\">return</span> apiInfo;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"6-EhCacheConfiguration-ç¼“å­˜é…ç½®\"><a href=\"#6-EhCacheConfiguration-ç¼“å­˜é…ç½®\" class=\"headerlink\" title=\"6. EhCacheConfiguration ç¼“å­˜é…ç½®\"></a>6. EhCacheConfiguration ç¼“å­˜é…ç½®</h5><figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> cn.z201.learn.config.app.support;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> org.springframework.cache.annotation.EnableCaching;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.springframework.cache.ehcache.EhCacheCacheManager;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.springframework.cache.ehcache.EhCacheManagerFactoryBean;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.springframework.context.annotation.Bean;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.springframework.context.annotation.Configuration;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.springframework.core.io.ClassPathResource;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> net.sf.ehcache.CacheManager;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">@Configuration</span></span><br><span class=\"line\"><span class=\"meta\">@EnableCaching</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">EhCacheConfiguration</span> </span>&#123;</span><br><span class=\"line\">\t</span><br><span class=\"line\">\t<span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * EhCacheçš„é…ç½®</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"meta\">@Bean</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> EhCacheCacheManager <span class=\"title\">cacheManager</span><span class=\"params\">(CacheManager cacheManager)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> EhCacheCacheManager(cacheManager);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * EhCacheçš„é…ç½®</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"meta\">@Bean</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> EhCacheManagerFactoryBean <span class=\"title\">ehcache</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        EhCacheManagerFactoryBean ehCacheManagerFactoryBean = <span class=\"keyword\">new</span> EhCacheManagerFactoryBean();</span><br><span class=\"line\">        ehCacheManagerFactoryBean.setConfigLocation(<span class=\"keyword\">new</span> ClassPathResource(<span class=\"string\">\"ehcache.xml\"</span>));</span><br><span class=\"line\">        <span class=\"keyword\">return</span> ehCacheManagerFactoryBean;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"7-SchedulingConfiguration-å¯åŠ¨å®šæ—¶ä»»åŠ¡-Spring-task\"><a href=\"#7-SchedulingConfiguration-å¯åŠ¨å®šæ—¶ä»»åŠ¡-Spring-task\" class=\"headerlink\" title=\"7 . SchedulingConfiguration å¯åŠ¨å®šæ—¶ä»»åŠ¡ Spring task\"></a>7 . SchedulingConfiguration å¯åŠ¨å®šæ—¶ä»»åŠ¡ Spring task</h5><figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> cn.z201.learn.config.app.support;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> java.util.concurrent.Executor;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.util.concurrent.Executors;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> org.springframework.context.annotation.Bean;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.springframework.context.annotation.Configuration;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.springframework.scheduling.annotation.SchedulingConfigurer;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.springframework.scheduling.config.ScheduledTaskRegistrar;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">@Configuration</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">SchedulingConfiguration</span> <span class=\"keyword\">implements</span> <span class=\"title\">SchedulingConfigurer</span></span>&#123;</span><br><span class=\"line\">\t</span><br><span class=\"line\">\t<span class=\"meta\">@Override</span></span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">configureTasks</span><span class=\"params\">(ScheduledTaskRegistrar taskRegistrar)</span> </span>&#123;</span><br><span class=\"line\">\t\ttaskRegistrar.setScheduler(taskExecutor());\t\t</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\t</span><br><span class=\"line\">\t<span class=\"meta\">@Bean</span>(destroyMethod=<span class=\"string\">\"shutdown\"</span>)</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> Executor <span class=\"title\">taskExecutor</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> Executors.newScheduledThreadPool(<span class=\"number\">10</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"8-ValidatorConfiguration-éªŒè¯æ¡†æ¶é…ç½®\"><a href=\"#8-ValidatorConfiguration-éªŒè¯æ¡†æ¶é…ç½®\" class=\"headerlink\" title=\"8 . ValidatorConfiguration éªŒè¯æ¡†æ¶é…ç½®\"></a>8 . ValidatorConfiguration éªŒè¯æ¡†æ¶é…ç½®</h5><figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> cn.z201.learn.config.app.support;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> org.apache.logging.log4j.LogManager;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.apache.logging.log4j.Logger;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.hibernate.validator.HibernateValidator;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.springframework.context.annotation.Bean;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.springframework.context.annotation.Configuration;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.springframework.context.support.ReloadableResourceBundleMessageSource;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.springframework.validation.beanvalidation.LocalValidatorFactoryBean;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">@Configuration</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ValidatorConfiguration</span> </span>&#123;</span><br><span class=\"line\">\t</span><br><span class=\"line\">\t<span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> Logger  LOGGER = LogManager.getLogger(ValidatorConfiguration<span class=\"class\">.<span class=\"keyword\">class</span>)</span>;</span><br><span class=\"line\">\t   <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * æ”¯æŒæ ¡éªŒ HibernateValidator</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@return</span> ValidatorConfiguration</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"meta\">@Bean</span>(<span class=\"string\">\"validator\"</span>)</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> LocalValidatorFactoryBean <span class=\"title\">localValidatorFactoryBean</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">    \tLOGGER.info(<span class=\"string\">\"[Initialize ValidatorConfiguration]\"</span>);</span><br><span class=\"line\">    \tLocalValidatorFactoryBean localValidatorFactoryBean = <span class=\"keyword\">new</span> LocalValidatorFactoryBean();</span><br><span class=\"line\">    \tlocalValidatorFactoryBean.setProviderClass(HibernateValidator<span class=\"class\">.<span class=\"keyword\">class</span>)</span>;</span><br><span class=\"line\">    \tlocalValidatorFactoryBean.setValidationMessageSource(reloadableResourceBundleMessageSource());</span><br><span class=\"line\">    \t<span class=\"keyword\">return</span> <span class=\"keyword\">new</span> LocalValidatorFactoryBean();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"meta\">@Bean</span>(<span class=\"string\">\"messageSource\"</span>)</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> ReloadableResourceBundleMessageSource <span class=\"title\">reloadableResourceBundleMessageSource</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">    \tReloadableResourceBundleMessageSource reloadableResourceBundleMessageSource = <span class=\"keyword\">new</span> ReloadableResourceBundleMessageSource();</span><br><span class=\"line\">    \treloadableResourceBundleMessageSource.setBasename(<span class=\"string\">\"classpath:messages\"</span>);</span><br><span class=\"line\">    \treloadableResourceBundleMessageSource.setDefaultEncoding(<span class=\"string\">\"UTF-8\"</span>);</span><br><span class=\"line\">    \treloadableResourceBundleMessageSource.setCacheSeconds(<span class=\"number\">120</span>);</span><br><span class=\"line\">    \t<span class=\"keyword\">return</span> reloadableResourceBundleMessageSource;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n\n\n<h4 id=\"POMæ–‡ä»¶é…ç½®ä¿¡æ¯\"><a href=\"#POMæ–‡ä»¶é…ç½®ä¿¡æ¯\" class=\"headerlink\" title=\"POMæ–‡ä»¶é…ç½®ä¿¡æ¯\"></a>POMæ–‡ä»¶é…ç½®ä¿¡æ¯</h4><figure class=\"highlight xml\"><table><tr><td class=\"code\"><pre><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">properties</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"comment\">&lt;!-- é¡¹ç›®æ¡†æ¶ç»„åˆç‰ˆæœ¬å· --&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">java.version</span>&gt;</span>1.8<span class=\"tag\">&lt;/<span class=\"name\">java.version</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">javax.el-api.version</span>&gt;</span>3.0.0<span class=\"tag\">&lt;/<span class=\"name\">javax.el-api.version</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">javax.servlet-api.version</span>&gt;</span>3.1.0<span class=\"tag\">&lt;/<span class=\"name\">javax.servlet-api.version</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">spring.version</span>&gt;</span>4.3.8.RELEASE<span class=\"tag\">&lt;/<span class=\"name\">spring.version</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"comment\">&lt;!-- é¡µé¢æ¨¡æ¿å¼•æ“ibeetl --&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">com.ibeetl.version</span>&gt;</span>2.7.15<span class=\"tag\">&lt;/<span class=\"name\">com.ibeetl.version</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"comment\">&lt;!--  org.ehcache 2.* --&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">org.ehcache.version</span>&gt;</span>2.10.2.2.21<span class=\"tag\">&lt;/<span class=\"name\">org.ehcache.version</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"comment\">&lt;!-- LOGæ¡†æ¶ --&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">org.log4j2.version</span>&gt;</span>2.8.1<span class=\"tag\">&lt;/<span class=\"name\">org.log4j2.version</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"comment\">&lt;!-- org.hibernate.validator --&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">org.hibernate-validator.version</span>&gt;</span>5.2.4.Final<span class=\"tag\">&lt;/<span class=\"name\">org.hibernate-validator.version</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"comment\">&lt;!-- jacksonæ¡†æ¶ ç»„åˆ--&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">com.fasterxml.jackson.version</span>&gt;</span>2.8.1<span class=\"tag\">&lt;/<span class=\"name\">com.fasterxml.jackson.version</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">net.sf.json-lib.version</span>&gt;</span>2.4<span class=\"tag\">&lt;/<span class=\"name\">net.sf.json-lib.version</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"comment\">&lt;!-- MYSQL æ•°æ®åº“é©±åŠ¨ --&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">mysql.driver.version</span>&gt;</span>5.1.28<span class=\"tag\">&lt;/<span class=\"name\">mysql.driver.version</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"comment\">&lt;!-- springfox-swagger --&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">springfox.swagger.version</span>&gt;</span>2.7.0<span class=\"tag\">&lt;/<span class=\"name\">springfox.swagger.version</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"comment\">&lt;!-- é˜¿é‡Œå·´å·´ Druidè¿æ¥ --&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">alibaba.druid.version</span>&gt;</span>1.0.31<span class=\"tag\">&lt;/<span class=\"name\">alibaba.druid.version</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"comment\">&lt;!-- AOP ç»„åˆ--&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">org.aspectj.version</span>&gt;</span>1.8.8<span class=\"tag\">&lt;/<span class=\"name\">org.aspectj.version</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">cglib.nodep.version</span>&gt;</span>3.1<span class=\"tag\">&lt;/<span class=\"name\">cglib.nodep.version</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"comment\">&lt;!-- ä¸Šä¼ ç»„ä»¶ --&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">apache.commons.fileupload</span>&gt;</span>1.3.1<span class=\"tag\">&lt;/<span class=\"name\">apache.commons.fileupload</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"comment\">&lt;!--  lang3--&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">apache.commons.lang3</span>&gt;</span>3.4<span class=\"tag\">&lt;/<span class=\"name\">apache.commons.lang3</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"comment\">&lt;!--  io--&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">apache.commons.io</span>&gt;</span>2.4<span class=\"tag\">&lt;/<span class=\"name\">apache.commons.io</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"comment\">&lt;!--  collections--&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">apache.commons.collections</span>&gt;</span>3.2.1<span class=\"tag\">&lt;/<span class=\"name\">apache.commons.collections</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"comment\">&lt;!-- lombok è¯­æ³•ç³– --&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">projectlombok.version</span>&gt;</span>1.16.16<span class=\"tag\">&lt;/<span class=\"name\">projectlombok.version</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"comment\">&lt;!-- å•å…ƒæµ‹è¯• --&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">junit.version</span>&gt;</span>4.12<span class=\"tag\">&lt;/<span class=\"name\">junit.version</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"comment\">&lt;!-- æŒ‡å®šMavenç¼–è¯‘é¡¹ç›®ç¼–è¯‘æ ¼å¼ --&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">project.build.sourceEncoding</span>&gt;</span>UTF-8<span class=\"tag\">&lt;/<span class=\"name\">project.build.sourceEncoding</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">properties</span>&gt;</span>\t</span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">dependencies</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>cn.z201.web.common<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>web.common <span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>$&#123;project.version&#125;<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"comment\">&lt;!-- Spring 4.* --&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>org.springframework<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>spring-core<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>$&#123;spring.version&#125;<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">exclusions</span>&gt;</span></span><br><span class=\"line\">\t\t\t<span class=\"comment\">&lt;!-- æ’é™¤é€šç”¨æ—¥å¿— æ”¹æ”¯æŒSLF4j --&gt;</span></span><br><span class=\"line\">\t\t\t<span class=\"tag\">&lt;<span class=\"name\">exclusion</span>&gt;</span></span><br><span class=\"line\">\t\t\t\t<span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>commons-logging<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">\t\t\t\t<span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>commons-logging<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">\t\t\t<span class=\"tag\">&lt;/<span class=\"name\">exclusion</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;/<span class=\"name\">exclusions</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>org.springframework<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>spring-context<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>$&#123;spring.version&#125;<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">exclusions</span>&gt;</span></span><br><span class=\"line\">\t\t\t<span class=\"comment\">&lt;!-- æ’é™¤é€šç”¨æ—¥å¿— æ”¹æ”¯æŒSLF4j --&gt;</span></span><br><span class=\"line\">\t\t\t<span class=\"tag\">&lt;<span class=\"name\">exclusion</span>&gt;</span></span><br><span class=\"line\">\t\t\t\t<span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>commons-logging<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">\t\t\t\t<span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>commons-logging<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">\t\t\t<span class=\"tag\">&lt;/<span class=\"name\">exclusion</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;/<span class=\"name\">exclusions</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>org.springframework<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>spring-test<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>$&#123;spring.version&#125;<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>org.springframework<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>spring-web<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>$&#123;spring.version&#125;<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">\t\t    <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>org.springframework<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span> </span><br><span class=\"line\">\t\t\t<span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>spring-webmvc<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">\t\t\t<span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>$&#123;spring.version&#125;<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">           <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>org.springframework<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">           <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>spring-expression<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">           <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>$&#123;spring.version&#125;<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\">       <span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>org.springframework<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>spring-context-support<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>$&#123;spring.version&#125;<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>org.springframework<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>spring-tx<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>$&#123;spring.version&#125;<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>org.springframework<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>spring-aop<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>$&#123;spring.version&#125;<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>org.springframework<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>spring-jdbc<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>$&#123;spring.version&#125;<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"comment\">&lt;!-- hibernate validator --&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span>  </span><br><span class=\"line\">\t    <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>org.hibernate<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span>  </span><br><span class=\"line\">\t    <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>hibernate-validator<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span>  </span><br><span class=\"line\">\t    <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>$&#123;org.hibernate-validator.version&#125;<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span>  </span><br><span class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span> </span><br><span class=\"line\">\t<span class=\"comment\">&lt;!-- å¢å¼º AOP --&gt;</span></span><br><span class=\"line\">\t<span class=\"comment\">&lt;!-- quartzé…ç½® --&gt;</span> </span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>org.quartz-scheduler<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>quartz<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>$&#123;org.quartz.version&#125;<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">exclusions</span>&gt;</span></span><br><span class=\"line\">               <span class=\"tag\">&lt;<span class=\"name\">exclusion</span>&gt;</span></span><br><span class=\"line\">                   <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>org.slf4j<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">                   <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>slf4j-api<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">               <span class=\"tag\">&lt;/<span class=\"name\">exclusion</span>&gt;</span></span><br><span class=\"line\">               <span class=\"tag\">&lt;<span class=\"name\">exclusion</span>&gt;</span></span><br><span class=\"line\">                   <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>c3p0<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">                   <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>c3p0<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">               <span class=\"tag\">&lt;/<span class=\"name\">exclusion</span>&gt;</span></span><br><span class=\"line\">           <span class=\"tag\">&lt;/<span class=\"name\">exclusions</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>org.aspectj<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>aspectjweaver<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>$&#123;org.aspectj.version&#125;<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>org.aspectj<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>aspectjrt<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>$&#123;org.aspectj.version&#125;<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"comment\">&lt;!-- å¾…å®š --&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>cglib<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>cglib-nodep<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>$&#123;cglib.nodep.version&#125;<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"comment\">&lt;!-- AOP end--&gt;</span></span><br><span class=\"line\">\t<span class=\"comment\">&lt;!-- ibeetl --&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">           \t<span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>com.ibeetl<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">           \t<span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>beetl<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">           \t<span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>$&#123;com.ibeetl.version&#125;<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"comment\">&lt;!-- https://mvnrepository.com/artifact/org.ehcache/ehcache --&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">\t    <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>net.sf.ehcache<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">           <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>ehcache<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">\t    <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>$&#123;org.ehcache.version&#125;<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"comment\">&lt;!-- Druid --&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>com.alibaba<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>druid<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>$&#123;alibaba.druid.version&#125;<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"comment\">&lt;!-- mysql driver --&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>mysql<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>mysql-connector-java<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>$&#123;mysql.driver.version&#125;<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"comment\">&lt;!-- æ·»åŠ Swagger2ä¾èµ–  $&#123;springfox.swagger.version&#125;--&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span>  </span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>io.springfox<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>springfox-swagger2<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>$&#123;springfox.swagger.version&#125;<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span> </span><br><span class=\"line\">\t<span class=\"comment\">&lt;!--</span></span><br><span class=\"line\"><span class=\"comment\">\t&lt;dependency&gt;  </span></span><br><span class=\"line\"><span class=\"comment\">\t\t    &lt;groupId&gt;io.springfox&lt;/groupId&gt;</span></span><br><span class=\"line\"><span class=\"comment\">\t\t    &lt;artifactId&gt;springfox-swagger-ui&lt;/artifactId&gt;</span></span><br><span class=\"line\"><span class=\"comment\">\t\t    &lt;version&gt;2.7.0&lt;/version&gt;</span></span><br><span class=\"line\"><span class=\"comment\">    &lt;/dependency&gt;</span></span><br><span class=\"line\"><span class=\"comment\">\t--&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">\t \t<span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>com.drore.cloud<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">\t \t<span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>swagger-bootstrap-ui<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">\t \t<span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>1.0<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span> </span><br><span class=\"line\">\t<span class=\"comment\">&lt;!-- Loggingé…ç½®ï¼šLog4j2 --&gt;</span></span><br><span class=\"line\">\t<span class=\"comment\">&lt;!-- log4j2 --&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>org.apache.logging.log4j<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>log4j-api<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>$&#123;org.log4j2.version&#125;<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>org.apache.logging.log4j<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>log4j-core<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>$&#123;org.log4j2.version&#125;<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>org.apache.logging.log4j<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>log4j-jcl<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>$&#123;org.log4j2.version&#125;<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>org.apache.logging.log4j<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>log4j-1.2-api<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>$&#123;org.log4j2.version&#125;<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>org.apache.logging.log4j<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>log4j-slf4j-impl<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>$&#123;org.log4j2.version&#125;<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>org.apache.logging.log4j<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>log4j-web<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>$&#123;org.log4j2.version&#125;<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\">      \t<span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"comment\">&lt;!-- å¾…å®š --&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>cglib<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>cglib-nodep<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>$&#123;cglib.nodep.version&#125;<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"comment\">&lt;!-- ä½¿ç”¨jsonLayoutå¿…é¡»ä¾èµ–jackson --&gt;</span></span><br><span class=\"line\">       <span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">           <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>com.fasterxml.jackson.core<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">           <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>jackson-core<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">           <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>$&#123;com.fasterxml.jackson.version&#125;<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\">       <span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">       <span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">           <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>com.fasterxml.jackson.core<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">           <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>jackson-databind<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">           <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>$&#123;com.fasterxml.jackson.version&#125;<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\">       <span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>com.fasterxml.jackson.jaxrs<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>jackson-jaxrs-json-provider<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>$&#123;com.fasterxml.jackson.version&#125;<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"comment\">&lt;!--json-lib --&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>net.sf.json-lib<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>json-lib<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>$&#123;net.sf.json-lib.version&#125;<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">classifier</span>&gt;</span>jdk15<span class=\"tag\">&lt;/<span class=\"name\">classifier</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"comment\">&lt;!-- Test å•å…ƒæµ‹è¯• --&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>junit<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>junit<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>$&#123;junit.version&#125;<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"comment\">&lt;!-- ä¸Šä¼  --&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>commons-fileupload<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>commons-fileupload<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>$&#123;apache.commons.fileupload&#125;<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"comment\">&lt;!-- H2 driver</span></span><br><span class=\"line\"><span class=\"comment\">\t&lt;dependency&gt;</span></span><br><span class=\"line\"><span class=\"comment\">\t\t&lt;groupId&gt;com.h2database&lt;/groupId&gt;</span></span><br><span class=\"line\"><span class=\"comment\">\t\t&lt;artifactId&gt;h2&lt;/artifactId&gt;</span></span><br><span class=\"line\"><span class=\"comment\">\t\t&lt;version&gt;$&#123;h2.database.version&#125;&lt;/version&gt;</span></span><br><span class=\"line\"><span class=\"comment\">\t&lt;/dependency&gt;</span></span><br><span class=\"line\"><span class=\"comment\">\t --&gt;</span> </span><br><span class=\"line\">\t<span class=\"comment\">&lt;!-- commons --&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>org.apache.commons<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>commons-lang3<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>$&#123;apache.commons.lang3&#125;<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>commons-io<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>commons-io<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>$&#123;apache.commons.io&#125;<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>commons-collections<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>commons-collections<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>$&#123;apache.commons.collections&#125;<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"comment\">&lt;!-- http://projectlombok.org/  --&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>org.projectlombok<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>lombok<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>$&#123;projectlombok.version&#125;<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"comment\">&lt;!-- WARç›¸å…³jar --&gt;</span></span><br><span class=\"line\">\t<span class=\"comment\">&lt;!-- javax --&gt;</span></span><br><span class=\"line\">\t<span class=\"comment\">&lt;!-- https://mvnrepository.com/artifact/javax.el/javax.el-api --&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">\t    <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>javax.el<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">\t    <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>javax.el-api<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">\t    <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>$&#123;javax.el-api.version&#125;<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>javax.servlet<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>javax.servlet-api<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>$&#123;javax.servlet-api.version&#125;<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">       </span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"ç»“æŸè¯­\"><a href=\"#ç»“æŸè¯­\" class=\"headerlink\" title=\"ç»“æŸè¯­\"></a>ç»“æŸè¯­</h3><p>è‡ªå·±åŠ¨æ‰‹ä¸°è¡£è¶³é£Ÿ</p>\n","categories":["å®è·µ"],"tags":["Spring"]},{"title":"Macä¸‹å¼€å‘ç¯å¢ƒ","url":"/posts/2549917654/","content":"<blockquote>\n<p>æœ€è¿‘å¼€å§‹ç”¨macæ¥å¼€å‘ã€‚è®°å½•ä¸‹ç¯å¢ƒå®‰è£…è¿‡ç¨‹æ–¹ä¾¿ä»¥åå¿«é€Ÿæ¢å¤ç†Ÿæ‚‰çš„å¼€å‘ç¯å¢ƒã€‚</p>\n</blockquote>\n<p>è¿™é‡Œæå‰ä¿®æ”¹ä¸€ä¸‹æ§åˆ¶å°å‰ç¼€</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">[dev mc]$ sudo vim &#x2F;etc&#x2F;bashrc</span><br><span class=\"line\">#ä¿®æ”¹ä»¥ä¸‹å†…å®¹</span><br><span class=\"line\">PS1&#x3D;&#39;\\h:\\W \\u\\$ &#39;</span><br><span class=\"line\">#ä¿®æ”¹æˆ</span><br><span class=\"line\">PS1&#x3D;&#39;[dev \\u]$ &#39;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"å¥½ç”¨çš„å·¥å…·\"><a href=\"#å¥½ç”¨çš„å·¥å…·\" class=\"headerlink\" title=\"å¥½ç”¨çš„å·¥å…·\"></a>å¥½ç”¨çš„å·¥å…·</h3><ul>\n<li>pages <code>åŒäº‹æ¨èçš„è½¯ä»¶</code>æš‚æ—¶ç”¨æ¥å†™å‘¨æŠ¥ã€‚</li>\n<li>brew <code>è¿™æ˜¯ä¸€ä¸ªç¥å™¨,å’Œlinux ä¸Šçš„yum ç±»ä¼¼çš„å·¥å…·ã€‚</code></li>\n<li>sublime text <code>æˆ‘ä¹‹å‰åœ¨windowsä¸Šéƒ½æ˜¯ä½¿ç”¨notepad++ã€‚ä¸ŠApp Storeä¸Šæ²¡æ‰¾åˆ°,è¯¥ç”¨è¿™ä¸ªäº†ã€‚</code></li>\n</ul>\n<h3 id=\"pages\"><a href=\"#pages\" class=\"headerlink\" title=\"pages\"></a>pages</h3><ul>\n<li>ç›´æ¥åœ¨app storeå®‰è£…å°±å¥½äº†</li>\n</ul>\n<h3 id=\"brew\"><a href=\"#brew\" class=\"headerlink\" title=\"brew\"></a>brew</h3><ul>\n<li>å®‰è£…è¿‡ç¨‹ä½¿ç”¨ç»ˆç«¯å®‰è£…ã€‚</li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">#  è¿™é‡Œå¹¶æ²¡æœ‰æ¢è¡Œï¼Œå¤åˆ¶çš„æ—¶å€™è¯·æ³¨æ„ã€‚</span><br><span class=\"line\">&#x2F;usr&#x2F;bin&#x2F;ruby -e &quot;$(curl -fsSL https:&#x2F;&#x2F;raw.githubusercontent.com&#x2F;Homebrew&#x2F;install&#x2F;master&#x2F;install)&quot;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>åŸºæœ¬æ“ä½œæ–¹å¼</li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\"># æ›´æ–°</span><br><span class=\"line\">brew update </span><br><span class=\"line\"># å®‰è£…è½¯ä»¶ </span><br><span class=\"line\">brew install xxxï¼ˆè½¯ä»¶åï¼‰</span><br><span class=\"line\"></span><br><span class=\"line\">#å¸¸è§å‘½ä»¤æ•´ç†å¦‚ä¸‹ï¼Œä»¥ä¸‹å‘½ä»¤éƒ½å¯å¸¦ä¸Š cask å‚æ•°ï¼š\t</span><br><span class=\"line\"></span><br><span class=\"line\">brew search nameï¼šè”ç½‘æœç´¢è½¯ä»¶æ˜¯å¦å­˜åœ¨ brew ä¸­</span><br><span class=\"line\">brew install nameï¼šå®‰è£…è½¯ä»¶</span><br><span class=\"line\">brew upgrade nameï¼šæ›´æ–°è½¯ä»¶</span><br><span class=\"line\">brew uninstall nameï¼šå¸è½½è½¯ä»¶</span><br><span class=\"line\">brew reinstall nameï¼šé‡æ–°å®‰è£…è½¯ä»¶</span><br><span class=\"line\">brew info nameï¼šæŸ¥çœ‹è½¯ä»¶å®‰è£…åœ°å€</span><br><span class=\"line\">brew cleanupï¼šæ¸…ç†ç¼“å­˜ç­‰</span><br><span class=\"line\">brew doctorï¼šæŸ¥çœ‹å»ºè®®ï¼Œä¾‹å¦‚å‡çº§ç­‰</span><br></pre></td></tr></table></figure>\n\n<a id=\"more\"></a>\n\n<h3 id=\"æœ€ç»ˆå®‰è£…ç¬¬ä¸‰æ–¹ç¨‹åºå¦‚ä¸‹\"><a href=\"#æœ€ç»ˆå®‰è£…ç¬¬ä¸‰æ–¹ç¨‹åºå¦‚ä¸‹\" class=\"headerlink\" title=\"æœ€ç»ˆå®‰è£…ç¬¬ä¸‰æ–¹ç¨‹åºå¦‚ä¸‹:\"></a>æœ€ç»ˆå®‰è£…ç¬¬ä¸‰æ–¹ç¨‹åºå¦‚ä¸‹:</h3><ul>\n<li>é¦–å…ˆè¿›å…¥ç”¨æˆ·çš„å·¥ä½œç©ºé—´ï¼Œè·¯å¾„<code>/User/{user}/Downloads</code> è¿™é‡Œçš„user å°±æ˜¯ä½ çš„ç”µè„‘ç”¨æˆ·åç§°ã€‚</li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">[dev mc]$ ls -l</span><br><span class=\"line\">total 2031352</span><br><span class=\"line\">-rw-r--r--@ 1 mc  staff    9987856  6 21 09:40 Typora.dmg</span><br><span class=\"line\">-rw-r--r--@ 1 mc  staff    8958105  6 21 10:43 apache-maven-3.5.3-bin.zip</span><br><span class=\"line\">-rw-r--r--@ 1 mc  staff   31940569  6 21 08:59 git-2.17.1-intel-universal-mavericks.dmg</span><br><span class=\"line\">-rw-r--r--@ 1 mc  staff   69518288  6 12 14:23 googlechrome.dmg</span><br><span class=\"line\">-rw-r--r--@ 1 mc  staff  659753157  6 20 16:55 ideaIU-2018.1.5.dmg</span><br><span class=\"line\">-rw-r--r--@ 1 mc  staff  259882804  6 20 17:00 jdk-8u171-macosx-x64.dmg</span><br><span class=\"line\">-rw-r--r--@ 1 mc  staff   42296521  6 21 13:44 sogou_mac_47e.zip</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>ç®€å•ä»‹ç»ä¸‹å®‰è£…çš„ç¨‹åºï¼šsogouã€Typoraã€mavenã€gitã€chromeã€ideaã€jdkã€Navicat Premiumã€gradleã€‚</li>\n</ul>\n<h3 id=\"å®‰è£…sogouè¾“å…¥æ³•\"><a href=\"#å®‰è£…sogouè¾“å…¥æ³•\" class=\"headerlink\" title=\"å®‰è£…sogouè¾“å…¥æ³•\"></a>å®‰è£…sogouè¾“å…¥æ³•</h3><ul>\n<li>æœ€å¼€å§‹åœ¨<code>app store</code>ä¸Šå®‰è£…äº†ä¸€ä¸ªç‰ˆæœ¬ï¼Œä½†æ˜¯ä¸çŸ¥é“é…ç½®ã€‚ä»æ–°åœ¨å®˜æ–¹ç½‘ç«™ä¸‹è½½ä¸€ä¸ªmacç‰ˆæœ¬çš„ã€‚</li>\n</ul>\n<h3 id=\"å®‰è£…jdk\"><a href=\"#å®‰è£…jdk\" class=\"headerlink\" title=\"å®‰è£…jdk\"></a>å®‰è£…jdk</h3><ul>\n<li>ç”±äºæ˜¯ä»å®˜æ–¹ç½‘ç«™ä¸Šä¸‹è½½çš„ç‰ˆæœ¬ï¼Œå’Œwindowsé‡Œé¢çš„å®‰è£…è¿‡ç¨‹ç±»ä¼¼ï¼Œè¿™é‡Œä¸å¤šè¯´ã€‚ä¸»è¦æ˜¯å®‰è£…å®Œæˆä¹‹åjava homeåœ¨ä»€ä¹ˆåœ°æ–¹éœ€è¦æ³¨æ„åº”è¯¥åœ¨åé¢çš„éœ€è¦é…ç½®ç›¸å…³ä¿¡æ¯ã€‚</li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">#æ£€æŸ¥å®‰è£…æ•ˆæœ</span><br><span class=\"line\">[dev mc]$ java -version</span><br><span class=\"line\">java version &quot;1.8.0_171&quot;</span><br><span class=\"line\">Java(TM) SE Runtime Environment (build 1.8.0_171-b11)</span><br><span class=\"line\">Java HotSpot(TM) 64-Bit Server VM (build 25.171-b11, mixed mode)</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>æ£€æŸ¥javahomeä½ç½®ã€‚</li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">[dev mc]$ &#x2F;usr&#x2F;libexec&#x2F;java_home -V</span><br><span class=\"line\">Matching Java Virtual Machines (1):</span><br><span class=\"line\">    1.8.0_171, x86_64:  &quot;Java SE 8&quot; &#x2F;Library&#x2F;Java&#x2F;JavaVirtualMachines&#x2F;jdk1.8.0_171.jdk&#x2F;Contents&#x2F;Home</span><br><span class=\"line\"></span><br><span class=\"line\">&#x2F;Library&#x2F;Java&#x2F;JavaVirtualMachines&#x2F;jdk1.8.0_171.jdk&#x2F;Contents&#x2F;Home</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><a href=\"https://adoptopenjdk.net/archive.html?variant=openjdk8\" target=\"_blank\" rel=\"noopener\">https://adoptopenjdk.net/archive.html?variant=openjdk8</a> æˆ–è€…ç›´æ¥å®‰è£…openjdk</li>\n</ul>\n<h3 id=\"å®‰è£…git\"><a href=\"#å®‰è£…git\" class=\"headerlink\" title=\"å®‰è£…git\"></a>å®‰è£…git</h3><ul>\n<li>gitå®‰è£…ä¹Ÿæ˜¯å¯è§†åŒ–å®‰è£…ï¼Œå’Œwindowsä¸‹æµç¨‹ç±»ä¼¼ã€‚</li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">dev mc]$ git --version</span><br><span class=\"line\">git version 2.17.1</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"å®‰è£…chrome\"><a href=\"#å®‰è£…chrome\" class=\"headerlink\" title=\"å®‰è£…chrome\"></a>å®‰è£…chrome</h3><ul>\n<li>åæ­£æˆ‘æ²¡åœ¨app storeæ‰¾åˆ°ï¼Œä¹Ÿè®¸æ˜¯æˆ‘çäº†ã€‚</li>\n</ul>\n<h3 id=\"å®‰è£…idea\"><a href=\"#å®‰è£…idea\" class=\"headerlink\" title=\"å®‰è£…idea\"></a>å®‰è£…idea</h3><ul>\n<li>å®‰è£…è¿‡ç¨‹å¯è§†åŒ–ï¼Œè¿™å°±ä¸å¤šè¯´ã€‚ä¸»è¦æ˜¯æ¿€æ´»éœ€è¦æ³¨æ„ä¸‹ã€‚æˆ‘é‡‡ç”¨ä¿®æ”¹hostsæ–‡ä»¶çš„æ–¹å¼ï¼›æ®è¯´è¿™ä¸ªæ–¹æ³•éœ€è¦ç»å¸¸æ¿€æ´»ã€‚</li>\n<li>å®‰è£…å®Œæˆä¹‹åå…ˆä¸è¿›å…¥ideaï¼Œå…ˆä¿®æ”¹hostsæ–‡ä»¶ã€‚å¹¶ä»<code>http://idea.lanyus.com</code>è·å–æ¿€æ´»ç ã€‚</li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">ï¼ƒä¿®æ”¹hostæ–‡ä»¶</span><br><span class=\"line\">[dev mc]$ sudo vim &#x2F;etc&#x2F;hosts</span><br><span class=\"line\">#</span><br><span class=\"line\"># Host Database</span><br><span class=\"line\">#</span><br><span class=\"line\"># localhost is used to configure the loopback interface</span><br><span class=\"line\"># when the system is booting.  Do not change this entry.</span><br><span class=\"line\">##</span><br><span class=\"line\">127.0.0.1       localhost</span><br><span class=\"line\">255.255.255.255 broadcasthost</span><br><span class=\"line\">::1             localhost</span><br><span class=\"line\">#è¿™é‡Œæ˜¯è¿½åŠ çš„å†…å®¹ã€‚</span><br><span class=\"line\">0.0.0.0         account.jetbrains.com</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>è¿™é‡Œéœ€è¦ææƒæ“ä½œ<code>sudo</code>ï¼Œä¿å­˜çš„æ—¶å€™éœ€è¦å¼ºåˆ¶ä¿å­˜<code>wq!</code>ã€‚</p>\n</blockquote>\n<ul>\n<li>ä¿®æ”¹å®Œhostsæ–‡ä»¶,å¹¶ä»ç½‘ç«™ä¸­è·å–äº†æ¿€æ´»ç å°±æ‰“å¼€ideaç¬¬ä¸€æ¬¡éœ€è¦æ¿€æ´»ã€‚åœ¨<code>Activation code</code> ç²˜è´´æ¿€æ´»ç å°±okäº†ã€‚</li>\n</ul>\n<h3 id=\"å®‰è£…openresty\"><a href=\"#å®‰è£…openresty\" class=\"headerlink\" title=\"å®‰è£…openresty\"></a>å®‰è£…openresty</h3><ul>\n<li>åœ¨macä¸Šç›´æ¥ä½¿ç”¨brewå®‰è£…</li>\n</ul>\n<figure class=\"highlight shell\"><table><tr><td class=\"code\"><pre><span class=\"line\">brew install openresty/brew/openresty</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><p>å®‰è£…å®Œæˆä¹‹åï¼Œé»˜è®¤çš„å®‰è£…ä½ç½®åœ¨ /usr/local/Cellar/openresty/xxx (xxxæ˜¯ç‰ˆæœ¬å·)</p>\n</li>\n<li><p>è®¾ç½®ç¯å¢ƒå˜é‡</p>\n</li>\n</ul>\n<figure class=\"highlight shell\"><table><tr><td class=\"code\"><pre><span class=\"line\">export PATH=/usr/local/Cellar/openresty/1.19.9.1_2/nginx/sbin:$PATH</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>æ£€æŸ¥</li>\n</ul>\n<figure class=\"highlight shell\"><table><tr><td class=\"code\"><pre><span class=\"line\">âœ  ~ nginx -v</span><br><span class=\"line\">nginx version: openresty/1.19.9.1</span><br><span class=\"line\"></span><br><span class=\"line\">âœ  ~ nginx -V</span><br><span class=\"line\">nginx version: openresty/1.19.9.1</span><br><span class=\"line\">built by clang 13.0.0 (clang-1300.0.29.3)</span><br><span class=\"line\">built with OpenSSL 1.1.1l  24 Aug 2021</span><br><span class=\"line\">TLS SNI support enabled</span><br><span class=\"line\">configure arguments: --prefix=/usr/local/Cellar/openresty/1.19.9.1_2/nginx --with-cc-opt='-O2 -I/usr/local/include -I/usr/local/opt/pcre/include -I/usr/local/opt/openresty-openssl111/include' --add-module=../ngx_devel_kit-0.3.1 --add-module=../echo-nginx-module-0.62 --add-module=../xss-nginx-module-0.06 --add-module=../ngx_coolkit-0.2 --add-module=../set-misc-nginx-module-0.32 --add-module=../form-input-nginx-module-0.12 --add-module=../encrypted-session-nginx-module-0.08 --add-module=../srcache-nginx-module-0.32 --add-module=../ngx_lua-0.10.20 --add-module=../ngx_lua_upstream-0.07 --add-module=../headers-more-nginx-module-0.33 --add-module=../array-var-nginx-module-0.05 --add-module=../memc-nginx-module-0.19 --add-module=../redis2-nginx-module-0.15 --add-module=../redis-nginx-module-0.3.7 --add-module=../ngx_stream_lua-0.0.10 --with-ld-opt='-Wl,-rpath,/usr/local/Cellar/openresty/1.19.9.1_2/luajit/lib -L/usr/local/lib -L/usr/local/opt/pcre/lib -L/usr/local/opt/openresty-openssl111/lib' --pid-path=/usr/local/var/run/openresty.pid --lock-path=/usr/local/var/run/openresty.lock --conf-path=/usr/local/etc/openresty/nginx.conf --http-log-path=/usr/local/var/log/nginx/access.log --error-log-path=/usr/local/var/log/nginx/error.log --with-pcre-jit --with-ipv6 --with-stream --with-stream_ssl_module --with-stream_ssl_preread_module --with-http_v2_module --without-mail_pop3_module --without-mail_imap_module --without-mail_smtp_module --with-http_stub_status_module --with-http_realip_module --with-http_addition_module --with-http_auth_request_module --with-http_secure_link_module --with-http_random_index_module --with-http_geoip_module --with-http_gzip_static_module --with-http_sub_module --with-http_dav_module --with-http_flv_module --with-http_mp4_module --with-http_gunzip_module --with-threads --with-stream --with-http_ssl_module</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"å®‰è£…typora\"><a href=\"#å®‰è£…typora\" class=\"headerlink\" title=\"å®‰è£…typora\"></a>å®‰è£…typora</h3><ul>\n<li>æˆ‘åœ¨windowsä¸Šç»å¸¸ä½¿ç”¨è¿™æ¬¾ç¼–è¾‘å™¨ã€ç”¨macä¾ç„¶ä½¿ç”¨ã€‚ä¸è¿‡åœ¨å†™è¿™ç¯‡æ–‡æ¡£çš„æ—¶å€™å‘ç°æ˜æ˜¾çš„bug ï¼›è¿˜èƒ½å¿å—ã€‚</li>\n</ul>\n<h3 id=\"å®‰è£…maven\"><a href=\"#å®‰è£…maven\" class=\"headerlink\" title=\"å®‰è£…maven\"></a>å®‰è£…maven</h3><ul>\n<li>è§£å‹æ–‡ä»¶ï¼Œå¹¶å¤åˆ¶åˆ°<code>/Users/{user}/opt</code>æ–‡ä»¶å¤¹ä¸­,æˆ‘ç”µè„‘åˆ°ç”¨æˆ·å«<code>mc</code></li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">[dev mc]$ unzip apache-maven-3.5.3.zip</span><br><span class=\"line\">...</span><br><span class=\"line\">[dev mc]$ mv apache-maven-3.5.3 &#x2F;Users&#x2F;mc&#x2F;opt</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>mavenéœ€è¦é…ç½®ç¯å¢ƒå˜é‡ï¼Œé¦–å…ˆæ£€æŸ¥<code>~/.bash_profile</code>æ˜¯å¦å­˜åœ¨ã€‚å¦‚æœä¸å­˜åœ¨å°±åˆ›å»ºä¸€ä¸ªã€‚</li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">#æˆ‘è¿™é‡Œæ˜¯æ²¡æœ‰è¯¥æ–‡ä»¶</span><br><span class=\"line\">[dev mc]$  touch ~&#x2F;.bash_profile</span><br><span class=\"line\">#ç¼–è¾‘å†…å®¹</span><br><span class=\"line\">[dev mc]$  sudo vim ~&#x2F;.bash_profile</span><br><span class=\"line\"></span><br><span class=\"line\"># mavenæ‰€åœ¨çš„ç›®å½•  </span><br><span class=\"line\">export M2_HOME&#x3D;&#x2F;Users&#x2F;mc&#x2F;opt&#x2F;apache-maven-3.5.3  </span><br><span class=\"line\"># maven binæ‰€åœ¨çš„ç›®å½•  </span><br><span class=\"line\">export M2&#x3D;$M2_HOME&#x2F;bin  </span><br><span class=\"line\"># å°†maven binåŠ åˆ°PATHå˜é‡ä¸­  </span><br><span class=\"line\">export PATH&#x3D;$M2:$PATH</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>è¿™é‡Œå…¶å®å’Œwindowsä¸Šé…ç½®ä¸€æ ·åªä¸è¿‡å†™å…¥åˆ°åœ°æ–¹ä¸ä¸€æ ·è€Œå·²ã€‚java_homeä¹Ÿå¯ä»¥åœ¨è¿™é‡Œé…ç½®ã€‚</li>\n<li>å¼ºåˆ¶åˆ·æ–°é…ç½®ä¿¡æ¯<code>[dev mc]$ source ~/.bash_profile</code>ã€‚</li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">ï¼ƒæ£€æŸ¥é…ç½®ä¿¡æ¯</span><br><span class=\"line\">dev mc]$ mvn -v</span><br><span class=\"line\">Apache Maven 3.5.3 (3383c37e1f9e9b3bc3df5050c29c8aff9f295297; 2018-02-25T03:49:05+08:00)</span><br><span class=\"line\">Maven home: &#x2F;Users&#x2F;mc&#x2F;opt&#x2F;apache-maven-3.5.3</span><br><span class=\"line\">Java version: 1.8.0_171, vendor: Oracle Corporation</span><br><span class=\"line\">Java home: &#x2F;Library&#x2F;Java&#x2F;JavaVirtualMachines&#x2F;jdk1.8.0_171.jdk&#x2F;Contents&#x2F;Home&#x2F;jre</span><br><span class=\"line\">Default locale: zh_CN, platform encoding: UTF-8</span><br><span class=\"line\">OS name: &quot;mac os x&quot;, version: &quot;10.11.6&quot;, arch: &quot;x86_64&quot;, family: &quot;mac&quot;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"å®‰è£…Navicat-Premium\"><a href=\"#å®‰è£…Navicat-Premium\" class=\"headerlink\" title=\"å®‰è£…Navicat Premium\"></a>å®‰è£…Navicat Premium</h3><blockquote>\n<p>å®‰è£…è¿™ä¸ªæ˜¯æ¯”è¾ƒéº»çƒ¦çš„ï¼Œä¸è¿‡æ€»ç®—æ˜¯å®‰è£…æˆåŠŸäº†ã€‚å•ç‹¬æ¢³ç†ä¸€ä¸‹è‡ªå·±çš„æ¿€æ´»æˆåŠŸè¿‡ç¨‹ã€‚ä¸è¿‡æˆ‘å¹¶ä¸æ˜¯è‡ªå·±ç®—å‡ºçš„æ³¨å†Œç è€Œæ˜¯ä½¿ç”¨ä½œè€…ç»™çš„ã€‚æ¯•ç«Ÿæ–¹ä¾¿å¾ˆå¤šã€‚</p>\n</blockquote>\n<p>å‚è€ƒæ–‡çŒ®ï¼š<a href=\"https://www.jianshu.com/p/f3ef78deadaa\" target=\"_blank\" rel=\"noopener\">Navicat Premium for Macçš„ç ´è§£æ•™ç¨‹</a></p>\n<ul>\n<li>ä¸‹è½½å®‰è£…åŒ… <a href=\"https://pan.baidu.com/s/13ySwHKoMaleBdLs71ACdlA\" target=\"_blank\" rel=\"noopener\">ç™¾åº¦ç½‘ç›˜</a> å¯†ç  q47u <code>ps : è¿™ä¸ªåœ°å€å¯èƒ½ä¼šå¤±æ•ˆ</code></li>\n<li>åŠ å¯†è§£å¯†ç½‘ç«™ <a href=\"http://tool.chacuo.net/cryptrsaprikey\" target=\"_blank\" rel=\"noopener\">http://tool.chacuo.net/cryptrsaprikey</a></li>\n</ul>\n<p>å¤§æ¦‚çš„æµç¨‹æ˜¯è¿™æ ·çš„ï¼š</p>\n<ul>\n<li>ä¿®æ”¹Navicat Premium <code>rpk</code>æ–‡ä»¶å†…å®¹ï¼Œä¹Ÿå°±æ˜¯å…¬é’¥ã€‚è¿™é‡Œå‚è€ƒæ–‡æ¡£ä¸­çš„ä¸€å †é’¥ã€‚rpkæ–‡ä»¶åœ°å€å°±åœ¨Navicat Premiumåº”ç”¨å®‰è£…ä½ç½®ä¸­<code>Contents/Resources/</code>é‡Œé¢ã€‚</li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\"># å…¬é’¥ï¼Œæ”¾åœ¨rpkæ–‡ä»¶ä¸­çš„ã€‚</span><br><span class=\"line\">-----BEGIN PUBLIC KEY-----</span><br><span class=\"line\">MIIBITANBgkqhkiG9w0BAQEFAAOCAQ4AMIIBCQKCAQB8vXG0ImYhLHvHhpi5FS3g</span><br><span class=\"line\">d2QhxSQiU6dQ04F1OHB0yRRQ3NXF5py2NNDw962i4WP1zpUOHh94&#x2F;mg&#x2F;KA8KHNJX</span><br><span class=\"line\">HtQVLXMRms+chomsQCwkDi2jbgUa4jRFN&#x2F;6N3QejJ42jHasY3MJfALcnHCY3KDEF</span><br><span class=\"line\">h0N89FV4yGLyDLr+TLqpRecg9pkPnOp++UTSsxz&#x2F;e0ONlPYrra&#x2F;DiaBjsleAESZS</span><br><span class=\"line\">I69sPD9xZRt+EciXVQfybI&#x2F;2SYeAdXMm1B7tHCcFlOxeUgqYV03VEqiC0jVMwRCd</span><br><span class=\"line\">+03NU3wvEmLBvGOmNGudocWIF&#x2F;y3VOqyW1byXFLeZxl7s+Y&#x2F;SthxOYXzu3mF+2&#x2F;p</span><br><span class=\"line\">AgMBAAE&#x3D;</span><br><span class=\"line\">-----END PUBLIC KEY-----</span><br><span class=\"line\"></span><br><span class=\"line\">#ç§é’¥ï¼Œåé¢æ¿€æ´»çš„æ—¶å€™éœ€è¦ç”Ÿæˆç¦»çº¿æ¿€æ´»ç ã€‚</span><br><span class=\"line\">-----BEGIN RSA PRIVATE KEY-----</span><br><span class=\"line\">MIIEogIBAAKCAQB8vXG0ImYhLHvHhpi5FS3gd2QhxSQiU6dQ04F1OHB0yRRQ3NXF</span><br><span class=\"line\">5py2NNDw962i4WP1zpUOHh94&#x2F;mg&#x2F;KA8KHNJXHtQVLXMRms+chomsQCwkDi2jbgUa</span><br><span class=\"line\">4jRFN&#x2F;6N3QejJ42jHasY3MJfALcnHCY3KDEFh0N89FV4yGLyDLr+TLqpRecg9pkP</span><br><span class=\"line\">nOp++UTSsxz&#x2F;e0ONlPYrra&#x2F;DiaBjsleAESZSI69sPD9xZRt+EciXVQfybI&#x2F;2SYeA</span><br><span class=\"line\">dXMm1B7tHCcFlOxeUgqYV03VEqiC0jVMwRCd+03NU3wvEmLBvGOmNGudocWIF&#x2F;y3</span><br><span class=\"line\">VOqyW1byXFLeZxl7s+Y&#x2F;SthxOYXzu3mF+2&#x2F;pAgMBAAECggEAK5qZbYt8wenn1uZg</span><br><span class=\"line\">6onRwJ5bfUaJjApL+YAFx&#x2F;ETtm83z9ByVbx4WWT7CNC7fK1nINy20&#x2F;mJrOTZkgIx</span><br><span class=\"line\">x6otiNC4+DIsACJqol+RLoo8I9pk77Ucybn65ZteOz7hVZIU+8j6LzW0KDt6yowX</span><br><span class=\"line\">e75r7G&#x2F;NEpfibNc3Zz81+oDd2x+bHyGbzc9QcePIVuEzkof6jgpbWrQZU14itx9l</span><br><span class=\"line\">VxEgj&#x2F;fbMccvBx8brR&#x2F;l9ClmDZd9Y6TWsF1rfJpF3+DPeqFkKCiD7PGz3bs4O&#x2F;Zd</span><br><span class=\"line\">ZrfV21ZNVusBW49G6bU63gQVKsOf1qGo3efbAW1HVxgTQ&#x2F;lExVdcMvdenZm+ADKp</span><br><span class=\"line\">L4&#x2F;wUQKBgQDOfBjn3OC2IerUFu18EgCS7pSjTSibXw+TeX3D5zwszLC091G2rGlT</span><br><span class=\"line\">5DihBUhMfesNdpoZynrs4YB6Sz9C3wSGAB8AM&#x2F;tNvPhtSVtbMHmrdT2DEEKCvLkO</span><br><span class=\"line\">RNBnt+8aTu2hGRanw9aL1189gzwrmXK5ZuuURfgLrB9ihrvjo4VznQKBgQCapx13</span><br><span class=\"line\">dEA1MwapBiIa3k8hVBCoGPsEPWqM33RBdUqUsP33f9&#x2F;PCx00j&#x2F;akwmjgQNnBlAJo</span><br><span class=\"line\">Y7LOqPCyiwOkEf40T4IlHdzYntWQQvHhfBwqSgdkTE9tKj43Ddr7JVFRL6yMSbW3</span><br><span class=\"line\">9qAp5UX&#x2F;+VzOLGAlfzJ8CBnkXwGrnKPCVbnZvQKBgQCd+iof80jlcCu3GteVrjxM</span><br><span class=\"line\">LkcAbb8cqG1FWpVTNe4&#x2F;JFgqDHKzPVPUgG6nG2CGTWxxv4UFKHpGE&#x2F;11E28SHYjb</span><br><span class=\"line\">cOpHAH5LqsGy84X2za649JkcVmtclUFMXm&#x2F;Ietxvl2WNdKF1t4rFMQFIEckOXnd8</span><br><span class=\"line\">y&#x2F;Z&#x2F;Wcz+OTFF82l7L5ehrQKBgFXl9m7v6e3ijpN5LZ5A1jDL0Yicf2fmePUP9DGb</span><br><span class=\"line\">ZTZbbGR46SXFpY4ZXEQ9GyVbv9dOT1wN7DXvDeoNXpNVzxzdAIt&#x2F;H7hN2I8NL+4v</span><br><span class=\"line\">EjHG9n4WCJO4v9+yWWvfWWA&#x2F;m5Y8JqusV1+N0iiQJ6T4btrE4JSVp1P6FSJtmWOK</span><br><span class=\"line\">W&#x2F;T9AoGAcMhPMCL+N+AvWcYt4Y4mhelvDG8e&#x2F;Jj4U+lwS3g7YmuQuYx7h5tjrS33</span><br><span class=\"line\">w4o20g&#x2F;3XudPMJHhA3z+d8b3GaVM3ZtcRM3+Rvk+zSOcGSwn3yDy4NYlv9bdUj&#x2F;4</span><br><span class=\"line\">H+aU1Qu1ZYojFM1Gmbe4HeYDOzRsJ5BhNrrV12h27JWkiRJ4F&#x2F;Q&#x3D;</span><br><span class=\"line\">-----END RSA PRIVATE KEY-----</span><br></pre></td></tr></table></figure>\n\n<p><code>æ›¿æ¢rpkæ–‡ä»¶å†…å®¹åä½¿ç”¨æ³¨å†Œç </code><em>NAVH-T4PX-WT8W-QBL5</em></p>\n<ul>\n<li>å¼€å§‹æ¿€æ´»æ‰“å¼€è½¯ä»¶ä¼šæç¤ºæ¿€æ´»æ“ä½œã€‚è¾“å…¥æ³¨å†Œç å¹¶æ–­ç½‘ï¼Œæç¤ºæ‰‹åŠ¨æ¿€æ´»ä¹Ÿå°±æ˜¯ç¦»çº¿æ¿€æ´»ã€‚å¤åˆ¶è¯·æ±‚ä»£ç ã€‚æ‰“å¼€åŠ å¯†è§£å¯†ç½‘ç«™ï¼Œå°†ç§é’¥å¡«å…¥<code>åŠ å¯†ç§˜é’¥</code>ï¼Œç„¶åæŠŠ<code>è¯·æ±‚ç </code>å¤åˆ¶åˆ°å¾…<code>è§£å¯†åŒºåŸŸ</code>ï¼Œè®¡ç®—å‡ºæ˜æ–‡ã€‚</li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\"># æ˜æ–‡æ ¼å¼å¦‚ä¸‹</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">&quot;K&quot; : &quot;NAVHT4PXWT8WQBL5&quot;,</span><br><span class=\"line\">&quot;P&quot; : &quot;Mac 10.13&quot;,</span><br><span class=\"line\">&quot;DI&quot; : &quot;ODQ2Yjg2ZDBjMTEzMjhh&quot;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>æ‹¿åˆ°æ˜æ–‡ï¼ŒæŒ‰ç…§å›ºå®šæ ¼å¼å¡«å……ä¸‹é¢çš„å¾…åŠ å¯†å†…å®¹ï¼Œå°±æ˜¯æ¿€æ´»ç çš„æ˜æ–‡ã€‚</li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\"># åœ¨åŠ å¯†æ“ä½œä¸­ï¼Œè¯·å‹¿æ¢è¡Œã€‚æ›¿æ¢ä¸‹é¢çš„kã€diã€tï¼›è¿™ä¸ªtå°±æ˜¯æ—¶é—´æˆ³ï¼Œnã€oéšæ„å¡«ã€‚</span><br><span class=\"line\">&#123;&quot;K&quot;:&quot;NAVHT4PXWT8WQBL5&quot;, &quot;N&quot;:&quot;52pojie&quot;, &quot;O&quot;:&quot;52pojie.cn&quot;, &quot;DI&quot;:&quot;ODQ2Yjg2ZDBjMTEzMjhh&quot;, &quot;T&quot;:1516939200&#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>æ‹¿åˆ°æ¿€æ´»ç çš„æ˜æ–‡ï¼Œç”¨<code>ç§é’¥</code>åŠ å¯†çš„åˆ°æ¿€æ´»ç ï¼Œå¡«å…¥æ¿€æ´»å°±okäº†ã€‚åœ¨æ•™ç¨‹ä¸­å·²ç»å¾ˆè¯¦ç»†äº†ï¼Œæ‰€ä»¥å°±ä¸å¤šé‡å¤é˜è¿°ã€‚</li>\n</ul>\n<h3 id=\"å®‰è£…gradle\"><a href=\"#å®‰è£…gradle\" class=\"headerlink\" title=\"å®‰è£…gradle\"></a>å®‰è£…gradle</h3><blockquote>\n<p>å®‰è£…æœ‰ä¸¤ç§æ–¹å¼ï¼Œç¬¬ä¸€ç§æ˜¯ä¸‹è½½è§£å‹åŒ…ï¼Œç„¶åé…ç½®ç¯å¢ƒå˜é‡ã€‚ç¬¬äºŒç§æ˜¯ç”¨brewè¿›è¡Œå®‰è£…ã€‚çœ‹gradleçš„å®˜æ–¹ä¹Ÿæ˜¯æ¨èbrewçš„å®‰è£…æ–¹å¼ã€‚ä¸‹é¢å°±ç®€å•æ¼”ç¤ºä¸‹ã€‚</p>\n</blockquote>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">[dev mc]$ brew install gradle</span><br><span class=\"line\">#æ£€æŸ¥æ˜¯å¦å®‰è£…å®Œæˆ</span><br><span class=\"line\">[dev mc]$ gradle --version</span><br><span class=\"line\">Welcome to Gradle 4.8.1!</span><br><span class=\"line\"></span><br><span class=\"line\">Here are the highlights of this release:</span><br><span class=\"line\"> - Dependency locking</span><br><span class=\"line\"> - Maven Publish and Ivy Publish plugins improved and marked stable</span><br><span class=\"line\"> - Incremental annotation processing enhancements</span><br><span class=\"line\"> - APIs to configure tasks at creation time</span><br><span class=\"line\"></span><br><span class=\"line\">For more details see https:&#x2F;&#x2F;docs.gradle.org&#x2F;4.8.1&#x2F;release-notes.html</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">------------------------------------------------------------</span><br><span class=\"line\">Gradle 4.8.1</span><br><span class=\"line\">------------------------------------------------------------</span><br><span class=\"line\"></span><br><span class=\"line\">Build time:   2018-06-21 07:53:06 UTC</span><br><span class=\"line\">Revision:     0abdea078047b12df42e7750ccba34d69b516a22</span><br><span class=\"line\"></span><br><span class=\"line\">Groovy:       2.4.12</span><br><span class=\"line\">Ant:          Apache Ant(TM) version 1.9.11 compiled on March 23 2018</span><br><span class=\"line\">JVM:          1.8.0_171 (Oracle Corporation 25.171-b11)</span><br><span class=\"line\">OS:           Mac OS X 10.13.5 x86_64</span><br></pre></td></tr></table></figure>\n\n<p><code>è¿™é‡Œéœ€è¦æ³¨æ„çš„æ˜¯brewå®‰è£…çš„ç¨‹åºéƒ½å­˜æ”¾åœ¨ /usr/local/</code>ï¼Œè¿™é‡Œå®‰è£…çš„åœ°å€å°±åœ¨<code>/usr/local/Cellar/gradle</code>ã€‚</p>\n<ul>\n<li>åœ¨è®¾ç½®ç¯å¢ƒå˜é‡ï¼Œå’Œmavenè®¾ç½®æ–¹å¼ä¸€æ ·ã€‚</li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\"># ç¼–è¾‘ bash_profileæ–‡ä»¶æ·»åŠ gradleé…ç½®ä¿¡æ¯</span><br><span class=\"line\">[dev mc]$ sudo vim ~&#x2F;.bash_profile</span><br><span class=\"line\"></span><br><span class=\"line\"># æ·»åŠ ä¸€ä¸‹å†…å®¹</span><br><span class=\"line\">#gradleæ‰€åœ¨æ–‡ä»¶åœ°å€</span><br><span class=\"line\">export GRADLE_HOME&#x3D;&#x2F;usr&#x2F;local&#x2F;Cellar&#x2F;gradle</span><br><span class=\"line\">#gradle binæ‰€åœ¨çš„ç›®å½•</span><br><span class=\"line\">export GRADLE&#x3D;$GRADLE_HOME&#x2F;bin</span><br><span class=\"line\">#å°†gradle binåŠ åˆ°PATHå˜é‡ä¸­</span><br><span class=\"line\">export PATH&#x3D;$GRADLE:$PATH </span><br><span class=\"line\"></span><br><span class=\"line\">#å¼ºåˆ¶åˆ·æ–°é…ç½®æ–‡ä»¶</span><br><span class=\"line\">[dev mc]$ source ~&#x2F;.bash_profile</span><br><span class=\"line\"></span><br><span class=\"line\">#å†æ¬¡æŸ¥æ£€æŸ¥ç¯å¢ƒé…ç½®</span><br><span class=\"line\">[dev mc]$ gradle --version</span><br><span class=\"line\"></span><br><span class=\"line\">------------------------------------------------------------</span><br><span class=\"line\">Gradle 4.8.1</span><br><span class=\"line\">------------------------------------------------------------</span><br><span class=\"line\"></span><br><span class=\"line\">Build time:   2018-06-21 07:53:06 UTC</span><br><span class=\"line\">Revision:     0abdea078047b12df42e7750ccba34d69b516a22</span><br><span class=\"line\"></span><br><span class=\"line\">Groovy:       2.4.12</span><br><span class=\"line\">Ant:          Apache Ant(TM) version 1.9.11 compiled on March 23 2018</span><br><span class=\"line\">JVM:          1.8.0_171 (Oracle Corporation 25.171-b11)</span><br><span class=\"line\">OS:           Mac OS X 10.13.5 x86_64</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"å®‰è£…zsh\"><a href=\"#å®‰è£…zsh\" class=\"headerlink\" title=\"å®‰è£…zsh\"></a>å®‰è£…zsh</h3><blockquote>\n<p>è¿™ä¸ªæ¯”é»˜è®¤è‡ªå¸¦çš„æ§åˆ¶å°å¼ºå¤§å¾ˆå¤šï¼Œæ‰€ä»¥æ¨èä½¿ç”¨ã€‚</p>\n</blockquote>\n<ul>\n<li>æŸ¥çœ‹macé»˜è®¤è‡ªå¸¦çš„zshç‰ˆæœ¬</li>\n</ul>\n<figure class=\"highlight sh\"><table><tr><td class=\"code\"><pre><span class=\"line\">zsh --version</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>macè‡ªå¸¦çš„shellæ˜¯bashï¼Œéœ€è¦è‡ªå·±ä¿®æ”¹ä¸‹ã€‚</li>\n</ul>\n<figure class=\"highlight sh\"><table><tr><td class=\"code\"><pre><span class=\"line\">cat /etc/shells   <span class=\"comment\">#æŸ¥çœ‹ç³»ç»Ÿè‡ªå¸¦çš„bash</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># List of acceptable shells for chpass(1).</span></span><br><span class=\"line\"><span class=\"comment\"># Ftpd will not allow users to connect who are not using</span></span><br><span class=\"line\"><span class=\"comment\"># one of these shells.</span></span><br><span class=\"line\"></span><br><span class=\"line\">/bin/bash</span><br><span class=\"line\">/bin/csh</span><br><span class=\"line\">/bin/ksh</span><br><span class=\"line\">/bin/sh</span><br><span class=\"line\">/bin/tcsh</span><br><span class=\"line\">/bin/zsh  <span class=\"comment\"># è¿™ä¸ªå°±æ˜¯æˆ‘ä»¬è¦ç”¨çš„ã€‚</span></span><br><span class=\"line\"></span><br><span class=\"line\">chsh -s /bin/zsh <span class=\"comment\"># è¿™æ˜¯ä¿®æ”¹é»˜è®¤bashã€‚</span></span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>å®‰è£…â€œoh my zshâ€</li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">sh -c &quot;$(curl -fsSL https:&#x2F;&#x2F;raw.github.com&#x2F;robbyrussell&#x2F;oh-my-zsh&#x2F;master&#x2F;tools&#x2F;install.sh)&quot; #æ³¨æ„è„šæœ¬</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>æ³¨æ„äº‹é¡¹</li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">å¦‚æœä¹‹å‰æœ‰åœ¨ ~&#x2F;.bash_profile é…å¤‡ç¯å¢ƒå˜é‡ï¼Œè¯·ä¿®æ”¹~&#x2F;.zshrcï¼Œåœ¨æ–‡ä»¶å†…æ·»åŠ source ~&#x2F;.bash_profile ã€‚ä¸ç„¶ä¼šå‡ºè¿™ä¸ªé”™è¯¯ zsh: command not found: xxx</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"å®‰è£…macvim\"><a href=\"#å®‰è£…macvim\" class=\"headerlink\" title=\"å®‰è£…macvim\"></a>å®‰è£…macvim</h3><blockquote>\n<p>åœ¨ç»ˆç«¯é‡Œé¢çš„vimä¸æ˜¯ç‰¹åˆ«ä¹ æƒ¯ï¼Œæ‰€ä»¥æˆ‘æ‰¾äº†ä¸‹macä¸Šçš„vimå¯è§†åŒ–è½¯ä»¶ã€‚</p>\n</blockquote>\n<p><a href=\"https://github.com/macvim-dev/macvim\" target=\"_blank\" rel=\"noopener\">https://github.com/macvim-dev/macvim</a></p>\n<h3 id=\"å®‰è£…asciinema\"><a href=\"#å®‰è£…asciinema\" class=\"headerlink\" title=\"å®‰è£…asciinema\"></a>å®‰è£…asciinema</h3><blockquote>\n<p>ç»ˆç«¯å½•åˆ¶,ä¸ªäººè§‰çš„åŠ¨ç”»æ¯”è¾ƒå®¹æ˜“è¡¨ç¤ºæ¸…æ™°ã€‚</p>\n</blockquote>\n<ul>\n<li><p>å®‰è£…å‘½ä»¤ <code>brew install asciinema</code></p>\n</li>\n<li><p>ä½¿ç”¨æ–¹æ³•è¾“å…¥ <code>asciinema rec</code> å³å¯å¼€å§‹å½•åˆ¶ã€‚å®ŒæˆåæŒ‰ <code>Ctrl+D</code> æˆ–è€…<code>exit</code>é€€å‡ºã€‚</p>\n</li>\n</ul>\n<h3 id=\"å®‰è£…wrk\"><a href=\"#å®‰è£…wrk\" class=\"headerlink\" title=\"å®‰è£…wrk\"></a>å®‰è£…wrk</h3><blockquote>\n<p>HTTPçš„å°å·¥å…·ã€‚</p>\n</blockquote>\n<ul>\n<li>å®‰è£…å‘½ä»¤<code>brew install wrk</code>ã€‚</li>\n</ul>\n<h3 id=\"å®‰è£…Keycastr\"><a href=\"#å®‰è£…Keycastr\" class=\"headerlink\" title=\"å®‰è£…Keycastr\"></a>å®‰è£…Keycastr</h3><blockquote>\n<p>æ˜¾ç¤ºæŒ‰é”®çš„å°å·¥å…·ï¼ˆMacï¼‰ï¼Œå¯ä»¥è®¾ç½®è¦æ˜¾ç¤ºçš„æ¡Œé¢ã€æ˜¯å¦åªæ˜¾ç¤ºå¸¦åŠŸèƒ½é”®çš„é”®ä½ã€‚å¼€æºå…è´¹</p>\n</blockquote>\n<ul>\n<li>å®‰è£…å‘½ä»¤ <code>brew cask install keycastr</code>ã€‚</li>\n<li>éœ€è¦åœ¨éšç§è®¾ç½®ä¸­å¼€å¯ã€‚</li>\n<li>é¡¹ç›®åœ°å€ <a href=\"https://github.com/keycastr/keycastr\" target=\"_blank\" rel=\"noopener\">https://github.com/keycastr/keycastr</a></li>\n</ul>\n<h3 id=\"å®‰è£…Go\"><a href=\"#å®‰è£…Go\" class=\"headerlink\" title=\"å®‰è£…Go\"></a>å®‰è£…<code>Go</code></h3><blockquote>\n<p>è¿™é‡Œå·æ‡’ç›´æ¥åœ¨å®˜æ–¹ç½‘ç«™ä¸Šä¸‹è½½å¯å®‰è£…åŒ…,å¦‚æœå·æ‡’å¯ä»¥ä½¿ç”¨<code>brew install go</code>æ¥å®‰è£…ï¼Œè¿™é‡Œæ¼”ç¤ºä¸‹æºç å®‰è£…</p>\n</blockquote>\n<ul>\n<li><p><a href=\"https://golang.org/dl/\" target=\"_blank\" rel=\"noopener\">å®˜æ–¹åœ°å€</a> <a href=\"https://golang.google.cn/dl/\" target=\"_blank\" rel=\"noopener\">å›½å†…é•œåƒ</a> ä¸‹è½½å¯¹åº”çš„å®‰è£…åŒ…</p>\n</li>\n<li><p>é…ç½®<code>GOPATH</code>  è¿™é‡Œå’Œé…ç½®javaç±»ä¼¼ã€‚</p>\n</li>\n</ul>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">vim .bash_profile</span><br><span class=\"line\"><span class=\"built_in\">export</span> GOPATH=/usr/<span class=\"built_in\">local</span>/Cellar/go/1.7.6</span><br><span class=\"line\"><span class=\"built_in\">export</span> GOBIN=<span class=\"variable\">$GOPATH</span>/bin</span><br><span class=\"line\"><span class=\"built_in\">export</span> PATH=<span class=\"variable\">$PATH</span>:<span class=\"variable\">$GOBIN</span></span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><p>æ£€æŸ¥é…ç½®<code>go env</code></p>\n</li>\n<li><p>é…ç½®<a href=\"https://goproxy.io/\" target=\"_blank\" rel=\"noopener\">goproxy</a>,æš‚æ—¶è¿˜ä¸æ¸…æ¥šä¸ºä»€ä¹ˆé…ç½®æœªç”Ÿæ•ˆã€‚æ‰€ä»¥åœ¨å›½å†…ä¸‹è½½ä¾èµ–ä¾ç„¶ä¼šå‡ºè¶…æ—¶ã€‚</p>\n</li>\n<li><p>å½“æˆ‘ä»¬ä½¿ç”¨ <code>import &quot;golang.org/x/tools/go/buildutil&quot;</code> å¯¼å…¥åŒ…æ—¶ï¼Œå…¶å®å¯¼å…¥çš„æ˜¯<code>$GOPATH/src/golang.org/x/tools/go/buildutil</code>ç›®å½•çš„åŒ…ã€‚</p>\n</li>\n<li><p>â€œgolang.org/xâ€ ä¸‹çš„åŒ…åœ¨ â€œgithub.com/golangâ€æœ‰é•œåƒåº“ã€‚</p>\n</li>\n<li><p>æ‰€ä»¥å¯ä»¥ä» github.com ä¸Šå°†å¯¹åº”åŒ…ä¸‹è½½ä¸‹æ¥æ”¾åˆ°å¯¹åº”çš„ç›®å½•å³å¯</p>\n</li>\n<li><p>å…ˆåˆ‡æ¢åˆ° <code>$GOPATH</code> çš„ src ç›®å½•ï¼Œ<code>cd $GOPATH/src</code>ï¼Œç„¶åæŒ‰éœ€è¦ä¸‹è½½ï¼š</p>\n<ol>\n<li><code>git clone --depth 1 https://github.com/golang/tools.git golang.org/x/tools</code></li>\n<li><code>git clone --depth 1 https://github.com/golang/lint.git golang.org/x/lint</code></li>\n<li><code>git clone --depth 1 https://github.com/golang/net.git golang.org/x/net</code></li>\n<li><code>git clone --depth 1 https://github.com/golang/sys.git golang.org/x/sys</code></li>\n<li><code>git clone --depth 1 https://github.com/golang/crypto.git golang.org/x/crypto</code></li>\n<li><code>git clone --depth 1 https://github.com/golang/text.git golang.org/x/text</code></li>\n<li><code>git clone --depth 1 https://github.com/golang/image.git golang.org/x/image</code></li>\n<li><code>git clone --depth 1 https://github.com/golang/oauth2.git golang.org/x/oauth2</code></li>\n</ol>\n</li>\n</ul>\n<ul>\n<li>ä»¥å‰ä»–çš„ä¾èµ–ä»¥æ­¤ç±»æ¨ã€‚</li>\n</ul>\n<h3 id=\"å®‰è£…chromedriver\"><a href=\"#å®‰è£…chromedriver\" class=\"headerlink\" title=\"å®‰è£…chromedriver\"></a>å®‰è£…chromedriver</h3><blockquote>\n<p>ä½¿ç”¨çˆ¬è™«çš„æ—¶å€™éœ€è¦ä½¿ç”¨</p>\n</blockquote>\n<figure class=\"highlight sh\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># æ£€æŸ¥æ˜¯å¦å®‰è£… chromedriver</span></span><br><span class=\"line\">-&gt; chromedriver -v</span><br><span class=\"line\">ChromeDriver 85.0.4183.87 </span><br><span class=\"line\"><span class=\"comment\"># æ³¨æ„chromedriver å’Œ chrome çš„ç‰ˆæœ¬è¦ååŒï¼Œå¦‚æœä¸ä¸€è‡´ã€‚å°±éƒ½é‡æ–°å®‰è£…æœ€æ–°ç‰ˆå³å¯ï¼Œå®˜ç½‘æœ‰ç‰ˆæœ¬å¯¹ç…§è¡¨ã€‚</span></span><br><span class=\"line\"><span class=\"comment\"># å¸è½½ chromedriver</span></span><br><span class=\"line\">-&gt; brew uninstall chromedriver</span><br><span class=\"line\"><span class=\"comment\"># å®‰è£… chromedriver</span></span><br><span class=\"line\">-&gt; brew cask install chromedriver</span><br><span class=\"line\"><span class=\"comment\"># è¿™é‡Œå¯èƒ½å‡ºç°ç‰ˆæœ¬ä¸æ­£ç¡®ï¼Œå› ä¸ºchromeç»å¸¸æ›´æ–°ã€‚å¯ä»¥å°è¯•æ‰‹åŠ¨å®‰è£…</span></span><br><span class=\"line\"><span class=\"comment\"># å¸è½½ chromedriver</span></span><br><span class=\"line\">-&gt; brew uninstall chromedriver</span><br><span class=\"line\"><span class=\"comment\"># å»å®˜æ–¹ç½‘ç«™ä¸‹è½½ https://chromedriver.chromium.org/</span></span><br><span class=\"line\"><span class=\"comment\"># ä¸‹è½½åï¼Œå°†å®‰è£…åŒ…åŠ å…¥åˆ°ç¯å¢ƒå˜é‡ã€‚ä»¥macç³»ç»Ÿä¸ºä¾‹ï¼Œå°†chromedriverç§»è‡³/usr/binç›®å½•ä¸‹å³å¯</span></span><br><span class=\"line\">-&gt; sudo mv ~/Downloads/chromedriver /usr/bin </span><br><span class=\"line\"><span class=\"comment\">## macOS Catalina cp: /usr/bin/xcpretty: Operation not permitted æƒé™é—®é¢˜</span></span><br><span class=\"line\"><span class=\"comment\">## macOS Catalina å­˜åœ¨ Rootlessæœºåˆ¶ï¼Œä¸å†èƒ½å¤Ÿéšå¿ƒæ‰€æ¬²çš„è¯»å†™å¾ˆå¤šè·¯å¾„</span></span><br><span class=\"line\"><span class=\"comment\">## å…³é—­ Rootlessï¼Œé‡å¯æŒ‰ä½ Command+Rï¼Œè¿›å…¥ æ¢å¤æ¨¡å¼ï¼Œæ‰“å¼€Terminal</span></span><br><span class=\"line\"><span class=\"comment\">## csrutil disable</span></span><br><span class=\"line\"><span class=\"comment\">## æ­£å¸¸å¯åŠ¨å¤åˆ¶æ–‡ä»¶</span></span><br><span class=\"line\"><span class=\"comment\">## csrutil enable</span></span><br><span class=\"line\"><span class=\"comment\">## æˆ–è€…åŠ å…¥æœ¬åœ°ç¯å¢ƒå˜é‡</span></span><br><span class=\"line\">-&gt; sudo mv ~/Downloads/chromedriver user/<span class=\"built_in\">local</span>/bin</span><br><span class=\"line\"><span class=\"comment\">## export PATH=$PATH:/usr/local/bin/chromedriver</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"Macä¸‹ä¸ªäººå·¥å…·æ¸…å•ã€‚\"><a href=\"#Macä¸‹ä¸ªäººå·¥å…·æ¸…å•ã€‚\" class=\"headerlink\" title=\"Macä¸‹ä¸ªäººå·¥å…·æ¸…å•ã€‚\"></a>Macä¸‹ä¸ªäººå·¥å…·æ¸…å•ã€‚</h3><h4 id=\"brew-1\"><a href=\"#brew-1\" class=\"headerlink\" title=\"brew\"></a>brew</h4><table>\n<thead>\n<tr>\n<th>Tool name</th>\n<th>Install command</th>\n<th>Description</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>Wget</td>\n<td>brew install  wget</td>\n<td>ä¸‹è½½å·¥å…·</td>\n</tr>\n<tr>\n<td>Curl</td>\n<td>brew install curl</td>\n<td>ä¸‹è½½å·¥å…·</td>\n</tr>\n<tr>\n<td>Diff</td>\n<td>brew install difftuils</td>\n<td>Gnu æ¯”è¾ƒå·¥å…·</td>\n</tr>\n<tr>\n<td>Find</td>\n<td>brew install findtuils</td>\n<td>Gnu æŸ¥æ‰¾å·¥å…·</td>\n</tr>\n<tr>\n<td>htop</td>\n<td>brew install stop</td>\n<td>ä»£æ›¿top</td>\n</tr>\n<tr>\n<td>Axel</td>\n<td>brew install axel</td>\n<td>å¤šçº¿ç¨‹ä¸‹è½½</td>\n</tr>\n<tr>\n<td>Tmux</td>\n<td>brew install tmux</td>\n<td>ç»ˆç«¯å¤ç”¨</td>\n</tr>\n<tr>\n<td>cloc</td>\n<td>brew install cloc</td>\n<td>ä»£ç ç»Ÿè®¡</td>\n</tr>\n<tr>\n<td>Tldr</td>\n<td>brew install tldr</td>\n<td>å‘½ä»¤æç¤ºè¡Œ</td>\n</tr>\n<tr>\n<td>Ncdu</td>\n<td>brew install ncdu</td>\n<td>ç£ç›˜ç©ºé—´å ç”¨æˆåˆ†</td>\n</tr>\n<tr>\n<td>ctop</td>\n<td>brew install stop</td>\n<td>Docker å®¹å™¨ç›‘æ§å·¥å…·</td>\n</tr>\n<tr>\n<td>Pstree</td>\n<td>brew install</td>\n<td>è¿›ç¨‹æ ‘æŸ¥çœ‹</td>\n</tr>\n<tr>\n<td>Bash-completion</td>\n<td>brew install</td>\n<td>bashè¡¥å…¨</td>\n</tr>\n<tr>\n<td>Graphviz</td>\n<td>brew install</td>\n<td>æ‹“æ‰‘å›¾ç»˜åˆ¶å·¥å…·</td>\n</tr>\n</tbody></table>\n<h4 id=\"brew-cask\"><a href=\"#brew-cask\" class=\"headerlink\" title=\"brew cask\"></a>brew cask</h4><table>\n<thead>\n<tr>\n<th>Tool name</th>\n<th>Install command</th>\n<th>Description</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>cask</td>\n<td>brew tap cask room/cask</td>\n<td>Cask</td>\n</tr>\n<tr>\n<td>Macpass</td>\n<td>brew cask install macpass</td>\n<td>å…è´¹å¯†ç ç®¡ç†</td>\n</tr>\n<tr>\n<td>docker</td>\n<td>brew cask install docker</td>\n<td>docker å¿…å¤‡</td>\n</tr>\n<tr>\n<td>Fonts</td>\n<td>brew tap cask room/fonts</td>\n<td>å­—ä½“ç®¡ç†</td>\n</tr>\n<tr>\n<td>licecap</td>\n<td>brew cask install licecap</td>\n<td>å½•å±è½¯ä»¶</td>\n</tr>\n<tr>\n<td>Kap</td>\n<td>brew cask install kap</td>\n<td>è§†é¢‘å½•å±</td>\n</tr>\n<tr>\n<td>sequel pro</td>\n<td>brew cask install sequel pro</td>\n<td>æ•°æ®åº“ç®¡ç†</td>\n</tr>\n</tbody></table>\n<h3 id=\"tencent-lemonï¼ˆMacï¼‰\"><a href=\"#tencent-lemonï¼ˆMacï¼‰\" class=\"headerlink\" title=\"tencent-lemonï¼ˆMacï¼‰\"></a>tencent-lemonï¼ˆMacï¼‰</h3><ul>\n<li>è…¾è®¯æŸ æª¬æ¸…ç†ï¼ŒåŸºæœ¬å¯¹æ ‡çš„å°±æ˜¯ CleanMyMac</li>\n</ul>\n<h3 id=\"æ€»ç»“\"><a href=\"#æ€»ç»“\" class=\"headerlink\" title=\"æ€»ç»“\"></a>æ€»ç»“</h3><ul>\n<li>ä¿ä¸é½é‚£å¤©å°±åˆç”¨ä¸Šäº†ã€‚</li>\n</ul>\n<p>END</p>\n","categories":["å¼€å‘ç¯å¢ƒ"],"tags":["Mac"]},{"title":"å®è·µ-log4jçš„ä½¿ç”¨ï¼ˆä¸€ï¼‰","url":"/posts/3823874998/","content":"<blockquote>\n<p>æœ¬ç« å†…å®¹é˜è¿°ä¸ªäººç†è§£ï¼Œä»¥åŠä½¿ç”¨æ–¹æ³•ã€‚è‹¥æœ‰ä¸æ­£ç¡®çš„å†…å®¹æ¬¢è¿æ–§æ­£ã€‚ç¡è§‰ä¹‹å‰èµ¶å¿«è®°å½•ä¸‹æ¥å…å¾—æœ‰å¿˜è®°äº†ã€‚</p>\n</blockquote>\n<h4 id=\"ä»€ä¹ˆæ˜¯Log\"><a href=\"#ä»€ä¹ˆæ˜¯Log\" class=\"headerlink\" title=\"ä»€ä¹ˆæ˜¯Log?\"></a>ä»€ä¹ˆæ˜¯Log?</h4><ul>\n<li>æ—¥å¿—è®°å½•çš„æ˜¯ä»€ä¹ˆï¼Ÿå¸‚é¢ä¸Šæµè¡Œçš„è½¯ä»¶åŸºæœ¬éƒ½æœ‰æ—¥å¿—è®°å½•åŠŸèƒ½ï¼Œä½œä¸ºå¼€å‘äººå‘˜çš„å¥½å¸®æ‰‹ã€‚æ—¥å¿—å¯ä»¥æœ‰æ•ˆçš„è®°å½•ç¨‹åºè¿è¡Œçš„çŠ¶æ€ä»¥åŠè¿è¡Œçš„å¼‚å¸¸ï¼Œæ¯”å¦‚è¯´æ“ä½œç³»ç»Ÿè“å±äº†ã€æ‰‹æœºæ­»æœºäº†ã€è½¯ä»¶å¡æ­»ã€ç¨‹åºå´©æºƒã€å†™äº†BUGç­‰ç­‰éƒ½ä¼šæœ‰å¯¹åº”çš„æ—¥å¿—ç•™ä¸‹ã€‚</li>\n</ul>\n<h4 id=\"å¦‚ä½•åˆ©ç”¨logï¼Ÿ\"><a href=\"#å¦‚ä½•åˆ©ç”¨logï¼Ÿ\" class=\"headerlink\" title=\"å¦‚ä½•åˆ©ç”¨logï¼Ÿ\"></a>å¦‚ä½•åˆ©ç”¨logï¼Ÿ</h4><ul>\n<li>ç¬”è€…æ˜¯ä¸€ä¸ªJavaå¼€å‘äººå‘˜ï¼Œæœ¬ç« å†…å®¹ä»£ç éƒ¨åˆ†å·²Javaä»£ç ç”¨ä¾‹ã€‚å¤§å®¶éƒ½çŸ¥é“æ—¥å¿—éå¸¸é‡è¦ï¼Œä½†æ˜¯ç»éªŒä¸è¶³çš„å¼€å‘äººå‘˜å¾€å¾€å¿½è§†äº†è¿™ä¸ªé‡è¦çš„æ‰‹æ®µï¼Œæ¯”å¦‚åœ¨æ§åˆ¶å°è¾“å‡ºæ—¥å¿—ï¼Œæ‰€æœ‰è¾“å‡ºä¿¡æ¯éƒ½é›†ä¸­åœ¨ä¸€èµ·ã€‚æ’é™¤é—®é¢˜éå¸¸å›°éš¾ï¼Œä¸€æ—¦å‡ºç°äº†çº¿ä¸Šå¼‚å¸¸ä¿¡æ¯é¦–å…ˆè¦çœ‹çš„å°±æ˜¯æ—¥å¿—ä¿¡æ¯ã€‚æ‰€ä»¥æœ‰å¿…è¦å°±æ—¥å¿—æ‰‹æ®µå¤šäº†è§£ä¸‹ã€‚</li>\n</ul>\n<a id=\"more\"></a>\n\n<h4 id=\"æˆ‘æ˜¯å¦‚ä½•æ“ä½œçš„ï¼Ÿ\"><a href=\"#æˆ‘æ˜¯å¦‚ä½•æ“ä½œçš„ï¼Ÿ\" class=\"headerlink\" title=\"æˆ‘æ˜¯å¦‚ä½•æ“ä½œçš„ï¼Ÿ\"></a>æˆ‘æ˜¯å¦‚ä½•æ“ä½œçš„ï¼Ÿ</h4><ul>\n<li>æœ€åœ¨å¼€å‘ä¸€ä¸ªå®¢æˆ·ç«¯åº”ç”¨ï¼Œå¹¶ä¸æ˜¯GUIé‚£ç§ç¨‹åºã€‚åŠŸèƒ½ä¸å¤šä½†æ˜¯æ—¥å¿—ä¿¡æ¯å´å¾ˆå¤šï¼Œå¾ªç¯ç›‘æ§æ•°æ®ï¼Œæ‰€ä»¥è¿è¡ŒæœŸäº§ç”Ÿçš„æ—¥å¿—ä¹Ÿæœ‰ç‚¹å¤šï¼Œå¼€å‘çš„æ—¶å€™æ¯•ç«Ÿç®€å•è°ƒè¯•è¿˜èƒ½æ¥å—ï¼Œè¿è¡Œèµ·æ¥æ—¥å¿—è¿‡äºé›†ä¸­çœ¼ç›ç–¼ï¼Œä¸ºäº†æ–¹ä¾¿è°ƒè¯•ä»¥åŠæ’é™¤é—®é¢˜ï¼Œè€ƒè™‘å…ˆå°†æ—¥å¿—ç»æ‹†åˆ†ã€‚ä¸åŒä¸šåŠ¡æˆ–è€…ç±»å‹ä½¿ç”¨ä¸åŒçš„logæ–‡ä»¶æ¥è®°å½•ã€‚</li>\n</ul>\n<h4 id=\"ç”¨ä¾‹\"><a href=\"#ç”¨ä¾‹\" class=\"headerlink\" title=\"ç”¨ä¾‹\"></a>ç”¨ä¾‹</h4><ul>\n<li><p>è¿™é‡Œç®€å•çš„æ¼”ç¤ºä¸‹å¦‚ä½•å°†æ—¥å¿—ä¿¡æ¯æ‹†åˆ†åˆ°ä¸åŒçš„æ–‡ä»¶ä¸­ã€‚</p>\n<blockquote>\n<p>æ·»åŠ æ—¥å¿—ä¾èµ–</p>\n</blockquote>\n</li>\n</ul>\n<figure class=\"highlight xml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">          <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>org.slf4j<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">          <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>slf4j-api<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">          <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>1.7.21<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">          <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>org.slf4j<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">          <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>slf4j-log4j12<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">          <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>1.7.21<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">          <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>log4j<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">          <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>log4j<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">          <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>1.2.17<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>è¿™é‡Œè§£é‡Šä¸‹ä¸ºä»€ä¹ˆæ˜¯log4jè€Œä¸æ˜¯å…¶ä»–çš„æ—¥å¿—æ¡†æ¶ï¼Œå› ä¸ºä¾èµ–çš„æŸä¸ªåŸºç¡€åº“æ˜¯ä½¿ç”¨log4jæˆ‘ä¹Ÿæ‡’çš„å»æŠ˜è…¾å°±ç”¨è¿™ä¸ªå§ã€‚</p>\n</blockquote>\n<ul>\n<li>log4jé…ç½®æ–‡ä»¶<code>Log4jé…ç½®æ–‡ä»¶ï¼ˆConfigreation Fileï¼‰å°±æ˜¯è®°å½•å™¨çº§åˆ«ã€å­˜æ”¾ä½ç½®ã€å¸ƒå±€ç­‰ç­‰ã€‚é€šè¿‡è¯¥é…ç½®æ–‡ä»¶æˆ‘ä»¬å¯ä»¥åˆ›å»ºlog4jçš„è¿è¡Œç¯å¢ƒ</code>ä¸‹é¢æ¼”ç¤ºåŸºç¡€çš„é…ç½®ä¿¡æ¯ã€‚</li>\n</ul>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\">log4j.debug=<span class=\"keyword\">false</span></span><br><span class=\"line\">## æ§åˆ¶å°è¾“å‡º</span><br><span class=\"line\">log4j.appender.stdoutAppender=org.apache.log4j.ConsoleAppender</span><br><span class=\"line\">log4j.appender.stdoutAppender.layout=org.apache.log4j.PatternLayout</span><br><span class=\"line\">log4j.appender.stdoutAppender.layout.ConversionPattern=%d&#123;yyyy-MM-dd HH:mm:ss&#125; %-<span class=\"number\">5</span>p %c&#123;<span class=\"number\">3</span>&#125; - %m%n</span><br><span class=\"line\"></span><br><span class=\"line\">## The log level may be one of OFF, FATAL, ERROR, WARN, INFO,</span><br><span class=\"line\">## DEBUG, or ALL. The default level is defined as the first</span><br><span class=\"line\">## element in the list of values for the log4j.rootLogger</span><br><span class=\"line\">## property.</span><br><span class=\"line\">##</span><br><span class=\"line\"># æŒ‡å®špackage</span><br><span class=\"line\">log4j.logger.z201.github.io.code.log.log4j = ALL , stdoutAppender</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><p>ç®€å•çš„è§£é‡Šä¸‹ä¸Šé¢çš„é…ç½®ä¿¡æ¯</p>\n<ul>\n<li><code>log4j.appender.stdoutAppender=org.apache.log4j.ConsoleAppender</code>å…¶ä¸­<code>stdoutAppender</code>ç®€å•çš„ç†è§£å¯ä»¥ç†è§£ä¸ºæ—¥å¿—<strong>Logger</strong> çš„æ ‡è¯†ã€<code>ConsoleAppender</code>å°±æ˜¯æ—¥å¿—çš„è¾“å‡ºåœ°æ–¹ã€‚</li>\n<li><code>log4j.appender.stdoutAppender.layout=org.apache.log4j.PatternLayout</code>å…¶ä¸­layoutæ˜¯å¸ƒå±€,ä½¿ç”¨<code>org.apache.log4j.PatternLayout</code>æ¥åšå¸ƒå±€ã€‚</li>\n<li><code>log4j.appender.stdoutAppender.layout.ConversionPattern=%d{yyyy-MM-dd HH:mm:ss} %-5p %c{3} - %m%n</code>è¿™ä¸ªå°±æ˜¯å¸ƒå±€çš„è¾“å‡ºæ ¼å¼äº†ã€‚</li>\n<li><code>log4j.logger.z201.github.io.code.log.log4j = ALL , stdoutAppender</code>æŒ‡å®šç¨‹åºpackageä½¿ç”¨çš„logï¼Œå¹¶ä¸”æŒ‡å®šæ—¥å¿—çº§åˆ«ALLå…¨éƒ¨è¾“å‡ºã€‚  </li>\n<li>è¿™é‡Œç®€å•ä»‹ç»ä¸‹log4jæ—¥å¿—çº§åˆ«</li>\n</ul>\n</li>\n<li><p>Javaç”¨ä¾‹ä»£ç </p>\n</li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">package z201.github.io.code.log.log4j;</span><br><span class=\"line\"></span><br><span class=\"line\">import org.junit.Test;</span><br><span class=\"line\">import org.slf4j.Logger;</span><br><span class=\"line\">import org.slf4j.LoggerFactory;</span><br><span class=\"line\"></span><br><span class=\"line\">public class TestLog4j &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    private static Logger log &#x3D; LoggerFactory.getLogger(TestLog4j.class);</span><br><span class=\"line\"></span><br><span class=\"line\">    @Test</span><br><span class=\"line\">    public void test01()&#123;</span><br><span class=\"line\">        log.info(&quot;log info&quot;);</span><br><span class=\"line\">        log.error(&quot;log error&quot;);</span><br><span class=\"line\">        log.warn(&quot;log warn&quot;);</span><br><span class=\"line\">        log.trace(&quot;log trace&quot;);</span><br><span class=\"line\">        log.debug(&quot;log debug&quot;);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>ç”±äºæ—¥å¿—çº§åˆ«æ˜¯<code>ALL</code>æ‰€ä»¥éƒ½ä¼šè¾“å‡ºã€‚</li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">2018-06-13 00:05:13 INFO  log.log4j.TestLog4j - log info</span><br><span class=\"line\">2018-06-13 00:05:13 ERROR log.log4j.TestLog4j - log error</span><br><span class=\"line\">2018-06-13 00:05:13 WARN  log.log4j.TestLog4j - log warn</span><br><span class=\"line\">2018-06-13 00:05:13 TRACE log.log4j.TestLog4j - log trace</span><br><span class=\"line\">2018-06-13 00:05:13 DEBUG log.log4j.TestLog4j - log debug</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"å°è¯•æ”¹é€ æ‹†åˆ†æ—¥å¿—\"><a href=\"#å°è¯•æ”¹é€ æ‹†åˆ†æ—¥å¿—\" class=\"headerlink\" title=\"å°è¯•æ”¹é€ æ‹†åˆ†æ—¥å¿—\"></a>å°è¯•æ”¹é€ æ‹†åˆ†æ—¥å¿—</h4><blockquote>\n<p>ä¸åŒçš„æ—¥å¿—çº§åˆ«è¾“å‡ºåˆ°ä¸åŒçš„æ—¥å¿—æ–‡ä»¶ä¸­ã€‚ç®€å•ä»‹ç»ä¸‹æ—¥å¿—çº§åˆ«LEVELï¼šOFFï¼ˆå…³é—­ï¼‰FATALï¼ˆè‡´å‘½çš„ï¼‰ ERRORï¼ˆé”™è¯¯ï¼‰WARNï¼ˆè­¦å‘Šï¼‰ INFOï¼ˆä¿¡æ¯ï¼‰DEBUG ï¼ˆè°ƒè¯•ï¼‰ ALLï¼ˆæ‰€æœ‰ï¼‰ è¾“å‡ºæ—¥å¿—çš„ç­–ç•¥æ˜¯ç”±LEVELå†³å®šçš„ã€‚</p>\n</blockquote>\n<ul>\n<li>ä¿®æ”¹log4jé…ç½®æ–‡ä»¶</li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">log4j.debug&#x3D;false</span><br><span class=\"line\">## æ§åˆ¶å°è¾“å‡º</span><br><span class=\"line\">log4j.appender.stdoutAppender&#x3D;org.apache.log4j.ConsoleAppender</span><br><span class=\"line\">log4j.appender.stdoutAppender.layout&#x3D;org.apache.log4j.PatternLayout</span><br><span class=\"line\">log4j.appender.stdoutAppender.layout.ConversionPattern&#x3D;%d&#123;yyyy-MM-dd HH:mm:ss&#125; %-5p %c&#123;3&#125; - %m%n</span><br><span class=\"line\"></span><br><span class=\"line\">#infoæ—¥å¿—ä¿¡æ¯</span><br><span class=\"line\">log4j.logger.infoFile&#x3D;INFO,infoFile</span><br><span class=\"line\">log4j.appender.infoFile&#x3D;org.apache.log4j.RollingFileAppender</span><br><span class=\"line\">log4j.appender.infoFile.Append&#x3D;true</span><br><span class=\"line\">log4j.appender.infoFile.File&#x3D;logs&#x2F;infoFile.log</span><br><span class=\"line\">log4j.appender.infoFile.encoding&#x3D;UTF-8</span><br><span class=\"line\">log4j.appender.infoFile.maxBackupIndex&#x3D;30</span><br><span class=\"line\">log4j.appender.infoFile.MaxFileSize&#x3D;15MB</span><br><span class=\"line\">log4j.appender.infoFile.Threshold&#x3D;INFO</span><br><span class=\"line\">log4j.appender.infoFile.FILE.DatePattern&#x3D;&#39;.&#39;yyyy-MM-dd-HH-mm&#39;.log&#39;</span><br><span class=\"line\">log4j.appender.infoFile.layout&#x3D;org.apache.log4j.PatternLayout</span><br><span class=\"line\">log4j.appender.infoFile.layout.ConversionPattern&#x3D;%d&#123;yyyy-MM-dd HH:mm:ss&#125; [%5p] - %F(%L) - %m%n</span><br><span class=\"line\"></span><br><span class=\"line\">#erroræ—¥å¿—ä¿¡æ¯</span><br><span class=\"line\">log4j.logger.errorFile&#x3D;ERROR,errorFile</span><br><span class=\"line\">log4j.appender.errorFile&#x3D;org.apache.log4j.RollingFileAppender</span><br><span class=\"line\">log4j.appender.errorFile.Append&#x3D;true</span><br><span class=\"line\">log4j.appender.errorFile.File&#x3D;logs&#x2F;errorFile.log</span><br><span class=\"line\">log4j.appender.errorFile.encoding&#x3D;UTF-8</span><br><span class=\"line\">log4j.appender.errorFile.maxBackupIndex&#x3D;30</span><br><span class=\"line\">log4j.appender.errorFile.MaxFileSize&#x3D;15MB</span><br><span class=\"line\">log4j.appender.errorFile.Threshold&#x3D;ERROR</span><br><span class=\"line\">log4j.appender.errorFile.FILE.DatePattern&#x3D;&#39;.&#39;yyyy-MM-dd&#39;.log&#39;</span><br><span class=\"line\">log4j.appender.errorFile.layout&#x3D;org.apache.log4j.PatternLayout</span><br><span class=\"line\">log4j.appender.errorFile.layout.ConversionPattern&#x3D;%d&#123;yyyy-MM-dd HH:mm:ss&#125; [%5p] | %m%n</span><br><span class=\"line\"></span><br><span class=\"line\">## The log level may be one of OFF, FATAL, ERROR, WARN, INFO,</span><br><span class=\"line\">## DEBUG, or ALL. The default level is defined as the first</span><br><span class=\"line\">## element in the list of values for the log4j.rootLogger</span><br><span class=\"line\">## property.</span><br><span class=\"line\">##</span><br><span class=\"line\"># system logs</span><br><span class=\"line\">log4j.logger.z201.github.io.code.log.log4j&#x3D;ALL , infoFile , errorFile ,  stdoutAppender</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>å†æ¬¡ç®€å•è§£é‡Šä¸‹é…ç½®çš„logger<code>errorFile å’Œ infoFile</code>è¿™æ˜¯ä¸¤ä¸ªæ–‡ä»¶è¾“å‡ºã€‚<ul>\n<li>Append æ˜¯å¦è¿è¡Œè¿½åŠ å†…å®¹ã€‚</li>\n<li>File æ–‡ä»¶å­˜æ”¾åœ°å€</li>\n<li>encoding æ—¥å¿—ç¼–ç é›†</li>\n<li>maxBackupIndex æœ€å¤§å­˜å‚¨æ–‡ä»¶ä¸ªæ•°</li>\n<li>MaxFileSize å•ä¸ªæ–‡ä»¶æœ€å¤§å¤§å°</li>\n<li>Threshold è¾“å‡ºçº§åˆ«</li>\n<li>FILE.DatePattern åˆ‡å‰²æ—¥å¿—çš„æ—¶å€™æ–‡ä»¶åç§°æ ¼å¼åŒ–</li>\n</ul>\n</li>\n<li>ä¾ç„¶æ˜¯è¿è¡Œä¸Šé¢çš„Javaä»£ç ï¼Œé™¤äº†æ§åˆ¶å°ä¼šè¾“å‡ºæ—¥å¿—è¿˜ä¼šç”Ÿæˆä¸¤ä¸ªæ—¥å¿—æ–‡ä»¶ infoFileã€errorFileã€‚ä¾æ¬¡çœ‹ä¸‹æ—¥å¿—æ–‡ä»¶ä¸­çš„å†…å®¹ã€‚</li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\"># æ–‡ä»¶ infoFile.log</span><br><span class=\"line\">2018-06-13 00:12:40 [ INFO] - TestLog4j.java(13) - log info</span><br><span class=\"line\">2018-06-13 00:12:40 [ERROR] - TestLog4j.java(14) - log error</span><br><span class=\"line\">2018-06-13 00:12:40 [ WARN] - TestLog4j.java(15) - log warn</span><br></pre></td></tr></table></figure>\n\n<hr>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\"># æ–‡ä»¶ errorFile.log</span><br><span class=\"line\">2018-06-13 00:12:40 [ERROR] | log error</span><br></pre></td></tr></table></figure>\n\n<p>è¿™é‡Œæœ‰ä¸€ä¸ªç–‘é—®ä¸ºä»€ä¹ˆinfoFileé‡Œé¢è¾“å‡ºçš„å†…å®¹å¤šç‚¹ã€‚è¿™ä¾ç„¶å’Œæ—¥å¿—çš„LEVELæœ‰å…³ç³»ï¼Œç”±äºINFOçº§åˆ«å¤§å°çš„é—®é¢˜ï¼ŒINFOçº§åˆ«çš„æ—¥å¿—ä¼šè¾“å‡ºåˆ«å®ƒå¤§çš„çº§åˆ«æ—¥å¿—ã€‚ä¹Ÿå°±æ˜¯è®¾ç½®æˆINFOçš„æ—¶å€™ä¼šè¾“å‡º WARN ã€ERRORã€FATALã€‚è€Œä¸”log4jå»ºè®®ä½¿ç”¨ DEBUGã€INFOã€WARNã€ERRORè¿™å››ç§ã€‚</p>\n<h4 id=\"è¡¥å……ä¸€ç‚¹å†…å®¹\"><a href=\"#è¡¥å……ä¸€ç‚¹å†…å®¹\" class=\"headerlink\" title=\"è¡¥å……ä¸€ç‚¹å†…å®¹\"></a>è¡¥å……ä¸€ç‚¹å†…å®¹</h4><p>å®é™…ä¸Šæ—¥å¿—çš„æ‹†åˆ†æˆ‘ä»¬å·²ç»å¤§æ¦‚ç›®çš„äº†ï¼Œç°åœ¨è¡¥å……ä¸‹å…¶ä»–çš„<code>Appenders</code>ä¾¿äºå‚è€ƒä¸šåŠ¡åœºæ™¯ä½¿ç”¨ã€‚</p>\n<ul>\n<li>org.apache.log4j.ConsoleAppenderï¼ˆæ§åˆ¶å°ï¼‰ org.apache.log4j.FileAppenderï¼ˆæ–‡ä»¶ï¼‰ </li>\n<li>org.apache.log4j.DailyRollingFileAppenderï¼ˆæ¯å¤©äº§ç”Ÿä¸€ä¸ªæ—¥å¿—æ–‡ä»¶ï¼‰ </li>\n<li>org.apache.log4j.RollingFileAppenderï¼ˆæ–‡ä»¶å¤§å°åˆ°è¾¾æŒ‡å®šå°ºå¯¸çš„æ—¶å€™äº§ç”Ÿä¸€ä¸ªæ–°çš„æ–‡ä»¶ï¼‰ </li>\n<li>org.apache.log4j.WriterAppenderï¼ˆå°†æ—¥å¿—ä¿¡æ¯ä»¥æµæ ¼å¼å‘é€åˆ°ä»»æ„æŒ‡å®šçš„åœ°æ–¹ï¼‰ </li>\n</ul>\n<p>è¿˜æœ‰ <code>Layouts</code>çš„ä½¿ç”¨ï¼Œåˆ—ä¸¾ä¸‹ã€‚</p>\n<ul>\n<li>org.apache.log4j.HTMLLayoutï¼ˆä»¥HTMLè¡¨æ ¼å½¢å¼å¸ƒå±€ï¼‰ </li>\n<li>org.apache.log4j.PatternLayoutï¼ˆå¯ä»¥çµæ´»åœ°æŒ‡å®šå¸ƒå±€æ¨¡å¼ï¼‰ </li>\n<li>org.apache.log4j.SimpleLayoutï¼ˆåŒ…å«æ—¥å¿—ä¿¡æ¯çš„çº§åˆ«å’Œä¿¡æ¯å­—ç¬¦ä¸²ï¼‰ </li>\n<li>org.apache.log4j.TTCCLayoutï¼ˆåŒ…å«æ—¥å¿—äº§ç”Ÿçš„æ—¶é—´ã€çº¿ç¨‹ã€ç±»åˆ«ç­‰ä¿¡æ¯ï¼‰ </li>\n</ul>\n<p>ç®€å•çš„æ‹†åˆ†æ—¥å¿—å°±åˆ°è¿™é‡Œäº†ï¼Œlog4jåœ¨æ—¥å¸¸å¼€å‘ä¸­éå¸¸é‡è¦ã€‚ç¡®å®ä¸åº”è¯¥å¿½è§†å®ƒçš„å­˜åœ¨ï¼Œåº”è¯¥æ­£ç¡®çš„ä½¿ç”¨ã€‚</p>\n<h4 id=\"END\"><a href=\"#END\" class=\"headerlink\" title=\"END\"></a>END</h4>","categories":["å®è·µ"],"tags":["Java","Log4j"]},{"title":"åˆæ¢Modbus","url":"/posts/1103815643/","content":"<blockquote>\n<p>æœ¬ç« æ˜¯æ•´ç†çŸ¥è¯†å†…å®¹ï¼Œä¸ºå¼ºåŒ–çŸ¥è¯†é•¿æœŸæ›´æ–°ã€‚</p>\n<p>ä»¥ä¸‹éƒ¨åˆ†è¶…é“¾æ¥éœ€è¦ç§‘å­¦ä¸Šç½‘ã€‚</p>\n</blockquote>\n<h2 id=\"ModBus\"><a href=\"#ModBus\" class=\"headerlink\" title=\"ModBus\"></a>ModBus</h2><p>modbusæ˜¯ä¸€ç§é€šè®¯åè®®ï¼Œæ˜¯Modiconå…¬å¸1979å¹´ä¸ºä½¿ç”¨å¯ç¼–ç¨‹é€»è¾‘æ§åˆ¶å™¨ï¼ˆPLCï¼‰é€šè®¯è€Œå‘è¡¨ã€‚Modbusæ˜¯å·¥ä¸šé¢†åŸŸé€šè®¯åè®®çš„ä¸šç•Œæ ‡å‡†ä¹‹ä¸€ï¼Œç›®å‰ä¹Ÿæˆ‘å›½å›½å®¶æ ‡å‡†å·¥ä¸šé€šè®¯åè®®ä¸­çš„é‡è¦æˆå‘˜ä¹‹ä¸€ã€‚</p>\n<h3 id=\"ä»‹ç»\"><a href=\"#ä»‹ç»\" class=\"headerlink\" title=\"ä»‹ç»\"></a>ä»‹ç»</h3><ul>\n<li><p>Modbusé‡‡ç”¨ä¸»ä»ï¼ˆMaster-Salveï¼‰é€šä¿¡æ¨¡å¼ï¼Œä»…æœ‰ä¸»è®¾å¤‡ï¼ˆMasterï¼‰èƒ½å¯¹ä¼ è¾“è¿›è¡Œåˆå§‹åŒ–ï¼Œä»è®¾å¤‡ï¼ˆSlaveï¼‰æ ¹æ®ä¸»è®¾å¤‡çš„è¯·æ±‚è¿›è¡Œåº”ç­”ã€‚ __åœ¨ä¸»ä»å…³ç³»ä¸­ï¼Œé€šä¿¡æ€»æ˜¯æˆå¯¹å‘ç”Ÿã€‚ä¸€ä¸ªè®¾å¤‡å¿…é¡»å‘èµ·è¯·æ±‚ï¼Œç„¶åç­‰å¾…å“åº” - å¹¶ä¸”å‘èµ·è®¾å¤‡ï¼ˆä¸»è®¾å¤‡ï¼‰è´Ÿè´£å‘èµ·æ¯æ¬¡äº¤äº’ã€‚ é€šå¸¸ï¼Œä¸»è®¾å¤‡æ˜¯äººæœºç•Œé¢ï¼ˆHMIï¼‰æˆ–ç›‘æ§å’Œæ•°æ®é‡‡é›†ï¼ˆSCADAï¼‰ç³»ç»Ÿï¼Œä»è®¾å¤‡æ˜¯ä¼ æ„Ÿå™¨ã€å¯ç¼–ç¨‹é€»è¾‘æ§åˆ¶å™¨ï¼ˆPLCï¼‰æˆ–å¯ç¼–ç¨‹è‡ªåŠ¨åŒ–æ§åˆ¶å™¨ï¼ˆPACï¼‰ã€‚ è¿™äº›è¯·æ±‚å’Œå“åº”çš„å†…å®¹ä»¥åŠå‘é€è¿™äº›æ¶ˆæ¯çš„ç½‘ç»œå±‚ç”±åè®®çš„ä¸åŒå±‚æ¥å®šä¹‰__ã€‚ </p>\n<ul>\n<li>åœ¨ä¸²è¡Œé“¾è·¯çš„ä¸»ä»é€šä¿¡ä¸­ï¼ŒModbusä¸»è®¾å¤‡å¯ä»¥è¿æ¥ä¸€ä¸ªæˆ–Nï¼ˆæœ€å¤§ä¸º247ï¼‰ä¸ªä»è®¾å¤‡ï¼Œä¸»ä»è®¾å¤‡ä¹‹é—´çš„é€šä¿¡åŒ…æ‹¬å•æ’­æ¨¡å¼å’Œå¹¿æ’­æ¨¡å¼ã€‚ </li>\n<li>åœ¨å¹¿æ’­æ¨¡å¼ä¸­ï¼ŒModbusä¸»è®¾å¤‡å¯åŒæ—¶å‘å¤šä¸ªä»è®¾å¤‡å‘é€è¯·æ±‚ï¼ˆè®¾å¤‡åœ°å€0ç”¨äºå¹¿æ’­æ¨¡å¼ï¼‰ï¼Œä»è®¾å¤‡å¯¹å¹¿æ’­è¯·æ±‚ä¸è¿›è¡Œå“åº”ã€‚ </li>\n<li>åœ¨å•æ’­æ¨¡å¼ä¸­ï¼Œä¸»è®¾å¤‡å‘é€è¯·æ±‚è‡³æŸä¸ªç‰¹å®šçš„ä»è®¾å¤‡ï¼ˆæ¯ä¸ªModbusä»è®¾å¤‡å…·æœ‰å”¯ä¸€åœ°å€ï¼‰ï¼Œè¯·æ±‚çš„æ¶ˆæ¯å¸§ä¸­ä¼šåŒ…å«åŠŸèƒ½ä»£ç å’Œæ•°æ®ï¼Œæ¯”å¦‚åŠŸèƒ½ä»£ç â€œ01â€ç”¨æ¥è¯»å–ç¦»æ•£é‡çº¿åœˆçš„çŠ¶æ€ã€‚ä»è®¾å¤‡æ¥åˆ°è¯·æ±‚åï¼Œè¿›è¡Œåº”ç­”å¹¶æŠŠæ¶ˆæ¯åé¦ˆä¸»è®¾å¤‡ã€‚ </li>\n<li>__ä¸»è®¾å¤‡ä¸å‘é€æ•°æ®ï¼Œä»æ•°æ®æ˜¯ä¸ä¼šè‡ªå·±å‘å‡ºæ•°æ®çš„ï¼›å³å¿…é¡»æ˜¯ä¸»è®¾å¤‡å‘å‡ºæŸ¥è¯¢è¯·æ±‚æ‰èƒ½å»ºç«‹é€šè®¯ã€‚ __</li>\n</ul>\n</li>\n<li><p>æ¶ˆæ¯å¸§æ ¡éªŒæ–¹å¼</p>\n<ul>\n<li>ASCIIæ¶ˆæ¯å¸§ï¼š<code>LRCï¼ˆçºµå‘å†—é•¿æ£€æµ‹ï¼‰</code></li>\n<li>CRCiæ¶ˆæ¯å¸§ï¼š<code>CRC(å¾ªç¯å†—é•¿æ£€æµ‹)</code></li>\n</ul>\n</li>\n<li><p>ModBusæ˜¯OSIæ¨¡å‹ç¬¬ä¸ƒå±‚ä¸Šå³__åº”ç”¨å±‚__æŠ¥æ–‡ä¼ è¾“åè®®ã€‚</p>\n</li>\n<li><p>ModBusæ”¯æŒå¤šå·¥ä¸šè®¾å¤‡ã€åŒ…æ‹¬<code>PLC</code>ã€<code>DSC</code>ã€<code>å˜é¢‘å™¨</code>ã€æ™ºèƒ½ä»ªè¡¨ç­‰éƒ½åœ¨åº”ç”¨ã€‚</p>\n</li>\n<li><p>ModBusæ”¯æŒå¤šç§ç”µæ°”æ¥å£ï¼Œå¦‚<code>RS-232</code>ã€<code>RS-485</code>ç­‰ï¼Œè¿˜å¯ä»¥åœ¨å„ç§ä»‹è´¨ä¸Šä¼ é€ï¼Œå¦‚åŒç»çº¿ã€å…‰çº¤ã€æ— çº¿ã€‚</p>\n</li>\n<li><p>ModBusåè®®å®Œå…¨å…è´¹ï¼›<code>å¸§æ ¼å¼</code>ç®€å•ï¼Œç´§å‡‘ã€‚</p>\n</li>\n<li><p>ModBuså¯¹çº¿ç¼†çš„è¦æ±‚ã€é•¿åº¦ã€æ³¢ç‰¹ç‡ï¼Œç»ˆç«¯ç”µé˜»ï¼Œæ¥åœ°ï¼Œè¿æ¥å™¨ï¼Œé€šä¿¡çŠ¶æ€çš„LEDæŒ‡ç¤ºï¼Œéƒ½æœ‰ç”µæ°”æ ‡å‡†ã€‚</p>\n</li>\n<li><p>ModBusæ•°æ®å¯ä»¥åˆ†ä¸ºä¸¤å¤§ç±»ï¼Œåˆ†åˆ«ä¸ºCoilå’ŒRegisterï¼Œæ¯ä¸€ç§æ•°æ®ï¼Œæ ¹æ®è¯»å†™æ–¹å¼çš„ä¸åŒï¼Œåˆå¯ç»†åˆ†ä¸ºä¸¤ç§ï¼ˆåªè¯»ï¼Œè¯»å†™ï¼‰ã€‚ </p>\n<ul>\n<li>Coliæ˜¯ä½ï¼ˆbitï¼‰å˜é‡ã€‚</li>\n<li>Registeræ˜¯æ•´å‹ï¼ˆword ,å³ 16 - bit ï¼‰ã€‚</li>\n</ul>\n</li>\n</ul>\n<table>\n<thead>\n<tr>\n<th>Primary tabels</th>\n<th>Object Type</th>\n<th>Type Of</th>\n<th>comments</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>Discretes Input ç¦»çº¿è¾“å…¥é‡</td>\n<td>Single bit</td>\n<td>åªè¯»</td>\n<td>IOç³»ç»Ÿæä¾›è¿™ç§ç±»å‹çš„æ•°æ®</td>\n</tr>\n<tr>\n<td>Coils çº¿åœˆ</td>\n<td>Single bit</td>\n<td>åªå†™</td>\n<td>é€šç”¨åº”ç”¨ç¨‹åºæ”¹å˜è¿™ç§ç±»å‹çš„æ•°æ®</td>\n</tr>\n<tr>\n<td>Input Registers  è¾“å…¥å¯„å­˜å™¨</td>\n<td>16-bit word</td>\n<td>åªè¯»</td>\n<td>IOç³»ç»Ÿæä¾›è¿™ç§ç±»å‹çš„æ•°æ®</td>\n</tr>\n<tr>\n<td>Holding Registers ä¿æŒå¯„å­˜å™¨</td>\n<td>16-bit word</td>\n<td>åªå†™</td>\n<td>é€šç”¨åº”ç”¨ç¨‹åºæ”¹å˜è¿™ç§ç±»å‹çš„æ•°æ®</td>\n</tr>\n</tbody></table>\n<a id=\"more\"></a>\n\n<h4 id=\"å…³é”®å­—æ¦‚è¿°\"><a href=\"#å…³é”®å­—æ¦‚è¿°\" class=\"headerlink\" title=\"å…³é”®å­—æ¦‚è¿°\"></a>å…³é”®å­—æ¦‚è¿°</h4><ul>\n<li><p><a href=\"https://zh.wikipedia.org/wiki/OSI%E6%A8%A1%E5%9E%8B\" target=\"_blank\" rel=\"noopener\">OSIæ¨¡å‹</a></p>\n<ul>\n<li>å¼€æ”¾å¼ç³»ç»Ÿäº’è”ç½‘é€šè®¯å‚è€ƒæ¨¡å‹ï¼Œä¹Ÿå°±æ˜¯å¸¸è¯´çš„OSIä¸ƒå±‚é€šè®¯æ¨¡å‹ã€‚</li>\n</ul>\n</li>\n<li><p><a href=\"https://zh.wikipedia.org/wiki/PLC\" target=\"_blank\" rel=\"noopener\">PLC</a></p>\n<ul>\n<li>è¿™é‡Œçš„PLCæ˜¯æŒ‡ï¼š<code>å¯ç¼–ç¨‹é€»è¾‘æ§åˆ¶å™¨</code>ï¼Œä¸€ç§å…·æœ‰å¾®å¤„ç†å™¨çš„æ•°ä½é€»è¾‘æ§åˆ¶å™¨ï¼Œç”¨æˆ·è‡ªåŠ¨åŒ–æ§åˆ¶ã€‚å…³äº<a href=\"https://zh.wikipedia.org/wiki/%E5%8F%AF%E7%BC%96%E7%A8%8B%E9%80%BB%E8%BE%91%E6%8E%A7%E5%88%B6%E5%99%A8\" target=\"_blank\" rel=\"noopener\">å¯ç¼–ç¨‹é€»è¾‘æ§åˆ¶å™¨</a></li>\n</ul>\n</li>\n<li><p><a href=\"https://zh.wikipedia.org/wiki/%E6%95%B0%E5%AD%97%E4%BF%A1%E5%8F%B7%E6%8E%A7%E5%88%B6%E5%99%A8\" target=\"_blank\" rel=\"noopener\">DSC</a></p>\n<ul>\n<li>è¿™é‡Œçš„DSCæ˜¯ä¹‹ï¼š<code>æ•°å­—ä¿¡å·æ§åˆ¶å™¨</code>ï¼Œæ˜¯<code>å•ç‰‡æœº</code>å’Œ<code>æ•°å­—ä¿¡å·å¤„ç†</code>çš„é›†åˆ(DSPs)çš„é›†åˆã€‚</li>\n</ul>\n</li>\n<li><p><a href=\"https://zh.wikipedia.org/wiki/%E5%8F%98%E9%A2%91%E5%99%A8\" target=\"_blank\" rel=\"noopener\">å˜é¢‘å™¨</a></p>\n</li>\n<li><p><a href=\"https://zh.wikipedia.org/wiki/RS-232\" target=\"_blank\" rel=\"noopener\">RS-232</a></p>\n<ul>\n<li>RS-232æ˜¯ç¾å›½EIAå®šåˆ¶çš„ä¸²è¡Œæ•°æ®é€šè®¯çš„æ¥å£ã€‚</li>\n</ul>\n</li>\n<li><p>RS-485</p>\n<ul>\n<li>ç°åœ¨å«EIA-485ï¼Œç”µå™¨ç‰¹æ€§è§„å®šåŒçº¿ã€åŒåŠå·¥ã€å¹³è¡¡ä¼ è¾“çº¿å¤šç‚¹é€šè®¯çš„æ ‡å‡†ï¼›å®ç°æ­¤æ ‡å‡†çš„æ•°å­—é€šè®¯ç½‘å¯ä»¥åœ¨æœ‰ç”µå­å™ªå£°çš„ç¯å¢ƒä¸‹ç»è¡Œé•¿è·ç¦»æœ‰æ•ˆçš„é€šä¿¡ï¼Œåœ¨çº¿æ€§å¤šç‚¹æ€»çº¿çš„é…ç½®ä¸‹ï¼Œå¯ä»¥åœ¨ä¸€ä¸ªç½‘ç»œä¸Šæœ‰å¤šä¸ªæ¥æ”¶å™¨ï¼Œå› æ­¤é€‚ç”¨åœ¨å·¥ä¸šç¯å¢ƒä¸­ã€‚</li>\n</ul>\n</li>\n<li><p>å¸§æ ¼å¼</p>\n<ul>\n<li>ModBusæ˜¯è¯·æ±‚/åº”ç­”åè®®ï¼Œå¹¶ä¸”æä¾›åŠŸèƒ½ç è§„å®šæœåŠ¡<ul>\n<li>ModBus ASCII</li>\n<li>ModBus RTU</li>\n<li>ModBus TCP/IP</li>\n</ul>\n</li>\n<li>RTUæ˜¯å¿…é¡»æ”¯æŒçš„ï¼Œå…¶ä½™å¯é€‰ï¼ŒModBus RTUå¸§æœ€å¤§å­—èŠ‚256å­—èŠ‚ã€‚</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"ModBus-RTUè§£æ\"><a href=\"#ModBus-RTUè§£æ\" class=\"headerlink\" title=\"ModBus RTUè§£æ\"></a>ModBus RTUè§£æ</h3><blockquote>\n<p>( Remote Terminal Unit )</p>\n</blockquote>\n<ul>\n<li>MODBUS RTUæ¶ˆæ¯æ˜¯ä¸€ä¸ªç®€å•çš„16ä½CRCï¼ˆ<a href=\"https://blog.csdn.net/weixin_38664664/article/details/77949553\" target=\"_blank\" rel=\"noopener\">å¾ªç¯å†—ä½™æ ¡éªŒå’Œ</a>ï¼‰ã€‚è¿™äº›ä¿¡æ¯çš„ç®€å•æ€§åœ¨äºç¡®ä¿å¯é æ€§ã€‚ç”±äºè¿™ç§ç®€å•æ€§ï¼ŒåŸºæœ¬çš„16ä½MODBUS RTU<a href=\"https://zh.wikipedia.org/zh/%E5%AF%84%E5%AD%98%E5%99%A8\" target=\"_blank\" rel=\"noopener\">å¯„å­˜å™¨</a>ç»“æ„å¯ç”¨äºæ‰“åŒ…æµ®ç‚¹ï¼Œè¡¨æ ¼ï¼ŒASCIIæ–‡æœ¬ï¼Œé˜Ÿåˆ—å’Œå…¶ä»–æ— å…³æ•°æ®ã€‚ </li>\n<li>RTUè½¯ä»¶å®ç°ä¸Šç‰¹è´¨<ul>\n<li>é»˜è®¤çš„é€šè®¯<code>æ³¢ç‰¹ç‡</code>9600bps,8ä½æ•°æ®ä½,å¶æ ¡éªŒ,ä¸€ä½åœæ­¢ã€‚</li>\n<li>å¥‡æ ¡éªŒå’Œæ— æ ¡éªŒæ˜¯å¯é€‰çš„ï¼Œç³»ç»Ÿå¿…é¡»æ”¯æŒé»˜è®¤çš„é…ç½®ï¼Œå¹¶ä¸”å¯¹é…ç½®é”™è¯¯æœ‰å¼‚å¸¸ç®¡ç†ã€‚</li>\n</ul>\n</li>\n<li>Modbus çš„ RTU æ¨¡å¼è§„å®šä¸åŒæ•°æ®å¸§ä¹‹é—´çš„é—´éš”æ˜¯3.5ä¸ªå­—èŠ‚é€šä¿¡æ—¶é—´ä»¥ä¸Šã€‚å¦‚æœåœ¨ä¸€å¸§æ•°æ®å®Œæˆä¹‹å‰æœ‰è¶…è¿‡3.5ä¸ª<code>å­—èŠ‚æ—¶é—´çš„åœé¡¿</code>ï¼Œæ¥æ”¶è®¾å¤‡å°†åˆ·æ–°å½“å‰çš„æ¶ˆæ¯å¹¶å‡å®šä¸‹ä¸€ä¸ªå­—èŠ‚æ˜¯ä¸€ä¸ªæ–°çš„æ•°æ®å¸§çš„å¼€å§‹ã€‚åŒæ ·çš„ï¼Œå¦‚æœä¸€ä¸ªæ–°æ¶ˆæ¯åœ¨å°äº3.5ä¸ªå­—èŠ‚æ—¶é—´å†…æ¥ç€å‰è¾¹ä¸€ä¸ªæ•°æ®å¼€å§‹ï¼Œæ¥æ”¶è®¾å¤‡å°†ä¼šè®¤ä¸ºå®ƒæ˜¯å‰ä¸€å¸§æ•°æ®çš„å»¶ç»­ã€‚è¿™å°†ä¼šå¯¼è‡´ä¸€ä¸ªé”™è¯¯ï¼Œå› æ­¤å¤§å®¶çœ‹ RTU æ•°æ®å¸§æœ€åè¿˜æœ‰ 16bit çš„ CRC æ ¡éªŒã€‚ <ul>\n<li><code>èµ·å§‹ä½</code>å’Œ<code>ç»“æŸç¬¦</code>ï¼šä¸€ä¸ªæ•°æ®å¸§ï¼Œå‰åéƒ½è‡³å°‘æœ‰3.5ä¸ªå­—èŠ‚çš„æ—¶é—´é—´éš”ï¼Œèµ·å§‹ä½å’Œç»“æŸç¬¦å®é™…ä¸Šæ²¡æœ‰ä»»ä½•æ•°æ®ï¼ŒT1-T2-T3-T4 ä»£è¡¨çš„æ˜¯æ—¶é—´é—´éš”3.5ä¸ªå­—èŠ‚ä»¥ä¸Šçš„æ—¶é—´ï¼Œè€ŒçœŸæ­£æœ‰æ„ä¹‰çš„ç¬¬ä¸€ä¸ªå­—èŠ‚æ˜¯è®¾å¤‡åœ°å€ã€‚</li>\n<li><code>è®¾å¤‡åœ°å€</code>ï¼šåœ¨å¤šæœºé€šä¿¡çš„æ—¶å€™ï¼Œæ•°æ®é‚£ä¹ˆå¤šï¼Œä¾é è¿™ä¸ªè®¾å¤‡åœ°å€å­—èŠ‚ã€‚æ¯ä¸ªè®¾å¤‡éƒ½æœ‰ä¸€ä¸ªè‡ªå·±çš„åœ°å€ï¼Œå½“è®¾å¤‡æ¥æ”¶åˆ°ä¸€å¸§æ•°æ®åï¼Œç¨‹åºé¦–å…ˆå¯¹è®¾å¤‡åœ°å€å­—èŠ‚è¿›è¡Œåˆ¤æ–­æ¯”è¾ƒï¼Œå¦‚æœä¸è‡ªå·±çš„åœ°å€ä¸åŒï¼Œåˆ™å¯¹è¿™å¸§æ•°æ®ç›´æ¥ä¸äºˆç†ä¼šï¼Œå¦‚æœä¸è‡ªå·±çš„åœ°å€ç›¸åŒï¼Œå°±è¦å¯¹è¿™å¸§æ•°æ®è¿›è¡Œè§£æï¼ŒæŒ‰ç…§ä¹‹åçš„åŠŸèƒ½ç æ‰§è¡Œç›¸åº”çš„åŠŸèƒ½ã€‚å¦‚æœåœ°å€æ˜¯ 0x00ï¼Œåˆ™è®¤ä¸ºæ˜¯ä¸€ä¸ªå¹¿æ’­å‘½ä»¤ï¼Œå°±æ˜¯æ‰€æœ‰çš„ä»æœºè®¾å¤‡éƒ½è¦æ‰§è¡Œçš„æŒ‡ä»¤ã€‚</li>\n<li><code>åŠŸèƒ½ä»£ç </code>ï¼šåœ¨ç¬¬äºŒä¸ªå­—èŠ‚åŠŸèƒ½ä»£ç å­—èŠ‚ä¸­ï¼ŒModbus è§„å®šäº†éƒ¨åˆ†åŠŸèƒ½ä»£ç ï¼Œæ­¤å¤–ä¹Ÿä¿ç•™äº†ä¸€éƒ¨åˆ†åŠŸèƒ½ä»£ç ä½œä¸ºå¤‡ç”¨æˆ–è€…ç”¨æˆ·è‡ªå®šä¹‰ï¼Œä¸‹é¢æœ‰ä¸€ä¸ªModBusåŠŸèƒ½ç ã€‚</li>\n<li><code>æ•°æ®</code>ï¼šè·Ÿåœ¨åŠŸèƒ½ç åé¢çš„æ˜¯nä¸ª8Bitæ•°æ®ã€‚è¿™ä¸ªnå€¼æœ‰å¤šå°‘ï¼Œå–å†³åŠŸèƒ½ä»£ç å†³å®šï¼Œä¸åŒçš„åŠŸèƒ½ç åé¢çš„æ•°æ®æ•°æ®ä¹Ÿä¸åŒã€‚</li>\n<li><code>CRCæ ¡éªŒ</code>ï¼šCRCæ ¡éªŒæ˜¯ä¸€ç§æ•°æ®ç®—æ³•ï¼Œæ˜¯ç”¨æ¥æ ¡éªŒæ•°æ®å¯¹é”™çš„ã€‚__CRCæ ¡éªŒå‡½æ•°å§ä¸€å¸§æ•°æ®é™¤æœ€åä¸¤ä¸ªå­—èŠ‚å¤–ï¼Œå‰é¢æ‰€æœ‰çš„å­—èŠ‚è¿›è¡Œç‰¹å®šçš„ç®—æ³•è®¡ç®—ã€‚è®¡ç®—å®Œåç”Ÿæˆä¸€ä¸ª16Bitçš„æ•°æ®ï¼Œä½œä¸ºCRCæ ¡éªŒç ï¼Œæ·»åŠ åœ¨ä¸€å¸§æ•°æ®çš„æœ€åã€‚æ¥æ”¶æ–¹æ¥æ”¶åˆ°æ•°æ®åï¼ŒåŒæ ·ä¼šæŠŠå‰è¾¹çš„å­—èŠ‚è¿›è¡Œ CRC è®¡ç®—ï¼Œè®¡ç®—å®Œäº†å†å’Œå‘è¿‡æ¥çš„ 16bit çš„ CRC æ•°æ®è¿›è¡Œæ¯”è¾ƒ__ï¼Œå¦‚æœç›¸åŒåˆ™è®¤ä¸ºæ•°æ®æ­£å¸¸ï¼Œæ²¡æœ‰å‡ºé”™ï¼Œå¦‚æœæ¯”è¾ƒä¸ç›¸åŒï¼Œåˆ™è¯´æ˜æ•°æ®åœ¨ä¼ è¾“ä¸­å‘ç”Ÿäº†é”™è¯¯ï¼Œè¿™å¸§æ•°æ®å°†è¢«ä¸¢å¼ƒï¼Œå°±åƒæ²¡æ”¶åˆ°ä¸€æ ·ï¼Œè€Œå‘é€æ–¹ä¼šåœ¨å¾—ä¸åˆ°å›åº”ååšç›¸åº”çš„å¤„ç†é”™è¯¯å¤„ç†ã€‚ </li>\n</ul>\n</li>\n<li>RTU æ¨¡å¼å­—èŠ‚åˆ†å¸ƒ<ul>\n<li>1ä¸ªèµ·å§‹ä½ã€8ä¸ªæ•°æ®ä½ï¼Œæœ€å°æœ‰æ•ˆä½å…ˆå‘é€ã€1ä¸ªå¥‡å¶æ ¡éªŒä½ï¼ˆå¦‚æœæ— æ ¡éªŒåˆ™æ²¡æœ‰è¿™ä¸€ä½ï¼‰ã€1ä½åœæ­¢ä½ï¼ˆæœ‰æ ¡éªŒä½æ—¶ï¼‰æˆ–è€…2ä¸ªåœæ­¢ä½ï¼ˆæ— æ ¡éªŒä½æ—¶ï¼‰ã€‚ </li>\n</ul>\n</li>\n</ul>\n<blockquote>\n<p>é€šä¿¡å¸§è¢«ç§°ä¸ºADUï¼ˆApplication Data Unitï¼‰, å…¶ä¸­åŠŸèƒ½ä»£ç å’Œæ•°æ®æ®µç»„åˆç§°ä¸ºåè®®æ•°æ®å•å…ƒPDUï¼ˆProtocol Data  Unitï¼‰</p>\n</blockquote>\n<ul>\n<li>ä¸Šå›¾æ˜¯ä¸€ä¸ªæ ‡å‡†çš„RTUå¸§ã€‚<ul>\n<li>èµ·å§‹ä½ ï¼š <code>T1-T2-T3-T4</code></li>\n<li>åœ°å€åŸŸ(è®¾å¤‡åœ°å€) ï¼š<code>8Bit</code></li>\n<li>åŠŸèƒ½ä»£ç ï¼š<code>8Bit</code> </li>\n<li>æ•°æ®ï¼š<code>nä¸ª8Bit</code></li>\n<li>å·®é”™æ ¡éªŒï¼ˆCRCæ ¡éªŒï¼‰: <code>16Bit</code></li>\n<li>ç»“æŸç¬¦ï¼š<code>T1-T2-T3-T4</code></li>\n</ul>\n</li>\n</ul>\n<table>\n<thead>\n<tr>\n<th>START</th>\n<th>ADDR</th>\n<th>CS</th>\n<th>DATA</th>\n<th>CRC</th>\n<th>END</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>åˆå§‹ç»“æ„</td>\n<td>åœ°å€ç </td>\n<td>åŠŸèƒ½ç </td>\n<td>æ•°æ®åŒº</td>\n<td>é”™è¯¯æ ¡éªŒ</td>\n<td>ç»“æŸç»“æ„</td>\n</tr>\n<tr>\n<td>å»¶æ—¶ï¼ˆç›¸å½“äº4ä¸ªå­—èŠ‚æ—¶é—´ï¼‰</td>\n<td>1å­—èŠ‚</td>\n<td>1å­—èŠ‚</td>\n<td>Nå­—èŠ‚</td>\n<td>2å­—èŠ‚</td>\n<td>å»¶æ—¶ï¼ˆç›¸å½“äº4ä¸ªå­—èŠ‚æ—¶é—´ï¼‰</td>\n</tr>\n</tbody></table>\n<p><img src=\"https://z201.oss-cn-shanghai.aliyuncs.com/JavaNote/ModBus/%E5%B8%A7%E7%BB%93%E6%9E%842.jpg\"></p>\n<ul>\n<li>åœ¨è½¯ä»¶å®ç°ä¸Šï¼Œé‡‡ç”¨é»˜è®¤çš„RTUå¸§ç»“æ„ã€‚<ul>\n<li>å‘é€è®¾å¤‡å°† ModbusæŠ¥æ–‡æ„é€ ä¸ºå¸¦æœ‰å·²çŸ¥èµ·å§‹å’Œç»“æŸæ ‡è®°çš„å¸§ã€‚è¿™ä½¿è®¾å¤‡å¯ä»¥åœ¨æŠ¥æ–‡çš„å¼€å§‹æ¥æ”¶æ–°å¸§ï¼Œå¹¶ä¸”çŸ¥é“ä½•æ—¶æŠ¥æ–‡ç»“æŸã€‚ä¸å®Œæ•´çš„æŠ¥æ–‡å¿…é¡»èƒ½å¤Ÿè¢«æ£€æµ‹åˆ°è€Œé”™è¯¯æ ‡å¿—å¿…é¡»ä½œä¸ºç»“æœè¢«è®¾ç½®ã€‚åœ¨RTUæ¨¡å¼ï¼ŒæŠ¥æ–‡å¸§ç”±æ—¶é•¿è‡³å°‘ä¸º 3.5 ä¸ªå­—ç¬¦æ—¶é—´çš„ç©ºé—²é—´éš”ã€‚</li>\n<li>ModBusé‡‡ç”¨çš„æ˜¯å¤§ç«¯æ¨¡å¼ï¼Œå°±æ˜¯æ¯”å¦‚ä¸€ä¸ª16ä½çš„ç”µæµæœ‰æ•ˆå€¼ï¼Œæ˜¯å…ˆå‘é€é«˜å­—èŠ‚ï¼Œåœ¨å‘é€ä½å­—èŠ‚ï¼Œä½†åœ¨CRCæ ¡éªŒåŸŸåˆ‡è®°æ˜¯å…ˆå‘é€ä½å­—èŠ‚ï¼Œåœ¨å‘é€é«˜å­—èŠ‚ï¼Œæ¯ä¸ªå­—èŠ‚æ˜¯å…ˆå‘é€ä½ä½åœ¨å‘é€é«˜ä½,å¦‚ä¸‹å›¾æ‰€ç¤º </li>\n</ul>\n</li>\n</ul>\n<p><img src=\"https://z201.oss-cn-shanghai.aliyuncs.com/JavaNote/ModBus/%E6%9C%89%E5%A5%87%E5%81%B6%E6%A0%A1%E9%AA%8C.jpg\"></p>\n<p><img src=\"https://z201.oss-cn-shanghai.aliyuncs.com/JavaNote/ModBus/%E6%97%A0%E5%A5%87%E5%81%B6%E6%A0%A1%E9%AA%8C.jpg\"></p>\n<h4 id=\"å­—èŠ‚åœé¡¿æ—¶é—´\"><a href=\"#å­—èŠ‚åœé¡¿æ—¶é—´\" class=\"headerlink\" title=\"å­—èŠ‚åœé¡¿æ—¶é—´\"></a>å­—èŠ‚åœé¡¿æ—¶é—´</h4><blockquote>\n<p>ä¸²å£å‘é€    ä¸€å¸§æ•°æ®çš„åœé¡¿æ—¶é—´å¦‚ä½•è®¡ç®—ï¼Ÿ</p>\n</blockquote>\n<ul>\n<li>æ³¢ç‰¹ç‡ï¼šå‘é€äºŒè¿›åˆ¶æ•°æ®ä½çš„é€Ÿç‡ï¼Œä¹ æƒ¯ä¸Šç”¨ baud è¡¨ç¤ºï¼Œå³æˆ‘ä»¬å‘é€ä¸€ä½äºŒè¿›åˆ¶æ•°æ®çš„æŒç»­æ—¶é—´=1/baud <ul>\n<li>å¦‚æœæ³¢ç‰¹ç‡ä¸º9600ï¼Œå‘é€ä¸€ä¸ªä½éœ€è¦çš„æ—¶é—´ä¸º1/9600s=0.0001042s=0.1042ms,è¿™é‡ŒæŒ‰æ•°æ®ä½ä¸º8ä½ï¼Œåœæ­¢ä½ä¸º2ä½ï¼ŒÂ  åŠ èµ·æ¥å°±æ˜¯10ä½ï¼Œ10ä¸ªä½å‘é€æ‰€éœ€çš„æ—¶é—´ä¸ºï¼š0.1042<em>10ms = 1.042ms,å¦‚æœæˆ‘è¦å‘é€10ä¸ªå­—èŠ‚çš„æ•°æ®ï¼Œé‚£å‘é€è¿™10ä¸ªå­—èŠ‚æ•°æ®ç»™æ¥æ”¶æ–¹éœ€è¦Â  çš„æ—¶é—´ä¸ºï¼š10</em>1.042ms = 10.42msï¼Œè¿™æ˜¯ç®—å®é™…çš„å‘é€10ä¸ªå­—èŠ‚çš„æ•°æ®æ‰€éœ€è¦çš„æ—¶é—´ã€‚æˆ‘ä»¬åœ¨æ¥æ”¶æ–¹æ¥æ”¶æ•°æ®æ—¶å¯ä»¥Â  æŠŠæ—¶é—´å†åŠ å®½ä¸€äº›ï¼Œè®©å®ƒæœ‰ä¸€ç‚¹ä½™é‡ã€‚è®©æ¥æ”¶æ–¹èƒ½ç¨³å®šçš„æŠŠæ•°æ®ä»å‘é€æ–¹æ¥æ‰‹è¿‡æ¥ï¼Œå¯ä»¥åŠ ä¸ª5ms,æˆ–æ›´å®½ä¸€ç‚¹10ms,Â  åŠ ä¸Šå‘é€10ä¸ªå­—èŠ‚æ‰€èŠ±çš„æ—¶é—´ï¼Œå°±æ˜¯15msæˆ–20msã€‚ å…¶ä»–æ³¢ç‰¹ç‡ä¾æ­¤ç±»æ¨ã€‚</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"ModBusåŠŸèƒ½ç \"><a href=\"#ModBusåŠŸèƒ½ç \" class=\"headerlink\" title=\"ModBusåŠŸèƒ½ç \"></a>ModBusåŠŸèƒ½ç </h3><table>\n<thead>\n<tr>\n<th>åŠŸèƒ½ç </th>\n<th>åç§°</th>\n<th>ä½œç”¨</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>01</td>\n<td>è¯»å–çº¿åœˆçŠ¶æ€</td>\n<td>å–å¾—ä¸€ç»„é€»è¾‘çº¿åœˆçš„å½“å‰çŠ¶æ€(ON/OFF)</td>\n</tr>\n<tr>\n<td>02</td>\n<td>è¯»å–è¾“å…¥çŠ¶æ€</td>\n<td>å–å¾—ä¸€ç»„å¼€å…³è¾“å…¥çš„å½“å‰çŠ¶æ€(ON/OFF)</td>\n</tr>\n<tr>\n<td>03</td>\n<td>è¯»å–ä¿æŒå¯„å­˜å™¨</td>\n<td>åœ¨ä¸€ä¸ªæˆ–å¤šä¸ªä¿æŒå¯„å­˜å™¨ä¸­å–å¾—å½“å‰çš„äºŒè¿›åˆ¶å€¼</td>\n</tr>\n<tr>\n<td>04</td>\n<td>è¯»å–è¾“å…¥å¯„å­˜å™¨</td>\n<td>åœ¨ä¸€ä¸ªæˆ–å¤šä¸ªè¾“å…¥å¯„å­˜å™¨ä¸­å–å¾—å½“å‰çš„äºŒè¿›åˆ¶å€¼</td>\n</tr>\n<tr>\n<td>05</td>\n<td>å¼ºç½®å•çº¿åœˆ</td>\n<td>å¼ºç½®ä¸€ä¸ªé€»è¾‘çº¿åœˆçš„é€šæ–­çŠ¶æ€</td>\n</tr>\n<tr>\n<td>06</td>\n<td>é¢„ç½®å•å¯„å­˜å™¨</td>\n<td>æŠŠå…·ä½“äºŒè¿›å€¼è£…å…¥ä¸€ä¸ªä¿æŒå¯„å­˜å™¨</td>\n</tr>\n<tr>\n<td>07</td>\n<td>è¯»å–å¼‚å¸¸çŠ¶æ€</td>\n<td>å–å¾— 8 ä¸ªå†…éƒ¨çº¿åœˆçš„é€šæ–­çŠ¶æ€ï¼Œè¿™ 8 ä¸ªçº¿åœˆçš„åœ°å€ç”± æ§åˆ¶å™¨å†³å®šï¼Œç”¨æˆ·é€»è¾‘å¯ä»¥å°†è¿™äº›çº¿åœˆå®šä¹‰ï¼Œä»¥è¯´æ˜ ä»æœºçŠ¶æ€ï¼ŒçŸ­æŠ¥æ–‡é€‚å®œäºè¿…é€Ÿè¯»å–çŠ¶æ€</td>\n</tr>\n<tr>\n<td>08</td>\n<td>å›é€è¯Šæ–­æ ¡éªŒ</td>\n<td>æŠŠè¯Šæ–­æ ¡éªŒæŠ¥æ–‡é€ä»æœºï¼Œä»¥å¯¹é€šä¿¡å¤„ç†è¿›è¡Œè¯„é‰´</td>\n</tr>\n<tr>\n<td>09</td>\n<td>ç¼–ç¨‹(åªç”¨äº 484)</td>\n<td>ä½¿ä¸»æœºæ¨¡æ‹Ÿç¼–ç¨‹å™¨ä½œç”¨ï¼Œä¿®æ”¹ PC ä»æœºé€»è¾‘</td>\n</tr>\n<tr>\n<td>10</td>\n<td>æ§è¯¢(åªç”¨äº 484)</td>\n<td>å¯ä½¿ä¸»æœºä¸ä¸€å°æ­£åœ¨æ‰§è¡Œé•¿ç¨‹åºä»»åŠ¡ä»æœºé€šä¿¡ï¼Œæ¢è¯¢ è¯¥ä»æœºæ˜¯å¦å·²å®Œæˆå…¶æ“ä½œä»»åŠ¡ï¼Œä»…åœ¨å«æœ‰åŠŸèƒ½ç  9 çš„æŠ¥æ–‡å‘é€åï¼Œæœ¬åŠŸèƒ½ç æ‰å‘é€</td>\n</tr>\n<tr>\n<td>11</td>\n<td>è¯»å–äº‹ä»¶è®¡æ•°</td>\n<td>å¯ä½¿ä¸»æœºå‘å‡ºå•è¯¢é—®ï¼Œå¹¶éšå³åˆ¤å®šæ“ä½œæ˜¯å¦æˆåŠŸï¼Œå°¤ å…¶æ˜¯è¯¥å‘½ä»¤æˆ–å…¶å®ƒåº”ç­”äº§ç”Ÿé€šä¿¡é”™è¯¯æ—¶</td>\n</tr>\n<tr>\n<td>12</td>\n<td>è¯»å–é€šä¿¡äº‹ä»¶è®°å½•</td>\n<td>å¯ä½¿ä¸»æœºæ£€ç´¢æ¯å°ä»æœºçš„ ModBus äº‹åŠ¡å¤„ç†é€šä¿¡äº‹ä»¶ è®°å½•ã€‚å¦‚æœæŸé¡¹äº‹åŠ¡å¤„ç†å®Œæˆï¼Œè®°å½•ä¼šç»™å‡ºæœ‰å…³é”™è¯¯</td>\n</tr>\n<tr>\n<td>13</td>\n<td>ç¼–ç¨‹(184/384 484 584 )</td>\n<td>å¯ä½¿ä¸»æœºæ¨¡æ‹Ÿç¼–ç¨‹å™¨åŠŸèƒ½ä¿®æ”¹ PC ä»æœºé€»è¾‘</td>\n</tr>\n<tr>\n<td>14</td>\n<td>æ¢è¯¢(184/384 484 584)</td>\n<td>å¯ä½¿ä¸»æœºä¸æ­£åœ¨æ‰§è¡Œä»»åŠ¡çš„ä»æœºé€šä¿¡ï¼Œå®šæœŸæ§è¯¢è¯¥ä» æœºæ˜¯å¦å·²å®Œæˆå…¶ç¨‹åºæ“ä½œï¼Œä»…åœ¨å«æœ‰åŠŸèƒ½ 13 çš„æŠ¥æ–‡ å‘é€åï¼Œæœ¬åŠŸèƒ½ç æ‰å¾—å‘é€</td>\n</tr>\n<tr>\n<td>15</td>\n<td>å¼ºç½®å¤šçº¿åœˆ</td>\n<td>å¼ºç½®ä¸€ä¸²è¿ç»­é€»è¾‘çº¿åœˆçš„é€šæ–­</td>\n</tr>\n<tr>\n<td>16</td>\n<td>é¢„ç½®å¤šå¯„å­˜å™¨</td>\n<td>æŠŠå…·ä½“çš„äºŒè¿›åˆ¶å€¼è£…å…¥ä¸€ä¸²è¿ç»­çš„ä¿æŒå¯„å­˜å™¨</td>\n</tr>\n<tr>\n<td>17</td>\n<td>æŠ¥å‘Šä»æœºæ ‡è¯†</td>\n<td>å¯ä½¿ä¸»æœºåˆ¤æ–­ç¼–å€ä»æœºçš„ç±»å‹åŠè¯¥ä»æœºè¿è¡ŒæŒ‡ç¤ºç¯ çš„çŠ¶æ€</td>\n</tr>\n<tr>\n<td>18</td>\n<td>884 å’Œ MICRO 84</td>\n<td>å¯ä½¿ä¸»æœºæ¨¡æ‹Ÿç¼–ç¨‹åŠŸèƒ½ï¼Œä¿®æ”¹ PC çŠ¶æ€é€»è¾‘</td>\n</tr>\n<tr>\n<td>19</td>\n<td>é‡ç½®é€šä¿¡é“¾è·¯</td>\n<td>å‘ç”Ÿéå¯ä¿®æ”¹é”™è¯¯åï¼Œæ˜¯ä»æœºå¤ä½äºå·²çŸ¥çŠ¶æ€ï¼Œå¯é‡ ç½®é¡ºåºå­—èŠ‚</td>\n</tr>\n<tr>\n<td>20</td>\n<td>è¯»å–é€šç”¨å‚æ•°(584L)</td>\n<td>æ˜¾ç¤ºæ‰©å±•å­˜å‚¨å™¨æ–‡ä»¶ä¸­çš„æ•°æ®ä¿¡æ¯</td>\n</tr>\n<tr>\n<td>21</td>\n<td>å†™å…¥é€šç”¨å‚æ•°(584L)</td>\n<td>æŠŠé€šç”¨å‚æ•°å†™å…¥æ‰©å±•å­˜å‚¨æ–‡ä»¶ï¼Œæˆ–ä¿®æ”¹</td>\n</tr>\n<tr>\n<td>22~64</td>\n<td>ä¿ç•™ä½œæ‰©å±•åŠŸèƒ½å¤‡ç”¨</td>\n<td></td>\n</tr>\n<tr>\n<td>65~72</td>\n<td>ä¿ç•™ä»¥å¤‡ç”¨æˆ·åŠŸèƒ½æ‰€ç”¨</td>\n<td>ç•™ä½œç”¨æˆ·åŠŸèƒ½çš„æ‰©å±•ç¼–ç </td>\n</tr>\n<tr>\n<td>73~119</td>\n<td>éæ³•åŠŸèƒ½</td>\n<td></td>\n</tr>\n<tr>\n<td>120~127</td>\n<td>ä¿ç•™</td>\n<td>ç•™ä½œå†…éƒ¨ä½œç”¨</td>\n</tr>\n<tr>\n<td>128~255</td>\n<td>ä¿ç•™</td>\n<td>ç”¨äºå¼‚å¸¸åº”ç­”</td>\n</tr>\n</tbody></table>\n<h3 id=\"å°è¯•ç‰›åˆ€\"><a href=\"#å°è¯•ç‰›åˆ€\" class=\"headerlink\" title=\"å°è¯•ç‰›åˆ€\"></a>å°è¯•ç‰›åˆ€</h3><blockquote>\n<p>æ–‡æ¡£çœ‹äº†ï¼Œç”¨æ¨¡æ‹Ÿå™¨æ¥æµ‹è¯•ä¸‹ã€‚</p>\n</blockquote>\n<p>é¦–å…ˆéœ€è¦æ¨¡æ‹Ÿä¸€ä¸ªCOMä¸²å£ã€‚ä¸ç„¶æ€ä¹ˆæµ‹è¯•å‘¢ã€‚è‡ªè¡Œç™¾åº¦VSPDã€‚</p>\n<p><img src=\"https://z201.oss-cn-shanghai.aliyuncs.com/JavaNote/ModBus/VSPD.JPG\"></p>\n<p>ç„¶ååœ¨æµ‹è¯•ä¸‹ä¸Šå›¾ä¸­<code>COM1ã€COM2</code>è™šæ‹Ÿä¸²å£ã€‚</p>\n<p><img src=\"https://z201.oss-cn-shanghai.aliyuncs.com/JavaNote/ModBus/%E4%B8%B2%E5%8F%A3%E8%B0%83%E8%AF%95%E5%8A%A9%E6%89%8B.JPG\"></p>\n<p>ä¸²å£æ•°æ®æµ‹è¯•äº’é€šä¹‹åå°±å¯ä»¥ä½¿ç”¨Modbusæµ‹è¯•å·¥å…·æ¥æµ‹è¯•äº†ã€‚</p>\n<p>å·¥å…·æ¸…å•</p>\n<ul>\n<li>Modbus poll</li>\n<li>Modbus savel</li>\n</ul>\n<p>ä¸‹è½½åè‡ªè¡Œå¯»æ‰¾æ³¨å†Œç ï¼Œå¼€å§‹å‡†å¤‡æµ‹è¯•ã€‚</p>\n<p><img src=\"https://z201.oss-cn-shanghai.aliyuncs.com/JavaNote/ModBus/ModbusTest.jpg\"></p>\n<p>è¿™é‡Œæ˜¯4ç»„æµ‹è¯•ã€‚ModbusSlaveæ¨¡æ‹Ÿ4ä¸ªè®¾å¤‡çš„æ•°æ®ã€‚ModbusPollä¸­å»åˆ†åˆ«è·å–å››ä¸ªè®¾å¤‡çš„æ•°æ®ã€‚æµ‹è¯•ä¾æ®å‚è€ƒModbusæ•°æ®ç±»å‹ï¼Œè¯»å†™æƒ…å†µã€‚è¿™é‡Œç®€å•çš„æµ‹è¯•4ç§è¯»ã€‚</p>\n<p>è¿™é‡Œåªåšæ¼”ç¤ºï¼Œå…·ä½“ä½¿ç”¨ç½‘ä¸Šæœ‰å¾ˆå¤šæ•™ç¨‹è§£é‡Šäº†ã€‚è¿™ä¿©è½¯ä»¶æŒºç®€å•çš„ã€‚</p>\n<h2 id=\"å·¥å…·ä¸‹è½½åœ°å€\"><a href=\"#å·¥å…·ä¸‹è½½åœ°å€\" class=\"headerlink\" title=\"å·¥å…·ä¸‹è½½åœ°å€\"></a>å·¥å…·ä¸‹è½½åœ°å€</h2><p><a href=\"http://www.modbustools.com/download.html\" target=\"_blank\" rel=\"noopener\">ModBus Poll And ModBus Slave</a></p>\n<h2 id=\"å‚è€ƒæ–‡çŒ®\"><a href=\"#å‚è€ƒæ–‡çŒ®\" class=\"headerlink\" title=\"å‚è€ƒæ–‡çŒ®\"></a>å‚è€ƒæ–‡çŒ®</h2><p><strong><a href=\"http://www.ni.com/white-paper/52134/zhs/\" target=\"_blank\" rel=\"noopener\">Modbusåè®®æ·±å…¥è®²è§£</a></strong></p>\n<p><strong><a href=\"http://www.modbus.org/docs/Modbus_Application_Protocol_V1_1b3.pdf\" target=\"_blank\" rel=\"noopener\">ModBus Application Protocol</a></strong></p>\n<p><a href=\"https://cloud.tencent.com/developer/article/1089161\" target=\"_blank\" rel=\"noopener\">è…¾äº‘é˜ Modbusé‚£äº›äº‹</a></p>\n<p><a href=\"https://zh.wikipedia.org/wiki/Modbus\" target=\"_blank\" rel=\"noopener\">ç»´åŸºç™¾ç§‘Modbus</a></p>\n<p><a href=\"http://wiki.jikexueyuan.com/project/mcu-tutorial-three/modbus-communication-protocol.html\" target=\"_blank\" rel=\"noopener\">æå®¢å­¦é™¢ Modbus é€šä¿¡åè®®ä»‹ç»</a></p>\n<p><a href=\"http://digital.ni.com/public.nsf/allkb/F716ABC0F75705ED86257AF5002E1451\" target=\"_blank\" rel=\"noopener\">DSCæ¨¡å—ä¹‹Modbusé€šè®¯ï¼ˆä»¥PLCä¸ºä¾‹ï¼‰</a></p>\n<p><a href=\"http://www.modbustools.com/modbus.html\" target=\"_blank\" rel=\"noopener\">Mobusåè®®æè¿°</a></p>\n<p><a href=\"http://www.founderchip.com/?id=65\" target=\"_blank\" rel=\"noopener\">æˆ‘æ˜¯ModBus-RTUåè®®ï¼Œæˆ‘æœ‰ä¸¤å…„å¼Ÿ</a></p>\n<p><a href=\"https://blog.csdn.net/brucezcg/article/details/70340361\" target=\"_blank\" rel=\"noopener\">ModBus-RTUè¯¦è§£</a></p>\n<p><a href=\"https://www.zhihu.com/question/27707815\" target=\"_blank\" rel=\"noopener\">ä¸²è¡Œå£ï¼Œspiï¼ŒRS232ï¼ŒRS485ï¼ŒRJ45å£ä»¥åŠModbusåè®®ï¼Œè¿™äº›çš„åŒºåˆ«å’Œå…±åŒç‚¹æ˜¯ä»€ä¹ˆï¼Ÿ</a></p>\n<p><a href=\"http://www.cnblogs.com/Dn9x/p/4298146.html\" target=\"_blank\" rel=\"noopener\">Modbus: 1. Javaä½¿ç”¨Modbusè¯»å–Slaveç«¯æ•°æ®(TCP)</a></p>\n<p><a href=\"https://zhuanlan.zhihu.com/p/24134130\" target=\"_blank\" rel=\"noopener\">ä½¿ç”¨MODBUSé€šè®¯åè®®è¿æ¥ç”µæœºåŠç®€å•è°ƒè¯•</a></p>\n<p><a href=\"https://www.jianshu.com/nb/13030496\" target=\"_blank\" rel=\"noopener\">Java Modbusç³»åˆ—</a></p>\n<p><a href=\"http://www.cnblogs.com/luomingui/archive/2013/06/14/Modbus.html\" target=\"_blank\" rel=\"noopener\">Modbusé€šè®¯åè®®å­¦ä¹  - è®¤è¯†ç¯‡</a></p>\n<p><a href=\"http://www.cnblogs.com/koneloong/p/5218136.html\" target=\"_blank\" rel=\"noopener\">Java Modbus CRC16æ ¡éªŒ</a></p>\n<p><a href=\"https://www.jianshu.com/p/157e14396f3b\" target=\"_blank\" rel=\"noopener\">javaå®ç°ä¸Šä½æœºä¸ä¸‹ä½æœºä¸²å£é€šä¿¡</a></p>\n<p><a href=\"https://blog.csdn.net/tt094534/article/details/54928878?locationNum=11&fps=1\" target=\"_blank\" rel=\"noopener\"> modbus slaveå’Œmodbus pollä½¿ç”¨ </a></p>\n<h2 id=\"å…¶ä»–\"><a href=\"#å…¶ä»–\" class=\"headerlink\" title=\"å…¶ä»–\"></a>å…¶ä»–</h2><p><a href=\"http://jlog.org/rxtx-win.html\" target=\"_blank\" rel=\"noopener\">è§£å†³windows RXTXcomm.jar å¹³å°é—®é¢˜</a></p>\n","categories":["åŸºç¡€ç†è®º"],"tags":["é€šè®¯åè®®","modbus"]},{"title":"MySQLåŸºç¡€ï¼ˆäºŒï¼‰","url":"/posts/985694764/","content":"<blockquote>\n<p>æœ¬ç« æ˜¯æ•´ç†çŸ¥è¯†å†…å®¹ï¼Œä¸ºå¼ºåŒ–çŸ¥è¯†é•¿æœŸæ›´æ–°ã€‚</p>\n</blockquote>\n<ul>\n<li>åœ¨ <a href=\"https://z201.cn/2018/04/29/MySQL%E5%9F%BA%E7%A1%80%EF%BC%88%E4%B8%80%EF%BC%89/\">MySQLåŸºç¡€ï¼ˆä¸€ï¼‰</a> å·²ç»ä»‹ç»äº†MYSQLæœ€å¸¸ç”¨åŸºç¡€çš„æ“ä½œï¼Œç”±äºç¯‡å¹…å·²ç»å¾ˆå¤§ï¼Œæ‰€ä»¥åˆ†å¼€è®°å½•ã€‚</li>\n</ul>\n<h2 id=\"MySqlåŸºç¡€æ“ä½œ\"><a href=\"#MySqlåŸºç¡€æ“ä½œ\" class=\"headerlink\" title=\"MySqlåŸºç¡€æ“ä½œ\"></a>MySqlåŸºç¡€æ“ä½œ</h2><h3 id=\"å­æŸ¥è¯¢ä¸è¿æ¥\"><a href=\"#å­æŸ¥è¯¢ä¸è¿æ¥\" class=\"headerlink\" title=\"å­æŸ¥è¯¢ä¸è¿æ¥\"></a>å­æŸ¥è¯¢ä¸è¿æ¥</h3><blockquote>\n<p>åœ¨MYSQLå®é™…æ“ä½œä¸­ï¼Œæœ€å¤§çš„æ“ä½œå°±æ˜¯æŸ¥è¯¢ï¼Œä¸‹é¢å°±å…³äºå­æŸ¥è¯¢å’Œé“¾æ¥åšè®°å½•ã€‚</p>\n</blockquote>\n<h4 id=\"å­æŸ¥è¯¢\"><a href=\"#å­æŸ¥è¯¢\" class=\"headerlink\" title=\"å­æŸ¥è¯¢\"></a>å­æŸ¥è¯¢</h4><ul>\n<li>å­æŸ¥è¯¢(SubQuery)æ˜¯æŒ‡å‡ºç°åœ¨å…¶å®ƒSQLè¯­å¥ä¸­çš„SELECTå­å¥ã€‚æ¯”å¦‚</li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">SELECT * FROM table_1 AS t1 WHERE columns_1 &#x3D; (SELECT columns_2 FROM table_2 AS t2);</span><br><span class=\"line\"># è¿™é‡Œçš„SELECT * FROM table_1 AS t1 ç§°ä¹‹ä¸º Outer Query&#x2F;Outer Statement;SELECT columns_2 FROM table_2 AS t2 æˆä¸º SubQueryã€‚</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>å­æŸ¥è¯¢ä¸¥æ ¼ä»¥ä¸Šæ˜¯æŒ‡<code>åµŒå¥—åœ¨æŸ¥è¯¢å†…éƒ¨ï¼Œä¸”å¿…é¡»å§‹ç»ˆå‡ºç°åœ¨åœ†æ‹¬å·å†…</code></li>\n<li>å­æŸ¥è¯¢å¯ä»¥åŒ…å«å¤šä¸ªå…³é”®å­—ï¼š<code>DISTINCT</code>ã€<code>GROUP BY</code>ã€<code>ORDER BY</code>ã€<code>LIMIT</code>ç­‰å‡½æ•°ã€‚</li>\n<li>å­æŸ¥è¯¢çš„å¤–å±‚å¯ä»¥æ˜¯ï¼š<code>INSERT</code>ã€<code>UPDATE</code>ã€<code>SELECT </code>ã€<code>DELETE</code>ã€<code>SET</code>ã€<code>DO</code>ç­‰æ“ä½œã€‚</li>\n<li>å­æŸ¥è¯¢å¯ä»¥è¿”å›ç»“æœï¼Œè¿™ä¸ªç»“æœå¯ä»¥æ˜¯<code>æ ‡é‡</code>ã€<code>ä¸€è¡Œ</code>ã€<code>ä¸€åˆ—</code>ï¼Œæˆ–è€…å­æŸ¥è¯¢ã€‚</li>\n<li>å­æŸ¥è¯¢çš„å¼•å‘æ¡ä»¶ï¼š<code>è¿™é‡Œéœ€è¦ç‰¹åˆ«æ³¨æ„ï¼Œå¹¶ä¸æ˜¯æ˜¾ç¤ºçš„æ‰æ˜¯å­æŸ¥è¯¢ã€‚</code><ul>\n<li>ä½¿ç”¨æ¯”è¾ƒè¿ç®—ç¬¦çš„å­æŸ¥è¯¢ï¼š<code>= , &gt; , &lt; , &gt;= , &lt;= , &lt;&gt; , != , &lt;=&gt; </code></li>\n<li>ä½¿ç”¨ç»“æ„è¯­æ³•ï¼šoperand comparison_operator subquery ï¼Œå¯ä»¥ä½¿ç”¨ä¸€ä¸‹ä¿®é¥°ç¬¦æ¥é…åˆæ¯”è¾ƒè¿ç®—ç¬¦ã€‚<ul>\n<li>operand comparison_operator <code>ANY</code>(subquery)</li>\n<li>operand comparison_operator <code>SOME</code>(subquery)</li>\n<li>operand comparison_operator <code>ALL</code>(subquery)</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<table>\n<thead>\n<tr>\n<th>è¿ç®—ç¬¦\\å…³é”®å­—</th>\n<th>ANY</th>\n<th>SOME</th>\n<th>ALL</th>\n</tr>\n</thead>\n<tbody><tr>\n<td><code>&gt;</code> ã€<code>&gt;=</code></td>\n<td>æœ€å¤§å€¼</td>\n<td>æœ€å°å€¼</td>\n<td>æœ€å¤§</td>\n</tr>\n<tr>\n<td><code>&lt;</code>ã€<code>&lt;=</code></td>\n<td>æœ€å¤§å€¼</td>\n<td>æœ€å¤§å€¼</td>\n<td>æœ€å°å€¼</td>\n</tr>\n<tr>\n<td><code>=</code></td>\n<td>ä»»æ„å€¼</td>\n<td>ä»»æ„å€¼</td>\n<td></td>\n</tr>\n<tr>\n<td><code>&lt;&gt;</code>ã€<code>!=</code></td>\n<td></td>\n<td></td>\n<td>ä»»æ„å€¼</td>\n</tr>\n</tbody></table>\n<a id=\"more\"></a>\n\n<ul>\n<li>é¦–å…ˆåˆ›å»ºä¸€ä¸ªæµ‹è¯•è¡¨ï¼Œå¹¶å‡†å¤‡æµ‹è¯•æ•°æ®ã€‚æˆ‘ä»¬ç”¨æœ€ç»å…¸å•†åŸgoodsè¡¨æ¥åšæµ‹è¯•ã€‚</li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\"># åˆ›å»ºæµ‹è¯•è¡¨t_goods</span><br><span class=\"line\">[root@localhost][Demo]&gt; CREATE TABLE t_goods(</span><br><span class=\"line\">    -&gt; goods_id SMALLINT UNSIGNED PRIMARY KEY AUTO_INCREMENT,</span><br><span class=\"line\">    -&gt; goods_name VARCHAR(150) NOT NULL,</span><br><span class=\"line\">    -&gt; godds_cate VARCHAR(40)  NOT NULL,</span><br><span class=\"line\">    -&gt; goods_price DECIMAL(16,3) UNSIGNED NOT NULL DEFAULT 0,</span><br><span class=\"line\">    -&gt; brand_name VARCHAR(40) NOT NULL,</span><br><span class=\"line\">    -&gt; is_show BOOLEAN NOT NULL DEFAULT 1,</span><br><span class=\"line\">    -&gt; is_saleoff BOOLEAN NOT NULL DEFAULT 0</span><br><span class=\"line\">    -&gt; );</span><br><span class=\"line\">Query OK, 0 rows affected (0.13 sec)</span><br><span class=\"line\"></span><br><span class=\"line\"># å“å“Ÿå†™é”™äº†å­—æ®µåå­—äº†ã€‚ã€‚ã€‚</span><br><span class=\"line\">[root@localhost][Demo]&gt; ALTER TABLE t_goods CHANGE godds_cate goods_cate VARCHAR(40) NOT NULL;</span><br><span class=\"line\">Query OK, 0 rows affected (0.14 sec)</span><br><span class=\"line\">Records: 0  Duplicates: 0  Warnings: 0</span><br><span class=\"line\"></span><br><span class=\"line\">#æ£€æŸ¥è¡¨ç»“æ„</span><br><span class=\"line\">[root@localhost][Demo]&gt; SHOW COLUMNS FROM t_goods;</span><br><span class=\"line\">+-------------+------------------------+------+-----+---------+----------------+</span><br><span class=\"line\">| Field       | Type                   | Null | Key | Default | Extra          |</span><br><span class=\"line\">+-------------+------------------------+------+-----+---------+----------------+</span><br><span class=\"line\">| goods_id    | smallint(5) unsigned   | NO   | PRI | NULL    | auto_increment |</span><br><span class=\"line\">| goods_name  | varchar(150)           | NO   |     | NULL    |                |</span><br><span class=\"line\">| goods_cate  | varchar(40)            | NO   |     | NULL    |                |</span><br><span class=\"line\">| goods_price | decimal(16,3) unsigned | NO   |     | 0.000   |                |</span><br><span class=\"line\">| brand_name  | varchar(40)            | NO   |     | NULL    |                |</span><br><span class=\"line\">| is_show     | tinyint(1)             | NO   |     | 1       |                |</span><br><span class=\"line\">| is_saleoff  | tinyint(1)             | NO   |     | 0       |                |</span><br><span class=\"line\">+-------------+------------------------+------+-----+---------+----------------+</span><br><span class=\"line\">7 rows in set (0.01 sec)</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>è¿™é‡Œéœ€è¦æ³¨æ„çš„æ˜¯priceä»·æ ¼ï¼Œå¹¶æ²¡æœ‰ä½¿ç”¨æµ®ç‚¹å‹ï¼Œç¬”è€…ä¹‹å‰å…¬å¸ç”¨çš„æ˜¯TINTINTå°±æ˜¯å­˜åˆ°åˆ†ã€‚è¿™é‡Œç”¨çš„æ˜¯DECIMALå®šç‚¹å‹ï¼Œä¿è¯é‡‘é¢çš„å‡†ç¡®ã€‚</li>\n</ul>\n<!--more-->\n\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\"># æ·»åŠ æµ‹è¯•æ•°æ®</span><br><span class=\"line\">INSERT t_goods (goods_name,goods_cate,brand_name,goods_price,is_show,is_saleoff) VALUES(&#39;R510VC 15.6è‹±å¯¸ç¬”è®°æœ¬&#39;,&#39;ç¬”è®°æœ¬&#39;,&#39;åç¡•&#39;,&#39;3399&#39;,DEFAULT,DEFAULT);</span><br><span class=\"line\"> INSERT t_goods (goods_name,goods_cate,brand_name,goods_price,is_show,is_saleoff) VALUES(&#39;Y400N 14.0è‹±å¯¸ç¬”è®°æœ¬ç”µè„‘&#39;,&#39;ç¬”è®°æœ¬&#39;,&#39;è”æƒ³&#39;,&#39;4899&#39;,DEFAULT,DEFAULT);</span><br><span class=\"line\"> INSERT t_goods (goods_name,goods_cate,brand_name,goods_price,is_show,is_saleoff) VALUES(&#39;G150TH 15.6è‹±å¯¸æ¸¸æˆæœ¬&#39;,&#39;æ¸¸æˆæœ¬&#39;,&#39;é›·ç¥&#39;,&#39;8499&#39;,DEFAULT,DEFAULT);</span><br><span class=\"line\"> INSERT t_goods (goods_name,goods_cate,brand_name,goods_price,is_show,is_saleoff) VALUES(&#39;X550CC 15.6è‹±å¯¸ç¬”è®°æœ¬&#39;,&#39;ç¬”è®°æœ¬&#39;,&#39;åç¡•&#39;,&#39;2799&#39;,DEFAULT,DEFAULT);</span><br><span class=\"line\"> INSERT t_goods (goods_name,goods_cate,brand_name,goods_price,is_show,is_saleoff) VALUES(&#39;X240(20ALA0EYCD) 12.5è‹±å¯¸è¶…ææœ¬&#39;,&#39;è¶…çº§æœ¬&#39;,&#39;è”æƒ³&#39;,&#39;4999&#39;,DEFAULT,DEFAULT);</span><br><span class=\"line\"> INSERT t_goods (goods_name,goods_cate,brand_name,goods_price,is_show,is_saleoff) VALUES(&#39;U330P 13.3è‹±å¯¸è¶…ææœ¬&#39;,&#39;è¶…çº§æœ¬&#39;,&#39;è”æƒ³&#39;,&#39;4299&#39;,DEFAULT,DEFAULT);</span><br><span class=\"line\"> INSERT t_goods (goods_name,goods_cate,brand_name,goods_price,is_show,is_saleoff) VALUES(&#39;SVP13226SCB 13.3è‹±å¯¸è§¦æ§è¶…ææœ¬&#39;,&#39;è¶…çº§æœ¬&#39;,&#39;ç´¢å°¼&#39;,&#39;7999&#39;,DEFAULT,DEFAULT);</span><br><span class=\"line\"> INSERT t_goods (goods_name,goods_cate,brand_name,goods_price,is_show,is_saleoff) VALUES(&#39;iPad mini MD531CH&#x2F;A 7.9è‹±å¯¸å¹³æ¿ç”µè„‘&#39;,&#39;å¹³æ¿ç”µè„‘&#39;,&#39;è‹¹æœ&#39;,&#39;1998&#39;,DEFAULT,DEFAULT);</span><br><span class=\"line\"> INSERT t_goods (goods_name,goods_cate,brand_name,goods_price,is_show,is_saleoff) VALUES(&#39;iPad Air MD788CH&#x2F;A 9.7è‹±å¯¸å¹³æ¿ç”µè„‘ ï¼ˆ16G WiFiç‰ˆï¼‰&#39;,&#39;å¹³æ¿ç”µè„‘&#39;,&#39;è‹¹æœ&#39;,&#39;3388&#39;,DEFAULT,DEFAULT);</span><br><span class=\"line\"> INSERT t_goods (goods_name,goods_cate,brand_name,goods_price,is_show,is_saleoff) VALUES(&#39; iPad mini ME279CH&#x2F;A é…å¤‡ Retina æ˜¾ç¤ºå± 7.9è‹±å¯¸å¹³æ¿ç”µè„‘ ï¼ˆ16G WiFiç‰ˆï¼‰&#39;,&#39;å¹³æ¿ç”µè„‘&#39;,&#39;è‹¹æœ&#39;,&#39;2788&#39;,DEFAULT,DEFAULT);</span><br><span class=\"line\"> INSERT t_goods (goods_name,goods_cate,brand_name,goods_price,is_show,is_saleoff) VALUES(&#39;IdeaCentre C340 20è‹±å¯¸ä¸€ä½“ç”µè„‘ &#39;,&#39;å°å¼æœº&#39;,&#39;è”æƒ³&#39;,&#39;3499&#39;,DEFAULT,DEFAULT);</span><br><span class=\"line\"> INSERT t_goods (goods_name,goods_cate,brand_name,goods_price,is_show,is_saleoff) VALUES(&#39;Vostro 3800-R1206 å°å¼ç”µè„‘&#39;,&#39;å°å¼æœº&#39;,&#39;æˆ´å°”&#39;,&#39;2899&#39;,DEFAULT,DEFAULT);</span><br><span class=\"line\"> INSERT t_goods (goods_name,goods_cate,brand_name,goods_price,is_show,is_saleoff) VALUES(&#39;iMac ME086CH&#x2F;A 21.5è‹±å¯¸ä¸€ä½“ç”µè„‘&#39;,&#39;å°å¼æœº&#39;,&#39;è‹¹æœ&#39;,&#39;9188&#39;,DEFAULT,DEFAULT);</span><br><span class=\"line\"> INSERT t_goods (goods_name,goods_cate,brand_name,goods_price,is_show,is_saleoff) VALUES(&#39;AT7-7414LP å°å¼ç”µè„‘ ï¼ˆi5-3450å››æ ¸ 4G 500G 2Gç‹¬æ˜¾ DVD é”®é¼  Linux ï¼‰&#39;,&#39;å°å¼æœº&#39;,&#39;å®ç¢&#39;,&#39;3699&#39;,DEFAULT,DEFAULT);</span><br><span class=\"line\"> INSERT t_goods (goods_name,goods_cate,brand_name,goods_price,is_show,is_saleoff) VALUES(&#39;Z220SFF F4F06PAå·¥ä½œç«™&#39;,&#39;æœåŠ¡å™¨&#x2F;å·¥ä½œç«™&#39;,&#39;æƒ æ™®&#39;,&#39;4288&#39;,DEFAULT,DEFAULT);</span><br><span class=\"line\"> INSERT t_goods (goods_name,goods_cate,brand_name,goods_price,is_show,is_saleoff) VALUES(&#39;PowerEdge T110 IIæœåŠ¡å™¨&#39;,&#39;æœåŠ¡å™¨&#x2F;å·¥ä½œç«™&#39;,&#39;æˆ´å°”&#39;,&#39;5388&#39;,DEFAULT,DEFAULT);</span><br><span class=\"line\"> INSERT t_goods (goods_name,goods_cate,brand_name,goods_price,is_show,is_saleoff) VALUES(&#39;Mac Pro MD878CH&#x2F;A ä¸“ä¸šçº§å°å¼ç”µè„‘&#39;,&#39;æœåŠ¡å™¨&#x2F;å·¥ä½œç«™&#39;,&#39;è‹¹æœ&#39;,&#39;28888&#39;,DEFAULT,DEFAULT);</span><br><span class=\"line\"> INSERT t_goods (goods_name,goods_cate,brand_name,goods_price,is_show,is_saleoff) VALUES(&#39; HMZ-T3W å¤´æˆ´æ˜¾ç¤ºè®¾å¤‡&#39;,&#39;ç¬”è®°æœ¬é…ä»¶&#39;,&#39;ç´¢å°¼&#39;,&#39;6999&#39;,DEFAULT,DEFAULT);</span><br><span class=\"line\"> INSERT t_goods (goods_name,goods_cate,brand_name,goods_price,is_show,is_saleoff) VALUES(&#39;å•†åŠ¡åŒè‚©èƒŒåŒ…&#39;,&#39;ç¬”è®°æœ¬é…ä»¶&#39;,&#39;ç´¢å°¼&#39;,&#39;99&#39;,DEFAULT,DEFAULT);</span><br><span class=\"line\"> INSERT t_goods (goods_name,goods_cate,brand_name,goods_price,is_show,is_saleoff) VALUES(&#39;X3250 M4æœºæ¶å¼æœåŠ¡å™¨ 2583i14&#39;,&#39;æœåŠ¡å™¨&#x2F;å·¥ä½œç«™&#39;,&#39;IBM&#39;,&#39;6888&#39;,DEFAULT,DEFAULT);</span><br><span class=\"line\"> INSERT t_goods (goods_name,goods_cate,brand_name,goods_price,is_show,is_saleoff) VALUES(&#39;ç„é¾™ç²¾è‹±ç‰ˆ ç¬”è®°æœ¬æ•£çƒ­å™¨&#39;,&#39;ç¬”è®°æœ¬é…ä»¶&#39;,&#39;ä¹å·é£ç¥&#39;,&#39;&#39;,DEFAULT,DEFAULT);</span><br><span class=\"line\"> INSERT t_goods (goods_name,goods_cate,brand_name,goods_price,is_show,is_saleoff) VALUES(&#39; HMZ-T3W å¤´æˆ´æ˜¾ç¤ºè®¾å¤‡&#39;,&#39;ç¬”è®°æœ¬é…ä»¶&#39;,&#39;ç´¢å°¼&#39;,&#39;6999&#39;,DEFAULT,DEFAULT);</span><br><span class=\"line\"> INSERT t_goods (goods_name,goods_cate,brand_name,goods_price,is_show,is_saleoff) VALUES(&#39;å•†åŠ¡åŒè‚©èƒŒåŒ…&#39;,&#39;ç¬”è®°æœ¬é…ä»¶&#39;,&#39;ç´¢å°¼&#39;,&#39;99&#39;,DEFAULT,DEFAULT);</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>æˆ‘ä»¬æ£€æŸ¥ä¸‹æ•°æ®ï¼Œè¿™é‡Œè´´å›¾ç‰‡ã€‚</li>\n</ul>\n<p><img src=\"https://z201.oss-cn-shanghai.aliyuncs.com/JavaNote/mysql/t_goods.jpg\"></p>\n<ul>\n<li>å½“ç„¶è¿˜å¦å¤–ä¸€ç§æ˜¾ç¤ºæ–¹å¼ <code>SELECT * FROM t_goods \\G:</code></li>\n<li>å¦å¤–goods_nameåç§°ä¸­å­˜åœ¨ç©ºæ ¼ï¼Œæˆ‘ä»¬ä½¿ç”¨ <code>TRIM</code>å‡½æ•°å¤„ç†ä¸€ä¸‹ã€‚</li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\"># æ›´æ–°goods_nameå­—æ®µã€‚</span><br><span class=\"line\">[root@localhost][Demo]&gt; UPDATE t_goods SET goods_name &#x3D; TRIM(goods_name);</span><br><span class=\"line\">Query OK, 4 rows affected (0.00 sec)</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>è¿™é‡Œä½¿ç”¨ä¸€äº›èšåˆå‡½æ•°æ¥åšæµ‹è¯•æ¯”å¦‚<code>AVG</code>ã€<code>SUM</code>ã€<code>MIN</code>ã€<code>MAX</code>ã€‚</li>\n</ul>\n<h5 id=\"ä½¿ç”¨-è¿ç®—ç¬¦-çš„å­æŸ¥è¯¢\"><a href=\"#ä½¿ç”¨-è¿ç®—ç¬¦-çš„å­æŸ¥è¯¢\" class=\"headerlink\" title=\"ä½¿ç”¨ è¿ç®—ç¬¦ çš„å­æŸ¥è¯¢\"></a>ä½¿ç”¨ è¿ç®—ç¬¦ çš„å­æŸ¥è¯¢</h5><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\"># è·å–goods_priceçš„å¹³å‡å€¼ã€‚</span><br><span class=\"line\">[root@localhost][Demo]&gt; SELECT AVG(goods_price) FROM t_goods;</span><br><span class=\"line\">+------------------+</span><br><span class=\"line\">| AVG(goods_price) |</span><br><span class=\"line\">+------------------+</span><br><span class=\"line\">|     5636.3636364 |</span><br><span class=\"line\">+------------------+</span><br><span class=\"line\">1 row in set (0.00 sec)</span><br><span class=\"line\"></span><br><span class=\"line\"># æŸ¥è¯¢ä»·æ ¼å¤§äºå¹³å‡å€¼çš„å•†å“ã€‚</span><br><span class=\"line\">[root@localhost][Demo]&gt; SELECT goods_id , goods_name , goods_price FROM t_goods WHERE goods_price &gt;&#x3D; 5636;</span><br><span class=\"line\">+----------+-----------------------------------------+-------------+</span><br><span class=\"line\">| goods_id | goods_name                              | goods_price |</span><br><span class=\"line\">+----------+-----------------------------------------+-------------+</span><br><span class=\"line\">|        3 | G150TH 15.6è‹±å¯¸æ¸¸æˆæœ¬                   |    8499.000 |</span><br><span class=\"line\">|        7 | SVP13226SCB 13.3è‹±å¯¸è§¦æ§è¶…ææœ¬          |    7999.000 |</span><br><span class=\"line\">|       13 | iMac ME086CH&#x2F;A 21.5è‹±å¯¸ä¸€ä½“ç”µè„‘         |    9188.000 |</span><br><span class=\"line\">|       17 | Mac Pro MD878CH&#x2F;A ä¸“ä¸šçº§å°å¼ç”µè„‘        |   28888.000 |</span><br><span class=\"line\">|       18 | HMZ-T3W å¤´æˆ´æ˜¾ç¤ºè®¾å¤‡                    |    6999.000 |</span><br><span class=\"line\">|       20 | X3250 M4æœºæ¶å¼æœåŠ¡å™¨ 2583i14            |    6888.000 |</span><br><span class=\"line\">|       21 | HMZ-T3W å¤´æˆ´æ˜¾ç¤ºè®¾å¤‡                    |    6999.000 |</span><br><span class=\"line\">+----------+-----------------------------------------+-------------+</span><br><span class=\"line\">7 rows in set (0.00 sec)</span><br><span class=\"line\"></span><br><span class=\"line\">#é‚£ä¹ˆé—®é¢˜æ¥äº†ï¼Œæˆ‘ä»¬æƒ³ä¸€æ¡SQLè¯­å¥å°±å®Œæˆè¯¥æ€ä¹ˆå¤„ç†ã€‚ä½¿ç”¨å­æŸ¥è¯¢å°±å¯ä»¥æ»¡è¶³ã€‚</span><br><span class=\"line\">[root@localhost][Demo]&gt; SELECT goods_id , goods_name , goods_price FROM t_goods WHERE goods_price &gt;&#x3D; (SELECT AVG(goods_price) FROM t_goods );</span><br><span class=\"line\">+----------+-----------------------------------------+-------------+</span><br><span class=\"line\">| goods_id | goods_name                              | goods_price |</span><br><span class=\"line\">+----------+-----------------------------------------+-------------+</span><br><span class=\"line\">|        3 | G150TH 15.6è‹±å¯¸æ¸¸æˆæœ¬                   |    8499.000 |</span><br><span class=\"line\">|        7 | SVP13226SCB 13.3è‹±å¯¸è§¦æ§è¶…ææœ¬          |    7999.000 |</span><br><span class=\"line\">|       13 | iMac ME086CH&#x2F;A 21.5è‹±å¯¸ä¸€ä½“ç”µè„‘         |    9188.000 |</span><br><span class=\"line\">|       17 | Mac Pro MD878CH&#x2F;A ä¸“ä¸šçº§å°å¼ç”µè„‘        |   28888.000 |</span><br><span class=\"line\">|       18 | HMZ-T3W å¤´æˆ´æ˜¾ç¤ºè®¾å¤‡                    |    6999.000 |</span><br><span class=\"line\">|       20 | X3250 M4æœºæ¶å¼æœåŠ¡å™¨ 2583i14            |    6888.000 |</span><br><span class=\"line\">|       21 | HMZ-T3W å¤´æˆ´æ˜¾ç¤ºè®¾å¤‡                    |    6999.000 |</span><br><span class=\"line\">+----------+-----------------------------------------+-------------+</span><br><span class=\"line\">7 rows in set (0.00 sec)</span><br><span class=\"line\"></span><br><span class=\"line\"># åœ¨æ¥æ¼”ç¤ºä¸‹æŸ¥è¯¢ goods_cate æ˜¯è¶…çº§æœ¬çš„å•†å“ä¿¡æ¯ã€‚</span><br><span class=\"line\">[root@localhost][Demo]&gt; SELECT goods_id , goods_name , goods_price , goods_cate FROM t_goods WHERE goods_cate &#x3D; &#39;è¶…çº§æœ¬&#39;;</span><br><span class=\"line\">+----------+---------------------------------------+-------------+------------+</span><br><span class=\"line\">| goods_id | goods_name                            | goods_price | goods_cate |</span><br><span class=\"line\">+----------+---------------------------------------+-------------+------------+</span><br><span class=\"line\">|        5 | X240(20ALA0EYCD) 12.5è‹±å¯¸è¶…ææœ¬       |    4999.000 | è¶…çº§æœ¬     |</span><br><span class=\"line\">|        6 | U330P 13.3è‹±å¯¸è¶…ææœ¬                  |    4299.000 | è¶…çº§æœ¬     |</span><br><span class=\"line\">|        7 | SVP13226SCB 13.3è‹±å¯¸è§¦æ§è¶…ææœ¬        |    7999.000 | è¶…çº§æœ¬     |</span><br><span class=\"line\">+----------+---------------------------------------+-------------+------------+</span><br><span class=\"line\">3 rows in set (0.00 sec)</span><br><span class=\"line\"></span><br><span class=\"line\"># å®é™…ä¸Šåœ¨å­æŸ¥è¯¢ä¸­ï¼Œç»å¸¸ä¼šå‡ºç°è¿”å›çš„å€¼ä¸æ˜¯ä¸€æ¡çš„é—®é¢˜ã€‚å¦‚ä¸‹æ¼”ç¤ºï¼Œæˆ‘ä»¬æƒ³è¦æŸ¥è¯¢goods_cateæ˜¯è¶…ææœ¬çš„å•†å“ä»·æ ¼ã€‚</span><br><span class=\"line\">[root@localhost][Demo]&gt; SELECT goods_id , goods_name , goods_price FROM t_goods WHERE goods_price &gt;&#x3D; ( SELECT goods_price FROM t_goods WHERE goods_cate &#x3D; &#39;è¶…çº§æœ¬&#39; );</span><br><span class=\"line\">ERROR 1242 (21000): Subquery returns more than 1 row</span><br><span class=\"line\"># è¿™é‡Œä¼šæŠ›å‡ºå¼‚å¸¸ï¼ŒæŒ‡æ˜è¿”å›çš„ç»“æœé›†è¶…è¿‡äº†ä¸€è¡Œã€‚</span><br><span class=\"line\"></span><br><span class=\"line\">#ä¸Šé¢çš„åˆ—å­ä¸­ï¼Œä½¿ç”¨äº†æ¯”è¾ƒè¿ç®—ç¬¦ï¼Œæ‰€ä»¥å¯ä»¥ä½¿ç”¨å­æŸ¥è¯¢ã€‚é‚£é…åˆä¿®é¥°å…³é”®å­—è¯•è¯•ã€‚</span><br><span class=\"line\"># ä½¿ç”¨å¤§äºç­‰äº &gt;&#x3D; æ·»åŠ ANYå…³é”®å­—çš„æ—¶å€™ï¼Œè·å–æœ€å°çš„ã€‚</span><br><span class=\"line\">[root@localhost][Demo]&gt; SELECT goods_id , goods_name , goods_price FROM t_goods WHERE goods_price &gt;&#x3D; ANY( SELECT goods_price FROM t_goods WHERE goods_cate &#x3D; &#39;è¶…çº§æœ¬&#39; );</span><br><span class=\"line\">+----------+-----------------------------------------+-------------+</span><br><span class=\"line\">| goods_id | goods_name                              | goods_price |</span><br><span class=\"line\">+----------+-----------------------------------------+-------------+</span><br><span class=\"line\">|        2 | Y400N 14.0è‹±å¯¸ç¬”è®°æœ¬ç”µè„‘                |    4899.000 |</span><br><span class=\"line\">|        3 | G150TH 15.6è‹±å¯¸æ¸¸æˆæœ¬                   |    8499.000 |</span><br><span class=\"line\">|        5 | X240(20ALA0EYCD) 12.5è‹±å¯¸è¶…ææœ¬         |    4999.000 |</span><br><span class=\"line\">|        6 | U330P 13.3è‹±å¯¸è¶…ææœ¬                    |    4299.000 |</span><br><span class=\"line\">|        7 | SVP13226SCB 13.3è‹±å¯¸è§¦æ§è¶…ææœ¬          |    7999.000 |</span><br><span class=\"line\">|       13 | iMac ME086CH&#x2F;A 21.5è‹±å¯¸ä¸€ä½“ç”µè„‘         |    9188.000 |</span><br><span class=\"line\">|       16 | PowerEdge T110 IIæœåŠ¡å™¨                 |    5388.000 |</span><br><span class=\"line\">|       17 | Mac Pro MD878CH&#x2F;A ä¸“ä¸šçº§å°å¼ç”µè„‘        |   28888.000 |</span><br><span class=\"line\">|       18 | HMZ-T3W å¤´æˆ´æ˜¾ç¤ºè®¾å¤‡                    |    6999.000 |</span><br><span class=\"line\">|       20 | X3250 M4æœºæ¶å¼æœåŠ¡å™¨ 2583i14            |    6888.000 |</span><br><span class=\"line\">|       21 | HMZ-T3W å¤´æˆ´æ˜¾ç¤ºè®¾å¤‡                    |    6999.000 |</span><br><span class=\"line\">+----------+-----------------------------------------+-------------+</span><br><span class=\"line\">11 rows in set (0.00 sec)</span><br><span class=\"line\"></span><br><span class=\"line\"># ä½¿ç”¨å¤§äºç­‰äº &gt;&#x3D; æ·»åŠ SOMEå…³é”®å­— ä¾ç„¶æ˜¯æœ€å°ã€‚</span><br><span class=\"line\">[root@localhost][Demo]&gt; SELECT goods_id , goods_name , goods_price FROM t_goods WHERE goods_price &gt;&#x3D; SOME( SELECT goods_price FROM t_goods WHERE goods_cate &#x3D; &#39;è¶…çº§æœ¬&#39; );</span><br><span class=\"line\">+----------+-----------------------------------------+-------------+</span><br><span class=\"line\">| goods_id | goods_name                              | goods_price |</span><br><span class=\"line\">+----------+-----------------------------------------+-------------+</span><br><span class=\"line\">|        2 | Y400N 14.0è‹±å¯¸ç¬”è®°æœ¬ç”µè„‘                |    4899.000 |</span><br><span class=\"line\">|        3 | G150TH 15.6è‹±å¯¸æ¸¸æˆæœ¬                   |    8499.000 |</span><br><span class=\"line\">|        5 | X240(20ALA0EYCD) 12.5è‹±å¯¸è¶…ææœ¬         |    4999.000 |</span><br><span class=\"line\">|        6 | U330P 13.3è‹±å¯¸è¶…ææœ¬                    |    4299.000 |</span><br><span class=\"line\">|        7 | SVP13226SCB 13.3è‹±å¯¸è§¦æ§è¶…ææœ¬          |    7999.000 |</span><br><span class=\"line\">|       13 | iMac ME086CH&#x2F;A 21.5è‹±å¯¸ä¸€ä½“ç”µè„‘         |    9188.000 |</span><br><span class=\"line\">|       16 | PowerEdge T110 IIæœåŠ¡å™¨                 |    5388.000 |</span><br><span class=\"line\">|       17 | Mac Pro MD878CH&#x2F;A ä¸“ä¸šçº§å°å¼ç”µè„‘        |   28888.000 |</span><br><span class=\"line\">|       18 | HMZ-T3W å¤´æˆ´æ˜¾ç¤ºè®¾å¤‡                    |    6999.000 |</span><br><span class=\"line\">|       20 | X3250 M4æœºæ¶å¼æœåŠ¡å™¨ 2583i14            |    6888.000 |</span><br><span class=\"line\">|       21 | HMZ-T3W å¤´æˆ´æ˜¾ç¤ºè®¾å¤‡                    |    6999.000 |</span><br><span class=\"line\">+----------+-----------------------------------------+-------------+</span><br><span class=\"line\">11 rows in set (0.00 sec)</span><br><span class=\"line\"></span><br><span class=\"line\"># ä½¿ç”¨å¤§äºç­‰äº &gt;&#x3D; æ·»åŠ ALLå…³é”®å­— åˆ™æ˜¯æœ€å¤§ã€‚</span><br><span class=\"line\">[root@localhost][Demo]&gt; SELECT goods_id , goods_name , goods_price FROM t_goods WHERE goods_price &gt;&#x3D; ALL( SELECT goods_price FROM t_goods WHERE goods_cate &#x3D; &#39;è¶…çº§æœ¬&#39; );</span><br><span class=\"line\">+----------+-----------------------------------------+-------------+</span><br><span class=\"line\">| goods_id | goods_name                              | goods_price |</span><br><span class=\"line\">+----------+-----------------------------------------+-------------+</span><br><span class=\"line\">|        3 | G150TH 15.6è‹±å¯¸æ¸¸æˆæœ¬                   |    8499.000 |</span><br><span class=\"line\">|        7 | SVP13226SCB 13.3è‹±å¯¸è§¦æ§è¶…ææœ¬          |    7999.000 |</span><br><span class=\"line\">|       13 | iMac ME086CH&#x2F;A 21.5è‹±å¯¸ä¸€ä½“ç”µè„‘         |    9188.000 |</span><br><span class=\"line\">|       17 | Mac Pro MD878CH&#x2F;A ä¸“ä¸šçº§å°å¼ç”µè„‘        |   28888.000 |</span><br><span class=\"line\">+----------+-----------------------------------------+-------------+</span><br><span class=\"line\">4 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>é€šè¿‡ &gt;= é…åˆ <code>ANY</code>ã€<code>SOME</code> ã€<code>ALL</code>å…³é”®åšäº†æµ‹è¯•ï¼Œé‚£ä¹ˆå…¶å®ƒå‡ ç§è¿ç®—ç¬¦å°±ä¸æ¼”ç¤ºäº†ã€‚</li>\n</ul>\n<h5 id=\"ä½¿ç”¨-NOT-IN-çš„å­æŸ¥è¯¢\"><a href=\"#ä½¿ç”¨-NOT-IN-çš„å­æŸ¥è¯¢\" class=\"headerlink\" title=\"ä½¿ç”¨ [ NOT ] IN çš„å­æŸ¥è¯¢\"></a>ä½¿ç”¨ <code>[ NOT ] IN çš„å­æŸ¥è¯¢</code></h5><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\"># è¿™ä¸ªæ“ä½œç›¸å¯¹æ¯”è¾ƒå¥½ç†è§£ IN åŒ…å« NOT IN ä¸åŒ…å«</span><br><span class=\"line\">[root@localhost][Demo]&gt; SELECT goods_id , goods_name , goods_price FROM t_goods WHERE goods_price IN  ( SELECT goods_price FROM t_goods WHERE goods_cate &#x3D; &#39;è¶…çº§æœ¬&#39; );</span><br><span class=\"line\">+----------+---------------------------------------+-------------+</span><br><span class=\"line\">| goods_id | goods_name                            | goods_price |</span><br><span class=\"line\">+----------+---------------------------------------+-------------+</span><br><span class=\"line\">|        5 | X240(20ALA0EYCD) 12.5è‹±å¯¸è¶…ææœ¬       |    4999.000 |</span><br><span class=\"line\">|        6 | U330P 13.3è‹±å¯¸è¶…ææœ¬                  |    4299.000 |</span><br><span class=\"line\">|        7 | SVP13226SCB 13.3è‹±å¯¸è§¦æ§è¶…ææœ¬        |    7999.000 |</span><br><span class=\"line\">+----------+---------------------------------------+-------------+</span><br><span class=\"line\">3 rows in set (0.00 sec)</span><br><span class=\"line\"></span><br><span class=\"line\"># ä½¿ç”¨NOT IN å°±å’Œä¸Šé¢çš„ç»“æœæˆªç„¶ç›¸å</span><br><span class=\"line\">[root@localhost][Demo]&gt; SELECT goods_id, goods_price FROM t_goods WHERE goods_price NOT  IN  ( SELECT goods_price FROM t_goods WHERE goods_cate &#x3D; &#39;è¶…çº§æœ¬&#39; ); </span><br><span class=\"line\">+----------+-------------+</span><br><span class=\"line\">| goods_id | goods_price |</span><br><span class=\"line\">+----------+-------------+</span><br><span class=\"line\">|        1 |    3399.000 |</span><br><span class=\"line\">|        2 |    4899.000 |</span><br><span class=\"line\">|        3 |    8499.000 |</span><br><span class=\"line\">|        4 |    2799.000 |</span><br><span class=\"line\">|        8 |    1998.000 |</span><br><span class=\"line\">|        9 |    3388.000 |</span><br><span class=\"line\">|       10 |    2788.000 |</span><br><span class=\"line\">|       11 |    3499.000 |</span><br><span class=\"line\">|       12 |    2899.000 |</span><br><span class=\"line\">|       13 |    9188.000 |</span><br><span class=\"line\">|       14 |    3699.000 |</span><br><span class=\"line\">|       15 |    4288.000 |</span><br><span class=\"line\">|       16 |    5388.000 |</span><br><span class=\"line\">|       17 |   28888.000 |</span><br><span class=\"line\">|       18 |    6999.000 |</span><br><span class=\"line\">|       19 |      99.000 |</span><br><span class=\"line\">|       20 |    6888.000 |</span><br><span class=\"line\">|       21 |    6999.000 |</span><br><span class=\"line\">|       22 |      99.000 |</span><br><span class=\"line\">+----------+-------------+</span><br><span class=\"line\">19 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"ä½¿ç”¨-NOT-EXISTS-å­æŸ¥è¯¢\"><a href=\"#ä½¿ç”¨-NOT-EXISTS-å­æŸ¥è¯¢\" class=\"headerlink\" title=\"ä½¿ç”¨[NOT] EXISTS å­æŸ¥è¯¢\"></a>ä½¿ç”¨<code>[NOT] EXISTS</code> å­æŸ¥è¯¢</h5><ul>\n<li>ä¸ºäº†æ¼”ç¤ºè¯¥å­æŸ¥è¯¢ï¼Œéœ€è¦åœ¨æ·»åŠ ä¸€å¼ è¡¨ä¸å…¶é…åˆã€‚</li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\"># åˆ›å»ºä¸€å¼ t_goods_cateè¡¨å­˜å‚¨å•†å“åˆ†ç±»ä¿¡æ¯ã€‚</span><br><span class=\"line\">[root@localhost][Demo]&gt; CREATE TABLE IF NOT EXISTS t_goods_cates(</span><br><span class=\"line\">    -&gt; cate_id SMALLINT UNSIGNED PRIMARY KEY AUTO_INCREMENT ,</span><br><span class=\"line\">    -&gt; cate_name VARCHAR(40) NOT NULL</span><br><span class=\"line\">    -&gt; );</span><br><span class=\"line\">Query OK, 0 rows affected (0.07 sec)</span><br><span class=\"line\"></span><br><span class=\"line\">[root@localhost][Demo]&gt; SHOW COLUMNS FROM  t_goods_cates;</span><br><span class=\"line\">+-----------+----------------------+------+-----+---------+----------------+</span><br><span class=\"line\">| Field     | Type                 | Null | Key | Default | Extra          |</span><br><span class=\"line\">+-----------+----------------------+------+-----+---------+----------------+</span><br><span class=\"line\">| cate_id   | smallint(5) unsigned | NO   | PRI | NULL    | auto_increment |</span><br><span class=\"line\">| cate_name | varchar(40)          | NO   |     | NULL    |                |</span><br><span class=\"line\">+-----------+----------------------+------+-----+---------+----------------+</span><br><span class=\"line\">2 rows in set (0.00 sec)</span><br><span class=\"line\"></span><br><span class=\"line\"># ç°åœ¨è¿™å¼ è¡¨çš„æ•°æ®æ˜¯ç©ºçš„ï¼Œéœ€è¦å°†t_goods ä¸­ goods_cateä¿¡æ¯å†™å…¥è¿›æ¥ã€‚</span><br><span class=\"line\"># å…ˆçœ‹t_goods æœ‰å“ªäº›åˆ†ç±»ï¼›è¿™é‡Œä½¿ç”¨GROUP BY æ¥åšåˆ†ç»„æŸ¥è¯¢ã€‚</span><br><span class=\"line\">[root@localhost][Demo]&gt; SELECT goods_cate FROM t_goods GROUP BY goods_cate;</span><br><span class=\"line\">+---------------------+</span><br><span class=\"line\">| goods_cate          |</span><br><span class=\"line\">+---------------------+</span><br><span class=\"line\">| å°å¼æœº              |</span><br><span class=\"line\">| å¹³æ¿ç”µè„‘            |</span><br><span class=\"line\">| æœåŠ¡å™¨&#x2F;å·¥ä½œç«™       |</span><br><span class=\"line\">| æ¸¸æˆæœ¬              |</span><br><span class=\"line\">| ç¬”è®°æœ¬              |</span><br><span class=\"line\">| ç¬”è®°æœ¬é…ä»¶          |</span><br><span class=\"line\">| è¶…çº§æœ¬              |</span><br><span class=\"line\">+---------------------+</span><br><span class=\"line\">7 rows in set (0.00 sec)</span><br><span class=\"line\"></span><br><span class=\"line\"># ä½¿ç”¨INSERT...SEKECT æ–¹å¼æ¥æ’å…¥æ•°æ®åˆ°t_goods_catesã€‚</span><br><span class=\"line\">[root@localhost][Demo]&gt; INSERT INTO t_goods_cates(cate_name) SELECT goods_cate FROM t_goods GROUP BY goods_cate;</span><br><span class=\"line\">Query OK, 7 rows affected (0.01 sec)</span><br><span class=\"line\">Records: 7  Duplicates: 0  Warnings: 0</span><br><span class=\"line\"></span><br><span class=\"line\"># OKæ£€æŸ¥ä¸‹æ•°æ®æ˜¯å¦å½•å…¥æˆåŠŸã€‚</span><br><span class=\"line\">[root@localhost][Demo]&gt; SELECT * FROM t_goods_cates;</span><br><span class=\"line\">+---------+---------------------+</span><br><span class=\"line\">| cate_id | cate_name           |</span><br><span class=\"line\">+---------+---------------------+</span><br><span class=\"line\">|       1 | å°å¼æœº              |</span><br><span class=\"line\">|       2 | å¹³æ¿ç”µè„‘            |</span><br><span class=\"line\">|       3 | æœåŠ¡å™¨&#x2F;å·¥ä½œç«™       |</span><br><span class=\"line\">|       4 | æ¸¸æˆæœ¬              |</span><br><span class=\"line\">|       5 | ç¬”è®°æœ¬              |</span><br><span class=\"line\">|       6 | ç¬”è®°æœ¬é…ä»¶          |</span><br><span class=\"line\">|       7 | è¶…çº§æœ¬              |</span><br><span class=\"line\">+---------+---------------------+</span><br><span class=\"line\">7 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>è¿™ä¸ªæ—¶å€™æ‰“ç®—æŠŠæ“ä½œåè¿‡æ¥ï¼Œè®©t_goods è¡¨ä¸­çš„ goods_cate å­˜å‚¨ t_goods_cates ä¸­çš„ä¸»é”®ä¿¡æ¯ã€‚è€Œä¸åœ¨å­˜å‚¨å†…å®¹ã€‚</li>\n</ul>\n<h4 id=\"è¿æ¥æŸ¥è¯¢\"><a href=\"#è¿æ¥æŸ¥è¯¢\" class=\"headerlink\" title=\"è¿æ¥æŸ¥è¯¢\"></a>è¿æ¥æŸ¥è¯¢</h4><ul>\n<li>å°†å¤šå¼ è¡¨ï¼ˆè‡³å°‘å¤§äºç­‰äº2å¼ è¡¨ï¼‰æŒ‰ç…§æŸå¼ æŒ‡å®šçš„æ¡ä»¶æˆç«‹è¿›è¡ŒæŸ¥è¯¢ã€‚</li>\n</ul>\n<p><code>table_reference { [INNER | CROSS] JOIN | { LEFT | RIGHT } JOIN} table_reference ON conditional_expr </code></p>\n<ul>\n<li>è¿æ¥ç±»å‹<ul>\n<li><code>INNER JOIN</code>å†…è¿æ¥</li>\n<li>åœ¨Mysqlä¸­ <code>JOIN , CROSS JION å’Œ INNER JOIN </code>æ˜¯ç­‰ä»·çš„ã€‚</li>\n<li><code>LEFT [OUTER] JOIN</code> å·¦å¤–è¿æ¥ã€‚</li>\n<li><code>RIGHT [OUTER] JOIN</code> å³å¤–è¿æ¥ã€‚</li>\n</ul>\n</li>\n<li>è¿æ¥æ¡ä»¶<ul>\n<li>å¯ä»¥ä½¿ç”¨ONæ¥è®¾ç½®è¿æ¥æ¡ä»¶ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨WHEREæ¥ä»£æ›¿ã€‚</li>\n<li>ä½†æ˜¯é€šå¸¸ä½¿ç”¨ONå…³é”®å­—æ¥è®¾ç½®æ¡ä»¶ï¼ŒWHEREå…³é”®è¿›è¡Œç»“æœé›†çš„è¿‡æ»¤ã€‚</li>\n</ul>\n</li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\"># ä½¿ç”¨INNER JOIN å†…è¿æ¥æ¥å®Œæˆt_goodsè¡¨ä¸­ goods_cateå­—æ®µè®°å½•çš„æ›´æ–°ã€‚</span><br><span class=\"line\">[root@localhost][Demo]&gt; UPDATE t_goods INNER JOIN t_goods_cates ON t_goods.goods_cate &#x3D; t_goods_cates.cate_name SET t_goods.goods_cate &#x3D; t_goods_cates.cate_id;</span><br><span class=\"line\">Query OK, 22 rows affected (0.01 sec)</span><br><span class=\"line\">Rows matched: 22  Changed: 22  Warnings: 0</span><br><span class=\"line\"></span><br><span class=\"line\"># é‚£æˆ‘ä»¬åœ¨æ£€æŸ¥ä¸€ä¸‹</span><br><span class=\"line\">[root@localhost][Demo]&gt; SELECT goods_id  , goods_cate FROM t_goods;</span><br><span class=\"line\">+----------+------------+</span><br><span class=\"line\">| goods_id | goods_cate |</span><br><span class=\"line\">+----------+------------+</span><br><span class=\"line\">|        1 | 5          |</span><br><span class=\"line\">|        2 | 5          |</span><br><span class=\"line\">|        3 | 4          |</span><br><span class=\"line\">|        4 | 5          |</span><br><span class=\"line\">|        5 | 7          |</span><br><span class=\"line\">|        6 | 7          |</span><br><span class=\"line\">|        7 | 7          |</span><br><span class=\"line\">|        8 | 2          |</span><br><span class=\"line\">|        9 | 2          |</span><br><span class=\"line\">|       10 | 2          |</span><br><span class=\"line\">|       11 | 1          |</span><br><span class=\"line\">|       12 | 1          |</span><br><span class=\"line\">|       13 | 1          |</span><br><span class=\"line\">|       14 | 1          |</span><br><span class=\"line\">|       15 | 3          |</span><br><span class=\"line\">|       16 | 3          |</span><br><span class=\"line\">|       17 | 3          |</span><br><span class=\"line\">|       18 | 6          |</span><br><span class=\"line\">|       19 | 6          |</span><br><span class=\"line\">|       20 | 3          |</span><br><span class=\"line\">|       21 | 6          |</span><br><span class=\"line\">|       22 | 6          |</span><br><span class=\"line\">+----------+------------+</span><br><span class=\"line\">22 rows in set (0.00 sec)</span><br><span class=\"line\"></span><br><span class=\"line\"># è¿™é‡Œæœ€å¥½å°†t_goods é‡Œé¢ goods_cate çš„å­—æ®µç±»å‹ä¿®æ”¹ä¸€ä¸‹ï¼Œæ¯•ç«Ÿå·²ç»ä¸æ˜¯å­˜å‚¨å­—ç¬¦ä¸²äº†ï¼Œè€Œæ˜¯å­˜å‚¨å…³è”è¡¨ä¸»é”®ã€‚</span><br><span class=\"line\"># å°†t_goods è¡¨ä¸­ goods_cate ä¿®æ”¹æˆ cate_id ç±»å‹ä¸º SMALLINT UNSIGNED;</span><br><span class=\"line\"></span><br><span class=\"line\">[root@localhost][Demo]&gt; ALTER TABLE t_goods MODIFY cate_id SMALLINT UNSIGNED NOT NULL;</span><br><span class=\"line\">Query OK, 0 rows affected (0.22 sec)</span><br><span class=\"line\">Records: 22  Duplicates: 0  Warnings: 0</span><br><span class=\"line\"></span><br><span class=\"line\"># t_goodsè¡¨ä¸­æœ‰ä¸€ä¸ªå­—æ®µ brand_name åœ¨æ­¤å¯¹è¡¨è¿›è¡Œæ”¹é€ ã€‚è¿™é‡Œåˆ›å»ºä¸€å¼ å“ç‰Œè¡¨ t_goods_brandã€‚</span><br><span class=\"line\">[root@localhost][Demo]&gt; CREATE TABLE t_goods_brand(</span><br><span class=\"line\">    -&gt; id SMALLINT UNSIGNED PRIMARY KEY AUTO_INCREMENT,</span><br><span class=\"line\">    -&gt; brand_name VARCHAR(40) NOT NULL</span><br><span class=\"line\">    -&gt; )</span><br><span class=\"line\">    -&gt; ;</span><br><span class=\"line\">Query OK, 0 rows affected (0.11 sec)</span><br><span class=\"line\"></span><br><span class=\"line\"># æ£€æŸ¥è¡¨ç»“æ„</span><br><span class=\"line\">[root@localhost][Demo]&gt; SHOW COLUMNS FROM t_goods_brand;</span><br><span class=\"line\">+------------+----------------------+------+-----+---------+----------------+</span><br><span class=\"line\">| Field      | Type                 | Null | Key | Default | Extra          |</span><br><span class=\"line\">+------------+----------------------+------+-----+---------+----------------+</span><br><span class=\"line\">| id         | smallint(5) unsigned | NO   | PRI | NULL    | auto_increment |</span><br><span class=\"line\">| brand_name | varchar(40)          | NO   |     | NULL    |                |</span><br><span class=\"line\">+------------+----------------------+------+-----+---------+----------------+</span><br><span class=\"line\">2 rows in set (0.00 sec)</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"># å°†t_goodsè¡¨ä¸­çš„brand_name å»é‡åæ·»åŠ åˆ°t_goods_brandä¸­ã€‚</span><br><span class=\"line\">[root@localhost][Demo]&gt; INSERT t_goods_brand(brand_name) SELECT brand_name FROM t_goods GROUP BY brand_name;</span><br><span class=\"line\">Query OK, 9 rows affected (0.01 sec)</span><br><span class=\"line\">Records: 9  Duplicates: 0  Warnings: 0</span><br><span class=\"line\"></span><br><span class=\"line\"># æŸ¥è¯¢ç»“æœ</span><br><span class=\"line\">[root@localhost][Demo]&gt; SELECT * FROM t_goods_brand;</span><br><span class=\"line\">+----+------------+</span><br><span class=\"line\">| id | brand_name |</span><br><span class=\"line\">+----+------------+</span><br><span class=\"line\">|  1 | IBM        |</span><br><span class=\"line\">|  2 | åç¡•       |</span><br><span class=\"line\">|  3 | å®ç¢       |</span><br><span class=\"line\">|  4 | æƒ æ™®       |</span><br><span class=\"line\">|  5 | æˆ´å°”       |</span><br><span class=\"line\">|  6 | ç´¢å°¼       |</span><br><span class=\"line\">|  7 | è”æƒ³       |</span><br><span class=\"line\">|  8 | è‹¹æœ       |</span><br><span class=\"line\">|  9 | é›·ç¥       |</span><br><span class=\"line\">+----+------------+</span><br><span class=\"line\">9 rows in set (0.00 sec)</span><br><span class=\"line\"></span><br><span class=\"line\"># æ›´æ–°t_goodsè¡¨ä¸­brand_name å­—æ®µæ—¶æœŸå­˜å‚¨t_goods_brandä¸»é”®ä¿¡æ¯ã€‚</span><br><span class=\"line\">[root@localhost][Demo]&gt; UPDATE t_goods INNER JOIN t_goods_brand ON t_goods.brand_name &#x3D; t_goods_brand.brand_name SET t_goods.braand_name &#x3D; t_goods_brand.id;</span><br><span class=\"line\">Query OK, 22 rows affected (0.01 sec)</span><br><span class=\"line\">Rows matched: 22  Changed: 22  Warnings: 0</span><br><span class=\"line\"></span><br><span class=\"line\"># æ£€æŸ¥ä¸‹æ•ˆæœ</span><br><span class=\"line\">[root@localhost][Demo]&gt; SELECT goods_id , brand_name FROM t_goods;</span><br><span class=\"line\">+----------+------------+</span><br><span class=\"line\">| goods_id | brand_name |</span><br><span class=\"line\">+----------+------------+</span><br><span class=\"line\">|        1 | 2          |</span><br><span class=\"line\">|        2 | 7          |</span><br><span class=\"line\">|        3 | 9          |</span><br><span class=\"line\">|        4 | 2          |</span><br><span class=\"line\">|        5 | 7          |</span><br><span class=\"line\">|        6 | 7          |</span><br><span class=\"line\">|        7 | 6          |</span><br><span class=\"line\">|        8 | 8          |</span><br><span class=\"line\">|        9 | 8          |</span><br><span class=\"line\">|       10 | 8          |</span><br><span class=\"line\">|       11 | 7          |</span><br><span class=\"line\">|       12 | 5          |</span><br><span class=\"line\">|       13 | 8          |</span><br><span class=\"line\">|       14 | 3          |</span><br><span class=\"line\">|       15 | 4          |</span><br><span class=\"line\">|       16 | 5          |</span><br><span class=\"line\">|       17 | 8          |</span><br><span class=\"line\">|       18 | 6          |</span><br><span class=\"line\">|       19 | 6          |</span><br><span class=\"line\">|       20 | 1          |</span><br><span class=\"line\">|       21 | 6          |</span><br><span class=\"line\">|       22 | 6          |</span><br><span class=\"line\">+----------+------------+</span><br><span class=\"line\">22 rows in set (0.00 sec)</span><br><span class=\"line\"></span><br><span class=\"line\"># OK å†æŠŠt_goods ä¸­ brand_name å­—æ®µè¿›è¡Œä¿®æ”¹ã€‚</span><br><span class=\"line\">[root@localhost][Demo]&gt; ALTER TABLE t_goods CHANGE brand_name brand_id SMALLINT UNSIGNED NOT NULL;</span><br><span class=\"line\">Query OK, 22 rows affected (0.22 sec)</span><br><span class=\"line\">Records: 22  Duplicates: 0  Warnings: 0</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>ä¸ºä»€ä¹ˆä¸€å®šè¦ä¿®æ”¹å­—æ®µçš„å±æ€§ï¼Œè¿™æ ·åšä¸»è¦æ˜¯ä¸ºäº†åšé€‚å½“è°ƒæ•´ç»“æ„ã€‚æ•°å­—å’Œå­—ç¬¦ä¸²å ç”¨çš„å¤§å°è¦å°çš„å¤šã€‚</li>\n<li>è¿™é‡Œt_goods è¡¨ä¸­çš„ <code>cate_id</code> å’Œ<code>brand_id </code>ç”±äºä¸æ˜¯ç‰©ç†å¤–é”®ï¼Œæ‰€ä»¥çº¦æŸæœºä¼šæ²¡æœ‰ã€‚ä¹Ÿå°±æ˜¯è¯´å“ªæ€•æ’å…¥t_goodsè¡¨çš„æ—¶å€™ï¼Œ<code>cate_id</code> å’Œ <code>brand_id</code> åœ¨t_goods_cates å’Œ t_goods_brandè¡¨ä¸­éƒ½ä¸å­˜åœ¨ï¼Œä¾ç„¶æ˜¯å¯ä»¥æ’å…¥ã€‚ä½†æ˜¯æ•°æ®ä¸å®Œæ•´ã€‚</li>\n</ul>\n<h5 id=\"å†…è¿æ¥\"><a href=\"#å†…è¿æ¥\" class=\"headerlink\" title=\"å†…è¿æ¥\"></a>å†…è¿æ¥</h5><p><img src=\"https://z201.oss-cn-shanghai.aliyuncs.com/JavaNote/mysql/mysql_inner_join.jpg\"></p>\n<ul>\n<li>å†…è¿æ¥æŸ¥è¯¢çš„æ˜¯ç›¸äº¤éƒ¨åˆ†çš„æ•°æ®</li>\n</ul>\n<p><img src=\"https://z201.oss-cn-shanghai.aliyuncs.com/JavaNote/mysql/inner_join.jpg\"></p>\n<h5 id=\"å·¦å¤–è¿æ¥\"><a href=\"#å·¦å¤–è¿æ¥\" class=\"headerlink\" title=\"å·¦å¤–è¿æ¥\"></a>å·¦å¤–è¿æ¥</h5><p><img src=\"https://z201.oss-cn-shanghai.aliyuncs.com/JavaNote/mysql/mysq_left_join.jpg\"></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\"># è¿™é‡Œä¸ºäº†æ¼”ç¤ºå…¶æ•ˆæœï¼Œæˆ‘ä»¬åœ¨t_goodsè¡¨ä¸­æ·»åŠ ä¸€ä¸ªæ¨¡æ‹Ÿæ•°æ®ï¼Œè¿™æ¡æ•°æ®çš„cates_id æ˜¯ä¸å­˜åœ¨ä¸t_goods_catesè¡¨ä¸­çš„ã€‚</span><br><span class=\"line\">INSERT t_goods(goods_name,cate_id,brand_id,goods_price) VALUES(&#39; LaserJet Pro P1606dn é»‘ç™½æ¿€å…‰æ‰“å°æœº&#39;,&#39;12&#39;,&#39;4&#39;,&#39;1849&#39;);</span><br><span class=\"line\">Query OK, 1 row affected (0.00 sec)</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>å°†<code>INNER JOIN æ”¹æˆ LEFT JOIN </code>çœ‹çœ‹ç»“æœ</li>\n</ul>\n<p><img src=\"https://z201.oss-cn-shanghai.aliyuncs.com/JavaNote/mysql/left_join.jpg\"></p>\n<ul>\n<li>è¿™é‡Œå¯ä»¥çœ‹ä½23æ¡è®°å½•çš„cate_nameæ˜¯nullã€‚</li>\n</ul>\n<h5 id=\"å³å¤–è¿æ¥\"><a href=\"#å³å¤–è¿æ¥\" class=\"headerlink\" title=\"å³å¤–è¿æ¥\"></a>å³å¤–è¿æ¥</h5><p><img src=\"https://z201.oss-cn-shanghai.aliyuncs.com/JavaNote/mysql/mysql_right_join.jpg\"></p>\n<ul>\n<li>å°†<code>LEFT JOIN æ”¹æˆ  RIGHT JOIN</code> è¯•è¯•ã€‚</li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\"># åœ¨ t_goods_cates è¡¨ä¸­æ·»åŠ è®°å½•</span><br><span class=\"line\">[root@localhost][Demo]&gt; INSERT t_goods_cates(cate_name) VALUES(&#39;è·¯ç”±å™¨&#39;),(&#39;äº¤æ¢æœº&#39;),(&#39;ç½‘å¡&#39;);</span><br><span class=\"line\">Query OK, 3 rows affected (0.01 sec)</span><br><span class=\"line\">Records: 3  Duplicates: 0  Warnings: 0</span><br></pre></td></tr></table></figure>\n\n<p><img src=\"https://z201.oss-cn-shanghai.aliyuncs.com/JavaNote/mysql/right_join.jpg\"></p>\n<ul>\n<li>è¿™é‡Œå¯ä»¥çœ‹åˆ°ä¼˜å…ˆæ˜¾ç¤ºt_goods_catesè¡¨ä¸­çš„æ•°æ®ã€‚å’Œå·¦å¤–è¿æ¥åˆšåˆšå¥½ç›¸åã€‚</li>\n</ul>\n<h5 id=\"å¤šè¡¨è¿æ¥\"><a href=\"#å¤šè¡¨è¿æ¥\" class=\"headerlink\" title=\"å¤šè¡¨è¿æ¥\"></a>å¤šè¡¨è¿æ¥</h5><blockquote>\n<p>ç°åœ¨ä»¥åŠå­˜åœ¨t_goods ã€ t_goods_cates ã€ t_goods_brand è¡¨ï¼Œè¿™æ¬¡åŒæ—¶æŸ¥è¯¢ä¸€ä¸ªå•†å“è¡¨ç»“æœé›†åˆã€‚</p>\n</blockquote>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\"># å†…é“¾æ¥ä¸‰å¼ è¡¨æŸ¥è¯¢ç»“æœé›†åˆã€‚</span><br><span class=\"line\">[root@localhost][Demo]&gt; SELECT g.goods_id , g.goods_name , g.goods_price , gc.cate_name , gb.brand_name FROM t_goods AS g INNER JOIN t_goods_cates AS gc ON g.cate_id &#x3D; gc.cate_id INNER JOIN t_goods_brand AS gb ON g.brand_id &#x3D; gb.id ;</span><br></pre></td></tr></table></figure>\n\n<p><img src=\"https://z201.oss-cn-shanghai.aliyuncs.com/JavaNote/mysql/%E4%B8%89%E5%BC%A0%E8%A1%A8%E5%86%85%E8%BF%9E%E6%8E%A5%E7%BB%93%E6%9E%9C.jpg\"></p>\n<ul>\n<li>è¿™é‡Œåªä¼šå§ç¬¦åˆå†…è¿æ¥æ¡ä»¶çš„æ•°æ®å±•ç¤ºå‡ºæ¥ã€‚</li>\n</ul>\n<h5 id=\"æ³¨æ„äº‹é¡¹\"><a href=\"#æ³¨æ„äº‹é¡¹\" class=\"headerlink\" title=\"æ³¨æ„äº‹é¡¹\"></a>æ³¨æ„äº‹é¡¹</h5><ul>\n<li><code>t_goods LEFT JOIN t_goods_cates join_condition</code><ul>\n<li>t_goods_cates è¡¨ä¸­çš„ç»“æœé›†ä¾èµ– t_goods</li>\n<li>å¦‚æœä½¿ç”¨å†…è¿æ¥æŸ¥æ‰¾è®°å½•åœ¨è¿æ¥æ•°æ®è¡¨ä¸­ä¸å­˜åœ¨ï¼Œå¹¶ä¸”åœ¨WHERE è¯­å¥ä¸­å°è¯•å®šä¹‰äº†: <code>columns_name IS NULL </code>æ—¶ï¼ˆå°±æ˜¯è¿™ä¸ªå­—æ®µå¯ä»¥ä¸ºNULLçš„æ—¶å€™ï¼‰ï¼Œå¦‚æœ<code>columns_name </code>è¢«å®šä¹‰ä¸º<code>NOT NULL</code>ï¼ˆè¿™ä¸ªå­—æ®µä¸èƒ½ä¸ºNULLï¼‰ï¼ŒMysqlå°†åœ¨æ‰¾åˆ°ç¬¦åˆæ¡ä»¶çš„è®°å½•ååœæ­¢æœç´¢æ›´å¤šçš„è¡Œã€‚å› ä¸ºè¿™ä¸ªæ“ä½œæ˜¯å†²çªçš„ã€‚</li>\n</ul>\n</li>\n</ul>\n<h5 id=\"è‡ªè¿æ¥\"><a href=\"#è‡ªè¿æ¥\" class=\"headerlink\" title=\"è‡ªè¿æ¥\"></a>è‡ªè¿æ¥</h5><blockquote>\n<p>å¾ˆå¤šæƒ…å†µä¸‹ï¼Œå¯èƒ½ä¼šå‡ºç°ä¸€å¼ è¡¨è‡ªå…³è”ï¼Œç‰¹åˆ«æ˜¯åœ¨å•†åŸé¡¹ç›®çš„å•†å“ç±»å‹è¿™ç§ã€‚æ‰€ä»¥è¿™é‡Œåœ¨ä¸¾ä¸ªä¾‹å­ã€‚</p>\n</blockquote>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\"># åˆ›å»ºä¸€å¼ å•†å“ç±»å‹è¡¨t_goods_types</span><br><span class=\"line\">[root@localhost][Demo]&gt; CREATE TABLE t_goods_types(</span><br><span class=\"line\">    -&gt; type_id SMALLINT UNSIGNED PRIMARY KEY AUTO_INCREMENT,</span><br><span class=\"line\">    -&gt; type_name VARCHAR(20) NOT NULL,</span><br><span class=\"line\">    -&gt; parent_id SMALLINT UNSIGNED NOT NULL DEFAULT 0</span><br><span class=\"line\">    -&gt; );</span><br><span class=\"line\">Query OK, 0 rows affected (0.13 sec)</span><br><span class=\"line\"></span><br><span class=\"line\">  INSERT t_goods_types(type_name,parent_id) VALUES(&#39;å®¶ç”¨ç”µå™¨&#39;,DEFAULT);</span><br><span class=\"line\">  INSERT t_goods_types(type_name,parent_id) VALUES(&#39;ç”µè„‘ã€åŠå…¬&#39;,DEFAULT);</span><br><span class=\"line\">  INSERT t_goods_types(type_name,parent_id) VALUES(&#39;å¤§å®¶ç”µ&#39;,1);</span><br><span class=\"line\">  INSERT t_goods_types(type_name,parent_id) VALUES(&#39;ç”Ÿæ´»ç”µå™¨&#39;,1);</span><br><span class=\"line\">  INSERT t_goods_types(type_name,parent_id) VALUES(&#39;å¹³æ¿ç”µè§†&#39;,3);</span><br><span class=\"line\">  INSERT t_goods_types(type_name,parent_id) VALUES(&#39;ç©ºè°ƒ&#39;,3);</span><br><span class=\"line\">  INSERT t_goods_types(type_name,parent_id) VALUES(&#39;ç”µé£æ‰‡&#39;,4);</span><br><span class=\"line\">  INSERT t_goods_types(type_name,parent_id) VALUES(&#39;é¥®æ°´æœº&#39;,4);</span><br><span class=\"line\">  INSERT t_goods_types(type_name,parent_id) VALUES(&#39;ç”µè„‘æ•´æœº&#39;,2);</span><br><span class=\"line\">  INSERT t_goods_types(type_name,parent_id) VALUES(&#39;ç”µè„‘é…ä»¶&#39;,2);</span><br><span class=\"line\">  INSERT t_goods_types(type_name,parent_id) VALUES(&#39;ç¬”è®°æœ¬&#39;,9);</span><br><span class=\"line\">  INSERT t_goods_types(type_name,parent_id) VALUES(&#39;è¶…çº§æœ¬&#39;,9);</span><br><span class=\"line\">  INSERT t_goods_types(type_name,parent_id) VALUES(&#39;æ¸¸æˆæœ¬&#39;,9);</span><br><span class=\"line\">  INSERT t_goods_types(type_name,parent_id) VALUES(&#39;CPU&#39;,10);</span><br><span class=\"line\">  INSERT tdb_goods_types(type_name,parent_id) VALUES(&#39;ä¸»æœº&#39;,10);</span><br><span class=\"line\"></span><br><span class=\"line\"># æ£€æŸ¥æ’å…¥æ•°æ®ç»“æœã€‚</span><br><span class=\"line\">[root@localhost][Demo]&gt; SELECT * FROM t_goods_types;</span><br><span class=\"line\">+---------+-----------------+-----------+</span><br><span class=\"line\">| type_id | type_name       | parent_id |</span><br><span class=\"line\">+---------+-----------------+-----------+</span><br><span class=\"line\">|       1 | å®¶ç”¨ç”µå™¨        |         0 |</span><br><span class=\"line\">|       2 | ç”µè„‘ã€åŠå…¬      |         0 |</span><br><span class=\"line\">|       3 | å¤§å®¶ç”µ          |         1 |</span><br><span class=\"line\">|       4 | ç”Ÿæ´»ç”µå™¨        |         1 |</span><br><span class=\"line\">|       5 | å¹³æ¿ç”µè§†        |         3 |</span><br><span class=\"line\">|       6 | ç©ºè°ƒ            |         3 |</span><br><span class=\"line\">|       7 | ç”µé£æ‰‡          |         4 |</span><br><span class=\"line\">|       8 | é¥®æ°´æœº          |         4 |</span><br><span class=\"line\">|       9 | ç”µè„‘æ•´æœº        |         2 |</span><br><span class=\"line\">|      10 | ç”µè„‘é…ä»¶        |         2 |</span><br><span class=\"line\">|      11 | ç¬”è®°æœ¬          |         9 |</span><br><span class=\"line\">|      12 | è¶…çº§æœ¬          |         9 |</span><br><span class=\"line\">|      13 | æ¸¸æˆæœ¬          |         9 |</span><br><span class=\"line\">|      14 | CPU             |        10 |</span><br><span class=\"line\">+---------+-----------------+-----------+</span><br><span class=\"line\">14 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>è¿™é‡Œå¯ä»¥çœ‹åˆ°t_goods_typsä¸­å­˜åœ¨ä¸€ä¸ªå­—æ®µparent_idï¼Œå¦‚æœä¸æ˜¯0å³è¡¨ç¤ºæœ‰ä¸Šçº§ç±»åˆ«ï¼Œè€Œä¸Šçº§åˆ—è¡¨æ˜¯æŒ‡type_idã€‚</li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\"># å°è¯•æŸ¥è¯¢ä¸€æ¬¡å‚è€ƒå­ç±»çš„ä¿¡æ¯ã€‚</span><br><span class=\"line\">[root@localhost][Demo]&gt; SELECT t.type_id , t.type_name , p.type_name AS parent_name FROM t_goods_types AS t LEFT JOIN t_goods_types AS p ON t.paarent_id &#x3D; p.type_id;</span><br><span class=\"line\">+---------+-----------------+-----------------+</span><br><span class=\"line\">| type_id | type_name       | parent_name     |</span><br><span class=\"line\">+---------+-----------------+-----------------+</span><br><span class=\"line\">|       1 | å®¶ç”¨ç”µå™¨        | NULL            |</span><br><span class=\"line\">|       2 | ç”µè„‘ã€åŠå…¬      | NULL            |</span><br><span class=\"line\">|       3 | å¤§å®¶ç”µ          | å®¶ç”¨ç”µå™¨        |</span><br><span class=\"line\">|       4 | ç”Ÿæ´»ç”µå™¨        | å®¶ç”¨ç”µå™¨        |</span><br><span class=\"line\">|       5 | å¹³æ¿ç”µè§†        | å¤§å®¶ç”µ          |</span><br><span class=\"line\">|       6 | ç©ºè°ƒ            | å¤§å®¶ç”µ          |</span><br><span class=\"line\">|       7 | ç”µé£æ‰‡          | ç”Ÿæ´»ç”µå™¨        |</span><br><span class=\"line\">|       8 | é¥®æ°´æœº          | ç”Ÿæ´»ç”µå™¨        |</span><br><span class=\"line\">|       9 | ç”µè„‘æ•´æœº        | ç”µè„‘ã€åŠå…¬      |</span><br><span class=\"line\">|      10 | ç”µè„‘é…ä»¶        | ç”µè„‘ã€åŠå…¬      |</span><br><span class=\"line\">|      11 | ç¬”è®°æœ¬          | ç”µè„‘æ•´æœº        |</span><br><span class=\"line\">|      12 | è¶…çº§æœ¬          | ç”µè„‘æ•´æœº        |</span><br><span class=\"line\">|      13 | æ¸¸æˆæœ¬          | ç”µè„‘æ•´æœº        |</span><br><span class=\"line\">|      14 | CPU             | ç”µè„‘é…ä»¶        |</span><br><span class=\"line\">+---------+-----------------+-----------------+</span><br><span class=\"line\">14 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"è¿æ¥æŸ¥è¯¢å°ç»“\"><a href=\"#è¿æ¥æŸ¥è¯¢å°ç»“\" class=\"headerlink\" title=\"è¿æ¥æŸ¥è¯¢å°ç»“\"></a>è¿æ¥æŸ¥è¯¢å°ç»“</h5><blockquote>\n<p>JOINä½œä¸ºç»å¸¸ä½¿ç”¨çš„å…³é”®å­—ä¹‹ä¸€ï¼Œä½¿ç”¨çš„æ˜¯å¦æ­£ç¡®ç›´æ¥å½±å“åˆ°æŸ¥è¯¢ç»“æœå’ŒæŸ¥è¯¢æ•ˆç‡ã€‚</p>\n</blockquote>\n<p>SQLæ ‡å‡†çš„JOINç±»å‹</p>\n<ul>\n<li>å†…è¿æ¥<code>INNER</code></li>\n<li>å…¨å¤–è¿æ¥<code>FULL OUTER</code> åœ¨mysqlä¸­å¹¶ä¸èƒ½ç›´æ¥ä½¿ç”¨ã€‚</li>\n<li>å·¦å¤–è¿æ¥<code>LEFT OUTER</code></li>\n<li>å³å¤–è¿æ¥<code>RIGHT OUTER</code></li>\n<li>äº¤å‰è¿æ¥<code>CROSS</code></li>\n</ul>\n","categories":["å®è·µ"],"tags":["MySQL"]},{"title":"MySQLåŸºç¡€ï¼ˆä¸€ï¼‰","url":"/posts/181825268/","content":"<blockquote>\n<p>æœ¬ç« æ˜¯æ•´ç†çŸ¥è¯†å†…å®¹ï¼Œä¸ºå¼ºåŒ–çŸ¥è¯†é•¿æœŸæ›´æ–°ã€‚</p>\n</blockquote>\n<h2 id=\"Mysqlä»‹ç»\"><a href=\"#Mysqlä»‹ç»\" class=\"headerlink\" title=\"Mysqlä»‹ç»\"></a>Mysqlä»‹ç»</h2><ul>\n<li>Mysqlæ•°æ®åº“æ˜¯ä¸€ç§<code>C\\S</code>ç»“æ„ï¼Œå°±æ˜¯å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯ã€‚</li>\n<li>å…³é”®å­—<ol>\n<li>DB : <code>DataBase</code> æ•°æ®åº“</li>\n<li>DBMSï¼š<code>Database Management System</code>æ•°æ®åº“ç®¡ç†ç³»ç»Ÿ</li>\n<li>DBSï¼š<code>Database System = DBMS + DB</code>æ•°æ®åº“ç³»ç»Ÿ</li>\n<li>DBAï¼š<code>Database Administrator</code> æ•°æ®åº“ç®¡ç†å‘˜</li>\n<li>è¡Œ\\åˆ—ï¼šäºŒç»´è¡¨ä¸­å­˜å‚¨çš„æ•°æ®ã€‚<ol>\n<li>è¡Œ<code>row\\record</code> ï¼ˆä¸€æ¡è®°å½•ï¼‰ã€‚</li>\n<li>åˆ—<code>column\\field</code>ï¼ˆä¸€ä¸ªå­—æ®µï¼‰ã€‚</li>\n</ol>\n</li>\n</ol>\n</li>\n<li>SQL</li>\n</ul>\n<blockquote>\n<p>SQLï¼šStructured Query Languageï¼Œç»“æ„åŒ–æŸ¥è¯¢è¯­è¨€ï¼ˆæ•°æ®ä»¥æŸ¥è¯¢ä¸ºä¸»ï¼Œ99% éƒ½æ˜¯åœ¨è¿›è¡ŒæŸ¥è¯¢æ“ä½œï¼‰ï¼ŒSQLæ˜¯å…³ç³»å‹æ•°æ®åº“çš„æ“ä½œæŒ‡ä»¤ï¼Œæ˜¯ä¸€ç§çº¦æŸï¼Œä½†ä¸å¼ºåˆ¶ï¼Œç±»ä¼¼ä¸W3Cï¼Œæ‰€ä»¥ä¸åŒçš„å…³ç³»å‹æ•°æ®SQLè¯­å¥å¯èƒ½ä¼šæœ‰ä¸€å®šçš„å·®å¼‚æ€§ã€‚</p>\n</blockquote>\n<ul>\n<li>DDLï¼š<code>Data Definition Language</code>æ•°æ®å®šä¹‰è¯­è¨€ï¼Œç”¨æ¥ç»´æŠ¤å­˜å‚¨æ•°æ®çš„ç»“æ„ï¼ˆæ•°æ®åº“ã€è¡¨ï¼‰ï¼Œä»£è¡¨æŒ‡ä»¤ä¸º<code>create</code>ã€<code>drop</code>å’Œ<code>alter</code>ç­‰ã€‚</li>\n<li>DMLï¼š<code>Data Manipulation Language</code>ï¼Œæ•°æ®æ“ä½œè¯­è¨€ï¼Œç”¨æ¥å¯¹æ•°æ®è¿›è¡Œæ“ä½œï¼ˆè¡¨ä¸­çš„å†…å®¹ï¼‰ä»£è¡¨æŒ‡ä»¤ä¸º<code>insert</code>ã€<code>delete</code>å’Œ<code>update</code>ç­‰ï¼Œä¸è¿‡åœ¨ DML å†…éƒ¨åˆå•ç‹¬è¿›è¡Œäº†ä¸€ä¸ªåˆ†ç±»ï¼Œå³ DQLï¼ˆData Query Languageï¼‰ï¼Œæ•°æ®æŸ¥è¯¢è¯­è¨€ï¼Œä»£è¡¨æŒ‡ä»¤ä¸º<code>select</code>ã€‚</li>\n<li>DCLï¼š<code>Data Control Language</code>ï¼Œæ•°æ®æ§åˆ¶è¯­è¨€ï¼Œä¸»è¦æ˜¯è´Ÿè´£ï¼ˆç”¨æˆ·ï¼‰æƒé™ç®¡ç†ï¼Œä»£è¡¨æŒ‡ä»¤ä¸º<code>grant</code>å’Œ<code>revoke</code>ç­‰ã€‚</li>\n<li>TPLï¼š``,äº‹ç‰©æ§åˆ¶è¯­è¨€</li>\n</ul>\n<h2 id=\"MysqlåŸºæœ¬æ“ä½œ\"><a href=\"#MysqlåŸºæœ¬æ“ä½œ\" class=\"headerlink\" title=\"MysqlåŸºæœ¬æ“ä½œ\"></a>MysqlåŸºæœ¬æ“ä½œ</h2><blockquote>\n<p>æœ¬ç« éƒ¨åˆ†å†…å®¹åœ¨Centosä¸­å®ç°ï¼Œ<a href=\"http://localhost:4000/2018/04/21/Centos7-Mysql5.7%E5%8D%95%E5%AE%9E%E4%BE%8B%E9%83%A8%E7%BD%B2/\" target=\"_blank\" rel=\"noopener\">Centos7-MySqléƒ¨ç½²è®°å½•</a></p>\n</blockquote>\n<h3 id=\"äº¤äº’æ–¹å¼\"><a href=\"#äº¤äº’æ–¹å¼\" class=\"headerlink\" title=\"äº¤äº’æ–¹å¼\"></a>äº¤äº’æ–¹å¼</h3><a id=\"more\"></a>\n\n<blockquote>\n<p>å®¢æˆ·é“¾æ¥è®¤è¯ï¼Œå³é“¾æ¥æœåŠ¡ç«¯ï¼Œè®¤è¯ <code>mysql -hPup</code></p>\n</blockquote>\n<ul>\n<li><code>mysql -hPup</code>ä»‹ç»<ul>\n<li><code>-h</code>  ä¸»æœºåœ°å€ï¼Œæœ¬åœ°æ˜¯localhostæˆ–è€…127.0.0.1ï¼Œè¿œç¨‹ä¸ºIPåœ°å€ã€‚</li>\n<li><code>-P</code>ç«¯å£å·ï¼Œä¸€èˆ¬é»˜è®¤æ˜¯3306ï¼Œæ‰€ä»¥ä¸æŒ‡å®šå°±æ˜¯3306ã€‚</li>\n<li><code>-u</code>ç”¨æˆ·å,è®¤è¯éœ€è¦ç”¨æˆ·åã€‚</li>\n<li><code>-p</code>è®¤è¯ç”¨æˆ·åï¼Œè®¤è¯ç”¨æˆ·åå¯¹åº”çš„å¯†ç ã€‚</li>\n</ul>\n</li>\n<li>æ–­å¼€é“¾æ¥<ul>\n<li><code>exit</code></li>\n<li><code>quit</code></li>\n<li><code>\\q</code></li>\n</ul>\n</li>\n<li>æ¡ˆä¾‹</li>\n</ul>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">$ mysql -uroot -pxxxxxxxxxx</span><br></pre></td></tr></table></figure>\n\n<p>xxxxæ˜¯å¯†ç è‹¥ç™»é™†æˆåŠŸåˆ™è¾“å‡ºï¼Œè¿™é‡Œçš„è­¦å‘Šä¸ç”¨å¤ªåœ¨æ„ï¼Œæ˜¯æŒ‡ç™»é™†æ²¡æœ‰æŒ‡å®šå¯¹åº”çš„æ•°æ®åº“å®ä¾‹ã€‚</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">mysql: [Warning] Using a password on the command line interface can be insecure.</span><br><span class=\"line\">Welcome to the MySQL monitor.  Commands end with ; or \\g.</span><br><span class=\"line\">Your MySQL connection id is 2029</span><br><span class=\"line\">Server version: 5.7.22 MySQL Community Server (GPL)</span><br><span class=\"line\"></span><br><span class=\"line\">Copyright (c) 2000, 2018, Oracle and&#x2F;or its affiliates. All rights reserved.</span><br><span class=\"line\"></span><br><span class=\"line\">Oracle is a registered trademark of Oracle Corporation and&#x2F;or its</span><br><span class=\"line\">affiliates. Other names may be trademarks of their respective</span><br><span class=\"line\">owners.</span><br><span class=\"line\"></span><br><span class=\"line\">Type &#39;help;&#39; or &#39;\\h&#39; for help. Type &#39;\\c&#39; to clear the current input statement.</span><br><span class=\"line\"></span><br><span class=\"line\">mysql&gt;</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">mysql&gt; \\qï¼›</span><br><span class=\"line\">mysql&gt; exit;</span><br><span class=\"line\">mysql&gt; quit;</span><br></pre></td></tr></table></figure>\n\n<p>è¿™ä¸‰ä¸ªæŒ‡ä»¤éƒ½æ˜¯ç­‰å¤„æ“ä½œã€‚</p>\n<h3 id=\"Mysqlæ ‡è¯†ç¬¦\"><a href=\"#Mysqlæ ‡è¯†ç¬¦\" class=\"headerlink\" title=\"Mysqlæ ‡è¯†ç¬¦\"></a>Mysqlæ ‡è¯†ç¬¦</h3><blockquote>\n<p>å½“æˆ‘ä»¬è¿›å…¥mysqlå‘½ä»¤ç•Œé¢çš„æ—¶å€™ï¼Œå‘½ä»¤å‰é¢ä¼šå‡ºç°ä¸€ä¸ªæ ‡è¯†ç¬¦ã€‚æˆ‘ä»¬å¯ä»¥è‡ªå®šä¹‰ã€‚</p>\n</blockquote>\n<ul>\n<li><code>PROMPT</code>ä»‹ç»<ul>\n<li>ä½¿ç”¨<code>PROMPT xxx</code>æŒ‡å®šæ ‡è¯†ç¬¦ã€‚</li>\n</ul>\n</li>\n<li>æ¡ˆä¾‹</li>\n</ul>\n<table>\n<thead>\n<tr>\n<th>å‚æ•°</th>\n<th>æè¿°</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>\\D</td>\n<td>å®Œæ•´çš„æ—¥æœŸ</td>\n</tr>\n<tr>\n<td>\\d</td>\n<td>å½“å‰æ•°æ®åº“</td>\n</tr>\n<tr>\n<td>\\h</td>\n<td>æœåŠ¡å™¨çš„åç§°</td>\n</tr>\n<tr>\n<td>\\u</td>\n<td>å½“å‰ç”¨æˆ·å</td>\n</tr>\n</tbody></table>\n<p>æˆ‘ä»¬ä½¿ç”¨Mysqlå¸¸ç”¨çš„å‚æ•°é…åˆ<code>PROMPT</code>æ¥è‡ªå®šä¹‰æç¤ºç¬¦ä¿¡æ¯ï¼Œé»˜è®¤çš„åˆšæ‰æˆ‘ä»¬ç™»é™†ä¹‹åå‘ç°é»˜è®¤çš„æç¤ºç¬¦æ˜¯<code>mysql&gt;</code></p>\n<ul>\n<li>è¿™é‡Œæ¼”ç¤ºä¸¤ç§ä½¿ç”¨æ–¹å¼<ol>\n<li>è¿æ¥å®¢æˆ·ç«¯çš„æ—¶å€™é€šè¿‡å‚æ•°æŒ‡å®šã€‚<code>mysql -uroot -pxxxx --prompt xxx</code> xxxåˆ†åˆ«ä»£è¡¨å¯†ç å’Œæ ‡è¯†ç¬¦ã€‚</li>\n<li>è¿æ¥å®¢æˆ·ç«¯ä¹‹åï¼Œé€šè¿‡<code>PROMPT</code>æŒ‡å®šã€‚</li>\n<li>é€šè¿‡my.cofé…ç½®æ–‡ä»¶å…¨å±€è®¾ç½®ã€‚</li>\n</ol>\n</li>\n<li>æ¡ˆä¾‹</li>\n</ul>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">$ mysql -uroot -pxxxxxxxxxx --prpmpt @\\\\h  <span class=\"comment\">#åœ¨è¿æ¥å®¢æˆ·ç«¯çš„æ—¶å€™æŒ‡å®šéœ€è¦è½¬ä¹‰\\h--&gt;\\\\hä¸ç„¶å¯èƒ½å‡ºç°BUGã€‚</span></span><br></pre></td></tr></table></figure>\n\n<p>è¾“å‡º</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">mysql: [Warning] Using a password on the command line interface can be insecure.</span><br><span class=\"line\">Welcome to the MySQL monitor.  Commands end with ; or \\g.</span><br><span class=\"line\">Your MySQL connection id is 2029</span><br><span class=\"line\">Server version: 5.7.22 MySQL Community Server (GPL)</span><br><span class=\"line\"></span><br><span class=\"line\">Copyright (c) 2000, 2018, Oracle and&#x2F;or its affiliates. All rights reserved.</span><br><span class=\"line\"></span><br><span class=\"line\">Oracle is a registered trademark of Oracle Corporation and&#x2F;or its</span><br><span class=\"line\">affiliates. Other names may be trademarks of their respective</span><br><span class=\"line\">owners.</span><br><span class=\"line\"></span><br><span class=\"line\">Type &#39;help;&#39; or &#39;\\h&#39; for help. Type &#39;\\c&#39; to clear the current input statement.</span><br><span class=\"line\"></span><br><span class=\"line\">@localhost</span><br></pre></td></tr></table></figure>\n\n<p>ç™»é™†åå†æ¬¡ä¿®æ”¹</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">@localhost PROMPT \\u@\\h \\d&gt;</span><br><span class=\"line\">PROMPT set to &#39;\\u@\\h \\d&gt;&#39;</span><br><span class=\"line\">root@localhost (none)&gt;</span><br></pre></td></tr></table></figure>\n\n<p>ç”±äºæ²¡æœ‰è¿›å…¥æ•°æ®åº“ï¼Œæ‰€ä»¥\\dæ˜¯noneã€‚é‚£æˆ‘ä»¬æŸ¥è¯¢ä¸‹å½“å‰çš„æ•°æ®åº“ï¼Œç„¶åé€‰æ‹©ä¸€ä¸ªæ•°æ®åº“å¹¶è¿›å…¥ã€‚</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">root@localhost (none)&gt; SHOW DATABASES;</span><br><span class=\"line\">+--------------------+</span><br><span class=\"line\">| Database           |</span><br><span class=\"line\">+--------------------+</span><br><span class=\"line\">| information_schema |</span><br><span class=\"line\">| Demo               |</span><br><span class=\"line\">| mysql              |</span><br><span class=\"line\">| performance_schema |</span><br><span class=\"line\">| rbac001            |</span><br><span class=\"line\">| sys                |</span><br><span class=\"line\">+--------------------+</span><br><span class=\"line\">6 rows in set (0.06 sec)</span><br></pre></td></tr></table></figure>\n\n<p>è¿›å…¥Demoæ•°æ®åº“</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">root@localhost (none)&gt;USE Demo</span><br><span class=\"line\">Reading table information for completion of table and column names</span><br><span class=\"line\">You can turn off this feature to get a quicker startup with -A</span><br><span class=\"line\"></span><br><span class=\"line\">Database changed</span><br><span class=\"line\">root@localhost Demo&gt;</span><br></pre></td></tr></table></figure>\n\n<p>é‚£ä¹ˆè¿™é‡Œmysqlçš„æ ‡è¯†ç¬¦å°±æ˜¾ç¤ºå®Œæ•´äº†ã€‚</p>\n<p>è¿˜æœ‰ä¸€ç§å‘å‘å°±æ˜¯åœ¨<code>my.cof</code>é…ç½®æ–‡ä»¶ä¸­æŒ‡å®šå…¨å±€çš„ã€‚</p>\n<blockquote>\n<p>æˆ‘ç”¨çš„æ˜¯linuxä¸Šçš„mysqlï¼Œå¦‚æœæ˜¯windowsåœ¨mysqlå®‰è£…ç›®å½•ä¸­å¯»æ‰¾my.cofé…ç½®æ–‡ä»¶å¹¶ä¿®æ”¹ç›¸å…³å‚æ•°ã€‚</p>\n</blockquote>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">root@localhost Demo&gt; \\q</span><br></pre></td></tr></table></figure>\n\n<p>ç™»å‡ºmysqlåç¼–è¾‘<code>my.cof</code>æ–‡ä»¶ã€‚</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">[root@VM_115_109_centos ~]<span class=\"comment\"># vim /etc/my.cnf</span></span><br></pre></td></tr></table></figure>\n\n<p>ä¿®æ”¹æ–‡ä»¶æ·»åŠ <code>prompt = [\\\\u@\\\\h][\\\\d]&gt;\\\\_</code>è¿™ä¸ªè®¾ç½®ï¼Œæ³¨æ„è¿™é‡Œ\\æ˜¯éœ€è¦è½¬ä¹‰çš„ã€‚</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\"># For advice on how to change settings please see</span><br><span class=\"line\"># http:&#x2F;&#x2F;dev.mysql.com&#x2F;doc&#x2F;refman&#x2F;5.7&#x2F;en&#x2F;server-configuration-defaults.html</span><br><span class=\"line\">#</span><br><span class=\"line\">[mysql]</span><br><span class=\"line\">prompt &#x3D; [\\\\u@\\\\h][\\\\d]&gt;\\\\_</span><br><span class=\"line\"></span><br><span class=\"line\">[mysqld]</span><br><span class=\"line\">#</span><br><span class=\"line\"># Remove leading # and set to the amount of RAM for the most important data</span><br><span class=\"line\"># cache in MySQL. Start at 70% of total RAM for dedicated server, else 10%.</span><br><span class=\"line\"># innodb_buffer_pool_size &#x3D; 128M</span><br><span class=\"line\">#</span><br><span class=\"line\"># Remove leading # to turn on a very important data integrity option: logging</span><br><span class=\"line\"># changes to the binary log between backups.</span><br><span class=\"line\"># log_bin</span><br><span class=\"line\">#</span><br><span class=\"line\"># Remove leading # to set options mainly useful for reporting servers.</span><br><span class=\"line\"># The server defaults are faster for transactions and fast SELECTs.</span><br><span class=\"line\"># Adjust sizes as needed, experiment to find the optimal values.</span><br><span class=\"line\"># join_buffer_size &#x3D; 128M</span><br><span class=\"line\"># sort_buffer_size &#x3D; 2M</span><br><span class=\"line\"># read_rnd_buffer_size &#x3D; 2M</span><br><span class=\"line\">socket&#x3D;&#x2F;var&#x2F;lib&#x2F;mysql&#x2F;mysql.sock</span><br><span class=\"line\"></span><br><span class=\"line\"># Disabling symbolic-links is recommended to prevent assorted security risks</span><br><span class=\"line\">symbolic-links&#x3D;0</span><br><span class=\"line\"></span><br><span class=\"line\">#è®¾ç½®ç«¯å£</span><br><span class=\"line\">port&#x3D;3306</span><br><span class=\"line\">#è®¾ç½®mysqlæ•°æ®å­˜æ”¾ç›®å½•</span><br><span class=\"line\">datadir&#x3D;&#x2F;opt&#x2F;db&#x2F;mysql</span><br><span class=\"line\"># æœåŠ¡ç«¯ä½¿ç”¨çš„å­—ç¬¦é›†é»˜è®¤ä¸º8æ¯”ç‰¹ç¼–ç çš„latin1å­—ç¬¦é›†  </span><br><span class=\"line\">character-set-server&#x3D;utf8</span><br><span class=\"line\"># # åˆ›å»ºæ–°è¡¨æ—¶å°†ä½¿ç”¨çš„é»˜è®¤å­˜å‚¨å¼•æ“  </span><br><span class=\"line\">default-storage-engine&#x3D;INNODB</span><br><span class=\"line\"></span><br><span class=\"line\">log-error&#x3D;&#x2F;var&#x2F;log&#x2F;mysqld.log</span><br><span class=\"line\">pid-file&#x3D;&#x2F;var&#x2F;run&#x2F;mysqld&#x2F;mysqld.pid</span><br></pre></td></tr></table></figure>\n\n<p>ä¿å­˜é€€å‡ºå¹¶é‡å¯mysqlã€‚é€€å‡ºVIM ESCé”® ç„¶å:  åœ¨å‘½ä»¤è¡Œè¾“å…¥wqå›è½¦ã€‚å¦‚æœæˆåŠŸä¿å­˜å¹¶é€€å‡ºå°±é‡å¯mysqlæœåŠ¡ã€‚</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">[root@VM_115_109_centos ~]<span class=\"comment\"># systemctl restart mysqld</span></span><br></pre></td></tr></table></figure>\n\n<p>è¿™é‡Œæ˜¯Centos7.3çš„ç¯å¢ƒæ¼”ç¤ºã€‚å†æ¬¡ç™»é™†mysqlã€‚</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">[root@VM_115_109_centos ~]<span class=\"comment\"># mysql -uroot -p </span></span><br><span class=\"line\">Enter password: </span><br><span class=\"line\">Welcome to the MySQL monitor.  Commands end with ; or \\g.</span><br><span class=\"line\">Your MySQL connection id is 3</span><br><span class=\"line\">Server version: 5.7.22 MySQL Community Server (GPL)</span><br><span class=\"line\"></span><br><span class=\"line\">Copyright (c) 2000, 2018, Oracle and/or its affiliates. All rights reserved.</span><br><span class=\"line\"></span><br><span class=\"line\">Oracle is a registered trademark of Oracle Corporation and/or its</span><br><span class=\"line\">affiliates. Other names may be trademarks of their respective</span><br><span class=\"line\">owners.</span><br><span class=\"line\"></span><br><span class=\"line\">Type <span class=\"string\">'help;'</span> or <span class=\"string\">'\\h'</span> <span class=\"keyword\">for</span> <span class=\"built_in\">help</span>. Type <span class=\"string\">'\\c'</span> to clear the current input statement.</span><br><span class=\"line\"></span><br><span class=\"line\">[root@localhost][(none)]&gt;</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">[root@localhost][(none)]&gt; USE Demo</span><br><span class=\"line\">Reading table information for completion of table and column names</span><br><span class=\"line\">You can turn off this feature to get a quicker startup with -A</span><br><span class=\"line\"></span><br><span class=\"line\">Database changed</span><br><span class=\"line\">[root@localhost][Demo]&gt;</span><br></pre></td></tr></table></figure>\n\n<p>åˆ°è¿™é‡Œå…¨å±€è®¾ç½®PROMPTå°±OKäº†ã€‚</p>\n<h3 id=\"Mysqlå¸¸ç”¨å‘½ä»¤\"><a href=\"#Mysqlå¸¸ç”¨å‘½ä»¤\" class=\"headerlink\" title=\"Mysqlå¸¸ç”¨å‘½ä»¤\"></a>Mysqlå¸¸ç”¨å‘½ä»¤</h3><blockquote>\n<p>è¿™é‡Œæ¼”ç¤ºä¸€äº›ç»å¸¸ç”¨åˆ°çš„MYSQLå¸¸ç”¨å‘½ä»¤ï¼Œæ–¹ä¾¿å¿«é€Ÿäº†è§£Mysqlã€‚åŒæ—¶æ¥è§¦ä¸€äº›MYSQLè¯­å¥çš„è§„èŒƒã€‚</p>\n</blockquote>\n<ol>\n<li>æ¼”ç¤ºè¯­å¥<ul>\n<li>æ˜¾ç¤ºå½“å‰æœåŠ¡å™¨çš„ç‰ˆæœ¬ï¼š<code>SELECT VERSION();</code></li>\n<li>æ˜¾ç¤ºå½“å‰æ—¥æœŸæ—¶é—´ï¼š<code>SELECT NOW();</code></li>\n<li>æ˜¾ç¤ºå½“å‰çš„ç”¨æˆ·ï¼š<code>SELECT USER();</code></li>\n</ul>\n</li>\n</ol>\n<p>è¾“å‡ºæ•ˆæœ</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">[root@localhost][Demo]&gt; SELECT VERSION();</span><br><span class=\"line\">+-----------+</span><br><span class=\"line\">| VERSION() |</span><br><span class=\"line\">+-----------+</span><br><span class=\"line\">| 5.7.22    |</span><br><span class=\"line\">+-----------+</span><br><span class=\"line\">1 row in set (0.00 sec)</span><br><span class=\"line\"></span><br><span class=\"line\">[root@localhost][Demo]&gt; SELECT NOW();</span><br><span class=\"line\">+---------------------+</span><br><span class=\"line\">| NOW()               |</span><br><span class=\"line\">+---------------------+</span><br><span class=\"line\">| 2018-04-29 04:22:31 |</span><br><span class=\"line\">+---------------------+</span><br><span class=\"line\">1 row in set (0.00 sec)</span><br><span class=\"line\"></span><br><span class=\"line\">[root@localhost][Demo]&gt; SELECT USER();</span><br><span class=\"line\">+----------------+</span><br><span class=\"line\">| USER()         |</span><br><span class=\"line\">+----------------+</span><br><span class=\"line\">| root@localhost |</span><br><span class=\"line\">+----------------+</span><br><span class=\"line\">1 row in set (0.01 sec)</span><br><span class=\"line\"></span><br><span class=\"line\">[root@localhost][Demo]&gt;</span><br></pre></td></tr></table></figure>\n\n<ol start=\"2\">\n<li>MYSQLæ ‡å‡†çš„è§„èŒƒ<ul>\n<li><code>å…³é”®å­—</code>ä¸<code>å‡½æ•°å</code>ç§°å…¨éƒ¨å¤§å†™ã€‚</li>\n<li><code>æ•°æ®åº“</code>ã€<code>è¡¨åç§°</code>ã€<code>å­—æ®µåç§°</code>å…¨éƒ¨<code>å°å†™</code>ã€‚</li>\n<li>SQLè¯­å¥å¿…é¡»<code>åˆ†å·</code>ç»“å°¾ã€‚</li>\n</ul>\n</li>\n</ol>\n<blockquote>\n<p>åœ¨ä¸åŒçš„ç³»ç»Ÿä¸­å¤§å°å†™æ˜¯åŒºåˆ†çš„ï¼Œå¦‚æœSQLè¯­å¥ä¸å¤Ÿè§„èŒƒæˆ–è€…æ•°æ®åº“ã€è¡¨åã€å­—æ®µåä¸è§„èŒƒå‘½åï¼Œå¯èƒ½ä¼šå‡ºç°ä¸¥é‡çš„BUGã€‚</p>\n</blockquote>\n<h3 id=\"Mysqlæ•°æ®åº“çš„æ“ä½œ\"><a href=\"#Mysqlæ•°æ®åº“çš„æ“ä½œ\" class=\"headerlink\" title=\"Mysqlæ•°æ®åº“çš„æ“ä½œ\"></a>Mysqlæ•°æ®åº“çš„æ“ä½œ</h3><blockquote>\n<p>è¿™é‡Œåšä¸‹è®°å½•å§ï¼Œåº”è¯¥æ˜¯è¦ä¸“é—¨å†™ä¸€ç¯‡å…³äºMySQLæ•°æ®åº“ç»“æ„æ–‡ç« ã€‚</p>\n</blockquote>\n<h4 id=\"åˆ›å»ºæ•°æ®åº“\"><a href=\"#åˆ›å»ºæ•°æ®åº“\" class=\"headerlink\" title=\"åˆ›å»ºæ•°æ®åº“\"></a>åˆ›å»ºæ•°æ®åº“</h4><p><code>CREATE { DATABASES | SCHEMA} [IF NOT EXISTS] db_name [DEFAULT] CHARACTER SET [=] charset_name</code>ã€‚</p>\n<ul>\n<li>ç®€å•è§£é‡Šä¸‹ä¸Šé¢çš„è¯­å¥ï¼Œ{}èŠ±æ‹¬å¼§å¿…é¡»è¦å¡«å†™çš„ï¼Œ|æ˜¯æˆ–åˆ™ é€‰æ‹©å…¶ä¸­ä¸€ä¸ªå³å¯ã€‚[]ä¸­æ‹¬å·å¯æœ‰å¯æ— ã€‚CHARACTERæ˜¯åº“çš„çº¦æŸé¡¹ç›®ï¼ŒæŒ‡å®šæ•°æ®åº“çš„ç¼–ç é›†ã€‚</li>\n</ul>\n<p>ç¤ºä¾‹</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">[root@localhost][Demo]&gt; CREATE DATABASE  db1;</span><br><span class=\"line\">Query OK, 1 row affected (0.00 sec)</span><br></pre></td></tr></table></figure>\n\n<p>è¿™é‡Œå·²ç»æç¤ºæˆ‘ä»¬åˆ›å»ºæˆåŠŸäº†ä¸€ä¸ªæ•°æ®åº“db1ã€‚æ£€æŸ¥ä¸‹å½“å‰çš„æ•°æ®åº“åˆ—è¡¨ã€‚</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">[root@localhost][Demo]&gt; SHOW DATABASES;</span><br><span class=\"line\">+--------------------+</span><br><span class=\"line\">| Database           |</span><br><span class=\"line\">+--------------------+</span><br><span class=\"line\">| information_schema |</span><br><span class=\"line\">| Demo               |</span><br><span class=\"line\">| db1                |</span><br><span class=\"line\">| mysql              |</span><br><span class=\"line\">| performance_schema |</span><br><span class=\"line\">| rbac001            |</span><br><span class=\"line\">| sys                |</span><br><span class=\"line\">+--------------------+</span><br><span class=\"line\">7 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>\n\n<p>åœ¨æ¥çœ‹çœ‹[IF NOT EXISTS] è¿™ä¸ªå‚æ•°ã€‚æˆ‘ä»¬æµ‹è¯•ä¸‹ã€‚é‡å¤åˆ›å»º<code>db1</code>æ•°æ®åº“ã€‚</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">[root@localhost][Demo]&gt; CREATE DATABASE db1;</span><br><span class=\"line\">ERROR 1007 (HY000): Can&#39;t create database &#39;db1&#39;; database exists</span><br></pre></td></tr></table></figure>\n\n<p>è¿™é‡Œä¼šè­¦å‘Šæˆ‘ä»¬ï¼Œæ•°æ®å·²ç»å­˜åœ¨ã€‚åœ¨ä¸Š<code>IF NOT EXISTS</code>åœ¨è¯•è¯•ã€‚</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">[root@localhost][Demo]&gt; CREATE DATABASE IF NOT EXISTS db1;</span><br><span class=\"line\">Query OK, 1 row affected, 1 warning (0.00 sec)</span><br></pre></td></tr></table></figure>\n\n<p>è¿™é‡Œè­¦å‘Šä¼šçœ‹ä¸åˆ°äº†ï¼Œæˆ‘ä»¬èƒ½ä¸èƒ½æŸ¥è¯¢ä¸€ä¸‹è­¦å‘Šä¿¡æ¯å‘¢ï¼Ÿå½“ç„¶æ˜¯å¯ä»¥çš„ã€‚</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">[root@localhost][Demo]&gt; SHOW WARNINGS;</span><br><span class=\"line\">+-------+------+----------------------------------------------+</span><br><span class=\"line\">| Level | Code | Message                                      |</span><br><span class=\"line\">+-------+------+----------------------------------------------+</span><br><span class=\"line\">| Note  | 1007 | Can&#39;t create database &#39;db1&#39;; database exists |</span><br><span class=\"line\">+-------+------+----------------------------------------------+</span><br><span class=\"line\">1 row in set (0.00 sec)</span><br></pre></td></tr></table></figure>\n\n<p>å…¶å®ï¼Œä½¿ç”¨IF NOT EXISTS ä¹‹åè­¦å‘Šä¾ç„¶å­˜åœ¨ï¼Œåªä¸è¿‡ä¸ä¼šç«‹åˆ»æ˜¾ç¤ºå‡ºæ¥ã€‚</p>\n<h4 id=\"æŸ¥è¯¢æ•°æ®åº“\"><a href=\"#æŸ¥è¯¢æ•°æ®åº“\" class=\"headerlink\" title=\"æŸ¥è¯¢æ•°æ®åº“\"></a>æŸ¥è¯¢æ•°æ®åº“</h4><p><code>SHOW {DATABASES | SCHEMAS} [LIKE &#39;pattern&#39; | WHERE expr]</code></p>\n<ul>\n<li>æŸ¥è¯¢å…¨éƒ¨ï¼š<code>SHOW DATABASES;</code></li>\n<li>æ¨¡ç³ŠæŸ¥è¯¢ï¼š<code>SHOW DATABASES LIKE &#39;pattern&#39;</code><ul>\n<li>è¿™é‡Œçš„patternæ˜¯æŒ‡åŒ¹é…æ¨¡å¼ï¼Œ<code>%</code>æ˜¯æŒ‡åŒ¹é…å¤šä¸ªå­—ç¬¦ï¼Œ<code>_</code>æ˜¯æŒ‡åŒ¹é…å•ä¸ªå­—ç¬¦ã€‚éœ€è¦æ³¨æ„çš„æ˜¯åœ¨åŒ¹é…æœ‰å¸¦æœ‰<code>_</code>ä¸‹åˆ’çº¿çš„æ•°æ®åº“åå­—æ—¶å€™ï¼Œéœ€è¦æ·»åŠ <code>\\</code>åæ–œæ è½¬ä¹‰ã€‚</li>\n</ul>\n</li>\n</ul>\n<p>åˆ›å»ºdb1çš„æ—¶å€™å·²ç»ä½¿ç”¨å…¨å±€æŸ¥è¯¢äº†ï¼Œè¿™é‡Œæ¼”ç¤ºä¸‹æ¨¡ç³ŠæŸ¥è¯¢ã€‚</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">[root@localhost][Demo]&gt; SHOW DATABASES LIKE &quot;db%&quot;;</span><br><span class=\"line\">+----------------+</span><br><span class=\"line\">| Database (db%) |</span><br><span class=\"line\">+----------------+</span><br><span class=\"line\">| db1            |</span><br><span class=\"line\">+----------------+</span><br><span class=\"line\">1 row in set (0.00 sec)</span><br></pre></td></tr></table></figure>\n\n<p>åœ¨æ£€æŸ¥ä¸€ä¸‹æ•°æ®åº“çš„ç¼–ç çº§ã€‚</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">[root@localhost][Demo]&gt; SHOW CREATE DATABASE db1;</span><br><span class=\"line\">+----------+--------------------------------------------------------------+</span><br><span class=\"line\">| Database | Create Database                                              |</span><br><span class=\"line\">+----------+--------------------------------------------------------------+</span><br><span class=\"line\">| db1      | CREATE DATABASE &#96;db1&#96; &#x2F;*!40100 DEFAULT CHARACTER SET utf8 *&#x2F; |</span><br><span class=\"line\">+----------+--------------------------------------------------------------+</span><br><span class=\"line\">1 row in set (0.00 sec)</span><br></pre></td></tr></table></figure>\n\n<p>è¿™é‡ŒæŸ¥è¯¢å‡ºåˆ›å»ºæ•°æ®åº“çš„æŒ‡å®šç¼–ç é›†ã€‚æ˜¯utf8ï¼Œè¿™é‡Œæ˜¯åº”ä¸ºæˆ‘åœ¨<code>my.cof</code>æ–‡ä»¶ä¸­è®¾ç½®äº†<code>character-set-server=utf8</code>è¿™ä¸ªå‚æ•°ï¼Œæ‰€ä»¥å³ä¾¿åˆ›å»ºæ•°æ®åº“æ—¶utf8ç¼–ç ï¼Œæ•°æ®åº“åˆ›å»ºé»˜è®¤å°±æ˜¯utf8ã€‚</p>\n<p>é‚£ä¹ˆæˆ‘ä»¬åˆ›å»ºä¸€ä¸ªéé»˜è®¤ç¼–ç çš„æ•°æ®åº“è¯•è¯•ã€‚</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">[root@localhost][Demo]&gt; CREATE DATABASE IF NOT EXISTS db2 CHARACTER SET gbk;</span><br><span class=\"line\">Query OK, 1 row affected (0.00 sec)</span><br></pre></td></tr></table></figure>\n\n<p>æˆ‘ä»¬åœ¨æ£€æŸ¥ä¸‹db2æ˜¯ä¸æ˜¯æŒ‡å®šçš„ç¼–ç é›†ã€‚</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">[root@localhost][Demo]&gt; SHOW CREATE DATABASE db2 ;</span><br><span class=\"line\">+----------+-------------------------------------------------------------+</span><br><span class=\"line\">| Database | Create Database                                             |</span><br><span class=\"line\">+----------+-------------------------------------------------------------+</span><br><span class=\"line\">| db2      | CREATE DATABASE &#96;db2&#96; &#x2F;*!40100 DEFAULT CHARACTER SET gbk *&#x2F; |</span><br><span class=\"line\">+----------+-------------------------------------------------------------+</span><br><span class=\"line\">1 row in set (0.00 sec)</span><br></pre></td></tr></table></figure>\n\n<p>å½“ç„¶å¹¶ä¸æ‰“ç®—ä½¿ç”¨gbkæ¥åšç¼–ç é›†ã€‚</p>\n<h4 id=\"ä¿®æ”¹æ•°æ®åº“\"><a href=\"#ä¿®æ”¹æ•°æ®åº“\" class=\"headerlink\" title=\"ä¿®æ”¹æ•°æ®åº“\"></a>ä¿®æ”¹æ•°æ®åº“</h4><p><code>ALTER {DATABASE | SCHEMA } [db_name] [DEFAULT ] CHARACTER SET [=] charset_name</code></p>\n<p>ç¤ºä¾‹</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">[root@localhost][Demo]&gt; ALTER DATABASE db2 CHARACTER SET &#x3D; utf8;</span><br><span class=\"line\">Query OK, 1 row affected (0.00 sec)</span><br><span class=\"line\">[root@localhost][Demo]&gt; SHOW CREATE DATABASE db2;</span><br><span class=\"line\">+----------+--------------------------------------------------------------+</span><br><span class=\"line\">| Database | Create Database                                              |</span><br><span class=\"line\">+----------+--------------------------------------------------------------+</span><br><span class=\"line\">| db2      | CREATE DATABASE &#96;db2&#96; &#x2F;*!40100 DEFAULT CHARACTER SET utf8 *&#x2F; |</span><br><span class=\"line\">+----------+--------------------------------------------------------------+</span><br><span class=\"line\">1 row in set (0.00 sec)</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"åˆ é™¤æ•°æ®åº“\"><a href=\"#åˆ é™¤æ•°æ®åº“\" class=\"headerlink\" title=\"åˆ é™¤æ•°æ®åº“\"></a>åˆ é™¤æ•°æ®åº“</h4><p><code>DROP {DATABASE| SCHEMA} [IF EXISTS] db_name</code></p>\n<p>ç¤ºä¾‹</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">[root@localhost][Demo]&gt; SHOW CREATE DATABASE db2;</span><br><span class=\"line\">+----------+--------------------------------------------------------------+</span><br><span class=\"line\">| Database | Create Database                                              |</span><br><span class=\"line\">+----------+--------------------------------------------------------------+</span><br><span class=\"line\">| db2      | CREATE DATABASE &#96;db2&#96; &#x2F;*!40100 DEFAULT CHARACTER SET utf8 *&#x2F; |</span><br><span class=\"line\">+----------+--------------------------------------------------------------+</span><br><span class=\"line\">1 row in set (0.00 sec)</span><br><span class=\"line\"></span><br><span class=\"line\">[root@localhost][Demo]&gt; DROP DATABASE db2;</span><br><span class=\"line\">Query OK, 0 rows affected (0.03 sec)</span><br><span class=\"line\"></span><br><span class=\"line\">[root@localhost][Demo]&gt; SHOW DATABASES;</span><br><span class=\"line\">+--------------------+</span><br><span class=\"line\">| Database           |</span><br><span class=\"line\">+--------------------+</span><br><span class=\"line\">| information_schema |</span><br><span class=\"line\">| Demo               |</span><br><span class=\"line\">| db1                |</span><br><span class=\"line\">| mysql              |</span><br><span class=\"line\">| performance_schema |</span><br><span class=\"line\">| rbac001            |</span><br><span class=\"line\">| sys                |</span><br><span class=\"line\">+--------------------+</span><br><span class=\"line\">7 rows in set (0.01 sec)</span><br></pre></td></tr></table></figure>\n\n<p><code>æ³¨æ„åˆ é™¤æ•°æ®åº“ä¹‹å‰è®°å¾—å¤‡ä»½ï¼Œä¸ç„¶ä¼šæ‚²å‰§ã€‚</code></p>\n<h4 id=\"å›é¡¾æ€»ç»“ã€‚\"><a href=\"#å›é¡¾æ€»ç»“ã€‚\" class=\"headerlink\" title=\"å›é¡¾æ€»ç»“ã€‚\"></a>å›é¡¾æ€»ç»“ã€‚</h4><ol>\n<li>æ–°å¢ï¼š<code>CREATE { DATABASES | SCHEMA} [IF NOT EXISTS] db_name [DEFAULT] CHARACTER SET [=] charset_name</code></li>\n<li>æŸ¥è¯¢ï¼š<code>SHOW {DATABASES | SCHEMAS} [LIKE &#39;pattern&#39; | WHERE expr]</code></li>\n<li>ä¿®æ”¹ï¼š<code>ALTER {DATABASE | SCHEMA } [db_name][DEFAULT ] CHARACTER SET [=] charset_name</code></li>\n<li>åˆ é™¤ï¼š<code>DROP {DATABASE| SCHEMA} [IF EXISTS] db_name</code></li>\n<li>SQLè¯­å¥æ³¨æ„å¤§å°å†™ã€‚</li>\n<li>æ•°æ®åº“æ“ä½œçš„è¯­å¥å±äº<code>DDL</code>è¯­å¥ã€‚</li>\n</ol>\n<h3 id=\"Mysqlæ•°æ®è¡¨æ“ä½œ\"><a href=\"#Mysqlæ•°æ®è¡¨æ“ä½œ\" class=\"headerlink\" title=\"Mysqlæ•°æ®è¡¨æ“ä½œ\"></a>Mysqlæ•°æ®è¡¨æ“ä½œ</h3><blockquote>\n<p>æ•°æ®è¡¨ï¼Œæ˜¯æ•°æ®åº“ä¸­é‡è¦çš„ç»“æ„ä¹‹ä¸€ï¼Œæ˜¯å­˜å‚¨æ•°æ®çš„åŸºç¡€ã€‚åœ¨å…³ç³»å‹æ•°æ®åº“ä¸­ï¼Œå®é™…ä¸Šè¡¨å°±æ˜¯ä¸€ä¸ªäºŒç»´çš„æ•°æ®ç»“æ„ã€‚</p>\n</blockquote>\n<h4 id=\"åˆ›å»ºæ•°æ®è¡¨\"><a href=\"#åˆ›å»ºæ•°æ®è¡¨\" class=\"headerlink\" title=\"åˆ›å»ºæ•°æ®è¡¨\"></a>åˆ›å»ºæ•°æ®è¡¨</h4><blockquote>\n<p>é¦–å…ˆéœ€è¦è¿›å…¥åˆ°æŸä¸ªæ•°æ®åº“ï¼Œä¸Šé¢çš„æ“ä½œæ•°æ®åº“ä¸­å·²ç»åˆ›å»ºäº†ä¸€ä¸ªåº“db1ã€‚</p>\n</blockquote>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\"># è¿›å…¥db1æ•°æ®åº“</span><br><span class=\"line\">[root@localhost][(none)]&gt; USE db1;</span><br><span class=\"line\">Database changed</span><br><span class=\"line\">[root@localhost][db1]&gt; SELECT DATABASE();</span><br><span class=\"line\">+------------+</span><br><span class=\"line\">| DATABASE() |</span><br><span class=\"line\">+------------+</span><br><span class=\"line\">| db1        |</span><br><span class=\"line\">+------------+</span><br><span class=\"line\">1 row in set (0.00 sec)</span><br></pre></td></tr></table></figure>\n\n<p>è¿›å…¥åä½¿ç”¨<code>SELECT DATABASE();</code> æ¥æŸ¥è¯¢å½“å‰è¿›å…¥çš„æ•°æ®ã€‚</p>\n<p><code>CRATE TABLE [IF NOT EXISTS] table_name(</code></p>\n<p><code>column_name data_type</code></p>\n<p><code>)</code></p>\n<blockquote>\n<p>ç”±äºæ˜¯äºŒç»´è¡¨ï¼Œæ‰€ä»¥column_nameè‚¯å®šæ˜¯ç¡®è®¤çš„ï¼Œæ ¹æ®å­˜å‚¨çš„æ•°æ®ç±»å‹åœ¨é€‰æ‹©åˆé€‚çš„data_typeã€‚</p>\n</blockquote>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">[root@localhost][db1]&gt; CREATE TABLE emp(</span><br><span class=\"line\">    -&gt; username VARCHAR(20),</span><br><span class=\"line\">    -&gt; age TINYINT UNSIGNED,</span><br><span class=\"line\">    -&gt; salary FLOAT(8,2) UNSIGNED</span><br><span class=\"line\">    -&gt; );</span><br><span class=\"line\">Query OK, 0 rows affected (0.12 sec)</span><br></pre></td></tr></table></figure>\n\n<p>åˆ›å»ºä¸€å¼ å‘˜å·¥è¡¨ï¼Œå­˜å‚¨äº†åå­—ã€å¹´é¾„ã€å·¥èµ„ã€‚å…¶ä¸­å¹´é¾„å’Œå·¥èµ„é‡‡ç”¨äº†æ— ç¬¦å·ã€‚</p>\n<hr>\n<h4 id=\"æŸ¥çœ‹æ•°æ®è¡¨\"><a href=\"#æŸ¥çœ‹æ•°æ®è¡¨\" class=\"headerlink\" title=\"æŸ¥çœ‹æ•°æ®è¡¨\"></a>æŸ¥çœ‹æ•°æ®è¡¨</h4><p><code>SHOW TABLES [FROM db_name] [LIKE &#39;pattern&#39; | WHERE expr] </code></p>\n<ul>\n<li>æŸ¥è¯¢å½“å‰æ•°æ®åº“å…¨éƒ¨è¡¨ï¼š<code>SHOW TABLES ;</code></li>\n<li>æŸ¥è¯¢å…¶ä»–æ•°æ®åº“ä¸­è¡¨ï¼š<code>SHOW TABLES FROM mysql</code></li>\n<li>æ¨¡ç³ŠæŸ¥è¯¢å½“å‰æ•°æ®åº“è¡¨ï¼š<code>SHOW TABLES LIKE &#39;pattern&#39;</code><ul>\n<li>è¿™é‡Œçš„patternæ˜¯æŒ‡åŒ¹é…æ¨¡å¼ï¼Œ<code>%</code>æ˜¯æŒ‡åŒ¹é…å¤šä¸ªå­—ç¬¦ï¼Œ<code>_</code>æ˜¯æŒ‡åŒ¹é…å•ä¸ªå­—ç¬¦ã€‚éœ€è¦æ³¨æ„çš„æ˜¯åœ¨åŒ¹é…æœ‰å¸¦æœ‰<code>_</code>ä¸‹åˆ’çº¿çš„æ•°æ®è¡¨åå­—æ—¶å€™ï¼Œéœ€è¦æ·»åŠ <code>\\</code>åæ–œæ è½¬ä¹‰ã€‚</li>\n</ul>\n</li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\"># æŸ¥è¯¢å½“å‰æ•°æ®åº“ä¸­å…¨éƒ¨è¡¨ã€‚</span><br><span class=\"line\">[root@localhost][db1]&gt; SHOW TABLES;</span><br><span class=\"line\">+---------------+</span><br><span class=\"line\">| Tables_in_db1 |</span><br><span class=\"line\">+---------------+</span><br><span class=\"line\">| emp           |</span><br><span class=\"line\">+---------------+</span><br><span class=\"line\">1 row in set (0.00 sec)</span><br><span class=\"line\"></span><br><span class=\"line\"># æŸ¥è¯¢å…¶ä»–æ•°æ®åº“ä¸­å…¨éƒ¨è¡¨ã€‚</span><br><span class=\"line\">[root@localhost][db1]&gt; SHOW TABLES FROM mysql;</span><br><span class=\"line\">+---------------------------+</span><br><span class=\"line\">| Tables_in_mysql           |</span><br><span class=\"line\">+---------------------------+</span><br><span class=\"line\">| columns_priv              |</span><br><span class=\"line\">| db                        |</span><br><span class=\"line\">| engine_cost               |</span><br><span class=\"line\">| event                     |</span><br><span class=\"line\">| func                      |</span><br><span class=\"line\">| general_log               |</span><br><span class=\"line\">| gtid_executed             |</span><br><span class=\"line\">| help_category             |</span><br><span class=\"line\">| help_keyword              |</span><br><span class=\"line\">| help_relation             |</span><br><span class=\"line\">| help_topic                |</span><br><span class=\"line\">| innodb_index_stats        |</span><br><span class=\"line\">| innodb_table_stats        |</span><br><span class=\"line\">| ndb_binlog_index          |</span><br><span class=\"line\">| plugin                    |</span><br><span class=\"line\">| proc                      |</span><br><span class=\"line\">| procs_priv                |</span><br><span class=\"line\">| proxies_priv              |</span><br><span class=\"line\">| server_cost               |</span><br><span class=\"line\">| servers                   |</span><br><span class=\"line\">| slave_master_info         |</span><br><span class=\"line\">| slave_relay_log_info      |</span><br><span class=\"line\">| slave_worker_info         |</span><br><span class=\"line\">| slow_log                  |</span><br><span class=\"line\">| tables_priv               |</span><br><span class=\"line\">| time_zone                 |</span><br><span class=\"line\">| time_zone_leap_second     |</span><br><span class=\"line\">| time_zone_name            |</span><br><span class=\"line\">| time_zone_transition      |</span><br><span class=\"line\">| time_zone_transition_type |</span><br><span class=\"line\">| user                      |</span><br><span class=\"line\">+---------------------------+</span><br><span class=\"line\">31 rows in set (0.00 sec)</span><br><span class=\"line\"></span><br><span class=\"line\"># ä½¿ç”¨ LIKE åšæ¨¡ç³ŠæŸ¥è¯¢</span><br><span class=\"line\">[root@localhost][db1]&gt; SHOW TABLES LIKE &#39;e%&#39;</span><br><span class=\"line\">    -&gt; ;</span><br><span class=\"line\">+--------------------+</span><br><span class=\"line\">| Tables_in_db1 (e%) |</span><br><span class=\"line\">+--------------------+</span><br><span class=\"line\">| emp                |</span><br><span class=\"line\">+--------------------+</span><br><span class=\"line\">1 row in set (0.00 sec)</span><br></pre></td></tr></table></figure>\n\n<hr>\n<h4 id=\"æŸ¥çœ‹è¡¨ç»“æ„\"><a href=\"#æŸ¥çœ‹è¡¨ç»“æ„\" class=\"headerlink\" title=\"æŸ¥çœ‹è¡¨ç»“æ„\"></a>æŸ¥çœ‹è¡¨ç»“æ„</h4><p><code>SHOW COLUMNS FROM table_name</code></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">[root@localhost][db1]&gt; SHOW COLUMNS FROM emp;</span><br><span class=\"line\">+----------+---------------------+------+-----+---------+-------+</span><br><span class=\"line\">| Field    | Type                | Null | Key | Default | Extra |</span><br><span class=\"line\">+----------+---------------------+------+-----+---------+-------+</span><br><span class=\"line\">| username | varchar(20)         | YES  |     | NULL    |       |</span><br><span class=\"line\">| age      | tinyint(3) unsigned | YES  |     | NULL    |       |</span><br><span class=\"line\">| salary   | float(8,2) unsigned | YES  |     | NULL    |       |</span><br><span class=\"line\">+----------+---------------------+------+-----+---------+-------+</span><br><span class=\"line\">3 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>\n\n<hr>\n<h4 id=\"ä¿®æ”¹è¡¨ç»“æ„\"><a href=\"#ä¿®æ”¹è¡¨ç»“æ„\" class=\"headerlink\" title=\"ä¿®æ”¹è¡¨ç»“æ„\"></a>ä¿®æ”¹è¡¨ç»“æ„</h4><blockquote>\n<p>å¹³æ—¶ç”¨IDEç”¨å¤šäº†ï¼Œä¼°è®¡å¾ˆå°‘ä¼šå»å†™SQLä¿®æ”¹è¡¨ç»“æ„ã€‚</p>\n</blockquote>\n<p>ä¿®æ”¹è¡¨ç»“æ„åˆ†ä¸ºä¸¤ç§</p>\n<ul>\n<li>ä¿®æ”¹è¡¨æœ¬èº«<ul>\n<li>ä¿®æ”¹è¡¨å <code>RENAME TBALE ol_table_name TO new_table_name</code></li>\n<li>ä¿®æ”¹è¡¨é€‰é¡¹ <code>ALTER TABLE table_name table_option [=] option</code></li>\n</ul>\n</li>\n<li>ä¿®æ”¹è¡¨å­—æ®µ<ul>\n<li>æ–°å¢å­—æ®µ <code>ALTER TABLE table_name ADD [colums_name] data_type [data_type] [location]</code></li>\n<li>ä¿®æ”¹å­—æ®µ <code>ALTER TABLE table_name MODIFY [columns_name] [data_type] [location]</code> </li>\n<li>é‡å‘½åå­—æ®µ <code>ALTER TABLE table_name CHANGE ol_columns_name new_columns_name data_type [columns_type] [location] </code></li>\n<li>åˆ é™¤å­—æ®µ <code>ALTER TABLE table_name DROP columns_name</code></li>\n</ul>\n</li>\n</ul>\n<hr>\n<h4 id=\"æ’å…¥è¡¨æ•°æ®ï¼ˆä¸€ï¼‰\"><a href=\"#æ’å…¥è¡¨æ•°æ®ï¼ˆä¸€ï¼‰\" class=\"headerlink\" title=\"æ’å…¥è¡¨æ•°æ®ï¼ˆä¸€ï¼‰\"></a>æ’å…¥è¡¨æ•°æ®ï¼ˆä¸€ï¼‰</h4><p><code>INSERT [INTO] table_name [(columns_name , ... )] VALUES(value , ...)</code></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\"># æ’å…¥ä¸€æ¡æ¨¡æ‹Ÿæ•°æ®ï¼Œé»˜è®¤å…¨éƒ¨å­—æ®µéƒ½æ’å…¥ã€‚ä¹Ÿå°±æ²¡æœ‰æŒ‡å®šcolumnsçš„æ—¶å€™æ‰€æœ‰çš„å­—æ®µéƒ½éœ€è¦èµ‹å€¼ã€‚</span><br><span class=\"line\">[root@localhost][db1]&gt; INSERT emp VALUE(&#39;Tom&#39;,23,8432.34);</span><br><span class=\"line\">Query OK, 1 row affected (0.01 sec)</span><br><span class=\"line\"></span><br><span class=\"line\"># æ’å…¥ä¸€æ¡æ•°æ®ï¼Œåªä¸ºéƒ¨åˆ†å­—æ®µèµ‹å€¼ã€‚</span><br><span class=\"line\">[root@localhost][db1]&gt; INSERT emp(username , salary) VALUE(&#39;Jon&#39;,5600.32);</span><br><span class=\"line\">Query OK, 1 row affected (0.01 sec)</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>å®é™…ä¸Šæ’å…¥æ•°æ®çš„æ—¶å€™æ˜¯æœ‰çº¦æŸçš„ã€‚</p>\n</blockquote>\n<p>ç®€å•çš„æŸ¥è¯¢ï¼š<code>SELECT exprï¼Œ.. FROM table_name</code></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\"># å…ˆåšä¸€ä¸ªç®€å•çš„æ¼”ç¤ºï¼Œä½¿ç”¨*æ ‡è¯†æ‰€æœ‰çš„åˆ—ã€‚</span><br><span class=\"line\">[root@localhost][db1]&gt; SELECT * FROM emp;</span><br><span class=\"line\">+----------+------+---------+</span><br><span class=\"line\">| username | age  | salary  |</span><br><span class=\"line\">+----------+------+---------+</span><br><span class=\"line\">| Tom      |   23 | 8432.34 |</span><br><span class=\"line\">| Jon      | NULL | 5600.32 |</span><br><span class=\"line\">+----------+------+---------+</span><br><span class=\"line\">2 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>åœ¨æ’å…¥<code>Jon</code>çš„æ—¶å€™å¹¶æ²¡æœ‰æŒ‡å®šageï¼Œå®é™…ä¸Šä¸€èˆ¬çš„ä¸šåŠ¡ä¸Šä¼šå‡ºç°æ•°æ®ä¸èƒ½ä¸ºç©ºçš„æƒ…å†µã€‚æ¯”å¦‚è¯´åˆšæ‰åˆ›å»ºempæ‰€æœ‰çš„å­—æ®µéƒ½æ˜¯å¯ä»¥ä¸ºç©ºå€¼ã€‚</p>\n</blockquote>\n<h5 id=\"åˆ—çº¦æŸï¼šNULL-NOT-NULL\"><a href=\"#åˆ—çº¦æŸï¼šNULL-NOT-NULL\" class=\"headerlink\" title=\"åˆ—çº¦æŸï¼šNULL \\ NOT NULL\"></a>åˆ—çº¦æŸï¼šNULL \\ NOT NULL</h5><blockquote>\n<p><code>NULL</code> ï¼Œå­—æ®µå€¼å¯ä»¥ä¸ºç©ºï¼›<code>NOT NULL</code>å­—æ®µå€¼ä¸å¯ä¸ºç©ºã€‚</p>\n</blockquote>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\"># æ¨¡æ‹Ÿä¸€æ¡æ•°æ®ï¼Œå¹¶æŒ‡å®šage ä¸ºç©ºã€‚</span><br><span class=\"line\">[root@localhost][db1]&gt; INSERT emp(username,age) VALUE(&#39;Zo&#39;,NULL);</span><br><span class=\"line\">Query OK, 1 row affected (0.00 sec)</span><br><span class=\"line\"># çœ‹ä¸‹å­˜å‚¨çš„ç»“æœ</span><br><span class=\"line\">[root@localhost][db1]&gt; SELECT * FROM emp;</span><br><span class=\"line\">+----------+------+---------+</span><br><span class=\"line\">| username | age  | salary  |</span><br><span class=\"line\">+----------+------+---------+</span><br><span class=\"line\">| Tom      |   23 | 8432.34 |</span><br><span class=\"line\">| Jon      | NULL | 5600.32 |</span><br><span class=\"line\">| Zo       | NULL |    NULL |</span><br><span class=\"line\">+----------+------+---------+</span><br></pre></td></tr></table></figure>\n\n<p>åœ¨åˆ›å»ºä¸€å¼ è¡¨ï¼Œå¹¶æŒ‡å®šéƒ¨åˆ†å­—æ®µä¸èƒ½ä¸ºç©ºã€‚</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\"># åˆ›å»ºè¡¨emp1 ï¼ŒæŒ‡å®šusername ä¸èƒ½ä¸ºç©ºã€‚</span><br><span class=\"line\">[root@localhost][db1]&gt; CREATE TABLE emp1(</span><br><span class=\"line\">    -&gt; username VARCHAR(20) NOT NULL,</span><br><span class=\"line\">    -&gt; age TINYINT UNSIGNED NULL</span><br><span class=\"line\">    -&gt; );</span><br><span class=\"line\">Query OK, 0 rows affected (0.10 sec)</span><br><span class=\"line\"># æŸ¥çœ‹ä¸‹emp1çš„æ•°æ®è¡¨ç»“æ„ã€‚</span><br><span class=\"line\">[root@localhost][db1]&gt; SHOW COLUMNS FROM emp1;</span><br><span class=\"line\">+----------+---------------------+------+-----+---------+-------+</span><br><span class=\"line\">| Field    | Type                | Null | Key | Default | Extra |</span><br><span class=\"line\">+----------+---------------------+------+-----+---------+-------+</span><br><span class=\"line\">| username | varchar(20)         | NO   |     | NULL    |       |</span><br><span class=\"line\">| age      | tinyint(3) unsigned | YES  |     | NULL    |       |</span><br><span class=\"line\">+----------+---------------------+------+-----+---------+-------+</span><br><span class=\"line\">2 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>ä»emp2ç»“æ„ä¸­çœ‹åˆ°ï¼Œæ­¤æ—¶çš„username å·²ç»ä¸èƒ½ä¸ºNULLäº†ã€‚</p>\n</blockquote>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\"># æ¨¡æ‹Ÿæ•°æ®,å°è¯•å§NULLèµ‹å€¼åˆ°usernameã€‚</span><br><span class=\"line\">[root@localhost][db1]&gt; INSERT emp1(username,age) VALUE(NULL,NULL);</span><br><span class=\"line\">ERROR 1048 (23000): Column &#39;username&#39; cannot be null</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"åˆ—çº¦æŸï¼šAUTO-INCREMENT\"><a href=\"#åˆ—çº¦æŸï¼šAUTO-INCREMENT\" class=\"headerlink\" title=\"åˆ—çº¦æŸï¼šAUTO_INCREMENT\"></a>åˆ—çº¦æŸï¼šAUTO_INCREMENT</h5><blockquote>\n<p>AUTO_INCREMENT è‡ªå¢å¿…é¡»å®šä¹‰æˆä¸»é”®ä½¿ç”¨ã€‚</p>\n</blockquote>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\"># å¦‚æœåˆ—çº¦æŸ AUTO_INCREMENT ä¸é…åˆä¸»é”®ä½¿ç”¨ä¼šå‡ºç°ä¸‹åˆ—è­¦å‘Šã€‚</span><br><span class=\"line\">[root@localhost][db1]&gt; CREATE TABLE emp2(</span><br><span class=\"line\">    -&gt; id SMALLINT UNSIGNED AUTO_INCREMENT,</span><br><span class=\"line\">    -&gt; username VARCHAR(20)</span><br><span class=\"line\">    -&gt; );</span><br><span class=\"line\">ERROR 1075 (42000): Incorrect table definition; there can be only one auto column and it must be defined as a key</span><br><span class=\"line\"># ä¿®æ”¹åˆ›å»ºè¡¨è¯­å¥ï¼Œå¹¶æŒ‡å®šä¸»é”®</span><br><span class=\"line\">[root@localhost][db1]&gt; CREATE TABLE emp2(</span><br><span class=\"line\">    -&gt; id SMALLINT UNSIGNED AUTO_INCREMENT PRIMARY KEY,</span><br><span class=\"line\">    -&gt; username VARCHAR(20)</span><br><span class=\"line\">    -&gt; );</span><br><span class=\"line\">Query OK, 0 rows affected (0.09 sec)</span><br><span class=\"line\"># æ£€æŸ¥ä¸‹emp2è¡¨ç»“æ„ã€‚</span><br><span class=\"line\">[root@localhost][db1]&gt; SHOW COLUMNS FROM emp2;</span><br><span class=\"line\">+----------+----------------------+------+-----+---------+----------------+</span><br><span class=\"line\">| Field    | Type                 | Null | Key | Default | Extra          |</span><br><span class=\"line\">+----------+----------------------+------+-----+---------+----------------+</span><br><span class=\"line\">| id       | smallint(5) unsigned | NO   | PRI | NULL    | auto_increment |</span><br><span class=\"line\">| username | varchar(20)          | YES  |     | NULL    |                |</span><br><span class=\"line\">+----------+----------------------+------+-----+---------+----------------+</span><br><span class=\"line\">2 rows in set (0.00 sec)</span><br><span class=\"line\"># æ’å…¥ä¸€æ¡æ•°æ®è¯•è¯•ã€‚</span><br><span class=\"line\">[root@localhost][db1]&gt; INSERT emp2(username) VALUE(&#39;Jon&#39;);</span><br><span class=\"line\">Query OK, 1 row affected (0.01 sec)</span><br><span class=\"line\"># æŸ¥çœ‹ç»“æœ</span><br><span class=\"line\">[root@localhost][db1]&gt; SELECT * FROM emp2;</span><br><span class=\"line\">+----+----------+</span><br><span class=\"line\">| id | username |</span><br><span class=\"line\">+----+----------+</span><br><span class=\"line\">|  1 | Jon      |</span><br><span class=\"line\">+----+----------+</span><br><span class=\"line\">1 row in set (0.00 sec)</span><br><span class=\"line\"># å¦‚æœæ’å…¥çš„æ—¶å€™æŒ‡å®šidçš„å€¼ï¼Œçœ‹çœ‹ä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿ</span><br><span class=\"line\">[root@localhost][db1]&gt; INSERT emp2(id,username) VALUE(10,&#39;Tom&#39;);</span><br><span class=\"line\">Query OK, 1 row affected (0.01 sec)</span><br><span class=\"line\"># æŸ¥çœ‹ç»“æœã€‚</span><br><span class=\"line\">[root@localhost][db1]&gt; SELECT * FROM emp2;</span><br><span class=\"line\">+----+----------+</span><br><span class=\"line\">| id | username |</span><br><span class=\"line\">+----+----------+</span><br><span class=\"line\">|  1 | Jon      |</span><br><span class=\"line\">| 10 | Tom      |</span><br><span class=\"line\">+----+----------+</span><br><span class=\"line\">2 rows in set (0.00 sec)</span><br><span class=\"line\"># ä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœæˆ‘ä»¬æŒ‡å®šæ’å…¥çš„å€¼ï¼Œæ˜¯å¯ä»¥æ’å…¥æˆåŠŸçš„ã€‚åœ¨æ’å…¥ä¸€æ¡çœ‹çœ‹</span><br><span class=\"line\">[root@localhost][db1]&gt; INSERT emp2(username) VALUE(&#39;King&#39;);</span><br><span class=\"line\">Query OK, 1 row affected (0.03 sec)</span><br><span class=\"line\"># å†æŸ¥çœ‹</span><br><span class=\"line\">[root@localhost][db1]&gt; SELECT * FROM emp2;</span><br><span class=\"line\">+----+----------+</span><br><span class=\"line\">| id | username |</span><br><span class=\"line\">+----+----------+</span><br><span class=\"line\">|  1 | Jon      |</span><br><span class=\"line\">| 10 | Tom      |</span><br><span class=\"line\">| 11 | King     |</span><br><span class=\"line\">+----+----------+</span><br><span class=\"line\">3 rows in set (0.00 sec)</span><br><span class=\"line\">#  ç»“æœå¯ä»¥çœ‹åˆ°ï¼ŒæŒ‡å®šä¸»é”®åï¼Œåœ¨æ­¤æ’å…¥è‹¥ä¸æŒ‡å®šä¼šåœ¨æœ€å¤§çš„idä¸Šè¿›è¡Œè‡ªå¢ã€‚</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"åˆ—çº¦æŸï¼šPRIMARY-KEY\"><a href=\"#åˆ—çº¦æŸï¼šPRIMARY-KEY\" class=\"headerlink\" title=\"åˆ—çº¦æŸï¼šPRIMARY KEY\"></a>åˆ—çº¦æŸï¼šPRIMARY KEY</h5><blockquote>\n<p>PRIMARY KEY ä¸»é”®çº¦æŸï¼Œä¸Šé¢æˆ‘ä»¬ä½¿ç”¨äº†<code>AUTO_INCREMENT</code>è€Œå®ƒæ˜¯å¿…é¡»é…åˆPRIMARY KEYä½¿ç”¨ã€‚ä½†æ˜¯PRIMARY KEY å¯ä»¥å•ç‹¬ä½¿ç”¨ã€‚ä¸€å¼ è¡¨ä¹Ÿåªèƒ½å­˜åœ¨ä¸€ä¸ªä¸»é”®ã€‚</p>\n</blockquote>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\"># åˆ›å»ºä¸€ä¸ªè¡¨ï¼Œå¹¶æŒ‡å®šPRIMARY KEY ä½†æ˜¯ä¸ä½¿ç”¨AUTO_INCRMENTã€‚</span><br><span class=\"line\">[root@localhost][db1]&gt; CREATE TABLE emp3( </span><br><span class=\"line\">\tid SMALLINT UNSIGNED PRIMARY KEY , </span><br><span class=\"line\">\tusername VARCHAR(20)</span><br><span class=\"line\">);</span><br><span class=\"line\">Query OK, 0 rows affected (0.09 sec)</span><br></pre></td></tr></table></figure>\n\n<p>ä¸»é”®æœ‰ä¸€ä¸ªç‰¹æ€§å°±æ˜¯ä¿è¯å”¯ä¸€æ€§ï¼Œæ‰€ä»¥ä¸å¯ä»¥é‡å¤ã€‚</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\"># æ£€æŸ¥ä¸‹emp3è¡¨ç»“æ„ï¼Œå¯ä»¥çœ‹åˆ°NULLåˆ—æ˜¯NOã€‚</span><br><span class=\"line\">[root@localhost][db1]&gt; SHOW COLUMNS FROM emp3;</span><br><span class=\"line\">+----------+----------------------+------+-----+---------+-------+</span><br><span class=\"line\">| Field    | Type                 | Null | Key | Default | Extra |</span><br><span class=\"line\">+----------+----------------------+------+-----+---------+-------+</span><br><span class=\"line\">| id       | smallint(5) unsigned | NO   | PRI | NULL    |       |</span><br><span class=\"line\">| username | varchar(20)          | YES  |     | NULL    |       |</span><br><span class=\"line\">+----------+----------------------+------+-----+---------+-------+</span><br><span class=\"line\">2 rows in set (0.00 sec)</span><br><span class=\"line\"># æˆ‘ä»¬æ¥æ¨¡æ‹Ÿä¸€æ¬¡ä¸»é”®é‡å¤çš„æƒ…å†µã€‚</span><br><span class=\"line\">[root@localhost][db1]&gt; INSERT emp3(id,username) VALUES(1,&#39;Tom&#39;);</span><br><span class=\"line\">Query OK, 1 row affected (0.01 sec)</span><br><span class=\"line\"># ä¸»é”®é‡å¤å¼‚å¸¸ã€‚</span><br><span class=\"line\">[root@localhost][db1]&gt; INSERT emp3(id,username) VALUES(1,&#39;Jon&#39;);</span><br><span class=\"line\">ERROR 1062 (23000): Duplicate entry &#39;1&#39; for key &#39;PRIMARY&#39;</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"åˆ—çº¦æŸï¼šUNIQUE-KEY\"><a href=\"#åˆ—çº¦æŸï¼šUNIQUE-KEY\" class=\"headerlink\" title=\"åˆ—çº¦æŸï¼šUNIQUE KEY\"></a>åˆ—çº¦æŸï¼šUNIQUE KEY</h5><blockquote>\n<p>UNIQUE KEYå”¯ä¸€çº¦æŸï¼Œå”¯ä¸€çš„çº¦æŸå¯ä»¥ä¿è¯æ•°æ®çš„å”¯ä¸€æ€§ï¼Œå”¯ä¸€çº¦æŸçš„å­—æ®µå¯ä»¥è®¾ç½®ä¸ºNULLã€‚æ¯å¼ è¡¨å¯ä»¥è®¾ç½®å¤šä¸ªå”¯ä¸€çº¦æŸï¼Œè¿™ä¸ªä¸»é”®ä¸åŒã€‚</p>\n</blockquote>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\"># åˆ›å»ºä¸€å¼ ä¸»é”®è‡ªå¢å¹¶ä¸”æœ‰å”¯ä¸€çº¦æŸçš„è¡¨emp4ã€‚</span><br><span class=\"line\">[root@localhost][(none)]&gt; CREATE TABLE emp4(</span><br><span class=\"line\">    -&gt; id SMALLINT UNSIGNED AUTO_INCREMENT PRIMARY KEY,</span><br><span class=\"line\">    -&gt; username VARCHAR(20) NOT NULL UNIQUE KEY,</span><br><span class=\"line\">    -&gt; age TINYINT UNSIGNED</span><br><span class=\"line\">    -&gt; );</span><br><span class=\"line\">Query OK, 0 rows affected (0.09 sec)</span><br><span class=\"line\"># æŸ¥çœ‹ä¸‹emp4è¡¨ç»“æ„æƒ…å†µã€‚</span><br><span class=\"line\">[root@localhost][Demo]&gt; SHOW COLUMNS FROM emp4;</span><br><span class=\"line\">+----------+----------------------+------+-----+---------+----------------+</span><br><span class=\"line\">| Field    | Type                 | Null | Key | Default | Extra          |</span><br><span class=\"line\">+----------+----------------------+------+-----+---------+----------------+</span><br><span class=\"line\">| id       | smallint(5) unsigned | NO   | PRI | NULL    | auto_increment |</span><br><span class=\"line\">| username | varchar(20)          | NO   | UNI | NULL    |                |</span><br><span class=\"line\">| age      | tinyint(3) unsigned  | YES  |     | NULL    |                |</span><br><span class=\"line\">+----------+----------------------+------+-----+---------+----------------+</span><br><span class=\"line\">3 rows in set (0.00 sec)</span><br><span class=\"line\"></span><br><span class=\"line\"># æ’å…¥æ•°æ®è¯•è¯•</span><br><span class=\"line\">[root@localhost][Demo]&gt; INSERT emp4(username,age) VALUES(&#39;Tom&#39;,22);</span><br><span class=\"line\">Query OK, 1 row affected (0.01 sec)</span><br><span class=\"line\"># é‡å¤æ’å…¥Tomè¯•è¯•ï¼Œè¿™ä¼šæç¤ºé”™è¯¯ã€‚</span><br><span class=\"line\">[root@localhost][Demo]&gt; INSERT emp4(username,age) VALUES(&#39;Tom&#39;,22);</span><br><span class=\"line\">ERROR 1062 (23000): Duplicate entry &#39;Tom&#39; for key &#39;username&#39;</span><br></pre></td></tr></table></figure>\n\n<p>è¿™é‡Œå…¶å®æœ‰ä¸€ä¸ªç–‘é—®ï¼Œä¸ºä»€ä¹ˆQNIQUE KYEå¯ä»¥ä¸ºNULLï¼Œå¦‚æœä¸ºNULLæ€ä¹ˆè¡¨ç¤ºå”¯ä¸€å‘¢ï¼Ÿ</p>\n<h5 id=\"åˆ—çº¦æŸï¼šDEFAULT\"><a href=\"#åˆ—çº¦æŸï¼šDEFAULT\" class=\"headerlink\" title=\"åˆ—çº¦æŸï¼šDEFAULT\"></a>åˆ—çº¦æŸï¼šDEFAULT</h5><blockquote>\n<p>DEFAULT é»˜è®¤å€¼ï¼Œå¦‚æœæ²¡æœ‰æ˜ç¡®å­—æ®µèµ‹å€¼ï¼Œåˆ™è‡ªåŠ¨èµ‹å€¼ä¸ºé»˜è®¤å€¼ã€‚</p>\n</blockquote>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\"># åˆ›å»ºä¸€å¼ è¡¨ï¼ŒæŒ‡å®šsex DEFAULT å€¼ä¸º 0,å¦‚æœæ’å…¥æ•°æ®çš„æ—¶å€™ä¸æŒ‡å®šï¼Œé‚£ä¹ˆè¿™ä¸ªå­—æ®µå°±æ˜¯0ã€‚</span><br><span class=\"line\">[root@localhost][Demo]&gt; CREATE TABLE emp5(</span><br><span class=\"line\">    -&gt; id SMALLINT UNSIGNED AUTO_INCREMENT PRIMARY KEY,</span><br><span class=\"line\">    -&gt; username VARCHAR(20) NOT NULL UNIQUE KEY,</span><br><span class=\"line\">    -&gt; sex TINYINT DEFAULT 0</span><br><span class=\"line\">    -&gt; );</span><br><span class=\"line\">Query OK, 0 rows affected (0.11 sec)</span><br><span class=\"line\"></span><br><span class=\"line\">#æ£€æŸ¥è¡¨emp5ç»“æ„</span><br><span class=\"line\">[root@localhost][Demo]&gt; SHOW COLUMNS FROM emp5;</span><br><span class=\"line\">+----------+----------------------+------+-----+---------+----------------+</span><br><span class=\"line\">| Field    | Type                 | Null | Key | Default | Extra          |</span><br><span class=\"line\">+----------+----------------------+------+-----+---------+----------------+</span><br><span class=\"line\">| id       | smallint(5) unsigned | NO   | PRI | NULL    | auto_increment |</span><br><span class=\"line\">| username | varchar(20)          | NO   | UNI | NULL    |                |</span><br><span class=\"line\">| sex      | tinyint(4)           | YES  |     | 0       |                |</span><br><span class=\"line\">+----------+----------------------+------+-----+---------+----------------+</span><br><span class=\"line\">3 rows in set (0.00 sec)</span><br><span class=\"line\"></span><br><span class=\"line\"># æ’å…¥æ¨¡æ‹Ÿæ•°æ®</span><br><span class=\"line\">[root@localhost][Demo]&gt; INSERT emp5(username) VALUES(&#39;Tom&#39;);</span><br><span class=\"line\">Query OK, 1 row affected (0.02 sec)</span><br><span class=\"line\">[root@localhost][Demo]&gt; INSERT emp5(username) VALUES(&#39;Jon&#39;);</span><br><span class=\"line\">Query OK, 1 row affected (0.01 sec)</span><br><span class=\"line\"></span><br><span class=\"line\"># æŸ¥çœ‹æ•°æ®ï¼Œå¹¶æ²¡æœ‰æŒ‡å®šsexçš„å€¼ï¼Œå°±ä¼šä½¿ç”¨é»˜è®¤å€¼ã€‚</span><br><span class=\"line\">[root@localhost][Demo]&gt; SELECT * FROM emp5;</span><br><span class=\"line\">+----+----------+------+</span><br><span class=\"line\">| id | username | sex  |</span><br><span class=\"line\">+----+----------+------+</span><br><span class=\"line\">|  1 | Tom      |    0 |</span><br><span class=\"line\">|  2 | Jon      |    0 |</span><br><span class=\"line\">+----+----------+------+</span><br><span class=\"line\">2 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"åˆ—çº¦æŸï¼šå°ç»“\"><a href=\"#åˆ—çº¦æŸï¼šå°ç»“\" class=\"headerlink\" title=\"åˆ—çº¦æŸï¼šå°ç»“\"></a>åˆ—çº¦æŸï¼šå°ç»“</h5><blockquote>\n<p>åˆ—çš„å±æ€§ï¼Œé™¤äº†æ•°æ®ç±»å‹çš„çº¦æŸï¼Œå°±æ˜¯ä¸Šé¢å‡ ç§åˆ—çº¦æŸã€‚</p>\n</blockquote>\n<ul>\n<li>çº¦æŸä¿è¯æ•°æ®çš„å®Œæ•´æ€§ã€‚</li>\n<li>çº¦æŸåˆ†ä¸ºè¡¨çº§çº¦æŸå’Œåˆ—çº§åˆ«çº¦æŸã€‚</li>\n<li>çº¦æŸçš„ç±»å‹åŒ…æ‹¬<ul>\n<li>NOT NULL <code>éç©ºçº¦æŸ</code></li>\n<li>PRIMARY KEY <code>ä¸»é”®çº¦æŸ</code></li>\n<li>UNIQUE KEY <code>å”¯ä¸€çº¦æŸ</code></li>\n<li>DEFAULT <code>é»˜è®¤çº¦æŸ</code></li>\n<li>FOREIGN KEY <code>å¤–é”®çº¦æŸ</code></li>\n</ul>\n</li>\n</ul>\n<h5 id=\"æ’å…¥æ•°æ®éœ€è¦æ³¨æ„\"><a href=\"#æ’å…¥æ•°æ®éœ€è¦æ³¨æ„\" class=\"headerlink\" title=\"æ’å…¥æ•°æ®éœ€è¦æ³¨æ„\"></a>æ’å…¥æ•°æ®éœ€è¦æ³¨æ„</h5><blockquote>\n<p>åœ¨æ’å…¥æ•°æ®çš„æ—¶å€™ä¹Ÿæ˜¯å­˜åœ¨ä¸€äº›éœ€è¦æ³¨æ„çš„åœ°æ–¹ï¼Œä¸‹é¢æ¼”ç¤ºä¸‹ã€‚</p>\n</blockquote>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\"># åˆ›å»ºæµ‹è¯•è¡¨ users</span><br><span class=\"line\">[root@localhost][Demo]&gt; CREATE TABLE users(</span><br><span class=\"line\">    -&gt; id SMALLINT AUTO_INCREMENT PRIMARY KEY,</span><br><span class=\"line\">    -&gt; name VARCHAR(20) UNIQUE KEY,</span><br><span class=\"line\">    -&gt; pwd VARCHAR(30) NOT NULL,</span><br><span class=\"line\">    -&gt; age TINYINT UNSIGNED NOT NULL,</span><br><span class=\"line\">    -&gt; sex TINYINT UNSIGNED DEFAULT 0</span><br><span class=\"line\">    -&gt; );</span><br><span class=\"line\">Query OK, 0 rows affected (0.07 sec)</span><br><span class=\"line\">#çœ‹ä¸‹è¡¨çš„ç»“æ„ã€‚</span><br><span class=\"line\">[root@localhost][Demo]&gt; SHOW COLUMNS FROM users;</span><br><span class=\"line\">+-------+---------------------+------+-----+---------+----------------+</span><br><span class=\"line\">| Field | Type                | Null | Key | Default | Extra          |</span><br><span class=\"line\">+-------+---------------------+------+-----+---------+----------------+</span><br><span class=\"line\">| id    | smallint(6)         | NO   | PRI | NULL    | auto_increment |</span><br><span class=\"line\">| name  | varchar(20)         | YES  | UNI | NULL    |                |</span><br><span class=\"line\">| pwd   | varchar(30)         | NO   |     | NULL    |                |</span><br><span class=\"line\">| age   | tinyint(3) unsigned | NO   |     | NULL    |                |</span><br><span class=\"line\">| sex   | tinyint(3) unsigned | YES  |     | 0       |                |</span><br><span class=\"line\">+-------+---------------------+------+-----+---------+----------------+</span><br><span class=\"line\">5 rows in set (0.00 sec)</span><br><span class=\"line\"></span><br><span class=\"line\"># æ’å…¥æ•°æ®æ¨¡æ‹Ÿæ•°æ®ï¼Œä¸æŒ‡å®šæ’å…¥æ•°æ®çš„ä½ç½®ã€‚</span><br><span class=\"line\">[root@localhost][Demo]&gt; INSERT users VALUES(NULL,&#39;Tom&#39;,&#39;_23234awdasdwf&#39;,23,NULL);</span><br><span class=\"line\">Query OK, 1 row affected (0.03 sec)</span><br><span class=\"line\"></span><br><span class=\"line\"># å†è¯•ä¸€æ¬¡ï¼Œå°‘æ’å…¥ä¸€ä¸ªä½ç½®çš„æ•°æ®ã€‚å¦‚æœçœç•¥äº†åˆ—åï¼Œå°±è¦éœ€è¦å°†åˆ—æ•°æ®è¡¥å…¨ï¼Œå¦åˆ™ä¼šé€ æˆæ’å…¥å¤±è´¥çš„æƒ…å†µã€‚</span><br><span class=\"line\">[root@localhost][Demo]&gt; INSERT users VALUES(NULL,&#39;Tom&#39;,&#39;_23234awdasdwf&#39;,23);</span><br><span class=\"line\">ERROR 1136 (21S01): Column count doesn&#39;t match value count at row 1</span><br></pre></td></tr></table></figure>\n\n<p>æ’å…¥æ—¶å€™ä½¿ç”¨DEFAULTå…³é”®å­—ï¼ŒåŒæ—¶å¯ä»¥ä½¿ç”¨è¡¨è¾¾å¼ä½œä¸ºå‚æ•°ã€‚</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\"># å…³é”®å­DEFAULTä¹Ÿå¯ä»¥ä½¿ç”¨ï¼Œsexå­—æ®µå°±æœ‰DEFAULT,age ç”¨åˆ°äº†è¡¨è¾¾å¼æ±‚å€¼</span><br><span class=\"line\">[root@localhost][Demo]&gt; INSERT users VALUES(NULL,&#39;Rose&#39;,&#39;_23234awdasdwf&#39;, 2*3 + 11,DEFAULT);</span><br><span class=\"line\">Query OK, 1 row affected (0.00 sec)</span><br><span class=\"line\"></span><br><span class=\"line\"># ä¸€æ¬¡æ€§æ’å…¥å¤šæ¡æ•°æ®</span><br><span class=\"line\">[root@localhost][Demo]&gt; INSERT users VALUES(NULL,&#39;Atom&#39;,&#39;pwd&#39;,21,DEFAULT),(NULL,&#39;Per&#39;,&#39;pwd&#39;,23,DEFAULT);</span><br><span class=\"line\">Query OK, 2 rows affected (0.02 sec)</span><br><span class=\"line\">Records: 2  Duplicates: 0  Warnings: 0</span><br><span class=\"line\"></span><br><span class=\"line\">[root@localhost][Demo]&gt; SELECT * FROM users;</span><br><span class=\"line\">+----+------+----------------+-----+------+</span><br><span class=\"line\">| id | name | pwd            | age | sex  |</span><br><span class=\"line\">+----+------+----------------+-----+------+</span><br><span class=\"line\">|  1 | Tom  | _23234awdasdwf |  23 | NULL |</span><br><span class=\"line\">|  3 | Jon  | _23234awdasdwf |  17 | NULL |</span><br><span class=\"line\">|  4 | Rose | _23234awdasdwf |  17 |    0 |</span><br><span class=\"line\">|  5 | Atom | pwd            |  21 |    0 |</span><br><span class=\"line\">|  6 | Per  | pwd            |  23 |    0 |</span><br><span class=\"line\">+----+------+----------------+-----+------+</span><br></pre></td></tr></table></figure>\n\n<hr>\n<h4 id=\"æ’å…¥è¡¨æ•°æ®ï¼ˆäºŒï¼‰\"><a href=\"#æ’å…¥è¡¨æ•°æ®ï¼ˆäºŒï¼‰\" class=\"headerlink\" title=\"æ’å…¥è¡¨æ•°æ®ï¼ˆäºŒï¼‰\"></a>æ’å…¥è¡¨æ•°æ®ï¼ˆäºŒï¼‰</h4><p><code>INSERT [INTO] table_name SET columns_name ={ expr | DEFAULT},...</code></p>\n<ul>\n<li>ä¸ç¬¬ä¸€ç§æ’å…¥æ–¹å¼ä¸åŒçš„æ˜¯ï¼Œæ­¤æ–¹æ³•å¯ä»¥ä½¿ç”¨å­æŸ¥è¯¢ï¼ˆSubQueryï¼‰;è€Œä¸”è¿™æ–¹å¼ä¸€æ¬¡åªèƒ½æ’å…¥ä¸€æ¡æ•°æ®ã€‚</li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\"># æ¨¡æ‹Ÿä¸€æ¡æµ‹è¯•æ•°æ®ã€‚</span><br><span class=\"line\">[root@localhost][Demo]&gt; INSERT users SET name &#x3D; &#39;CoCo&#39;, pwd &#x3D; &#39;pwd&#39;,age &#x3D; 22;</span><br><span class=\"line\">Query OK, 1 row affected (0.01 sec)</span><br><span class=\"line\"># æŸ¥è¯¢ç»“æœã€‚</span><br><span class=\"line\">[root@localhost][Demo]&gt; SELECT * FROM users;</span><br><span class=\"line\">+----+------+----------------+-----+------+</span><br><span class=\"line\">| id | name | pwd            | age | sex  |</span><br><span class=\"line\">+----+------+----------------+-----+------+</span><br><span class=\"line\">|  1 | Tom  | _23234awdasdwf |  23 | NULL |</span><br><span class=\"line\">|  3 | Jon  | _23234awdasdwf |  17 | NULL |</span><br><span class=\"line\">|  4 | Rose | _23234awdasdwf |  17 |    0 |</span><br><span class=\"line\">|  5 | Atom | pwd            |  21 |    0 |</span><br><span class=\"line\">|  6 | Per  | pwd            |  23 |    0 |</span><br><span class=\"line\">|  7 | CoCo | pwd            |  22 |    0 |</span><br><span class=\"line\">+----+------+----------------+-----+------+</span><br><span class=\"line\">6 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>\n\n<hr>\n<h4 id=\"æ’å…¥è¡¨æ•°æ®ï¼ˆä¸‰ï¼‰\"><a href=\"#æ’å…¥è¡¨æ•°æ®ï¼ˆä¸‰ï¼‰\" class=\"headerlink\" title=\"æ’å…¥è¡¨æ•°æ®ï¼ˆä¸‰ï¼‰\"></a>æ’å…¥è¡¨æ•°æ®ï¼ˆä¸‰ï¼‰</h4><p><code>INSERT [INTO] tablle_name [(columns_name,...)] SELECT ...</code></p>\n<ul>\n<li>è¿™ç§æ–¹å¼ï¼Œå¯ä»¥å°†æŸ¥è¯¢ç»“æœæ’å…¥åˆ°æŒ‡å®šçš„æ•°æ®è¡¨ä¸­ã€‚</li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\"># åˆ›å»ºä¸€å¼ æµ‹è¯•è¡¨ã€‚åªæœ‰ä¸¤ä¸ªå­—æ®µï¼Œid å’Œ nameã€‚</span><br><span class=\"line\">[root@localhost][Demo]&gt; CREATE TABLE test(</span><br><span class=\"line\">    -&gt; id TINYINT UNSIGNED PRIMARY KEY AUTO_INCREMENT,</span><br><span class=\"line\">    -&gt; name VARCHAR(30) </span><br><span class=\"line\">    -&gt; );</span><br><span class=\"line\">Query OK, 0 rows affected (0.07 sec)</span><br><span class=\"line\"></span><br><span class=\"line\"># å°è¯•å°†usersè¡¨ä¸­çš„æ•°æ®æ’å…¥åˆ°testä¸­ã€‚</span><br><span class=\"line\"># å…ˆçœ‹çœ‹å½“å‰usersè¡¨ä¸­çš„æ•°æ®ã€‚</span><br><span class=\"line\">[root@localhost][Demo]&gt; SELECT * FROM users;</span><br><span class=\"line\">+----+------+----------------+-----+------+</span><br><span class=\"line\">| id | name | pwd            | age | sex  |</span><br><span class=\"line\">+----+------+----------------+-----+------+</span><br><span class=\"line\">|  1 | Tom  | _23234awdasdwf |  18 |    1 |</span><br><span class=\"line\">|  3 | Jon  | _23234awdasdwf |  17 |    1 |</span><br><span class=\"line\">|  4 | Rose | _23234awdasdwf |  17 |    0 |</span><br><span class=\"line\">|  5 | Atom | pwd            |  16 |    0 |</span><br><span class=\"line\">|  6 | Per  | pwd            |  18 |    0 |</span><br><span class=\"line\">|  8 | CoCo | agc            |  17 |    1 |</span><br><span class=\"line\">+----+------+----------------+-----+------+</span><br><span class=\"line\">6 rows in set (0.00 sec)</span><br><span class=\"line\"></span><br><span class=\"line\"># å°è¯•å°† age &gt; 17 çš„nameæ’å…¥åˆ°testä¸­ã€‚æ³¨æ„äº†ï¼Œæ’å…¥å‡ ä¸ªå€¼å’ŒæŸ¥è¯¢çš„å€¼è¦åŒ¹é…ã€‚è¿™é‡Œæç¤º2æ¡æˆåŠŸ</span><br><span class=\"line\">[root@localhost][Demo]&gt; INSERT test(name) SELECT name FROM users WHERE age &gt; 17;</span><br><span class=\"line\">Query OK, 2 rows affected (0.03 sec)</span><br><span class=\"line\">Records: 2  Duplicates: 0  Warnings: 0</span><br><span class=\"line\"></span><br><span class=\"line\">#æ£€æŸ¥ç»“æœï¼Œè¿™é‡Œå¯ä»¥çœ‹åˆ° users è¡¨ä¸­ age &gt; 17 çš„nameå€¼æ’å…¥åˆ°testä¸­ã€‚</span><br><span class=\"line\">[root@localhost][Demo]&gt; SELECT * FROM test;</span><br><span class=\"line\">+----+------+</span><br><span class=\"line\">| id | name |</span><br><span class=\"line\">+----+------+</span><br><span class=\"line\">|  1 | Tom  |</span><br><span class=\"line\">|  2 | Per  |</span><br><span class=\"line\">+----+------+</span><br><span class=\"line\">2 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>\n\n<hr>\n<h4 id=\"æ›´æ–°è¡¨æ•°æ®ï¼ˆä¸€ï¼‰\"><a href=\"#æ›´æ–°è¡¨æ•°æ®ï¼ˆä¸€ï¼‰\" class=\"headerlink\" title=\"æ›´æ–°è¡¨æ•°æ®ï¼ˆä¸€ï¼‰\"></a>æ›´æ–°è¡¨æ•°æ®ï¼ˆä¸€ï¼‰</h4><p><code>UPDATE [LOW_PRIORITY] [IGNORE] tabel_refernce SET columns_name1 = { expre1 | DEFAULT} , columns_name2 = { expre2 | DEFAULT}] ... [WHERE where_condition]  </code></p>\n<ul>\n<li>å•è¡¨æ›´æ–°ï¼Œè¿™é‡Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå¦‚æœä¸æ·»åŠ whereåˆ¤æ–­æ¡ä»¶ï¼Œä¼šå¯¼è‡´è¯¥è¡¨æ‰€æœ‰è®°å½•éƒ½è¢«æ›´æ–°ã€‚</li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\"># è¿™é‡Œä½¿ç”¨usersè¡¨ä¸­çš„æ•°æ®ã€‚</span><br><span class=\"line\">[root@localhost][Demo]&gt; SELECT * FROM users;</span><br><span class=\"line\">+----+------+----------------+-----+------+</span><br><span class=\"line\">| id | name | pwd            | age | sex  |</span><br><span class=\"line\">+----+------+----------------+-----+------+</span><br><span class=\"line\">|  1 | Tom  | _23234awdasdwf |  23 | NULL |</span><br><span class=\"line\">|  3 | Jon  | _23234awdasdwf |  17 | NULL |</span><br><span class=\"line\">|  4 | Rose | _23234awdasdwf |  17 |    0 |</span><br><span class=\"line\">|  5 | Atom | pwd            |  21 |    0 |</span><br><span class=\"line\">|  6 | Per  | pwd            |  23 |    0 |</span><br><span class=\"line\">|  7 | CoCo | pwd            |  22 |    0 |</span><br><span class=\"line\">+----+------+----------------+-----+------+</span><br><span class=\"line\">6 rows in set (0.00 sec)</span><br><span class=\"line\"></span><br><span class=\"line\"># è¿™æ¡SQLè¯­å¥è¡¨ç¤ºè®©è¿™ä¸ªè¡¨ä¸­æ‰€æœ‰çš„age éƒ½ + 5ï¼›</span><br><span class=\"line\">[root@localhost][Demo]&gt; UPDATE users SET age &#x3D; age + 5;</span><br><span class=\"line\">Query OK, 6 rows affected (0.00 sec)</span><br><span class=\"line\">Rows matched: 6  Changed: 6  Warnings: 0</span><br><span class=\"line\"></span><br><span class=\"line\"># æŸ¥çœ‹ç»“æœï¼Œå·²ç»å…¨éƒ¨æ›´æ–°ã€‚</span><br><span class=\"line\">[root@localhost][Demo]&gt; SELECT * FROM users;</span><br><span class=\"line\">+----+------+----------------+-----+------+</span><br><span class=\"line\">| id | name | pwd            | age | sex  |</span><br><span class=\"line\">+----+------+----------------+-----+------+</span><br><span class=\"line\">|  1 | Tom  | _23234awdasdwf |  28 | NULL |</span><br><span class=\"line\">|  3 | Jon  | _23234awdasdwf |  22 | NULL |</span><br><span class=\"line\">|  4 | Rose | _23234awdasdwf |  22 |    0 |</span><br><span class=\"line\">|  5 | Atom | pwd            |  26 |    0 |</span><br><span class=\"line\">|  6 | Per  | pwd            |  28 |    0 |</span><br><span class=\"line\">|  7 | CoCo | pwd            |  27 |    0 |</span><br><span class=\"line\">+----+------+----------------+-----+------+</span><br><span class=\"line\">6 rows in set (0.00 sec)</span><br><span class=\"line\"></span><br><span class=\"line\"># æ·»åŠ where_conditionã€‚å°†age &gt; 25 çš„è®°å½• age - 5ï¼›</span><br><span class=\"line\">[root@localhost][Demo]&gt; UPDATE users SET age &#x3D; age - 5 WHERE age &gt; 25;</span><br><span class=\"line\">Query OK, 4 rows affected (0.01 sec)</span><br><span class=\"line\">Rows matched: 4  Changed: 4  Warnings: 0</span><br><span class=\"line\"></span><br><span class=\"line\"># æŸ¥çœ‹ç»“æœ</span><br><span class=\"line\">[root@localhost][Demo]&gt; SELECT * FROM users;</span><br><span class=\"line\">+----+------+----------------+-----+------+</span><br><span class=\"line\">| id | name | pwd            | age | sex  |</span><br><span class=\"line\">+----+------+----------------+-----+------+</span><br><span class=\"line\">|  1 | Tom  | _23234awdasdwf |  23 | NULL |</span><br><span class=\"line\">|  3 | Jon  | _23234awdasdwf |  22 | NULL |</span><br><span class=\"line\">|  4 | Rose | _23234awdasdwf |  22 |    0 |</span><br><span class=\"line\">|  5 | Atom | pwd            |  21 |    0 |</span><br><span class=\"line\">|  6 | Per  | pwd            |  23 |    0 |</span><br><span class=\"line\">|  7 | CoCo | pwd            |  22 |    0 |</span><br><span class=\"line\">+----+------+----------------+-----+------+</span><br><span class=\"line\">6 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>\n\n<hr>\n<h4 id=\"æ›´æ–°è¡¨æ•°æ®ï¼ˆäºŒï¼‰\"><a href=\"#æ›´æ–°è¡¨æ•°æ®ï¼ˆäºŒï¼‰\" class=\"headerlink\" title=\"æ›´æ–°è¡¨æ•°æ®ï¼ˆäºŒï¼‰\"></a>æ›´æ–°è¡¨æ•°æ®ï¼ˆäºŒï¼‰</h4><ul>\n<li>å¤šè¡¨æ›´æ–°: <code>UPDATE table_reference SET columns_name = { expr1 | DEFAULT } [ columns_name2 = { expr2 | DEFAULT }]... [WHERE where_condition]</code></li>\n<li>ä½†æ˜¯å‘¢å¤šè¡¨æ›´æ–°å®é™…ä¸Šæ˜¯éœ€è¦ä½¿ç”¨è¦è¿æ¥ï¼Œè¿™é‡Œä¸åšè¿‡å¤šçš„çš†æ˜¯ï¼Œç®€å•çš„æ¼”ç¤ºä¸€ä¸‹ã€‚</li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\"># åˆ›å»ºä¸€å¼ user_names è¡¨æ¥å­˜å‚¨ç”¨æˆ·çš„åå­—ï¼Œå…¶å®æ²¡å•¥æ„ä¹‰ï¼Œå°±æ˜¯æ¼”ç¤ºä¸‹ã€‚</span><br><span class=\"line\">[root@localhost][Demo]&gt; CREATE TABLE user_names(</span><br><span class=\"line\">    -&gt; id TINYINT UNSIGNED PRIMARY KEY AUTO_INCREMENT,</span><br><span class=\"line\">    -&gt; name VARCHAR(40) NOT NULL,</span><br><span class=\"line\">    -&gt; uid TINYINT UNSIGNED NOT NULL</span><br><span class=\"line\">    -&gt; );</span><br><span class=\"line\">Query OK, 0 rows affected (0.07 sec)</span><br><span class=\"line\"></span><br><span class=\"line\"># æ£€æŸ¥ä¸‹è¡¨ç»“æ„</span><br><span class=\"line\">[root@localhost][Demo]&gt; SHOW COLUMNS FROM user_names;</span><br><span class=\"line\">+-------+---------------------+------+-----+---------+----------------+</span><br><span class=\"line\">| Field | Type                | Null | Key | Default | Extra          |</span><br><span class=\"line\">+-------+---------------------+------+-----+---------+----------------+</span><br><span class=\"line\">| id    | tinyint(3) unsigned | NO   | PRI | NULL    | auto_increment |</span><br><span class=\"line\">| name  | varchar(40)         | NO   |     | NULL    |                |</span><br><span class=\"line\">| uid   | tinyint(3) unsigned | NO   |     | NULL    |                |</span><br><span class=\"line\">+-------+---------------------+------+-----+---------+----------------+</span><br><span class=\"line\">3 rows in set (0.00 sec)</span><br><span class=\"line\"></span><br><span class=\"line\"># æˆ‘ä»¬å…ˆå§ç”¨æˆ·çš„åå­—å’Œä¸»é”®éƒ½æ’å…¥è¿›æ¥ã€‚</span><br><span class=\"line\">[root@localhost][Demo]&gt; INSERT INTO user_names(uid,name) SELECT id , name FROM users ;</span><br><span class=\"line\">Query OK, 6 rows affected (0.01 sec)</span><br><span class=\"line\">Records: 6  Duplicates: 0  Warnings: 0</span><br><span class=\"line\"></span><br><span class=\"line\">[root@localhost][Demo]&gt; SELECT * FROM user_names;</span><br><span class=\"line\">+----+------+-----+</span><br><span class=\"line\">| id | name | uid |</span><br><span class=\"line\">+----+------+-----+</span><br><span class=\"line\">|  1 | Atom |   5 |</span><br><span class=\"line\">|  2 | CoCo |   8 |</span><br><span class=\"line\">|  3 | Jon  |   3 |</span><br><span class=\"line\">|  4 | Per  |   6 |</span><br><span class=\"line\">|  5 | Rose |   4 |</span><br><span class=\"line\">|  6 | Tom  |   1 |</span><br><span class=\"line\">+----+------+-----+</span><br><span class=\"line\">6 rows in set (0.00 sec)</span><br><span class=\"line\"></span><br><span class=\"line\"># è¿™ä¸ªæ—¶å€™å§usersè¡¨ä¸­æŸä¸ªç”¨æˆ·çš„åå­—ä¿®æ”¹ä¸€æ¬¡ï¼Œåœ¨æ›´æ–°åˆ°user_namesè¡¨ä¸­å»ã€‚</span><br><span class=\"line\">[root@localhost][Demo]&gt; UPDATE users SET name &#x3D; &#39;Misa&#39; WHERE id &#x3D; 1;</span><br><span class=\"line\">Query OK, 1 row affected (0.01 sec)</span><br><span class=\"line\">Rows matched: 1  Changed: 1  Warnings: 0</span><br><span class=\"line\"></span><br><span class=\"line\"># æœ€åæ¼”ç¤ºå¤šè¡¨æ›´æ–°</span><br><span class=\"line\">[root@localhost][Demo]&gt; UPDATE user_names AS un INNER JOIN users AS u ON un.uid &#x3D; u.id SET un.name &#x3D; u.name;</span><br><span class=\"line\">Query OK, 1 row affected (0.00 sec)</span><br><span class=\"line\">Rows matched: 6  Changed: 1  Warnings: 0</span><br><span class=\"line\"></span><br><span class=\"line\"># è¿™é‡Œå¯ä»¥çœ‹åˆ°uid ä¸º 1 çš„åå­—å·²ç»å‘ç”Ÿäº†å˜åŒ–ã€‚</span><br><span class=\"line\">[root@localhost][Demo]&gt; SELECT * FROM user_names;</span><br><span class=\"line\">+----+------+-----+</span><br><span class=\"line\">| id | name | uid |</span><br><span class=\"line\">+----+------+-----+</span><br><span class=\"line\">|  1 | Atom |   5 |</span><br><span class=\"line\">|  2 | CoCo |   8 |</span><br><span class=\"line\">|  3 | Jon  |   3 |</span><br><span class=\"line\">|  4 | Per  |   6 |</span><br><span class=\"line\">|  5 | Rose |   4 |</span><br><span class=\"line\">|  6 | Misa |   1 |</span><br><span class=\"line\">+----+------+-----+</span><br><span class=\"line\">6 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>\n\n<hr>\n<h4 id=\"åˆ é™¤è¡¨æ•°æ®ï¼ˆä¸€ï¼‰\"><a href=\"#åˆ é™¤è¡¨æ•°æ®ï¼ˆä¸€ï¼‰\" class=\"headerlink\" title=\"åˆ é™¤è¡¨æ•°æ®ï¼ˆä¸€ï¼‰\"></a>åˆ é™¤è¡¨æ•°æ®ï¼ˆä¸€ï¼‰</h4><p><code>DELETE FROM table_name [WHERE where_condition] </code></p>\n<ul>\n<li>å•æ¡åˆ é™¤ï¼Œå¦‚æœçœç•¥where_conditionå°†åˆ é™¤æ‰€æœ‰æ•°æ®ã€‚</li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\"># åˆ é™¤ä¸€æ¡idä¸º7çš„è®°å½•ã€‚</span><br><span class=\"line\">[root@localhost][Demo]&gt; DELETE FROM users WHERE id &#x3D; 7;</span><br><span class=\"line\">Query OK, 1 row affected (0.01 sec)</span><br><span class=\"line\"></span><br><span class=\"line\"># æ£€æŸ¥ç»“æœ</span><br><span class=\"line\">[root@localhost][Demo]&gt; SELECT * FROM users;</span><br><span class=\"line\">+----+------+----------------+-----+------+</span><br><span class=\"line\">| id | name | pwd            | age | sex  |</span><br><span class=\"line\">+----+------+----------------+-----+------+</span><br><span class=\"line\">|  1 | Misa | _23234awdasdwf |  23 | NULL |</span><br><span class=\"line\">|  3 | Jon  | _23234awdasdwf |  22 | NULL |</span><br><span class=\"line\">|  4 | Rose | _23234awdasdwf |  22 |    0 |</span><br><span class=\"line\">|  5 | Atom | pwd            |  21 |    0 |</span><br><span class=\"line\">|  6 | Per  | pwd            |  23 |    0 |</span><br><span class=\"line\">+----+------+----------------+-----+------+</span><br><span class=\"line\">5 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>\n\n<p>è¿™é‡Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå¦‚æœæ˜¯è‡ªå¢ç±»å‹ä¸»é”®ï¼Œå½“è¢«åˆ é™¤äº†æœ€å¤§çš„ä¸»é”®ä¹‹åã€‚å†æ¬¡æ’å…¥æ•°æ®å¹¶ä¸ä¼šåœ¨ç°åœ¨çš„æœ€å¤§ä¸»é”®ä¸Šè‡ªå¢ã€‚</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\"># åœ¨æ·»åŠ ä¸€æ¡æµ‹è¯•æ•°æ®æ¥éªŒè¯ä¸‹ä¸»é”®è‡ªå¢çš„è§„å¾‹ã€‚</span><br><span class=\"line\">[root@localhost][Demo]&gt; INSERT users VALUES(NULL,&#39;CoCo&#39;,&#39;agc&#39;,22,1);</span><br><span class=\"line\">Query OK, 1 row affected (0.05 sec)</span><br><span class=\"line\"># ç»“æœå‘ç°ç›´æ¥ä»6åˆ°8,è€Œ7æ˜¯åˆšæ‰è¢«åˆ é™¤çš„è®°å½•ã€‚</span><br><span class=\"line\">[root@localhost][Demo]&gt; SELECT * FROM users;</span><br><span class=\"line\">+----+------+----------------+-----+------+</span><br><span class=\"line\">| id | name | pwd            | age | sex  |</span><br><span class=\"line\">+----+------+----------------+-----+------+</span><br><span class=\"line\">|  1 | Misa | _23234awdasdwf |  23 | NULL |</span><br><span class=\"line\">|  3 | Jon  | _23234awdasdwf |  22 | NULL |</span><br><span class=\"line\">|  4 | Rose | _23234awdasdwf |  22 |    0 |</span><br><span class=\"line\">|  5 | Atom | pwd            |  21 |    0 |</span><br><span class=\"line\">|  6 | Per  | pwd            |  23 |    0 |</span><br><span class=\"line\">|  8 | CoCo | agc            |  22 |    1 |</span><br><span class=\"line\">+----+------+----------------+-----+------+</span><br><span class=\"line\">6 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>\n\n<hr>\n<h4 id=\"åˆ é™¤è¡¨æ•°æ®ï¼ˆäºŒï¼‰\"><a href=\"#åˆ é™¤è¡¨æ•°æ®ï¼ˆäºŒï¼‰\" class=\"headerlink\" title=\"åˆ é™¤è¡¨æ•°æ®ï¼ˆäºŒï¼‰\"></a>åˆ é™¤è¡¨æ•°æ®ï¼ˆäºŒï¼‰</h4><p><code>DELETE table_name[.*] [, table_name[.*]] ... FROM table_referneces [WHERE where_condition]</code></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\"># è¿™é‡Œä½¿ç”¨ä¸€å¼ è¡¨è¿›è¡Œåˆ é™¤ã€‚è¿™é‡Œå§é‡å¤å¯†ç çš„è´¦å·è¿›è¡Œåˆ é™¤ï¼Œä½†æ˜¯åªä¿ç•™idæœ€å°çš„é‚£ä¸€ä¸ªã€‚å®é™…ä¸Šè¿™ä¸ªæ“ä½œæ²¡å•¥ç”¨ã€‚</span><br><span class=\"line\">[root@localhost][Demo]&gt; DELETE t1 FROM users AS t1 LEFT JOIN (SELECT id , pwd  FROM users GROUP BY pwd HAVING count(pwd) &gt;&#x3D; 2 ) AS t2 ON t1.pwd  &#x3D; t2.pwd WHERE t1.id &gt; t2.id;</span><br><span class=\"line\">Query OK, 3 rows affected (0.02 sec)</span><br><span class=\"line\"></span><br><span class=\"line\"># åœ¨æ£€æŸ¥ä¸€ä¸‹ã€‚</span><br><span class=\"line\">[root@localhost][Demo]&gt; SELECT * FROM users;</span><br><span class=\"line\">+----+------+----------------+-----+------+</span><br><span class=\"line\">| id | name | pwd            | age | sex  |</span><br><span class=\"line\">+----+------+----------------+-----+------+</span><br><span class=\"line\">|  1 | Misa | _23234awdasdwf |  18 |    1 |</span><br><span class=\"line\">|  5 | Atom | pwd            |  16 |    0 |</span><br><span class=\"line\">|  8 | CoCo | agc            |  17 |    1 |</span><br><span class=\"line\">| 10 | Pet  | abc            |  22 |    1 |</span><br><span class=\"line\">+----+------+----------------+-----+------+</span><br></pre></td></tr></table></figure>\n\n<hr>\n<h4 id=\"æŸ¥è¯¢è¡¨æ•°æ®ï¼ˆä¸€ï¼‰\"><a href=\"#æŸ¥è¯¢è¡¨æ•°æ®ï¼ˆä¸€ï¼‰\" class=\"headerlink\" title=\"æŸ¥è¯¢è¡¨æ•°æ®ï¼ˆä¸€ï¼‰\"></a>æŸ¥è¯¢è¡¨æ•°æ®ï¼ˆä¸€ï¼‰</h4><blockquote>\n<p>åœ¨é€šå¸¸æƒ…å†µä¸‹ï¼Œå¤§éƒ¨åˆ†çš„SQLéƒ½æ˜¯æŸ¥è¯¢è¯­å¥ï¼Œæ‰€ä»¥æŸ¥è¯¢æœ€åè¯´æ˜ã€‚</p>\n</blockquote>\n<p><code>SELECT select_expr[ select_expre ...]</code></p>\n<p><code>[</code></p>\n<p>â€‹    <code>FROM table_reference</code></p>\n<p>â€‹    <code>[WHERE where_condition]</code></p>\n<p>â€‹    <code>[GROUP BY {columns_name | position}] [ASC | DESC] </code>    </p>\n<p>â€‹    <code>[HAVING where_condition]</code></p>\n<p>â€‹    <code>[ORDER BY {columns_name | expre | position}] [ASC | DESC]</code></p>\n<p>â€‹    <code>[LIMIT {[offset] row_count | row_count OFFSET}]</code></p>\n<p><code>]</code></p>\n<h5 id=\"æŸ¥è¯¢è¡¨è¾¾å¼-SELECT-EXPR\"><a href=\"#æŸ¥è¯¢è¡¨è¾¾å¼-SELECT-EXPR\" class=\"headerlink\" title=\"æŸ¥è¯¢è¡¨è¾¾å¼ SELECT_EXPR\"></a>æŸ¥è¯¢è¡¨è¾¾å¼ <code>SELECT_EXPR</code></h5><ol>\n<li>æ¯ä¸ªè¡¨è¾¾å¼æ ‡è¯†æƒ³è¦çš„ä¸€åˆ—ï¼Œå¿…é¡»è‡³å°‘æœ‰ä¸€åˆ—ï¼›å¤šåˆ—ä¹‹é—´ä½¿ç”¨é€—å·åˆ†å‰²ã€‚* å·è¡¨ç¤ºå…¨éƒ¨ï¼Œtable_name.* è¡¨ç¤ºè¯¥å‘½åè¡¨çš„æ‰€æœ‰åˆ—ã€‚</li>\n<li>æŸ¥è¯¢è¡¨è¾¾å¼å¯ä»¥ä½¿ç”¨[AS] alisa_name èµ‹äºˆåˆ«åã€‚åŒæ—¶åˆ«åå¯ç”¨ä¸GROUP BY ,ORDER BY æˆ–è€…HAVINGå­å¥ã€‚å­—æ®µé¡ºåºã€å­—æ®µçš„åˆ«åä¼šå½±å“ç»“æœé›†ã€‚</li>\n</ol>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\"># ä¾ç„¶ä½¿ç”¨usersæ¥åšæµ‹è¯•æ•°æ®ã€‚</span><br><span class=\"line\"># åªæŸ¥è¯¢usersè¡¨ä¸­id å’Œ name;å¹¶ä¸”ä½¿ç”¨ä½¿ç”¨alisa_nameã€‚</span><br><span class=\"line\">[root@localhost][Demo]&gt; SELECT u.id AS uid , u.name AS uname FROM users AS u;</span><br><span class=\"line\">+-----+-------+</span><br><span class=\"line\">| uid | uname |</span><br><span class=\"line\">+-----+-------+</span><br><span class=\"line\">|   5 | Atom  |</span><br><span class=\"line\">|   8 | CoCo  |</span><br><span class=\"line\">|   3 | Jon   |</span><br><span class=\"line\">|   6 | Per   |</span><br><span class=\"line\">|   4 | Rose  |</span><br><span class=\"line\">|   1 | Tom   |</span><br><span class=\"line\">+-----+-------+</span><br><span class=\"line\">6 rows in set (0.00 sec)</span><br><span class=\"line\"></span><br><span class=\"line\"># ä½¿ç”¨é™·é˜±,å¦‚æœä½¿ç”¨alisa_name è€Œæ²¡æœ‰ä½¿ç”¨AS å…³é”®å°±ä¼šå¯¼è‡´ä¸‹é¢çš„é—®é¢˜ã€‚å¯èƒ½æ˜¯å°‘å†™äº†ä¸€ä¸ªé€—å·ï¼Œè€Œç»“æœç¡®å®ä¸€ä¸ªç»“æœé›†ã€‚</span><br><span class=\"line\">[root@localhost][Demo]&gt; SELECT id name FROM users;</span><br><span class=\"line\">+------+</span><br><span class=\"line\">| name |</span><br><span class=\"line\">+------+</span><br><span class=\"line\">|    5 |</span><br><span class=\"line\">|    8 |</span><br><span class=\"line\">|    3 |</span><br><span class=\"line\">|    6 |</span><br><span class=\"line\">|    4 |</span><br><span class=\"line\">|    1 |</span><br><span class=\"line\">+------+</span><br><span class=\"line\">6 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"æ¡ä»¶è¡¨è¾¾å¼-GROUP-BY\"><a href=\"#æ¡ä»¶è¡¨è¾¾å¼-GROUP-BY\" class=\"headerlink\" title=\"æ¡ä»¶è¡¨è¾¾å¼ GROUP BY\"></a>æ¡ä»¶è¡¨è¾¾å¼ <code>GROUP BY</code></h5><p><code>GROUP BY {columns_name | position} [ASC | DESC],...</code></p>\n<ul>\n<li>å¦‚æœæ²¡æœ‰æŒ‡å®šWHEREå­å¥ï¼Œåˆ™æ˜¾ç¤ºå…¨éƒ¨æ•°æ®ã€‚åœ¨WHEREè¡¨è¾¾å¼ä¸­ï¼Œå¯ä»¥ä½¿ç”¨MYSQLå†…ç½®å‡½æ•°æˆ–è€…æ˜¯è¿ç®—ç¬¦ã€‚</li>\n<li>ASC æ˜¯å‡åºã€DESCæ˜¯é™åºï¼Œè‹¥å­˜åœ¨å¤šä¸ªåˆ†ç»„æ¡ä»¶é‚£å°±ç”¨é€—å·åˆ†å‰²ã€‚</li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\"># ä¾ç„¶ä½¿ç”¨usersè¡¨ä¸­çš„æµ‹è¯•æ•°æ®ï¼Œä½†æ˜¯è¦å°†sex ä¸ºNULLçš„æ•°æ®è¿›è¡Œä¿®æ”¹ã€‚</span><br><span class=\"line\">[root@localhost][Demo]&gt; UPDATE users SET sex &#x3D; 1 WHERE sex IS NULL;</span><br><span class=\"line\">Query OK, 2 rows affected (0.01 sec)</span><br><span class=\"line\">Rows matched: 2  Changed: 2  Warnings: 0</span><br><span class=\"line\"></span><br><span class=\"line\">[root@localhost][Demo]&gt; SELECT * FROM users;</span><br><span class=\"line\">+----+------+----------------+-----+------+</span><br><span class=\"line\">| id | name | pwd            | age | sex  |</span><br><span class=\"line\">+----+------+----------------+-----+------+</span><br><span class=\"line\">|  1 | Tom  | _23234awdasdwf |  23 |    1 |</span><br><span class=\"line\">|  3 | Jon  | _23234awdasdwf |  22 |    1 |</span><br><span class=\"line\">|  4 | Rose | _23234awdasdwf |  22 |    0 |</span><br><span class=\"line\">|  5 | Atom | pwd            |  21 |    0 |</span><br><span class=\"line\">|  6 | Per  | pwd            |  23 |    0 |</span><br><span class=\"line\">|  8 | CoCo | agc            |  22 |    1 |</span><br><span class=\"line\">+----+------+----------------+-----+------+</span><br><span class=\"line\">6 rows in set (0.00 sec)</span><br><span class=\"line\"></span><br><span class=\"line\"># ä½¿ç”¨GROUP BY æ¥åšåˆ†ç»„ã€‚è¿™é‡Œåˆ†ç»„çš„ç»“æœå°±æ˜¯0å’Œ1ã€‚</span><br><span class=\"line\">[root@localhost][Demo]&gt; SELECT sex FROM users GROUP BY sex;</span><br><span class=\"line\">+------+</span><br><span class=\"line\">| sex  |</span><br><span class=\"line\">+------+</span><br><span class=\"line\">|    0 |</span><br><span class=\"line\">|    1 |</span><br><span class=\"line\">+------+</span><br><span class=\"line\">2 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"åˆ†ç»„æ¡ä»¶-HAVING\"><a href=\"#åˆ†ç»„æ¡ä»¶-HAVING\" class=\"headerlink\" title=\"åˆ†ç»„æ¡ä»¶ HAVING \"></a>åˆ†ç»„æ¡ä»¶ <code>HAVING </code></h5><p><code>[HAVING where_condition]</code></p>\n<ul>\n<li>ä½¿ç”¨HAVINGåªå¯¹ä¸€éƒ¨åˆ†æ•°æ®æ¥åˆ†ç»„ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå¦‚æœä½¿ç”¨HAVINGè¯­å¥ï¼Œé‚£ä¹ˆåœ¨æŸ¥è¯¢ç»“æœä¸­å°±å­˜åœ¨å¯¹åº”çš„å­—æ®µã€‚å¹¶åˆ‡ä¸å‡½æ•°è¿›è¡Œé…åˆã€‚</li>\n</ul>\n<p>è¿™é‡Œéœ€æ”¹ä¿®æ”¹ä¸€å¤„é…ç½®ä¿¡æ¯ï¼Œç”±äºæœ¬äººä½¿ç”¨çš„æ˜¯MYSQL5.7ç‰ˆæœ¬ï¼Œæ‰€ä»¥GROUP BYå’Œä»¥å¾€ä¸ä¸€æ ·ã€‚</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\"># æ£€æŸ¥å½“å‰sql_mode;</span><br><span class=\"line\">select @@sql_mode;</span><br></pre></td></tr></table></figure>\n\n<p>5.7ä¸­é»˜è®¤è®¾ç½®äº†<code>sql_mode=only_full_group_by</code></p>\n<p>ä¿®æ”¹ä¸‹my.cofã€‚åœ¨<code>[mysqld]</code>ä¸‹é¢æ·»åŠ </p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">sql_mode&#x3D;STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION</span><br></pre></td></tr></table></figure>\n\n<p>å°±æ˜¯ä¸è¦only_full_group_byè¿™ä¸ªã€‚</p>\n<p>ç®€å•è§£é‡Šä¸‹only_full_group_byæ˜¯å¹²å˜›çš„ã€‚</p>\n<p><code>ä½¿ç”¨è¿™ä¸ªå°±æ˜¯ä½¿ç”¨å’Œoracleä¸€æ ·çš„group è§„åˆ™, selectçš„åˆ—éƒ½è¦åœ¨groupä¸­,æˆ–è€…æœ¬èº«æ˜¯èšåˆåˆ—(SUM,AVG,MAX,MIN) æ‰è¡Œ</code></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\"># å›åˆ° HAVINGåˆ†ç»„æ¡ä»¶ä¸Šã€‚</span><br><span class=\"line\">[root@localhost][Demo]&gt; SELECT sex , age FROM users GROUP BY sex HAVING age &gt; 21;</span><br><span class=\"line\">+------+-----+</span><br><span class=\"line\">| sex  | age |</span><br><span class=\"line\">+------+-----+</span><br><span class=\"line\">|    0 |  22 |</span><br><span class=\"line\">|    1 |  23 |</span><br><span class=\"line\">+------+-----+</span><br><span class=\"line\">2 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"ç»“æœæ’åº-ORDER-BY\"><a href=\"#ç»“æœæ’åº-ORDER-BY\" class=\"headerlink\" title=\"ç»“æœæ’åº ORDER BY\"></a>ç»“æœæ’åº <code>ORDER BY</code></h5><p><code>ORDER BY {columns_name | expr | position} [ASC | DESC],...</code></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\"># ä½¿ç”¨ORDER BY æ¥åšæ’åº DESC ï¼Œç”±äºé»˜è®¤æ˜¯ASCå‡åºï¼›æ‰€ä»¥è¿™é‡Œç”¨DESCé™åºæ¥æ¼”ç¤ºã€‚</span><br><span class=\"line\">[root@localhost][Demo]&gt; SELECT * FROM users ORDER BY id DESC;</span><br><span class=\"line\">+----+------+----------------+-----+------+</span><br><span class=\"line\">| id | name | pwd            | age | sex  |</span><br><span class=\"line\">+----+------+----------------+-----+------+</span><br><span class=\"line\">|  8 | CoCo | agc            |  22 |    1 |</span><br><span class=\"line\">|  6 | Per  | pwd            |  23 |    0 |</span><br><span class=\"line\">|  5 | Atom | pwd            |  21 |    0 |</span><br><span class=\"line\">|  4 | Rose | _23234awdasdwf |  22 |    0 |</span><br><span class=\"line\">|  3 | Jon  | _23234awdasdwf |  22 |    1 |</span><br><span class=\"line\">|  1 | Tom  | _23234awdasdwf |  23 |    1 |</span><br><span class=\"line\">+----+------+----------------+-----+------+</span><br><span class=\"line\">6 rows in set (0.00 sec)</span><br><span class=\"line\"></span><br><span class=\"line\"># å¯¹å¤šä¸ªå­—æ®µè¿›è¡Œæ’åºã€‚è¿™é‡Œå¯ä»¥çœ‹åˆ°è™½ç„¶CoCo å’Œ Roes éƒ½æ˜¯22age ä½†æ˜¯idé‡‡ç”¨äº†é™åºã€‚æ‰€ä»¥CoCoæ’åœ¨å‰é¢ã€‚</span><br><span class=\"line\">[root@localhost][Demo]&gt; SELECT * FROM users ORDER BY age , id DESC;</span><br><span class=\"line\">+----+------+----------------+-----+------+</span><br><span class=\"line\">| id | name | pwd            | age | sex  |</span><br><span class=\"line\">+----+------+----------------+-----+------+</span><br><span class=\"line\">|  5 | Atom | pwd            |  21 |    0 |</span><br><span class=\"line\">|  8 | CoCo | agc            |  22 |    1 |</span><br><span class=\"line\">|  4 | Rose | _23234awdasdwf |  22 |    0 |</span><br><span class=\"line\">|  3 | Jon  | _23234awdasdwf |  22 |    1 |</span><br><span class=\"line\">|  6 | Per  | pwd            |  23 |    0 |</span><br><span class=\"line\">|  1 | Tom  | _23234awdasdwf |  23 |    1 |</span><br><span class=\"line\">+----+------+----------------+-----+------+</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"é™åˆ¶æŸ¥è¯¢-LIMIT\"><a href=\"#é™åˆ¶æŸ¥è¯¢-LIMIT\" class=\"headerlink\" title=\"é™åˆ¶æŸ¥è¯¢ LIMIT \"></a>é™åˆ¶æŸ¥è¯¢ <code>LIMIT </code></h5><p><code>LIMIT {offset,} row_count | row_count OFFSET offset</code></p>\n<ul>\n<li>é™åˆ¶æŸ¥è¯¢ç»“æœçš„è¿”å›é›†åˆã€‚</li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\"># è¿™ä¼šè¿”å›ç¬¬ä¸€å’Œç¬¬äºŒæ¡æ•°æ®ã€‚è¿™ä¸ªLIMITå’ŒIDçš„æ’åºæ²¡æœ‰ä¸€ç‚¹å…³ç³»çš„ã€‚</span><br><span class=\"line\">[root@localhost][Demo]&gt; SELECT * FROM users LIMIT 2;</span><br><span class=\"line\">+----+------+----------------+-----+------+</span><br><span class=\"line\">| id | name | pwd            | age | sex  |</span><br><span class=\"line\">+----+------+----------------+-----+------+</span><br><span class=\"line\">|  1 | Tom  | _23234awdasdwf |  23 |    1 |</span><br><span class=\"line\">|  3 | Jon  | _23234awdasdwf |  22 |    1 |</span><br><span class=\"line\">+----+------+----------------+-----+------+</span><br><span class=\"line\"></span><br><span class=\"line\"># éœ€è¦æ³¨æ„çš„æ˜¯LIMITé™åˆ¶æŸ¥è¯¢å’Œå…¶ä»–æ¡ä»¶æ˜¯æ²¡æœ‰å…³ç³»çš„ï¼Œå®ƒä»…ä»…æ˜¯åœ¨ç»“æœé›†ä¸­è¿‡æ»¤ã€‚</span><br><span class=\"line\">[root@localhost][Demo]&gt; SELECT * FROM users ORDER BY age DESC LIMIT 2;</span><br><span class=\"line\">+----+------+----------------+-----+------+</span><br><span class=\"line\">| id | name | pwd            | age | sex  |</span><br><span class=\"line\">+----+------+----------------+-----+------+</span><br><span class=\"line\">|  1 | Tom  | _23234awdasdwf |  23 |    1 |</span><br><span class=\"line\">|  6 | Per  | pwd            |  23 |    0 |</span><br><span class=\"line\">+----+------+----------------+-----+------+</span><br><span class=\"line\">2 rows in set (0.00 sec)</span><br><span class=\"line\"></span><br><span class=\"line\"># è¿˜æœ‰ä¸€ç§æƒ…å†µå°±æ˜¯èŒƒå›´ã€‚å…ˆçœ‹çœ‹å…¨éƒ¨æ•°æ®ã€‚</span><br><span class=\"line\">[root@localhost][Demo]&gt; SELECT * FROM users ORDER BY age DESC;</span><br><span class=\"line\">+----+------+----------------+-----+------+</span><br><span class=\"line\">| id | name | pwd            | age | sex  |</span><br><span class=\"line\">+----+------+----------------+-----+------+</span><br><span class=\"line\">|  1 | Tom  | _23234awdasdwf |  23 |    1 |</span><br><span class=\"line\">|  6 | Per  | pwd            |  23 |    0 |</span><br><span class=\"line\">|  3 | Jon  | _23234awdasdwf |  22 |    1 |</span><br><span class=\"line\">|  4 | Rose | _23234awdasdwf |  22 |    0 |</span><br><span class=\"line\">|  8 | CoCo | agc            |  22 |    1 |</span><br><span class=\"line\">|  5 | Atom | pwd            |  21 |    0 |</span><br><span class=\"line\">+----+------+----------------+-----+------+</span><br><span class=\"line\">6 rows in set (0.00 sec)</span><br><span class=\"line\"></span><br><span class=\"line\"># æˆ‘ä»¬å°è¯•è·å–ç»“æœé›†ä¸­ç¬¬ä¸‰æ¡å’Œç¬¬å››æ¡ã€‚è¿™é‡Œéœ€è¦æ³¨æ„çš„æ—¶å€™ç»“æœé›†çš„ä¸‹æ ‡æ˜¯ä»0å¼€å§‹çš„ã€‚</span><br><span class=\"line\">[root@localhost][Demo]&gt; SELECT * FROM users ORDER BY age DESC LIMIT 2 , 2;</span><br><span class=\"line\">+----+------+----------------+-----+------+</span><br><span class=\"line\">| id | name | pwd            | age | sex  |</span><br><span class=\"line\">+----+------+----------------+-----+------+</span><br><span class=\"line\">|  3 | Jon  | _23234awdasdwf |  22 |    1 |</span><br><span class=\"line\">|  4 | Rose | _23234awdasdwf |  22 |    0 |</span><br><span class=\"line\">+----+------+----------------+-----+------+</span><br><span class=\"line\">2 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"æ•°æ®åº“è¡¨æ“ä½œå°ç»“\"><a href=\"#æ•°æ®åº“è¡¨æ“ä½œå°ç»“\" class=\"headerlink\" title=\"æ•°æ®åº“è¡¨æ“ä½œå°ç»“\"></a>æ•°æ®åº“è¡¨æ“ä½œå°ç»“</h4><ul>\n<li><p>æ’å…¥</p>\n<ul>\n<li><code>INSERT [INTO] table_name [(columns_name , ... )] VALUES(value , ...)</code></li>\n<li><code>INSERT [INTO] table_name SET columns_name ={ expr | DEFAULT},...</code></li>\n<li><code>INSERT [INTO] tablle_name [(columns_name,...)] SELECT ...</code></li>\n</ul>\n</li>\n<li><p>æ›´æ–°</p>\n<ul>\n<li><code>UPDATE [LOW_PRIORITY] [IGNORE] tabel_refernce SET columns_name1 = { expre1 | DEFAULT} , columns_name2 = { expre2 | DEFAULT}] ... [WHERE where_condition]</code></li>\n</ul>\n</li>\n<li><p>åˆ é™¤</p>\n<ul>\n<li><code>DELETE FROM table_name [WHERE where_condition]</code></li>\n</ul>\n</li>\n<li><p>æŸ¥è¯¢</p>\n<ul>\n<li><p><code>SELECT select_expr[ select_expre ...]</code></p>\n<p><code>[</code></p>\n<p>â€‹    <code>FROM table_reference</code></p>\n<p>â€‹    <code>[WHERE where_condition]</code></p>\n<p>â€‹    <code>[GROUP BY {columns_name | position}] [ASC | DESC] </code>    </p>\n<p>â€‹    <code>[HAVING where_condition]</code></p>\n<p>â€‹    <code>[ORDER BY {columns_name | expre | position}] [ASC | DESC]</code></p>\n<p>â€‹    <code>[LIMIT {[offset] row_count | row_count OFFSET}]</code></p>\n<p><code>]</code></p>\n</li>\n</ul>\n</li>\n</ul>\n<hr>\n<h4 id=\"çº¦æŸ\"><a href=\"#çº¦æŸ\" class=\"headerlink\" title=\"çº¦æŸ\"></a>çº¦æŸ</h4><blockquote>\n<p>å®é™…ä¸Šåˆ†ä¸ºä¸¤ç§ï¼Œè¡¨çº¦æŸå’Œåˆ—çº¦æŸã€‚åˆ—å±æ€§çš„çº¦æŸä¸Šé¢å·²ç»è®²è¿°äº†ï¼Œç°åœ¨æ¥è®²è¿°ä¸‹è¡¨çº¦æŸã€‚</p>\n</blockquote>\n<h5 id=\"åˆ—çº¦æŸ\"><a href=\"#åˆ—çº¦æŸ\" class=\"headerlink\" title=\"åˆ—çº¦æŸ\"></a>åˆ—çº¦æŸ</h5><ul>\n<li>åœ¨ä¹‹å‰çš„<code>æ’å…¥è¡¨æ•°æ®ï¼ˆä¸€ï¼‰</code>ä¸­å·²ç»æ¼”ç¤ºäº†5ç§å¸¸ç”¨çš„çº¦æŸï¼Œä¸‹é¢ä¸»è¦ä»‹ç»è¡¨ä¹‹å‰çš„çº¦æŸã€‚</li>\n</ul>\n<h5 id=\"å¤–é”®çº¦æŸ\"><a href=\"#å¤–é”®çº¦æŸ\" class=\"headerlink\" title=\"å¤–é”®çº¦æŸ\"></a>å¤–é”®çº¦æŸ</h5><ol>\n<li>çˆ¶è¡¨å’Œå­è¡¨å¿…é¡»ä½¿ç”¨ç›¸åŒçš„å­˜å‚¨å¼•æ“ï¼Œè€Œä¸”ç¦æ­¢ä½¿ç”¨ä¸´æ—¶è¡¨ã€‚</li>\n<li>æ•°æ®è¡¨çš„å­˜å‚¨å¼•æ“åªèƒ½æ˜¯InnoDBã€‚</li>\n<li>å¤–é”®åˆ—å’Œå‚ç…§åˆ—å¿…é¡»å…·æœ‰ç›¸åŒçš„æ•°æ®ç±»å‹ï¼Œå…¶ä¸­æ•°å­—çš„é•¿åº¦æˆ–æ˜¯å¦æœ‰ç¬¦å·<code>UNSIGNED</code>å¿…é¡»ä¸€è‡´ï¼›è€Œå­—ç¬¦çš„é•¿åº¦å¯ä»¥ä¸åŒã€‚</li>\n<li>å¤–é”®åˆ—å’Œå‚ç…§åˆ—å¿…é¡»åˆ›å»ºç´¢å¼•ï¼Œå¦‚æœæ²¡æœ‰åˆ›å»ºMysqlä¹Ÿä¼šè‡ªåŠ¨åˆ›å»ºã€‚</li>\n</ol>\n<p><code>ç”±äºæœ¬äººå¼€å‘ä¸­ï¼Œä½¿ç”¨å¤–é”®çš„åœºæ™¯æ¯”è¾ƒå°‘ï¼Œæ‰€ä»¥è¿™é‡Œæœ€ååœ¨è¡¥å……ã€‚</code></p>\n<h5 id=\"æ•°æ®åº“å­˜å‚¨å¼•æ“\"><a href=\"#æ•°æ®åº“å­˜å‚¨å¼•æ“\" class=\"headerlink\" title=\"æ•°æ®åº“å­˜å‚¨å¼•æ“\"></a>æ•°æ®åº“å­˜å‚¨å¼•æ“</h5><p>æ•°æ®åº“é»˜è®¤çš„çš„å­˜å‚¨å¼•æ“å¯ä»¥åœ¨<code>my.cof</code>ä¸­è®¾ç½®ã€‚</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">default-storage-engine=INNODB</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><p>Mysqlå¯ä»¥å°†æ•°æ®ä»¥ä¸åŒçš„æŠ€æœ¯å­˜å‚¨åœ¨æ–‡ä»¶ï¼ˆå†…å­˜ï¼‰ä¸­ï¼Œè¿™ç§æŠ€æœ¯å°±æˆä¸ºå­˜å‚¨å¼•æ“ã€‚</p>\n</li>\n<li><p>æ¯ä¸€ç§å­˜å‚¨å¼•æ“ä½¿ç”¨ä¸åŒçš„å­˜å‚¨æœºåˆ¶ã€ç´¢å¼•æŠ€å·§ã€é”å®šæ°´å¹³ï¼Œæœ€ç»ˆæä¾›å¹¿æ³›ä¸”ä¸åŒçš„åŠŸèƒ½ã€‚</p>\n</li>\n<li><p>å¼•æ“ç±»å‹</p>\n<ul>\n<li>MyISAM</li>\n<li>InnoDB</li>\n<li>Memory</li>\n<li>CSV</li>\n<li>Archive</li>\n</ul>\n</li>\n<li><p>è€Œç¡®å®šä½¿ç”¨é‚£ç§å¼•æ“å–å†³ä¸å¼•ç”¨åœºæ™¯ã€‚</p>\n<ul>\n<li>å¹¶å‘æ§åˆ¶ï¼š<code>å½“å¤šä¸ªè¿æ¥å¯¹è®°å½•ç»è¡Œä¿®æ”¹æ—¶å€™ï¼Œä¿è¯æ•°æ®çš„ä¸€è‡´æ€§å’Œå®Œæ•´æ€§</code></li>\n<li>é”ï¼šå…±äº«é”ï¼ˆè¯»é”ï¼‰ã€æ’å®ƒé”ï¼ˆå†™é”ï¼‰ã€‚<ul>\n<li><code>è¯»é”</code>åŒä¸€ä¸ªæ—¶é—´å†…ï¼Œå¤šä¸ªç”¨æˆ·å¯ä»¥è¯»å–åŒä¸€ä¸ªèµ„æºï¼Œè¯»å–è¿‡ç¨‹ä¸­æ•°æ®ä¸ä¼šå‘ç”Ÿä»»ä½•å˜åŒ–ã€‚</li>\n<li><code>å†™é”</code>åœ¨ä»»ä½•æ—¶å€™åªèƒ½æœ‰ä¸€ä¸ªç”¨æˆ·èƒ½å†™å…¥èµ„æºï¼Œå½“å…¶ä»–å†™é”æ—¶ä¼šé˜»å¡å…¶ä»–è¯»é”æˆ–åˆ™å†™é”æ“ä½œã€‚</li>\n<li>é”é¢—ç²’<ul>\n<li>è¡¨é”ï¼ˆå¼€é”€å¾ˆå°çš„é”ç­–ç•¥ï¼‰ã€è¡Œé”ï¼ˆå¼€é”€å¾ˆå¤§çš„é”ç­–ç•¥ï¼‰ã€‚</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>äº‹åŠ¡ï¼ˆACIDï¼‰ï¼š<code>ä¿è¯æ•°æ®åº“çš„å®Œæ•´æ€§</code><ul>\n<li>åŸå­æ€§</li>\n<li>ä¸€è‡´æ€§</li>\n<li>éš”ç¦»æ€§</li>\n<li>æŒä¹…æ€§</li>\n</ul>\n</li>\n<li>ç´¢å¼•</li>\n</ul>\n</li>\n</ul>\n<table>\n<thead>\n<tr>\n<th>ç‰¹ç‚¹</th>\n<th>MyISAM</th>\n<th>InnoDB</th>\n<th>Memory</th>\n<th>Archive</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>å­˜å‚¨é™åˆ¶</td>\n<td>256TB</td>\n<td>64TB</td>\n<td>æœ‰</td>\n<td>æ— </td>\n</tr>\n<tr>\n<td>äº‹åŠ¡å®‰å…¨</td>\n<td>-</td>\n<td>æ”¯æŒ</td>\n<td>-</td>\n<td>-</td>\n</tr>\n<tr>\n<td>æ”¯æŒç´¢å¼•</td>\n<td>æ”¯æŒ</td>\n<td>æ”¯æŒ</td>\n<td>æ”¯æŒ</td>\n<td>-</td>\n</tr>\n<tr>\n<td>é”é¢—ç²’</td>\n<td>è¡¨é”</td>\n<td>è¡Œé”</td>\n<td>è¡¨é”</td>\n<td>è¡Œé”</td>\n</tr>\n<tr>\n<td>æ•°æ®å‹ç¼©</td>\n<td>æ”¯æŒ</td>\n<td>-</td>\n<td>-</td>\n<td>æ”¯æŒ</td>\n</tr>\n<tr>\n<td>æ”¯æŒå¤–é”®</td>\n<td>-</td>\n<td>æ”¯æŒ</td>\n<td>-</td>\n<td>-</td>\n</tr>\n</tbody></table>\n<p>çœ‹åˆ°è¿™å¼ è¡¨å¾ˆæ¸…æ¥šäº†ï¼Œè¿™å°±æ˜¯ä¸ºä»€ä¹ˆInnoDBç”¨çš„å¾ˆå¹¿æ³›çš„åŸå› ã€‚</p>\n<h2 id=\"Mysqlæ•°æ®ç±»å‹\"><a href=\"#Mysqlæ•°æ®ç±»å‹\" class=\"headerlink\" title=\"Mysqlæ•°æ®ç±»å‹\"></a>Mysqlæ•°æ®ç±»å‹</h2><blockquote>\n<p>æ•°æ®ç±»å‹æ˜¯æŒ‡åˆ—ã€å­˜å‚¨è¿‡ç¨‹å‚æ•°ã€è¡¨è¾¾å¼å’Œå±€éƒ¨å˜é‡çš„æ•°æ®ç‰¹å¾ï¼Œå®ƒä»¬å†³å®šäº†æ•°æ®å­˜å‚¨çš„æ ¼å¼ï¼Œä»£è¡¨äº†ä¸åŒçš„æ•°æ®ä¿¡æ¯ç±»å‹ã€‚æˆ‘ä»¬çš„è®¡ç®—éƒ½æ˜¯äºŒè¿›åˆ¶æ¥å­˜å‚¨æ•°æ®çš„ï¼Œå½“ç„¶è¿™è¿˜ç‰µæ‰¯åˆ°ä¸€ä¸ªé—®é¢˜å°±æ˜¯æ­£æ•°å’Œè´Ÿæ•°ã€‚</p>\n</blockquote>\n<h3 id=\"æ•°æ®ç±»å‹æ€ç»´å¯¼å›¾\"><a href=\"#æ•°æ®ç±»å‹æ€ç»´å¯¼å›¾\" class=\"headerlink\" title=\"æ•°æ®ç±»å‹æ€ç»´å¯¼å›¾\"></a>æ•°æ®ç±»å‹æ€ç»´å¯¼å›¾</h3><p><img src=\"http://on-img.com/chart_image/5ae4f0d5e4b090f6eebc1b16.png?_=1524954928511\"></p>\n<h3 id=\"æ•°æ®ç±»å‹å­˜å‚¨èŒƒå›´è¯´æ˜\"><a href=\"#æ•°æ®ç±»å‹å­˜å‚¨èŒƒå›´è¯´æ˜\" class=\"headerlink\" title=\"æ•°æ®ç±»å‹å­˜å‚¨èŒƒå›´è¯´æ˜\"></a>æ•°æ®ç±»å‹å­˜å‚¨èŒƒå›´è¯´æ˜</h3><blockquote>\n<p>æ‰€è°“çš„æ— ç¬¦å·å°±æ˜¯unsignedï¼Œè¿™æ ·ä¼šä½¿å¤§å°ç¿»å€ã€‚</p>\n</blockquote>\n<h4 id=\"æ•´å‹\"><a href=\"#æ•´å‹\" class=\"headerlink\" title=\"æ•´å‹\"></a>æ•´å‹</h4><ul>\n<li>TINYINT <code>è¿·ä½ æ•´æ•°å‹</code><ul>\n<li>å­—èŠ‚ï¼š<code>1</code></li>\n</ul>\n</li>\n<li>SMALLINT <code>å°æ•´å‹</code><ul>\n<li>å­—èŠ‚ï¼š<code>2</code></li>\n</ul>\n</li>\n<li>MEDIUMINT <code>ä¸­æ•´å‹</code><ul>\n<li>å­—èŠ‚ï¼š<code>3</code> </li>\n</ul>\n</li>\n<li>INT <code>æ ‡å‡†æ•´å‹</code><ul>\n<li>å­—èŠ‚ï¼š<code>4</code></li>\n</ul>\n</li>\n<li>BIGINT <code>å¤§æ•´å‹</code><ul>\n<li>å­—èŠ‚ï¼š<code>8</code></li>\n</ul>\n</li>\n</ul>\n<p>ç”¨Javaä»£ç æµ‹è¯•ä¸‹ã€‚</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String[] args)</span> </span>&#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">\"é‡‡ç”¨ç§»ä½è¿ç®—æ‰€ä»¥æ¬¡æ–¹æ‰€ä»¥ç›¸æ¯”æ¬¡æ–¹çš„æ•°å€¼ä¼šå‡ä¸€\"</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">        System.out.println(<span class=\"string\">\"TINTITN æœ‰ç¬¦å· \"</span>+ (-<span class=\"number\">2L</span> &lt;&lt; <span class=\"number\">6</span>) + <span class=\"string\">\" åˆ° \"</span> +((<span class=\"number\">2L</span> &lt;&lt; <span class=\"number\">6</span>) - <span class=\"number\">1</span>));</span><br><span class=\"line\">        System.out.println(<span class=\"string\">\"TINTITN æ— ç¬¦å· 0 åˆ° \"</span>+(Math.pow(<span class=\"number\">2L</span>,<span class=\"number\">8</span>) - <span class=\"number\">1</span>));</span><br><span class=\"line\"></span><br><span class=\"line\">        System.out.println(<span class=\"string\">\"SMALLINT æœ‰ç¬¦å· \"</span>+ (-<span class=\"number\">2L</span> &lt;&lt; <span class=\"number\">14</span>) + <span class=\"string\">\" åˆ° \"</span> +((<span class=\"number\">2L</span> &lt;&lt; <span class=\"number\">14</span>) - <span class=\"number\">1</span>));</span><br><span class=\"line\">        System.out.println(<span class=\"string\">\"SMALLINT æ— ç¬¦å· 0 åˆ° \"</span>+((<span class=\"number\">2L</span> &lt;&lt; <span class=\"number\">14</span>) - <span class=\"number\">1</span>));</span><br><span class=\"line\"></span><br><span class=\"line\">        System.out.println(<span class=\"string\">\"MEDIUMINT æœ‰ç¬¦å· \"</span>+ (-<span class=\"number\">2L</span> &lt;&lt; <span class=\"number\">22</span>) + <span class=\"string\">\" åˆ° \"</span> +((<span class=\"number\">2L</span> &lt;&lt; <span class=\"number\">22</span>) - <span class=\"number\">1</span>));</span><br><span class=\"line\">        System.out.println(<span class=\"string\">\"MEDIUMINT æ— ç¬¦å· 0 åˆ° \"</span>+((<span class=\"number\">2L</span> &lt;&lt; <span class=\"number\">23</span>) - <span class=\"number\">1</span>));</span><br><span class=\"line\"></span><br><span class=\"line\">        System.out.println(<span class=\"string\">\"INT æœ‰ç¬¦å· \"</span>+ (-<span class=\"number\">2L</span> &lt;&lt; <span class=\"number\">30</span>) + <span class=\"string\">\" åˆ° \"</span> +((<span class=\"number\">2L</span> &lt;&lt; <span class=\"number\">30</span>) - <span class=\"number\">1</span>));</span><br><span class=\"line\">        System.out.println(<span class=\"string\">\"INT æ— ç¬¦å· 0 åˆ° \"</span>+((<span class=\"number\">2L</span> &lt;&lt; <span class=\"number\">31</span>) - <span class=\"number\">1</span>));</span><br><span class=\"line\"></span><br><span class=\"line\">        System.out.println(<span class=\"string\">\"BIGINT æœ‰ç¬¦å· \"</span>+ (-<span class=\"number\">2L</span> &lt;&lt; <span class=\"number\">62</span>) + <span class=\"string\">\" åˆ° \"</span> +((<span class=\"number\">2L</span> &lt;&lt; <span class=\"number\">62</span>) - <span class=\"number\">1</span>));</span><br><span class=\"line\">        System.out.println(<span class=\"string\">\"BIGINT æ— ç¬¦å· 0 åˆ° \"</span>+ ((<span class=\"number\">2L</span> &lt;&lt; <span class=\"number\">63</span>) - <span class=\"number\">1</span>));</span><br><span class=\"line\">    &#125;</span><br></pre></td></tr></table></figure>\n\n<p>è¾“å‡º</p>\n<figure class=\"highlight\"><table><tr><td class=\"code\"><pre><span class=\"line\">é‡‡ç”¨ç§»ä½è¿ç®—æ‰€ä»¥æ¬¡æ–¹æ‰€ä»¥ç›¸æ¯”æ¬¡æ–¹çš„æ•°å€¼ä¼šå‡ä¸€</span><br><span class=\"line\">TINTITN æœ‰ç¬¦å· -<span class=\"number\">128</span> åˆ° <span class=\"number\">127</span></span><br><span class=\"line\">TINTITN æ— ç¬¦å· <span class=\"number\">0</span> åˆ° <span class=\"number\">255.0</span></span><br><span class=\"line\">SMALLINT æœ‰ç¬¦å· -<span class=\"number\">32768</span> åˆ° <span class=\"number\">32767</span></span><br><span class=\"line\">SMALLINT æ— ç¬¦å· <span class=\"number\">0</span> åˆ° <span class=\"number\">32767</span></span><br><span class=\"line\">MEDIUMINT æœ‰ç¬¦å· -<span class=\"number\">8388608</span> åˆ° <span class=\"number\">8388607</span></span><br><span class=\"line\">MEDIUMINT æ— ç¬¦å· <span class=\"number\">0</span> åˆ° <span class=\"number\">16777215</span></span><br><span class=\"line\">INT æœ‰ç¬¦å· -<span class=\"number\">2147483648</span> åˆ° <span class=\"number\">2147483647</span></span><br><span class=\"line\">INT æ— ç¬¦å· <span class=\"number\">0</span> åˆ° <span class=\"number\">4294967295</span></span><br><span class=\"line\">BIGINT æœ‰ç¬¦å· -<span class=\"number\">9223372036854775808</span> åˆ° <span class=\"number\">9223372036854775807</span></span><br><span class=\"line\">BIGINT æ— ç¬¦å· <span class=\"number\">0</span> åˆ°-<span class=\"number\">1</span></span><br><span class=\"line\"># è¿™é‡Œå¯ä»¥çœ‹åˆ°BIGINT æ— ç¬¦å·Java longæ•°æ®ç±»å‹å·²ç»æ»¡è¶³ä¸äº†äº†ã€‚</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>åœ¨æ•°æ®ä¼˜åŒ–çš„åŸåˆ™ä¸Šï¼Œåˆç†çš„é€‰æ‹©å­˜å‚¨æ•°æ®ç±»å‹ã€‚è€Œä¸æ˜¯ç›²ç›®çš„é€‰æ‹©æ•°æ®ç±»å‹å¤§ã€‚æ¯”å¦‚æˆ‘ä»¬çš„å¹´é¾„ç”¨TINTINT å°±å¤Ÿäº†ã€‚ä¹Ÿå°±è¯´åœ¨æŒ‡å®šæ•°æ®ç±»å‹çš„æ—¶å€™ï¼Œä¸€èˆ¬æ˜¯é‡‡ç”¨ä»å°åŸåˆ™ï¼Œè¿™æ ·ä¼šå¯¹MYSQLçš„æ•ˆç‡æé«˜å¾ˆå¤šã€‚å½“ç„¶åšå¥½è®¾è®¡ã€‚</p>\n</blockquote>\n<h5 id=\"SQLæµ‹è¯•\"><a href=\"#SQLæµ‹è¯•\" class=\"headerlink\" title=\"SQLæµ‹è¯•\"></a>SQLæµ‹è¯•</h5><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\"># åˆ›å»ºintç±»å‹çš„è¡¨çœ‹çœ‹ã€‚</span><br><span class=\"line\">[root@localhost][Demo]&gt; CREATE TABLE test_int(</span><br><span class=\"line\">    -&gt; id TINYINT UNSIGNED PRIMARY KEY AUTO_INCREMENT ,</span><br><span class=\"line\">    -&gt; int_1 TINYINT ,</span><br><span class=\"line\">    -&gt; int_2 SMALLINT ,</span><br><span class=\"line\">    -&gt; int_3 MEDIUMINT ,</span><br><span class=\"line\">    -&gt; int_4 INT ,</span><br><span class=\"line\">    -&gt; int_5 BIGINT</span><br><span class=\"line\">    -&gt; );</span><br><span class=\"line\">Query OK, 0 rows affected (0.07 sec)</span><br><span class=\"line\"># æŸ¥çœ‹è¡¨ç»“æ„ã€‚</span><br><span class=\"line\">[root@localhost][Demo]&gt; SHOW COLUMNS FROM test_int;</span><br><span class=\"line\">+-------+---------------------+------+-----+---------+----------------+</span><br><span class=\"line\">| Field | Type                | Null | Key | Default | Extra          |</span><br><span class=\"line\">+-------+---------------------+------+-----+---------+----------------+</span><br><span class=\"line\">| id    | tinyint(3) unsigned | NO   | PRI | NULL    | auto_increment |</span><br><span class=\"line\">| int_1 | tinyint(4)          | YES  |     | NULL    |                |</span><br><span class=\"line\">| int_2 | smallint(6)         | YES  |     | NULL    |                |</span><br><span class=\"line\">| int_3 | mediumint(9)        | YES  |     | NULL    |                |</span><br><span class=\"line\">| int_4 | int(11)             | YES  |     | NULL    |                |</span><br><span class=\"line\">| int_5 | bigint(20)          | YES  |     | NULL    |                |</span><br><span class=\"line\">+-------+---------------------+------+-----+---------+----------------+</span><br><span class=\"line\">6 rows in set (0.00 sec)</span><br><span class=\"line\"></span><br><span class=\"line\">#æ’å…¥æµ‹è¯•1ï¼Œæ•´å‹æ’å…¥ã€‚æˆåŠŸã€‚</span><br><span class=\"line\">[root@localhost][Demo]&gt; INSERT INTO test_int VALUES(NULL,1,2,3,4,5);</span><br><span class=\"line\">Query OK, 1 row affected (0.01 sec)</span><br><span class=\"line\"></span><br><span class=\"line\">#æ’å…¥æµ‹è¯•2,ç”¨å•å¼•å·åŒ…è£¹æ•°å­—ã€‚ç«Ÿç„¶æˆåŠŸäº†ã€‚</span><br><span class=\"line\">[root@localhost][Demo]&gt; INSERT INTO test_int VALUES(NULL,&#39;1&#39;,&#39;2&#39;,&#39;3&#39;,&#39;4&#39;,&#39;5&#39;);</span><br><span class=\"line\">Query OK, 1 row affected (0.01 sec)</span><br><span class=\"line\"></span><br><span class=\"line\">#æ’å…¥æµ‹è¯•3ï¼Œç”¨å­—ç¬¦ä¸²æµ‹è¯•ã€‚è‚¯å®šæ˜¯æ’å…¥ä¸æˆåŠŸã€‚</span><br><span class=\"line\">[root@localhost][Demo]&gt; INSERT INTO test_int VALUES(NULL,&#39;a&#39;,&#39;b&#39;,&#39;c&#39;,&#39;d&#39;,&#39;e&#39;);</span><br><span class=\"line\">ERROR 1366 (HY000): Incorrect integer value: &#39;a&#39; for column &#39;int_1&#39; at row 1</span><br><span class=\"line\"></span><br><span class=\"line\">#æµ‹è¯•ä¸‹æœ‰ç¬¦å·çš„æƒ…å†µï¼Œè¿™é‡Œæç¤ºint_1 è¶…è¿‡èŒƒå›´äº†ã€‚</span><br><span class=\"line\">[root@localhost][Demo]&gt; INSERT INTO test_int VALUES(NULL,-200,2,3,4,5);</span><br><span class=\"line\">ERROR 1264 (22003): Out of range value for column &#39;int_1&#39; at row 1</span><br><span class=\"line\"></span><br><span class=\"line\">#ä¿®æ”¹å‚æ•°è¯•è¯•ï¼ŒæˆåŠŸäº†ã€‚TINYINT æœ‰ç¬¦å· æ˜¯ -128 åˆ° 127ã€‚</span><br><span class=\"line\">[root@localhost][Demo]&gt; INSERT INTO test_int VALUES(NULL,-128,2,3,4,5);</span><br><span class=\"line\">Query OK, 1 row affected (0.00 sec)</span><br><span class=\"line\"></span><br><span class=\"line\">#ä¿®æ”¹ int_1 çš„å±æ€§ ä¿®æ”¹æˆUNSIGNEDã€‚æ— ç¬¦å·ã€‚æ³¨æ„åœ¨ä¿®æ”¹å­—æ®µå±æ€§çš„æ—¶å€™ï¼Œå¦‚æœå·²ç»å­˜åœ¨æ•°æ®è¯·ç¡®è®¤å­˜åœ¨çš„æ•°æ®æ˜¯å¦æœ‰ä¸åˆæ³•çš„ã€‚</span><br><span class=\"line\">[root@localhost][Demo]&gt; ALTER TABLE test_int MODIFY int_1 TINYINT UNSIGNED;</span><br><span class=\"line\">ERROR 1264 (22003): Out of range value for column &#39;int_1&#39; at row 3</span><br><span class=\"line\"></span><br><span class=\"line\">#ä¸ºäº†ç»§ç»­æµ‹è¯•ï¼Œåˆ é™¤æ‰è¡¨ä¸­æ•°æ®ã€‚</span><br><span class=\"line\">[root@localhost][Demo]&gt; DELETE FROM test_int;</span><br><span class=\"line\">Query OK, 4 rows affected (0.03 sec)</span><br><span class=\"line\"></span><br><span class=\"line\">#é‡æ–°ä¿®æ”¹è¡¨å­—æ®µç»“æ„ã€‚</span><br><span class=\"line\">[root@localhost][Demo]&gt; ALTER TABLE test_int MODIFY int_1 TINYINT UNSIGNED;</span><br><span class=\"line\">Query OK, 0 rows affected (0.13 sec)</span><br><span class=\"line\">Records: 0  Duplicates: 0  Warnings: 0</span><br><span class=\"line\"></span><br><span class=\"line\"># æ£€æŸ¥æ˜¯å¦ä¿®æ”¹æˆåŠŸã€‚å¯ä»¥çœ‹åˆ° int_1 æ·»åŠ äº†UNSIGNEDå±æ€§çº¦æŸäº†ã€‚</span><br><span class=\"line\">[root@localhost][Demo]&gt; SHOW COLUMNS FROM test_int;</span><br><span class=\"line\">+-------+---------------------+------+-----+---------+----------------+</span><br><span class=\"line\">| Field | Type                | Null | Key | Default | Extra          |</span><br><span class=\"line\">+-------+---------------------+------+-----+---------+----------------+</span><br><span class=\"line\">| id    | tinyint(3) unsigned | NO   | PRI | NULL    | auto_increment |</span><br><span class=\"line\">| int_1 | tinyint(3) unsigned | YES  |     | NULL    |                |</span><br><span class=\"line\">| int_2 | smallint(6)         | YES  |     | NULL    |                |</span><br><span class=\"line\">| int_3 | mediumint(9)        | YES  |     | NULL    |                |</span><br><span class=\"line\">| int_4 | int(11)             | YES  |     | NULL    |                |</span><br><span class=\"line\">| int_5 | bigint(20)          | YES  |     | NULL    |                |</span><br><span class=\"line\">+-------+---------------------+------+-----+---------+----------------+</span><br><span class=\"line\">6 rows in set (0.00 sec)</span><br><span class=\"line\"># æ’å…¥TINYINT æœ€å¤§å€¼è¯•è¯•ï¼ŒOKè¿™é‡Œæ˜¯æˆåŠŸçš„ã€‚</span><br><span class=\"line\">[root@localhost][Demo]&gt; INSERT INTO test_int VALUES(NULL,255,2,3,4,5);</span><br><span class=\"line\">Query OK, 1 row affected (0.00 sec)</span><br><span class=\"line\"></span><br><span class=\"line\"># å½“è¶…è¿‡TINYINT UNSIGNEDæœ€å¤§çš„æ—¶å€™å°±ä¼šæŠ›å‡ºå¼‚å¸¸ä¿¡æ¯ã€‚</span><br><span class=\"line\">[root@localhost][Demo]&gt; INSERT INTO test_int VALUES(NULL,256,2,3,4,5);</span><br><span class=\"line\">ERROR 1264 (22003): Out of range value for column &#39;int_1&#39; at row 1</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>è¿™é‡Œå°±æ¼”ç¤ºTINYINTå­˜å‚¨èŒƒå›´çš„æƒ…å†µäº†ï¼Œå®é™…ä¸Šå…¶å®ƒè¯ä¹¦å‹åŸºæœ¬ç±»ä¼¼ã€‚</p>\n</blockquote>\n<p>å®é™…ä¸Šæœ‰ä¸€ç‚¹éœ€è¦æ³¨æ„å°±æ˜¯TYPEä¸­çš„èŠ±æ‹¬å¼§ä¸­çš„æ•°å­—æ˜¯å¹²å˜›çš„</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\"># è¿™ä¸ª3ä¸ªæ˜¯å¹²å˜›çš„å‘¢ï¼Ÿ</span><br><span class=\"line\">tinyint(3) unsigned</span><br></pre></td></tr></table></figure>\n\n<p>è¿™å®é™…ä¸Šæ˜¯æ˜¾ç¤ºå®½åº¦çš„æ„æ€ã€‚å½“æ˜¾ç¤ºçš„å®½åº¦ä¸å¤Ÿçš„æ—¶å€™å¯ä»¥ä½¿ç”¨0æ¥å¡«å……ï¼Œä½¿ç”¨<code>zreofuillè¿›è¡Œé›¶å¡«å……</code>ï¼Œè€Œä¸”é›¶å¡«å……ä¼šç›´æ¥å¯¼è‡´è¯¥æ•°å€¼å˜æˆæœåŠ¡å·ã€‚</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\"># æ¼”ç¤ºä¿®æ”¹è¡¨ç»“æ„,å°†int_1å­—æ®µå†æ¬¡ä¿®æ”¹ã€‚</span><br><span class=\"line\">[root@localhost][Demo]&gt; ALTER TABLE test_int MODIFY int_1 TINYINT UNSIGNED ZEROFILL;</span><br><span class=\"line\">Query OK, 0 rows affected (0.02 sec)</span><br><span class=\"line\">Records: 0  Duplicates: 0  Warnings: 0</span><br><span class=\"line\"></span><br><span class=\"line\">#æ£€æŸ¥è¡¨ç»“æ„æ˜¯å¦å‘ç”Ÿå˜åŒ–</span><br><span class=\"line\">[root@localhost][Demo]&gt; SHOW COLUMNS FROM test_int;</span><br><span class=\"line\">+-------+------------------------------+------+-----+---------+----------------+</span><br><span class=\"line\">| Field | Type                         | Null | Key | Default | Extra          |</span><br><span class=\"line\">+-------+------------------------------+------+-----+---------+----------------+</span><br><span class=\"line\">| id    | tinyint(3) unsigned          | NO   | PRI | NULL    | auto_increment |</span><br><span class=\"line\">| int_1 | tinyint(3) unsigned zerofill | YES  |     | NULL    |                |</span><br><span class=\"line\">| int_2 | smallint(6)                  | YES  |     | NULL    |                |</span><br><span class=\"line\">| int_3 | mediumint(9)                 | YES  |     | NULL    |                |</span><br><span class=\"line\">| int_4 | int(11)                      | YES  |     | NULL    |                |</span><br><span class=\"line\">| int_5 | bigint(20)                   | YES  |     | NULL    |                |</span><br><span class=\"line\">+-------+------------------------------+------+-----+---------+----------------+</span><br><span class=\"line\">6 rows in set (0.00 sec)</span><br><span class=\"line\"></span><br><span class=\"line\"># æ’å…¥æ–°çš„æ•°æ®</span><br><span class=\"line\">[root@localhost][Demo]&gt; INSERT test_int VALUES(NULL,1,2,3,4,5);</span><br><span class=\"line\">Query OK, 1 row affected (0.01 sec)</span><br><span class=\"line\"></span><br><span class=\"line\"># åˆšæ‰æ’å…¥çš„int_1ä½ç½®çš„å€¼å·²ç»å‘ç”Ÿäº†å˜åŒ–ã€‚</span><br><span class=\"line\">[root@localhost][Demo]&gt; SELECT * FROM test_int;</span><br><span class=\"line\">+----+-------+-------+-------+-------+-------+</span><br><span class=\"line\">| id | int_1 | int_2 | int_3 | int_4 | int_5 |</span><br><span class=\"line\">+----+-------+-------+-------+-------+-------+</span><br><span class=\"line\">|  5 |   255 |     2 |     3 |     4 |     5 |</span><br><span class=\"line\">|  6 |   001 |     2 |     3 |     4 |     5 |</span><br><span class=\"line\">+----+-------+-------+-------+-------+-------+</span><br><span class=\"line\">2 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>å¡«å……é›¶çš„å«ä¹‰æ›´å¤šçš„å°±æ˜¯ä¿è¯æ•°æ®çš„æ ¼å¼ã€‚</p>\n</blockquote>\n<h4 id=\"æµ®ç‚¹å‹\"><a href=\"#æµ®ç‚¹å‹\" class=\"headerlink\" title=\"æµ®ç‚¹å‹\"></a>æµ®ç‚¹å‹</h4><ul>\n<li>FLOAT <code>å•ç²¾åº¦æµ®ç‚¹å‹</code><ul>\n<li>å­—èŠ‚ï¼š<code>4</code></li>\n</ul>\n</li>\n<li>DOUBLE <code>åŒç²¾åº¦æµ®ç‚¹å‹</code><ul>\n<li>å­—èŠ‚ï¼š<code>8</code></li>\n</ul>\n</li>\n</ul>\n<blockquote>\n<p>åœ¨SQLä¸­ï¼Œå°†å°æ•°å‹åˆ†é…ä¸¤ç§<code>æµ®ç‚¹å‹</code>å’Œ<code>å®šç‚¹å‹</code>ä¸¤ç§ã€‚</p>\n</blockquote>\n<ul>\n<li>æµ®ç‚¹å‹ä½¿ç”¨æ³¨æ„äº‹é¡¹ï¼Œå¦‚æœç›´æ¥ä½¿ç”¨<code>float</code>ï¼Œåˆ™æ ‡è¯†æ²¡æœ‰å°æ•°éƒ¨åˆ†ï¼Œå¦‚æœç”¨äº†<code>float(M,D)</code>,å…¶ä¸­<code>M</code>ä»£è¡¨é•¿åº¦,<code>D</code>ä»£è¡¨å°æ•°éƒ¨åˆ†é•¿åº¦ï¼Œ<code>M-D</code>åˆ™ä¸ºæ•´æ•°éƒ¨åˆ†é•¿åº¦ã€‚</li>\n</ul>\n<h5 id=\"SQLæµ‹è¯•-1\"><a href=\"#SQLæµ‹è¯•-1\" class=\"headerlink\" title=\"SQLæµ‹è¯•\"></a>SQLæµ‹è¯•</h5><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\"># åˆ›å»ºæµ‹è¯•è¡¨test_float</span><br><span class=\"line\">[root@localhost][Demo]&gt; CREATE TABLE test_float(</span><br><span class=\"line\">    -&gt; id TINYINT UNSIGNED AUTO_INCREMENT PRIMARY KEY ,</span><br><span class=\"line\">    -&gt; float_1 float,</span><br><span class=\"line\">    -&gt; float_2 float(6,2),</span><br><span class=\"line\">    -&gt; float_3 float(4,1)</span><br><span class=\"line\">    -&gt; );</span><br><span class=\"line\">Query OK, 0 rows affected (0.07 sec)</span><br><span class=\"line\"></span><br><span class=\"line\"># æ£€æŸ¥è¡¨ç»“æ„</span><br><span class=\"line\">[root@localhost][Demo]&gt; SHOW COLUMNS FROM test_float;</span><br><span class=\"line\">+---------+---------------------+------+-----+---------+----------------+</span><br><span class=\"line\">| Field   | Type                | Null | Key | Default | Extra          |</span><br><span class=\"line\">+---------+---------------------+------+-----+---------+----------------+</span><br><span class=\"line\">| id      | tinyint(3) unsigned | NO   | PRI | NULL    | auto_increment |</span><br><span class=\"line\">| float_1 | float               | YES  |     | NULL    |                |</span><br><span class=\"line\">| float_2 | float(6,2)          | YES  |     | NULL    |                |</span><br><span class=\"line\">| float_3 | float(4,1)          | YES  |     | NULL    |                |</span><br><span class=\"line\">+---------+---------------------+------+-----+---------+----------------+</span><br><span class=\"line\">4 rows in set (0.00 sec)</span><br><span class=\"line\"></span><br><span class=\"line\">#æ’å…¥æ¨¡æ‹Ÿæ•°æ®</span><br><span class=\"line\">[root@localhost][Demo]&gt; INSERT INTO test_float VALUES(NULL,2.1534,11,888.1);</span><br><span class=\"line\">Query OK, 1 row affected (0.00 sec)</span><br><span class=\"line\"></span><br><span class=\"line\">#è¿™é‡Œéœ€è¦æ³¨æ„çš„æ—¶å€™ float(4,2)å®é™…æ ‡è¯†çš„æ•´æ•°ä½å°äº4ï¼Œè€Œä¸æ˜¯å°äºç­‰äºã€‚æµ‹è¯•ä¸‹</span><br><span class=\"line\">[root@localhost][Demo]&gt; INSERT INTO test_float VALUES(NULL,2.1534,11,8888.1);</span><br><span class=\"line\">ERROR 1264 (22003): Out of range value for column &#39;float_3&#39; at row 1</span><br><span class=\"line\"># ç»“æœå¾ˆæ˜æ˜¾ï¼Œ8888.1 æ’å…¥å¤±è´¥ã€‚æ‰€ä»¥æ’å…¥çš„æ—¶å€™ä¹Ÿéœ€è¦æ³¨æ„ã€‚</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"å®šç‚¹å‹\"><a href=\"#å®šç‚¹å‹\" class=\"headerlink\" title=\"å®šç‚¹å‹\"></a>å®šç‚¹å‹</h4><ul>\n<li>DECIMAL <code>å®šç‚¹æ•°</code><ul>\n<li>å­—èŠ‚ï¼š<code>3</code></li>\n</ul>\n</li>\n</ul>\n<blockquote>\n<p>å®šç‚¹å‹æ•°æ®ï¼Œç»å¯¹çš„ä¿è¯æ•´æ•°éƒ¨åˆ†ä¸ä¼šè¢«å››èˆäº”å…¥ï¼Œä¹Ÿå°±æ˜¯è¯´ä¸ä¼šæŸå¤±ç»åº¦ï¼Œä½†æ˜¯å°æ•°éƒ¨åˆ†æœ‰å¯èƒ½æŸå¤±ç²¾åº¦ï¼Œè™½ç„¶ç†è®ºä¸Šå°æ•°éƒ¨åˆ†ä¹Ÿä¸ä¼šä¸¢å¤±ç²¾åº¦ã€‚</p>\n</blockquote>\n<h5 id=\"SQLæµ‹è¯•-2\"><a href=\"#SQLæµ‹è¯•-2\" class=\"headerlink\" title=\"SQLæµ‹è¯•\"></a>SQLæµ‹è¯•</h5><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\"># ä¸floatæ¯”è¾ƒï¼Œçœ‹çœ‹æ˜¯å¦ä¼šå››èˆäº”å…¥ã€‚</span><br><span class=\"line\">[root@localhost][Demo]&gt; CREATE TABLE test_decimal(</span><br><span class=\"line\">    -&gt; id TINYINT UNSIGNED AUTO_INCREMENT PRIMARY KEY,</span><br><span class=\"line\">    -&gt; float_1 float(10,2),</span><br><span class=\"line\">    -&gt; decimal_1 decimal(10,2)                                                                         </span><br><span class=\"line\">    -&gt; );</span><br><span class=\"line\">Query OK, 0 rows affected (0.09 sec)</span><br><span class=\"line\"></span><br><span class=\"line\"># æµ‹è¯•æ¨¡æ‹Ÿæ•°æ®</span><br><span class=\"line\">[root@localhost][Demo]&gt; INSERT test_decimal VALUES(NULL,99999999.99 , 99999999.99);</span><br><span class=\"line\">Query OK, 1 row affected, 1 warning (0.00 sec)</span><br><span class=\"line\"></span><br><span class=\"line\"># æœç„¶å•Šï¼Œfloatçš„è¢«å››èˆäº”å…¥äº†ï¼Œè€Œdecimalä¿ç•™çš„å°æ•°ä½ã€‚</span><br><span class=\"line\">[root@localhost][Demo]&gt; SELECT * FROM test_decimal;</span><br><span class=\"line\">+----+--------------+-------------+</span><br><span class=\"line\">| id | float_1      | decimal_1   |</span><br><span class=\"line\">+----+--------------+-------------+</span><br><span class=\"line\">|  2 | 100000000.00 | 99999999.99 |</span><br><span class=\"line\">+----+--------------+-------------+</span><br><span class=\"line\">1 row in set (0.00 sec)</span><br></pre></td></tr></table></figure>\n\n\n<h4 id=\"æ—¥æœŸç±»å‹\"><a href=\"#æ—¥æœŸç±»å‹\" class=\"headerlink\" title=\"æ—¥æœŸç±»å‹\"></a>æ—¥æœŸç±»å‹</h4><ul>\n<li>YEAR <code>å¹´ä»½</code><ul>\n<li>å­—èŠ‚ï¼š<code>1</code></li>\n</ul>\n</li>\n<li>TIME <code>æ—¶é—´</code><ul>\n<li>å­—èŠ‚ï¼š<code>3</code></li>\n</ul>\n</li>\n<li>DATE <code>æ—¥æœŸ</code><ul>\n<li>å­—èŠ‚ï¼š<code>3</code></li>\n</ul>\n</li>\n<li>DATETIME <code>æ—¥æœŸæ—¶é—´</code><ul>\n<li>å­—èŠ‚ï¼š<code>8</code></li>\n</ul>\n</li>\n<li>TIMESTAMP  <code>æ—¶é—´æˆ³</code><ul>\n<li>å­—èŠ‚ï¼š<code>4</code></li>\n</ul>\n</li>\n</ul>\n<blockquote>\n<p>ç”±äºå­˜åœ¨è·¨æ—¶åŒºçš„é—®é¢˜ï¼Œæ‰€ä»¥ä¸€èˆ¬éƒ½æ˜¯å­˜æ•°å­—æ—¥æœŸï¼Œæ—¥æœŸç±»å‹ç”¨çš„ç›¸å¯¹ä¼šæ¯”è¾ƒå°‘ã€‚</p>\n</blockquote>\n<ul>\n<li>è¡¥å……ç±»å‹æ¦‚å†µ<ul>\n<li><code>DATATIME</code>ï¼šæ—¥æœŸæ—¶é—´ï¼Œå…¶æ ¼å¼ä¸º<code>yyyy-MM-dd HH:mm:ss</code>ï¼Œè¡¨ç¤ºçš„èŒƒå›´æ˜¯ä» 1000 å¹´åˆ° 9999 å¹´ï¼Œæœ‰é›¶å€¼ï¼Œå³<code>0000-00-00 0000:00</code>ï¼›</li>\n<li><code>DATA</code>ï¼šæ—¥æœŸï¼Œå°±æ˜¯<code>datetime</code>çš„<code>date</code>éƒ¨åˆ†ï¼›</li>\n<li><code>TIME</code>ï¼šæ—¶é—´ï¼Œæˆ–è€…è¯´æ˜¯æ—¶é—´æ®µï¼Œä¸ºæŒ‡å®šçš„æŸä¸ªæ—¶é—´åŒºé—´ä¹‹é—´ï¼ŒåŒ…å«æ­£è´Ÿæ—¶é—´ï¼›</li>\n<li><code>TIMESTAMP  </code>ï¼šæ—¶é—´æˆ³ï¼Œä½†å¹¶ä¸æ˜¯çœŸæ­£æ„ä¹‰ä¸Šçš„æ—¶é—´æˆ³ï¼Œå…¶æ˜¯ä»<code>1970</code>å¹´å¼€å§‹è®¡ç®—çš„ï¼Œæ ¼å¼å’Œ<code>datetime</code>ä¸€è‡´ï¼›</li>\n<li><code>YEAR </code>ï¼šå¹´ä»½ï¼Œå…±æœ‰ä¸¤ç§æ ¼å¼ï¼Œåˆ†åˆ«ä¸º<code>year(2)</code>å’Œ<code>year(4)</code>.</li>\n</ul>\n</li>\n</ul>\n<h5 id=\"SQLæµ‹è¯•-3\"><a href=\"#SQLæµ‹è¯•-3\" class=\"headerlink\" title=\"SQLæµ‹è¯•\"></a>SQLæµ‹è¯•</h5><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\"># åˆ›å»ºä¸€æ—¥æœŸæµ‹è¯•è¡¨ test_date</span><br><span class=\"line\">[root@localhost][Demo]&gt; CREATE TABLE test_date(</span><br><span class=\"line\">    -&gt; id TINYINT UNSIGNED AUTO_INCREMENT PRIMARY KEY,</span><br><span class=\"line\">    -&gt; date_1 DATETIME,</span><br><span class=\"line\">    -&gt; date_2 DATE,</span><br><span class=\"line\">    -&gt; date_3 TIME,</span><br><span class=\"line\">    -&gt; date_4 YEAR,</span><br><span class=\"line\">    -&gt; date_5 TIMESTAMP</span><br><span class=\"line\">    -&gt; );</span><br><span class=\"line\">Query OK, 0 rows affected (0.04 sec)</span><br><span class=\"line\"></span><br><span class=\"line\">#æ£€æŸ¥è¡¨ç»“æ„</span><br><span class=\"line\">[root@localhost][Demo]&gt; SHOW COLUMNS FROM test_date;</span><br><span class=\"line\">+--------+---------------------+------+-----+-------------------+-----------------------------+</span><br><span class=\"line\">| Field  | Type                | Null | Key | Default           | Extra                       |</span><br><span class=\"line\">+--------+---------------------+------+-----+-------------------+-----------------------------+</span><br><span class=\"line\">| id     | tinyint(3) unsigned | NO   | PRI | NULL              | auto_increment              |</span><br><span class=\"line\">| date_1 | datetime            | YES  |     | NULL              |                             |</span><br><span class=\"line\">| date_2 | date                | YES  |     | NULL              |                             |</span><br><span class=\"line\">| date_3 | time                | YES  |     | NULL              |                             |</span><br><span class=\"line\">| date_4 | year(4)             | YES  |     | NULL              |                             |</span><br><span class=\"line\">| date_5 | timestamp           | NO   |     | CURRENT_TIMESTAMP | on update CURRENT_TIMESTAMP |</span><br><span class=\"line\">+--------+---------------------+------+-----+-------------------+-----------------------------+</span><br><span class=\"line\">6 rows in set (0.00 sec)</span><br><span class=\"line\"></span><br><span class=\"line\"># æ·»åŠ æµ‹è¯•æ•°æ®</span><br><span class=\"line\">[root@localhost][Demo]&gt; INSERT INTO test_date VALUES(NULL,&#39;2017-05-06 13:15:00&#39;,&#39;2017-05-06&#39;,&#39;13:15:00&#39;,2018,&#39;2017-05-06 13:15:00&#39;);</span><br><span class=\"line\">Query OK, 1 row affected (0.00 sec)</span><br><span class=\"line\"></span><br><span class=\"line\"># æ£€æŸ¥æ•°æ®ç»“æœ</span><br><span class=\"line\">[root@localhost][Demo]&gt; SELECT * FROM test_date;</span><br><span class=\"line\">+----+---------------------+------------+----------+--------+---------------------+</span><br><span class=\"line\">| id | date_1              | date_2     | date_3   | date_4 | date_5              |</span><br><span class=\"line\">+----+---------------------+------------+----------+--------+---------------------+</span><br><span class=\"line\">|  1 | 2017-05-06 13:15:00 | 2017-05-06 | 13:15:00 |   2018 | 2017-05-06 13:15:00 |</span><br><span class=\"line\">+----+---------------------+------------+----------+--------+---------------------+</span><br><span class=\"line\">1 row in set (0.01 sec)</span><br><span class=\"line\"></span><br><span class=\"line\"># éªŒè¯ä¸‹æ—¶é—´æˆ³æ˜¯å¦ä¼šè‡ªåŠ¨æ›´æ–°ã€‚</span><br><span class=\"line\">[root@localhost][Demo]&gt; UPDATE test_date SET date_4 &#x3D; 2017 WHERE id &#x3D; 1;</span><br><span class=\"line\">Query OK, 1 row affected (0.01 sec)</span><br><span class=\"line\">Rows matched: 1  Changed: 1  Warnings: 0</span><br><span class=\"line\"></span><br><span class=\"line\"># æ£€æŸ¥ä¸‹ç»“æœ</span><br><span class=\"line\">[root@localhost][Demo]&gt; SELECT * FROM test_date;</span><br><span class=\"line\">+----+---------------------+------------+----------+--------+---------------------+</span><br><span class=\"line\">| id | date_1              | date_2     | date_3   | date_4 | date_5              |</span><br><span class=\"line\">+----+---------------------+------------+----------+--------+---------------------+</span><br><span class=\"line\">|  1 | 2017-05-06 13:15:00 | 2017-05-06 | 13:15:00 |   2017 | 2018-05-02 04:36:31 |</span><br><span class=\"line\">+----+---------------------+------------+----------+--------+---------------------+</span><br><span class=\"line\">1 row in set (0.00 sec)</span><br><span class=\"line\"># è¿™é‡Œå¯ä»¥çœ‹åˆ° date_5 å·²ç»å‘ç”Ÿäº†å˜åŒ–ã€‚</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"å­—ç¬¦å‹\"><a href=\"#å­—ç¬¦å‹\" class=\"headerlink\" title=\"å­—ç¬¦å‹\"></a>å­—ç¬¦å‹</h4><ul>\n<li>CHAR(M)<ul>\n<li>å­—èŠ‚ï¼š<code>Mä¸ªå­—èŠ‚ï¼Œ0 &lt;= M &lt;= 255</code></li>\n</ul>\n</li>\n<li>VARCHAR(M)<ul>\n<li>å­—èŠ‚ï¼š<code>L + 1ä¸ªå­—èŠ‚ , å…¶ä¸­L &lt;= M ä¸” 0 &lt;= M &lt;= 65535</code></li>\n</ul>\n</li>\n<li>TINYTEXT<ul>\n<li>å­—èŠ‚ï¼š<code>L + 1ä¸ªå­—èŠ‚ï¼Œ å…¶ä¸­L &lt; 2^8ã€‚</code></li>\n</ul>\n</li>\n<li>TEXT<ul>\n<li>å­—èŠ‚ï¼š<code>L + 2ä¸ªå­—èŠ‚ï¼Œå…¶ä¸­L &lt; 2^16ã€‚</code></li>\n</ul>\n</li>\n<li>MEDIUMTEXT<ul>\n<li>å­—èŠ‚ï¼š<code>L + 3ä¸ªå­—èŠ‚ï¼Œå…¶ä¸­L &lt; 2^24ã€‚</code></li>\n</ul>\n</li>\n<li>LONGTEXT<ul>\n<li>å­—èŠ‚ï¼š<code>L + 4ä¸ªå­—èŠ‚ï¼Œå…¶ä¸­ L &lt; 2^32ã€‚</code></li>\n</ul>\n</li>\n<li>ENMUï¼ˆâ€™value1â€™,â€™value2â€™ï¼‰<ul>\n<li>å­—èŠ‚ï¼š<code>1æˆ–è€…2å­—èŠ‚ï¼Œå–å†³ä¸æšä¸¾å€¼çš„ä¸ªæ•°ï¼ˆæœ€å¤š65535ä¸ªå€¼ï¼‰ã€‚</code></li>\n</ul>\n</li>\n<li>SETï¼ˆâ€™value1â€™,â€™value2â€™ï¼‰<ul>\n<li>å­—èŠ‚ï¼š<code>1ã€2ã€3ã€4æˆ–è€…8å­—èŠ‚ï¼Œå–å†³ä¸Setæˆå‘˜çš„æ•°ç›®ï¼ˆæœ€å¤š64ä¸ªæˆå‘˜ï¼‰</code></li>\n</ul>\n</li>\n</ul>\n<blockquote>\n<p>è¿™é‡Œæ¶‰åŠåˆ°å®šé•¿å’Œå˜é•¿ï¼Œæ¯”å¦‚è¯´CHARï¼ˆMï¼‰ï¼Œå¦‚æœå­˜å‚¨çš„æ˜¯ABCä½†æ˜¯æ²¡æœ‰è¾¾åˆ°æŒ‡å®šçš„é•¿åº¦å°±ä¼šåœ¨ABCåé¢æ·»åŠ ç©ºæ ¼ç›´è‡³æ»¡è¶³é•¿åº¦å¤§å°ã€‚</p>\n</blockquote>\n<p>å­—ç¬¦ä¸²åˆ†ç±»</p>\n<ul>\n<li>å®šé•¿ï¼š<code>CHAR</code></li>\n<li>å˜é•¿ï¼š<code>VARCHAR</code></li>\n<li>æ–‡æœ¬ï¼š<code>TINYTEXT</code>ã€<code>TEXT</code>ã€<code>MEDIUMTEXT</code>ã€<code>LONGTEXT</code></li>\n<li>æšä¸¾ï¼š<code>ENMU</code></li>\n<li>é›†åˆï¼š<code>SET</code></li>\n</ul>\n","categories":["å®è·µ"],"tags":["MySQL"]},{"title":"æºç é˜…è¯»-Stack","url":"/posts/340816784/","content":"<blockquote>\n<p>æœ¬ç« æ˜¯æ•´ç†çŸ¥è¯†å†…å®¹ï¼Œä¸ºå¼ºåŒ–çŸ¥è¯†é•¿æœŸæ›´æ–°ã€‚</p>\n<h3 id=\"Stack\"><a href=\"#Stack\" class=\"headerlink\" title=\"Stack\"></a>Stack</h3><ul>\n<li>æ ˆæ˜¯å…ƒç´ çš„é›†åˆï¼Œå…¶åŒ…å«äº†ä¸¤ä¸ªåŸºæœ¬æ“ä½œï¼špush æ“ä½œå¯ä»¥ç”¨äºå°†å…ƒç´ å‹å…¥æ ˆï¼Œpop æ“ä½œå¯ä»¥å°†æ ˆé¡¶å…ƒç´ ç§»é™¤ã€‚</li>\n<li>éµå¾ªåå…¥å…ˆå‡ºï¼ˆLIFOï¼‰åŸåˆ™ã€‚</li>\n<li>æ—¶é—´å¤æ‚åº¦:</li>\n<li>ç´¢å¼•: <code>O(n)</code></li>\n<li>æœç´¢: <code>O(n)</code></li>\n<li>æ’å…¥: <code>O(1)</code></li>\n<li>ç§»é™¤: <code>O(1)</code></li>\n</ul>\n</blockquote>\n<h2 id=\"Stack-1\"><a href=\"#Stack-1\" class=\"headerlink\" title=\"Stack\"></a>Stack</h2><blockquote>\n<p>Collectionæˆå‘˜ä¹‹ä¸€ï¼Œç»§æ‰¿äº†Vectorï¼Œé€šè¿‡é‡å†™Vectoræ¥å®ç°LIFOï¼ˆLast-in-First-out åè¿›å…ˆå‡ºï¼‰ç‰¹æ€§ã€‚</p>\n</blockquote>\n<p><img src=\"https://z201.oss-cn-shanghai.aliyuncs.com/JavaNote/Stack/Stack.png\"></p>\n<h2 id=\"æ¦‚è¿°\"><a href=\"#æ¦‚è¿°\" class=\"headerlink\" title=\"æ¦‚è¿°\"></a>æ¦‚è¿°</h2><ul>\n<li>Java Stackæ˜¯LIFOå¯¹è±¡ã€‚å®ƒæ‰©å±•äº†Vectorç±»ã€‚</li>\n</ul>\n<h2 id=\"æºç åˆ†æStack\"><a href=\"#æºç åˆ†æStack\" class=\"headerlink\" title=\"æºç åˆ†æStack\"></a>æºç åˆ†æStack</h2><a id=\"more\"></a>\n\n<blockquote>\n<p>ç”±äºæ–¹æ³•ä¸å¤šï¼Œç›´æ¥è´´æ•´ä¸ªç±»ä»£ç ã€‚Stackåªæœ‰ä¸€ä¸ªæ„é€ æ–¹æ³•ï¼Œä¹Ÿå°±è¯´ç»´æŠ¤åˆ—é˜Ÿçš„ç‰¹æ€§æ˜¯ç»§æ‰¿è‡³Vector</p>\n</blockquote>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Stack</span>&lt;<span class=\"title\">E</span>&gt; <span class=\"keyword\">extends</span> <span class=\"title\">Vector</span>&lt;<span class=\"title\">E</span>&gt; </span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * Creates an empty Stack.</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">Stack</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// å°†å¯¹è±¡æ¨åˆ°å †å é¡¶éƒ¨ã€‚</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> E <span class=\"title\">push</span><span class=\"params\">(E item)</span> </span>&#123;</span><br><span class=\"line\">        addElement(item);</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">return</span> item;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// åˆ é™¤å †æ ˆé¡¶éƒ¨çš„å¯¹è±¡ï¼Œå¹¶è¿”å›è¯¥å¯¹è±¡ä½œä¸ºæ­¤å‡½æ•°çš„å€¼ã€‚</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">synchronized</span> E <span class=\"title\">pop</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        E       obj;</span><br><span class=\"line\">        <span class=\"keyword\">int</span>     len = size();</span><br><span class=\"line\"></span><br><span class=\"line\">        obj = peek();</span><br><span class=\"line\">        removeElementAt(len - <span class=\"number\">1</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">return</span> obj;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// æŸ¥çœ‹å †æ ˆé¡¶éƒ¨çš„å¯¹è±¡ï¼Œè€Œä¸å°†å…¶ä»å †æ ˆä¸­ç§»é™¤ã€‚</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">synchronized</span> E <span class=\"title\">peek</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">int</span>     len = size();</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (len == <span class=\"number\">0</span>)</span><br><span class=\"line\">            <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> EmptyStackException();</span><br><span class=\"line\">        <span class=\"keyword\">return</span> elementAt(len - <span class=\"number\">1</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// åˆ¤æ–­Stackæ˜¯å¦ä¸ºç©ºï¼Œä¹Ÿå°±æ˜¯é•¿åº¦ä¸º0çš„æ—¶å€™ã€‚</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">boolean</span> <span class=\"title\">empty</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> size() == <span class=\"number\">0</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// è¿”å›ä¸€ä¸ªå¯¹è±¡åœ¨å †æ ˆä¸Šçš„åŸºäº1çš„ä½ç½®ï¼Œæ‰¾ä¸åˆ°å°±è¿”å›-1ã€‚</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">synchronized</span> <span class=\"keyword\">int</span> <span class=\"title\">search</span><span class=\"params\">(Object o)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">int</span> i = lastIndexOf(o);</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (i &gt;= <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> size() - i;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> -<span class=\"number\">1</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/** use serialVersionUID from JDK 1.0.2 for interoperability */</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> <span class=\"keyword\">long</span> serialVersionUID = <span class=\"number\">1224463164541339165L</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"1ã€push\"><a href=\"#1ã€push\" class=\"headerlink\" title=\"1ã€push\"></a>1ã€push</h3><figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">test</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">    String[] arr = <span class=\"keyword\">new</span> String[]&#123;<span class=\"string\">\"a\"</span>,<span class=\"string\">\"b\"</span>,<span class=\"string\">\"c\"</span>,<span class=\"string\">\"d\"</span>&#125;;</span><br><span class=\"line\">    Stack stack = <span class=\"keyword\">new</span> Stack();</span><br><span class=\"line\">    stack.addAll(Arrays.asList(arr));</span><br><span class=\"line\">    System.out.println(stack);</span><br><span class=\"line\">    stack.push(<span class=\"string\">\"a\"</span>);</span><br><span class=\"line\">    System.out.println(stack);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">// è¾“å‡º</span></span><br><span class=\"line\">[a, b, c, d]</span><br><span class=\"line\">[a, b, c, d, a]</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"2ã€pop\"><a href=\"#2ã€pop\" class=\"headerlink\" title=\"2ã€pop\"></a>2ã€pop</h3><figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">test1</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">    String[] arr = <span class=\"keyword\">new</span> String[]&#123;<span class=\"string\">\"a\"</span>,<span class=\"string\">\"b\"</span>,<span class=\"string\">\"c\"</span>,<span class=\"string\">\"d\"</span>&#125;;</span><br><span class=\"line\">    Stack stack = <span class=\"keyword\">new</span> Stack();</span><br><span class=\"line\">    stack.addAll(Arrays.asList(arr));</span><br><span class=\"line\">    System.out.println(stack);</span><br><span class=\"line\">    stack.pop();</span><br><span class=\"line\">    System.out.println(stack);</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// è¾“å‡º</span></span><br><span class=\"line\">[a, b, c, d]</span><br><span class=\"line\">[a, b, c]</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"3ã€peek\"><a href=\"#3ã€peek\" class=\"headerlink\" title=\"3ã€peek\"></a>3ã€peek</h3><figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">test2</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">    String[] arr = <span class=\"keyword\">new</span> String[]&#123;<span class=\"string\">\"a\"</span>,<span class=\"string\">\"b\"</span>,<span class=\"string\">\"c\"</span>,<span class=\"string\">\"d\"</span>&#125;;</span><br><span class=\"line\">    Stack&lt;String&gt; stack = <span class=\"keyword\">new</span> Stack();</span><br><span class=\"line\">    stack.addAll(Arrays.asList(arr));</span><br><span class=\"line\">    System.out.println(stack);</span><br><span class=\"line\">    String str = stack.peek();</span><br><span class=\"line\">    System.out.println(str);</span><br><span class=\"line\">    System.out.println(stack);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">// è¾“å‡º</span></span><br><span class=\"line\">[a, b, c, d]</span><br><span class=\"line\">d</span><br><span class=\"line\">[a, b, c, d]</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"4ã€search\"><a href=\"#4ã€search\" class=\"headerlink\" title=\"4ã€search\"></a>4ã€search</h3><figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">test3</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">     String[] arr = <span class=\"keyword\">new</span> String[]&#123;<span class=\"string\">\"a\"</span>,<span class=\"string\">\"b\"</span>,<span class=\"string\">\"c\"</span>,<span class=\"string\">\"d\"</span>&#125;;</span><br><span class=\"line\">        Stack&lt;String&gt; stack = <span class=\"keyword\">new</span> Stack();</span><br><span class=\"line\">        stack.addAll(Arrays.asList(arr));</span><br><span class=\"line\">        System.out.println(stack);</span><br><span class=\"line\">        Integer index = stack.search(<span class=\"string\">\"a\"</span>);</span><br><span class=\"line\">        System.out.println(index);</span><br><span class=\"line\">        index = stack.search(<span class=\"string\">\"b\"</span>);</span><br><span class=\"line\">        System.out.println(index);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//è¾“å‡º</span></span><br><span class=\"line\">[a, b, c, d]</span><br><span class=\"line\"><span class=\"number\">4</span></span><br><span class=\"line\"><span class=\"number\">3</span></span><br></pre></td></tr></table></figure>","categories":["æºç åˆ†æ"],"tags":["Java","Java-Collecions-Framework","Stack"]},{"title":"æ·±å…¥æµ…å‡ºVector","url":"/posts/1064381917/","content":"<blockquote>\n<p>æœ¬ç« æ˜¯æ•´ç†çŸ¥è¯†å†…å®¹ï¼Œä¸ºå¼ºåŒ–çŸ¥è¯†é•¿æœŸæ›´æ–°ã€‚</p>\n</blockquote>\n<h2 id=\"Vector\"><a href=\"#Vector\" class=\"headerlink\" title=\"Vector\"></a>Vector</h2><p><img src=\"https://z201.oss-cn-shanghai.aliyuncs.com/JavaNote/Vector/Vector.png\"></p>\n<h2 id=\"æ¦‚è¿°\"><a href=\"#æ¦‚è¿°\" class=\"headerlink\" title=\"æ¦‚è¿°\"></a>æ¦‚è¿°</h2><ul>\n<li>Vectoræ˜¯Java Collection Franmeworkæˆå‘˜ã€‚</li>\n<li>åˆ—é˜Ÿå…è®¸æ·»åŠ é‡å¤å…ƒç´ </li>\n<li>åˆ—é˜Ÿå…è®¸nullçš„å­˜åœ¨</li>\n<li>åˆ—é˜Ÿä»0å¼€å§‹ï¼Œä¹Ÿå°±æ˜¯åˆ—é˜Ÿå¤´éƒ¨çš„ä¸‹æ ‡æ˜¯0ã€‚</li>\n<li>åˆ—é˜Ÿæ”¯æŒæ³›å‹ï¼Œè¿™æ ·å¯ä»¥é¿å…<code>ClassCastException</code>å¼‚å¸¸ã€‚</li>\n</ul>\n<h2 id=\"ä¸ArrayListçš„åŒºåˆ«\"><a href=\"#ä¸ArrayListçš„åŒºåˆ«\" class=\"headerlink\" title=\"ä¸ArrayListçš„åŒºåˆ«\"></a>ä¸ArrayListçš„åŒºåˆ«</h2><a id=\"more\"></a>\n\n<ul>\n<li>Vectorå’ŒArrayListå‡ ä¹å®Œå…¨é¡¹ç›®ï¼Œå‡ ä¸ªä¸ç›¸åŒçš„ç‰¹å¾åˆ†åˆ«æ˜¯ã€‚<ul>\n<li>Vectoræ˜¯åŒæ­¥çš„ï¼Œè‡ªå¸¦çš„æ–¹æ³•å¤§å¤šè¢«synchronizedä¿®é¥°ã€‚æ‰€ä»¥å¼€é”€æ¯”ArrayListå¤§å¾ˆå¤šã€‚</li>\n<li>Vectoré»˜è®¤æ¯æ¬¡æ‰©å®¹å¤§å°ï¼ŒArrayList æ˜¯1.5å€ï¼›Vectoræ˜¯2å€ã€‚</li>\n<li>å¯ä»¥æŒ‡å®šæ‰©å®¹ç³»æ•°ï¼Œä¸æŒ‡å®šå°±æ˜¯2å€ã€‚</li>\n</ul>\n</li>\n<li>ç›¸å¯¹ä¸ArrayListï¼ŒVectorç‰ºç‰²äº†æ€§èƒ½æ¢å–åŒæ­¥ï¼Œä½†æ˜¯å®é™…ä¸Šå¯ä»¥é€šè¿‡<code>Collections.synchronizedList(new ArrayList&lt;&gt;());</code>æ¥è¿”å›ä¸€ä¸ªçº¿ç¨‹å®‰å…¨çš„List,å¯ä»¥å¯ä»¥ä½¿ç”¨<code>concurrent</code>åŒ…ä¸‹CopyOnWriteArrayListç±»ã€‚</li>\n<li>æ‰€ä»¥ä¸€èˆ¬ä¸å»ºè®®ä½¿ç”¨Vectorã€‚</li>\n</ul>\n<h2 id=\"æºç åˆ†æä¸‹Vector\"><a href=\"#æºç åˆ†æä¸‹Vector\" class=\"headerlink\" title=\"æºç åˆ†æä¸‹Vector\"></a>æºç åˆ†æä¸‹Vector</h2><blockquote>\n<p>Vectorä¸­å¸¸é‡ä»¥åŠå˜é‡</p>\n</blockquote>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// é›†åˆä¸­çš„æ•°ç»„å…ƒç´ </span></span><br><span class=\"line\"><span class=\"keyword\">protected</span> Object[] elementData;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// é›†åˆä¸­æ•°ç»„å¤§å°ï¼Œè¿™é‡Œä¸æ˜¯ç”¨sizeã€‚</span></span><br><span class=\"line\"><span class=\"keyword\">protected</span> <span class=\"keyword\">int</span> elementCount;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// æ‰©å®¹çš„æ—¶å€™å¢é•¿æ•°é‡ï¼Œå¦‚æœæ˜¯0æˆ–è€…è´Ÿæ•°å°±æ˜¯2å€ã€‚</span></span><br><span class=\"line\"><span class=\"keyword\">protected</span> <span class=\"keyword\">int</span> capacityIncrement;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// å®¹å™¨çš„æœ€å¤§å®¹é‡</span></span><br><span class=\"line\"><span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> <span class=\"keyword\">int</span> MAX_ARRAY_SIZE = Integer.MAX_VALUE - <span class=\"number\">8</span>;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"1ã€å¦‚ä½•åˆ›å»ºVector\"><a href=\"#1ã€å¦‚ä½•åˆ›å»ºVector\" class=\"headerlink\" title=\"1ã€å¦‚ä½•åˆ›å»ºVector\"></a>1ã€å¦‚ä½•åˆ›å»ºVector</h3><figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">test</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">    String[] arr = <span class=\"keyword\">new</span> String[]&#123;<span class=\"string\">\"a\"</span> , <span class=\"string\">\"b\"</span> , <span class=\"string\">\"c\"</span> , <span class=\"string\">\"d\"</span>&#125;;</span><br><span class=\"line\">        Vector list = <span class=\"keyword\">new</span> Vector(<span class=\"number\">1</span> , <span class=\"number\">10</span>);</span><br><span class=\"line\">        list.addAll(Arrays.asList(arr));</span><br><span class=\"line\">        System.out.println(list);</span><br><span class=\"line\"></span><br><span class=\"line\">        Vector list1 = <span class=\"keyword\">new</span> Vector(<span class=\"number\">10</span>);</span><br><span class=\"line\">        list1.addAll(Arrays.asList(arr));</span><br><span class=\"line\">        System.out.println(list1);</span><br><span class=\"line\"></span><br><span class=\"line\">        Vector list2 = <span class=\"keyword\">new</span> Vector();</span><br><span class=\"line\">        list2.addAll(Arrays.asList(arr));</span><br><span class=\"line\">        System.out.println(list2);</span><br><span class=\"line\"></span><br><span class=\"line\">        Vector list3 = <span class=\"keyword\">new</span> Vector(Arrays.asList(arr));</span><br><span class=\"line\"></span><br><span class=\"line\">        System.out.println(list3);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>è¾“å‡º</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">[a, b, c, d]</span><br><span class=\"line\">[a, b, c, d]</span><br><span class=\"line\">[a, b, c, d]</span><br><span class=\"line\">[a, b, c, d]</span><br></pre></td></tr></table></figure>\n\n<p>è¿™é‡Œåˆ†åˆ«ä½¿ç”¨äº†Vectroå››ä¸ªæ„é€ æ–¹æ³•ã€‚</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//list</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">Vector</span><span class=\"params\">(<span class=\"keyword\">int</span> initialCapacity, <span class=\"keyword\">int</span> capacityIncrement)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">super</span>();</span><br><span class=\"line\">        <span class=\"comment\">//æŒ‡å®šå®¹å™¨åˆå§‹åŒ–å¤§å°å’Œæ‰©å®¹ç³»æ•°ã€‚</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (initialCapacity &lt; <span class=\"number\">0</span>)</span><br><span class=\"line\">            <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> IllegalArgumentException(<span class=\"string\">\"Illegal Capacity: \"</span>+</span><br><span class=\"line\">                                               initialCapacity);</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.elementData = <span class=\"keyword\">new</span> Object[initialCapacity];</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.capacityIncrement = capacityIncrement;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">//list1    </span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">Vector</span><span class=\"params\">(<span class=\"keyword\">int</span> initialCapacity)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"comment\">//æŒ‡å®šå®¹å™¨çš„åˆå§‹åŒ–å¤§å°ã€‚é»˜è®¤æ‰©å®¹ç³»æ•°0ã€‚</span></span><br><span class=\"line\">        <span class=\"keyword\">this</span>(initialCapacity, <span class=\"number\">0</span>);</span><br><span class=\"line\">&#125;    </span><br><span class=\"line\"><span class=\"comment\">//list2    </span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">Vector</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">// æŒ‡å®šå®¹å™¨çš„åˆå§‹åŒ–å¤§å°ä¸º10ã€‚</span></span><br><span class=\"line\">        <span class=\"keyword\">this</span>(<span class=\"number\">10</span>);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">//list2</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">Vector</span><span class=\"params\">(Collection&lt;? extends E&gt; c)</span> </span>&#123;</span><br><span class=\"line\">       <span class=\"comment\">//å°†ä¸€ä¸ªCollectionå®¹å™¨çš„å…ƒç´ éƒ½å¤åˆ¶è¿›æ¥</span></span><br><span class=\"line\">        elementData = c.toArray();</span><br><span class=\"line\">        elementCount = elementData.length;</span><br><span class=\"line\">        <span class=\"comment\">// c.toArray might (incorrectly) not return Object[] (see 6260652)</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (elementData.getClass() != Object[]<span class=\"class\">.<span class=\"keyword\">class</span>)</span></span><br><span class=\"line\"><span class=\"class\">            <span class=\"title\">elementData</span> </span>= Arrays.copyOf(elementData, elementCount, Object[]<span class=\"class\">.<span class=\"keyword\">class</span>)</span>;</span><br><span class=\"line\"> &#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"1ã€çœ‹ä¸‹æ‰©å®¹ä»£ç \"><a href=\"#1ã€çœ‹ä¸‹æ‰©å®¹ä»£ç \" class=\"headerlink\" title=\"1ã€çœ‹ä¸‹æ‰©å®¹ä»£ç \"></a>1ã€çœ‹ä¸‹æ‰©å®¹ä»£ç </h3><blockquote>\n<p>ç”±äºVectorçš„æ–¹æ³•å’ŒArrayListçš„æ–¹æ³•å¤ªå¤šç›¸ä¼¼ï¼Œè¿™é‡Œçœ‹çœ‹å¦‚ä½•æ‰©å®¹çš„ã€‚</p>\n</blockquote>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ä»addæ–¹æ³•å…¥å£çœ‹</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">synchronized</span> <span class=\"keyword\">boolean</span> <span class=\"title\">add</span><span class=\"params\">(E e)</span> </span>&#123;</span><br><span class=\"line\">        modCount++;</span><br><span class=\"line\">        ensureCapacityHelper(elementCount + <span class=\"number\">1</span>);  <span class=\"comment\">//åˆ¤æ–­æ‰©å®¹</span></span><br><span class=\"line\">        elementData[elementCount++] = e;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">true</span>;</span><br><span class=\"line\">    </span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title\">ensureCapacityHelper</span><span class=\"params\">(<span class=\"keyword\">int</span> minCapacity)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"comment\">// overflow-conscious code</span></span><br><span class=\"line\">        <span class=\"comment\">// å¦‚æœæœ€å°å®¹é‡ä¸å¤Ÿç”¨äº†å°±æ‰©å®¹</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (minCapacity - elementData.length &gt; <span class=\"number\">0</span>)</span><br><span class=\"line\">            grow(minCapacity);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title\">grow</span><span class=\"params\">(<span class=\"keyword\">int</span> minCapacity)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"comment\">// overflow-conscious code</span></span><br><span class=\"line\">        <span class=\"comment\">// å®¹å™¨åŸå§‹å¤§å°</span></span><br><span class=\"line\">        <span class=\"keyword\">int</span> oldCapacity = elementData.length;</span><br><span class=\"line\">        <span class=\"comment\">// å¦‚æœcapacityIncrement &gt; 0 æ–°å¤§å° å°±ç­‰äºoldCapacity + capacityIncrement åä¹‹å°±ç­‰äº oldCapacity + oldCapacity ç›¸å¯¹ä¸2å€äº†ã€‚</span></span><br><span class=\"line\">        <span class=\"keyword\">int</span> newCapacity = oldCapacity + ((capacityIncrement &gt; <span class=\"number\">0</span>) ?</span><br><span class=\"line\">                                         capacityIncrement : oldCapacity);</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (newCapacity - minCapacity &lt; <span class=\"number\">0</span>)</span><br><span class=\"line\">            newCapacity = minCapacity;</span><br><span class=\"line\">        <span class=\"comment\">// åˆ¤æ–­æ–°å¤§å°æ˜¯å¦è¶…è¿‡å¤§é™åˆ¶</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (newCapacity - MAX_ARRAY_SIZE &gt; <span class=\"number\">0</span>)</span><br><span class=\"line\">            newCapacity = hugeCapacity(minCapacity);</span><br><span class=\"line\">        <span class=\"comment\">// å¤åˆ¶ç”Ÿæˆæ–°çš„æ•°ç»„</span></span><br><span class=\"line\">        elementData = Arrays.copyOf(elementData, newCapacity);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">int</span> <span class=\"title\">hugeCapacity</span><span class=\"params\">(<span class=\"keyword\">int</span> minCapacity)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (minCapacity &lt; <span class=\"number\">0</span>) <span class=\"comment\">// overflow</span></span><br><span class=\"line\">            <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> OutOfMemoryError();</span><br><span class=\"line\">        <span class=\"keyword\">return</span> (minCapacity &gt; MAX_ARRAY_SIZE) ?</span><br><span class=\"line\">            Integer.MAX_VALUE :</span><br><span class=\"line\">            MAX_ARRAY_SIZE;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n","categories":["æºç åˆ†æ"],"tags":["Java","Java-Collecions-Framework","Vector"]},{"title":"Centos7-RabbitMQå•å®ä¾‹éƒ¨ç½²","url":"/posts/4038168856/","content":"<h1 id=\"å‚è€ƒæ–‡çŒ®\"><a href=\"#å‚è€ƒæ–‡çŒ®\" class=\"headerlink\" title=\"å‚è€ƒæ–‡çŒ®\"></a>å‚è€ƒæ–‡çŒ®</h1><ul>\n<li><a href=\"https://segmentfault.com/a/1190000010693696\" target=\"_blank\" rel=\"noopener\">CentOs7.3 æ­å»º RabbitMQ 3.6 å•æœºæœåŠ¡ä¸ä½¿ç”¨</a>   </li>\n</ul>\n<h2 id=\"RabbitMQä»‹ç»\"><a href=\"#RabbitMQä»‹ç»\" class=\"headerlink\" title=\"RabbitMQä»‹ç»\"></a>RabbitMQä»‹ç»</h2><blockquote>\n<p>RabbitMQ æ˜¯ä¸€ä¸ªç”± Erlang è¯­è¨€å¼€å‘çš„ AMQP çš„å¼€æºå®ç°ã€‚<br>AMQP ï¼šAdvanced Message Queueï¼Œé«˜çº§æ¶ˆæ¯é˜Ÿåˆ—åè®®ã€‚å®ƒæ˜¯åº”ç”¨å±‚åè®®çš„ä¸€ä¸ªå¼€æ”¾æ ‡å‡†ï¼Œä¸ºé¢å‘æ¶ˆæ¯çš„ä¸­é—´ä»¶è®¾è®¡ï¼ŒåŸºäºæ­¤åè®®çš„å®¢æˆ·ç«¯ä¸æ¶ˆæ¯ä¸­é—´ä»¶å¯ä¼ é€’æ¶ˆæ¯ï¼Œå¹¶ä¸å—äº§å“ã€å¼€å‘è¯­è¨€ç­‰æ¡ä»¶çš„é™åˆ¶ã€‚</p>\n</blockquote>\n<h3 id=\"èƒŒæ™¯\"><a href=\"#èƒŒæ™¯\" class=\"headerlink\" title=\"èƒŒæ™¯\"></a>èƒŒæ™¯</h3><blockquote>\n<p>RabbitMQ æ˜¯æµè¡Œçš„å¼€æºæ¶ˆæ¯é˜Ÿåˆ—ç³»ç»Ÿï¼Œæ˜¯ AMQPï¼ˆAdvanced Message Queuing Protocol é«˜çº§æ¶ˆæ¯é˜Ÿåˆ—åè®®ï¼‰çš„æ ‡å‡†å®ç°ï¼Œç”¨ erlang è¯­è¨€å¼€å‘ã€‚RabbitMQ å…·æœ‰è‰¯å¥½çš„æ€§èƒ½å’Œæ—¶æ•ˆæ€§ï¼ŒåŒæ—¶è¿˜èƒ½å¤Ÿéå¸¸å¥½çš„æ”¯æŒé›†ç¾¤å’Œè´Ÿè½½éƒ¨ç½²ï¼Œéå¸¸é€‚åˆåœ¨è¾ƒå¤§è§„æ¨¡çš„åˆ†å¸ƒå¼ç³»ç»Ÿä¸­ä½¿ç”¨ã€‚</p>\n</blockquote>\n<h2 id=\"å®‰è£…\"><a href=\"#å®‰è£…\" class=\"headerlink\" title=\"å®‰è£…\"></a>å®‰è£…</h2><blockquote>\n<p>RabbitMQ åŸºäºerlangã€‚éœ€è¦å…ˆå®‰è£…erlangç¯å¢ƒã€‚</p>\n</blockquote>\n<a id=\"more\"></a>\n\n<h3 id=\"ä¸€ã€å®‰è£…-erlang\"><a href=\"#ä¸€ã€å®‰è£…-erlang\" class=\"headerlink\" title=\"ä¸€ã€å®‰è£… erlang\"></a>ä¸€ã€å®‰è£… erlang</h3><figure class=\"highlight shell\"><table><tr><td class=\"code\"><pre><span class=\"line\">// ä¸‹è½½</span><br><span class=\"line\">[root@localhost backup]#  rpm -Uvh http://download.fedoraproject.org/pub/epel/7/x86_64/e/epel-release-7-8.noarch.rpm</span><br><span class=\"line\">// å®‰è£…</span><br><span class=\"line\">[root@localhost backup]#  yum install erlang</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"äºŒã€å®‰è£…RabbitMQ\"><a href=\"#äºŒã€å®‰è£…RabbitMQ\" class=\"headerlink\" title=\"äºŒã€å®‰è£…RabbitMQ\"></a>äºŒã€å®‰è£…RabbitMQ</h3><ul>\n<li>ä¸‹è½½rpm</li>\n</ul>\n<figure class=\"highlight shell\"><table><tr><td class=\"code\"><pre><span class=\"line\">[root@localhost backup]# wget http://www.rabbitmq.com/releases/rabbitmq-server/v3.6.6/rabbitmq-server-3.6.6-1.el7.noarch.rpm</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>å®‰è£…</li>\n</ul>\n<figure class=\"highlight shell\"><table><tr><td class=\"code\"><pre><span class=\"line\">[root@localhost backup]# yum install rabbitmq-server-3.6.6-1.el7.noarch.rpm</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>å¯åŠ¨</li>\n</ul>\n<figure class=\"highlight shell\"><table><tr><td class=\"code\"><pre><span class=\"line\">[root@localhost backup]# systemctl status rabbitmq-server.service</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>æ·»åŠ é…ç½®æ–‡ä»¶ </li>\n</ul>\n<figure class=\"highlight shell\"><table><tr><td class=\"code\"><pre><span class=\"line\">[root@localhost backup]# /etc/rabbitmq/rabbitmq.config</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><p>ç¼–è¾‘é…ç½®æ–‡ä»¶rabbitmq.configï¼Œå¦‚æœä¸æ¸…æ¥šä½ç½®å¯ä»¥æŸ¥çœ‹çŠ¶æ€ä¿¡æ¯ã€‚</p>\n<ul>\n<li>åˆ›å»ºrabbitmq.config</li>\n</ul>\n<figure class=\"highlight shell\"><table><tr><td class=\"code\"><pre><span class=\"line\">[root@localhost backup]# cd /etc/rabbitmq/</span><br><span class=\"line\">[root@localhost rabbitmq]# vi rabbitmq.config</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>ç¼–è¾‘ä¸€ä¸‹å†…å®¹</li>\n</ul>\n<figure class=\"highlight erlang\"><table><tr><td class=\"code\"><pre><span class=\"line\">[&#123;rabbit, [&#123;loopback_users, []&#125;]&#125;].</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>è¿™é‡Œçš„æ„æ€æ˜¯å¼€æ”¾ä½¿ç”¨ï¼Œrabbitmqé»˜è®¤åˆ›å»ºçš„ç”¨æˆ·guestï¼Œå¯†ç ä¹Ÿæ˜¯guestï¼Œè¿™ä¸ªç”¨æˆ·é»˜è®¤åªèƒ½æ˜¯æœ¬æœºè®¿é—®ï¼Œlocalhostæˆ–è€…127.0.0.1ï¼Œå¦‚æœéœ€è¦ä»å¤–éƒ¨è®¿é—®éœ€è¦æ·»åŠ ä¸Šé¢çš„é…ç½®ã€‚</li>\n</ul>\n</li>\n<li><p>é‡å¯æœåŠ¡</p>\n</li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">service rabbitmq-server restart</span><br></pre></td></tr></table></figure>\n\n<p><img src=\"https://z201.oss-cn-shanghai.aliyuncs.com/JavaNote/rabbitmq/success1.png\"></p>\n<ul>\n<li>ä¸Šå›¾è¯´æ˜å¯åŠ¨æˆåŠŸã€‚</li>\n<li>å¼€å¯UIç®¡ç†ã€‚</li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">[root@localhost rabbitmq]# &#x2F;sbin&#x2F;rabbitmq-plugins enable rabbitmq_management</span><br></pre></td></tr></table></figure>\n\n<p><img src=\"https://z201.oss-cn-shanghai.aliyuncs.com/JavaNote/rabbitmq/ui1.png\"></p>\n<ul>\n<li>é‡å¯ä¹‹åè®¿é—®  <a href=\"http://ip/\" target=\"_blank\" rel=\"noopener\">http://ip</a>:15672 å¯ä»¥çœ‹åˆ°ç•Œé¢äº†ã€‚å¸å·å¯†ç éƒ½æ˜¯guest</li>\n</ul>\n<p><img src=\"https://z201.oss-cn-shanghai.aliyuncs.com/JavaNote/rabbitmq/login.png\"></p>\n<h2 id=\"å¼‚å¸¸å¤„ç†\"><a href=\"#å¼‚å¸¸å¤„ç†\" class=\"headerlink\" title=\"å¼‚å¸¸å¤„ç†\"></a>å¼‚å¸¸å¤„ç†</h2><figure class=\"highlight shell\"><table><tr><td class=\"code\"><pre><span class=\"line\">[root@localhost rabbitmq]# systemctl status rabbitmq-server.service</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>Failed to start RabbitMQ broker é”™è¯¯ä¿¡æ¯ã€‚</li>\n</ul>\n<p><img src=\"https://z201.oss-cn-shanghai.aliyuncs.com/JavaNote/rabbitmq/failed1.png\"></p>\n","categories":["Linuxè¿ç»´"],"tags":["Centos7","Linux","RabbitMQ3.6"]},{"title":"Centos7.*-Rediså•å®ä¾‹éƒ¨ç½²","url":"/posts/809784495/","content":"<h1 id=\"Redis\"><a href=\"#Redis\" class=\"headerlink\" title=\"Redis\"></a>Redis</h1><blockquote>\n<p>Rediså…¨ç§°ï¼šRemote Dictionary Server(è¿œç¨‹æ•°æ®æœåŠ¡)ã€‚Redisæ˜¯ä¸€ä¸ªå¼€æºçš„ä½¿ç”¨ANSI Cè¯­è¨€ç¼–å†™ã€æ”¯æŒç½‘ç»œã€å¯åŸºäºå†…å­˜äº¦å¯æŒä¹…åŒ–çš„æ—¥å¿—å‹ã€Key-Valueæ•°æ®åº“ï¼Œå¹¶æä¾›å¤šç§è¯­è¨€çš„APIã€‚</p>\n</blockquote>\n<h2 id=\"å•å®ä¾‹å®‰è£…\"><a href=\"#å•å®ä¾‹å®‰è£…\" class=\"headerlink\" title=\"å•å®ä¾‹å®‰è£…\"></a>å•å®ä¾‹å®‰è£…</h2><blockquote>\n<p>åªæ˜¯å­¦ä¹ ä½¿ç”¨ä½¿ç”¨yum æ–¹å¼å®‰è£…æ¯”è¾ƒå¿«ã€‚è€Œä¸”centosè‡ªå¸¦å®˜æ–¹æºã€‚</p>\n</blockquote>\n<h3 id=\"yumå®‰è£…\"><a href=\"#yumå®‰è£…\" class=\"headerlink\" title=\"yumå®‰è£…\"></a>yumå®‰è£…</h3><ul>\n<li>yum install epel-release    â€“ä¸‹è½½fedoraçš„epelä»“åº“</li>\n<li>yum install redis    â€“ å®‰è£…redisæ•°æ®åº“</li>\n</ul>\n<a id=\"more\"></a>\n\n<h3 id=\"Redisæ•°æ®åº“é…ç½®\"><a href=\"#Redisæ•°æ®åº“é…ç½®\" class=\"headerlink\" title=\"Redisæ•°æ®åº“é…ç½®\"></a>Redisæ•°æ®åº“é…ç½®</h3><ul>\n<li>å¦‚æœè¦æƒ³é…ç½®<code>Redis</code>æ•°æ®åº“ï¼Œä¸»è¦çš„é…ç½®æ–‡ä»¶å°±æ˜¯<strong>redis.conf</strong>ï¼Œæ‰€æœ‰çš„é…ç½®é¡¹ä¸€å®šè¦åœ¨æ­¤å¤„å®Œæˆã€‚</li>\n</ul>\n<ul>\n<li><code>Redis</code>ä½œä¸ºä¸€ä¸ªå…·å¤‡æœ‰æŒä¹…åŒ–åŠŸèƒ½çš„ç¼“å­˜æ•°æ®åº“ï¼Œæ‰€ä»¥å…¶ä¸€å®šä¼šæœ‰ä¸€ä¸ªç”¨äºæ•°æ®å­˜å‚¨çš„ç›®å½•ï¼Œé‚£ä¹ˆä¸€èˆ¬åœ¨ <code>Redis</code> å¤„ç†çš„æ—¶å€™ä¼šæœ‰ä¸‰ç±»æ–‡ä»¶éœ€è¦åšä¿å­˜ï¼š<code>Redis</code>è¿è¡Œæ—¶çš„<code>pid</code>ã€<code>Redis</code>ç›¸å…³å¤„ç†æ—¥å¿—ã€<code>Redis</code>çš„æ•°æ®æ–‡ä»¶ï¼Œæ‰€ä»¥å»ºç«‹ä¸€ä¸ªç›®å½•ç”¨äºå­˜æ”¾è¿™äº›æ•°æ®ï¼š</li>\n<li>åœ¨ä¸€ä¸ªç›®å½•åŒæ—¶åˆ›å»ºå¤šä¸ªæ–‡ä»¶å¤¹</li>\n</ul>\n<figure class=\"highlight shell\"><table><tr><td class=\"code\"><pre><span class=\"line\">[root@localhost bin]# mkdir -p /opt/redis/&#123;run,logs,dbcache&#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>æ£€æŸ¥rediså®‰è£…ä½ç½®ï¼›ä½¿ç”¨whereiså‘½ä»¤åªèƒ½ç”¨äºç¨‹åºåçš„æœç´¢ã€‚</li>\n</ul>\n<figure class=\"highlight shell\"><table><tr><td class=\"code\"><pre><span class=\"line\">[root@localhost bin]# whereis redis</span><br><span class=\"line\">redis: /etc/redis.conf</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>ä¿®æ”¹<strong>redis.conf</strong>çš„é…ç½®æ–‡ä»¶ï¼š<code>vim /etc/redis.conf</code><ul>\n<li>é…ç½®<code>Redis</code>è¿è¡Œç«¯å£ï¼š<code>port 6379</code></li>\n<li>é…ç½®<code>Redis</code>æ˜¯å¦ä¸ºåå°è¿è¡Œï¼š<code>daemonize yes</code></li>\n<li>è®¾ç½®è¿›ç¨‹ä¿å­˜è·¯å¾„ï¼š<code>pidfile &quot;/opt/redis/run/redis_6379.pid&quot;</code></li>\n<li>è®¾ç½®æ—¥å¿—ä¿å­˜ç›®å½•ï¼š<code>logfile &quot;/opt/redis/logs/redis.log&quot;</code></li>\n<li>è¯¥<code>Redis</code>æ”¯æŒçš„æ•°æ®åº“ä¸ªæ•°ï¼š<code>databases 16</code></li>\n<li>ä¿å­˜æ•°æ®æ–‡ä»¶ç›®å½•ï¼š<code>dir /opt/redis/dbcache</code></li>\n</ul>\n</li>\n</ul>\n<p>3.å¯åŠ¨RedisæœåŠ¡ï¼š<code>/usr/bin/redis-server /etc/redis.conf</code></p>\n<ul>\n<li>å¦‚æœè¦å¯åŠ¨<code>Redis-Server</code>å°±å¿…é¡»æ˜ç¡®çš„æŒ‡æ˜è¦ä½¿ç”¨çš„<code>redis.conf</code>é…ç½®æ–‡ä»¶ï¼›</li>\n</ul>\n<p>4.<code>Redis</code>å¯åŠ¨ä¼šå ç”¨<code>6379</code>çš„ç«¯å£ï¼Œæ‰€ä»¥æŸ¥çœ‹ç«¯å£ï¼š<code>netstat -nptl</code>ï¼›</p>\n<ul>\n<li>æ­¤æ—¶å‘ç°Redisè¿è¡Œçš„æ—¶å€™æ˜¯åœ¨6379æœ¬æœºä¸‹æ‰å¯ä»¥æ‰§è¡Œï¼Œæ‰€ä»¥æ— æ³•å¯¹å¤–æä¾›æœåŠ¡ï¼›</li>\n</ul>\n<h3 id=\"å®‰å…¨è¨­ç½®\"><a href=\"#å®‰å…¨è¨­ç½®\" class=\"headerlink\" title=\"å®‰å…¨è¨­ç½®\"></a>å®‰å…¨è¨­ç½®</h3><p>Redisçš„é…ç½®æ–‡ä»¶é»˜è®¤åœ¨<code>/etc/redis.conf</code>ï¼Œæ‰¾åˆ°å¦‚ä¸‹è¡Œï¼š</p>\n<figure class=\"highlight sh\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#requirepass foobared</span></span><br></pre></td></tr></table></figure>\n\n<p>å»æ‰å‰é¢çš„æ³¨é‡Šï¼Œå¹¶ä¿®æ”¹ä¸ºæ‰€éœ€è¦çš„å¯†ç ï¼š</p>\n<figure class=\"highlight sh\"><table><tr><td class=\"code\"><pre><span class=\"line\">requirepass myPassword ï¼ˆå…¶ä¸­myPasswordå°±æ˜¯è¦è®¾ç½®çš„å¯†ç ï¼‰</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"WARNING\"><a href=\"#WARNING\" class=\"headerlink\" title=\"WARNING\"></a>WARNING</h3><p><img src=\"https://z201.oss-cn-shanghai.aliyuncs.com/JavaNote/redis/WARNING1.png\"></p>\n<ul>\n<li>å®ƒæ˜¯ å†…å­˜åˆ†é…ç­–ç•¥ï¼›å¯é€‰å€¼ï¼š0ã€1ã€2ã€‚</li>\n<li>0ï¼Œ è¡¨ç¤ºå†…æ ¸å°†æ£€æŸ¥æ˜¯å¦æœ‰è¶³å¤Ÿçš„å¯ç”¨å†…å­˜ä¾›åº”ç”¨è¿›ç¨‹ä½¿ç”¨ï¼›å¦‚æœæœ‰è¶³å¤Ÿçš„å¯ç”¨å†…å­˜ï¼Œå†…å­˜ç”³è¯·å…è®¸ï¼›å¦åˆ™ï¼Œå†…å­˜ç”³è¯·å¤±è´¥ï¼Œå¹¶æŠŠé”™è¯¯è¿”å›ç»™åº”ç”¨è¿›ç¨‹ã€‚</li>\n</ul>\n<ul>\n<li>1ï¼Œ è¡¨ç¤ºå†…æ ¸å…è®¸åˆ†é…æ‰€æœ‰çš„ç‰©ç†å†…å­˜ï¼Œè€Œä¸ç®¡å½“å‰çš„å†…å­˜çŠ¶æ€å¦‚ä½•ã€‚</li>\n<li>2ï¼Œ è¡¨ç¤ºå†…æ ¸å…è®¸åˆ†é…è¶…è¿‡æ‰€æœ‰ç‰©ç†å†…å­˜å’Œäº¤æ¢ç©ºé—´æ€»å’Œçš„å†…å­˜</li>\n</ul>\n<p><strong>è§£å†³æ–¹æ³•ï¼š</strong></p>\n<blockquote>\n<p>å¾ˆç®€å•ï¼ŒæŒ‰æç¤ºçš„æ“ä½œï¼ˆå°†vm.overcommit_memory è®¾ä¸º1 å³å¯ï¼›æœ‰ä¸‰ç§æ–¹å¼ä¿®æ”¹å†…æ ¸å‚æ•°ï¼Œä½†è¦æœ‰rootæƒé™ï¼š</p>\n</blockquote>\n<ul>\n<li>ç¼–è¾‘/etc/sysctl.conf ï¼Œæ”¹vm.overcommit_memory=1ï¼Œç„¶åsysctl -p ä½¿é…ç½®æ–‡ä»¶ç”Ÿæ•ˆ</li>\n<li>sysctl vm.overcommit_memory=1</li>\n<li>echo 1 &gt; /proc/sys/vm/overcommit_memory</li>\n</ul>\n<p>ç¬¬ä¸€ç§æ°¸ä¹…æœ‰æ•ˆã€‚</p>\n<h2 id=\"åŸºæœ¬æ“ä½œ\"><a href=\"#åŸºæœ¬æ“ä½œ\" class=\"headerlink\" title=\"åŸºæœ¬æ“ä½œ\"></a>åŸºæœ¬æ“ä½œ</h2><ul>\n<li>å¼€å¯æ–¹å¼</li>\n</ul>\n<figure class=\"highlight shell\"><table><tr><td class=\"code\"><pre><span class=\"line\">[root@localhost bin]# redis-server /etc/redis.conf</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>å¼€å¯åå°å¯åŠ¨ # åœ¨redis.conf  è®¾ç½®  daemonize yes</li>\n</ul>\n<figure class=\"highlight shell\"><table><tr><td class=\"code\"><pre><span class=\"line\">daemonize on</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>æŸ¥çœ‹redisæ˜¯å¦å¼€å¯</li>\n</ul>\n<figure class=\"highlight shell\"><table><tr><td class=\"code\"><pre><span class=\"line\">[root@localhost bin]# ps -ef | grep redis</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>è¿›å…¥redisæœåŠ¡</li>\n</ul>\n<figure class=\"highlight shell\"><table><tr><td class=\"code\"><pre><span class=\"line\">[root@localhost bin]# redis-cli</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>å…³é—­redisæœåŠ¡</li>\n</ul>\n<figure class=\"highlight shell\"><table><tr><td class=\"code\"><pre><span class=\"line\">[root@localhost bin]# redis-cli  shutdown</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><p>åœ¨è®¾ç½®è®¤è¯å¯†ç ä¹‹åå…³é—­éœ€è¦å…ˆè®¤è¯</p>\n<ul>\n<li>è‹¥ä¸è®¤è¯ä¼šæŠ›å‡ºRedis (error) NOAUTH Authentication requiredã€‚</li>\n</ul>\n</li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">[root@localhost bin]# redis-cli</span><br><span class=\"line\">&gt; auth &quot;password&quot;</span><br><span class=\"line\">OK </span><br><span class=\"line\">&gt; shutdown</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>æ˜¾ç¤ºOK è¡¨ç¤ºè®¤è¯æˆåŠŸã€‚</li>\n</ul>\n","categories":["Linuxè¿ç»´"],"tags":["Redis","Centos7","Linux"]},{"title":"Centos7.*-Mongodb3.4å•å®ä¾‹éƒ¨ç½²","url":"/posts/1440395111/","content":"<blockquote>\n<p>mongodbçš„å®‰è£…æ–¹å¼æ¯”è¾ƒç®€å•ï¼Œä¸‹é¢æ¼”ç¤ºåœ¨CentOS7ä¸Šç”¨yumæ–¹å¼å®‰è£…ã€‚</p>\n</blockquote>\n<h2 id=\"å‚è€ƒæ–‡çŒ®\"><a href=\"#å‚è€ƒæ–‡çŒ®\" class=\"headerlink\" title=\"å‚è€ƒæ–‡çŒ®\"></a>å‚è€ƒæ–‡çŒ®</h2><ul>\n<li>ä¸‹è½½åœ°å€ <a href=\"https://www.mongodb.com/download-center#community\" target=\"_blank\" rel=\"noopener\">https://www.mongodb.com/download-center#community</a></li>\n<li>åœ¨çº¿æ–‡æ¡£ <a href=\"https://docs.mongodb.com/manual/introduction/\" target=\"_blank\" rel=\"noopener\">https://docs.mongodb.com/manual/introduction/</a></li>\n</ul>\n<h2 id=\"ä½¿ç”¨yumæ–¹å¼å®‰è£…\"><a href=\"#ä½¿ç”¨yumæ–¹å¼å®‰è£…\" class=\"headerlink\" title=\"ä½¿ç”¨yumæ–¹å¼å®‰è£…\"></a>ä½¿ç”¨yumæ–¹å¼å®‰è£…</h2><blockquote>\n<p>ä»…ä¾›å­¦ä¹ å‚è€ƒï¼Œè‹¥åœ¨ç”Ÿäº§ç¯å¢ƒä¸­éƒ¨ç½²è¯·æ³¨æ„ä¿®æ”¹å®‰å…¨é…ç½®ã€‚</p>\n</blockquote>\n<ul>\n<li>æ•´ä¸ªmongodbï¼ˆç¤¾åŒºç‰ˆï¼‰åŒ…å«å¦‚ä¸‹è½¯ä»¶</li>\n</ul>\n<table>\n<thead>\n<tr>\n<th>è½¯ä»¶åç§°</th>\n<th>æè¿°</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>mongodb-org-server</td>\n<td>åŒ…å«mongodå®ˆæŠ¤ç¨‹åºå’Œå…³è”çš„é…ç½®å’Œinitè„šæœ¬</td>\n</tr>\n<tr>\n<td>mongodb-org-mongos</td>\n<td>åŒ…å«mongoså®ˆæŠ¤ç¨‹åº</td>\n</tr>\n<tr>\n<td>mongodb-org-shell</td>\n<td>åŒ…å«mongo shellï¼Œå®ƒæ˜¯ä¸€ä¸ªè¿æ¥mongodbçš„å‘½ä»¤è¡Œå®¢æˆ·ç«¯ï¼Œå…è®¸ç”¨æˆ·ç›´æ¥è¾“å…¥nosqlè¯­æ³•ç®¡ç†æ•°æ®åº“ã€‚</td>\n</tr>\n<tr>\n<td>mongodb-org-tools</td>\n<td>åŒ…å«ä»¥ä¸‹å·¥å…·çš„MongoDBï¼šæ•°æ®å¯¼å…¥ã€å¯¼å‡ºã€å¤‡ä»½ã€æ¢å¤ç­‰ç­‰</td>\n</tr>\n</tbody></table>\n<ul>\n<li>åˆ›å»ºyumæºæ–‡ä»¶</li>\n</ul>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">vim /etc/yum.repos.d/mongodb-org-3.4.repo1</span><br></pre></td></tr></table></figure>\n\n<a id=\"more\"></a>\n\n<ul>\n<li>æŠŠä¸‹é¢çš„å†…å®¹å¤åˆ¶åˆ°ä¸Šé¢çš„æ–‡ä»¶ä¸­</li>\n</ul>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">[mongodb-org-3.4]</span><br><span class=\"line\">name=MongoDB Repository</span><br><span class=\"line\">baseurl=https://repo.mongodb.org/yum/redhat/<span class=\"variable\">$releasever</span>/mongodb-org/3.4/x86_64/</span><br><span class=\"line\">gpgcheck=1</span><br><span class=\"line\">enabled=1</span><br><span class=\"line\">gpgkey=https://www.mongodb.org/static/pgp/server-3.4.asc123456</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>å¯åŠ¨yumå‘½ä»¤å¼€å§‹å®‰è£…</li>\n</ul>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">yum install -y mongodb-org1</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>å¦‚æœä½¿ç”¨SELinuxï¼Œåˆ™å¿…é¡»é…ç½®SELinuxï¼Œä»¥å…è®¸åœ¨åŸºäºRed Hat Linuxçš„ç³»ç»Ÿï¼ˆRed Hat Enterprise Linuxæˆ–CentOS Linuxï¼‰ä¸Šå¯åŠ¨MongoDBã€‚</li>\n</ul>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">vim /etc/selinux/config</span><br><span class=\"line\"><span class=\"comment\">#åœ¨æ‰“å¼€çš„æ–‡ä»¶ä¸­å°†å€¼è®¾ç½®ä¸ºdisabled</span></span><br><span class=\"line\">SELINUX=disabled</span><br></pre></td></tr></table></figure>\n<h2 id=\"å…³é—­THP\"><a href=\"#å…³é—­THP\" class=\"headerlink\" title=\"å…³é—­THP\"></a>å…³é—­THP</h2><blockquote>\n<p>è‡ªCentOS6ç‰ˆæœ¬å¼€å§‹å¼•å…¥äº†Transparent Huge Pages(THP)ï¼Œä»CentOS7ç‰ˆæœ¬å¼€å§‹ï¼Œè¯¥ç‰¹æ€§é»˜è®¤å°±ä¼šå¯ç”¨ã€‚å°½ç®¡THPçš„æœ¬æ„æ˜¯ä¸ºæå‡å†…å­˜çš„æ€§èƒ½ï¼Œä¸è¿‡æŸäº›æ•°æ®åº“å‚å•†è¿˜æ˜¯å»ºè®®ç›´æ¥å…³é—­THP(æ¯”å¦‚è¯´Oracleã€MariaDBã€MongoDBç­‰)ï¼Œå¦åˆ™å¯èƒ½ä¼šå¯¼è‡´æ€§èƒ½å‡ºç°ä¸‹é™ã€‚</p>\n</blockquote>\n<p>é¦–å…ˆæ£€æŸ¥THPçš„å¯ç”¨çŠ¶æ€ï¼šä¸å…³é—­mongoå¯åŠ¨çš„æ—¶å€™ä¼šè­¦å‘Šã€‚</p>\n<figure class=\"highlight sh\"><table><tr><td class=\"code\"><pre><span class=\"line\">// æ£€æŸ¥THPçŠ¶æ€</span><br><span class=\"line\">cat /sys/kernel/mm/transparent_hugepage/defrag</span><br><span class=\"line\">[always] madvise never</span><br><span class=\"line\">cat /sys/kernel/mm/transparent_hugepage/enabled</span><br><span class=\"line\">[always] madvise never</span><br><span class=\"line\">è¿™ä¸ªçŠ¶æ€å°±è¯´æ˜éƒ½æ˜¯å¯ç”¨çš„ã€‚</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight sh\"><table><tr><td class=\"code\"><pre><span class=\"line\">//ç¦ç”¨THP,ç¼–è¾‘rc.localæ–‡ä»¶</span><br><span class=\"line\">vim /etc/rc.d/rc.local</span><br><span class=\"line\">å¢åŠ ä¸‹åˆ—å†…å®¹ï¼š</span><br><span class=\"line\"><span class=\"keyword\">if</span> <span class=\"built_in\">test</span> -f /sys/kernel/mm/transparent_hugepage/enabled; <span class=\"keyword\">then</span></span><br><span class=\"line\">    <span class=\"built_in\">echo</span> never &gt; /sys/kernel/mm/transparent_hugepage/enabled</span><br><span class=\"line\"><span class=\"keyword\">fi</span></span><br><span class=\"line\"><span class=\"keyword\">if</span> <span class=\"built_in\">test</span> -f /sys/kernel/mm/transparent_hugepage/defrag; <span class=\"keyword\">then</span></span><br><span class=\"line\">    <span class=\"built_in\">echo</span> never &gt; /sys/kernel/mm/transparent_hugepage/defrag</span><br><span class=\"line\"><span class=\"keyword\">fi</span></span><br></pre></td></tr></table></figure>\n\n<p>  ç¼–è¾‘å®Œäº†éœ€è¦é‡å¯æœåŠ¡å™¨æ‰èƒ½ç”Ÿæ•ˆã€‚</p>\n<h2 id=\"é…ç½®ä¿¡æ¯\"><a href=\"#é…ç½®ä¿¡æ¯\" class=\"headerlink\" title=\"é…ç½®ä¿¡æ¯\"></a>é…ç½®ä¿¡æ¯</h2><h3 id=\"mongoé…ç½®æ–‡ä»¶æ“ä½œ\"><a href=\"#mongoé…ç½®æ–‡ä»¶æ“ä½œ\" class=\"headerlink\" title=\"mongoé…ç½®æ–‡ä»¶æ“ä½œ\"></a>mongoé…ç½®æ–‡ä»¶æ“ä½œ</h3><ul>\n<li><p>å®‰è£…å®Œåå¯»æ‰¾ç›¸å…³é…ç½®ä¿¡æ¯</p>\n</li>\n<li><p>whereis mongd</p>\n</li>\n<li><pre><code class=\"bash\">mongod: /usr/bin/mongod /etc/mongod.conf /usr/share/man/man1/mongod.1\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">- mongd.conf å°±æ˜¯é…ç½®æ–‡ä»¶ã€‚</span><br><span class=\"line\"></span><br><span class=\"line\">- æ‰“å¼€å°±å¯ä»¥çœ‹åˆ°ç›¸å…³é…ç½®ä¿¡æ¯ã€‚</span><br><span class=\"line\"></span><br><span class=\"line\">### mongdbæƒé™æ“ä½œé…ç½®ä¿¡æ¯</span><br><span class=\"line\"></span><br><span class=\"line\">#### Built-In Rolesï¼ˆå†…ç½®è§’è‰²ï¼‰ï¼š</span><br><span class=\"line\"></span><br><span class=\"line\">- æ•°æ®åº“ç”¨æˆ·è§’è‰²ï¼š</span><br><span class=\"line\">  - readã€readWrite;</span><br><span class=\"line\">- æ•°æ®åº“ç®¡ç†è§’è‰²ï¼š</span><br><span class=\"line\">  - dbAdminã€dbOwnerã€userAdminï¼›</span><br><span class=\"line\">- é›†ç¾¤ç®¡ç†è§’è‰²ï¼š</span><br><span class=\"line\">  - clusterAdminã€clusterManagerã€clusterMonitorã€hostManagerï¼›</span><br><span class=\"line\">- å¤‡ä»½æ¢å¤è§’è‰²ï¼š</span><br><span class=\"line\">  - backupã€restoreï¼›</span><br><span class=\"line\">- æ‰€æœ‰æ•°æ®åº“è§’è‰²ï¼š</span><br><span class=\"line\">  - readAnyDatabaseã€readWriteAnyDatabaseã€userAdminAnyDatabaseã€dbAdminAnyDatabase</span><br><span class=\"line\">- è¶…çº§ç”¨æˆ·è§’è‰²ï¼š</span><br><span class=\"line\">  - root  </span><br><span class=\"line\">    - è¿™é‡Œè¿˜æœ‰å‡ ä¸ªè§’è‰²é—´æ¥æˆ–ç›´æ¥æä¾›äº†ç³»ç»Ÿè¶…çº§ç”¨æˆ·çš„è®¿é—®ï¼ˆdbOwner ã€userAdminã€userAdminAnyDatabaseï¼‰</span><br><span class=\"line\">- å†…éƒ¨è§’è‰²ï¼š</span><br><span class=\"line\">  - __system</span><br><span class=\"line\"></span><br><span class=\"line\">#### å…·ä½“è§’è‰²ï¼š</span><br><span class=\"line\"></span><br><span class=\"line\">- Readï¼š</span><br><span class=\"line\">  - å…è®¸ç”¨æˆ·è¯»å–æŒ‡å®šæ•°æ®åº“ã€‚</span><br><span class=\"line\">- readWriteï¼š</span><br><span class=\"line\">  - å…è®¸ç”¨æˆ·è¯»å†™æŒ‡å®šæ•°æ®åº“ã€‚</span><br><span class=\"line\">- dbAdminï¼š</span><br><span class=\"line\">  - å…è®¸ç”¨æˆ·åœ¨æŒ‡å®šæ•°æ®åº“ä¸­æ‰§è¡Œç®¡ç†å‡½æ•°ï¼Œå¦‚ç´¢å¼•åˆ›å»ºã€åˆ é™¤ï¼ŒæŸ¥çœ‹ç»Ÿè®¡æˆ–è®¿é—®system.profileã€‚</span><br><span class=\"line\">- userAdminï¼š</span><br><span class=\"line\">  - å…è®¸ç”¨æˆ·å‘system.usersé›†åˆå†™å…¥ï¼Œå¯ä»¥æ‰¾æŒ‡å®šæ•°æ®åº“é‡Œåˆ›å»ºã€åˆ é™¤å’Œç®¡ç†ç”¨æˆ·ã€‚</span><br><span class=\"line\">- clusterAdminï¼š</span><br><span class=\"line\">  - åªåœ¨adminæ•°æ®åº“ä¸­å¯ç”¨ï¼Œèµ‹äºˆç”¨æˆ·æ‰€æœ‰åˆ†ç‰‡å’Œå¤åˆ¶é›†ç›¸å…³å‡½æ•°çš„ç®¡ç†æƒé™ã€‚</span><br><span class=\"line\">- readAnyDatabaseï¼š</span><br><span class=\"line\">  - åªåœ¨adminæ•°æ®åº“ä¸­å¯ç”¨ï¼Œèµ‹äºˆç”¨æˆ·æ‰€æœ‰æ•°æ®åº“çš„è¯»æƒé™ã€‚</span><br><span class=\"line\">- readWriteAnyDatabaseï¼š</span><br><span class=\"line\">  - åªåœ¨adminæ•°æ®åº“ä¸­å¯ç”¨ï¼Œèµ‹äºˆç”¨æˆ·æ‰€æœ‰æ•°æ®åº“çš„è¯»å†™æƒé™ã€‚</span><br><span class=\"line\">- userAdminAnyDatabaseï¼š</span><br><span class=\"line\">  - åªåœ¨adminæ•°æ®åº“ä¸­å¯ç”¨ï¼Œèµ‹äºˆç”¨æˆ·æ‰€æœ‰æ•°æ®åº“çš„userAdminæƒé™ã€‚</span><br><span class=\"line\">- dbAdminAnyDatabaseï¼š</span><br><span class=\"line\">  - åªåœ¨adminæ•°æ®åº“ä¸­å¯ç”¨ï¼Œèµ‹äºˆç”¨æˆ·æ‰€æœ‰æ•°æ®åº“çš„dbAdminæƒé™ã€‚</span><br><span class=\"line\">- rootï¼š</span><br><span class=\"line\">  - åªåœ¨adminæ•°æ®åº“ä¸­å¯ç”¨ã€‚è¶…çº§è´¦å·ï¼Œè¶…çº§æƒé™ã€‚</span><br><span class=\"line\"></span><br><span class=\"line\">### å¼€å¯ç”¨æˆ·æƒé™</span><br><span class=\"line\"></span><br><span class=\"line\">&gt; æç¤ºï¼šå³ä¾¿è®¾ç½®äº†è´¦å·å¯†ç ä¾ç„¶å¯ä»¥ä¸é€šè¿‡å¯†ç é“¾æ¥ï¼Œéœ€è¦åœ¨mongo å¯åŠ¨çš„æ—¶å€™å¼€å¯è®¤è¯ã€‚</span><br><span class=\"line\"></span><br><span class=\"line\">- åˆ›å»ºç”¨æˆ·</span><br><span class=\"line\">  - æ³¨æ„è¯»å†™ç”¨æˆ·çš„æƒé™è¯·ä½¿ç”¨readWriteã€‚</span><br><span class=\"line\"></span><br><span class=\"line\">&#96;&#96;&#96;json</span><br><span class=\"line\">show dbs; </span><br><span class=\"line\">&#x2F;&#x2F;æ˜¾ç¤ºæ•°æ®åº“åˆ—è¡¨</span><br><span class=\"line\"></span><br><span class=\"line\">use admin; </span><br><span class=\"line\"> &#x2F;&#x2F;è¿›å…¥admin collections</span><br><span class=\"line\"></span><br><span class=\"line\">db.createUser(&#123;&quot;user&quot;:&quot;root&quot;,&quot;pwd&quot;:&quot;z201.com&quot;,&quot;roles&quot;:[&#123;&quot;role&quot;:&quot;root&quot;,&quot;db&quot;:&quot;admin&quot;&#125;]&#125;) </span><br><span class=\"line\">&#x2F;&#x2F;åˆ›å»ºè¶…çº§ç®¡ç†å‘˜rootåº“ç®¡ç†è´¦å·</span><br><span class=\"line\"></span><br><span class=\"line\">db.auth(&quot;root&quot;,&quot;eoner.com&quot;)</span><br><span class=\"line\">&#x2F;&#x2F;æ ¡éªŒè´¦å·æ˜¯å¦åŒ¹é…</span><br><span class=\"line\">1 </span><br><span class=\"line\">&#x2F;&#x2F;æ˜¾ç¤º1è¡¨ç¤ºåŒ¹é…æˆåŠŸ</span><br><span class=\"line\"></span><br><span class=\"line\">user yisheng; </span><br><span class=\"line\">&#x2F;&#x2F;è¿›å…¥yisheng collections,å¦‚æœæ²¡æœ‰è¯¥æ•°æ®åº“ä¼šè‡ªå·±åˆ›å»ºä¸€ä¸ªï¼›ä½†æ˜¯å¦‚æœä¸åœ¨é‡Œé¢æ’å…¥æ•°æ®æ˜¯ä¸æ˜¾ç¤ºå‡ºæ¥çš„ã€‚</span><br><span class=\"line\"></span><br><span class=\"line\">db.createUser(&#123;&quot;user&quot;:&quot;yisheng&quot;,&quot;pwd&quot;:&quot;z201.com&quot;,&quot;roles&quot;:[&#123;&quot;role&quot;:&quot;readWrite&quot;,&quot;db&quot;:&quot;yisheng&quot;&#125;]&#125;)</span><br><span class=\"line\">&#x2F;&#x2F;åˆ›å»ºæ•°æ®åº“ç®¡ç†å‘˜</span><br><span class=\"line\"></span><br><span class=\"line\">db.auth(&quot;yisheng&quot;,&quot;z201.com&quot;)</span><br><span class=\"line\">1 </span><br><span class=\"line\">&#x2F;&#x2F;æ˜¾ç¤º1è¡¨ç¤ºåŒ¹é…æˆåŠŸ</span><br></pre></td></tr></table></figure></code></pre>\n</li>\n<li><p>ä¿®æ”¹å¯†ç </p>\n</li>\n</ul>\n<figure class=\"highlight\"><table><tr><td class=\"code\"><pre><span class=\"line\">db.changeUserPassword('root','z201.com');</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>æ•°æ®åº“å¼€å¯è®¤è¯ï¼Œæ³¨æ„è¯·è¿›å…¥æ•°æ®åº“ä¸­åœ¨æ‰§è¡Œã€‚</li>\n</ul>\n<figure class=\"highlight\"><table><tr><td class=\"code\"><pre><span class=\"line\">security:</span><br><span class=\"line\">    authorization:true</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"åŸºç¡€æ“ä½œ\"><a href=\"#åŸºç¡€æ“ä½œ\" class=\"headerlink\" title=\"åŸºç¡€æ“ä½œ\"></a>åŸºç¡€æ“ä½œ</h2><p>å¯åŠ¨</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">systemctl start mongod</span><br></pre></td></tr></table></figure>\n\n<p>é‡å¯</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">systemctl restart mongod</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><p>å¦‚æœæ— æ•ˆ</p>\n<ul>\n<li>use admin</li>\n<li>db.shutdownServer();</li>\n</ul>\n</li>\n</ul>\n<p>åœæ­¢</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">systemctl stop mongod</span><br></pre></td></tr></table></figure>\n\n<p>è®¤è¯æ¨¡å¼å¯åŠ¨</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">nohup mongod --auth --port 27017 --dbpath /var/lib/mongo/ &amp;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>/var/bin/mongd å¯ä»¥åœ¨mongod.confä¸­æŸ¥çœ‹ã€‚</li>\n</ul>\n<h2 id=\"å®¢æˆ·ç«¯è¿æ¥å¤±è´¥é—®é¢˜ï¼š\"><a href=\"#å®¢æˆ·ç«¯è¿æ¥å¤±è´¥é—®é¢˜ï¼š\" class=\"headerlink\" title=\"å®¢æˆ·ç«¯è¿æ¥å¤±è´¥é—®é¢˜ï¼š\"></a>å®¢æˆ·ç«¯è¿æ¥å¤±è´¥é—®é¢˜ï¼š</h2><blockquote>\n<p><code>SCRAM-SHA-1 authentication failed ``for</code> <code>root</code></p>\n</blockquote>\n<ul>\n<li><p>mongodbåŠ å…¥äº†SCRAM-SHA-1æ ¡éªŒæ–¹å¼ï¼Œéœ€è¦ç¬¬ä¸‰æ–¹å·¥å…·é…åˆè¿›è¡ŒéªŒè¯ã€‚å¦‚æœç›´æ¥ç”¨ä»£ç è¿æ¥ä¼šå‡ºé—®é¢˜ã€‚</p>\n</li>\n<li><p>å¦‚æœå®¢æˆ·ç«¯æ²¡æœ‰SCRAM-SHA-1çš„æ ¡éªŒæ–¹å¼ï¼Œå¯ä»¥é€‰æ‹©å°†authverison ç‰ˆæœ¬é™ä½ï¼›ä¸ä½¿ç”¨è¯¥è®¤è¯æ–¹å¼ï¼ŒåŒæ—¶å·¥å…·è¿æ¥çš„æ—¶å€™éœ€è¦æ‰‹åŠ¨ä¿®æ”¹é»˜è®¤çš„è®¤è¯æ–¹å¼ã€‚</p>\n</li>\n<li><p>å‚è€ƒæ–‡çŒ®</p>\n<ul>\n<li><a href=\"https://yq.aliyun.com/articles/16919\" target=\"_blank\" rel=\"noopener\">MongoDBä¸­ä½¿ç”¨çš„SCRAM-SHA1è®¤è¯æœºåˆ¶</a></li>\n</ul>\n</li>\n</ul>\n<h3 id=\"CURD\"><a href=\"#CURD\" class=\"headerlink\" title=\"CURD\"></a>CURD</h3><ul>\n<li>æ’å…¥</li>\n</ul>\n<figure class=\"highlight\"><table><tr><td class=\"code\"><pre><span class=\"line\">db.ops_dev.insert(&#123;title: 'MongoDB ', </span><br><span class=\"line\">    description: 'MongoDB æ˜¯ä¸€ä¸ª Nosql æ•°æ®åº“',</span><br><span class=\"line\">    tags: ['mongodb', 'database', 'NoSQL']</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"å…¶ä»–æ³¨æ„äº‹é¡¹\"><a href=\"#å…¶ä»–æ³¨æ„äº‹é¡¹\" class=\"headerlink\" title=\"å…¶ä»–æ³¨æ„äº‹é¡¹\"></a>å…¶ä»–æ³¨æ„äº‹é¡¹</h2><h3 id=\"mongodbè¿›ç¨‹è«åé€€å‡º\"><a href=\"#mongodbè¿›ç¨‹è«åé€€å‡º\" class=\"headerlink\" title=\"mongodbè¿›ç¨‹è«åé€€å‡º\"></a>mongodbè¿›ç¨‹è«åé€€å‡º</h3><blockquote>\n<p>æ¯å¤©æ—©ä¸Šåˆ°å…¬å¸å‘ç°Mongoéƒ½ä¼šè‡ªå·±å…³é—­æ‰ã€‚</p>\n</blockquote>\n<figure class=\"highlight sh\"><table><tr><td class=\"code\"><pre><span class=\"line\">2018-01-03T18:21:03.135+0800 I CONTROL  [signalProcessingThread] got signal 1 (Hangup), will terminate after current cmd ends</span><br><span class=\"line\">2018-01-03T18:21:03.136+0800 I NETWORK  [signalProcessingThread] shutdown: going to close listening sockets...</span><br><span class=\"line\">2018-01-03T18:21:03.136+0800 I NETWORK  [signalProcessingThread] closing listening socket: 6</span><br><span class=\"line\">2018-01-03T18:21:03.136+0800 I NETWORK  [signalProcessingThread] closing listening socket: 7</span><br><span class=\"line\">2018-01-03T18:21:03.136+0800 I NETWORK  [signalProcessingThread] removing socket file: /tmp/mongodb-27017.sock</span><br><span class=\"line\">2018-01-03T18:21:03.136+0800 I NETWORK  [signalProcessingThread] shutdown: going to flush diaglog...</span><br><span class=\"line\">2018-01-03T18:21:03.136+0800 I FTDC     [signalProcessingThread] Shutting down full-time diagnostic data capture</span><br><span class=\"line\">2018-01-03T18:21:03.138+0800 I STORAGE  [signalProcessingThread] WiredTigerKVEngine shutting down</span><br><span class=\"line\">2018-01-03T18:21:03.366+0800 I STORAGE  [signalProcessingThread] shutdown: removing fs lock...</span><br><span class=\"line\">2018-01-03T18:21:03.366+0800 I CONTROL  [signalProcessingThread] now exiting</span><br><span class=\"line\">2018-01-03T18:21:03.366+0800 I CONTROL  [signalProcessingThread] shutting down with code:0</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>å¤©å•¦å™œæœ‰äººå‘é€äº†Hangupã€‚ã€‚ã€‚å¥½æ¯”<code>kill -1 pid</code>,ä½†å¯ä»¥ç¡®è®¤çš„æ˜¯æ²¡æœ‰äººæ‰‹åŠ¨ä¿¡å·ç»™mongodbè¿›ç¨‹ã€‚</li>\n<li>ç„¶åç½‘ä¸Šæ‰¾äº†å¾ˆä¹…å‘ç°äº†è¿™ç¯‡æ–‡æ¡£ <a href=\"https://www.gnu.org/software/bash/manual/html_node/Signals.html\" target=\"_blank\" rel=\"noopener\">Signals</a></li>\n</ul>\n<blockquote>\n<p>Bash resends a SIGHUP to all jobs if it receives a SIGHUP itself; this would include mongod.<br>Also, if you happen to have huponexit turned on, every job will receive a SIGHUP when bash exits. </p>\n</blockquote>\n<p>â€‹    shellç™»è¿›ä¹‹åå¯åŠ¨äº†mongo,ç„¶åé€€å‡ºshellä½¿ç”¨çš„æ–¹å¼æ˜¯ç›´æ¥å…³æ‰çª—å£,linuxè®¤ä¸ºè¿™æ˜¯ä¸€èµ·å¼‚å¸¸é€€å‡º,è¿™æ ·ä¸€æ¥è¿™ä¸ªshellè¿›ç¨‹å°±ä¼šæ”¶åˆ°SIGHUPä¿¡å·,ä¸ºäº†ä¿è¯çŠ¶æ€ä¸€è‡´æ€§,ä»è€Œç»™å®ƒçš„æ‰€æœ‰å­è¿›ç¨‹å‘é€SIGHUPä¿¡å·.è€Œä½¿ç”¨å‘½ä»¤exité€€å‡ºå°±ä¸ä¼šæœ‰è¿™ç§é—®é¢˜,å› ä¸ºlinuxä¼šè®¤ä¸ºè¿™æ˜¯ä¸€ç§æ­£å¸¸çš„é€€å‡ºã€‚<br>â€‹    mongodbå®˜æ–¹æ–‡æ¡£ä¼šå‘ç°mongoæœ‰â€“-forkè¿™æ ·çš„ä¸€ä¸ªå‚æ•°,ä½¿ç”¨è¯¥å‚æ•°å¯åŠ¨mongoæ—¶,ä¼šè‡ªåŠ¨å°†å…¶æŒ‚åˆ°initè¿›ç¨‹(pidä¸º1)ä¸‹å¯åŠ¨,è€Œä¸åŠ çš„è¯ppid(çˆ¶è¿›ç¨‹id)å°±æ˜¯å½“å‰çš„shellè¿›ç¨‹ã€‚</p>\n<ul>\n<li>å¦‚æœä½¿ç”¨äº† fork å‚æ•°å°±å¿…é¡»æ·»åŠ  logpath</li>\n</ul>\n<figure class=\"highlight shell\"><table><tr><td class=\"code\"><pre><span class=\"line\">mongod --fork --auth --port 27017 --dbpath /var/lib/mongo/ --logpath /opt/mongod/mongod.log</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"å®‰å…¨çš„æ¨å‡ºæ–¹å¼\"><a href=\"#å®‰å…¨çš„æ¨å‡ºæ–¹å¼\" class=\"headerlink\" title=\"å®‰å…¨çš„æ¨å‡ºæ–¹å¼\"></a>å®‰å…¨çš„æ¨å‡ºæ–¹å¼</h2><blockquote>\n<p>ä¸€å®šè¦ä»¥å‘½ä»¤æ–¹å¼å…³é—­</p>\n</blockquote>\n<p>å…³é—­æœåŠ¡æ—¶ï¼Œä¸€å®šè¦æ³¨æ„ï¼Œç”¨â€“shutdownå‘½ä»¤å…³é—­ï¼Œæ—¢æ–¹ä¾¿åˆå®‰å…¨ã€‚</p>\n","categories":["Linuxè¿ç»´"],"tags":["Centos7","Linux","Mongodb3.4"]},{"title":"LinuxåŸºç¡€å‘½ä»¤","url":"/posts/1254138214/","content":"<blockquote>\n<p>linuxä½œä¸ºä¸ªäººå·¥ä½œç»å¸¸ä½¿ç”¨çš„ç³»ç»Ÿã€åšä¸‹ç®€å•çš„è®°å½•æ–¹ä¾¿ä»¥åå·¥ä½œå‚è€ƒã€‚</p>\n</blockquote>\n<h2 id=\"ps\"><a href=\"#ps\" class=\"headerlink\" title=\"ps\"></a><a href=\"http://man.linuxde.net/ps\" target=\"_blank\" rel=\"noopener\">ps</a></h2><blockquote>\n<p>pså‘½ä»¤ç”¨äºæŠ¥å‘Šç³»ç»ŸæŸä¸ªæ—¶é—´å†…è¿›ç¨‹çš„æƒ…å†µ</p>\n</blockquote>\n<ul>\n<li>å‚æ•°</li>\n</ul>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">-A : æ‰€æœ‰çš„è¿›ç¨‹å‡æ˜¾ç¤ºå‡ºæ¥</span><br><span class=\"line\">-a : ä¸ä¸terminalæœ‰å…³çš„æ‰€æœ‰è¿›ç¨‹</span><br><span class=\"line\">-u : æœ‰æ•ˆç”¨æˆ·çš„ç›¸å…³è¿›ç¨‹</span><br><span class=\"line\">-x : ä¸€èˆ¬ä¸aå‚æ•°ä¸€èµ·ä½¿ç”¨ï¼Œå¯ä»¥åˆ—å‡ºæ¯”è¾ƒå®Œæ•´çš„ä¿¡æ¯ã€‚</span><br><span class=\"line\">-l : è¾ƒè¯¦ç»†åœ°å°†PIDçš„ä¿¡æ¯åˆ—å‡ºã€‚</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"æ¡ˆä¾‹\"><a href=\"#æ¡ˆä¾‹\" class=\"headerlink\" title=\"æ¡ˆä¾‹\"></a>æ¡ˆä¾‹</h3><p>æŸ¥è¯¢æŸç¨‹åºçš„æƒ…å†µ</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> [root@VM_115_109_centos ~]<span class=\"comment\"># ps -ef | grep mysqld</span></span></span><br><span class=\"line\">root      8013 17307  0 05:34 pts/0    00:00:00 grep --color=auto mysqld</span><br><span class=\"line\">mysql    28882     1  0 Apr02 ?        00:07:03 /usr/sbin/mysqld --daemonize --pid-file=/var/run/mysqld/mysqld.pid</span><br></pre></td></tr></table></figure>\n\n<p>UID      PID   PPID     C STIME   TTY    TIME     CMD (ç±»ç›®æè¿°)</p>\n<ul>\n<li>UID ç¨‹åºè¢«è¯¥ UID æ‰€æ‹¥æœ‰</li>\n<li>PID å°±æ˜¯è¿™ä¸ªç¨‹åºçš„ ID </li>\n<li>PPID åˆ™æ˜¯å…¶ä¸Šçº§çˆ¶ç¨‹åºçš„ID</li>\n<li>C CPU ä½¿ç”¨çš„èµ„æºç™¾åˆ†æ¯”</li>\n<li>STIME ç³»ç»Ÿå¯åŠ¨æ—¶é—´</li>\n<li>TTY ç™»å…¥è€…çš„ç»ˆç«¯æœºä½ç½®</li>\n<li>TIME ä½¿ç”¨æ‰çš„ CPU æ—¶é—´ã€‚</li>\n<li>CMD æ‰€ä¸‹è¾¾çš„æŒ‡ä»¤</li>\n</ul>\n<p>æŸ¥çœ‹å†…å­˜å ç”¨å‰1çš„è¿›ç¨‹</p>\n<ul>\n<li>ps auxw | head -1;ps auxw|sort -rn -k4|head -1  </li>\n</ul>\n<figure class=\"highlight shell\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\">  ps auxw | head -1;ps auxw|sort -rn -k4|head -1</span></span><br><span class=\"line\">USER       PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND</span><br><span class=\"line\">mysql    28882  0.0 10.9 1143416 205484 ?      Sl   Apr02   7:20 /usr/sbin/mysqld --daemonize --pid-file=/var/run/mysqld/mysqld.pid</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>å†…å­˜çš„å•ä½æ˜¯kbï¼ŒVSZæ˜¯è™šæ‹Ÿå†…å­˜çš„å ç”¨ï¼ŒRSSæ˜¯çœŸå®çš„å†…å­˜çš„å ç”¨ã€‚</li>\n</ul>\n<ul>\n<li>å‘½ä»¤åˆ†è§£ï¼š</li>\n<li>ps auxwæ˜¾ç¤ºç³»ç»Ÿèµ„æºå ç”¨æƒ…å†µï¼›</li>\n<li>head -1è¡¨ç¤ºæ˜¾ç¤ºç¬¬ä¸€åˆ—ï¼Œå³æ ‡é¢˜åˆ—ï¼›</li>\n<li>sort -r è¡¨ç¤ºåå‘æ’åºï¼Œ-nè¡¨ç¤ºæŒ‰æ•°å­—æ’åºï¼Œ-k4è¡¨ç¤ºåˆ—çš„ç¬¬4ä¸ªå­—ç¬¦ã€‚</li>\n</ul>\n<p>æŸ¥çœ‹CPUå ç”¨å‰1çš„è¿›ç¨‹</p>\n<ul>\n<li>ps auxw|head -1;ps auxw|sort -rn -k3|head -1</li>\n</ul>\n<figure class=\"highlight shell\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> ps auxw|head -1;ps auxw|sort -rn -k3|head -5</span></span><br><span class=\"line\">USER       PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND</span><br><span class=\"line\">root      1690  0.1  0.6 536692 12436 ?        Sl   Apr10  29:58 barad_agent</span><br><span class=\"line\">USER       PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND</span><br><span class=\"line\">root         9  0.0  0.0      0     0 ?        R    Mar08   1:45 [rcu_sched]</span><br><span class=\"line\">root       884  0.0  0.0 110044   808 ttyS0    Ss+  Mar08   0:00 /sbin/agetty --keep-baud 115200 38400 9600 ttyS0 vt220</span><br><span class=\"line\">root       883  0.0  0.0 110044   788 tty1     Ss+  Mar08   0:00 /sbin/agetty --noclear tty1 linux</span><br></pre></td></tr></table></figure>\n\n<a id=\"more\"></a>\n\n<h2 id=\"free\"><a href=\"#free\" class=\"headerlink\" title=\"free\"></a><a href=\"http://man.linuxde.net/free\" target=\"_blank\" rel=\"noopener\">free</a></h2><blockquote>\n<p>åœ¨ç³»ç»Ÿç»´æŠ¤çš„è¿‡ç¨‹ä¸­ï¼Œéšæ—¶å¯èƒ½æœ‰éœ€è¦æŸ¥çœ‹ CPUå’Œå†…å­˜çš„ä½¿ç”¨ç‡ï¼Œå¹¶æ ¹æ®ç›¸åº”ä¿¡æ¯åˆ†æç³»ç»ŸçŠ¶å†µçš„éœ€æ±‚ã€‚</p>\n</blockquote>\n<ul>\n<li>å‚æ•°</li>\n</ul>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">-bï¼šä»¥Byteä¸ºå•ä½æ˜¾ç¤ºå†…å­˜ä½¿ç”¨æƒ…å†µï¼›</span><br><span class=\"line\">-kï¼šä»¥KBä¸ºå•ä½æ˜¾ç¤ºå†…å­˜ä½¿ç”¨æƒ…å†µï¼›</span><br><span class=\"line\">-mï¼šä»¥MBä¸ºå•ä½æ˜¾ç¤ºå†…å­˜ä½¿ç”¨æƒ…å†µï¼›</span><br><span class=\"line\">-oï¼šä¸æ˜¾ç¤ºç¼“å†²åŒºè°ƒèŠ‚åˆ—ï¼›</span><br><span class=\"line\">-s&lt;é—´éš”ç§’æ•°&gt;ï¼šæŒç»­è§‚å¯Ÿå†…å­˜ä½¿ç”¨çŠ¶å†µï¼›</span><br><span class=\"line\">-tï¼šæ˜¾ç¤ºå†…å­˜æ€»å’Œåˆ—ï¼›</span><br><span class=\"line\">-Vï¼šæ˜¾ç¤ºç‰ˆæœ¬ä¿¡æ¯ã€‚</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"æ¡ˆä¾‹-1\"><a href=\"#æ¡ˆä¾‹-1\" class=\"headerlink\" title=\"æ¡ˆä¾‹\"></a>æ¡ˆä¾‹</h3><figure class=\"highlight shell\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> free</span></span><br><span class=\"line\">              total        used        free      shared  buff/cache   available</span><br><span class=\"line\">Mem:       16200512     5593928     4748604        9048     5857980    10196852</span><br><span class=\"line\">Swap:       8191996           0     8191996</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>freeå‘½ä»¤é»˜è®¤æ˜¯ä»¥kbä¸ºå•ä½æ˜¾ç¤ºçš„ï¼Œå¯ä»¥ç”¨free -m ç”¨Mbå•ä½æ¥æ˜¾ç¤ºã€‚</li>\n<li>Memè¡Œ ï¼š   total = used  + free    å…¶ä¸­bufferså’Œcachedè™½ç„¶è®¡ç®—åœ¨usedå†…ï¼Œ ä½†å…¶å®ä¸ºå¯ç”¨å†…å­˜ã€‚</li>\n<li>Memä¸‹ä¸€è¡Œï¼šusedä¸ºçœŸå®å·²å å†…å­˜ï¼Œfreeä¸ºçœŸå®å¯ç”¨å†…å­˜ã€‚</li>\n<li>Swapï¼šå†…å­˜äº¤æ¢åŒºçš„ä½¿ç”¨æƒ…å†µã€‚</li>\n</ul>\n<h2 id=\"top\"><a href=\"#top\" class=\"headerlink\" title=\"top\"></a><a href=\"http://man.linuxde.net/top\" target=\"_blank\" rel=\"noopener\">top</a></h2><blockquote>\n<p>æ˜¾ç¤ºç³»ç»Ÿæ•´ä½“è´Ÿè½½</p>\n</blockquote>\n<ul>\n<li>å‚æ•°</li>\n</ul>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">-bï¼šä»¥æ‰¹å¤„ç†æ¨¡å¼æ“ä½œï¼›</span><br><span class=\"line\">-cï¼šæ˜¾ç¤ºå®Œæ•´çš„æ²»å‘½ä»¤ï¼›</span><br><span class=\"line\">-dï¼šå±å¹•åˆ·æ–°é—´éš”æ—¶é—´ï¼›</span><br><span class=\"line\">-Iï¼šå¿½ç•¥å¤±æ•ˆè¿‡ç¨‹ï¼›</span><br><span class=\"line\">-sï¼šä¿å¯†æ¨¡å¼ï¼›</span><br><span class=\"line\">-Sï¼šç´¯ç§¯æ¨¡å¼ï¼›</span><br><span class=\"line\">-i&lt;æ—¶é—´&gt;ï¼šè®¾ç½®é—´éš”æ—¶é—´ï¼›</span><br><span class=\"line\">-u&lt;ç”¨æˆ·å&gt;ï¼šæŒ‡å®šç”¨æˆ·åï¼›</span><br><span class=\"line\">-p&lt;è¿›ç¨‹å·&gt;ï¼šæŒ‡å®šè¿›ç¨‹ï¼›</span><br><span class=\"line\">-n&lt;æ¬¡æ•°&gt;ï¼šå¾ªç¯æ˜¾ç¤ºçš„æ¬¡æ•°ã€‚</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"æ¡ˆä¾‹-2\"><a href=\"#æ¡ˆä¾‹-2\" class=\"headerlink\" title=\"æ¡ˆä¾‹\"></a>æ¡ˆä¾‹</h3><p><img src=\"https://z201.oss-cn-shanghai.aliyuncs.com/JavaNote/linux/1.png\"> </p>\n<ul>\n<li>ç¬¬ä¸€è¡Œï¼š ç³»ç»Ÿæ—¶é—´  + ç³»ç»Ÿè¿è¡Œæ—¶é—´ + å‡ ä¸ªç”¨æˆ· + 1/5/15åˆ†é’Ÿç³»ç»Ÿå¹³å‡è´Ÿè½½</li>\n<li>ç¬¬äºŒè¡Œï¼šè¿›ç¨‹æ€»æ•°(total) + æ­£åœ¨è¿è¡Œè¿›ç¨‹æ•°(running) + ç¡çœ è¿›ç¨‹æ•°(sleeping) + åœæ­¢çš„è¿›ç¨‹æ•°(stopped)+ åƒµå°¸è¿›ç¨‹æ•°(zombie)</li>\n<li>ç¬¬ä¸‰è¡Œï¼šç”¨æˆ·ç©ºé—´CPUå æ¯”(us) + å†…æ ¸ç©ºé—´CPUå æ¯”(sy)+ CPUç©ºç½®ç‡(id)</li>\n<li>æ³¨è§£<ul>\n<li>PID ï¼šè¿›ç¨‹ID</li>\n<li>USER ï¼šç”¨æˆ·å</li>\n<li>PR ï¼šä¼˜å…ˆçº§</li>\n<li>NI ï¼šè´Ÿå€¼è¡¨ç¤ºé«˜ä¼˜å…ˆçº§ï¼Œæ­£å€¼è¡¨ç¤ºä½ä¼˜å…ˆçº§ã€‚</li>\n<li>VIRT ï¼šè™šæ‹Ÿå†…å­˜</li>\n<li>RES ï¼š çœŸå®å†…å­˜</li>\n<li>SHR ï¼šå…±äº«å†…å­˜</li>\n<li>S ï¼šè¿›ç¨‹çŠ¶æ€ D=ä¸å¯ä¸­æ–­çš„ç¡çœ çŠ¶æ€ï¼› R=è¿è¡Œï¼› S=ç¡çœ  ï¼›T=è·Ÿè¸ª/åœæ­¢ï¼› Z=åƒµå°¸è¿›ç¨‹</li>\n<li>å‚æ•°ï¼š<ul>\n<li>top -d 2 ï¼šæ¯éš”2ç§’æ˜¾å¼æ‰€æœ‰è¿›ç¨‹çš„èµ„æºå ç”¨æƒ…å†µ</li>\n<li>top -c  ï¼šæ¯éš”5ç§’æ˜¾å¼è¿›ç¨‹çš„èµ„æºå ç”¨æƒ…å†µï¼Œå¹¶æ˜¾ç¤ºè¿›ç¨‹çš„å‘½ä»¤è¡Œå‚æ•°(é»˜è®¤åªæœ‰è¿›ç¨‹å)</li>\n<li>top -p 12345 -p 6789ï¼šæ¯éš”5ç§’æ˜¾ç¤ºpidæ˜¯12345å’Œpidæ˜¯6789çš„ä¸¤ä¸ªè¿›ç¨‹çš„èµ„æºå ç”¨æƒ…å†µ</li>\n<li>top -d 2 -c -p 123456 ï¼šæ¯éš”2ç§’æ˜¾ç¤ºpidæ˜¯12345çš„è¿›ç¨‹çš„èµ„æºä½¿ç”¨æƒ…å†µï¼Œå¹¶æ˜¾å¼è¯¥è¿›ç¨‹å¯åŠ¨çš„å‘½ä»¤è¡Œå‚æ•°</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"env\"><a href=\"#env\" class=\"headerlink\" title=\"env\"></a>env</h2><blockquote>\n<p>æŸ¥çœ‹ç¯å¢ƒå˜é‡ï¼›è¿™ä¸ªç”¨çš„ç›¸å¯¹è¾ƒå°‘äº†ã€‚æ‰€ä»¥ä¹Ÿä¸ç”¨å¤ªåœ¨æ„ã€‚</p>\n</blockquote>\n<h2 id=\"last\"><a href=\"#last\" class=\"headerlink\" title=\"last\"></a>last</h2><blockquote>\n<p>æŸ¥çœ‹ç”¨æˆ·ç™»å½•æ—¥å¿—</p>\n</blockquote>\n<ul>\n<li>å‚æ•°</li>\n</ul>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">-a : æŠŠä»ä½•å¤„ç™»å½•ç³»ç»Ÿçš„ä¸»æœºåæˆ–Ipåœ°å€ï¼Œæ˜¾ç¤ºåœ¨æœ€åä¸€è¡Œã€‚</span><br><span class=\"line\">-d : å°†Ipåœ°å€è½¬æ¢æˆä¸»æœºåç§°ã€‚</span><br><span class=\"line\">-f  : æŒ‡å®šè®°å½•æ–‡ä»¶</span><br><span class=\"line\">-n : è®¾ç½®åˆ—å‡ºåå•çš„æ˜¾ç¤ºåˆ—æ•°ã€‚</span><br><span class=\"line\">-R : ä¸æ˜¾ç¤ºç™»å½•ç³»ç»Ÿä¸»æœºåç§°æˆ–Ipåœ°å€ã€‚</span><br><span class=\"line\">-x  : æ˜¾ç¤ºç³»ç»Ÿå…³æœºï¼Œé‡æ–°å¼€æœºï¼Œä»¥åŠæ‰§è¡Œç­‰çº§çš„æ”¹å˜ä¿¡æ¯ã€‚</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"rpm\"><a href=\"#rpm\" class=\"headerlink\" title=\"rpm\"></a>rpm</h2><blockquote>\n<p>ä¸€èˆ¬ç”¨rpm -qa | grep xxx æŸ¥çœ‹æ‰€æœ‰ç¨‹åºçš„è½¯ä»¶åŒ…,å¦‚æœä¸åšç­›é€‰çš„è¯ä¼šå§æ‰€æœ‰å·²ç»å®‰è£…çš„ç¨‹åºåˆ—å‡ºæ¥ã€‚</p>\n</blockquote>\n<ul>\n<li>å‚æ•°</li>\n</ul>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">-aï¼šæŸ¥è¯¢æ‰€æœ‰å¥—ä»¶ï¼›</span><br><span class=\"line\">-b&lt;å®Œæˆé˜¶æ®µ&gt;&lt;å¥—ä»¶æ¡£&gt;+æˆ–-t &lt;å®Œæˆé˜¶æ®µ&gt;&lt;å¥—ä»¶æ¡£&gt;+ï¼šè®¾ç½®åŒ…è£…å¥—ä»¶çš„å®Œæˆé˜¶æ®µï¼Œå¹¶æŒ‡å®šå¥—ä»¶æ¡£çš„æ–‡ä»¶åç§°ï¼›</span><br><span class=\"line\">-cï¼šåªåˆ—å‡ºç»„æ€é…ç½®æ–‡ä»¶ï¼Œæœ¬å‚æ•°éœ€é…åˆ<span class=\"string\">\"-l\"</span>å‚æ•°ä½¿ç”¨ï¼›</span><br><span class=\"line\">-dï¼šåªåˆ—å‡ºæ–‡æœ¬æ–‡ä»¶ï¼Œæœ¬å‚æ•°éœ€é…åˆ<span class=\"string\">\"-l\"</span>å‚æ•°ä½¿ç”¨ï¼›</span><br><span class=\"line\">-e&lt;å¥—ä»¶æ¡£&gt;æˆ–--erase&lt;å¥—ä»¶æ¡£&gt;ï¼šåˆ é™¤æŒ‡å®šçš„å¥—ä»¶ï¼›</span><br><span class=\"line\">-f&lt;æ–‡ä»¶&gt;+ï¼šæŸ¥è¯¢æ‹¥æœ‰æŒ‡å®šæ–‡ä»¶çš„å¥—ä»¶ï¼›</span><br><span class=\"line\">-hæˆ–--<span class=\"built_in\">hash</span>ï¼šå¥—ä»¶å®‰è£…æ—¶åˆ—å‡ºæ ‡è®°ï¼›</span><br><span class=\"line\">-iï¼šæ˜¾ç¤ºå¥—ä»¶çš„ç›¸å…³ä¿¡æ¯ï¼›</span><br><span class=\"line\">-i&lt;å¥—ä»¶æ¡£&gt;æˆ–--install&lt;å¥—ä»¶æ¡£&gt;ï¼šå®‰è£…æŒ‡å®šçš„å¥—ä»¶æ¡£ï¼›</span><br><span class=\"line\">-lï¼šæ˜¾ç¤ºå¥—ä»¶çš„æ–‡ä»¶åˆ—è¡¨ï¼›</span><br><span class=\"line\">-p&lt;å¥—ä»¶æ¡£&gt;+ï¼šæŸ¥è¯¢æŒ‡å®šçš„RPMå¥—ä»¶æ¡£ï¼›</span><br><span class=\"line\">-qï¼šä½¿ç”¨è¯¢é—®æ¨¡å¼ï¼Œå½“é‡åˆ°ä»»ä½•é—®é¢˜æ—¶ï¼ŒrpmæŒ‡ä»¤ä¼šå…ˆè¯¢é—®ç”¨æˆ·ï¼›</span><br><span class=\"line\">-Rï¼šæ˜¾ç¤ºå¥—ä»¶çš„å…³è”æ€§ä¿¡æ¯ï¼›</span><br><span class=\"line\">-sï¼šæ˜¾ç¤ºæ–‡ä»¶çŠ¶æ€ï¼Œæœ¬å‚æ•°éœ€é…åˆ<span class=\"string\">\"-l\"</span>å‚æ•°ä½¿ç”¨ï¼›</span><br><span class=\"line\">-U&lt;å¥—ä»¶æ¡£&gt;æˆ–--upgrade&lt;å¥—ä»¶æ¡£&gt;ï¼šå‡çº§æŒ‡å®šçš„å¥—ä»¶æ¡£ï¼›</span><br><span class=\"line\">-vï¼šæ˜¾ç¤ºæŒ‡ä»¤æ‰§è¡Œè¿‡ç¨‹ï¼›</span><br><span class=\"line\">-vvï¼šè¯¦ç»†æ˜¾ç¤ºæŒ‡ä»¤æ‰§è¡Œè¿‡ç¨‹ï¼Œä¾¿äºæ’é”™ã€‚</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"mv\"><a href=\"#mv\" class=\"headerlink\" title=\"mv\"></a>mv</h2><blockquote>\n<p>è¯¥å‘½åç”¨äºç§»åŠ¨æ–‡ä»¶ã€ç›®å½•æˆ–æ›´åï¼Œmoveä¹‹æ„ï¼Œå®ƒçš„å¸¸ç”¨å‚æ•°å¦‚ä¸‹ï¼š</p>\n</blockquote>\n<ul>\n<li>å‚æ•°</li>\n</ul>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">-f  : forceå¼ºåˆ¶çš„æ„æ€ï¼Œå¦‚æœç›®æ ‡æ–‡ä»¶å·²ç»å­˜åœ¨ï¼Œä¸ä¼šè¯¢é—®è€Œç›´æ¥è¦†ç›–ã€‚</span><br><span class=\"line\">-i   : è‹¥ç›®æ ‡æ–‡ä»¶å­˜åœ¨ï¼Œåˆ™è¯¢é—®æ˜¯å¦è¦†ç›–ã€‚</span><br><span class=\"line\">-u  : è‹¥ç›®æ ‡æ–‡ä»¶å·²ç»å­˜åœ¨ï¼Œä¸”æ¯”ç›®æ ‡æ–°æ–‡ä»¶æ–°ï¼Œæ‰ä¼šæ›´æ–°ã€‚</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"æ¡ˆä¾‹-3\"><a href=\"#æ¡ˆä¾‹-3\" class=\"headerlink\" title=\"æ¡ˆä¾‹\"></a>æ¡ˆä¾‹</h3><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">$ <span class=\"built_in\">echo</span> <span class=\"string\">\"hello world\"</span> &gt;&gt; newfile.txt <span class=\"comment\">#åˆ›å»ºä¸€ä¸ªæœ‰å†…å®¹çš„æ–‡æœ¬ã€‚</span></span><br><span class=\"line\">$ midir 001  \t\t\t\t\t  <span class=\"comment\">#åˆ›å»ºä¸€ä¸ªæ–‡ä»¶å¤¹</span></span><br><span class=\"line\">$ ehco <span class=\"string\">\"are you ok\"</span> &gt;&gt; 001/newfile.txt  <span class=\"comment\">#åˆ›å»ºä¸€ä¸ªæœ‰å†…å®¹çš„æ–‡æœ¬å¹¶æ”¾ç½®åœ¨001æ–‡ä»¶å¤¹ä¸­ã€‚</span></span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>mv -i</li>\n</ul>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">$ mv -i  newfile.txt 001/newfile.txt</span><br><span class=\"line\"><span class=\"comment\"># mv : overwite '001/newfile.txt'? </span></span><br><span class=\"line\"><span class=\"comment\"># å¡« yes æˆ–è€… yéƒ½å¯ä»¥ã€‚</span></span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>mv -u</li>\n</ul>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">$ mv -u newfile.txt 001/newfile.txt</span><br><span class=\"line\"><span class=\"comment\"># mv : overwite '001/newfile.txt'? </span></span><br><span class=\"line\"><span class=\"comment\"># å¡« yes æˆ–è€… yéƒ½å¯ä»¥ã€‚</span></span><br></pre></td></tr></table></figure>\n\n<p> æ³¨æ„å¦‚æœç›®æ ‡æ–‡ä»¶åˆ›å»ºæ—¶é—´æ¯”å½“å‰æ–‡ä»¶æ–°ï¼Œä¼šç§»åŠ¨å¤±è´¥ã€‚</p>\n<ul>\n<li>mv -f </li>\n</ul>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">$ mv -f newfile.txt 001/newfile.txt</span><br></pre></td></tr></table></figure>\n\n<p>æ³¨æ„äº†ï¼Œè¿™é‡Œå¹¶ä¸ä¼šæç¤ºä»€ä¹ˆï¼Œä¼šç›´æ¥è¦†ç›–æ‰ç›®æ ‡æ–‡ä»¶ã€‚å‰ææ˜¯ä½ æœ‰è¶³å¤Ÿçš„æƒé™ã€‚</p>\n<h2 id=\"rm\"><a href=\"#rm\" class=\"headerlink\" title=\"rm\"></a>rm</h2><ul>\n<li>å‚æ•°</li>\n</ul>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">-dï¼šç›´æ¥æŠŠæ¬²åˆ é™¤çš„ç›®å½•çš„ç¡¬è¿æ¥æ•°æ®åˆ é™¤æˆ0ï¼Œåˆ é™¤è¯¥ç›®å½•ï¼›</span><br><span class=\"line\">-fï¼šå¼ºåˆ¶åˆ é™¤æ–‡ä»¶æˆ–ç›®å½•ï¼›</span><br><span class=\"line\">-iï¼šåˆ é™¤å·²æœ‰æ–‡ä»¶æˆ–ç›®å½•ä¹‹å‰å…ˆè¯¢é—®ç”¨æˆ·ï¼›</span><br><span class=\"line\">-ræˆ–-Rï¼šé€’å½’å¤„ç†ï¼Œå°†æŒ‡å®šç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶ä¸å­ç›®å½•ä¸€å¹¶å¤„ç†ï¼›</span><br><span class=\"line\">--preserve-rootï¼šä¸å¯¹æ ¹ç›®å½•è¿›è¡Œé€’å½’æ“ä½œï¼›</span><br><span class=\"line\">-vï¼šæ˜¾ç¤ºæŒ‡ä»¤çš„è¯¦ç»†æ‰§è¡Œè¿‡ç¨‹ã€‚</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"æ¡ˆä¾‹-4\"><a href=\"#æ¡ˆä¾‹-4\" class=\"headerlink\" title=\"æ¡ˆä¾‹\"></a>æ¡ˆä¾‹</h3><p>åˆ é™¤å½“å‰ç›®å½•ä¸‹çš„ log.txtæ–‡ä»¶</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">$ rm log.txt</span><br></pre></td></tr></table></figure>\n\n<p> åˆ é™¤å½“å‰ç›®å½•ä¸‹æ‰€æœ‰.txtåç¼€çš„æ–‡ä»¶</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">$ rm *.txt</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>ä½¿ç”¨ rm å‘½ä»¤åˆ é™¤æ—¶ï¼Œä¼šæç¤ºä½ æ˜¯å¦ç¡®å®šåˆ é™¤ï¼Œè¾“å…¥ y å³åˆ é™¤ï¼Œè¾“å…¥ n åˆ™å–æ¶ˆ</p>\n<p>rm: remove regular file `log.txtâ€™? y</p>\n</blockquote>\n<p>åˆ é™¤å½“å‰ç›®å½•ä¸‹æ‰€æœ‰ä»¥ doubiå¼€å¤´çš„æ–‡ä»¶</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">$ rm doubi*</span><br></pre></td></tr></table></figure>\n\n<p>åˆ é™¤å½“å‰ç›®å½•ä¸‹æ‰€æœ‰ä»¥ doubiå¼€å¤´ ä»¥.txtåç¼€ç»“å°¾çš„æ–‡ä»¶</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">$ rm doubi*.txt</span><br></pre></td></tr></table></figure>\n\n<p>å½“ä½ ç”¨ rm åˆ é™¤ç›®å½•çš„æ—¶å€™ä¼šå‘ç°æç¤ºè¿™ä¸æ˜¯ä¸€ä¸ªæ–‡ä»¶</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">$ rm bash</span><br><span class=\"line\">rm: cannot remove `bash<span class=\"string\">': Is a directory</span></span><br></pre></td></tr></table></figure>\n\n<p>å¯ä»¥åŠ ä¸Š -r æ¥å½’é€’åˆ é™¤ç›®å½•åŠå…¶ç›®å½•ä¸‹çš„å†…å®¹</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">$  rm -r bash</span><br></pre></td></tr></table></figure>\n\n<p> å› ä¸ºä¸ºäº†é¿å…æ‰‹è¯¯åˆ é™¤é”™è¯¯ï¼Œæ‰€ä»¥ rmé»˜è®¤æ˜¯åŠ ä¸Šäº† -i çš„å‚æ•°ï¼Œä¹Ÿå°±æ˜¯æ¯ä¸€æ¬¡åˆ é™¤æ–‡ä»¶/ç›®å½•éƒ½ä¼šæç¤ºï¼Œå¦‚æœè§‰å¾—çƒ¦å¯ä»¥ç”¨ -rf å‚æ•°</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">$ rm -rf bash</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>rm -rf è¿™ä¸ªå‘½ä»¤è¯·æ…é‡ä½¿ç”¨ï¼Œè€Œä¸”åƒä¸‡ä¸è¦ä½¿ç”¨ rm -rf / æˆ–è€… rm -rf /* ä¹‹ç±»çš„å‘½ä»¤(ç³»ç»Ÿè‡ªæ€)ï¼Œå¯èƒ½ä¼šè®©ä½ ç³»ç»Ÿçˆ†ç‚¸ï¼Œæ‰€ä»¥ä½¿ç”¨è¯·æ…é‡</p>\n</blockquote>\n<p>æ›´å¤šçš„å‘½ä»¤å¯ä»¥ç”¨ rm â€“help æŸ¥çœ‹ã€‚</p>\n<h2 id=\"du\"><a href=\"#du\" class=\"headerlink\" title=\"du\"></a>du</h2><blockquote>\n<p>æŸ¥çœ‹ æ–‡ä»¶/æ–‡ä»¶å¤¹ å ç”¨ç£ç›˜ç©ºé—´çš„å¤§å°</p>\n</blockquote>\n<ul>\n<li>å‚æ•°</li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">-h ï¼šä»¥äººç±»æ˜“è¯»çš„æ–¹å¼æ˜¾ç¤º</span><br><span class=\"line\">-a ï¼šæ˜¾ç¤º ç›®å½•å ç”¨çš„ç£ç›˜ç©ºé—´å¤§å°ï¼Œå¹¶æ˜¾ç¤ºå…¶ä¸‹ç›®å½•å’Œæ–‡ä»¶å ç”¨ç£ç›˜ç©ºé—´çš„å¤§å°</span><br><span class=\"line\">-s ï¼šæ˜¾ç¤º ç›®å½•å ç”¨çš„ç£ç›˜ç©ºé—´å¤§å°ï¼Œä½†ä¸æ˜¾ç¤ºå…¶ä¸‹å­ç›®å½•å’Œæ–‡ä»¶å ç”¨çš„ç£ç›˜ç©ºé—´å¤§å°</span><br><span class=\"line\">-c ï¼šæ˜¾ç¤ºå‡ ä¸ªç›®å½•æˆ–æ–‡ä»¶å ç”¨çš„ç£ç›˜ç©ºé—´å¤§å°ï¼Œè¿˜è¦ç»Ÿè®¡å®ƒä»¬çš„æ€»å’Œ</span><br><span class=\"line\">--apparent-sizeï¼šæ˜¾ç¤ºç›®å½•æˆ–æ–‡ä»¶è‡ªèº«çš„å¤§å°</span><br><span class=\"line\">-l ï¼šç»Ÿè®¡ç¡¬é“¾æ¥å ç”¨ç£ç›˜ç©ºé—´çš„å¤§å°</span><br><span class=\"line\">-L ï¼šç»Ÿè®¡ç¬¦å·é“¾æ¥æ‰€æŒ‡å‘çš„æ–‡ä»¶å ç”¨çš„ç£ç›˜ç©ºé—´å¤§å°</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"æ¡ˆä¾‹-5\"><a href=\"#æ¡ˆä¾‹-5\" class=\"headerlink\" title=\"æ¡ˆä¾‹\"></a>æ¡ˆä¾‹</h3><p>æ˜¾ç¤º /root æ–‡ä»¶å¤¹çš„å¤§å°ï¼Œä½†ä¸æ˜¾ç¤ºå…¶å­ç›®å½•å’Œæ–‡ä»¶çš„å¤§å°</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">$ du -sh</span><br><span class=\"line\">190M\t.</span><br></pre></td></tr></table></figure>\n\n<p>æ˜¾ç¤º /root æ–‡ä»¶å¤¹çš„å¤§å°ï¼Œå¹¶æ˜¾ç¤ºå…¶å­ç›®å½•å’Œæ–‡ä»¶çš„å¤§å°</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">$ du -ah</span><br><span class=\"line\">182M\t./jdk-8u161-linux-x64.tar.gz</span><br><span class=\"line\">8.5M\t./apache-maven-3.5.3-bin.tar.gz</span><br><span class=\"line\">28K\t./mysql57-community-release-el7-11.noarch.rpm</span><br><span class=\"line\">190M\t.</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"chmod\"><a href=\"#chmod\" class=\"headerlink\" title=\"chmod\"></a>chmod</h2><blockquote>\n<p>ä¿®æ”¹ æ–‡ä»¶|æ–‡ä»¶å¤¹æƒé™ï¼Œlinuxé‡Œé¢çš„ä¸œè¥¿éƒ½æ˜¯æ–‡ä»¶å½¢å¼å­˜æ”¾çš„ã€‚æ‰€ä»¥ç»å¸¸ä¼šè®¾è®¡åˆ°æƒé™é—®é¢˜ã€‚</p>\n</blockquote>\n<ul>\n<li>å‚æ•°</li>\n</ul>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">-c :åªè¾“å‡ºè¢«æ”¹å˜æƒé™çš„æ–‡ä»¶ä¿¡æ¯</span><br><span class=\"line\">-f :å½“chmodä¸èƒ½æ”¹å˜æ–‡ä»¶æ¨¡å¼æ—¶ï¼Œä¸é€šçŸ¥æ–‡ä»¶çš„ç”¨æˆ·</span><br><span class=\"line\">-R :å¯é€’å½’éå†å­ç›®å½•ï¼ŒæŠŠä¿®æ”¹åº”åˆ°ç›®å½•ä¸‹æ‰€æœ‰æ–‡ä»¶å’Œå­ç›®å½•</span><br><span class=\"line\">-v :æ— è®ºä¿®æ”¹æ˜¯å¦æˆåŠŸï¼Œè¾“å‡ºæ¯ä¸ªæ–‡ä»¶çš„ä¿¡æ¯</span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"comment\"># æ“ä½œç¬¦å·ï¼š</span></span><br><span class=\"line\"> </span><br><span class=\"line\">+ :æ·»åŠ æŸä¸ªæƒé™ã€‚</span><br><span class=\"line\">- :å–æ¶ˆæŸä¸ªæƒé™ã€‚</span><br><span class=\"line\">= :èµ‹äºˆç»™å®šæƒé™å¹¶å–æ¶ˆå…¶ä»–æ‰€æœ‰æƒé™ï¼ˆå¦‚æœæœ‰çš„è¯ï¼‰ã€‚</span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"comment\"># æƒé™è®¾ç½®å­—æ¯ï¼š</span></span><br><span class=\"line\"> </span><br><span class=\"line\">r :å¯è¯»</span><br><span class=\"line\">w :å¯å†™</span><br><span class=\"line\">x :å¯æ‰§è¡Œ</span><br><span class=\"line\">X :åªæœ‰ç›®æ ‡æ–‡ä»¶å¯¹æŸäº›ç”¨æˆ·æ˜¯å¯æ‰§è¡Œçš„æˆ–è¯¥ç›®æ ‡æ–‡ä»¶æ˜¯ç›®å½•æ—¶æ‰è¿½åŠ x å±æ€§</span><br><span class=\"line\">s :åœ¨æ–‡ä»¶æ‰§è¡Œæ—¶æŠŠè¿›ç¨‹çš„å±ä¸»æˆ–ç»„IDç½®ä¸ºè¯¥æ–‡ä»¶çš„æ–‡ä»¶å±ä¸»ã€‚æ–¹å¼â€œuï¼‹sâ€è®¾ç½®æ–‡ä»¶çš„ç”¨æˆ·IDä½ï¼Œâ€œgï¼‹sâ€è®¾ç½®ç»„IDä½</span><br><span class=\"line\">t :ä¿å­˜ç¨‹åºçš„æ–‡æœ¬åˆ°äº¤æ¢è®¾å¤‡ä¸Š</span><br><span class=\"line\">u :å½“å‰ç”¨æˆ·çš„æƒé™</span><br><span class=\"line\">g :å½“å‰ç”¨æˆ·åŒç»„çš„æƒé™</span><br><span class=\"line\">o :å…¶ä»–ç”¨æˆ·çš„æƒé™</span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"comment\"># æƒé™è®¾å®šæ•°å­—ï¼š</span></span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"comment\"># æ•°å­—è¡¨ç¤ºçš„å±æ€§å«ä¹‰ï¼š</span></span><br><span class=\"line\">0 ï¼šè¡¨ç¤ºæ²¡æœ‰æƒé™</span><br><span class=\"line\">1 ï¼šè¡¨ç¤ºå¯æ‰§è¡Œæƒé™</span><br><span class=\"line\">2 ï¼šè¡¨ç¤ºå¯å†™æƒé™</span><br><span class=\"line\">4 ï¼šè¡¨ç¤ºå¯è¯»æƒé™</span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"comment\"># ç„¶åå°†å…¶ç›¸åŠ ï¼Œæ‰€ä»¥æ•°å­—å±æ€§çš„æ ¼å¼åº”ä¸º3ä¸ªä»0åˆ°7çš„å…«è¿›åˆ¶æ•°ï¼Œå…¶é¡ºåºæ˜¯ï¼ˆuï¼‰ï¼ˆgï¼‰ï¼ˆoï¼‰ã€‚</span></span><br><span class=\"line\"><span class=\"comment\"># å¦‚æœæƒ³è®©æŸä¸ªæ–‡ä»¶çš„å±ä¸»æœ‰â€œè¯»/å†™â€äºŒç§æƒé™ï¼Œéœ€è¦æŠŠ4ï¼ˆå¯è¯»ï¼‰+2ï¼ˆå¯å†™ï¼‰ï¼6ï¼ˆè¯»/å†™ï¼‰ã€‚</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"æ¡ˆä¾‹-6\"><a href=\"#æ¡ˆä¾‹-6\" class=\"headerlink\" title=\"æ¡ˆä¾‹\"></a>æ¡ˆä¾‹</h3><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># æ¯”å¦‚è¦è¿è¡Œshè„šæœ¬æ¥å¯åŠ¨jarç¨‹åºï¼Œå¯èƒ½å°±éœ€è¦ä¿®æ”¹*.shçš„æƒé™</span></span><br><span class=\"line\">chmod +x start.sh</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># èµ‹äºˆ start.sh æ–‡ä»¶å¯è¯»æƒé™</span></span><br><span class=\"line\">chmod 444 start.sh</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># èµ‹äºˆ start.sh å¯è¯»ã€å¯å†™æƒé™</span></span><br><span class=\"line\">chmod 666 start.sh</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># èµ‹äºˆ start.sh å¯è¯»ã€å¯å†™ã€å¯æ‰§è¡Œæƒé™</span></span><br><span class=\"line\">chmod 777 start.sh</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># èµ‹äºˆ opt/ æ–‡ä»¶å¤¹ä»¥åŠå…¶å­ç›®å½•å’Œæ–‡ä»¶ å¯è¯»ã€å¯å†™ã€å¯æ‰§è¡Œæƒé™ã€‚</span></span><br><span class=\"line\">chmod -R 777 start.sh</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"yum\"><a href=\"#yum\" class=\"headerlink\" title=\"yum\"></a>yum</h2><blockquote>\n<p>è¿™ä¸ªå‘½ä»¤ç»å¸¸ä½¿ç”¨æ˜¯Centos ç³»ç»Ÿä¸­å¿«é€Ÿå®‰è£…å’Œä¸‹è½½çš„å·¥å…·ï¼Œå½“ç„¶å¹¶ä¸æ˜¯Centosä¸“å±çš„å‘½ä»¤ã€‚</p>\n</blockquote>\n<ul>\n<li>å‚æ•°</li>\n</ul>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># å‘½ä»¤ï¼š</span></span><br><span class=\"line\"> </span><br><span class=\"line\">update - æ£€ç´¢ æ–°çš„åŒ…åˆ—è¡¨</span><br><span class=\"line\">upgrade - å‡çº§ è½¯ä»¶åŒ…</span><br><span class=\"line\">search - æœç´¢ è½¯ä»¶åŒ…</span><br><span class=\"line\">install - å®‰è£… è½¯ä»¶åŒ…</span><br><span class=\"line\">list - åˆ—å‡º è½¯ä»¶åŒ…æˆ–è€…è½¯ä»¶åŒ…ç»„</span><br><span class=\"line\">info - æ˜¾ç¤ºè½¯ä»¶åŒ…æˆ–è€…è½¯ä»¶åŒ…ç»„çš„è¯¦ç»†ä¿¡æ¯</span><br><span class=\"line\">erase - åˆ é™¤ è½¯ä»¶åŒ…ï¼ˆè¿™ä¸¤ä¸ªå‘½ä»¤ä¸€æ ·ï¼‰</span><br><span class=\"line\">remove - åˆ é™¤ è½¯ä»¶åŒ…ï¼ˆè¿™ä¸¤ä¸ªå‘½ä»¤ä¸€æ ·ï¼‰</span><br><span class=\"line\">groupinfo - æ˜¾ç¤º æœ‰å…³åŒ…ç»„çš„è¯¦ç»†ä¿¡æ¯</span><br><span class=\"line\">groupinstall - å®‰è£… è½¯ä»¶åŒ…ç»„ï¼ˆå°±åƒä¸€ç§è½¯ä»¶åˆé›†ï¼‰</span><br><span class=\"line\">grouplist - åˆ—å‡º å¯ç”¨çš„è½¯ä»¶åŒ…ç»„</span><br><span class=\"line\">groupremove - åˆ é™¤ è½¯ä»¶åŒ…ç»„</span><br><span class=\"line\">check - æ£€æŸ¥ è½¯ä»¶åŒ…</span><br><span class=\"line\">check-update - æ£€æŸ¥ å¯æ›´æ–°çš„è½¯ä»¶åŒ…</span><br><span class=\"line\">clean - æ¸…é™¤ ç¼“å­˜ç›®å½•å†…çš„è½¯ä»¶åŒ…</span><br><span class=\"line\">deplist - åˆ—å‡º ä¸€ä¸ªåŒ…çš„ä¾èµ–å…³ç³»</span><br><span class=\"line\">distribution-synchronization - åŒæ­¥ å·²å®‰è£…çš„è½¯ä»¶åŒ…åˆ°æœ€æ–°çš„ç‰ˆæœ¬</span><br><span class=\"line\">downgrad - é™çº§ ä¸€ä¸ªè½¯ä»¶åŒ…</span><br><span class=\"line\">reinstall - é‡æ–°å®‰è£… è½¯ä»¶åŒ…ï¼ˆè‡ªåŠ¨åˆ é™¤é‡è£…ï¼‰</span><br><span class=\"line\">repolist - æ˜¾ç¤º é…ç½®çš„è½¯ä»¶åŒ…ä»“åº“</span><br><span class=\"line\">resolvedep - ç¡®å®š è½¯ä»¶åŒ…éœ€è¦çš„ä¾èµ–å…³ç³»</span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"comment\"># é€‰é¡¹ï¼š</span></span><br><span class=\"line\">-t ï¼šå®¹å¿é”™è¯¯</span><br><span class=\"line\">-C ï¼šå®Œå…¨ä»ç³»ç»Ÿç¼“å­˜è¿è¡Œï¼Œä¸è¦æ›´æ–°ç¼“å­˜</span><br><span class=\"line\">-R åˆ†é’Ÿ ï¼šæœ€å¤§å‘½ä»¤ç­‰å¾…æ—¶é—´</span><br><span class=\"line\">-q ï¼šå®‰é™çš„æ“ä½œ</span><br><span class=\"line\">-y ï¼šå¯¹äºæ‰€æœ‰é—®é¢˜å›ç­”æ˜¯</span><br><span class=\"line\">--nogpgcheck ï¼šç¦ç”¨gpgç­¾åæ£€æŸ¥</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"æ¡ˆä¾‹-7\"><a href=\"#æ¡ˆä¾‹-7\" class=\"headerlink\" title=\"æ¡ˆä¾‹\"></a>æ¡ˆä¾‹</h3><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># æ£€ç´¢ æ–°çš„åŒ…åˆ—è¡¨</span></span><br><span class=\"line\">yum update</span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"comment\"># å®‰è£… Nginx è½¯ä»¶åŒ…</span></span><br><span class=\"line\">yum install nginx</span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"comment\"># å®‰è£… Development Tools è½¯ä»¶åŒ…ç»„ï¼ˆè¿™ä¸ªè½¯ä»¶åŒ…ç»„ä¸­åŒ…å«äº†ç¼–è¯‘æ‰€éœ€çš„è½¯ä»¶ï¼‰</span></span><br><span class=\"line\"><span class=\"comment\"># æ³¨æ„ï¼šå½“è½¯ä»¶åŒ…æˆ–è€…è½¯ä»¶åŒ…ç»„çš„åå­—ä¸­åŒ…å«ç©ºæ ¼çš„æ—¶å€™ï¼Œè¯·æŠŠ è½¯ä»¶åŒ…æˆ–è½¯ä»¶åŒ…ç»„ åŠ ä¸ŠåŒå¼•å·ï¼</span></span><br><span class=\"line\">yum groupinstall <span class=\"string\">\"Development Tools\"</span></span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"comment\"># å¸è½½ Nginx è½¯ä»¶åŒ…</span></span><br><span class=\"line\">yum erase nginx / yum remove nginx</span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"comment\"># å¸è½½ Development Tools è½¯ä»¶åŒ…ç»„</span></span><br><span class=\"line\">yum groupremove <span class=\"string\">\"Development Tools\"</span></span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"comment\"># å‡çº§ æ‰€æœ‰å¯æ›´æ–°çš„è½¯ä»¶åŒ…</span></span><br><span class=\"line\">yum upgrade</span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"comment\"># å‡çº§ Nginx å¯æ›´æ–°çš„è½¯ä»¶åŒ…</span></span><br><span class=\"line\">yum upgrade nginx</span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"comment\"># åœ¨å®‰è£…è½¯ä»¶å’Œå¸è½½çš„æ—¶å€™ï¼Œä¸ºäº†é¿å…è¯¯æ“ä½œï¼Œéƒ½ä¼šè¯¢é—®æ˜¯å¦ç»§ç»­ï¼Œæ¯æ¬¡éƒ½è¦è¾“å…¥ y æ¥ç¡®å®šä¼šå¾ˆéº»çƒ¦ï¼Œå¯ä»¥åŠ ä¸Š -y å‚æ•°</span></span><br><span class=\"line\"><span class=\"comment\"># å®‰è£… Nginx è½¯ä»¶åŒ… å¹¶ä¸æ˜¾ç¤ºç¡®å®šæç¤º</span></span><br><span class=\"line\">yum install nginx -y</span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"comment\"># å¸è½½ Nginx è½¯ä»¶åŒ… å¹¶ä¸æ˜¾ç¤ºç¡®å®šæç¤º</span></span><br><span class=\"line\">yum erase nginx -y / yum remove nginx -y</span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"comment\"># æœç´¢ Nginx è½¯ä»¶åŒ…æ˜¯å¦å­˜ç€</span></span><br><span class=\"line\">yum search nginx</span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"comment\"># åˆ—å‡º å¯ç”¨çš„è½¯ä»¶åŒ…</span></span><br><span class=\"line\">yum list</span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"comment\"># åˆ—å‡º å¯ç”¨çš„è½¯ä»¶åŒ…ç»„</span></span><br><span class=\"line\">yum grouplist</span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"comment\"># æ¸…é™¤ ç¼“å­˜ç›®å½•ä¸­çš„æ‰€æœ‰è½¯ä»¶åŒ…</span></span><br><span class=\"line\">yum clean</span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"comment\"># æ¸…é™¤ ç¼“å­˜ç›®å½•ä¸­çš„ Nginx è½¯ä»¶åŒ…</span></span><br><span class=\"line\">yum clean nginx</span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"comment\"># é‡è£… Nginx è½¯ä»¶åŒ…</span></span><br><span class=\"line\">yum reinstall nginx</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"head\"><a href=\"#head\" class=\"headerlink\" title=\"head\"></a>head</h2><blockquote>\n<p>è¿™ä¸ªå‘½ä»¤ä¸»è¦ç”¨äºæŸ¥è¯¢æ–‡ä»¶å¤´éƒ¨å†…å®¹ï¼Œå°±æ˜¯æ­£æŸ¥è¯¢ã€‚</p>\n</blockquote>\n<ul>\n<li>å‚æ•°</li>\n</ul>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">-c æ•°å­—ï¼šæ˜¾ç¤ºæŒ‡å®šæ–‡ä»¶çš„å‰ xx å­—èŠ‚çš„å†…å®¹ï¼ˆbytesï¼‰</span><br><span class=\"line\">-n æ•°å­—ï¼šæ˜¾ç¤ºæŒ‡å®šæ–‡ä»¶çš„å‰ xx è¡Œçš„å†…å®¹</span><br><span class=\"line\">-q ï¼šä¸æ˜¾ç¤ºåŒ…å«æŒ‡å®šæ–‡ä»¶åçš„æ–‡ä»¶å¤´ï¼ˆå½“ä½¿ç”¨ headæ‰“å¼€å¤šä¸ªæ–‡ä»¶çš„æ—¶å€™ï¼Œä¼šå»åœ¨æ¯ä¸ªæ–‡ä»¶è¾“å‡ºç»“æœçš„é¡¶éƒ¨æ·»åŠ ä¸€ä¸ªåŒ…å«æ–‡ä»¶åçš„æ–‡ä»¶å¤´ç”¨äºåŒºåˆ†ï¼‰</span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"comment\"># æ›´å¤šçš„å‘½ä»¤å¯ä»¥ç”¨ head --help æ¥æŸ¥çœ‹ã€‚</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"æ¡ˆä¾‹-8\"><a href=\"#æ¡ˆä¾‹-8\" class=\"headerlink\" title=\"æ¡ˆä¾‹\"></a>æ¡ˆä¾‹</h3><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\"># åˆ›å»ºä¸€ä¸ªæ–‡ä»¶ï¼Œé‡Œé¢çš„å†…å®¹å¦‚ä¸‹</span><br><span class=\"line\">$ touch demo.txt #åœ¨ç¼–è¾‘å†…å®¹æ·»åŠ æ•°æ®</span><br><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># æŸ¥çœ‹ demo.txtæ–‡ä»¶çš„å…¨éƒ¨å†…å®¹</span></span><br><span class=\"line\">head log.txt</span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"comment\"># æŸ¥çœ‹ demo.txtæ–‡ä»¶çš„å‰ 4å­—èŠ‚çš„å†…å®¹</span></span><br><span class=\"line\">head -c 4 demo.txt</span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"comment\"># è¾“å‡ºç¤ºä¾‹</span></span><br><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"comment\"># æŸ¥çœ‹ demo.txtæ–‡ä»¶çš„å‰ 3è¡Œçš„å†…å®¹</span></span><br><span class=\"line\">head -n 3 demo.txt</span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"comment\"># è¾“å‡ºç¤ºä¾‹</span></span><br><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># æŸ¥çœ‹ demo.txtæ–‡ä»¶çš„ä»å€’æ•°ç¬¬3è¡Œåˆ°è¡Œé¦–çš„å†…å®¹</span></span><br><span class=\"line\">head -n -3 demo.txt</span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"comment\"># è¾“å‡ºç¤ºä¾‹</span></span><br><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"tail\"><a href=\"#tail\" class=\"headerlink\" title=\"tail\"></a>tail</h2><blockquote>\n<p>ä¸€èˆ¬ç”¨æ¥æŸ¥çœ‹æ–‡ä»¶å°¾éƒ¨å†…å®¹ï¼Œæ¯”å¦‚è¦æŒç»­è§‚å¯Ÿä¸€ä¸ªlogè¾“å‡ºçš„æ—¶å€™ã€‚</p>\n</blockquote>\n<ul>\n<li>å‚æ•°</li>\n</ul>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">-c æ•°å­—ï¼šå¦‚æœæ•°å­—ä¸ºæ­£æ•°(ä¾‹å¦‚ -c +5)ï¼Œæ˜¾ç¤ºæŒ‡å®šæ–‡ä»¶ä»è¡Œé¦–ç¬¬ xx å­—èŠ‚åˆ°æœ€åçš„å†…å®¹ï¼›å¦‚æœæ•°å­—ä¸ºè´Ÿæ•°(ä¾‹å¦‚ -c -5)ï¼Œæ˜¾ç¤ºæŒ‡å®šæ–‡ä»¶ä»è¡Œå°¾ç¬¬ xx å­—èŠ‚åˆ°æœ€åå†…å®¹ã€‚</span><br><span class=\"line\">-n æ•°å­—ï¼šå¦‚æœæ•°å­—ä¸ºæ­£æ•°(ä¾‹å¦‚ -c +3)ï¼Œæ˜¾ç¤ºæŒ‡å®šæ–‡ä»¶ä»è¡Œé¦–ç¬¬ xx è¡Œåˆ°æœ€åçš„å†…å®¹ï¼›å¦‚æœæ•°å­—ä¸ºè´Ÿæ•°(ä¾‹å¦‚ -c -3)ï¼Œæ˜¾ç¤ºæŒ‡å®šæ–‡ä»¶ä»è¡Œå°¾ç¬¬ xx è¡Œåˆ°æœ€åçš„å†…å®¹ã€‚</span><br><span class=\"line\">-f ï¼šå³æ—¶è¾“å‡ºæ–‡ä»¶å˜åŒ–åå¢åŠ çš„å†…å®¹ï¼Œä¹Ÿå°±æ˜¯ç›‘è§†ä¸€ä¸ªæ–‡ä»¶çš„å†…å®¹å˜åŒ–ï¼ˆå¸¸ç”¨äºç›‘è§†æ—¥å¿—è¾“å‡ºï¼‰ï¼Œä½¿ç”¨ Ctrlï¼‹C ç»ˆæ­¢</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"æ¡ˆä¾‹-9\"><a href=\"#æ¡ˆä¾‹-9\" class=\"headerlink\" title=\"æ¡ˆä¾‹\"></a>æ¡ˆä¾‹</h3><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\"># åˆ›å»ºä¸€ä¸ªæ–‡ä»¶ï¼Œé‡Œé¢çš„å†…å®¹å¦‚ä¸‹</span><br><span class=\"line\">$ touch demo.txt #åœ¨ç¼–è¾‘å†…å®¹æ·»åŠ æ•°æ®</span><br><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># æŸ¥çœ‹ demo.txtæ–‡ä»¶çš„å…¨éƒ¨å†…å®¹</span></span><br><span class=\"line\">tail demo.txt</span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"comment\"># æŸ¥çœ‹ demo.txtæ–‡ä»¶ä»è¡Œé¦– ç¬¬6å­—èŠ‚åˆ°æœ€åçš„å†…å®¹</span></span><br><span class=\"line\">tail -c +25 demo.txt</span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"comment\"># è¾“å‡ºç¤ºä¾‹</span></span><br><span class=\"line\"></span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"comment\"># æŸ¥çœ‹ demo.txtæ–‡ä»¶ä»è¡Œå°¾ ç¬¬2å­—èŠ‚åˆ°æœ€å‰é¢çš„å†…å®¹</span></span><br><span class=\"line\">tail -c -2 demo.txt</span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"comment\"># è¾“å‡ºç¤ºä¾‹</span></span><br><span class=\"line\">5</span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"comment\"># æŸ¥çœ‹ demo.txtæ–‡ä»¶çš„ä»ç¬¬2è¡Œåˆ°æœ€åä¸€è¡Œçš„å†…å®¹</span></span><br><span class=\"line\">tail -n +2 log.txt</span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"comment\"># è¾“å‡ºç¤ºä¾‹</span></span><br><span class=\"line\">doubi2</span><br><span class=\"line\">doubi3</span><br><span class=\"line\">doubi4</span><br><span class=\"line\">doubi5</span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"comment\"># æŸ¥çœ‹ demo.txtæ–‡ä»¶çš„å 2è¡Œçš„å†…å®¹</span></span><br><span class=\"line\">tail -n -2 demo.txt</span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"comment\"># è¾“å‡ºç¤ºä¾‹</span></span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"comment\"># æŒç»­æŸ¥çœ‹ï¼ˆç›‘è§†ï¼‰ log.txtæ–‡ä»¶çš„å˜åŒ–å†…å®¹ï¼ˆæ–°å¢åŠ çš„å†…å®¹ï¼‰ï¼Œä½¿ç”¨ Ctrlï¼‹C ç»ˆæ­¢</span></span><br><span class=\"line\">tail -f demo.txt</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"tar-gz-zip\"><a href=\"#tar-gz-zip\" class=\"headerlink\" title=\"tar gz zip\"></a>tar gz zip</h2><blockquote>\n<p>è¿™å‡ ä¸ªæ˜¯ç”¨æ¥è§£å‹æ–‡ä»¶çš„ï¼Œåœ¨æºç å®‰è£…æˆ–è€…æ˜¯è§£å‹çš„æ—¶å€™éœ€è¦ç”¨åˆ°ã€‚</p>\n</blockquote>\n<h3 id=\"æ¡ˆä¾‹-10\"><a href=\"#æ¡ˆä¾‹-10\" class=\"headerlink\" title=\"æ¡ˆä¾‹\"></a>æ¡ˆä¾‹</h3><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># è§£å‹åç¼€ä¸º .tar çš„å‹ç¼©åŒ…</span></span><br><span class=\"line\">tar -xf log.tar</span><br><span class=\"line\">â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”</span><br><span class=\"line\"><span class=\"comment\"># è§£å‹åç¼€ä¸º .tar.xz çš„å‹ç¼©åŒ…</span></span><br><span class=\"line\">tar -xJf log.tar.xz</span><br><span class=\"line\">â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”</span><br><span class=\"line\"><span class=\"comment\"># è§£å‹åç¼€ä¸º .tar.gz çš„å‹ç¼©åŒ…ï¼Œæœ‰ä¸¤ä¸ªæ–¹æ³•</span></span><br><span class=\"line\">tar -xzf log.tar.gz</span><br><span class=\"line\">â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”</span><br><span class=\"line\"><span class=\"comment\"># è§£å‹åç¼€ä¸º .gz çš„å‹ç¼©åŒ…ï¼Œæœ‰ä¸¤ä¸ªæ–¹æ³•ï¼Œå¦‚æç¤ºå‘½ä»¤ä¸å­˜åœ¨ï¼Œè¯·å®‰è£… yum install gzip -y / apt-get install gzip -y</span></span><br><span class=\"line\">gzip -d log.gz</span><br><span class=\"line\">gunzip log.gz</span><br><span class=\"line\">â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”</span><br><span class=\"line\"><span class=\"comment\"># è§£å‹åç¼€ä¸º .bz / .bz2 / tar.bz2 çš„å‹ç¼©åŒ…ï¼Œæœ‰ä¸¤ä¸ªæ–¹æ³•</span></span><br><span class=\"line\">bzip2 -d log.bz</span><br><span class=\"line\">bunzip2 log.bz</span><br><span class=\"line\">tar -jxf log.tar.bz</span><br><span class=\"line\"> </span><br><span class=\"line\">bzip2 -d log.bz2</span><br><span class=\"line\">bunzip2 log.bz2</span><br><span class=\"line\">tar -jxf log.tar.bz2</span><br><span class=\"line\">â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”</span><br><span class=\"line\"><span class=\"comment\"># è§£å‹åç¼€ä¸º .Z / tar.Z çš„å‹ç¼©åŒ…ï¼Œæœ‰ä¸¤ä¸ªæ–¹æ³•</span></span><br><span class=\"line\">uncompress log.Z log.txt</span><br><span class=\"line\">uncompress log.Z <span class=\"built_in\">log</span></span><br><span class=\"line\">â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”</span><br><span class=\"line\">tar xZf log.tar.Z log.txt</span><br><span class=\"line\">tar xZf log.tar.Z <span class=\"built_in\">log</span></span><br><span class=\"line\">â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”</span><br><span class=\"line\"><span class=\"comment\"># è§£å‹åç¼€ä¸º .rar çš„å‹ç¼©åŒ…ï¼Œå¦‚æç¤ºå‘½ä»¤ä¸å­˜åœ¨ï¼Œè¯·å®‰è£… yum install unrar -y / apt-get install unrar -y ï¼Œæ³¨æ„ rar å’Œ unrar æ˜¯åˆ†å¼€çš„</span></span><br><span class=\"line\">unrar x log.rar</span><br><span class=\"line\">â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”</span><br><span class=\"line\"><span class=\"comment\"># è§£å‹åç¼€ä¸º .zip çš„å‹ç¼©åŒ…ï¼Œå¦‚æç¤ºå‘½ä»¤ä¸å­˜åœ¨ï¼Œè¯·å®‰è£… yum install unzip -y / apt-get install unzip -yï¼Œæ³¨æ„ zip å’Œ unzip æ˜¯åˆ†å¼€çš„</span></span><br><span class=\"line\">unzip log.zip</span><br></pre></td></tr></table></figure>\n\n","categories":["å®è·µ"],"tags":["Linux"]},{"title":"2014-10-10-åå °å®ä¹ çš„æ—¥å­","url":"/posts/543698596/","content":"<blockquote>\n<p>2014-10-10å‡ºå‘å®ä¹ ï¼ŒèŒåœºèŒæ–°ç¬¬ä¸€æ¬¡å»å¤§å‹é‡å¤–å·¥åœ°æµªã€‚é•¿æœŸåœ¨å°åŸå¸‚é‡Œé¢çªç„¶è·‘åˆ°é‡å¤–ï¼Œå…³é”®è¿˜æ²¡å•¥äººã€‚æ”¾é£è‡ªæˆ‘ã€‚</p>\n</blockquote>\n<p><img src=\"https://z201.oss-cn-shanghai.aliyuncs.com/%E6%97%85%E6%B8%B8/%E5%8D%81%E5%A0%B0%E5%AE%9E%E4%B9%A0%E7%9A%84%E6%97%A5%E5%AD%90/NWP_121016_0001-min.jpg\"></p>\n<a id=\"more\"></a>\n\n<p>è¿™ç©æ„æ˜¯æµ‹é‡ä»ªå™¨å·®ä¸å¤šåä¸‡å§ï¼Œæ¯å¤©å¸¦ç€æ»¡å±±è·‘ã€‚</p>\n<p><img src=\"https://z201.oss-cn-shanghai.aliyuncs.com/%E6%97%85%E6%B8%B8/%E5%8D%81%E5%A0%B0%E5%AE%9E%E4%B9%A0%E7%9A%84%E6%97%A5%E5%AD%90/NWP_121016_0005-min.jpg\"></p>\n<p>ç¬¬ä¸€æ¬¡æ¥è§¦å¤§å‹æœºæ¢°ï¼Œåœ¨ç¦»åœ°é¢äºŒåå¤šç±³é«˜çš„æ¢æ¿ä¸Šé¢ã€‚å“å°¿~ï¼Œæ¶æ¡¥æœºï¼Œå¬è¯´è¦2000Wï¼Œä¸€å¤©ç§Ÿé‡‘8000ã€‚</p>\n<p><img src=\"https://z201.oss-cn-shanghai.aliyuncs.com/%E6%97%85%E6%B8%B8/%E5%8D%81%E5%A0%B0%E5%AE%9E%E4%B9%A0%E7%9A%84%E6%97%A5%E5%AD%90/WP_000165-min.jpg\"></p>\n<p><img src=\"https://z201.oss-cn-shanghai.aliyuncs.com/%E6%97%85%E6%B8%B8/%E5%8D%81%E5%A0%B0%E5%AE%9E%E4%B9%A0%E7%9A%84%E6%97%A5%E5%AD%90/WP_000174-min.jpg\"></p>\n<p><img src=\"https://z201.oss-cn-shanghai.aliyuncs.com/%E6%97%85%E6%B8%B8/%E5%8D%81%E5%A0%B0%E5%AE%9E%E4%B9%A0%E7%9A%84%E6%97%A5%E5%AD%90/WP_000175-min.jpg\"></p>\n<p><img src=\"https://z201.oss-cn-shanghai.aliyuncs.com/%E6%97%85%E6%B8%B8/%E5%8D%81%E5%A0%B0%E5%AE%9E%E4%B9%A0%E7%9A%84%E6%97%A5%E5%AD%90/WP_000176-min.jpg\"></p>\n<p>æµ‹é‡å°é˜Ÿçš„ä¸“è½¦ï¼Œæˆ‘ä»¬å°é˜Ÿå°±4ä¸ªäººã€‚</p>\n<p><img src=\"https://z201.oss-cn-shanghai.aliyuncs.com/%E6%97%85%E6%B8%B8/%E5%8D%81%E5%A0%B0%E5%AE%9E%E4%B9%A0%E7%9A%84%E6%97%A5%E5%AD%90/WP_000192-min.jpg\"></p>\n<p>ç«™è¿œç‚¹ï¼Œç‚¸å±±äº†ã€‚</p>\n<p><img src=\"https://z201.oss-cn-shanghai.aliyuncs.com/%E6%97%85%E6%B8%B8/%E5%8D%81%E5%A0%B0%E5%AE%9E%E4%B9%A0%E7%9A%84%E6%97%A5%E5%AD%90/WP_000195-min.jpg\"></p>\n<p>é¡¹ç›®éƒ¨çš„æ±ªæ±ªï¼Œå¯¹æˆ‘é•¿æœŸä¸å‹å¥½ã€‚</p>\n<p><img src=\"https://z201.oss-cn-shanghai.aliyuncs.com/%E6%97%85%E6%B8%B8/%E5%8D%81%E5%A0%B0%E5%AE%9E%E4%B9%A0%E7%9A%84%E6%97%A5%E5%AD%90/WP_000251-min.jpg\"></p>\n<p><img src=\"https://z201.oss-cn-shanghai.aliyuncs.com/%E6%97%85%E6%B8%B8/%E5%8D%81%E5%A0%B0%E5%AE%9E%E4%B9%A0%E7%9A%84%E6%97%A5%E5%AD%90/WP_000339-min.jpg\"></p>\n<p><img src=\"https://z201.oss-cn-shanghai.aliyuncs.com/%E6%97%85%E6%B8%B8/%E5%8D%81%E5%A0%B0%E5%AE%9E%E4%B9%A0%E7%9A%84%E6%97%A5%E5%AD%90/WP_000340-min.jpg\"></p>\n<p>æŠ¤å¡</p>\n<p><img src=\"https://z201.oss-cn-shanghai.aliyuncs.com/%E6%97%85%E6%B8%B8/%E5%8D%81%E5%A0%B0%E5%AE%9E%E4%B9%A0%E7%9A%84%E6%97%A5%E5%AD%90/WP_000341-min.jpg\"></p>\n<p>å…¬å¸çš„é«˜é€Ÿå…»æŠ¤åŸºåœ°</p>\n<p><img src=\"https://z201.oss-cn-shanghai.aliyuncs.com/%E6%97%85%E6%B8%B8/%E5%8D%81%E5%A0%B0%E5%AE%9E%E4%B9%A0%E7%9A%84%E6%97%A5%E5%AD%90/WP_000344-min.jpg\"></p>\n<p><img src=\"https://z201.oss-cn-shanghai.aliyuncs.com/%E6%97%85%E6%B8%B8/%E5%8D%81%E5%A0%B0%E5%AE%9E%E4%B9%A0%E7%9A%84%E6%97%A5%E5%AD%90/WP_000345-min.jpg\"></p>\n<p><img src=\"https://z201.oss-cn-shanghai.aliyuncs.com/%E6%97%85%E6%B8%B8/%E5%8D%81%E5%A0%B0%E5%AE%9E%E4%B9%A0%E7%9A%84%E6%97%A5%E5%AD%90/WP_000374-min.jpg\"></p>\n<p><img src=\"https://z201.oss-cn-shanghai.aliyuncs.com/%E6%97%85%E6%B8%B8/%E5%8D%81%E5%A0%B0%E5%AE%9E%E4%B9%A0%E7%9A%84%E6%97%A5%E5%AD%90/WP_000381-min.jpg\"></p>\n<p>ä¸€å¼€å§‹ä¸ç†è§£ä¸ºä»€ä¹ˆç”Ÿé”ˆäº†è¿˜å¯ä»¥ç”¨ï¼Œåæ¥çŸ¥é“æ–½å·¥çš„æ—¶å€™ä¼šäºŒæ¬¡å¤„ç†ã€‚</p>\n<p><img src=\"https://z201.oss-cn-shanghai.aliyuncs.com/%E6%97%85%E6%B8%B8/%E5%8D%81%E5%A0%B0%E5%AE%9E%E4%B9%A0%E7%9A%84%E6%97%A5%E5%AD%90/WP_000400-min.jpg\"></p>\n<p>æŠ½æ ·æ£€æŸ¥</p>\n<p><img src=\"https://z201.oss-cn-shanghai.aliyuncs.com/%E6%97%85%E6%B8%B8/%E5%8D%81%E5%A0%B0%E5%AE%9E%E4%B9%A0%E7%9A%84%E6%97%A5%E5%AD%90/WP_000429-min.jpg\"></p>\n","categories":["éšè®°"],"tags":["éšè®°","å·¥ä½œ"]},{"title":"åˆæ¢Eurekaä¸Zookeeper","url":"/posts/596045077/","content":"<blockquote>\n<p>æœåŠ¡æ³¨å†Œä¸­å¿ƒï¼Œç»™å®¢æˆ·ç«¯æä¾›å¯ä¾›è°ƒç”¨çš„æœåŠ¡åˆ—è¡¨ï¼Œå®¢æˆ·ç«¯åœ¨è¿›è¡Œè¿œç¨‹æœåŠ¡è°ƒç”¨æ—¶ï¼Œæ ¹æ®æœåŠ¡åˆ—è¡¨ç„¶åé€‰æ‹©æœåŠ¡æä¾›æ–¹çš„æœåŠ¡åœ°å€è¿›è¡ŒæœåŠ¡è°ƒç”¨ã€‚æœåŠ¡æ³¨å†Œä¸­å¿ƒåœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸­å¤§é‡åº”ç”¨ï¼Œæ˜¯åˆ†å¸ƒå¼ç³»ç»Ÿä¸­ä¸å¯æˆ–ç¼ºçš„ç»„ä»¶ï¼Œä¾‹å¦‚rocketmqçš„name serverï¼Œhdfsä¸­çš„namenodeï¼Œdubboä¸­çš„zkæ³¨å†Œä¸­å¿ƒï¼Œspring cloudä¸­çš„æœåŠ¡æ³¨å†Œä¸­å¿ƒeurekaã€‚  åœ¨spring cloudä¸­ï¼Œé™¤äº†å¯ä»¥ä½¿ç”¨eurekaä½œä¸ºæ³¨å†Œä¸­å¿ƒå¤–ï¼Œè¿˜å¯ä»¥é€šè¿‡é…ç½®çš„æ–¹å¼ä½¿ç”¨zookeeperä½œä¸ºæ³¨å†Œä¸­å¿ƒã€‚æ—¢ç„¶è¿™æ ·ï¼Œæˆ‘ä»¬è¯¥å¦‚ä½•é€‰æ‹©æ³¨å†Œä¸­å¿ƒçš„å®ç°å‘¢ï¼Ÿ</p>\n</blockquote>\n<h3 id=\"CAPå®šç†\"><a href=\"#CAPå®šç†\" class=\"headerlink\" title=\"CAPå®šç†\"></a>CAPå®šç†</h3><blockquote>\n<p>åˆè¢«ç§°ä½œå¸ƒé²å°”å®šç†ï¼ˆEric Brewerï¼‰å®ƒæŒ‡å‡ºå¯¹äºä¸€ä¸ªåˆ†å¸ƒå¼è®¡ç®—ç³»ç»Ÿæ¥è¯´ï¼Œä¸å¯èƒ½åŒæ—¶æ»¡è¶³ä»¥ä¸‹ä¸‰ç‚¹ï¼š</p>\n</blockquote>\n<ol>\n<li>å¼ºä¸€è‡´æ€§ï¼ˆConsistencyï¼‰ï¼šç³»ç»Ÿåœ¨æ‰§è¡ŒæŸé¡¹æ“ä½œåæ•°æ®çŠ¶æ€ä»ç„¶å¤„äºä¸€è‡´ï¼Œä¾‹å¦‚åœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸­ï¼Œæ›´æ–°æ“ä½œæ‰§è¡ŒæˆåŠŸåæ‰€æœ‰çš„ç”¨æˆ·éƒ½åº”è¯¥è¯»å–åˆ°æœ€æ–°çš„å€¼ï¼Œè¿™æ ·çš„ç³»ç»Ÿè¢«è®¤ä¸ºå…·æœ‰å¼ºä¸€è‡´æ€§ã€‚</li>\n<li>å¯ç”¨æ€§ï¼ˆAvailabilityï¼‰ï¼šæ¯ä¸€ä¸ªæ“ä½œæ€»æ˜¯èƒ½å¤Ÿåœ¨ä¸€å®šçš„æ—¶é—´å†…è¿”å›ç»“æœ</li>\n<li>åˆ†åŒºå®¹é”™æ€§ï¼ˆPartition toleranceï¼‰ï¼šå•ä¸ªèŠ‚ç‚¹æ•…éšœä¸åº”å¯¼è‡´æ•´ä¸ªç³»ç»Ÿå´©æºƒï¼Œä¹Ÿå°±æ˜¯è¯´å°½ç®¡ç½‘ç»œåœ¨èŠ‚ç‚¹ä¹‹é—´ä¸¢å¼ƒï¼ˆæˆ–å»¶è¿Ÿï¼‰ä»»æ„æ•°é‡çš„æ¶ˆæ¯ï¼Œä½†æ˜¯ç³»ç»Ÿç»§ç»­æ“ä½œã€‚</li>\n</ol>\n<blockquote>\n<p>æ ¹æ®CAPåŸç†å°†æ•°æ®åº“åˆ†æˆäº†æ»¡è¶³CAåŸåˆ™ã€æ»¡è¶³CPåŸåˆ™å’Œæ»¡è¶³APåŸåˆ™ä¸‰å¤§ç±»</p>\n</blockquote>\n<ol>\n<li>CAï¼šå•ç‚¹é›†ç¾¤ï¼Œæ»¡è¶³ä¸€è‡´æ€§ï¼Œå¯ç”¨æ€§ï¼Œé€šå¸¸åœ¨å¯æ‰©å±•æ€§ä¸Šä¸å¤ªå¼ºå¤§ï¼Œæ¯”å¦‚RDBã€‚</li>\n<li>CPï¼šæ»¡è¶³ä¸€è‡´æ€§å’Œåˆ†åŒºå®¹é”™æ€§ï¼Œé€šå¸¸æ€§èƒ½ä¸æ˜¯ç‰¹åˆ«é«˜ï¼Œå¦‚åˆ†å¸ƒå¼æ•°æ®åº“ã€‚</li>\n<li>APï¼šæ»¡è¶³å¯ç”¨æ€§å’Œåˆ†åŒºå®¹é”™æ€§ï¼Œé€šå¸¸å¯èƒ½å¯¹ä¸€è‡´æ€§è¦æ±‚ä½ä¸€äº›ï¼Œå¦‚å¤§å¤šæ•°çš„NoSQLã€‚</li>\n</ol>\n<h3 id=\"BASEï¼ˆBasically-Availableï¼ŒSoft-stateï¼ŒEventual-consistencyï¼‰\"><a href=\"#BASEï¼ˆBasically-Availableï¼ŒSoft-stateï¼ŒEventual-consistencyï¼‰\" class=\"headerlink\" title=\"BASEï¼ˆBasically Availableï¼ŒSoft-stateï¼ŒEventual consistencyï¼‰\"></a>BASEï¼ˆBasically Availableï¼ŒSoft-stateï¼ŒEventual consistencyï¼‰</h3><blockquote>\n<p>eBayçš„æ¶æ„å¸ˆDan Pritchettæºäºå¯¹å¤§è§„æ¨¡åˆ†å¸ƒå¼ç³»ç»Ÿçš„å®è·µæ€»ç»“ï¼Œåœ¨ACMä¸Šå‘è¡¨æ–‡ç« æå‡ºBASEç†è®ºï¼ŒBASEç†è®ºæ˜¯å¯¹CAPç†è®ºçš„å»¶ä¼¸ï¼Œæ ¸å¿ƒæ€æƒ³æ˜¯å³ä½¿æ— æ³•åšåˆ°å¼ºä¸€è‡´æ€§ï¼ˆStrong Consistencyï¼ŒCAPçš„ä¸€è‡´æ€§å°±æ˜¯å¼ºä¸€è‡´æ€§ï¼‰ï¼Œä½†åº”ç”¨å¯ä»¥é‡‡ç”¨é€‚åˆçš„æ–¹å¼è¾¾åˆ°æœ€ç»ˆä¸€è‡´æ€§ï¼ˆEventual Consitencyï¼‰ã€‚</p>\n</blockquote>\n<ol>\n<li>åŸºæœ¬å¯ç”¨ï¼ˆBasically Availableï¼‰ï¼šç³»ç»Ÿèƒ½å¤ŸåŸºæœ¬è¿è¡Œå¹¶ä¸€ç›´æä¾›æœåŠ¡ã€‚</li>\n<li>è½¯çŠ¶æ€ï¼ˆSoft-stateï¼‰ï¼šç³»ç»Ÿä¸è¦æ±‚ä¸€ç›´ä¿æŒå¼ºä¸€è‡´çŠ¶æ€ã€‚</li>\n<li>æœ€ç»ˆä¸€è‡´æ€§ï¼ˆEventual consistencyï¼‰ï¼šç³»ç»Ÿéœ€è¦åœ¨æŸä¸€æ—¶åˆ»åè¾¾åˆ°ä¸€è‡´æ€§è¦æ±‚ã€‚</li>\n</ol>\n<h3 id=\"Zookeeperä¿è¯CP\"><a href=\"#Zookeeperä¿è¯CP\" class=\"headerlink\" title=\"Zookeeperä¿è¯CP\"></a><strong>Zookeeperä¿è¯CP</strong></h3><ul>\n<li>å½“å‘æ³¨å†Œä¸­å¿ƒæŸ¥è¯¢æœåŠ¡åˆ—è¡¨æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥å®¹å¿æ³¨å†Œä¸­å¿ƒè¿”å›çš„æ˜¯å‡ åˆ†é’Ÿä»¥å‰çš„æ³¨å†Œä¿¡æ¯ï¼Œä½†ä¸èƒ½æ¥å—æœåŠ¡ç›´æ¥downæ‰ä¸å¯ç”¨ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼ŒæœåŠ¡æ³¨å†ŒåŠŸèƒ½å¯¹å¯ç”¨æ€§çš„è¦æ±‚è¦é«˜äºä¸€è‡´æ€§ã€‚ä½†æ˜¯zkä¼šå‡ºç°è¿™æ ·ä¸€ç§æƒ…å†µï¼Œå½“masterèŠ‚ç‚¹å› ä¸ºç½‘ç»œæ•…éšœä¸å…¶ä»–èŠ‚ç‚¹å¤±å»è”ç³»æ—¶ï¼Œå‰©ä½™èŠ‚ç‚¹ä¼šé‡æ–°è¿›è¡Œleaderé€‰ä¸¾ã€‚é—®é¢˜åœ¨äºï¼Œé€‰ä¸¾leaderçš„æ—¶é—´å¤ªé•¿ï¼Œ30 ~ 120s, ä¸”é€‰ä¸¾æœŸé—´æ•´ä¸ªzké›†ç¾¤éƒ½æ˜¯ä¸å¯ç”¨çš„ï¼Œè¿™å°±å¯¼è‡´åœ¨é€‰ä¸¾æœŸé—´æ³¨å†ŒæœåŠ¡ç˜«ç—ªã€‚åœ¨äº‘éƒ¨ç½²çš„ç¯å¢ƒä¸‹ï¼Œå› ç½‘ç»œé—®é¢˜ä½¿å¾—zké›†ç¾¤å¤±å»masterèŠ‚ç‚¹æ˜¯è¾ƒå¤§æ¦‚ç‡ä¼šå‘ç”Ÿçš„äº‹ï¼Œè™½ç„¶æœåŠ¡èƒ½å¤Ÿæœ€ç»ˆæ¢å¤ï¼Œä½†æ˜¯æ¼«é•¿çš„é€‰ä¸¾æ—¶é—´å¯¼è‡´çš„æ³¨å†Œé•¿æœŸä¸å¯ç”¨æ˜¯ä¸èƒ½å®¹å¿çš„ã€‚</li>\n</ul>\n<h3 id=\"Eurekaä¿è¯AP\"><a href=\"#Eurekaä¿è¯AP\" class=\"headerlink\" title=\"Eurekaä¿è¯AP\"></a>Eurekaä¿è¯AP</h3><ul>\n<li><p>Eurekaå„ä¸ªèŠ‚ç‚¹éƒ½æ˜¯å¹³ç­‰çš„ï¼Œå‡ ä¸ªèŠ‚ç‚¹æŒ‚æ‰ä¸ä¼šå½±å“æ­£å¸¸èŠ‚ç‚¹çš„å·¥ä½œï¼Œå‰©ä½™çš„èŠ‚ç‚¹ä¾ç„¶å¯ä»¥æä¾›æ³¨å†Œå’ŒæŸ¥è¯¢æœåŠ¡ã€‚è€ŒEurekaçš„å®¢æˆ·ç«¯åœ¨å‘æŸä¸ªEurekaæ³¨å†Œæˆ–å¦‚æœå‘ç°è¿æ¥å¤±è´¥ï¼Œåˆ™ä¼šè‡ªåŠ¨åˆ‡æ¢è‡³å…¶å®ƒèŠ‚ç‚¹ï¼Œåªè¦æœ‰ä¸€å°Eurekaè¿˜åœ¨ï¼Œå°±èƒ½ä¿è¯æ³¨å†ŒæœåŠ¡å¯ç”¨(ä¿è¯å¯ç”¨æ€§)ï¼Œåªä¸è¿‡æŸ¥åˆ°çš„ä¿¡æ¯å¯èƒ½ä¸æ˜¯æœ€æ–°çš„(ä¸ä¿è¯å¼ºä¸€è‡´æ€§)ã€‚é™¤æ­¤ä¹‹å¤–ï¼ŒEurekaè¿˜æœ‰ä¸€ç§è‡ªæˆ‘ä¿æŠ¤æœºåˆ¶ï¼Œå¦‚æœåœ¨15åˆ†é’Ÿå†…è¶…è¿‡85%çš„èŠ‚ç‚¹éƒ½æ²¡æœ‰æ­£å¸¸çš„å¿ƒè·³ï¼Œé‚£ä¹ˆEurekaå°±è®¤ä¸ºå®¢æˆ·ç«¯ä¸æ³¨å†Œä¸­å¿ƒå‡ºç°äº†ç½‘ç»œæ•…éšœï¼Œæ­¤æ—¶ä¼šå‡ºç°ä»¥ä¸‹å‡ ç§æƒ…å†µï¼š </p>\n<ol>\n<li>Eurekaä¸å†ä»æ³¨å†Œåˆ—è¡¨ä¸­ç§»é™¤å› ä¸ºé•¿æ—¶é—´æ²¡æ”¶åˆ°å¿ƒè·³è€Œåº”è¯¥è¿‡æœŸçš„æœåŠ¡ </li>\n<li>Eurekaä»ç„¶èƒ½å¤Ÿæ¥å—æ–°æœåŠ¡çš„æ³¨å†Œå’ŒæŸ¥è¯¢è¯·æ±‚ï¼Œä½†æ˜¯ä¸ä¼šè¢«åŒæ­¥åˆ°å…¶å®ƒèŠ‚ç‚¹ä¸Š(å³ä¿è¯å½“å‰èŠ‚ç‚¹ä¾ç„¶å¯ç”¨) </li>\n<li>å½“ç½‘ç»œç¨³å®šæ—¶ï¼Œå½“å‰å®ä¾‹æ–°çš„æ³¨å†Œä¿¡æ¯ä¼šè¢«åŒæ­¥åˆ°å…¶å®ƒèŠ‚ç‚¹ä¸­</li>\n</ol>\n</li>\n<li><p>å› æ­¤ï¼Œ Eurekaå¯ä»¥å¾ˆå¥½çš„åº”å¯¹å› ç½‘ç»œæ•…éšœå¯¼è‡´éƒ¨åˆ†èŠ‚ç‚¹å¤±å»è”ç³»çš„æƒ…å†µï¼Œè€Œä¸ä¼šåƒzookeeperé‚£æ ·ä½¿æ•´ä¸ªæ³¨å†ŒæœåŠ¡ç˜«ç—ªã€‚</p>\n</li>\n</ul>\n<a id=\"more\"></a>\n\n<h3 id=\"Eurekaæ³¨å†Œå‘ç°æµç¨‹\"><a href=\"#Eurekaæ³¨å†Œå‘ç°æµç¨‹\" class=\"headerlink\" title=\"Eurekaæ³¨å†Œå‘ç°æµç¨‹\"></a>Eurekaæ³¨å†Œå‘ç°æµç¨‹</h3><ol>\n<li>å¯åŠ¨Eureka Serverã€‚</li>\n<li>Eureka ClientæœåŠ¡æä¾›è€…å¯åŠ¨æ—¶å€™å°†æœåŠ¡æ³¨å†Œåˆ°Eureka Serverã€‚</li>\n<li>Eureka ClientæœåŠ¡æä¾›è€…æ¯30ç§’ï¼ˆé»˜è®¤é…ç½®ï¼‰å‘Eureka Serverå‘é€httpè¯·æ±‚ï¼ˆå¿ƒè·³ï¼‰æœåŠ¡ç»­çº¦ã€‚</li>\n<li>Eureka Server 90ç§’æ²¡æœ‰æ”¶åˆ°æŸEureka Clientçš„å¿ƒè·³è¯·æ±‚ï¼Œåˆ™ç»Ÿè®¡15åˆ†é’Ÿæ˜¯å¦å­˜åœ¨85%çš„Eureka Clientæ²¡æœ‰å¿ƒè·³ï¼Œå¦‚æœæ˜¯åˆ™è‡ªæˆ‘ä¿æŠ¤ï¼Œå¦‚æœä¸æ˜¯åˆ™å‰”é™¤è¯¥æœåŠ¡å®ä¾‹ã€‚</li>\n<li>Eureka Clienté€šè¿‡å®šæ—¶ä»»åŠ¡å‘Eureka Serverè·å–æœåŠ¡åˆ—è¡¨æ›´æ–°æœ¬åœ°çš„åˆ—è¡¨ç¼“å­˜ã€‚</li>\n<li>Eureka Clientè¿œç¨‹è°ƒç”¨çš„æ—¶å€™ï¼Œå…ˆä»æœ¬åœ°æŸ¥æ‰¾ï¼Œå¦‚æœå‘ç°æœåŠ¡åˆ™å‘èµ·è¯·æ±‚ï¼Œå¦‚æœæ²¡æœ‰æ‰¾åˆ°åˆ™å‘Eureka Serverè·å–æœåŠ¡åˆ—è¡¨å¹¶æ›´æ–°æ¢åœ°ç¼“å­˜åˆ—è¡¨ã€‚</li>\n<li>Eureka Clientåº”ç”¨å…³é—­çš„æ—¶å€™ä¼šå‘Eureka Serverå‘é€å…³é—­è¯·æ±‚ï¼ŒEureka Serverå—ç†åä¼šå‰”é™¤è¯¥æœåŠ¡å®ä¾‹ã€‚</li>\n</ol>\n<h3 id=\"Eurekaé›†ç¾¤é«˜å¯ç”¨\"><a href=\"#Eurekaé›†ç¾¤é«˜å¯ç”¨\" class=\"headerlink\" title=\"Eurekaé›†ç¾¤é«˜å¯ç”¨\"></a>Eurekaé›†ç¾¤é«˜å¯ç”¨</h3><ul>\n<li>Eureka Serveré›†ç¾¤å½“ä¸­æ¯ä¸ªèŠ‚ç‚¹éƒ½æ˜¯ç”¨è¿‡ <code>Replicate</code>å¤åˆ¶æ¥åŒæ­¥æ•°æ®ã€‚æ²¡æœ‰ä¸»ä»ä¹‹åˆ†ï¼ŒèŠ‚ç‚¹çš„æ•°æ®éƒ½ä¿æŒæœ€ç»ˆä¸€è‡´ã€‚å‡è®¾å…¶ä¸­ä¸€ä¸ªèŠ‚ç‚¹å®•æœºäº†ï¼Œå¹¶ä¸å½±å“Eureka Clientçš„å·¥ä½œã€‚</li>\n</ul>\n<h3 id=\"Zookeeperæ³¨å†Œå‘ç°æµç¨‹\"><a href=\"#Zookeeperæ³¨å†Œå‘ç°æµç¨‹\" class=\"headerlink\" title=\"Zookeeperæ³¨å†Œå‘ç°æµç¨‹\"></a>Zookeeperæ³¨å†Œå‘ç°æµç¨‹</h3><ol>\n<li>å¯åŠ¨Zookeeperã€‚</li>\n<li>æœåŠ¡æä¾›è€…å¯åŠ¨çš„æ—¶å€™æ³¨å†Œåˆ°Zkæ³¨å†Œä¸­å¿ƒã€‚</li>\n<li>Zkæ³¨å†Œä¸­å¿ƒå’ŒæœåŠ¡æä¾›è€…å»ºç«‹ä¸€ä¸ªSocketé•¿è¿æ¥ï¼ŒZKæ³¨å†Œä¸­å¿ƒå®šæ—¶å‘æ¯ä¸ªæœåŠ¡æä¾›å‘é€æ•°æ®ï¼Œå¦‚æœæœåŠ¡æä¾›æ²¡å“åº”ï¼Œåˆ™å‰”é™¤è¯¥æœåŠ¡å®ä¾‹ã€‚å°†æ›´æ–°åçš„æœåŠ¡åˆ—è¡¨å‘é€ç»™æ‰€æœ‰çš„æ¶ˆè´¹è€…ï¼ˆé•¿è¿æ¥ï¼‰ã€‚</li>\n<li>æœåŠ¡æ¶ˆè´¹è€…å¯åŠ¨ä»ZKä¸­è·å–ä¸€ä»½æœåŠ¡åˆ—è¡¨å¹¶ç¼“å­˜åˆ°æœ¬åœ°ã€‚</li>\n<li>æœåŠ¡æ¶ˆè´¹è€…è°ƒç”¨åŸåˆ›æœåŠ¡çš„æ—¶å€™å…ˆä»æœ¬åœ°ç¼“å­˜æŸ¥æ‰¾ï¼Œå¦‚æœæ‰¾åˆ°åˆ™ç›´æ¥å‘èµ·æœåŠ¡è°ƒç”¨ã€‚å¦‚æœæ²¡æœ‰æ‰¾åˆ°åˆ™åˆ°ZKæ³¨å†Œä¸­å¿ƒè·å–åˆ—è¡¨ç¼“å­˜åˆ°æœ¬åœ°åœ¨è°ƒç”¨ã€‚</li>\n<li>å½“ä¸€ä¸ªæœåŠ¡æä¾›è€…å®•æœºæˆ–è€…æ­£å¸¸å…³é—­çš„æ—¶å€™ï¼ŒZKä¼šå‰”é™¤è¯¥èŠ‚ç‚¹ï¼Œå¹¶é€šçŸ¥æ‰€æœ‰æ¶ˆè´¹è€…æœåŠ¡æ›´æ–°æœ¬åœ°ç¼“å­˜ã€‚</li>\n</ol>\n","categories":["åŸºç¡€ç†è®º"],"tags":["å¾®æœåŠ¡","Zookeeper","Java","æ³¨å†Œä¸­å¿ƒ","Eureka"]},{"title":"Centos7.*-Mysql5.7å•å®ä¾‹éƒ¨ç½²","url":"/posts/4159264015/","content":"<blockquote>\n<p>Centos7çš„yumæºä¸­é»˜è®¤æ˜¯æ²¡æœ‰mysql,å› ä¸ºç°åœ¨å·²ç»ç”¨mariaDBä»£æ›¿mysqläº†ã€‚</p>\n</blockquote>\n<h2 id=\"å®‰è£…å‰æ£€æŸ¥\"><a href=\"#å®‰è£…å‰æ£€æŸ¥\" class=\"headerlink\" title=\"å®‰è£…å‰æ£€æŸ¥\"></a>å®‰è£…å‰æ£€æŸ¥</h2><h3 id=\"æ£€æŸ¥linuxç³»ç»Ÿç‰ˆæœ¬\"><a href=\"#æ£€æŸ¥linuxç³»ç»Ÿç‰ˆæœ¬\" class=\"headerlink\" title=\"æ£€æŸ¥linuxç³»ç»Ÿç‰ˆæœ¬\"></a>æ£€æŸ¥linuxç³»ç»Ÿç‰ˆæœ¬</h3><figure class=\"highlight sh\"><table><tr><td class=\"code\"><pre><span class=\"line\">[root@localhost backup]<span class=\"comment\"># cat /etc/system-release</span></span><br><span class=\"line\">CentOS Linux release 7.4.1708 (Core)</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"æ£€æŸ¥æ˜¯å¦å·²ç»å®‰è£…mysql\"><a href=\"#æ£€æŸ¥æ˜¯å¦å·²ç»å®‰è£…mysql\" class=\"headerlink\" title=\"æ£€æŸ¥æ˜¯å¦å·²ç»å®‰è£…mysql\"></a>æ£€æŸ¥æ˜¯å¦å·²ç»å®‰è£…mysql</h3><figure class=\"highlight sh\"><table><tr><td class=\"code\"><pre><span class=\"line\">[root@localhost backup]<span class=\"comment\"># rpm -qa | grep mysql</span></span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><p>å¦‚æœå­˜åœ¨Mysqlå¯ä»¥è€ƒè™‘å¸è½½</p>\n<figure class=\"highlight sh\"><table><tr><td class=\"code\"><pre><span class=\"line\">rpm -e --nodeps mysql-connector-odbc-x.x.x-x.el7.x86_64</span><br></pre></td></tr></table></figure>\n\n<p>å°†/var/lib/mysqlæ–‡ä»¶å¤¹ä¸‹çš„æ‰€æœ‰æ–‡ä»¶éƒ½åˆ é™¤å¹²å‡€ã€‚</p>\n</li>\n</ul>\n<h3 id=\"æ£€æŸ¥æ˜¯å¦å®‰è£…mariaDB\"><a href=\"#æ£€æŸ¥æ˜¯å¦å®‰è£…mariaDB\" class=\"headerlink\" title=\"æ£€æŸ¥æ˜¯å¦å®‰è£…mariaDB\"></a>æ£€æŸ¥æ˜¯å¦å®‰è£…mariaDB</h3><a id=\"more\"></a>s\n\n<blockquote>\n<p>å¦‚æœæ˜¯æœ€å°å®‰è£…æ˜¯æ²¡æœ‰çš„ï¼Œå¦‚æœä¸æ˜¯é»˜è®¤ä¼šå®‰è£…è¿™ä¸ªæ•°æ®åº“ã€‚</p>\n</blockquote>\n<figure class=\"highlight sh\"><table><tr><td class=\"code\"><pre><span class=\"line\">[root@localhost backup]<span class=\"comment\"># rpm -qa | grep mariadb</span></span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>å¦‚æœå·²ç»å®‰è£…å°±å¸è½½å¹²å‡€</li>\n</ul>\n<figure class=\"highlight sh\"><table><tr><td class=\"code\"><pre><span class=\"line\">systemctl stop mariadb</span><br><span class=\"line\">ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€rpm -qa | grep mariadb</span><br><span class=\"line\">ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€rpm -e --nodeps mariadb-x.x.x-1.el7.x86_64</span><br><span class=\"line\">ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€rpm -e --nodeps mariadb-server-x.x.x-1.el7.x86_64</span><br><span class=\"line\">ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€rpm -e --nodeps mariadb-libs-x.x.x-1.el7.x86_64</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"ä¸‹è½½5-7æº\"><a href=\"#ä¸‹è½½5-7æº\" class=\"headerlink\" title=\"ä¸‹è½½5.7æº\"></a>ä¸‹è½½5.7æº</h2><ul>\n<li><a href=\"https://dev.mysql.com/downloads/repo/yum/\" target=\"_blank\" rel=\"noopener\">ä¸‹è½½é¡µé¢</a></li>\n</ul>\n<figure class=\"highlight sh\"><table><tr><td class=\"code\"><pre><span class=\"line\">//ä¸‹è½½mysql rpmåŒ…</span><br><span class=\"line\"><span class=\"comment\"># wget http://dev.mysql.com/get/mysql57-community-release-el7-11.noarch.rpm</span></span><br><span class=\"line\"> </span><br><span class=\"line\">//å®‰è£…mysql rpmåŒ…</span><br><span class=\"line\"><span class=\"comment\"># rpm -ivh mysql57-community-release-el7-11.noarch.rpm</span></span><br><span class=\"line\"> </span><br><span class=\"line\">//å®‰è£…mysql</span><br><span class=\"line\"><span class=\"comment\"># yum install mysql-community-server</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"æ£€æŸ¥ä¸€ä¸‹æ˜¯å¦å®‰è£…æˆåŠŸ\"><a href=\"#æ£€æŸ¥ä¸€ä¸‹æ˜¯å¦å®‰è£…æˆåŠŸ\" class=\"headerlink\" title=\"æ£€æŸ¥ä¸€ä¸‹æ˜¯å¦å®‰è£…æˆåŠŸ\"></a>æ£€æŸ¥ä¸€ä¸‹æ˜¯å¦å®‰è£…æˆåŠŸ</h3><figure class=\"highlight sh\"><table><tr><td class=\"code\"><pre><span class=\"line\">[root@localhost backup]<span class=\"comment\"># systemctl status mysqld</span></span><br><span class=\"line\">â— mysqld.service - MySQL Server</span><br><span class=\"line\">   Loaded: loaded (/usr/lib/systemd/system/mysqld.service; enabled; vendor preset: disabled)</span><br><span class=\"line\">   Active: inactive (dead)</span><br><span class=\"line\">     Docs: man:mysqld(8)</span><br><span class=\"line\">           http://dev.mysql.com/doc/refman/en/using-systemd.html</span><br><span class=\"line\">[root@localhost backup]<span class=\"comment\">#</span></span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>æˆåŠŸä½†æ˜¯æ²¡æœ‰å¯åŠ¨</li>\n</ul>\n<h3 id=\"ä¿®æ”¹é…ç½®é»˜è®¤é…ç½®æ–‡ä»¶-my-cnf\"><a href=\"#ä¿®æ”¹é…ç½®é»˜è®¤é…ç½®æ–‡ä»¶-my-cnf\" class=\"headerlink\" title=\"ä¿®æ”¹é…ç½®é»˜è®¤é…ç½®æ–‡ä»¶[my.cnf]\"></a>ä¿®æ”¹é…ç½®é»˜è®¤é…ç½®æ–‡ä»¶[my.cnf]</h3><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">[mysql]  </span><br><span class=\"line\"># è®¾ç½®mysqlå®¢æˆ·ç«¯é»˜è®¤å­—ç¬¦é›†  </span><br><span class=\"line\">default-character-set&#x3D;utf8   </span><br><span class=\"line\">socket&#x3D;&#x2F;var&#x2F;lib&#x2F;mysql&#x2F;mysql.sock  </span><br><span class=\"line\">[mysqld]  </span><br><span class=\"line\">#skip-name-resolve  </span><br><span class=\"line\">#è®¾ç½®3306ç«¯å£  </span><br><span class=\"line\">port &#x3D; 3306   </span><br><span class=\"line\">socket&#x3D;&#x2F;var&#x2F;lib&#x2F;mysql&#x2F;mysql.sock  </span><br><span class=\"line\"># è®¾ç½®mysqlçš„å®‰è£…ç›®å½• </span><br><span class=\"line\">basedir&#x3D;&#x2F;usr&#x2F;local&#x2F;mysql  </span><br><span class=\"line\"># è®¾ç½®mysqlæ•°æ®åº“çš„æ•°æ®çš„å­˜æ”¾ç›®å½•  </span><br><span class=\"line\">datadir&#x3D;&#x2F;usr&#x2F;local&#x2F;mysql&#x2F;data  </span><br><span class=\"line\"># å…è®¸æœ€å¤§è¿æ¥æ•°  </span><br><span class=\"line\">max_connections&#x3D;200  </span><br><span class=\"line\"># æœåŠ¡ç«¯ä½¿ç”¨çš„å­—ç¬¦é›†é»˜è®¤ä¸º8æ¯”ç‰¹ç¼–ç çš„latin1å­—ç¬¦é›†  </span><br><span class=\"line\">character-set-server&#x3D;utf8  </span><br><span class=\"line\"># åˆ›å»ºæ–°è¡¨æ—¶å°†ä½¿ç”¨çš„é»˜è®¤å­˜å‚¨å¼•æ“  </span><br><span class=\"line\">default-storage-engine&#x3D;INNODB  </span><br><span class=\"line\">#lower_case_table_name&#x3D;1  </span><br><span class=\"line\">max_allowed_packet&#x3D;16M</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"å®‰è£…æˆåŠŸåéœ€è¦é‡å¯mysqlæœåŠ¡ã€‚\"><a href=\"#å®‰è£…æˆåŠŸåéœ€è¦é‡å¯mysqlæœåŠ¡ã€‚\" class=\"headerlink\" title=\"å®‰è£…æˆåŠŸåéœ€è¦é‡å¯mysqlæœåŠ¡ã€‚\"></a>å®‰è£…æˆåŠŸåéœ€è¦é‡å¯mysqlæœåŠ¡ã€‚</h3><figure class=\"highlight sh\"><table><tr><td class=\"code\"><pre><span class=\"line\">service mysqld restart</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>åˆšå¼€å§‹å®‰è£…çš„Mysql5.7æ˜¯ä¼šéšæœºç”Ÿæˆä¸€ä¸ªrootå¯†ç çš„ï¼Œæˆ‘ä»¬è¦å…ˆæ‰¾åˆ°è¿™ä¸ªéšæœºå¯†ç ï¼Œç„¶åæ”¹æ–°å¯†ç ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡grepå‘½ä»¤æŸ¥æ‰¾éšæœºrootå¯†ç ã€‚åœ¨mysql.logæ–‡ä»¶ä¸­å¯ä»¥æ‰¾åˆ°å¯†ç ã€‚</li>\n</ul>\n<figure class=\"highlight sh\"><table><tr><td class=\"code\"><pre><span class=\"line\">grep <span class=\"string\">\"password\"</span> /var/<span class=\"built_in\">log</span>/mysqld.log</span><br><span class=\"line\">... password is generated <span class=\"keyword\">for</span> root@localhost: 8A3xwbk8_P1A</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"ç™»å½•Mysql\"><a href=\"#ç™»å½•Mysql\" class=\"headerlink\" title=\"ç™»å½•Mysql\"></a>ç™»å½•Mysql</h3><blockquote>\n<p>8A3xwbk8_P1A è¿™ä¸ªå¯†ç ç¬¬ä¸€æ¬¡ç™»å½•ä¹‹åå¿…é¡»ä¿®æ”¹ã€‚</p>\n</blockquote>\n<figure class=\"highlight sh\"><table><tr><td class=\"code\"><pre><span class=\"line\">mysql -uroot -p //ç™»å½•</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"ä¿®å¤é»˜è®¤å¯†ç \"><a href=\"#ä¿®å¤é»˜è®¤å¯†ç \" class=\"headerlink\" title=\"ä¿®å¤é»˜è®¤å¯†ç \"></a>ä¿®å¤é»˜è®¤å¯†ç </h3><ul>\n<li>é»˜è®¤æƒ…å†µä¸‹mysqlç¬¬ä¸€æ¬¡ç™»å½•çš„æ—¶å€™éœ€è¦ä¿®æ”¹å¯†ç ï¼Œä¸ç„¶ä¼šæŠ›å‡ºå¼‚å¸¸ã€‚</li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">ERROR 1820 (HY000): You must reset your password using ALTER USER statement before executing this statement.</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>å¦‚æœåªæ˜¯ä¿®æ”¹ç®€å•çš„å¯†ç åˆä¼šæŠ¥é”™ã€‚</li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">mysql&gt;  ALTER USER USER() IDENTIFIED BY &#39;12345678&#39;;</span><br><span class=\"line\">ERROR 1819 (HY000): Your password does not satisfy the current policy requirements</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>è¿™ä¸ªå…¶å®ä¸validate_password_policyçš„å€¼æœ‰å…³ã€‚</li>\n<li>validate_password_policyæœ‰ä»¥ä¸‹å–å€¼ï¼š</li>\n</ul>\n<table>\n<thead>\n<tr>\n<th>Policy</th>\n<th>Tests Performed</th>\n</tr>\n</thead>\n<tbody><tr>\n<td><code>0</code> or <code>LOW</code></td>\n<td>Length</td>\n</tr>\n<tr>\n<td><code>1</code> or <code>MEDIUM</code></td>\n<td>Length; numeric, lowercase/uppercase, and special characters</td>\n</tr>\n<tr>\n<td><code>2</code> or <code>STRONG</code></td>\n<td>Length; numeric, lowercase/uppercase, and special characters; dictionary file</td>\n</tr>\n</tbody></table>\n<ul>\n<li>é»˜è®¤æ˜¯1ï¼Œå³MEDIUMï¼Œæ‰€ä»¥åˆšå¼€å§‹è®¾ç½®çš„å¯†ç å¿…é¡»ç¬¦åˆé•¿åº¦ï¼Œä¸”å¿…é¡»å«æœ‰æ•°å­—ï¼Œå°å†™æˆ–å¤§å†™å­—æ¯ï¼Œç‰¹æ®Šå­—ç¬¦ã€‚</li>\n<li>æœ‰æ—¶å€™ï¼Œåªæ˜¯ä¸ºäº†è‡ªå·±æµ‹è¯•ï¼Œä¸æƒ³å¯†ç è®¾ç½®å¾—é‚£ä¹ˆå¤æ‚ï¼Œè­¬å¦‚è¯´ï¼Œæˆ‘åªæƒ³è®¾ç½®rootçš„å¯†ç ä¸º123456ã€‚</li>\n<li>å¿…é¡»ä¿®æ”¹ä¸¤ä¸ªå…¨å±€å‚æ•°ï¼š</li>\n<li>é¦–å…ˆï¼Œä¿®æ”¹validate_password_policyå‚æ•°çš„å€¼</li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">mysql&gt; set global validate_password_policy&#x3D;0;</span><br><span class=\"line\">Query OK, 0 rows affected (0.00 sec)</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>åˆ·æ–°æƒé™</li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">FLUSH PRIVILEGES;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>æ¨å‡ºå†æ¬¡ç™»å½•</li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">exit;</span><br><span class=\"line\">mysql -uroot -p &#x2F;&#x2F;ç™»å½•ï¼Œç”¨ä¿®æ”¹çš„å¯†ç ã€‚</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"å¼€å¯è¿œç¨‹è®¿é—®\"><a href=\"#å¼€å¯è¿œç¨‹è®¿é—®\" class=\"headerlink\" title=\"å¼€å¯è¿œç¨‹è®¿é—®\"></a>å¼€å¯è¿œç¨‹è®¿é—®</h3><blockquote>\n<p>æ­£å¼ç¯å¢ƒä¸è¦æŠŠrootæƒé™å¼€å‘å‡ºå»äº†ï¼Œå½“ç„¶è¿™é‡Œåªæ˜¯æµ‹è¯•ã€‚</p>\n</blockquote>\n<ul>\n<li>æŸ¥çœ‹ç”¨æˆ·ä¿¡æ¯</li>\n</ul>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">mysql&gt; select host,user,plugin,authentication_string from mysql.user;</span><br><span class=\"line\">+-----------+-----------+-----------------------+-------------------------------------------+</span><br><span class=\"line\">| host      | user      | plugin                | authentication_string                     |</span><br><span class=\"line\">+-----------+-----------+-----------------------+-------------------------------------------+</span><br><span class=\"line\">| localhost | root      | mysql_native_password | *84AAC12F54AB666ECFC2A83C676908C8BBC381B1 |</span><br><span class=\"line\">| localhost | mysql.sys | mysql_native_password | *THISISNOTAVALIDPASSWORDTHATCANBEUSEDHERE |</span><br><span class=\"line\">| %         | root      | mysql_native_password | *6BB4837EB74329105EE4568DDA7DC67ED2CA2AD9 |</span><br><span class=\"line\">+-----------+-----------+-----------------------+-------------------------------------------+</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>ä¿®æ”¹åŠ å¯†æ–¹å¼</li>\n</ul>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">ALTER USER <span class=\"string\">'root'</span>@<span class=\"string\">'%'</span> IDENTIFIED WITH mysql_native_password BY <span class=\"string\">'123456'</span>;  <span class=\"comment\">### 123456 mysqlçš„ç™»å½•å¯†ç </span></span><br><span class=\"line\">flush privileges;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>é‡å¯æœåŠ¡</li>\n</ul>\n<figure class=\"highlight sh\"><table><tr><td class=\"code\"><pre><span class=\"line\">service mysqld restart</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>æ£€æŸ¥ä¸‹é˜²ç«å¢™æ˜¯ä¸æ˜¯å¼€äº†ï¼Œç„¶åè¿œç¨‹ç™»å½•è¯•è¯•ã€‚</p>\n</blockquote>\n<h2 id=\"æ³¨æ„äº‹é¡¹\"><a href=\"#æ³¨æ„äº‹é¡¹\" class=\"headerlink\" title=\"æ³¨æ„äº‹é¡¹\"></a>æ³¨æ„äº‹é¡¹</h2><blockquote>\n<p>å…³äºå¯†ç æ ¡éªŒæ’ä»¶validate_passwordï¼Œè¿™ä¸ªæ˜¯mysql5.7é»˜è®¤å®‰è£…çš„ã€‚</p>\n</blockquote>\n<p>æ£€æŸ¥validate_passwordæ’ä»¶æ˜¯å¦å®‰è£…ã€‚</p>\n<figure class=\"highlight\"><table><tr><td class=\"code\"><pre><span class=\"line\">mysql&gt; SHOW VARIABLES LIKE 'validate_password%';</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">+--------------------------------------+--------+</span><br><span class=\"line\">| Variable_name                        | Value  |</span><br><span class=\"line\">+--------------------------------------+--------+</span><br><span class=\"line\">| validate_password_check_user_name    | OFF    |</span><br><span class=\"line\">| validate_password_dictionary_file    |        |</span><br><span class=\"line\">| validate_password_length             | 8      |</span><br><span class=\"line\">| validate_password_mixed_case_count   | 1      |</span><br><span class=\"line\">| validate_password_number_count       | 1      |</span><br><span class=\"line\">| validate_password_policy             | MEDIUM |</span><br><span class=\"line\">| validate_password_special_char_count | 1      |</span><br><span class=\"line\">+--------------------------------------+--------+</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>5.6ä¹‹åçš„ç‰ˆæœ¬å¼€å¯logæ—¥å¿—å‚æ•°åä¿®æ”¹ã€‚</p>\n</blockquote>\n<ul>\n<li>ç¼–è¾‘my.cnf (ä¸åŒçš„æ“ä½œç³»ç»Ÿä½ç½®è¯¥æ–‡ä»¶è·¯å¾„ä¸åŒï¼Œåå­—å¯èƒ½ä¹Ÿä¸ä¸€æ ·ã€‚)</li>\n</ul>\n<figure class=\"highlight shell\"><table><tr><td class=\"code\"><pre><span class=\"line\">[ERROR] /usr/sbin/mysqld: ambiguous option '--log=/opt/log/mysql/mysql.log' (log-bin, log_slave_updates)</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>ç›®å‰logå‚æ•°å¼ƒç”¨ï¼Œæ”¹ç”¨</li>\n</ul>\n<ul>\n<li>explicit_defaults_for_timestamp</li>\n<li>general-log=ON  </li>\n<li>general-log_file=/var/log/mysql/general.log</li>\n<li>slow_query_log=ON</li>\n<li>slow_query_log_file=/var/log/mysql/general_slow.log</li>\n<li>long_query_time=ON</li>\n<li>log_queries_not_using_indexes =1</li>\n</ul>\n","categories":["Linuxè¿ç»´"],"tags":["Centos7","Linux","mysql5.7"]},{"title":"Git-Branch","url":"/posts/3837017068/","content":"<blockquote>\n<p>â€‹    ä½¿ç”¨gitè¿›è¡Œåˆå¹¶åˆ†æ”¯è¯´éš¾ä¹Ÿä¸éš¾ï¼Œå› ä¸ºå°±ä½¿ç”¨ä¸€ä¸‹é‚£å‡ ä¸ªå‘½ä»¤è€Œå·²ï¼ä½†æ˜¯ä¸å°å¿ƒæ“ä½œæ€»ä¼šæœ‰ä¸€äº›éš¾ä»¥é¢„æ–™çš„é—®é¢˜å‡ºç°ã€ä½†æ˜¯coderä»¬æ€»æ˜¯ä¼šåšå‡ºå¥‡æ€ªçš„ä¸¾åŠ¨ã€‚</p>\n<p>â€‹    åˆå¹¶åˆ†æ”¯çš„æ—¶å€™O(âˆ©_âˆ©)O</p>\n</blockquote>\n<p><img src=\"https://z201.oss-cn-shanghai.aliyuncs.com/JavaNote/git/hbfz.gif\" alt=\"åˆå¹¶åˆ†æ”¯\">   </p>\n<h2 id=\"å¿«é€Ÿäº†è§£ä¸‹åˆ†æ”¯æµç¨‹ã€‚\"><a href=\"#å¿«é€Ÿäº†è§£ä¸‹åˆ†æ”¯æµç¨‹ã€‚\" class=\"headerlink\" title=\"å¿«é€Ÿäº†è§£ä¸‹åˆ†æ”¯æµç¨‹ã€‚\"></a>å¿«é€Ÿäº†è§£ä¸‹åˆ†æ”¯æµç¨‹ã€‚</h2><a id=\"more\"></a>\n\n<blockquote>\n<p>â€‹    åˆ†æ”¯ç±»ä¼¼ç§‘å¹»ç”µå½±é‡Œé¢ç»å¸¸å‡ºç°çš„å¹³è¡Œå®‡å®™ï¼Œåªæ˜¯åˆ†æ”¯ä¹‹é—´è¿˜èƒ½åˆå¹¶ã€‚    </p>\n<p>â€‹    gité»˜è®¤çš„æ˜¯masteråˆ†æ”¯ï¼Œå¦‚æœæ‰€æœ‰çš„å¼€å‘éƒ½åœ¨masteråˆ†æ”¯ï¼Œè¿™å…¶å®éå¸¸æ“è›‹ã€‚è¿™ä¹ˆåŠçš„å·¥å…·æ€ä¹ˆå¯èƒ½æ²¡æœ‰å¥½çš„åˆ†æ”¯ç­–ç•¥ã€‚</p>\n</blockquote>\n<ul>\n<li><p>æ­£å¸¸åˆ†æ”¯</p>\n<ul>\n<li><strong>origin/masterï¼šä¸»åˆ†æ”¯</strong></li>\n<li><strong>origin/developï¼šå¼€å‘åˆ†æ”¯</strong>  <blockquote>\n<p>em é¦–å…ˆä»£ç åº“é»˜è®¤æœ‰ä¸€ä¸ªï¼Œä¸”åªæœ‰ä¸€ä¸ªä¸»åˆ†æ”¯Masterï¼Œè¿™ä¸ªåˆ†æ”¯æ˜¯ä»“åº“åˆå§‹åŒ–çš„æ—¶å€™é»˜è®¤åˆ›å»ºçš„ã€‚ä½†å®é™…ä¸Šè¿˜æœ‰å¦ä¸€ä¸»åˆ†æ”¯  developï¼ˆå¼€å‘ä¸»åˆ†æ”¯ï¼‰ã€åªæ˜¯å¾ˆå¤šå¼€å‘å¹¶ä¸ä¼šå¯ç”¨developåˆ†æ”¯ã€‚å½“developåˆ†æ”¯ä¸Šä»£ç è¾¾åˆ°ä¸€å®šç¨³å®šçš„æ—¶å€™ï¼Œæ‰€æœ‰çš„æ”¹åŠ¨å°±ä¼šè¢«åˆå¹¶åˆ°masterä¸­ã€‚å¹¶ç”¨ä¸€ä¸ªå‘è¡Œç‰ˆæ¥æ ‡è®°å®ƒã€‚æ‰€ä»¥æ¯å½“è¢«åˆå¹¶åˆ°masterä¸­å°±æ„å‘³ç€ä¸€æ¬¡releaseç‰ˆæœ¬å‘å¸ƒã€‚è¿™ä¸ªæ—¶å€™æ‰ä¼šä½¿ç”¨(hook script)é’©å­å»è‡ªåŠ¨æ„å»ºæˆ‘ä»¬çš„é¡¹ç›®ã€å¹¶éƒ¨ç½²æ­£å¼æœåŠ¡å™¨ã€‚</p>\n</blockquote>\n</li>\n</ul>\n</li>\n<li><p>ä¸´æ—¶åˆ†æ”¯</p>\n<ul>\n<li>featureï¼šåŠŸèƒ½åˆ†æ”¯ï¼ˆç‰¹å¾åˆ†æ”¯ï¼‰</li>\n<li>releaseï¼šé¢„å‘å¸ƒåˆ†æ”¯ï¼ˆå‘è¡Œåˆ†æ”¯ï¼‰</li>\n<li>fixbugï¼šä¿®è¡¥bugåˆ†æ”¯ï¼ˆçƒ­è¡¥ä¸åˆ†æ”¯ï¼‰  <blockquote>\n<p>ä¸ºä»€ä¹ˆä¼šæœ‰ä¸´æ—¶åˆ†æ”¯è¿™ç§ä¸œè¥¿ï¼Œä¸Šé¢è¯´åˆ°ä¸»åˆ†æ”¯æ˜¯ç”¨æ¥ç®¡ç†é‡å¤§ç‰ˆæœ¬å‘å¸ƒçš„ã€‚æ—¥å¸¸çš„å¼€å‘åº”è¯¥æ˜¯åœ¨å¦å¤–ä¸€æ¡åˆ†æ”¯ä¸Šè¿›è¡Œdevelopï¼Œè€Œä¸´æ—¶åˆ†æ”¯æ˜¯åœ¨developåˆ†ç¦»å‡ºæ¥åšè¿­ä»£ä»¥åŠbugä¿®å¤çš„ã€‚è¾¾åˆ°é˜¶æ®µç›®æ ‡åœ¨åˆå¹¶åˆ°developåˆ†æ”¯å½“ä¸­ã€‚</p>\n</blockquote>\n</li>\n</ul>\n</li>\n</ul>\n<hr>\n<p><code>è¿™å¼ å›¾å¾ˆä¹…ä»¥å‰çœ‹åˆ°çš„ï¼Œæºåœ°å€å¿˜è®°äº†ï¼Œè‹¥å‘ç°ä¾µæƒè¯·è”ç³»æœ¬äººåˆ é™¤ã€‚</code></p>\n<p><img src=\"https://z201.oss-cn-shanghai.aliyuncs.com/JavaNote/git/fz.png\">   </p>\n<ul>\n<li>Gitåˆ›å»ºDevelopåˆ†æ”¯çš„å‘½ä»¤ï¼š</li>\n</ul>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">git checkout -b develop master</span><br></pre></td></tr></table></figure>\n\n<p>å°†Developåˆ†æ”¯å‘å¸ƒåˆ°Masteråˆ†æ”¯çš„å‘½ä»¤ï¼š</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># åˆ‡æ¢åˆ°Masteråˆ†æ”¯</span></span><br><span class=\"line\">git checkout master</span><br><span class=\"line\"><span class=\"comment\"># å¯¹Developåˆ†æ”¯è¿›è¡Œåˆå¹¶</span></span><br><span class=\"line\">git merge develop</span><br></pre></td></tr></table></figure>\n\n<p><code>åŸºæœ¬ä¸Šåªæœ‰ä¼šæ˜¯developåˆ†æ”¯åˆå¹¶åˆ°masterä¸­ã€‚ç”±äºmasteræ˜¯å¿…é¡»ä½¿ç”¨çš„å°±ä¸åœ¨å¤šä»‹ç»ï¼Œä¸‹é¢è¯´ä¸‹å…¶å®ƒåˆ†æ”¯ã€‚</code></p>\n<p><strong>Feature</strong> </p>\n<blockquote>\n<p>â€‹    è¿™ä¸ªåˆ†æ”¯ä¸€èˆ¬æ¥è¯´æ˜¯ä¸ä¼šå­˜åœ¨åŸå§‹ä»“åº“çš„ã€‚è€Œæ˜¯å­˜åœ¨å¼€å‘äººå‘˜çš„ä»“åº“ä¸­ã€‚</p>\n</blockquote>\n<ul>\n<li>å½“å¼€å§‹å¼€å‘ä¸€ä¸ªæ–°åŠŸèƒ½æ—¶ï¼Œä» <strong>develop</strong> åˆ†æ”¯åˆ†ç¦»å‡ºæ¥ã€‚</li>\n</ul>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># ä» developä¸­åˆ†ç¦»å‡ºä¸€ä¸ªåˆ†æ”¯</span></span><br><span class=\"line\">git checkout -b myfeature develop</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>åˆå¹¶ä¸€æ¡å·²ç»å®Œæˆçš„ Feature åˆ†æ”¯åˆ° develop åˆ†æ”¯</li>\n</ul>\n<blockquote>\n<p> å®Œæˆäº†çš„åŠŸèƒ½éœ€è¦åˆå¹¶åˆ° <strong>develop</strong> åˆ†æ”¯ï¼Œä»¥ç¡®åˆ‡æŠŠå…¶æ·»åŠ åˆ°ä¸‹ä¸€ä¸ªè¦å‘è¡Œçš„ç‰ˆæœ¬ä¸­ã€‚</p>\n</blockquote>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># åˆ‡æ¢åˆ°developåˆ†æ”¯ä¸­</span></span><br><span class=\"line\">git checkout develop</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># å¯¹myfeatureåˆ†æ”¯è¿›è¡Œåˆå¹¶</span></span><br><span class=\"line\">git merge myfeature</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># åˆ é™¤myfeatureåˆ†æ”¯ åˆå¹¶å®Œä¸€å®šè¦åˆ é™¤ã€‚</span></span><br><span class=\"line\">git branch -d myfeature</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># æ¨é€è‡³developåˆ†æ”¯ã€‚</span></span><br><span class=\"line\">git push origin develop</span><br></pre></td></tr></table></figure>\n\n<p><strong>Release</strong> </p>\n<blockquote>\n<p>â€‹    ä¸è¦è®¤ä¸ºè¿™æ˜¯ä»masterä¸­åˆ†å‡ºæ¥ï¼Œè¿™å®é™…ä¸Šæ˜¯ä»developåˆ†æ”¯ä¸­å‘å¸ƒçš„ã€‚å½“æˆ‘ä»¬éœ€è¦è¿­ä»£ä¸€ä¸ªç¨³å®šç‰ˆæœ¬çš„æ—¶å€™æˆ‘ä»¬å°±ä¼šä»developä¸­åˆ†ç¦»ä¸€ä¸ªåˆ†æ”¯åå­—ç”¨äºå±•ç¤ºæŒ‡å®šçš„æ–°ç‰ˆæœ¬å·ã€‚</p>\n</blockquote>\n<ul>\n<li>åˆ›å»ºä¸€æ¡ Release åˆ†æ”¯</li>\n</ul>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># ä»developä¸­åˆ†ç¦»å‡ºrelease-1.2</span></span><br><span class=\"line\">git checkout -b release-1.0 develop</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># æ¨é€åˆ°æœ¬åœ°ä»“åº“ä¸­ã€‚</span></span><br><span class=\"line\">git commit -a -m <span class=\"string\">\"create version number to 1.0\"</span></span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>release å¯èƒ½ä¼šå­˜åœ¨ä¸€æ®µæ—¶é—´ã€ç­‰å¾…bugä¿®å¤ã€‚ä¸è¦åœ¨è¿™ä¸ªåˆ†æ”¯åœ¨åŠ å¤§åŠŸèƒ½ï¼Œè¿™éå¸¸æ‰¯è›‹ã€‚å½“ç¡®å®šæ²¡é—®é¢˜ä¹‹ååˆå¹¶åˆ°masterä¸­ã€‚</p>\n</blockquote>\n<p><img src=\"https://z201.oss-cn-shanghai.aliyuncs.com/JavaNote/git/bjgn.gif\">  </p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># åˆ‡æ¢åˆ°masterä¸»åˆ†æ”¯</span></span><br><span class=\"line\">git checkout master</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># åˆå¹¶åˆ†æ”¯</span></span><br><span class=\"line\">git merge release-1.0</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># æ‰“æ ‡ç­¾ã€‚</span></span><br><span class=\"line\">git tag -a 1.2</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>æ³¨æ„ä¸å…‰è¦åˆå¹¶åˆ°masterã€developåˆ†æ”¯ä¹Ÿè¦åˆå¹¶ã€‚</p>\n</blockquote>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># åˆ‡æ¢åˆ°developä¸»åˆ†æ”¯</span></span><br><span class=\"line\">git checkout develop</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># åˆå¹¶åˆ†æ”¯</span></span><br><span class=\"line\">git merge release-1.0</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># åˆå¹¶å®Œ master ã€developåˆ†æ”¯å¯ä»¥åˆ é™¤releaseäº†ã€‚</span></span><br><span class=\"line\">git branch -d release-1.0</span><br></pre></td></tr></table></figure>\n\n<p><strong>Hotfix</strong> </p>\n<blockquote>\n<p>â€‹    è¿™ä¸ªåˆ†æ”¯å°±æ˜¯æ¥ä¿®å¤bugçš„ã€‚å…¶å®å’Œreleaseåˆ†æ”¯å¾ˆç›¸ä¼¼ï¼Œåªä¸è¿‡ç”Ÿå‘½å‘¨æœŸæ›´çŸ­ï¼Œå¯èƒ½éœ€è¦åˆå¹¶å¤šæ¬¡ã€‚</p>\n<p>ä»masteråˆ†ç¦»å‡ºæ¥ä¹‹ååˆå¹¶æ—¶å€™éœ€è¦åˆå¹¶ä¸¤æ¬¡ã€‚ </p>\n</blockquote>\n<ul>\n<li>åˆ›å»ºä¸€æ¡ Hotfix åˆ†æ”¯</li>\n</ul>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># ä»masterä¸­åˆ†ç¦»å‡ºhotfix-1.0.1</span></span><br><span class=\"line\">git checkou -b hotfix-1.0.1 master</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#  æ¨é€åˆ°æœ¬åœ°ä»“åº“</span></span><br><span class=\"line\">git commit -a -m <span class=\"string\">\"create hotfix-1.0.1\"</span></span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>â€‹    æ”¹ç©bugäº†å°±å¯ä»¥åˆå¹¶åˆ°master ã€ developä¸­äº†ã€‚</p>\n</blockquote>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># åˆ‡æ¢åˆ°master</span></span><br><span class=\"line\">git checkout master</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># å°†hotfixåˆå¹¶åˆ°masterä¸­ã€‚</span></span><br><span class=\"line\">git merge hotfix-1.0.1</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># æ‰“æ ‡ç­¾</span></span><br><span class=\"line\">git tag -a 1.3</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>â€‹    åœ¨æŠŠæ”¹åŠ¨çš„ä»£ç åˆå¹¶åˆ°developä¸­ã€‚</p>\n</blockquote>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># åˆ‡æ¢åˆ°develop</span></span><br><span class=\"line\">git checkout develop</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># å°†hotfixåˆå¹¶åˆ°developä¸­ã€‚</span></span><br><span class=\"line\">git merge  hotfix-1.0.1</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># åˆ é™¤hotfixã€‚</span></span><br><span class=\"line\">git branch -d hotfix-1.0.1</span><br></pre></td></tr></table></figure>\n\n<p>åˆå¹¶åˆ†æ”¯æ“ä½œå¹¶æ²¡æœ‰é‚£ä¹ˆç®€å•ï¼Œåˆ†æ”¯æµç¨‹å¤§è‡´æ˜¯è¿™æ ·çš„ã€‚</p>\n","categories":["Git"],"tags":["Git","å·¥ä½œæµç¨‹"]},{"title":"Centos7.*-Javaç¯å¢ƒé…ç½®","url":"/posts/2084976761/","content":"<ul>\n<li>æœ¬ç« å†…å®¹ä¸ºæ—©æœŸç¬”è®°è¿ç§»ã€‚</li>\n<li>é˜…è¯»æé†’,æƒé™root.æ“ä½œæµç¨‹å¹¶ä½éµå¾ªå®‰å…¨è§„åˆ™ï¼›çº¿ä¸Šç¯å¢ƒè¯·å‹¿æ¨¡ä»¿ã€‚</li>\n</ul>\n<h2 id=\"æ–‡ä»¶å­˜æ”¾ä½ç½®ã€‚\"><a href=\"#æ–‡ä»¶å­˜æ”¾ä½ç½®ã€‚\" class=\"headerlink\" title=\"æ–‡ä»¶å­˜æ”¾ä½ç½®ã€‚\"></a>æ–‡ä»¶å­˜æ”¾ä½ç½®ã€‚</h2><ul>\n<li>opt<ul>\n<li>backup </li>\n<li>javahome </li>\n<li>mavenhome</li>\n<li>gradlehome</li>\n</ul>\n</li>\n</ul>\n<figure class=\"highlight sh\"><table><tr><td class=\"code\"><pre><span class=\"line\">mkdir -p /opt/&#123;backup,javahome,mavenhome,gradlehome&#125;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"ç›¸å…³åŸºç¡€ç¨‹åºå®‰è£…\"><a href=\"#ç›¸å…³åŸºç¡€ç¨‹åºå®‰è£…\" class=\"headerlink\" title=\"ç›¸å…³åŸºç¡€ç¨‹åºå®‰è£…\"></a>ç›¸å…³åŸºç¡€ç¨‹åºå®‰è£…</h2><a id=\"more\"></a>\n\n<ul>\n<li>å®‰è£…wget</li>\n</ul>\n<figure class=\"highlight shell\"><table><tr><td class=\"code\"><pre><span class=\"line\">yum -y install wget</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"åŸºç¡€ç¯å¢ƒå®‰è£…\"><a href=\"#åŸºç¡€ç¯å¢ƒå®‰è£…\" class=\"headerlink\" title=\"åŸºç¡€ç¯å¢ƒå®‰è£…\"></a>åŸºç¡€ç¯å¢ƒå®‰è£…</h2><ul>\n<li>å®‰è£…jdk</li>\n<li>å®‰è£…maven</li>\n<li>å®‰è£…git</li>\n<li>å®‰è£…gradle</li>\n</ul>\n<h3 id=\"å®‰è£…Jdk\"><a href=\"#å®‰è£…Jdk\" class=\"headerlink\" title=\"å®‰è£…Jdk\"></a>å®‰è£…Jdk</h3><ul>\n<li>æ£€æŸ¥ç³»ç»Ÿæ˜¯å¦å·²å®‰è£…JDKç¯å¢ƒ</li>\n</ul>\n<figure class=\"highlight shell\"><table><tr><td class=\"code\"><pre><span class=\"line\">java -version</span><br><span class=\"line\">rpm -qa | grep java</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>ä¸‹è½½Jdkå®‰è£…åŒ… <a href=\"http://www.oracle.com/technetwork/java/javase/downloads/index.html\" target=\"_blank\" rel=\"noopener\">ä¸‹è½½åœ°å€</a></li>\n</ul>\n<figure class=\"highlight sh\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">cd</span> /opt/backup  //åˆ‡æ¢ç›®å½•</span><br><span class=\"line\">wget -c xxx //ä¸‹è½½å¦‚æœæ²¡æœ‰å®‰è£… wget è‡ªè¡Œå®‰è£… yum install -y wget</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>è§£å‹jdk</li>\n</ul>\n<figure class=\"highlight shell\"><table><tr><td class=\"code\"><pre><span class=\"line\">tar -zxvf jdk-8u151-linux-x64.tar.gz</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>ç§»åŠ¨è§£å‹æ–‡ä»¶</li>\n</ul>\n<figure class=\"highlight shell\"><table><tr><td class=\"code\"><pre><span class=\"line\">mv ./jdk1.8.0_151/ javahome/</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>æ‰“å¼€profileé…ç½®æ–‡ä»¶</li>\n</ul>\n<figure class=\"highlight shell\"><table><tr><td class=\"code\"><pre><span class=\"line\">vi /etc/profile</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>æ·»åŠ å†…å®¹</li>\n</ul>\n<figure class=\"highlight shell\"><table><tr><td class=\"code\"><pre><span class=\"line\">export JAVA_HOME=/opt/javahome/jdk1.8.0_151</span><br><span class=\"line\">export PATH=$JAVA_HOME/bin:$PATH</span><br><span class=\"line\">export CLASSPATH=.:$JAVA_HOME/lib/tools.jar</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>åˆ·æ–°é…ç½®ä¿¡æ¯</li>\n</ul>\n<figure class=\"highlight shell\"><table><tr><td class=\"code\"><pre><span class=\"line\">source /etc/profile</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>æ£€æŸ¥ç¯å¢ƒæ˜¯å¦é…ç½®æˆåŠŸ</li>\n</ul>\n<figure class=\"highlight shell\"><table><tr><td class=\"code\"><pre><span class=\"line\">java -version</span><br><span class=\"line\"></span><br><span class=\"line\">java version \"1.8.0_151\"</span><br><span class=\"line\">Java(TM) SE Runtime Environment (build 1.8.0_151-b12)</span><br><span class=\"line\">Java HotSpot(TM) 64-Bit Server VM (build 25.151-b12, mixed mode)</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>å‡ºç°ä»¥ä¸Šå†…å®¹è¯´æ˜ç¯å¢ƒåŸºæœ¬å®‰è£…æˆåŠŸã€‚</li>\n</ul>\n<h3 id=\"å®‰è£…Maven\"><a href=\"#å®‰è£…Maven\" class=\"headerlink\" title=\"å®‰è£…Maven\"></a>å®‰è£…Maven</h3><ul>\n<li>ä¸‹è½½Mavanå®‰è£…åŒ… <a href=\"https://maven.apache.org/download.cgi\" target=\"_blank\" rel=\"noopener\">ä¸‹è½½åœ°å€</a></li>\n</ul>\n<blockquote>\n<p>ä¸è¦æºä»£ç¢¼ï¼Œä¸‹è½½ç¼–è¯‘ä¹‹åçš„ã€‚Binary tar.gz archive</p>\n<p>è§£å‹å‘ç°å¸¦pomæ–‡ä»¶é‚£ä¸ªæ˜¯æºä»£ç ã€‚</p>\n</blockquote>\n<figure class=\"highlight sh\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">cd</span> /opt/backup  //åˆ‡æ¢ç›®å½•</span><br><span class=\"line\">wget -c xxx</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>è§£å‹Maven</li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">tar -zxvf apache-maven-3.5.0-bin.tar.gz</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>ç§»åŠ¨æ–‡ä»¶</li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">mv .&#x2F;apache-maven-3.5.0&#x2F; mavenhome&#x2F;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>é…ç½®ç¯å¢ƒå˜é‡</li>\n</ul>\n<figure class=\"highlight shell\"><table><tr><td class=\"code\"><pre><span class=\"line\">export MAVEN_HOME=/opt/mavenhome/apache-maven-3.5.0</span><br><span class=\"line\">export PATH=$&#123;PATH&#125;:$&#123;MAVEN_HOME&#125;/bin</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>åˆ·æ–°é…ç½®ä¿¡æ¯</li>\n</ul>\n<figure class=\"highlight shell\"><table><tr><td class=\"code\"><pre><span class=\"line\">. /etc/profile</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>æ£€æŸ¥æ˜¯å¦å®‰è£…æˆåŠŸ</li>\n</ul>\n<figure class=\"highlight shell\"><table><tr><td class=\"code\"><pre><span class=\"line\">mvn -version</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"å®‰è£…git\"><a href=\"#å®‰è£…git\" class=\"headerlink\" title=\"å®‰è£…git\"></a>å®‰è£…git</h3><ul>\n<li>æºå®‰è£…</li>\n</ul>\n<figure class=\"highlight shell\"><table><tr><td class=\"code\"><pre><span class=\"line\">yum -y install git</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>æ£€æŸ¥å®‰è£…</li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">[root@localhost ~]# git version</span><br><span class=\"line\">git version 1.8.3.1</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>çœ‹åˆ°ç‰ˆæœ¬è¯´æ˜å®‰è£…æˆåŠŸ</li>\n</ul>\n<h3 id=\"å®‰è£Gradle\"><a href=\"#å®‰è£Gradle\" class=\"headerlink\" title=\"å®‰è£Gradle\"></a>å®‰è£Gradle</h3><blockquote>\n<p>åœ¨è¯­æ³•ä¸Šæ˜¯åŸºäºGroovyè¯­è¨€çš„ï¼ˆ<a href=\"https://link.jianshu.com/?t=http://www.groovy-lang.org/\" target=\"_blank\" rel=\"noopener\">Groovy</a> æ˜¯ä¸€ç§åŸºäºJVMçš„æ•æ·å¼€å‘è¯­è¨€ï¼Œå¯ä»¥ç®€å•çš„ç†è§£ä¸ºå¼ºç±»å‹è¯­è¨€javaçš„å¼±ç±»å‹ç‰ˆæœ¬ï¼‰ï¼Œåœ¨é¡¹ç›®ç®¡ç†ä¸Šæ˜¯åŸºäºAntå’ŒMavenæ¦‚å¿µçš„é¡¹ç›®è‡ªåŠ¨åŒ–å»ºæ„å·¥å…·</p>\n</blockquote>\n<ul>\n<li>ä¸‹è½½</li>\n</ul>\n<figure class=\"highlight sh\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">cd</span> /opt/backup  //åˆ‡æ¢ç›®å½•</span><br><span class=\"line\">wget -c https://downloads.gradle.org/distributions/gradle-4.0.1-all.zip</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>è§£å‹</li>\n</ul>\n<figure class=\"highlight sh\"><table><tr><td class=\"code\"><pre><span class=\"line\">unzip -d gradle-4.0.1-all.zip</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>å¦‚æœæ²¡æœ‰unzip å®‰è£…ä¸‹</p>\n</blockquote>\n<figure class=\"highlight sh\"><table><tr><td class=\"code\"><pre><span class=\"line\">yum -y install unzip</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>ç§»åŠ¨æ–‡ä»¶</li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">mv .&#x2F;gradle-4.0.1&#x2F; gradlehome&#x2F;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>é…ç½®ç¯å¢ƒå˜é‡</li>\n</ul>\n<figure class=\"highlight sh\"><table><tr><td class=\"code\"><pre><span class=\"line\">vim /etc/profile</span><br><span class=\"line\">//æ·»åŠ </span><br><span class=\"line\"><span class=\"built_in\">export</span> GRADLE_HOME=/opt/gradlehome/gradle-4.0.1</span><br><span class=\"line\"><span class=\"built_in\">export</span> PATH=<span class=\"variable\">$&#123;PATH&#125;</span>:<span class=\"variable\">$&#123;GRADLE_HOME&#125;</span>/bin</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>åˆ·æ–°é…ç½®ä½¿å…¶ç”Ÿæ•ˆ</li>\n</ul>\n<figure class=\"highlight sh\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">source</span> /etc/profile</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>æ£€æŸ¥æ˜¯å¦å®‰è£…æˆåŠŸ</li>\n</ul>\n<figure class=\"highlight sh\"><table><tr><td class=\"code\"><pre><span class=\"line\">gradle -v</span><br></pre></td></tr></table></figure>\n\n<p>æ˜¾ç¤ºç‰ˆæœ¬ä¿¡æ¯åˆ™æ ‡è¯†ç¯å¢ƒé…ç½®æˆåŠŸã€‚</p>\n<h2 id=\"END\"><a href=\"#END\" class=\"headerlink\" title=\"END\"></a>END</h2>","categories":["Linuxè¿ç»´"],"tags":["Centos7","Linux","Maven","Gradle"]},{"title":"æºç é˜…è¯»-LinkedList","url":"/posts/3730783701/","content":"<blockquote>\n<p>æœ¬ç« æ˜¯æ•´ç†çŸ¥è¯†å†…å®¹ï¼Œä¸ºå¼ºåŒ–çŸ¥è¯†é•¿æœŸæ›´æ–°ã€‚</p>\n<h3 id=\"Linked-List\"><a href=\"#Linked-List\" class=\"headerlink\" title=\"Linked List\"></a>Linked List</h3><ul>\n<li>é“¾è¡¨å³æ˜¯ç”±èŠ‚ç‚¹ï¼ˆNodeï¼‰ç»„æˆçš„çº¿æ€§é›†åˆï¼Œæ¯ä¸ªèŠ‚ç‚¹å¯ä»¥åˆ©ç”¨æŒ‡é’ˆæŒ‡å‘å…¶ä»–èŠ‚ç‚¹ã€‚å®ƒæ˜¯ä¸€ç§åŒ…å«äº†å¤šä¸ªèŠ‚ç‚¹çš„ã€èƒ½å¤Ÿç”¨äºè¡¨ç¤ºåºåˆ—çš„æ•°æ®ç»“æ„ã€‚</li>\n<li><strong>å•å‘é“¾è¡¨</strong>: é“¾è¡¨ä¸­çš„èŠ‚ç‚¹ä»…æŒ‡å‘ä¸‹ä¸€ä¸ªèŠ‚ç‚¹ï¼Œå¹¶ä¸”æœ€åä¸€ä¸ªèŠ‚ç‚¹æŒ‡å‘ç©ºã€‚</li>\n<li><strong>åŒå‘é“¾è¡¨</strong>: å…¶ä¸­æ¯ä¸ªèŠ‚ç‚¹å…·æœ‰ä¸¤ä¸ªæŒ‡é’ˆ pã€nï¼Œä½¿å¾— p æŒ‡å‘å…ˆå‰èŠ‚ç‚¹å¹¶ä¸” n æŒ‡å‘ä¸‹ä¸€ä¸ªèŠ‚ç‚¹ï¼›æœ€åä¸€ä¸ªèŠ‚ç‚¹çš„ n æŒ‡é’ˆæŒ‡å‘ nullã€‚</li>\n<li><strong>å¾ªç¯é“¾è¡¨</strong>ï¼šæ¯ä¸ªèŠ‚ç‚¹æŒ‡å‘ä¸‹ä¸€ä¸ªèŠ‚ç‚¹å¹¶ä¸”æœ€åä¸€ä¸ªèŠ‚ç‚¹æŒ‡å‘ç¬¬ä¸€ä¸ªèŠ‚ç‚¹çš„é“¾è¡¨ã€‚</li>\n<li>æ—¶é—´å¤æ‚åº¦:<ul>\n<li>ç´¢å¼•: <code>O(n)</code></li>\n<li>æœç´¢: <code>O(n)</code></li>\n<li>æ’å…¥: <code>O(1)</code></li>\n<li>ç§»é™¤: <code>O(1)</code></li>\n</ul>\n</li>\n</ul>\n</blockquote>\n<p>LinkedList æ˜¯æ˜¯ä¸€ä¸ªæœ‰åºçš„é›†åˆï¼Œæ˜¯Collectionçš„å®ç°ç±»ä¹‹ä¸€ã€‚</p>\n<p><img src=\"https://z201.oss-cn-shanghai.aliyuncs.com/JavaNote/Collection/Collection-LinkedList.JPG\"></p>\n<h2 id=\"æ¦‚è¿°\"><a href=\"#æ¦‚è¿°\" class=\"headerlink\" title=\"æ¦‚è¿°\"></a>æ¦‚è¿°</h2><ul>\n<li>åŒé“¾è¡¨  LinkedList æ˜¯ Java Collecion Frameworkæˆå‘˜ä¹‹ä¸€ã€‚  </li>\n<li>åŒé“¾è¡¨  æ˜¯Listå’ŒDequeçš„æ¥å£çš„å®ç°ã€‚</li>\n<li>åœ¨å†…éƒ¨ï¼Œå®ƒæ˜¯ä½¿ç”¨åŒé“¾è¡¨æ•°æ®ç»“æ„å®ç°çš„ã€‚</li>\n<li>å®ƒæ”¯æŒé‡å¤çš„å…ƒç´ ã€‚å®ƒæ²¡æœ‰å®ç°RandomAccessæ¥å£ã€‚æ‰€ä»¥æˆ‘ä»¬åªèƒ½æŒ‰é¡ºåºè®¿é—®å…ƒç´ ã€‚å®ƒä¸æ”¯æŒéšæœºè®¿é—®å…ƒç´ ã€‚</li>\n<li>ç›¸å¯¹ä¸ArrayListå®ƒ åˆ é™¤ å’Œæ·»åŠ  é€Ÿåº¦ä¼šå¿«å¾ˆå¤šã€‚ä½†æ˜¯éå†å°±è¦æ…¢ä¸€äº›ã€‚</li>\n<li>å®ƒä»¥æ’å…¥é¡ºåºå­˜å‚¨æˆ–ç»´æŠ¤å®ƒçš„å…ƒç´ ã€‚</li>\n</ul>\n<h3 id=\"é“¾è¡¨\"><a href=\"#é“¾è¡¨\" class=\"headerlink\" title=\"é“¾è¡¨\"></a>é“¾è¡¨</h3><a id=\"more\"></a>\n\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Node</span>&lt;<span class=\"title\">E</span>&gt; </span>&#123;</span><br><span class=\"line\">    E item;</span><br><span class=\"line\">    Node&lt;E&gt; next;</span><br><span class=\"line\">    Node&lt;E&gt; prev;</span><br><span class=\"line\"></span><br><span class=\"line\">    Node(Node&lt;E&gt; prev, E element, Node&lt;E&gt; next) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.item = element;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.next = next;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.prev = prev;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>é“¾è¡¨ç»´æŠ¤çš„æœ€åŸºæœ¬ç»“æ„ã€‚åœ¨JVMä¸­LinkedListå­˜å‚¨å¹¶ä¸ä¼šåƒæ•°ç»„ä¸€æ ·æŒ‰é¡ºåºæ¥ï¼Œå­˜å‚¨çš„ä½ç½®æ˜¯éšæœºçš„ã€‚</p>\n<p>é“¾æ¥è¡¨ç»“æ„</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">test</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">    LinkedList list = <span class=\"keyword\">new</span> LinkedList();</span><br><span class=\"line\">    list.add(<span class=\"string\">\"a\"</span>);</span><br><span class=\"line\">    list.add(<span class=\"string\">\"b\"</span>);</span><br><span class=\"line\">    list.add(<span class=\"string\">\"c\"</span>);</span><br><span class=\"line\">    list.add(<span class=\"string\">\"d\"</span>);</span><br><span class=\"line\">    System.out.println(list.toString());</span><br><span class=\"line\">    System.out.println(list.getFirst()); <span class=\"comment\">// ç¬¬ä¸€ä¸ªå…ƒç´ ã€‚</span></span><br><span class=\"line\">    System.out.println(list.getLast());  <span class=\"comment\">// æœ€åä¸€ä¸ªå…ƒç´ </span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>è¾“å‡º</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\">[a, b, c, d]</span><br><span class=\"line\">a</span><br><span class=\"line\">d</span><br></pre></td></tr></table></figure>\n\n<p>linkedListçš„first ==  a next -&gt; b next -&gt; c next -&gt; d next </p>\n<h3 id=\"æ¡ˆä¾‹-éå†LinkedList\"><a href=\"#æ¡ˆä¾‹-éå†LinkedList\" class=\"headerlink\" title=\"æ¡ˆä¾‹-éå†LinkedList\"></a>æ¡ˆä¾‹-éå†LinkedList</h3><figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">test1</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">    LinkedList list = <span class=\"keyword\">new</span> LinkedList();</span><br><span class=\"line\">    list.add(<span class=\"string\">\"a\"</span>);</span><br><span class=\"line\">    list.add(<span class=\"string\">\"b\"</span>);</span><br><span class=\"line\">    list.add(<span class=\"string\">\"c\"</span>);</span><br><span class=\"line\">    list.add(<span class=\"string\">\"d\"</span>);</span><br><span class=\"line\">    System.out.println(list.toString());</span><br><span class=\"line\">    Iterator&lt;String&gt; itr = list.iterator();</span><br><span class=\"line\">    <span class=\"keyword\">while</span> (itr.hasNext())&#123;</span><br><span class=\"line\">        System.out.println(itr.next());</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>è¾“å‡º</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">[a, b, c, d]</span><br><span class=\"line\">a</span><br><span class=\"line\">b</span><br><span class=\"line\">c</span><br><span class=\"line\">d</span><br></pre></td></tr></table></figure>\n\n<p>éƒ½æ˜¯Collectionå®¶æ—çš„ä½¿ç”¨è¿­ä»£å™¨è¿›è¡Œéå†ã€‚</p>\n<h2 id=\"æºç åˆ†æä¸‹linkedList\"><a href=\"#æºç åˆ†æä¸‹linkedList\" class=\"headerlink\" title=\"æºç åˆ†æä¸‹linkedList\"></a>æºç åˆ†æä¸‹linkedList</h2><p>LinkedListä¸­çš„å¸¸é‡å’Œå˜é‡</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// å®¹å™¨å¤§å°</span></span><br><span class=\"line\"><span class=\"keyword\">transient</span> <span class=\"keyword\">int</span> size = <span class=\"number\">0</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">   <span class=\"comment\">// å¤´éƒ¨èŠ‚ç‚¹å¼•ç”¨</span></span><br><span class=\"line\">   <span class=\"keyword\">transient</span> Node&lt;E&gt; first;</span><br><span class=\"line\"></span><br><span class=\"line\"> \t<span class=\"comment\">// å°¾éƒ¨èŠ‚ç‚¹å¼•ç”¨</span></span><br><span class=\"line\">   <span class=\"keyword\">transient</span> Node&lt;E&gt; last;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"1ã€å¦‚ä½•åˆ›å»ºä¸€ä¸ªLinkedListå®ä¾‹ã€‚\"><a href=\"#1ã€å¦‚ä½•åˆ›å»ºä¸€ä¸ªLinkedListå®ä¾‹ã€‚\" class=\"headerlink\" title=\"1ã€å¦‚ä½•åˆ›å»ºä¸€ä¸ªLinkedListå®ä¾‹ã€‚\"></a>1ã€å¦‚ä½•åˆ›å»ºä¸€ä¸ªLinkedListå®ä¾‹ã€‚</h3><figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">test2</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">    LinkedList list = <span class=\"keyword\">new</span> LinkedList();</span><br><span class=\"line\">    list.add(<span class=\"string\">\"a\"</span>);</span><br><span class=\"line\">    list.add(<span class=\"string\">\"b\"</span>);</span><br><span class=\"line\">    list.add(<span class=\"string\">\"c\"</span>);</span><br><span class=\"line\">    list.add(<span class=\"string\">\"d\"</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">    String[] arr = <span class=\"keyword\">new</span> String[]&#123;<span class=\"string\">\"a\"</span>,<span class=\"string\">\"b\"</span>,<span class=\"string\">\"c\"</span>,<span class=\"string\">\"d\"</span>&#125;;</span><br><span class=\"line\">    LinkedList list1 = <span class=\"keyword\">new</span> LinkedList(Arrays.asList(arr));</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>åˆ›å»ºLinkedListçš„å®ä¾‹çš„æ–¹å¼æœ‰ä¸¤ç§ã€‚LinkedListåœ¨è¿™ç‚¹ä¸Šå°±ä¸ArrayListä¸åŒï¼Œä¸éœ€è¦æŒ‡å®šå¤§å°ã€‚</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//ç©ºæ„é€ æ–¹æ³• list1</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">LinkedList</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// list2</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">LinkedList</span><span class=\"params\">(Collection&lt;? extends E&gt; c)</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>();</span><br><span class=\"line\">    <span class=\"comment\">// å°†c Collectionå®¹å™¨çš„å…ƒç´ éƒ½å¤åˆ¶è¿›æ¥ã€‚</span></span><br><span class=\"line\">    addAll(c);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"2ã€add-æ–¹æ³•\"><a href=\"#2ã€add-æ–¹æ³•\" class=\"headerlink\" title=\"2ã€add æ–¹æ³•\"></a>2ã€add æ–¹æ³•</h3><figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// æ·»åŠ æˆåŠŸåˆ™è¿”å›true</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">boolean</span> <span class=\"title\">add</span><span class=\"params\">(E e)</span> </span>&#123;</span><br><span class=\"line\">    linkLast(e);</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">true</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">linkLast</span><span class=\"params\">(E e)</span> </span>&#123;</span><br><span class=\"line\">\t<span class=\"keyword\">final</span> Node&lt;E&gt; l = last; </span><br><span class=\"line\">     <span class=\"comment\">// åˆ›å»ºä¸€ä¸ªæ–°çš„link lastä¸ºå¤´ prevä¸ºnull</span></span><br><span class=\"line\">\t<span class=\"keyword\">final</span> Node&lt;E&gt; newNode = <span class=\"keyword\">new</span> Node&lt;&gt;(l, e, <span class=\"keyword\">null</span>); </span><br><span class=\"line\">\tlast = newNode;</span><br><span class=\"line\">    <span class=\"comment\">// å¦‚æœlastæ˜¯null,å°†eè®¾ç½®ä¸ºfirst åä¹‹æ”¾åˆ°å°¾éƒ¨</span></span><br><span class=\"line\">\t<span class=\"keyword\">if</span> (l == <span class=\"keyword\">null</span>)</span><br><span class=\"line\">\t\tfirst = newNode;</span><br><span class=\"line\">\t<span class=\"keyword\">else</span></span><br><span class=\"line\">\t\tl.next = newNode;</span><br><span class=\"line\">\tsize++;</span><br><span class=\"line\">\tmodCount++;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// å°†å®¹å™¨cçš„å…ƒç´ æ·»åŠ åˆ°å½“å‰å®¹å™¨ä¸­ã€‚</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">boolean</span> <span class=\"title\">addAll</span><span class=\"params\">(Collection&lt;? extends E&gt; c)</span> </span>&#123;</span><br><span class=\"line\">      <span class=\"comment\">// æŠŠå½“å‰å®¹å™¨sezi å’Œ cä¼ å…¥</span></span><br><span class=\"line\">      <span class=\"keyword\">return</span> addAll(size, c);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">boolean</span> <span class=\"title\">addAll</span><span class=\"params\">(<span class=\"keyword\">int</span> index, Collection&lt;? extends E&gt; c)</span> </span>&#123;</span><br><span class=\"line\">        checkPositionIndex(index); <span class=\"comment\">//æ£€æŸ¥ç´¢å¼•æ˜¯å¦è¶Šç•Œ</span></span><br><span class=\"line\"></span><br><span class=\"line\">        Object[] a = c.toArray();  <span class=\"comment\">//å°†c è½¬æ¢æˆæ•°ç»„</span></span><br><span class=\"line\">        <span class=\"keyword\">int</span> numNew = a.length;     <span class=\"comment\">//æ ¹æ®æ•°ç»„é•¿åº¦å¾—åˆ°éœ€è¦æ·»åŠ çš„æ•°é‡</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (numNew == <span class=\"number\">0</span>)\t\t  <span class=\"comment\">//å¦‚æœæ·»åŠ é•¿åº¦ä¸º0 å°±è¿”å›false.</span></span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"keyword\">false</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">        Node&lt;E&gt; pred, succ;        <span class=\"comment\">// å£°æ˜ä¸¤ä¸ªLinkè¿™å…¶å®æ˜¯ä¸¤ä¸ªä¸´æ—¶èŠ‚ç‚¹ã€‚</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (index == size) &#123;\t   <span class=\"comment\">// ä»Indexå¼€å§‹æ·»åŠ ï¼Œå¦‚æœindexçš„ä½ç½®ç­‰äºå½“å‰å®¹å™¨çš„é•¿åº¦ï¼Œåˆ™ä»lastå¼€å§‹æ·»åŠ å…ƒç´ ã€‚</span></span><br><span class=\"line\">            succ = <span class=\"keyword\">null</span>;\t\t   </span><br><span class=\"line\">            pred = last;\t\t   <span class=\"comment\">// å®¹å™¨lastæŒ‡å‘ pred</span></span><br><span class=\"line\">        &#125; <span class=\"keyword\">else</span> &#123;\t\t\t\t  <span class=\"comment\">// ä»æŸä¸€ä¸ªlinkå¼€å§‹ç”Ÿæˆã€‚</span></span><br><span class=\"line\">            succ = node(index);\t    <span class=\"comment\">// è·å–indexä¸‹æ ‡çš„å…ƒç´ ã€‚</span></span><br><span class=\"line\">            pred = succ.prev;       <span class=\"comment\">// å°†succ.prev æŒ‡å‘ predã€‚</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">\t\t</span><br><span class=\"line\">        <span class=\"comment\">// éå†æ•°ç»„ä¸­çš„å…ƒç´ ï¼Œå¹¶æŒ‰ç…§é¡ºåºå…³ç³»ç”Ÿæˆlink</span></span><br><span class=\"line\">        <span class=\"keyword\">for</span> (Object o : a) &#123;</span><br><span class=\"line\">            <span class=\"meta\">@SuppressWarnings</span>(<span class=\"string\">\"unchecked\"</span>) E e = (E) o;</span><br><span class=\"line\">            Node&lt;E&gt; newNode = <span class=\"keyword\">new</span> Node&lt;&gt;(pred, e, <span class=\"keyword\">null</span>);</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (pred == <span class=\"keyword\">null</span>)</span><br><span class=\"line\">                first = newNode;</span><br><span class=\"line\">            <span class=\"keyword\">else</span></span><br><span class=\"line\">                pred.next = newNode;</span><br><span class=\"line\">            pred = newNode;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">\t\t<span class=\"comment\">// ä¸ç°æœ‰çš„é“¾è¡¨è¿›è¡Œè¿æ¥</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (succ == <span class=\"keyword\">null</span>) &#123;  <span class=\"comment\">//ä»lastå¼€å§‹æ·»åŠ å…ƒç´ çš„æ—¶å€™ã€‚</span></span><br><span class=\"line\">            last = pred;</span><br><span class=\"line\">        &#125; <span class=\"keyword\">else</span> &#123;\t\t    <span class=\"comment\">//ä»æŸä¸ªå…ƒç´ å¼€å§‹æ·»åŠ å…ƒç´ ã€‚</span></span><br><span class=\"line\">            pred.next = succ;</span><br><span class=\"line\">            succ.prev = pred;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        size += numNew; <span class=\"comment\">//æ›´æ–°sizeå¤§å°ã€‚</span></span><br><span class=\"line\">        modCount++;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">true</span>;</span><br><span class=\"line\"> &#125;</span><br></pre></td></tr></table></figure>\n\n<p>addAllæ–¹æ³•ä¼šç¨å¾®éº»çƒ¦ç‚¹ï¼Œä¸¾ä¸ªæ —å­ã€‚</p>\n<blockquote>\n<p>addAll æ–¹æ³•æœ‰ä¸¤ç§æƒ…å†µï¼Œ1ã€å½“å‰å®¹å™¨æ²¡æœ‰å…ƒç´ å­˜åœ¨ã€‚2ã€å½“å‰å®¹å™¨å·²ç»å­˜åœ¨å…ƒç´ ã€‚</p>\n</blockquote>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">test3</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">    String[] arr = <span class=\"keyword\">new</span> String[]&#123;<span class=\"string\">\"a\"</span> , <span class=\"string\">\"b\"</span>&#125;;</span><br><span class=\"line\">    LinkedList list = <span class=\"keyword\">new</span> LinkedList(Arrays.asList(arr));  <span class=\"comment\">//æƒ…å†µä¸€</span></span><br><span class=\"line\">    arr = <span class=\"keyword\">new</span> String[]&#123;<span class=\"string\">\"c\"</span> , <span class=\"string\">\"d\"</span>&#125;;</span><br><span class=\"line\">    list.addAll(Arrays.asList(arr));  <span class=\"comment\">// æƒ…å†µäºŒ</span></span><br><span class=\"line\">    System.out.println(list);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>ç¬¬äºŒæ¬¡æ²¡æœ‰æ¯æ¬¡éƒ½å±•ç¤ºå‡ºæ¥ï¼Œä¸è¿‡è¿™å›¾ç”»çš„å•°å—¦ç‚¹ã€‚å…¶å®ä¸Šdebugä¼šç›´æ¥ç‚¹ã€‚</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">test5</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">    String[] arr = <span class=\"keyword\">new</span> String[]&#123;<span class=\"string\">\"a\"</span> , <span class=\"string\">\"b\"</span> , <span class=\"string\">\"c\"</span> , <span class=\"string\">\"d\"</span>&#125;;</span><br><span class=\"line\">    LinkedList list = <span class=\"keyword\">new</span> LinkedList(Arrays.asList(arr));</span><br><span class=\"line\">    list.add(<span class=\"number\">1</span>,<span class=\"string\">\"w\"</span>); <span class=\"comment\">// åœ¨ä¸‹æ ‡1çš„ä½ç½®æ’å…¥w</span></span><br><span class=\"line\">    System.out.println(list);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>è¾“å‡º</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\">[a, w, b, c, d]</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"linkBefore\"><a href=\"#linkBefore\" class=\"headerlink\" title=\"linkBefore\"></a>linkBefore</h4><figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// åœ¨æŒ‡å®šç´¢å¼•ä½ç½®æ·»åŠ å…ƒç´ ã€‚</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">add</span><span class=\"params\">(<span class=\"keyword\">int</span> index, E element)</span> </span>&#123;</span><br><span class=\"line\">    checkPositionIndex(index); <span class=\"comment\">// æ£€æŸ¥ä¸‹æ ‡æ˜¯å¦è¶Šç•Œ</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (index == size)\t\t<span class=\"comment\">//å¦‚æœæ’å…¥çš„ä½ç½®æ˜¯ä¸é•¿åº¦ç›¸ç­‰ï¼Œå°±å§å½“å‰lastç»™ä»–ã€‚</span></span><br><span class=\"line\">        linkLast(element);</span><br><span class=\"line\">    <span class=\"keyword\">else</span></span><br><span class=\"line\">        linkBefore(element, node(index));</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * Inserts element e before non-null Node succ.</span></span><br><span class=\"line\"><span class=\"comment\"> * åœ¨succ çš„å‰é¢æ’å…¥e.</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">linkBefore</span><span class=\"params\">(E e, Node&lt;E&gt; succ)</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">// assert succ != null;</span></span><br><span class=\"line\">    <span class=\"keyword\">final</span> Node&lt;E&gt; pred = succ.prev;</span><br><span class=\"line\">    <span class=\"keyword\">final</span> Node&lt;E&gt; newNode = <span class=\"keyword\">new</span> Node&lt;&gt;(pred, e, succ);</span><br><span class=\"line\">    succ.prev = newNode;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (pred == <span class=\"keyword\">null</span>)</span><br><span class=\"line\">        first = newNode;</span><br><span class=\"line\">    <span class=\"keyword\">else</span></span><br><span class=\"line\">        pred.next = newNode;</span><br><span class=\"line\">    size++;</span><br><span class=\"line\">    modCount++;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"3ã€remove\"><a href=\"#3ã€remove\" class=\"headerlink\" title=\"3ã€remove\"></a>3ã€remove</h3><blockquote>\n<p>è¿™é‡Œåªä»‹ç»ä¸¤ä¸ªå¸¦å‚æ•°çš„removeæ–¹æ³•ã€‚</p>\n</blockquote>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">test4</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">    String[] arr = <span class=\"keyword\">new</span> String[]&#123;<span class=\"string\">\"a\"</span>,<span class=\"string\">\"b\"</span>,<span class=\"string\">\"c\"</span>,<span class=\"string\">\"d\"</span>&#125;;</span><br><span class=\"line\">    LinkedList list = <span class=\"keyword\">new</span> LinkedList(Arrays.asList(arr));</span><br><span class=\"line\">    System.out.println(list.remove(<span class=\"string\">\"a\"</span>));</span><br><span class=\"line\">    System.out.println(list);</span><br><span class=\"line\">    System.out.println(list.remove(<span class=\"number\">1</span>));</span><br><span class=\"line\">    System.out.println(list);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>è¾“å‡º</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">true</span></span><br><span class=\"line\">[b, c, d]</span><br><span class=\"line\">c</span><br><span class=\"line\">[b, d]</span><br></pre></td></tr></table></figure>\n\n\n\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// åˆ é™¤ç›®æ ‡å¯¹è±¡ï¼Œè‹¥æœåˆ é™¤æˆåŠŸå°±è¿”å›trueåä¹‹è¿”å›falseã€‚</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">boolean</span> <span class=\"title\">remove</span><span class=\"params\">(Object o)</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (o == <span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (Node&lt;E&gt; x = first; x != <span class=\"keyword\">null</span>; x = x.next) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (x.item == <span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">                unlink(x);</span><br><span class=\"line\">                <span class=\"keyword\">return</span> <span class=\"keyword\">true</span>;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">        <span class=\"comment\">// éå†é“¾è¡¨</span></span><br><span class=\"line\">        <span class=\"keyword\">for</span> (Node&lt;E&gt; x = first; x != <span class=\"keyword\">null</span>; x = x.next) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (o.equals(x.item)) &#123;</span><br><span class=\"line\">                unlink(x);</span><br><span class=\"line\">                <span class=\"keyword\">return</span> <span class=\"keyword\">true</span>;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">false</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// åˆ é™¤ä¸‹æ ‡ä½ç½®çš„å…ƒç´ ï¼Œè‹¥åˆ é™¤æˆåŠŸè¿”å›</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> E <span class=\"title\">remove</span><span class=\"params\">(<span class=\"keyword\">int</span> index)</span> </span>&#123;</span><br><span class=\"line\">    checkElementIndex(index); <span class=\"comment\">//æ£€æŸ¥ä¸‹æ ‡æ˜¯å¦è¶Šç•Œ</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> unlink(node(index)); </span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// æ ¹æ®ä¸‹æ ‡å¯»æ‰¾å…ƒç´ ï¼Œæ‰¾åˆ°å¹¶è¿”å›ã€‚</span></span><br><span class=\"line\"><span class=\"function\">Node&lt;E&gt; <span class=\"title\">node</span><span class=\"params\">(<span class=\"keyword\">int</span> index)</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">// assert isElementIndex(index);</span></span><br><span class=\"line\">\t<span class=\"comment\">// size &gt;&gt; 1 ç§»ä½è¿ç®— ç›¸å½“äº*0.5ï¼Œæ ¹æ®ç´¢å¼•ä¸‹æ ‡çš„ä½ç½®åˆ¤æ–­åœ¨é›†åˆå‰æ®µè¿˜æ˜¯åç«¯å‰ç«¯å°±ä»firstå¼€å§‹éå†åä¹‹ä»lastå¼€å§‹éå†ã€‚</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (index &lt; (size &gt;&gt; <span class=\"number\">1</span>)) &#123;</span><br><span class=\"line\">        Node&lt;E&gt; x = first;</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>; i &lt; index; i++)</span><br><span class=\"line\">            x = x.next;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> x;</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">        Node&lt;E&gt; x = last;</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> i = size - <span class=\"number\">1</span>; i &gt; index; i--)</span><br><span class=\"line\">            x = x.prev;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> x;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">   <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * Unlinks non-null node x.</span></span><br><span class=\"line\"><span class=\"comment\">     * å¸è½½æŒ‡å®šèŠ‚ç‚¹çš„é“¾æ¥</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"function\">E <span class=\"title\">unlink</span><span class=\"params\">(Node&lt;E&gt; x)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"comment\">// assert x != null;</span></span><br><span class=\"line\">        <span class=\"keyword\">final</span> E element = x.item;</span><br><span class=\"line\">        <span class=\"keyword\">final</span> Node&lt;E&gt; next = x.next;</span><br><span class=\"line\">        <span class=\"keyword\">final</span> Node&lt;E&gt; prev = x.prev;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (prev == <span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">            first = next;</span><br><span class=\"line\">        &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">            prev.next = next;</span><br><span class=\"line\">            x.prev = <span class=\"keyword\">null</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (next == <span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">            last = prev;</span><br><span class=\"line\">        &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">            next.prev = prev;</span><br><span class=\"line\">            x.next = <span class=\"keyword\">null</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        x.item = <span class=\"keyword\">null</span>;</span><br><span class=\"line\">        size--;</span><br><span class=\"line\">        modCount++;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> element;</span><br><span class=\"line\">    &#125;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"unlink\"><a href=\"#unlink\" class=\"headerlink\" title=\"unlink\"></a>unlink</h4><h3 id=\"4ã€pollæ–¹æ³•\"><a href=\"#4ã€pollæ–¹æ³•\" class=\"headerlink\" title=\"4ã€pollæ–¹æ³•\"></a>4ã€pollæ–¹æ³•</h3><figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// è·å–å½“å‰é“¾è¡¨fristå…ƒç´ ï¼Œå¦‚æœä¸å­˜åœ¨å°±è¿”å›null,å­˜åœ¨è¯¥å…ƒç´ å¹¶åˆ é™¤ã€‚</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> E <span class=\"title\">poll</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">final</span> Node&lt;E&gt; f = first;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> (f == <span class=\"keyword\">null</span>) ? <span class=\"keyword\">null</span> : unlinkFirst(f);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n","categories":["æºç åˆ†æ"],"tags":["Java","Java-Collecions-Framework","LinkedList"]},{"title":"æºç é˜…è¯»-ArrayList","url":"/posts/3941296488/","content":"<blockquote>\n<p>æœ¬ç« æ˜¯æ•´ç†çŸ¥è¯†å†…å®¹ï¼Œä¸ºå¼ºåŒ–çŸ¥è¯†é•¿æœŸæ›´æ–°ã€‚</p>\n</blockquote>\n<p>List æ˜¯æ˜¯ä¸€ä¸ªæœ‰åºçš„é›†åˆï¼Œæ˜¯Collectionçš„å®ç°ç±»ä¹‹ä¸€ã€‚</p>\n<p><img src=\"https://z201.oss-cn-shanghai.aliyuncs.com/JavaNote/Collection/Collection-ArrayList.JPG\"></p>\n<h2 id=\"æ¦‚è¿°\"><a href=\"#æ¦‚è¿°\" class=\"headerlink\" title=\"æ¦‚è¿°\"></a>æ¦‚è¿°</h2><ul>\n<li>listæ¥å£æ˜¯Java Collection Frameworkçš„æˆå‘˜ã€‚</li>\n<li>åˆ—é˜Ÿå…è®¸æ·»åŠ é‡å¤çš„å…ƒç´ ã€‚</li>\n<li>åˆ—é˜Ÿå…è®¸nullå­˜åœ¨ã€‚</li>\n<li>åˆ—é˜Ÿæ˜¯ä»0å¼€å§‹ï¼Œä¹Ÿå°±æ˜¯åˆ—é˜Ÿå¤´å…ƒç´ çš„ä¸‹æ ‡æ˜¯0ã€‚</li>\n<li>åˆ—é˜Ÿæ”¯æŒæ³›å‹ï¼Œè¿™æ ·å¯ä»¥é¿å…<code>ClassCastException</code>å¼‚å¸¸ã€‚</li>\n</ul>\n<h3 id=\"æ•°ç»„ä¸æ•°ç»„åˆ—è¡¨\"><a href=\"#æ•°ç»„ä¸æ•°ç»„åˆ—è¡¨\" class=\"headerlink\" title=\"æ•°ç»„ä¸æ•°ç»„åˆ—è¡¨\"></a>æ•°ç»„ä¸æ•°ç»„åˆ—è¡¨</h3><a id=\"more\"></a>\n\n<p>â€‹    Array(æ•°ç»„)å®ƒæ˜¯åœ¨å†…å­˜ä¸­åˆ’åˆ†å‡ºä¸€å—è¿ç»­çš„åœ°å€ç©ºé—´è¿›è¡Œå…ƒç´ çš„å­˜å‚¨ï¼Œç”±äºå®ƒç›´æ¥æ“ä½œå†…å­˜ï¼Œæ‰€ä»¥æ€§èƒ½æ¯”å…¶ä»–çš„é›†åˆè¦é«˜ä¸€ç‚¹ç‚¹ã€‚ä½†æ˜¯æ•°ç»„ä¹Ÿæœ‰ä¸€ä¸ªä¸¥é‡çš„ç¼ºé™·ï¼Œå°±æ˜¯éœ€è¦æŒ‡å®šåˆå§‹åŒ–å¤§å°ï¼Œå¹¶ä¸”åœ¨åç»­çš„æ“ä½œä¸­ä¸èƒ½ä¿®æ”¹æ•°ç»„çš„ç»“æ„ï¼Œè¿™å¾ˆä¸å‹å¥½ã€‚</p>\n<p>â€‹    ArrayListå¯ä»¥å¾ˆå¥½çš„è¿›è¡ŒåŠ¨æ€æ‰©å®¹ï¼Œå®ƒä¼šéšä¹‹å…ƒç´ çš„ä¸æ–­å¢åŠ è€Œè°ƒæ•´æ•°ç»„å¤§å°ã€‚å®ƒçš„åº•å±‚æ˜¯åŸºäºæ•°æ®å®ç°çš„ï¼Œæ‰€ä»¥ä¹Ÿé›†æˆäº†æ•°ç»„çš„ä¸€äº›ç‰¹æ€§ã€‚æ¯”å¦‚æŸ¥æ‰¾ã€ä¿®æ”¹å¾ˆå¿«ï¼Œä½†æ˜¯æ–°å¢å’Œåˆ é™¤æ¯”è¾ƒæ…¢ã€‚</p>\n<h3 id=\"Arrayæ•°ç»„\"><a href=\"#Arrayæ•°ç»„\" class=\"headerlink\" title=\"Arrayæ•°ç»„\"></a>Arrayæ•°ç»„</h3><blockquote>\n<p>ArrayListåº•å±‚æ˜¯ç”±æ•°ç»„å®ç°çš„ï¼Œé‚£ä¹ˆå°±å›é¡¾ä¸‹Javaä¸­æ•°ç»„çš„ç‰¹æ€§ã€‚</p>\n</blockquote>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Array1Test</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Test</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">test1</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        String[] arr = <span class=\"keyword\">new</span> String[<span class=\"number\">5</span>];</span><br><span class=\"line\">        System.out.println(<span class=\"string\">\"æ•°ç»„çš„é•¿åº¦\"</span> + arr.length);</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> i = <span class=\"number\">0</span> ; i &lt; arr.length ; i++) &#123;</span><br><span class=\"line\">            arr[i] = String.valueOf(i);</span><br><span class=\"line\">            System.out.print(<span class=\"string\">\" \"</span>);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        System.out.println(arr[<span class=\"number\">0</span>].toString());</span><br><span class=\"line\">        <span class=\"comment\">// æ‰“å°å‡º0 , æ•°ç»„çš„ä¸‹è¡¨æ˜¯ä»0å¼€å§‹çš„ã€‚</span></span><br><span class=\"line\">        arr[<span class=\"number\">6</span>] = <span class=\"keyword\">null</span>;</span><br><span class=\"line\">        <span class=\"comment\">// å¼ºè¡Œæ·»åŠ ä¸€ä¸ªå…ƒç´ åˆ°6çš„ä½ç½®,ç„¶åå–å‡ºæ¥æŠ›å‡ºArrayIndexOutOfBoundsExceptionã€‚æ•°ç»„çš„å¤§å°æ˜¯ä¸èƒ½ä¿®æ”¹çš„ã€‚</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>è¾“å‡ºï¼š</p>\n<figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><span class=\"line\">æ•°ç»„çš„é•¿åº¦5</span><br><span class=\"line\">\t0</span><br><span class=\"line\">java.lang.ArrayIndexOutOfBoundsException: 6</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"Liståˆ—è¡¨\"><a href=\"#Liståˆ—è¡¨\" class=\"headerlink\" title=\"Liståˆ—è¡¨\"></a>Liståˆ—è¡¨</h3><p>Javaçš„Listæ˜¯ä¸€ä¸ªæœ‰åºçš„é›†åˆï¼ŒListæ˜¯Collectionæ¥å£çš„æ‰©å±•æ¥å£ã€‚</p>\n<h3 id=\"Listç‰¹æ€§\"><a href=\"#Listç‰¹æ€§\" class=\"headerlink\" title=\"Listç‰¹æ€§\"></a>Listç‰¹æ€§</h3><ul>\n<li>Java Listæ¥å£æ˜¯Java Collection Frameworkçš„æˆå‘˜ã€‚</li>\n<li>åˆ—è¡¨å…è®¸æ·»åŠ é‡å¤çš„å…ƒç´ ã€‚</li>\n<li>åˆ—è¡¨å…è®¸æœ‰nullå…ƒç´ ã€‚</li>\n<li>åˆ—è¡¨ç´¢å¼•æ˜¯ä»0å¼€å§‹ï¼Œå’Œæ•°ç»„ä¸€æ ·çš„ã€‚</li>\n<li>åˆ—è¡¨æ¥å—æ³›å‹ï¼Œå°½é‡ä½¿ç”¨å®ƒã€‚ä»¥å…å‡ºç°<code>ClassCastException</code></li>\n</ul>\n<h2 id=\"æºç åˆ†æ\"><a href=\"#æºç åˆ†æ\" class=\"headerlink\" title=\"æºç åˆ†æ\"></a>æºç åˆ†æ</h2><p>ArrayListä¸­çš„å¸¸é‡ä»¥åŠå˜é‡</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// é»˜è®¤åˆå§‹åŒ–å®¹å™¨çš„å¤§å°</span></span><br><span class=\"line\"><span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> <span class=\"keyword\">int</span> DEFAULT_CAPACITY = <span class=\"number\">10</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// ç©ºçš„å¯¹è±¡æ•°ç»„ã€‚</span></span><br><span class=\"line\"><span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> Object[] EMPTY_ELEMENTDATA = &#123;&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// é»˜è®¤çš„å¯¹è±¡æ•°ç»„ã€‚</span></span><br><span class=\"line\"><span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> Object[] DEFAULTCAPACITY_EMPTY_ELEMENTDATA = &#123;&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// è¢«transientä¿®é¥°ä¸ä¼šè¢«åºåˆ—åŒ–ï¼Œé›†åˆä¸­å…ƒç´ ä¸ªæ•°ã€‚</span></span><br><span class=\"line\"><span class=\"keyword\">transient</span> Object[] elementData; <span class=\"comment\">// non-private to simplify nested class access</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// å®¹å™¨ä¸­å…ƒç´ çš„ä¸ªæ•°</span></span><br><span class=\"line\"><span class=\"keyword\">private</span> <span class=\"keyword\">int</span> size;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// å®¹å™¨çš„æœ€å¤§å®¹é‡</span></span><br><span class=\"line\"><span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> <span class=\"keyword\">int</span> MAX_ARRAY_SIZE = Integer.MAX_VALUE - <span class=\"number\">8</span>;</span><br></pre></td></tr></table></figure>\n<h3 id=\"åˆ›å»ºArrayListçš„å®ä¾‹ã€‚\"><a href=\"#åˆ›å»ºArrayListçš„å®ä¾‹ã€‚\" class=\"headerlink\" title=\"åˆ›å»ºArrayListçš„å®ä¾‹ã€‚\"></a>åˆ›å»ºArrayListçš„å®ä¾‹ã€‚</h3><figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">test3</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">    List list1 = <span class=\"keyword\">new</span> ArrayList();</span><br><span class=\"line\">    List list2 = <span class=\"keyword\">new</span> ArrayList(<span class=\"number\">3</span>);</span><br><span class=\"line\">    String[] vowels = &#123;<span class=\"string\">\"a\"</span>,<span class=\"string\">\"e\"</span>,<span class=\"string\">\"i\"</span>,<span class=\"string\">\"o\"</span>,<span class=\"string\">\"u\"</span>&#125;;</span><br><span class=\"line\">    <span class=\"comment\">// ä½¿ç”¨Arrayså·¥å…·å°†æ•°ç»„è½¬æ¢æˆåˆ—è¡¨ã€‚</span></span><br><span class=\"line\">    List&lt;String&gt; vowelsList = Arrays.asList(vowels);</span><br><span class=\"line\">    List list3 = <span class=\"keyword\">new</span> ArrayList(vowelsList);</span><br><span class=\"line\">\t</span><br><span class=\"line\">    System.out.println(list1.toString());</span><br><span class=\"line\">    System.out.println(list2.toString());</span><br><span class=\"line\">    System.out.println(list3.toString());</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\">[]</span><br><span class=\"line\">[]</span><br><span class=\"line\">[a, e, i, o, u]</span><br></pre></td></tr></table></figure>\n\n<p>è¿™åˆ†åˆ«ä½¿ç”¨äº†ArrayListä¸‰ä¸ªæ„é€ æ–¹æ³•ã€‚</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// list1</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">ArrayList</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">// å‚æ•°ä¸ºç©ºçš„æ„é€ æ–¹æ³•ï¼Œå…ƒç´ æ˜¯ç©ºçš„æ•°ç»„ã€‚</span></span><br><span class=\"line\">    <span class=\"keyword\">this</span>.elementData = DEFAULTCAPACITY_EMPTY_ELEMENTDATA;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"> <span class=\"comment\">// list2</span></span><br><span class=\"line\"> <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">ArrayList</span><span class=\"params\">(<span class=\"keyword\">int</span> initialCapacity)</span> </span>&#123;</span><br><span class=\"line\">     <span class=\"comment\">// æŒ‡å®šå®¹å™¨çš„åˆå§‹åŒ–å¤§å°ã€‚</span></span><br><span class=\"line\">     <span class=\"keyword\">if</span> (initialCapacity &gt; <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">         <span class=\"keyword\">this</span>.elementData = <span class=\"keyword\">new</span> Object[initialCapacity];</span><br><span class=\"line\">     &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (initialCapacity == <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">         <span class=\"keyword\">this</span>.elementData = EMPTY_ELEMENTDATA;</span><br><span class=\"line\">     &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">         <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> IllegalArgumentException(<span class=\"string\">\"Illegal Capacity: \"</span>+</span><br><span class=\"line\">                                            initialCapacity);</span><br><span class=\"line\">     &#125;</span><br><span class=\"line\"> &#125;</span><br><span class=\"line\">    </span><br><span class=\"line\"> <span class=\"comment\">// å¯¹åº”list3</span></span><br><span class=\"line\"> <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">ArrayList</span><span class=\"params\">(Collection&lt;? extends E&gt; c)</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">// å°†ä¸€ä¸ªCollectionå®¹å™¨çš„å…ƒç´ éƒ½å¤åˆ¶è¿›æ¥ã€‚</span></span><br><span class=\"line\">    elementData = c.toArray();</span><br><span class=\"line\">    <span class=\"keyword\">if</span> ((size = elementData.length) != <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">        <span class=\"comment\">// c.toArray might (incorrectly) not return Object[] (see 6260652)</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (elementData.getClass() != Object[]<span class=\"class\">.<span class=\"keyword\">class</span>)</span></span><br><span class=\"line\"><span class=\"class\">            <span class=\"title\">elementData</span> </span>= Arrays.copyOf(elementData, size, Object[]<span class=\"class\">.<span class=\"keyword\">class</span>)</span>;</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">        <span class=\"comment\">// replace with empty array.</span></span><br><span class=\"line\">        <span class=\"keyword\">this</span>.elementData = EMPTY_ELEMENTDATA;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"> &#125;</span><br></pre></td></tr></table></figure>\n\n<p>è¿™è®©æˆ‘æƒ³èµ·äº†é¢è¯•é¢˜ç›®ã€‚</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">test4</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">    List list = <span class=\"keyword\">new</span> ArrayList(<span class=\"number\">20</span>);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>é¢˜ç›®æ˜¯ï¼šç”Ÿæˆlistå®ä¾‹éœ€è¦æ‰©å®¹å‡ æ¬¡ã€‚å®é™…ä¸Šæ˜¯0æ¬¡ã€‚å› ä¸ºåˆ›å»ºçš„æ—¶å€™å°±æŒ‡å®šäº†å¤§å°ã€‚</p>\n<h3 id=\"addæ–¹æ³•\"><a href=\"#addæ–¹æ³•\" class=\"headerlink\" title=\"addæ–¹æ³•\"></a>addæ–¹æ³•</h3><figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">test4</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">    List list = <span class=\"keyword\">new</span> ArrayList();</span><br><span class=\"line\">    System.out.println(list.add(<span class=\"number\">1</span>));</span><br><span class=\"line\">    list.add(<span class=\"number\">0</span>,<span class=\"number\">2</span>);</span><br><span class=\"line\">    System.out.println(list.toString());</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>è¾“å‡º</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">true</span></span><br><span class=\"line\">[<span class=\"number\">2</span>, <span class=\"number\">1</span>] <span class=\"comment\">// æ˜¯ä¸æ˜¯å¾ˆç¥å¥‡ï¼Œä¸‹æ ‡0çš„ä½ç½®æ˜¯2ï¼Œä¸‹æ ‡1ä½ç½®å€¼æ˜¯1ã€‚</span></span><br></pre></td></tr></table></figure>\n\n<p>å¸¦ç€ä¸Šé¢çš„ç–‘é—®æˆ‘ä»¬å¥½å¥½çœ‹çœ‹ï¼Œé¡ºä¾¿çœ‹çœ‹ç»å¸¸è¯´ArrayListåˆ°åº•æ˜¯å¦‚ä½•æ‰©å®¹çš„ã€‚</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ç›´æ¥æ·»åŠ å…ƒç´ </span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">boolean</span> <span class=\"title\">add</span><span class=\"params\">(E e)</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">// ç¡®ä¿å†…éƒ¨å®¹é‡è¶³å¤Ÿï¼Œä¸å¤Ÿå°±æ‰©å®¹ã€‚ size æ˜¯å½“å‰å®¹å™¨çš„æ•°é‡</span></span><br><span class=\"line\">    ensureCapacityInternal(size + <span class=\"number\">1</span>);  <span class=\"comment\">// Increments modCount!! </span></span><br><span class=\"line\">    <span class=\"comment\">// å°†å…ƒç´ æ·»åŠ åˆ°æ•°ç»„ä¸­</span></span><br><span class=\"line\">    elementData[size++] = e;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">true</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// åœ¨æŒ‡å®šç´¢å¼•çš„ä½ç½®æ·»åŠ å…ƒç´ ã€‚</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">add</span><span class=\"params\">(<span class=\"keyword\">int</span> index, E element)</span> </span>&#123;</span><br><span class=\"line\">    rangeCheckForAdd(index); <span class=\"comment\">//æ£€æŸ¥ç´¢å¼•ä½ç½®æ˜¯å¦è¶Šç•Œã€‚</span></span><br><span class=\"line\"></span><br><span class=\"line\">    ensureCapacityInternal(size + <span class=\"number\">1</span>);  <span class=\"comment\">// Increments modCount!!</span></span><br><span class=\"line\">    <span class=\"comment\">// çœŸç›¸å°±åœ¨è¿™é‡Œã€‚</span></span><br><span class=\"line\">    System.arraycopy(elementData, index, elementData, index + <span class=\"number\">1</span>,</span><br><span class=\"line\">                     size - index);</span><br><span class=\"line\">    elementData[index] = element;</span><br><span class=\"line\">    size++;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>System.arraycopy æ˜¯ä¸€ä¸ªæœ¬åœ°é™æ€æ–¹æ³•ï¼Œä½¿ç”¨å®ƒå¯ä»¥å¯¹æ•°ç»„ä¹‹é—´è¿›è¡Œå¤åˆ¶ã€‚</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">native</span> <span class=\"keyword\">void</span> <span class=\"title\">arraycopy</span><span class=\"params\">(Object src,  <span class=\"keyword\">int</span>  srcPos,</span></span></span><br><span class=\"line\"><span class=\"function\"><span class=\"params\">                                    Object dest, <span class=\"keyword\">int</span> destPos,</span></span></span><br><span class=\"line\"><span class=\"function\"><span class=\"params\">                                    <span class=\"keyword\">int</span> length)</span></span>;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>src:æºæ•°ç»„ï¼›    </li>\n<li>srcPos:æºæ•°ç»„è¦å¤åˆ¶çš„èµ·å§‹ä½ç½®ï¼›<br>   dest:ç›®çš„æ•°ç»„ï¼›<br>   destPos:ç›®çš„æ•°ç»„æ”¾ç½®çš„èµ·å§‹ä½ç½®ï¼›    </li>\n<li>length:å¤åˆ¶çš„é•¿åº¦ã€‚</li>\n</ul>\n<p>ä¸Šé¢çš„æ“ä½œç»“æœå°±æ˜¯å°†æ•°ç»„ä¸­çš„å…ƒç´ ä½ç½®è¿›è¡Œäº†ç§»åŠ¨ï¼Œå½“ç„¶ç¥å¥‡çš„åœ°æ–¹æ˜¯è¿™ä¸ªæ–¹æ³•å¯ä»¥è‡ªå·±å¤åˆ¶è‡ªå·±ã€‚</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 1</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title\">ensureCapacityInternal</span><span class=\"params\">(<span class=\"keyword\">int</span> minCapacity)</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">// å½“å‰å®é™…å­˜å‚¨çš„æ•°ç»„æ˜¯ç©ºçš„çš„æ—¶å€™</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (elementData == DEFAULTCAPACITY_EMPTY_ELEMENTDATA) &#123;</span><br><span class=\"line\">        <span class=\"comment\">// æœ€å°çš„æ•°å­— å°±æ˜¯å®¹é‡å¤§å°ã€‚</span></span><br><span class=\"line\">        minCapacity = Math.max(DEFAULT_CAPACITY, minCapacity);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    ensureExplicitCapacity(minCapacity);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 2</span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title\">ensureExplicitCapacity</span><span class=\"params\">(<span class=\"keyword\">int</span> minCapacity)</span> </span>&#123;</span><br><span class=\"line\">        modCount++;</span><br><span class=\"line\">\t\t<span class=\"comment\">// å¦‚æœå½“å‰æ•°ç»„çš„é•¿åº¦å°äº éœ€è¦çš„æœ€å°å®¹é‡å¤§å°å°±æ‰©å®¹ã€‚</span></span><br><span class=\"line\">        <span class=\"comment\">// overflow-conscious code</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (minCapacity - elementData.length &gt; <span class=\"number\">0</span>)</span><br><span class=\"line\">            grow(minCapacity);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 3</span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title\">grow</span><span class=\"params\">(<span class=\"keyword\">int</span> minCapacity)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"comment\">// å¢åŠ æœ€å°æ‰©å®¹ï¼Œä¿è¯å…ƒç´ èƒ½æ·»åŠ è¿›å®¹å™¨ã€‚</span></span><br><span class=\"line\">        <span class=\"comment\">// overflow-conscious code</span></span><br><span class=\"line\">        <span class=\"keyword\">int</span> oldCapacity = elementData.length;</span><br><span class=\"line\">        <span class=\"comment\">// ä½è¿ç®— ï¼Œ æ–°çš„å®¹é‡å¤§å° = å½“å‰æ•°ç»„é•¿åº¦ å³ç§»åŠ¨ä¸€ä½  å°±æ˜¯ newCapacity = oldCapacity + (oldCapacity / 2) å–æ•´ã€‚ä¹Ÿå°±æ˜¯ç»å¸¸è¯´çš„æ‰©å®¹1.5å€ã€‚</span></span><br><span class=\"line\">        <span class=\"keyword\">int</span> newCapacity = oldCapacity + (oldCapacity &gt;&gt; <span class=\"number\">1</span>);</span><br><span class=\"line\">        </span><br><span class=\"line\">        <span class=\"keyword\">if</span> (newCapacity - minCapacity &lt; <span class=\"number\">0</span>)</span><br><span class=\"line\">            newCapacity = minCapacity;</span><br><span class=\"line\">    \t<span class=\"comment\">// å¦‚æœæ–°çš„å®¹å™¨å¤§å° æ¯” å®¹å™¨æœ€å¤§å€¼è¿˜å¤§</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (newCapacity - MAX_ARRAY_SIZE &gt; <span class=\"number\">0</span>)</span><br><span class=\"line\">            newCapacity = hugeCapacity(minCapacity);</span><br><span class=\"line\">        <span class=\"comment\">// minCapacity is usually close to size, so this is a win:</span></span><br><span class=\"line\">        <span class=\"comment\">// å…³é”®çš„æ—¶å€™æ¥äº†ï¼Œé€šè¿‡Arrays.copyOfå¤åˆ¶å…ƒç´ å¹¶æŒ‡å®šæ–°çš„æ•°ç»„å¤§å°ã€‚è¿™ä¸ªæ–¹æ³•æœ€ç»ˆè¿˜æ˜¯è°ƒç”¨äº†System.arraycopyæ–¹æ³•ï¼Œå…¶å®ƒå‚æ•°æ˜¯ç”±Array.copyOfé¢„è®¾å¥½çš„ã€‚</span></span><br><span class=\"line\">        elementData = Arrays.copyOf(elementData, newCapacity);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"><span class=\"comment\">// 4 æŠ›å‡ºOutOfMemoryErrorå¼‚å¸¸å’¯ã€‚å†…å­˜æº¢å‡º</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">int</span> <span class=\"title\">hugeCapacity</span><span class=\"params\">(<span class=\"keyword\">int</span> minCapacity)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (minCapacity &lt; <span class=\"number\">0</span>) <span class=\"comment\">// overflow</span></span><br><span class=\"line\">            <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> OutOfMemoryError();</span><br><span class=\"line\">        <span class=\"keyword\">return</span> (minCapacity &gt; MAX_ARRAY_SIZE) ?</span><br><span class=\"line\">            Integer.MAX_VALUE :</span><br><span class=\"line\">            MAX_ARRAY_SIZE;</span><br><span class=\"line\">    &#125;</span><br></pre></td></tr></table></figure>\n\n<p>æ¯æ¬¡æ‰©å®¹éƒ½æ˜¯é€šè¿‡Arrays.copyOf(elementData, newCapacity)çš„æ¥å®ç°çš„ã€‚</p>\n<h3 id=\"setæ–¹æ³•\"><a href=\"#setæ–¹æ³•\" class=\"headerlink\" title=\"setæ–¹æ³•\"></a>setæ–¹æ³•</h3><p>è¿™ä¸ªæ–¹æ³•å…¶å®å°±æ˜¯æ›´æ–°æ–¹æ³•ã€‚</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">test5</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">    List list = <span class=\"keyword\">new</span> ArrayList();</span><br><span class=\"line\">    list.add(<span class=\"number\">1</span>);</span><br><span class=\"line\">    System.out.println(list.set(<span class=\"number\">0</span>,<span class=\"number\">1</span>));</span><br><span class=\"line\">    System.out.println(list.toString());</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>è¾“å‡º</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"number\">1</span></span><br><span class=\"line\">[<span class=\"number\">1</span>]</span><br></pre></td></tr></table></figure>\n\n<p>çœ‹ä¸‹æºä»£ç ã€‚</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> E <span class=\"title\">set</span><span class=\"params\">(<span class=\"keyword\">int</span> index, E element)</span> </span>&#123;</span><br><span class=\"line\">    rangeCheck(index); <span class=\"comment\">//æ£€æŸ¥æ‰€ä»¥æ˜¯å¦è¶Šç•Œï¼Œè¿™é‡Œè¦æ³¨æ„ï¼Œè¯¥ä¸‹æ ‡æ²¡æœ‰å€¼ä¼šæŠ›å‡ºè¶Šç•Œå¼‚å¸¸ã€‚</span></span><br><span class=\"line\"></span><br><span class=\"line\">    E oldValue = elementData(index); <span class=\"comment\">// è·å–ä¸‹æ ‡åŸå§‹çš„å€¼</span></span><br><span class=\"line\">    elementData[index] = element;\t <span class=\"comment\">// å°†æ–°å€¼å¤åˆ¶ç»™å¯¹åº”çš„ä¸‹æ ‡</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> oldValue;\t\t\t\t<span class=\"comment\">// è¿”å›åŸå§‹çš„å€¼</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"removeæ–¹æ³•\"><a href=\"#removeæ–¹æ³•\" class=\"headerlink\" title=\"removeæ–¹æ³•\"></a>removeæ–¹æ³•</h3><figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">test6</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">    List list = <span class=\"keyword\">new</span> ArrayList();</span><br><span class=\"line\">    list.add(<span class=\"string\">\"a\"</span>);</span><br><span class=\"line\">    list.add(<span class=\"string\">\"b\"</span>);</span><br><span class=\"line\">    list.add(<span class=\"string\">\"b\"</span>);</span><br><span class=\"line\">    list.add(<span class=\"string\">\"c\"</span>);</span><br><span class=\"line\">    list.add(<span class=\"string\">\"d\"</span>);</span><br><span class=\"line\">    System.out.println(list.toString());</span><br><span class=\"line\">    list.remove(<span class=\"string\">\"b\"</span>); <span class=\"comment\">//æ ¹æ®å…ƒç´ åŒ¹é…åˆ é™¤</span></span><br><span class=\"line\">    System.out.println(list.toString());</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>è¾“å‡º</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\">[a, b, b, c, d]</span><br><span class=\"line\">[a, b, c, d] <span class=\"comment\">//ä¼šåˆ é™¤åŒ¹é…åˆ°çš„ç¬¬ä¸€ä¸ªå…ƒç´ </span></span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// æ ¹æ®ä¸‹æ ‡åˆ é™¤å…ƒç´ ã€‚åˆ é™¤æˆåŠŸå°±è¿”å›è¢«åˆ é™¤çš„å…ƒç´ ã€‚</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> E <span class=\"title\">remove</span><span class=\"params\">(<span class=\"keyword\">int</span> index)</span> </span>&#123;</span><br><span class=\"line\">    rangeCheck(index); <span class=\"comment\">// æ£€æŸ¥ä¸‹æ ‡æ˜¯å¦è¶Šç•Œ</span></span><br><span class=\"line\"></span><br><span class=\"line\">    modCount++;</span><br><span class=\"line\">    E oldValue = elementData(index);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">int</span> numMoved = size - index - <span class=\"number\">1</span>;</span><br><span class=\"line\">    <span class=\"comment\">// æ ¹æ®ç´¢å¼•åˆ é™¤ç›¸æ¯”å¯¹è±¡åˆ é™¤åªéœ€è¦å¤åˆ¶ä¸€ä»½è‡ªå·±çš„éƒ¨åˆ†å…ƒç´ ã€‚</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (numMoved &gt; <span class=\"number\">0</span>)</span><br><span class=\"line\">        System.arraycopy(elementData, index+<span class=\"number\">1</span>, elementData, index,</span><br><span class=\"line\">                         numMoved);</span><br><span class=\"line\">    elementData[--size] = <span class=\"keyword\">null</span>; <span class=\"comment\">// clear to let GC do its work</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">return</span> oldValue;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// åˆ é™¤å…ƒç´ ï¼Œå¦‚æœåˆ é™¤æˆåŠŸè¿”å›true</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">boolean</span> <span class=\"title\">remove</span><span class=\"params\">(Object o)</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">// è¿™é‡Œçœ‹åˆ°ä¸ç®¡å¾…åˆ é™¤çš„å€¼æ˜¯å•¥ï¼Œéƒ½ä¼šä»å¤´éå†åˆ°å°¾éƒ¨ã€‚ç›´åˆ°æ‰¾åˆ°åˆé€‚å€¼åœ¨åˆ é™¤ã€‚æ‰€ä»¥åˆ é™¤è¿™ä¸ªåŠ¨ä½œéå¸¸å¤§ã€‚</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (o == <span class=\"keyword\">null</span>) &#123; </span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> index = <span class=\"number\">0</span>; index &lt; size; index++)</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (elementData[index] == <span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">                fastRemove(index);</span><br><span class=\"line\">                <span class=\"keyword\">return</span> <span class=\"keyword\">true</span>;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> index = <span class=\"number\">0</span>; index &lt; size; index++)</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (o.equals(elementData[index])) &#123;</span><br><span class=\"line\">                fastRemove(index);</span><br><span class=\"line\">                <span class=\"keyword\">return</span> <span class=\"keyword\">true</span>;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">false</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// åˆ é™¤ç´¢å¼•ä¸Šçš„å…ƒç´ </span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title\">fastRemove</span><span class=\"params\">(<span class=\"keyword\">int</span> index)</span> </span>&#123;</span><br><span class=\"line\">    modCount++;</span><br><span class=\"line\">    <span class=\"keyword\">int</span> numMoved = size - index - <span class=\"number\">1</span>;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (numMoved &gt; <span class=\"number\">0</span>)</span><br><span class=\"line\">        System.arraycopy(elementData, index+<span class=\"number\">1</span>, elementData, index,</span><br><span class=\"line\">                         numMoved);</span><br><span class=\"line\">    elementData[--size] = <span class=\"keyword\">null</span>; <span class=\"comment\">// clear to let GC do its work</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>è¿™ä¸¤ä¸ªåˆ é™¤æ–¹æ³•å¯ä»¥çœ‹å‡ºï¼ŒåŠ¨ä½œéƒ½æ¯”è¾ƒå¤§ã€‚è¿™ç§æ“ä½œä¼šæ…¢å¾ˆå¤šã€‚</p>\n<h3 id=\"getæ–¹æ³•ã€‚\"><a href=\"#getæ–¹æ³•ã€‚\" class=\"headerlink\" title=\"getæ–¹æ³•ã€‚\"></a>getæ–¹æ³•ã€‚</h3><p>ç›¸æ¯”ä¸Šé¢3ç§æ–¹æ³•ç¡®å®è½»é‡çº§å¤ªå¤šäº†ã€‚</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> E <span class=\"title\">get</span><span class=\"params\">(<span class=\"keyword\">int</span> index)</span> </span>&#123;</span><br><span class=\"line\">    rangeCheck(index);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">return</span> elementData(index);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>å¹³æ—¶ä¹Ÿå°±å¬å¤§å®¶è¯´æ–°å¢ä¿®æ”¹åˆ é™¤æ…¢ï¼Œä¹Ÿå°±è®¿é—®é€Ÿåº¦æ¯”è¾ƒå¿«ã€‚çœ‹äº†æºç ä¹‹åæ‰æ¸…æ™°å¾ˆå¤šã€‚</p>\n<h3 id=\"containsæ–¹æ³•\"><a href=\"#containsæ–¹æ³•\" class=\"headerlink\" title=\"containsæ–¹æ³•\"></a>containsæ–¹æ³•</h3><p>è¿™ä¹Ÿæ˜¯ä¸€ä¸ªé‡é‡çº§çš„æ–¹æ³•</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// åˆ¤æ–­å¯¹è±¡å­˜åœ¨ä¸å½“å‰é›†åˆä¸­ã€‚</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">boolean</span> <span class=\"title\">contains</span><span class=\"params\">(Object o)</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> indexOf(o) &gt;= <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * Returns the index of the first occurrence of the specified element</span></span><br><span class=\"line\"><span class=\"comment\"> * in this list, or -1 if this list does not contain the element.</span></span><br><span class=\"line\"><span class=\"comment\"> * More formally, returns the lowest index &lt;tt&gt;i&lt;/tt&gt; such that</span></span><br><span class=\"line\"><span class=\"comment\"> * &lt;tt&gt;(o==null&amp;nbsp;?&amp;nbsp;get(i)==null&amp;nbsp;:&amp;nbsp;o.equals(get(i)))&lt;/tt&gt;,</span></span><br><span class=\"line\"><span class=\"comment\"> * or -1 if there is no such index.</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">int</span> <span class=\"title\">indexOf</span><span class=\"params\">(Object o)</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">// å½“æ‰¾ä¸åˆ°è¯¥å¯¹è±¡çš„æ—¶å€™è¿”å›-1ï¼Œæ‰¾åˆ°äº†å°±è¿”å›å®ƒçš„ä¸‹æ ‡ã€‚</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (o == <span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>; i &lt; size; i++)</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (elementData[i]==<span class=\"keyword\">null</span>)</span><br><span class=\"line\">                <span class=\"keyword\">return</span> i;</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>; i &lt; size; i++)</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (o.equals(elementData[i]))</span><br><span class=\"line\">                <span class=\"keyword\">return</span> i;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> -<span class=\"number\">1</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"å®‰å…¨åˆ é™¤\"><a href=\"#å®‰å…¨åˆ é™¤\" class=\"headerlink\" title=\"å®‰å…¨åˆ é™¤\"></a>å®‰å…¨åˆ é™¤</h2><figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">test2</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">        <span class=\"comment\">//  1ã€åˆ›å»ºä¸€ä¸ªäºŒç»´æ•°ç»„</span></span><br><span class=\"line\">        String[] vowels = &#123;<span class=\"string\">\"a\"</span>,<span class=\"string\">\"e\"</span>,<span class=\"string\">\"i\"</span>,<span class=\"string\">\"o\"</span>,<span class=\"string\">\"u\"</span>&#125;;</span><br><span class=\"line\">        <span class=\"comment\">//  2ã€å°†äºŒç»´æ•°ç»„è½¬æ¢æˆåˆ—è¡¨,åœ¨è½¬æ¢æˆå®¹å™¨</span></span><br><span class=\"line\">        Collection&lt;String&gt; collection = <span class=\"keyword\">new</span> ArrayList(Arrays.asList(vowels));</span><br><span class=\"line\">        <span class=\"comment\">// 3ã€è·å–å®¹å™¨è¿­ä»£å™¨å®ä¾‹</span></span><br><span class=\"line\">        Iterator&lt;String&gt; itr = collection.iterator();</span><br><span class=\"line\">        <span class=\"comment\">// 4ã€é€»è¾‘åˆ¤æ–­itr ä¸­ä¸‹ä¸ªå…ƒç´ æ˜¯å¦å­˜åœ¨ã€‚</span></span><br><span class=\"line\">        <span class=\"keyword\">while</span> (itr.hasNext())&#123;</span><br><span class=\"line\">            String <span class=\"keyword\">var</span> = itr.next(); <span class=\"comment\">// è·å–å°†è¦è®¿é—®çš„ä¸‹ä¸€ä¸ªå…ƒç´ ã€‚</span></span><br><span class=\"line\">            <span class=\"comment\">// 5ã€å°è¯•ä¿®æ”¹å…¶ä¸­çš„ä¸€ä¸ªå…ƒç´ ã€‚</span></span><br><span class=\"line\">            <span class=\"keyword\">if</span>(<span class=\"keyword\">var</span> == <span class=\"string\">\"a\"</span>)&#123;</span><br><span class=\"line\">                <span class=\"comment\">// 5ã€åˆ é™¤æ‰ `a`</span></span><br><span class=\"line\">                itr.remove();</span><br><span class=\"line\">            &#125;<span class=\"keyword\">else</span>&#123;</span><br><span class=\"line\">                System.out.print(<span class=\"keyword\">var</span>);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"çº¿ç¨‹å®‰å…¨\"><a href=\"#çº¿ç¨‹å®‰å…¨\" class=\"headerlink\" title=\"çº¿ç¨‹å®‰å…¨\"></a>çº¿ç¨‹å®‰å…¨</h2><blockquote>\n<p>ç”±äºæ‰€æœ‰çš„æ–¹æ³•éƒ½æ²¡æœ‰è¿›è¡ŒåŒæ­¥ã€‚æ‰€ä»¥å¾ˆç›´è§‚çš„è®¤ä¸ºæœ‰çº¿ç¨‹å®‰å…¨çš„é—®é¢˜ï¼Œè¿˜æ˜¯äº²è‡ªæµ‹è¯•ä¸‹é¿å…è¿·è¿·ç³Šç³Šçš„ã€‚</p>\n</blockquote>\n<h3 id=\"åœºæ™¯ä¸€ï¼šå¤šçº¿ç¨‹å¯¹ä¸€ä¸ªArrayListè¿›è¡Œæ“ä½œã€‚\"><a href=\"#åœºæ™¯ä¸€ï¼šå¤šçº¿ç¨‹å¯¹ä¸€ä¸ªArrayListè¿›è¡Œæ“ä½œã€‚\" class=\"headerlink\" title=\"åœºæ™¯ä¸€ï¼šå¤šçº¿ç¨‹å¯¹ä¸€ä¸ªArrayListè¿›è¡Œæ“ä½œã€‚\"></a>åœºæ™¯ä¸€ï¼šå¤šçº¿ç¨‹å¯¹ä¸€ä¸ªArrayListè¿›è¡Œæ“ä½œã€‚</h3><blockquote>\n<p>å‡è®¾æˆ‘ä»¬éœ€è¦æ·»åŠ 10000ä¸ªå…ƒç´ è¿›ArrayList</p>\n</blockquote>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ArrayListTest2</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * 10çº¿ç¨‹å¯¹ä¸€ä¸ªArrayListè¿›è¡Œæ“ä½œã€‚</span></span><br><span class=\"line\"><span class=\"comment\">     *</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> args</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String[] args)</span> <span class=\"keyword\">throws</span> InterruptedException </span>&#123;</span><br><span class=\"line\">        List list = <span class=\"keyword\">new</span> ArrayList();</span><br><span class=\"line\">        ExecutorService executorService = Executors.newFixedThreadPool(<span class=\"number\">20</span>);</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> sum = <span class=\"number\">0</span> ; sum &lt; <span class=\"number\">10</span> ; sum ++)&#123;</span><br><span class=\"line\">            executorService.execute(<span class=\"keyword\">new</span> Runnable() &#123;</span><br><span class=\"line\">                <span class=\"meta\">@Override</span></span><br><span class=\"line\">                <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">run</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">                    System.out.println(<span class=\"string\">\"ThreadId:\"</span> + Thread.currentThread().getId() + <span class=\"string\">\" start!\"</span>);</span><br><span class=\"line\">                    <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> i = <span class=\"number\">0</span> ; i &lt; <span class=\"number\">1000</span> ; i++ )&#123;</span><br><span class=\"line\">                        list.add(i);</span><br><span class=\"line\">                    &#125;</span><br><span class=\"line\">                    System.out.println(<span class=\"string\">\"ThreadId:\"</span> + Thread.currentThread().getId() + <span class=\"string\">\" stop!\"</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        executorService.shutdown();</span><br><span class=\"line\">        <span class=\"keyword\">while</span> (!executorService.isTerminated())&#123;</span><br><span class=\"line\">            <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">                Thread.sleep(<span class=\"number\">1000</span>*<span class=\"number\">5</span>);  <span class=\"comment\">// è¿™é‡Œç¡çœ ä¸‹ä¸»çº¿ç¨‹ï¼Œä¸ç„¶å…¶å®ƒçº¿ç¨‹è¿˜æ²¡æ‰§è¡Œå®Œå°±è¢«å…³é—­äº†ã€‚</span></span><br><span class=\"line\">            &#125;<span class=\"keyword\">catch</span> (InterruptedException e)&#123;</span><br><span class=\"line\">                e.printStackTrace();</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">\"é•¿åº¦\"</span> + list.size());</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>è¾“å‡º</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">ThreadId:12 start!</span><br><span class=\"line\">ThreadId:11 start!</span><br><span class=\"line\">ThreadId:12 stop!</span><br><span class=\"line\">ThreadId:11 stop!</span><br><span class=\"line\">ThreadId:14 start!</span><br><span class=\"line\">ThreadId:14 stop!</span><br><span class=\"line\">ThreadId:15 start!</span><br><span class=\"line\">ThreadId:15 stop!</span><br><span class=\"line\">ThreadId:13 start!</span><br><span class=\"line\">ThreadId:16 start!</span><br><span class=\"line\">ThreadId:16 stop!</span><br><span class=\"line\">ThreadId:17 start!</span><br><span class=\"line\">ThreadId:17 stop!</span><br><span class=\"line\">ThreadId:13 stop!</span><br><span class=\"line\">ThreadId:18 start!</span><br><span class=\"line\">ThreadId:18 stop!</span><br><span class=\"line\">ThreadId:19 start!</span><br><span class=\"line\">ThreadId:19 stop!</span><br><span class=\"line\">ThreadId:20 start!</span><br><span class=\"line\">ThreadId:20 stop!</span><br><span class=\"line\">é•¿åº¦9950</span><br></pre></td></tr></table></figure>\n\n<p>æ¯æ¬¡çš„è¾“å‡ºç»“æ„éƒ½ä¸åŒï¼Œå¶å°”è¿˜ä¼šæŠ›å‡ºè¶Šç•Œå¼‚å¸¸ã€‚</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ç›´æ¥æ·»åŠ å…ƒç´ </span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">boolean</span> <span class=\"title\">add</span><span class=\"params\">(E e)</span> </span>&#123;</span><br><span class=\"line\">    ensureCapacityInternal(size + <span class=\"number\">1</span>);  <span class=\"comment\">// Increments modCount!! </span></span><br><span class=\"line\">    elementData[size++] = e;   <span class=\"comment\">//åº”è¯¥å°±æ˜¯åœ¨è¿™é‡Œï¼Œåœ¨å¤šçº¿ç¨‹çš„æƒ…å†µä¸‹å¾ˆæœ‰å¯èƒ½å‡ºç°é‡å¤æ·»åŠ äº†å…ƒç´ ã€‚</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">true</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"Fail-Faståœºæ™¯\"><a href=\"#Fail-Faståœºæ™¯\" class=\"headerlink\" title=\"Fail-Faståœºæ™¯\"></a>Fail-Faståœºæ™¯</h3><p>fail-fast æœºåˆ¶åœ¨éå†ä¸€ä¸ªé›†åˆæ—¶ï¼Œå½“é›†åˆç»“æ„è¢«ä¿®æ”¹ï¼Œä¼šæŠ›å‡º Concurrent Modification Exceptionã€‚</p>\n<p>fail-fast ä¼šåœ¨ä»¥ä¸‹ä¸¤ç§æƒ…å†µä¸‹æŠ›å‡º Concurrent Modification Exception</p>\n<p>ï¼ˆ1ï¼‰å•çº¿ç¨‹ç¯å¢ƒ</p>\n<ul>\n<li>é›†åˆè¢«åˆ›å»ºåï¼Œåœ¨éå†å®ƒçš„è¿‡ç¨‹ä¸­ä¿®æ”¹äº†ç»“æ„ã€‚</li>\n<li>æ³¨æ„ remove() æ–¹æ³•ä¼šè®© expectModcount å’Œ modcount ç›¸ç­‰ï¼Œæ‰€ä»¥æ˜¯ä¸ä¼šæŠ›å‡ºè¿™ä¸ªå¼‚å¸¸ã€‚</li>\n</ul>\n<p>ï¼ˆ2ï¼‰å¤šçº¿ç¨‹ç¯å¢ƒ</p>\n<ul>\n<li>å½“ä¸€ä¸ªçº¿ç¨‹åœ¨éå†è¿™ä¸ªé›†åˆï¼Œè€Œå¦ä¸€ä¸ªçº¿ç¨‹å¯¹è¿™ä¸ªé›†åˆçš„ç»“æ„è¿›è¡Œäº†ä¿®æ”¹ã€‚</li>\n</ul>\n<p>modCount ç”¨æ¥è®°å½• ArrayList ç»“æ„å‘ç”Ÿå˜åŒ–çš„æ¬¡æ•°ã€‚ç»“æ„å‘ç”Ÿå˜åŒ–æ˜¯æŒ‡<strong>æ·»åŠ </strong>æˆ–è€…<strong>åˆ é™¤</strong>è‡³å°‘ä¸€ä¸ªå…ƒç´ çš„æ‰€æœ‰æ“ä½œï¼Œæˆ–è€…æ˜¯è°ƒæ•´å†…éƒ¨æ•°ç»„çš„å¤§å°ï¼Œä»…ä»…åªæ˜¯è®¾ç½®å…ƒç´ çš„å€¼ä¸ç®—ç»“æ„å‘ç”Ÿå˜åŒ–ã€‚</p>\n<p>åœ¨è¿›è¡Œåºåˆ—åŒ–æˆ–è€…è¿­ä»£ç­‰æ“ä½œæ—¶ï¼Œéœ€è¦æ¯”è¾ƒæ“ä½œå‰å modCount æ˜¯å¦æ”¹å˜ï¼Œå¦‚æœæ”¹å˜äº†éœ€è¦æŠ›å‡º Concurrent Modification Exceptionã€‚</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title\">writeObject</span><span class=\"params\">(java.io.ObjectOutputStream s)</span> <span class=\"keyword\">throws</span> java.io.IOException</span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">// Write out element count, and any hidden stuff</span></span><br><span class=\"line\">    <span class=\"keyword\">int</span> expectedModCount = modCount;</span><br><span class=\"line\">    s.defaultWriteObject();</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// Write out size as capacity for behavioural compatibility with clone()</span></span><br><span class=\"line\">    s.writeInt(size);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// Write out all elements in the proper order.</span></span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> i=<span class=\"number\">0</span>; i&lt;size; i++) &#123;</span><br><span class=\"line\">        s.writeObject(elementData[i]);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (modCount != expectedModCount) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> ConcurrentModificationException();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n","categories":["æºç åˆ†æ"],"tags":["Java","Java-Collecions-Framework","ArrayList"]},{"title":"å®è·µ-annotation-aop","url":"/posts/2777111489/","content":"<blockquote>\n<p>æ•´ç†ä¸€ä¸‹ä»¥å‰çš„å­¦ä¹ ä»£ç ã€‚</p>\n</blockquote>\n<h3 id=\"Spring-Aop\"><a href=\"#Spring-Aop\" class=\"headerlink\" title=\"Spring Aop\"></a>Spring Aop</h3><figure class=\"highlight xml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">properties</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">junit.version</span>&gt;</span>4.12<span class=\"tag\">&lt;/<span class=\"name\">junit.version</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">lmbok.version</span>&gt;</span>1.18.4<span class=\"tag\">&lt;/<span class=\"name\">lmbok.version</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">logback.version</span>&gt;</span>1.2.3<span class=\"tag\">&lt;/<span class=\"name\">logback.version</span>&gt;</span></span><br><span class=\"line\">        <span class=\"comment\">&lt;!-- pomæ–‡ä»¶éœ€è¦æŒ‡å®šæ‰“åŒ…ç¼–ç é›†ï¼Œ[WARNING] File encoding has not been set, using platform encoding GBK, i.e. build is platform dependent!  --&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">project.build.sourceEncoding</span>&gt;</span>UTF-8<span class=\"tag\">&lt;/<span class=\"name\">project.build.sourceEncoding</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">properties</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">dependencies</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>org.springframework.boot<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>spring-boot-starter-web<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>org.springframework.boot<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>spring-boot-starter-test<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>org.springframework.boot<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>spring-boot-starter-aop<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>org.springframework.boot<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>spring-boot-devtools<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">scope</span>&gt;</span>runtime<span class=\"tag\">&lt;/<span class=\"name\">scope</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>org.projectlombok<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>lombok<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>$&#123;lmbok.version&#125;<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"åŸºäºæ³¨è§£çš„aopå®ç°\"><a href=\"#åŸºäºæ³¨è§£çš„aopå®ç°\" class=\"headerlink\" title=\"åŸºäºæ³¨è§£çš„aopå®ç°\"></a>åŸºäºæ³¨è§£çš„aopå®ç°</h3><figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> cn.z201.io.annotation.aop;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> java.lang.annotation.ElementType;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.lang.annotation.Retention;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.lang.annotation.RetentionPolicy;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.lang.annotation.Target;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@author</span> z201.coding@gmail.com</span></span><br><span class=\"line\"><span class=\"comment\"> **/</span></span><br><span class=\"line\"><span class=\"meta\">@Target</span>(ElementType.METHOD)</span><br><span class=\"line\"><span class=\"meta\">@Retention</span>(RetentionPolicy.RUNTIME)</span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"meta\">@interface</span> AnnotationAop &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\">String <span class=\"title\">value</span><span class=\"params\">()</span></span>;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">package</span> cn.z201.io.annotation.aop;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> org.aspectj.lang.JoinPoint;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.aspectj.lang.annotation.*;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.aspectj.lang.reflect.MethodSignature;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.springframework.stereotype.Component;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> java.lang.reflect.Method;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@author</span> z201.coding@gmail.com</span></span><br><span class=\"line\"><span class=\"comment\"> **/</span></span><br><span class=\"line\"><span class=\"meta\">@Component</span></span><br><span class=\"line\"><span class=\"meta\">@Aspect</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">LogsAspect</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Pointcut</span>(<span class=\"string\">\"@annotation(cn.z201.io.annotation.aop.AnnotationAop)\"</span>)</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title\">cutMethod</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * å¼‚å¸¸é€šçŸ¥ï¼šç›®æ ‡æ–¹æ³•æŠ›å‡ºå¼‚å¸¸æ—¶æ‰§è¡Œ</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"meta\">@AfterThrowing</span>(<span class=\"string\">\"cutMethod()\"</span>)</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">afterThrowing</span><span class=\"params\">(JoinPoint joinPoint)</span> </span>&#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">\"  after throwing\"</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * ç¯ç»•é€šçŸ¥ï¼šçµæ´»è‡ªç”±çš„åœ¨ç›®æ ‡æ–¹æ³•ä¸­åˆ‡å…¥ä»£ç </span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"meta\">@Before</span>(<span class=\"string\">\"cutMethod()\"</span>)</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">around</span><span class=\"params\">(JoinPoint joinPoint)</span> <span class=\"keyword\">throws</span> Throwable </span>&#123;</span><br><span class=\"line\">        <span class=\"comment\">// è·å–ç›®æ ‡æ–¹æ³•çš„åç§°</span></span><br><span class=\"line\">        String methodName = joinPoint.getSignature().getName();</span><br><span class=\"line\">        <span class=\"comment\">// è·å–æ–¹æ³•ä¼ å…¥å‚æ•°</span></span><br><span class=\"line\">        Object[] params = joinPoint.getArgs();</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (<span class=\"keyword\">null</span> != params &amp;&amp; params.length != <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">            System.out.println(<span class=\"string\">\" method name \"</span> + methodName + <span class=\"string\">\" args \"</span> + params[<span class=\"number\">0</span>]);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"comment\">// æ‰§è¡Œæºæ–¹æ³•</span></span><br><span class=\"line\">        AnnotationAop annotationAop = getDeclaredAnnotation(joinPoint);</span><br><span class=\"line\">        System.out.println(<span class=\"string\">\"  annotationAop  value \"</span> + annotationAop.value());</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * è·å–æ–¹æ³•ä¸­å£°æ˜çš„æ³¨è§£</span></span><br><span class=\"line\"><span class=\"comment\">     *</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> joinPoint</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@return</span></span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@throws</span> NoSuchMethodException</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> AnnotationAop <span class=\"title\">getDeclaredAnnotation</span><span class=\"params\">(JoinPoint joinPoint)</span> <span class=\"keyword\">throws</span> NoSuchMethodException </span>&#123;</span><br><span class=\"line\">        <span class=\"comment\">// è·å–æ–¹æ³•å</span></span><br><span class=\"line\">        String methodName = joinPoint.getSignature().getName();</span><br><span class=\"line\">        <span class=\"comment\">// åå°„è·å–ç›®æ ‡ç±»</span></span><br><span class=\"line\">        Class&lt;?&gt; targetClass = joinPoint.getTarget().getClass();</span><br><span class=\"line\">        <span class=\"comment\">// æ‹¿åˆ°æ–¹æ³•å¯¹åº”çš„å‚æ•°ç±»å‹</span></span><br><span class=\"line\">        Class&lt;?&gt;[] parameterTypes = ((MethodSignature) joinPoint.getSignature()).getParameterTypes();</span><br><span class=\"line\">        <span class=\"comment\">// æ ¹æ®ç±»ã€æ–¹æ³•ã€å‚æ•°ç±»å‹ï¼ˆé‡è½½ï¼‰è·å–åˆ°æ–¹æ³•çš„å…·ä½“ä¿¡æ¯</span></span><br><span class=\"line\">        Method objMethod = targetClass.getMethod(methodName, parameterTypes);</span><br><span class=\"line\">        <span class=\"comment\">// æ‹¿åˆ°æ–¹æ³•å®šä¹‰çš„æ³¨è§£ä¿¡æ¯</span></span><br><span class=\"line\">        AnnotationAop annotation = objMethod.getDeclaredAnnotation(AnnotationAop<span class=\"class\">.<span class=\"keyword\">class</span>)</span>;</span><br><span class=\"line\">        <span class=\"comment\">// è¿”å›</span></span><br><span class=\"line\">        <span class=\"keyword\">return</span> annotation;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">package</span> cn.z201.io.annotation.aop;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> org.springframework.boot.SpringApplication;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.springframework.boot.autoconfigure.SpringBootApplication;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.springframework.context.annotation.EnableAspectJAutoProxy;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@author</span> z201.coding@gmail.com</span></span><br><span class=\"line\"><span class=\"comment\"> **/</span></span><br><span class=\"line\"><span class=\"meta\">@SpringBootApplication</span></span><br><span class=\"line\"><span class=\"meta\">@EnableAspectJAutoProxy</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">AnnotationApp</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String[] args)</span> </span>&#123;</span><br><span class=\"line\">        SpringApplication.run(AnnotationApp<span class=\"class\">.<span class=\"keyword\">class</span>, <span class=\"title\">args</span>)</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">package</span> cn.z201.io.annotation.aop;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> org.springframework.web.bind.annotation.*;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.springframework.web.servlet.ModelAndView;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@author</span> z201.coding@gmail.com</span></span><br><span class=\"line\"><span class=\"comment\"> **/</span></span><br><span class=\"line\"><span class=\"meta\">@RestController</span></span><br><span class=\"line\"><span class=\"meta\">@RequestMapping</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">HelloController</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@GetMapping</span>(<span class=\"string\">\"\"</span>)</span><br><span class=\"line\">    <span class=\"meta\">@AnnotationAop</span>(<span class=\"string\">\"Aop\"</span>)</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> Object <span class=\"title\">index</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        ModelAndView modelAndView = <span class=\"keyword\">new</span> ModelAndView();</span><br><span class=\"line\">        modelAndView.addObject(<span class=\"string\">\"value\"</span>, <span class=\"string\">\"hello annotationApp  \"</span>);</span><br><span class=\"line\">        <span class=\"keyword\">return</span> modelAndView.getModelMap();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>è¾“å‡ºç»“æœ</p>\n<p>â€‹    æ§åˆ¶å° annotationAop  value Aop</p>\n<p>â€‹        å“åº” <strong>{</strong>â€œvalueâ€: â€œhello annotationApp  â€œ<strong>}</strong></p>\n</blockquote>\n<h3 id=\"END\"><a href=\"#END\" class=\"headerlink\" title=\"END\"></a>END</h3>","categories":["å®è·µ"],"tags":["Java","Spring","Aop"]},{"title":"2016-09-30-æˆéƒ½3æ—¥æ¸¸","url":"/posts/3360184888/","content":"<blockquote>\n<p> 2016å¹´å»æˆéƒ½æµªçš„æ—¥å­ã€‚</p>\n</blockquote>\n<p><img src=\"https://z201.oss-cn-shanghai.aliyuncs.com/%E6%97%85%E6%B8%B8/%E6%88%90%E9%83%BD/P61001-161916.jpg\"></p>\n<p><img src=\"https://z201.oss-cn-shanghai.aliyuncs.com/%E6%97%85%E6%B8%B8/%E6%88%90%E9%83%BD/P61001-161742.jpg\"></p>\n<a id=\"more\"></a>\n\n<p><img src=\"https://z201.oss-cn-shanghai.aliyuncs.com/%E6%97%85%E6%B8%B8/%E6%88%90%E9%83%BD/P61001-143634.jpg\"></p>\n<p><img src=\"https://z201.oss-cn-shanghai.aliyuncs.com/%E6%97%85%E6%B8%B8/%E6%88%90%E9%83%BD/P61001-141541.jpg\"></p>\n<p><img src=\"https://z201.oss-cn-shanghai.aliyuncs.com/%E6%97%85%E6%B8%B8/%E6%88%90%E9%83%BD/P61001-114624.jpg\"></p>\n<p><img src=\"https://z201.oss-cn-shanghai.aliyuncs.com/%E6%97%85%E6%B8%B8/%E6%88%90%E9%83%BD/P61001-102823.jpg\"></p>\n<p><img src=\"https://z201.oss-cn-shanghai.aliyuncs.com/%E6%97%85%E6%B8%B8/%E6%88%90%E9%83%BD/P61001-100939.jpg\"></p>\n<p><img src=\"https://z201.oss-cn-shanghai.aliyuncs.com/%E6%97%85%E6%B8%B8/%E6%88%90%E9%83%BD/P60930-141425.jpg\"></p>\n<p><img src=\"https://z201.oss-cn-shanghai.aliyuncs.com/%E6%97%85%E6%B8%B8/%E6%88%90%E9%83%BD/P60930-132854.jpg\"></p>\n<p><img src=\"https://z201.oss-cn-shanghai.aliyuncs.com/%E6%97%85%E6%B8%B8/%E6%88%90%E9%83%BD/P60930-131647.jpg\"></p>\n<p><img src=\"https://z201.oss-cn-shanghai.aliyuncs.com/%E6%97%85%E6%B8%B8/%E6%88%90%E9%83%BD/P60930-130811.jpg\"></p>\n<p><img src=\"https://z201.oss-cn-shanghai.aliyuncs.com/%E6%97%85%E6%B8%B8/%E6%88%90%E9%83%BD/P60930-130500.jpg\"></p>\n","categories":["éšè®°"],"tags":["éšè®°","æ—…æ¸¸"]},{"title":"2016-10-é‡åº†ä¸‰å³¡åšç‰©é¦†","url":"/posts/2257488114/","content":"<blockquote>\n<p>2016å¹´å›½åº†çš„æ—¶å€™åœ¨é‡åº†ç©äº†å‡ å¤©ã€ç…§ç‰‡æ”¾æ‰‹æœºé‡Œé¢å¥½ä¹…äº†ã€‚æ—¶é—´æœ‰ç‚¹ä¹…äº†ï¼Œå¿˜è®°å…·ä½“éƒ½å¹²å•¥äº†ã€‚ç•™ä¸‹ç…§ç‰‡å›å¿†å’¯ã€‚</p>\n</blockquote>\n<p>å—¯æ™šä¸Šåˆ°çš„ã€‚  </p>\n<p><img src=\"https://z201.oss-cn-shanghai.aliyuncs.com/%E6%97%85%E6%B8%B8/%E9%87%8D%E5%BA%86/P61027-193502.jpg\"></p>\n<p>æ—…é¦†  </p>\n<a id=\"more\"></a>\n\n<p><img src=\"https://z201.oss-cn-shanghai.aliyuncs.com/%E6%97%85%E6%B8%B8/%E9%87%8D%E5%BA%86/P61004-073223.jpg\"></p>\n<p>è½¨é“ç”µè½¦</p>\n<p><img src=\"https://z201.oss-cn-shanghai.aliyuncs.com/%E6%97%85%E6%B8%B8/%E9%87%8D%E5%BA%86/P61003-142931.jpg\"></p>\n<p>é€›ä¸‰å³¡åšç‰©é¦†å’¯</p>\n<p><img src=\"https://z201.oss-cn-shanghai.aliyuncs.com/%E6%97%85%E6%B8%B8/%E9%87%8D%E5%BA%86/P61003-142048.jpg\"></p>\n<p><img src=\"https://z201.oss-cn-shanghai.aliyuncs.com/%E6%97%85%E6%B8%B8/%E9%87%8D%E5%BA%86/P61003-142038.jpg\"></p>\n<p><img src=\"https://z201.oss-cn-shanghai.aliyuncs.com/%E6%97%85%E6%B8%B8/%E9%87%8D%E5%BA%86/P61003-141337.jpg\"></p>\n<p><img src=\"https://z201.oss-cn-shanghai.aliyuncs.com/%E6%97%85%E6%B8%B8/%E9%87%8D%E5%BA%86/P61003-140149.jpg\"></p>\n<p><img src=\"https://z201.oss-cn-shanghai.aliyuncs.com/%E6%97%85%E6%B8%B8/%E9%87%8D%E5%BA%86/P61003-140149.jpg\"></p>\n<p><img src=\"https://z201.oss-cn-shanghai.aliyuncs.com/%E6%97%85%E6%B8%B8/%E9%87%8D%E5%BA%86/P61003-135830.jpg\"></p>\n<p><img src=\"https://z201.oss-cn-shanghai.aliyuncs.com/%E6%97%85%E6%B8%B8/%E9%87%8D%E5%BA%86/P61003-135756.jpg\"></p>\n<p><img src=\"https://z201.oss-cn-shanghai.aliyuncs.com/%E6%97%85%E6%B8%B8/%E9%87%8D%E5%BA%86/P61003-135753.jpg\"></p>\n<p><img src=\"https://z201.oss-cn-shanghai.aliyuncs.com/%E6%97%85%E6%B8%B8/%E9%87%8D%E5%BA%86/P61003-135614.jpg\"></p>\n<p><img src=\"https://z201.oss-cn-shanghai.aliyuncs.com/%E6%97%85%E6%B8%B8/%E9%87%8D%E5%BA%86/P61003-135555.jpg\"></p>\n<p><img src=\"https://z201.oss-cn-shanghai.aliyuncs.com/%E6%97%85%E6%B8%B8/%E9%87%8D%E5%BA%86/P61003-135520.jpg\"></p>\n<p><img src=\"https://z201.oss-cn-shanghai.aliyuncs.com/%E6%97%85%E6%B8%B8/%E9%87%8D%E5%BA%86/P61003-135512.jpg\"></p>\n<p><img src=\"https://z201.oss-cn-shanghai.aliyuncs.com/%E6%97%85%E6%B8%B8/%E9%87%8D%E5%BA%86/P61003-135414.jpg\"></p>\n<p><img src=\"https://z201.oss-cn-shanghai.aliyuncs.com/%E6%97%85%E6%B8%B8/%E9%87%8D%E5%BA%86/P61003-135340.jpg\"></p>\n<p><img src=\"https://z201.oss-cn-shanghai.aliyuncs.com/%E6%97%85%E6%B8%B8/%E9%87%8D%E5%BA%86/P61003-135332.jpg\"></p>\n<p><img src=\"https://z201.oss-cn-shanghai.aliyuncs.com/%E6%97%85%E6%B8%B8/%E9%87%8D%E5%BA%86/P61003-135213.jpg\"></p>\n<p><img src=\"https://z201.oss-cn-shanghai.aliyuncs.com/%E6%97%85%E6%B8%B8/%E9%87%8D%E5%BA%86/P61003-134923.jpg\"></p>\n<p><img src=\"https://z201.oss-cn-shanghai.aliyuncs.com/%E6%97%85%E6%B8%B8/%E9%87%8D%E5%BA%86/P61003-134908.jpg\"></p>\n<p><img src=\"https://z201.oss-cn-shanghai.aliyuncs.com/%E6%97%85%E6%B8%B8/%E9%87%8D%E5%BA%86/P61003-125522.jpg\"></p>\n<p><img src=\"https://z201.oss-cn-shanghai.aliyuncs.com/%E6%97%85%E6%B8%B8/%E9%87%8D%E5%BA%86/P61003-125236.jpg\"></p>\n<p>çœ‹åˆ°è¿™é‡Œï¼Œä½ çš„æµé‡åœ¨ç‡ƒçƒ§ã€‚</p>\n","categories":["éšè®°"],"tags":["æ—…æ¸¸"]},{"title":"HexoåŸºç¡€ä½¿ç”¨æ–¹æ³•","url":"/posts/165020189/","content":"<p>Welcome to <a href=\"https://hexo.io/\" target=\"_blank\" rel=\"noopener\">Hexo</a>! This is your very first post. Check <a href=\"https://hexo.io/docs/\" target=\"_blank\" rel=\"noopener\">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href=\"https://hexo.io/docs/troubleshooting.html\" target=\"_blank\" rel=\"noopener\">troubleshooting</a> or you can ask me on <a href=\"https://github.com/hexojs/hexo/issues\" target=\"_blank\" rel=\"noopener\">GitHub</a>.</p>\n<h2 id=\"Quick-Start\"><a href=\"#Quick-Start\" class=\"headerlink\" title=\"Quick Start\"></a>Quick Start</h2><h3 id=\"Create-a-new-post\"><a href=\"#Create-a-new-post\" class=\"headerlink\" title=\"Create a new post\"></a>Create a new post</h3><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">$ hexo new <span class=\"string\">\"My New Post\"</span></span><br></pre></td></tr></table></figure>\n\n<p>More info: <a href=\"https://hexo.io/docs/writing.html\" target=\"_blank\" rel=\"noopener\">Writing</a></p>\n<h3 id=\"Create-a-new-draft\"><a href=\"#Create-a-new-draft\" class=\"headerlink\" title=\"Create a new draft\"></a>Create a new draft</h3><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">$ hexo new draft <span class=\"string\">\"new draft\"</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"Crete-a-new-page\"><a href=\"#Crete-a-new-page\" class=\"headerlink\" title=\"Crete a new page\"></a>Crete a new page</h3><figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\">$ hexo <span class=\"keyword\">new</span> page <span class=\"string\">\"new page\"</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"Run-server\"><a href=\"#Run-server\" class=\"headerlink\" title=\"Run server\"></a>Run server</h3><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">$ hexo server</span><br></pre></td></tr></table></figure>\n\n<p>More info: <a href=\"https://hexo.io/docs/server.html\" target=\"_blank\" rel=\"noopener\">Server</a></p>\n<h3 id=\"Generate-static-files\"><a href=\"#Generate-static-files\" class=\"headerlink\" title=\"Generate static files\"></a>Generate static files</h3><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">$ hexo generate</span><br><span class=\"line\">$ hexo g</span><br></pre></td></tr></table></figure>\n\n<p>More info: <a href=\"https://hexo.io/docs/generating.html\" target=\"_blank\" rel=\"noopener\">Generating</a></p>\n<h3 id=\"Deploy-to-remote-sites\"><a href=\"#Deploy-to-remote-sites\" class=\"headerlink\" title=\"Deploy to remote sites\"></a>Deploy to remote sites</h3><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">$ hexo deploy</span><br><span class=\"line\">$ hexo d</span><br></pre></td></tr></table></figure>\n\n<p>More info: <a href=\"https://hexo.io/docs/deployment.html\" target=\"_blank\" rel=\"noopener\">Deployment</a></p>\n<h3 id=\"Localization-testing\"><a href=\"#Localization-testing\" class=\"headerlink\" title=\"Localization testing\"></a>Localization testing</h3><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">$ hexo server -g</span><br></pre></td></tr></table></figure>\n\n<p>visit website : <a href=\"http://localhost:4000/\" target=\"_blank\" rel=\"noopener\">http://localhost:4000</a> </p>\n","categories":["éšè®°"],"tags":["éšè®°"]}]